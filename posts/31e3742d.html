<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>è€ƒè¯ï¼šAWS DVA-C02 | é´»éµ èªŒé”</title><meta name="author" content="é´»é”"><meta name="copyright" content="é´»é”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#1a1a1a"><meta name="description" content="ä¸ºå•¥è¦è€ƒè¯ ğŸ˜… ä¸ºå•¥è¦è€ƒè¯ ğŸ˜… ä¸ºå•¥è¦è€ƒè¯ ğŸ˜…"><meta property="og:type" content="article"><meta property="og:title" content="è€ƒè¯ï¼šAWS DVA-C02"><meta property="og:url" content="https://hongdalin.blog/posts/31e3742d.html"><meta property="og:site_name" content="é´»éµ èªŒé”"><meta property="og:description" content="ä¸ºå•¥è¦è€ƒè¯ ğŸ˜… ä¸ºå•¥è¦è€ƒè¯ ğŸ˜… ä¸ºå•¥è¦è€ƒè¯ ğŸ˜…"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img735yqku3pzfqxatav0t55gipvv1zzh2.jpg"><meta property="article:published_time" content="2024-03-30T17:03:05.000Z"><meta property="article:modified_time" content="2024-07-19T05:20:02.034Z"><meta property="article:author" content="é´»é”"><meta property="article:tag" content="AWS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img735yqku3pzfqxatav0t55gipvv1zzh2.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·å…‹è¨æ–¯.GIF"><link rel="canonical" href="https://hongdalin.blog/posts/31e3742d.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"å¤©",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"è€ƒè¯ï¼šAWS DVA-C02",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-07-19 00:20:02"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,n){if(0===n)return;const o=864e5*n,a={value:t,expiry:(new Date).getTime()+o};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t);if(!((new Date).getTime()>n.expiry))return n.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,n)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onerror=n,o.onload=o.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)})),e.getCSS=e=>new Promise(((t,n)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=()=>t(),o.onerror=()=>n(),document.head.appendChild(o)}));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/color.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/font.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/icon.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/layout.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·ç‹—å­.GIF" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img735yqku3pzfqxatav0t55gipvv1zzh2.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="é´»éµ èªŒé”"><span class="site-name">é´»éµ èªŒé”</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">è€ƒè¯ï¼šAWS DVA-C02</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-03-30T17:03:05.000Z" title="å‘è¡¨äº 2024-03-30 12:03:05">2024-03-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-07-19T05:20:02.034Z" title="æ›´æ–°äº 2024-07-19 00:20:02">2024-07-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Certification/">Certification</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">18.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>97åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="è€ƒè¯ï¼šAWS DVA-C02"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><ul><li>å®˜ç½‘: <a target="_blank" rel="noopener" href="https://aws.amazon.com/certification/certified-developer-associate/">https://aws.amazon.com/certification/certified-developer-associate/</a></li><li>ç½‘è¯¾ï¼š<a target="_blank" rel="noopener" href="https://www.udemy.com/course/aws-certified-developer-associate-dva-c01/">https://www.udemy.com/course/aws-certified-developer-associate-dva-c01/</a></li><li>é¢˜åº“: <a target="_blank" rel="noopener" href="https://www.udemy.com/course/aws-certified-developer-associate-practice-tests-dva-c01/">https://www.udemy.com/course/aws-certified-developer-associate-practice-tests-dva-c01/</a></li><li>é¢˜åº“: <a target="_blank" rel="noopener" href="https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/">https://www.examtopics.com/exams/amazon/aws-certified-developer-associate-dva-c02/view/</a></li><li>å‡†å¤‡æ—¶é—´: 3 æœˆ 30 å·å‡†å¤‡, 6 æœˆ 26 å·è€ƒè¯• (å› ä¸ºä¸­é—´è¦ä¸Šè¯¾), å·²é€šè¿‡ (æ•´ä½“éš¾åº¦æ¯” SAA ä½, å†™å®Œè¿˜å‰© 60 åˆ†é’Ÿ)</li></ul></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h3 id="1-AWS-Cloud-Overview"><a href="#1-AWS-Cloud-Overview" class="headerlink" title="1. AWS Cloud Overview"></a>1. AWS Cloud Overview</h3><h4 id="AWS-Regions"><a href="#AWS-Regions" class="headerlink" title="AWS Regions"></a>AWS Regions</h4><ul><li>A Region is a cluster of data centers</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231130.png"></p><ul><li>To reuse SSH keys in AWS Region<ul><li>Generate a public SSH key from the private SSH key. Import the key to each AWS Region</li></ul></li></ul><hr><h4 id="AWS-Availability-Zone"><a href="#AWS-Availability-Zone" class="headerlink" title="AWS Availability Zone"></a>AWS Availability Zone</h4><ul><li>ä¸€ä¸ª Region å¯ä»¥æœ‰ 3 - 6 ä¸ª AZ, æ¯ä¸ª AZ éƒ½æ˜¯åˆ†å¼€çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140727.png"></p><hr><h4 id="AWS-Edge-Locations"><a href="#AWS-Edge-Locations" class="headerlink" title="AWS Edge Locations"></a>AWS Edge Locations</h4><ul><li>Deliver content to user with low latency (ç¦»ç”¨æˆ·è¶Šè¿‘, deliver é€Ÿåº¦è¶Šå¿«)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140903.png"></p><hr><h3 id="2-IAM"><a href="#2-IAM" class="headerlink" title="2. IAM"></a>2. IAM</h3><h4 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h4><ul><li>Root Account: Created by default, donâ€™t share with others</li><li>Users: People within the organization</li><li>Groups: Only contain Users, not other Groups (User å¯ä»¥å±äºå¤šä¸ª Group)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145736.png"></p><ul><li>AWS éœ€è¦è‡³å°‘ 5 weeks æ¥ç”Ÿæˆ budget forecasts</li><li>æ³¨æ„, User é»˜è®¤æ— æ³• access AWS Billing and Cost Management console, å¿…é¡»è¦ grant access æ‰è¡Œ</li></ul><hr><h4 id="IAM-Permissions"><a href="#IAM-Permissions" class="headerlink" title="IAM Permissions"></a>IAM Permissions</h4><ul><li>å®šä¹‰äº† User æˆ–è€… Group çš„ Permissions<ul><li>è¦éµå®ˆ Least Privilege Principle</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160124.png"></p><blockquote><p>As an AWS security best practice, you should not create an IAM user and pass the userâ€™s credentials to the application or embed the credentials in the application</p></blockquote><hr><h4 id="IAM-Polices"><a href="#IAM-Polices" class="headerlink" title="IAM Polices"></a>IAM Polices</h4><ul><li>Statements é‡Œé¢å¿…é¡»åŒ…å«: Effect, Principal, Action, Resource<ul><li>Inline Policy æ˜¯ assign ç»™ä¸ªäººçš„</li></ul></li><li>æ³¨æ„, The only resource-based policy IAM support is Trust policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175653.png"></p><blockquote><p>IAM policies define permissions for an action regardless of the method that used to perform the operation.</p></blockquote><hr><h4 id="IAM-MFA"><a href="#IAM-MFA" class="headerlink" title="IAM MFA"></a>IAM MFA</h4><ul><li>Protect Root Accounts and IAM Users</li><li>MFA options: Virtual MFA Device, U2F Sercurity Key (USB)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180624.png"></p><hr><h4 id="IAM-CLI-amp-SDK"><a href="#IAM-CLI-amp-SDK" class="headerlink" title="IAM CLI &amp; SDK"></a>IAM CLI &amp; SDK</h4><ul><li>å¯ä»¥ç”¨ AWS Management Console, AWS CLI, AWS SDK æ¥è®¿é—® AWS<ul><li>Set the <code>DeleteOnTermination</code> attribute to False using the command line</li><li>å¦‚æœè€ƒè¯•é‡åˆ°ä¸ä¼šçš„å°±é€‰ CLI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193342.png"></p><hr><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li>æˆæƒ AWS æœåŠ¡å»åšæŸäº›äº‹</li><li>å¸¸è§çš„ Role: EC2 Instance Role, Lambda Function Role ç­‰ç­‰</li><li>IAM Instance Role: ä¸º EC2 å®ä¾‹åˆ†é… temporary credentialsï¼Œä»¥ä¾¿å®ä¾‹èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®å…¶ä»– AWS æœåŠ¡</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203306.png"></p><blockquote><p>An IAM entity that defines a set of permissions for making requests to AWS services, and will be used by an AWS service</p></blockquote><hr><h4 id="IAM-Security-Tools"><a href="#IAM-Security-Tools" class="headerlink" title="IAM Security Tools"></a>IAM Security Tools</h4><ul><li>IAM Credentials Report: è¿”å›ç”¨æˆ·æ•°æ®å’Œ credentials</li><li>IAM Access Advisor: æ˜¾ç¤ºå½“å‰ç”¨æˆ·è¢«æˆæƒçš„æœåŠ¡å’Œä½¿ç”¨æ—¶é—´</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203553.png"></p><hr><h3 id="3-EC2-Fundamentals"><a href="#3-EC2-Fundamentals" class="headerlink" title="3. EC2 Fundamentals"></a>3. EC2 Fundamentals</h3><h4 id="AWS-EC2"><a href="#AWS-EC2" class="headerlink" title="AWS EC2"></a>AWS EC2</h4><ul><li>EC2 &#x3D; Elastic Compute Cloud &#x3D; IaaS , ç»‘å®š AZ</li><li>SSH åˆ° EC2 Instance çš„ Public IP (è®°ä½ 169, meta-data)<ul><li><code>http://169.254.169.254/latest/meta-data/public-ipv4</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214749.png"></p><ul><li>User Data: EC2 å¯åŠ¨çš„æ—¶å€™è¿è¡Œçš„ä»£ç <ul><li>By default, user data runs only during boot cycle when first lauch instance</li><li>By default, scripts entered as user data are executed with root user privileges</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214956.png"></p><ul><li>å¦‚æœè¦ monitor ä¸€ä¸ª EC2 Instance, <code>aws ec2 monitor-instances --instance-ids &#123;id&#125;</code></li><li>å¦‚æœè¦è§£å†³ EC2 based web servers in high CPU utilization issue<ul><li>Configure an SSL&#x2F;TLS certificate on an Application Load Balancer via AWS Certificate Manager (ACM)</li><li>Create an HTTPS listener on the Application Load Balancer with SSL termination</li></ul></li></ul><hr><h4 id="EC2-Instance-Type"><a href="#EC2-Instance-Type" class="headerlink" title="EC2 Instance Type"></a>EC2 Instance Type</h4><ul><li>ä¸€å…± 7 ç§ EC2 Instance Type, ä½† 4 ç§ç”¨çš„æœ€å¤š<ul><li>General Purpose: Balanced (å¹³è¡¡çš„)</li><li>Compute Optimized: High performance (å¤„ç† Batch, è§†é¢‘å’Œ HPC)</li><li>Memory Optimized: Process data in memory (å¤„ç† cache)</li><li>Storage Optimized: Read and write data on local storage (OLTP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220941.png"></p><hr><h4 id="EC2-Security-Groups"><a href="#EC2-Security-Groups" class="headerlink" title="EC2 Security Groups"></a>EC2 Security Groups</h4><ul><li>Control how traffic is allowed in and out of EC2 instance<ul><li>Security groups only contain allow rules (EC2 å‡ºé—®é¢˜ä¼˜å…ˆæ£€æŸ¥ Security Group)</li></ul></li><li>å¯ä»¥ä½œä¸º Security Group çš„ Inbound Rule æœ‰ IP address, CIDR block, Security Group</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222531.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223020.png"></p><hr><h4 id="EC2-Instance-Purchasing-Options"><a href="#EC2-Instance-Purchasing-Options" class="headerlink" title="EC2 Instance Purchasing Options"></a>EC2 Instance Purchasing Options</h4><ul><li>On-Demand Intances: Short workload, pay by second (çŸ­æœŸå†…ç´§æ€¥ä½¿ç”¨)</li><li>Reserved: 1 - 3 years (72% discount, reserve capacity in an AZ)<ul><li>Reserved Instance: Long workload (1 - 3 å¹´, discount éšå¹´ä»½å¢åŠ )</li><li>Convertible Reserved Instances (RI): Long workload with flexible instance (66% discount, ä½†æ˜¯å¯ä»¥è‡ªç”±æ”¹å˜ Instance Type)</li></ul></li><li>Saving Plans: 1 - 3 years, commitment to an amount of usage (72% discount, è¦å®šä¸€ä¸ªä½¿ç”¨ä¸Šé™, è¶…è¿‡ä¸Šé™å°±å˜æˆ On-Demand)<ul><li>è¿˜æœ‰ Compute Saving Plan, 66% discount, work with Lambda and Fargate</li></ul></li><li>Spot Instance: Short workload, can lose instance (æœ€ä¾¿å®œ, 90% discount)</li><li>Dedicated Host: The physical server is yours (æœ€è´µ, å¯ä»¥æ§åˆ¶ how Instance placed)</li><li>Dedicated Instance: Run hardware, but not lockdown to you (æœåŠ¡å™¨å¤§éƒ¨åˆ†æ˜¯ä½ çš„)</li><li>Capacity Reservation: Reserve capacity in AZ (æ¯”å¦‚ä¸€å¤©ä¸­åªæœ‰å‡ ä¸ªå°æ—¶éœ€è¦ EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224149.png"></p><ul><li>Reserved Instance æœ‰ Regional å’Œ Zonal, Zonal æä¾› capacity reservation, Regional ä¸æä¾›</li></ul><hr><h3 id="4-EC2-Instance-Storage"><a href="#4-EC2-Instance-Storage" class="headerlink" title="4. EC2 Instance Storage"></a>4. EC2 Instance Storage</h3><h4 id="AWS-EBS"><a href="#AWS-EBS" class="headerlink" title="AWS EBS"></a>AWS EBS</h4><ul><li>Block-level storage, ç±»ä¼¼ network drive, ç»‘å®š AZ, provisioned capacity<ul><li>å¯ä»¥ä»ä¸€ä¸ª EC2 Instance å–ä¸‹æ¥è£…åˆ°å¦ä¸€ä¸ªä¸Š</li><li>è®°ä½ EBS æ˜¯ç»‘å®š AZ çš„, å¾ˆé‡è¦</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191440.png"></p><ul><li>EBS - Delete on Termination attribute<ul><li>By default, Root Volume will be deleted on termination (é‡è¦)</li><li>By default, other EBS volume will not be deleted on termination (é‡è¦)</li><li>Can be controled by AWS console &#x2F; AWS CLI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002840.png"></p><ul><li>å…³äº EBS Encryption æœ‰ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>Encryption by default is a Region-specific setting. If you enable it for a Region, you cannot disable it for individual volumes or snapshots in that Region</li><li>A volume restored from an encrypted snapshot, or a copy of an encrypted snapshot is always encrypted</li></ul></li></ul><hr><h4 id="EBS-Snapshots"><a href="#EBS-Snapshots" class="headerlink" title="EBS Snapshots"></a>EBS Snapshots</h4><ul><li>Make a backup of EBS volume (å¤‡ä»½ EBS)<ul><li>å¯ä»¥å°†è¿™ä¸ª snapshot ç”¨åœ¨å…¶ä»– AZ æˆ–è€… Region ä¸Š</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195715.png"></p><ul><li>EBS Snapchot Archive: ä¾¿å®œ 75%</li><li>Recycle Bin: Setup rules to retain deleted snapshots (å¯ä»¥ recover)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195833.png"></p><hr><h4 id="AWS-AMI"><a href="#AWS-AMI" class="headerlink" title="AWS AMI"></a>AWS AMI</h4><ul><li>AMI: Amazon Machine Image, customization of an EC2 Instance<ul><li>å¯ä»¥æ›´å¥½çš„ç®¡ç†å’Œå¯åŠ¨ EC2 Instance</li></ul></li><li>Built for a specific region and can copy across regions (AMI è·¨åŸŸå¤åˆ¶)<ul><li>æ³¨æ„, AMIs are built for a specific AWS Region</li></ul></li></ul><blockquote><p>When the new AMI is copied from Region A into Region B, it automatically creates a snapshot in Region B (æ³¨æ„, è·¨åŸŸ copy AMI ä¼šäº§ç”Ÿ snapshot)</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200249.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200341.png"></p><hr><h4 id="EC2-Instance-Store"><a href="#EC2-Instance-Store" class="headerlink" title="EC2 Instance Store"></a>EC2 Instance Store</h4><ul><li>Block-level storage, ç‰©ç†ç¡¬ç›˜ (Physical drive, temporary storage, å¯ä»¥å¤„ç†æ•°æ®åº“)</li><li>High random I&#x2F;O performance, good for cache at low cost (é‡è¦)</li><li>EC2 Instance Store lose when stopped (Ephemeral, æ•°æ®åœ¨ Instance Store å…³é—­æ—¶æ¶ˆå¤±)<ul><li>åæ­£è®°ä½, Instance Store ä¸èƒ½å¤ç”¨, Instance Store é‡Œçš„æ•°æ®ä¸ä¼š preserve</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203146.png"></p><hr><h4 id="EBS-Volume-Types"><a href="#EBS-Volume-Types" class="headerlink" title="EBS Volume Types"></a>EBS Volume Types</h4><ul><li>General Purpose (gp2 &#x2F; gp3): Balanced, cost-effective</li><li>Provisioned IOPS (io1 &#x2F; io2): High-performance, support Multi-Attach<ul><li>Low latency, high throughput</li><li>è®°ä½, io çš„æ¯” gp çš„è´µ, ä½†æ˜¯ io çš„ IOPS ä¹Ÿæ¯” gp é«˜</li><li>gp2 çš„ max IOPS æ˜¯ 5.3 TiB</li></ul></li><li>Hard Disk Drives (HDD): Data intensive (st1) æˆ–è€… less frequent access (sc1)<ul><li>HDD ä¸å¯ä»¥ç”¨æ¥åˆ›å»º EC2</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203437.png"></p><hr><h4 id="EBS-Multi-Attach"><a href="#EBS-Multi-Attach" class="headerlink" title="EBS Multi-Attach"></a>EBS Multi-Attach</h4><ul><li>Attach same EBS volume to multiple EC2 instance in same AZ (è®°ä½æ˜¯ç›¸åŒçš„ AZ)</li><li>Only for io1 &#x2F; io2 family (Provisioned IOPS SSD, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203956.png"></p><hr><h4 id="EBS-RAID"><a href="#EBS-RAID" class="headerlink" title="EBS RAID"></a>EBS RAID</h4><ul><li>RAID 0 (çœ‹é‡ I&#x2F;O performance)<ul><li>Use RAID 0 when I&#x2F;O performance is more important than fault tolerance</li><li>å¯ä»¥ç”¨æ¥æé«˜ EBS volume çš„ performance</li></ul></li><li>RAID 1 (çœ‹é‡ falut tolerance)<ul><li>Use RAID 1 when fault tolerance is more important than I&#x2F;O performance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q37-i1.jpg"></p><hr><h4 id="AWS-EFS"><a href="#AWS-EFS" class="headerlink" title="AWS EFS"></a>AWS EFS</h4><ul><li>NFS (network file system), å¯ä»¥ mount åˆ°å¤šä¸ª EC2 Instance<ul><li>Scale automatically, highly availiable, no capacity planning</li></ul></li><li>EC2 Instances can access files on an EFS file system across AZs, Regions and VPCs<ul><li>é‡è¦, å¯ä»¥ä»ä¸åŒçš„ AZ, Region, VPC æ¥ access</li><li>å¯ä»¥ç”¨ VPC Security Group æˆ–è€… IAM Policy æ¥ control access to EFS</li></ul></li><li>EFS Infrequent Access (å¦‚æœé‡åˆ° POSIX compliant file storage)<ul><li>å› ä¸º EFS åªèƒ½å’Œ Linux Instance (POSIX) ä¸€èµ·ç”¨, Windows ä¸è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233415.png"></p><ul><li>EFS æœ‰ 2 ç§ Performance Mode (set at EFS creation time)<ul><li>General Purpose: Default (web server)</li><li>Max I&#x2F;O: High latency, throughput, parallel (big data, media process)</li></ul></li><li>EFS æœ‰ 3 ç§ Throughput Mode (é‡è¦)<ul><li>Bursting: å¾ˆå¿«</li><li>Provisioned: è®¾ç½®ä¸Šé™ (high throughput, å¤„ç†å¤§é‡æ–‡ä»¶ migrate æ—¶å€™ä½¿ç”¨)</li><li>Elastic: æ ¹æ® workload æ¥ scale</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233732.png"></p><blockquote><p>EFS å¹¶ä¸æ˜¯æ°¸è¿œæœ€è´µçš„, ä½† S3 æ°¸è¿œæ˜¯æœ€ä¾¿å®œçš„ã€‚<br>åœ¨æ€§èƒ½æ–¹é¢ï¼ŒAWS EBS ç”±äºå¯ä»¥æä¾›é«˜ IOPSï¼Œé€Ÿåº¦æœ€å¿«ã€‚ä½†æ˜¯åœ¨å…±äº«å’Œå¯å¼¹æ€§ä¼¸ç¼©çš„æ–‡ä»¶ç³»ç»Ÿæ–¹é¢ï¼ŒAWS EFS æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p></blockquote><hr><h3 id="5-ELB-amp-ASG"><a href="#5-ELB-amp-ASG" class="headerlink" title="5. ELB &amp; ASG"></a>5. ELB &amp; ASG</h3><h4 id="Scalability-amp-High-Availability"><a href="#Scalability-amp-High-Availability" class="headerlink" title="Scalability &amp; High Availability"></a>Scalability &amp; High Availability</h4><ul><li>Vertical (ç«–ç›´) Scale: Increase the size of the Instance (å¢åŠ å¤§å°)</li><li>Horizontal (æ°´å¹³) Scale: Increase the number of the Instance (å¢åŠ æ•°é‡)</li><li>High Availability: Running application in at least 2 AZ (Disaster recovery, é‡è¦)</li></ul><blockquote><p>high availability + high scalability æ˜¯ <code>ALB + ECS</code> æˆ–è€… <code>API Gateway + Lambda</code></p></blockquote><hr><h4 id="AWS-ELB"><a href="#AWS-ELB" class="headerlink" title="AWS ELB"></a>AWS ELB</h4><ul><li>Foward traffic to multiple EC2 Instances (æµé‡æ§åˆ¶)<ul><li>High availability across AZs, handle failures of downstream instances</li></ul></li><li>Health Check: å¯ä»¥çŸ¥é“ EC2 Instance æ˜¯å¦æ˜¯ Healthy çš„<ul><li>ELB åœ¨ public subnet, ASG åœ¨ private subnet (é‡è¦)</li></ul></li><li>ELB cannot distribute traffic for targets deployed in different region</li><li>ä½¿ç”¨ ELB çš„åŸå› , æœ‰ 2 ç‚¹<ul><li>Separate public traffic from private traffic</li><li>Build a highly available system</li></ul></li><li>Elastic Load Balancing use ports <code>1024-65535</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img141400.png"></p><ul><li>Application Load Balancer (HTTP &#x2F; HTTPS, Layer 7)</li><li>Network Load Balancer (TCP &#x2F; UDP, Layer 4)<ul><li>NLB provide static DNS and static IP, ALB only provide static DNS</li></ul></li><li>Gateway Load Balancer (Security, Layer 3, è¦ç‰¹åˆ«æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090125.png"></p><ul><li>å¦‚æœé—®åˆ° ELB route traffic åˆ°ä¸€ä¸ª instance æˆ–è€… AZ æ›´å¤š, æœ‰ 2 ç§å¯èƒ½æ€§<ul><li>Instances of a specific capacity type arenâ€™t equally distributed across AZ</li><li>Sticky sessions are enabled for the load balancer</li></ul></li></ul><hr><h4 id="Application-Load-Balancer-ALB"><a href="#Application-Load-Balancer-ALB" class="headerlink" title="Application Load Balancer (ALB)"></a>Application Load Balancer (ALB)</h4><ul><li>Deal with Layer 7 (HTTP &#x2F; HTTPS, WebSocket)</li><li>Route base on Path <code>/Home</code> or Query <code>?Platform=Mobile</code></li><li>ALB adds an additional header called <code>X-Forwarded-For</code> contains the clientâ€™s IP</li><li>å¯ä»¥ configure ALB to redirect HTTP to HTTPS (é‡è¦)</li><li>ALB æ— æ³•è¢« assign Elstaic IP, NLB å¯ä»¥</li><li>å¦‚æœ ALB æ²¡æœ‰ register ä»»ä½• target, ä¼šé€ æˆ <code>HTTP 503: Service unavailable</code></li><li>å¯ä»¥ä½¿ç”¨ ALB access logs æ¥ analyze incoming requests for latencies and IP address</li><li>You cannot specify publicly routable IP addresses to an ALB</li><li>An ALB has three possible target types: Instance, IP, and Lambda</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192523.png"></p><ul><li>Routing tables to different target groups<ul><li>Route based on path in URL</li><li>Route based on hostname in URL</li><li>Route based on Query String, Headers, Client IP</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142631.png"></p><blockquote><p>To forward all requests to the website so that the requests will use HTTPS, a solutions architect can create a listener rule on the ALB that redirects HTTP traffic to HTTPS.</p></blockquote><hr><h4 id="Network-Load-Balancer-NLB"><a href="#Network-Load-Balancer-NLB" class="headerlink" title="Network Load Balancer (NLB)"></a>Network Load Balancer (NLB)</h4><ul><li>Deal with Layer 4 (TCP &#x2F; UDP), å¾ˆå¿«, å¤„ç†æœ‰å¤§é‡ request çš„æƒ…å†µ (æ¯”å¦‚é“¶è¡Œå’Œæ¸¸æˆ)<ul><li>NLB best suited for use-cases involving low latency and high throughput workloads</li></ul></li><li>One static IP per AZ or use Elastic IP</li><li>NLB supports HTTP health checks as well as TCP and HTTPS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144359.png"></p><blockquote><p>If you specify targets using an instance ID, traffic is routed to instances using the primary private IP address specified in the primary network interface for the instance.</p></blockquote><hr><h4 id="Gateway-Load-Balancer-GWLB"><a href="#Gateway-Load-Balancer-GWLB" class="headerlink" title="Gateway Load Balancer (GWLB)"></a>Gateway Load Balancer (GWLB)</h4><ul><li>Deal with Layer 3 (Security, 3rd Party)</li><li>GWLB allows perform inline inspection of traffic from multiple spoke VPCs in a simplified and scalable fashion</li><li>Use GENEVE protocol on port 6081</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223042.png"></p><hr><h4 id="Sticky-Sessions-Session-Affinity"><a href="#Sticky-Sessions-Session-Affinity" class="headerlink" title="Sticky Sessions (Session Affinity)"></a>Sticky Sessions (Session Affinity)</h4><ul><li>Same client is always redirect to the same instance behind a load balancer</li><li>Make sure user doesnâ€™t loss session data (æ¯”å¦‚ç”¨æˆ·ç™»å½•)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223425.png"></p><ul><li>Application-based Cookies: Donâ€™t use AWSALB, AWSALBAPP, AWSALBTG</li><li>Duration-based Cookies: AWSALB for ALB, AWSELB for CLB</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223604.png"></p><hr><h4 id="Cross-Zone-Load-Balancing"><a href="#Cross-Zone-Load-Balancing" class="headerlink" title="Cross Zone Load Balancing"></a>Cross Zone Load Balancing</h4><ul><li>ELB distributes traffic evenly across all registered EC2 instances in all AZs<ul><li>æ‰€æœ‰ Instance åˆ†åˆ°çš„ traffic ä¸€å®šæ˜¯ä¸€æ ·çš„</li><li>å¦‚æœæ²¡æœ‰ enable, é‚£ä¹ˆ AZ å†…éƒ¨å°±æ˜¯å¹³å‡åˆ†</li></ul></li><li>ALB enabled by default, NLB disabled by default (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230059.png"></p><hr><h4 id="SSL-Certificates"><a href="#SSL-Certificates" class="headerlink" title="SSL Certificates"></a>SSL Certificates</h4><ul><li>Allow traffic between client and load balancer encrypted in transit (HTTPS)<ul><li>Manage SSL certificates using ACM (AWS Certificate Manager)</li></ul></li><li>å¦‚æœé—®åˆ°éœ€è¦ç®¡ç†å¾ˆå¤šä¸ª SSL æˆ–è€… TSL, é€‰æ‹© SNI (é‡è¦)</li><li>ç”¨æ¥ deploy SSL&#x2F;TLS çš„ AWS æœåŠ¡æ˜¯ AWS Certificate Manger å’Œ IAM (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230614.png"></p><ul><li>Could be used in ALB &amp; NLB, use SNI to make it work</li><li>SNI: Load multiple SSL certificates onto one web server (Server Name Indication)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230910.png"></p><blockquote><p>Server Name Indication (SNI) allows you to expose multiple HTTPS applications each with its own SSL certificate on the same listener.</p></blockquote><hr><h4 id="Deregistration-Delay-Connection-Draining"><a href="#Deregistration-Delay-Connection-Draining" class="headerlink" title="Deregistration Delay (Connection Draining)"></a>Deregistration Delay (Connection Draining)</h4><ul><li>Waiting for existing connections to complete</li><li>Connection Draining enables the load balancer to complete in-flight requests made to instances that are de-registering or unhealthy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231418.png"></p><hr><h4 id="AWS-ASG"><a href="#AWS-ASG" class="headerlink" title="AWS ASG"></a>AWS ASG</h4><ul><li>ASG å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale in æˆ–è€… out åŸºäºæœåŠ¡å™¨å‹åŠ› (ASG æ˜¯å…è´¹çš„)</li><li>ASG å¯ä»¥ä¿è¯æœ€å°‘æˆ–æœ€å¤šæœ‰å¤šå°‘ EC2 Instance åœ¨å·¥ä½œ (min, max)<ul><li>ASG æ˜¯åœ¨ä¸€ä¸ª Region é‡Œé¢å»æ ¹æ® availiable çš„ AZ è¿›è¡Œ scale</li><li>ASG æ²¡æœ‰åŠæ³• span across multiple Regions</li></ul></li><li>å½“ä¸€ä¸ª Instance æ˜¯ unhealthy çš„æ—¶å€™, ASG ä¼š terminate è¿™ä¸ª Instance<ul><li>ASG åœ¨ä¸€ä¸ª AZ é‡Œæœ€æ—© terminate çš„æ˜¯é‚£ä¸ªæœ€æ—©è¢« launch çš„ Instance</li><li>é‡åˆ° unbalanced çš„æƒ…å†µ, ASG æ˜¯å…ˆ launch new instance ç„¶å terminate old instance</li><li>åœ¨ unhealthy çš„æƒ…å†µä¸‹æ˜¯å…ˆ terminate unhealth Instance ç„¶å create new instance</li></ul></li><li>å¦‚æœé—®åˆ°åœ¨æŸä¸ªèŠ‚æ—¥å‰å» scale, é‚£å°±æ˜¯ ASG Scheduled Action</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232350.png"></p><ul><li>å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale out æˆ–è€… in åŸºäºæœåŠ¡å™¨å‹åŠ›</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232615.png"></p><ul><li>Launch Template: å¯ä»¥ä½œä¸º template æ¥ç”Ÿæˆ EC2 Instance<ul><li>Launch Template æ˜¯ç®¡è¦ç”Ÿæˆä»€ä¹ˆ Instance çš„ (eg. Spot, On-Demand)</li><li>Launch Configuration æ˜¯ç®¡ç”Ÿæˆçš„ Instance çš„ä¿¡æ¯çš„ (eg. AMI, security group)</li></ul></li><li>å¦‚æœè¦æ›´æ–° Launch Template, éœ€è¦åˆ æ‰æ—§çš„ç„¶åä½¿ç”¨æ–°çš„ (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232823.png"></p><ul><li>å¯ä»¥å’Œ CloudWatch Alarm ä¸€èµ·æ ¹æ®æœåŠ¡å™¨å‹åŠ› scale out æˆ– scale in<ul><li>éœ€è¦ä¸€ä¸ª CloudWatch custom metric</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232959.png"></p><ul><li>ASG Scaling Cooldowns<ul><li>After a scaling activity, you are in the cooldown period (default 300 seconds)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025149.png"></p><ul><li>ASG ä¸ terminate Instance çš„æƒ…å†µ<ul><li>The health check grace period for the instance has not expired</li><li>The instance maybe in Impaired status</li><li>The instance has failed the Elastic Load Balancing (ELB) health check status</li></ul></li><li>å¦‚æœ ASG æ²¡æœ‰ replace unhealthy EC2 Instance, éœ€è¦ change health check type from EC2 to ELB using configuration file</li></ul><hr><h4 id="Scaling-Policies"><a href="#Scaling-Policies" class="headerlink" title="Scaling Policies"></a>Scaling Policies</h4><ul><li>Target Tracking Scaling: æ ¹æ® CPU ç”¨é‡æˆ–è€… SQS é•¿åº¦æ¥ scale</li><li>Simple &#x2F; Step Scaling: å’Œ CloudWatch Alarm å…³è”</li><li>Scheduled Actions: æ¯”å¦‚åœ¨æ„Ÿæ©èŠ‚é‚£å¤©è¿›è¡Œ scale</li><li>Predictive Scaling: Forecast load and schedule scaling ahead</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233532.png"></p><ul><li>æ³¨æ„, å¯¹äº EC2 Scaling Policy æ¥è¯´, ä¸€å®šä¸å¯èƒ½è¶…è¿‡ maximum capacity (é‡è¦)</li></ul><hr><h4 id="ASG-Instance-Refresh"><a href="#ASG-Instance-Refresh" class="headerlink" title="ASG Instance Refresh"></a>ASG Instance Refresh</h4><ul><li>Update launch template and then re-creating all EC2 Instance</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212220.png"></p><hr><h3 id="6-AWS-Fundamentals"><a href="#6-AWS-Fundamentals" class="headerlink" title="6. AWS Fundamentals"></a>6. AWS Fundamentals</h3><h4 id="AWS-RDS"><a href="#AWS-RDS" class="headerlink" title="AWS RDS"></a>AWS RDS</h4><ul><li>ä½¿ç”¨ RDS çš„å¥½å¤„ (å¯¹æ¯”å°†æ•°æ®åº“å­˜åœ¨ EC2 ä¸Š)<ul><li>Automated provisioning, auto-scaling, backup</li><li>Read Replicas (æœ€å¤š 15 ä¸ª) å’Œ Multi-AZ</li></ul></li><li>RDS Read Replica: If master database is encrypted, the replica is also encrypted<ul><li>æ³¨æ„, Read Replica æé«˜çš„æ˜¯ read, è€Œä¸æ˜¯ scale æ•°æ®åº“çš„ storage (è€Œä¸” Replica è´µ), å¤„ç†ç±»ä¼¼ report æˆ–è€… analytics çš„å°±æ˜¯ Read Replica</li><li>Read Replica ä¸æ˜¯æé«˜ High Availability, Multi-AZ æ‰æ˜¯</li><li>Cross-Region Read Replica: å¯ä»¥ä½œä¸º DB backup (Replica in different Region)</li></ul></li><li>RDS Multi-AZ: RDS create a primary DB Instance and synchronously replicates the data to a standby instance in a different AZ (High Availability)<ul><li>RDS Multi-AZ update æ˜¯ standby å’Œ primary ä¸€èµ· update (ä¼šæœ‰ downtime)</li></ul></li><li>Support MySQL, PostgreSQL, MariaDB, Oracle, MS SQL Server, and Amazon Aurora</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161720.png"></p><ul><li>RDS - Storage Auto Scaling (é‡è¦)<ul><li>For application with unpredictable workloads</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161952.png"></p><ul><li>RDS - Disaster Recovery<ul><li>Create a Read Replica in different region and enable Multi-AZ on Read Replica</li></ul></li><li>IAM Database Authentication: å¯ä»¥ç”¨æ¥è®¿é—® RDS</li><li>å¯ä»¥ä» RDS Read Replica è¿ç§»åˆ° Aurora Read Replica, è¿™ä¸ªåšæ³•å¯ä»¥ minimal change<ul><li>æ³¨æ„, è¿™åªé€‚ç”¨äº Read Replica çš„æƒ…å†µä¸‹, æ­£å¸¸æƒ…å†µå°±ç›´æ¥å¼€ auto scaling</li></ul></li><li>RDS OS update æ˜¯å…ˆ update standby, ç„¶åæŠŠ standby promote æˆ primary, ç„¶å update åŸæ¥çš„ primary, æœ€ååŸæ¥çš„ primary å˜æˆæ–°çš„ standby (é‡è¦)</li></ul><hr><h4 id="Read-Replicas-vs-Multi-AZ"><a href="#Read-Replicas-vs-Multi-AZ" class="headerlink" title="Read Replicas vs. Multi AZ"></a>Read Replicas vs. Multi AZ</h4><ul><li>Read Replicas: Scalability, Async Replication<ul><li>Within AZ, Cross AZ or Cross Region</li></ul></li><li>Read Replicas in Same Region is free (Replication in AZs), Cross Region is not free</li><li>You canâ€™t create encrypted Read Replicas from an unencrypted RDS DB instance.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173522.png"></p><ul><li>ç”¨ Production databse å¤„ç†æ—¥å¸¸, ç”¨ Read Replica æ¥å»ºä¸€ä¸ªå‰¯æœ¬å¤„ç†æ•°æ®åˆ†æ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173820.png"></p><ul><li>Multi AZ: High Availability, Disaster Recovery, Sync Replication<ul><li>åœ¨ Multi-AZ çš„æƒ…å†µä¸‹, å½“ RDS æ•°æ®åº“ goes down, CNAME ä¼šæ›´æ–°æŒ‡å‘ standby</li><li>Multi AZ ä¸éœ€è¦ä½ å»æ›´æ”¹ SQL connection string</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174148.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174357.png"></p><hr><h4 id="AWS-Aurora"><a href="#AWS-Aurora" class="headerlink" title="AWS Aurora"></a>AWS Aurora</h4><ul><li>Support PostgreSQL and MySQL (ä¸éœ€è¦ç®¡ç† storage)</li><li>Aurora æ²¡æœ‰ standby database, Aurora Replica å¯ä»¥ä½œä¸º failover target</li><li>ä¸€èˆ¬æ¥è¯´, Aurora æ¯” RDS å¿«</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img183915.png"></p><ul><li>High Availiability &amp; Read Scaling (Aurora Read Replica)<ul><li>One Master Write, Multiple Read Replicas (Up to 15 Replica), ä¸€å…± 16 ä¸ª</li><li>å¦‚æœé—®åˆ°å’Œ Aurora æœ‰å…³, ä¸”å…³äºå¤„ç†ç½‘ç»œè¯·æ±‚æ¿€å¢çš„é—®é¢˜, é€‰ Aurora Replica</li><li>Replica Tier è¶Šé«˜, failover æ—¶å°±ä¼šå…ˆè¢« promote</li></ul></li><li>å¦‚æœé—®åˆ°å…³äº Aurora çš„ Auto-Scaling, é‚£å°±æ˜¯ Aurora Serverless</li><li>å¦‚æœé—®åˆ° Aurora è€Œä¸”æ˜¯ test database, é€‰æ‹© Aurora Database Cloning</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184105.png"></p><hr><h4 id="RDS-Security"><a href="#RDS-Security" class="headerlink" title="RDS Security"></a>RDS Security</h4><ul><li>At-rest encryption: AWS KMS (Key Management Service)</li><li>In-flight encryption: AWS TLS Certificates</li><li>IAM Authentication: IAM roles to connect to database (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img133048.png"></p><hr><h4 id="RDS-Proxy"><a href="#RDS-Proxy" class="headerlink" title="RDS Proxy"></a>RDS Proxy</h4><ul><li>Have a proxy for access RDS or Aurora, ç¼“è§£æ•°æ®åº“å‹åŠ›, minimize open connections<ul><li>Allow apps to pool and share DB connections (æé«˜ DB efficiency)</li><li>Reduced RDS &amp; Aurora failover time by up 66% (é‡è¦)</li><li>Enforce IAM authentication for DB</li></ul></li><li>Serverless, auto scaling, highly avaliable (Multi-AZ)</li><li>Not publicly accessible (Need to use VPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184531.png"></p><hr><h4 id="AWS-ElastiCache"><a href="#AWS-ElastiCache" class="headerlink" title="AWS ElastiCache"></a>AWS ElastiCache</h4><ul><li>Manage Redis or Memcached (ElastiCache å¯ä»¥è§£å†³æ•°æ®åº“é«˜é¢‘è¯»å–çš„é—®é¢˜, é‡è¦)<ul><li>ElastiCache ä¸æ”¯æŒ relational database, ä¹Ÿä¸èƒ½ç”¨ SQL queries</li></ul></li><li>Cache are in-memory database with high performance and low latency (compute-intensive)</li><li>Cache helps reduce load off of database for read intensive workload (read heavy)</li><li>Help to make application stateless (AWS è´Ÿè´£å¤§éƒ¨åˆ†å·¥ä½œ)</li><li>å¤„ç† S3 çš„æ˜¯ CloudFront, è€Œä¸æ˜¯ ElastiCache (è®°ä½)</li><li>æ”¯æŒ multi-threading çš„æ˜¯ ElastiCache for Memcached</li><li>å…³äº ElastiCache for Redis cluster çš„ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>All the nodes in a Redis cluster must reside in the same region</li><li>While using Redis with cluster mode enabled, you cannot manually promote any of the replica nodes to primary</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184841.png"></p><ul><li>DB Cache: Get data from ElastiCache<ul><li>If not avaliable, get from RDS and store in ElastiCache</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185024.png"></p><ul><li>User Session: Write Session data into ElastiCache<ul><li>User in another instance could still be logged in</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185153.png"></p><ul><li>Redis vs Memcahed<ul><li>Redis: Read Replicas, High Availiablity, Backup and restore (éå¸¸é‡è¦)</li><li>Memcached: Not High Availiablity, No Backup, risk to lose data, Multi-threaded</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185310.png"></p><blockquote><p>The maximum number of Read Replicas you can add in an ElastiCache Redis Cluster with Cluster Mode Disabled is 5.</p></blockquote><hr><h4 id="ElastiCache-Strategies"><a href="#ElastiCache-Strategies" class="headerlink" title="ElastiCache Strategies"></a>ElastiCache Strategies</h4><ul><li>Lazy Loading &#x2F; Cache-Aside &#x2F; Lazy Population<ul><li>Pros: Only requested data is cached (é‡è¦, only requested data)</li><li>Cons: Cache miss penalty results in 3 round trips &amp; stale data (æ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200816.png"></p><ul><li>Write Through (write è€—æ—¶, ä½†æ˜¯ read çš„ latency å¾ˆä½)<ul><li>Pros: Data in cache is never stale, write penalty with 2 calls (æ•°æ®ä¸€å®šæ˜¯æœ€æ–°çš„)</li><li>Cons: Missing data until data is added &#x2F; updated in the DB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201308.png"></p><ul><li>Cache Evictions &amp; Time-to-live (TTL)<ul><li>Cache Evictions: è¿™é‡ŒæŒ‡çš„æ˜¯ç¼“å­˜è¾¾åˆ°ä¸Šé™çš„æƒ…å†µ, éœ€è¦ç”¨ TTL å»æŒ‰æ—¶æ¸…ç†ç¼“å­˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201512.png"></p><hr><h4 id="MemoryDB-for-Redis"><a href="#MemoryDB-for-Redis" class="headerlink" title="MemoryDB for Redis"></a>MemoryDB for Redis</h4><ul><li>Redis-compatible, durable, in-memory database service (ä¸º Redis æœåŠ¡)</li><li>Durable in-memory data storage with Multi-AZ transactional log</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201727.png"></p><hr><h3 id="7-Route-53"><a href="#7-Route-53" class="headerlink" title="7. Route 53"></a>7. Route 53</h3><h4 id="Whatâ€™s-DNS"><a href="#Whatâ€™s-DNS" class="headerlink" title="Whatâ€™s DNS"></a>Whatâ€™s DNS</h4><ul><li>Translate hostname into IP address: <code>www.google.com = 172.217.18.36</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213136.png"></p><hr><h4 id="AWS-Route-53"><a href="#AWS-Route-53" class="headerlink" title="AWS Route 53"></a>AWS Route 53</h4><ul><li>User can update the DNS records (High available, scalable)</li><li>Route 53 is a Domain Registrar</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213527.png"></p><ul><li>Route 53 Records:<ul><li>Domain Name, Record Type, Value, Routing Policy, TTL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213613.png"></p><ul><li>Route 53 Record Types<ul><li>A: IPv4</li><li>AAAA: IPv6</li><li>CNAME: Map hostname to another hostname</li><li>NS: Name Servers for the Hosted Zone</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213753.png"></p><ul><li>Route 53: Hosted Zones<ul><li>Public Hosted Zones: Public domain name</li><li>Private Hosted Zones: Private domain name (VPC)</li></ul></li></ul><blockquote><p>æ³¨æ„, DNS hostnames and DNS resolution are required settings for private hosted zones</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234126.png"></p><ul><li>GoDaddy + Route 53 (As DNS Service Provider)<ul><li>Create a Public Hosted Zone and update the 3rd party Registrar NS records</li></ul></li><li>Route 53 Health Check<ul><li>å¦‚æœ ELB å‡ºé—®é¢˜, å°±å»æ‰¾ Route 53 Health Check</li></ul></li></ul><hr><h4 id="Route-53-TTL"><a href="#Route-53-TTL" class="headerlink" title="Route 53 TTL"></a>Route 53 TTL</h4><ul><li>TTL: Time To Live (ç”Ÿå­˜æ—¶é—´)<ul><li>How long the value should be cached (åç«¯æ›´æ–°ä¸ä»£è¡¨ cache æ›´æ–°äº†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232659.png"></p><hr><h4 id="CNAME-vs-Alias"><a href="#CNAME-vs-Alias" class="headerlink" title="CNAME vs Alias"></a>CNAME vs Alias</h4><ul><li>CNAME: Point a hostname to another hostname<ul><li>ä» <code>acme.example.com</code> åˆ° <code>zenith.example.org</code> æˆ–è€… <code>example.com</code> åˆ° <code>example.net</code></li></ul></li><li>Alias: Point a hostname to an AWS resource (å¯¹è±¡æ˜¯ CloudFront, S3 è¿™äº›)<ul><li>ä» <code>covid19survey.com</code> åˆ° <code>www.covid19survey.com</code></li><li>ä» <code>app.mydomain.com</code> åˆ° <code>app.amazonaws.com</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233313.png"></p><hr><h4 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h4><ul><li>Health Checks are only for public resources</li><li>Health Check æ£€æµ‹: Endpoints, å…¶ä»– Health Checks, CloudWatch Alarms (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000106.png"></p><hr><h4 id="Routing-Policy-Simple"><a href="#Routing-Policy-Simple" class="headerlink" title="Routing Policy (Simple)"></a>Routing Policy (Simple)</h4><ul><li>Define how Route 53 responds to DNS queries (ä¸€å…± 7 ç§ Routing Policies)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234623.png"></p><ul><li>Simple: Route traffic to a single resource<ul><li>If multiple values returned, a random one is chosen by client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234350.png"></p><hr><h4 id="Routing-Policy-Weighted"><a href="#Routing-Policy-Weighted" class="headerlink" title="Routing Policy (Weighted)"></a>Routing Policy (Weighted)</h4><ul><li>Weighted: Control the % of the request go to each resource</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234856.png"></p><hr><h4 id="Routing-Policy-Latency"><a href="#Routing-Policy-Latency" class="headerlink" title="Routing Policy (Latency)"></a>Routing Policy (Latency)</h4><ul><li>Latency: Redirect to the resource that has the least latency close to us</li><li>Latency is based on traffic between users and AWS Regions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235654.png"></p><hr><h4 id="Routing-Policy-Failover"><a href="#Routing-Policy-Failover" class="headerlink" title="Routing Policy (Failover)"></a>Routing Policy (Failover)</h4><ul><li>Failover: Have a Primary Instance and a Secondary Instance (é‡è¦)<ul><li>When failover, switch to Secondary Instance</li></ul></li><li>æ³¨æ„, å½“é—®åˆ° failover çš„æ—¶å€™, é€‰æ‹©çš„æ˜¯ active-passive failover routing policy<ul><li>æ²¡æœ‰ä»€ä¹ˆ active-active, åªæœ‰ active-passive</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150940.png"></p><hr><h4 id="Routing-Policy-Geolocation"><a href="#Routing-Policy-Geolocation" class="headerlink" title="Routing Policy (Geolocation)"></a>Routing Policy (Geolocation)</h4><ul><li>Geolocation: Routing based on user location<ul><li>Need to create a â€œDefaultâ€ record</li><li>Use cases: website localization, restrict content distribution ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151650.png"></p><hr><h4 id="Routing-Policy-Geoproximity"><a href="#Routing-Policy-Geoproximity" class="headerlink" title="Routing Policy (Geoproximity)"></a>Routing Policy (Geoproximity)</h4><ul><li>Geoproximity: Route traffic to resource based on geolocation<ul><li>But have the ability to shift more traffic to resource based on bias (é‡è¦)</li><li>å¯ä»¥åšåˆ° route more traffic or less</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152310.png"></p><hr><h4 id="Routing-Policy-Traffic-Flow"><a href="#Routing-Policy-Traffic-Flow" class="headerlink" title="Routing Policy (Traffic Flow)"></a>Routing Policy (Traffic Flow)</h4><ul><li>Visual editor to manage complex routing decision trees<ul><li>Configuration can be saved as Traffic Flow Policy</li><li>Can be applied to different Route 53 Hosted Zone</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224018.png"></p><hr><h4 id="Routing-Policy-IP-Based"><a href="#Routing-Policy-IP-Based" class="headerlink" title="Routing Policy (IP-Based)"></a>Routing Policy (IP-Based)</h4><ul><li>IP-Based: Routing based on clientâ€™s IP address<ul><li>Provide a list of CIDRs for your client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153711.png"></p><hr><h4 id="Routing-Policy-Multi-Value"><a href="#Routing-Policy-Multi-Value" class="headerlink" title="Routing Policy (Multi-Value)"></a>Routing Policy (Multi-Value)</h4><ul><li>Multi-Value: Route traffic to multiple resources<ul><li>Not a subsitute for ELB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153842.png"></p><hr><h3 id="8-VPC-Fundamentals"><a href="#8-VPC-Fundamentals" class="headerlink" title="8. VPC Fundamentals"></a>8. VPC Fundamentals</h3><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><ul><li>VPC: Virtual Private Cloud, all AWS account have a default VPC</li><li>CIDR should not overlap, max CIDR size in AWS is &#x2F;16, min CIDR size in AWS is &#x2F;28</li><li>è¦è®© VPC ä½¿ç”¨ custom domain éœ€è¦ <code>enableDnsHostnames</code> å’Œ <code>enableDnsSupport</code></li><li>å¯ä»¥åˆ›å»º Shared Service VPC, è¿™æ ·æ¯ä¸ª VPC éƒ½å¯ä»¥ access åˆ°éœ€è¦çš„ services (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201530.png"></p><ul><li>Each Amazon EC2 instance that you launch into a VPC has a tenancy attribute (é‡è¦)<ul><li>å¯ä»¥åœ¨ dedicated å’Œ host ä¹‹é—´äº’ç›¸åˆ‡æ¢</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042420.png"></p><hr><h4 id="VPC-Subnet"><a href="#VPC-Subnet" class="headerlink" title="VPC Subnet"></a>VPC Subnet</h4><ul><li>Allow you to partition your network inside the VPC (VPC å†…åˆ’åˆ†ç½‘ç»œ)<ul><li>Can have Public Subnet and Private Subnet</li></ul></li><li>AWS reserves 5 IP addresses in each subnet (first 4 &amp; last 1, é‡è¦)</li><li>Subnet is always associated with Route Table (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013421.png"></p><hr><h4 id="Internet-Gateway-IGW-amp-Route-Table"><a href="#Internet-Gateway-IGW-amp-Route-Table" class="headerlink" title="Internet Gateway (IGW) &amp; Route Table"></a>Internet Gateway (IGW) &amp; Route Table</h4><ul><li>IGW allow resource (eg. EC2 Instance) in a VPC connect to internet (é‡è¦)<ul><li>ç›¸å½“äºè®© VPC é‡Œçš„ resource å¯ä»¥è¿ä¸Šç½‘</li><li>IGW éœ€è¦ Route Table (é‡è¦)</li></ul></li><li>å¦‚æœ IGW å‡ºé—®é¢˜<ul><li>Need to also have Route Table (é¦–å…ˆæ£€æŸ¥ Route Table, å› ä¸º IGW éœ€è¦)</li><li>æ£€æŸ¥ Security Group æ˜¯å¦å…è®¸é€šè¿‡</li></ul></li><li>å¤„ç† Network Address Translation çš„å°±æ˜¯ Internet Gateway</li><li>Internet Gateway æ— æ³•ç›´æ¥åœ¨ private subnet é‡Œé¢ä½¿ç”¨ (é‡è¦)</li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202043.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193121.png"></p><hr><h4 id="NAT-Gateway-NATGW"><a href="#NAT-Gateway-NATGW" class="headerlink" title="NAT Gateway (NATGW)"></a>NAT Gateway (NATGW)</h4><ul><li>AWS managed NAT, AZ specific, use Elastic IP (é’ˆå¯¹ IPv4, Egress æ˜¯ IPv6)<ul><li>Allow EC2 Instance in Private Subnet to connect to the Internet</li><li>Requires an IGW, NATGW æ˜¯å¤„äº public subnet çš„ (æ³¨æ„)</li></ul></li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233648.png"></p><ul><li>Resilient within single AZ, Multiple-AZ need multiple NATGW<ul><li>æ¯ä¸ª AZ éƒ½è¦ä¸€ä¸ª NATGW, ç”¨æ¥ fault-tolerance (å®¹é”™èƒ½åŠ›)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203654.png"></p><hr><h4 id="NACL-amp-Security-Groups"><a href="#NACL-amp-Security-Groups" class="headerlink" title="NACL &amp; Security Groups"></a>NACL &amp; Security Groups</h4><ul><li>The request has to go over NACL before go to Subnet (Subnet level)<ul><li>NACL is stateless (inbound outbound éƒ½è¦æ£€æµ‹)</li></ul></li><li>The request has to go over Security Group before go to EC2 Instance (Instance level)<ul><li>Security Group (SG) is stateful (inbound accepted &#x3D; outbound accepted)</li></ul></li><li>åæ­£è®°ä½ NACL æ˜¯ Subnet level (stateless), Security Group æ˜¯ Instance level (stateful)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204310.png"></p><ul><li>Network Access Control List (NACL)<ul><li>NACL control traffic from and to subnets (eg. block IP)</li><li>One NACL per subnet, each subnet have default NACL (æ³¨æ„)<ul><li>Default NACL accept every inbound and outbound</li><li>ä½†æ˜¯ custom NACL é»˜è®¤æ˜¯ deny inbound å’Œ outbound çš„ (æ³¨æ„)</li></ul></li><li>NACL Rules have number, higher precedence with lower number (è¶Šä¼˜å…ˆæ•°å­—è¶Šä½)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204553.png"></p><hr><h4 id="VPC-Flow-Logs"><a href="#VPC-Flow-Logs" class="headerlink" title="VPC Flow Logs"></a>VPC Flow Logs</h4><ul><li>Capture information about IP traffic going into interfaces (ç›‘è§† IP æµé‡çš„)<ul><li>Monitor &amp; troubleshoot connectivity issues (ç½‘ç»œè¿æ¥é—®é¢˜)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231819.png"></p><hr><h4 id="VPC-Peering"><a href="#VPC-Peering" class="headerlink" title="VPC Peering"></a>VPC Peering</h4><ul><li>VPC Peering: Privately connect two VPCs using AWS network (åªé€‚åˆå°‘é‡ VPC, é‡è¦)<ul><li>æ¯ä¸€å¯¹ VPC éƒ½è¦ VPC Peering, å’Œ S3 Replication ç±»ä¼¼</li></ul></li><li>Can create VPC Peering between VPCs in different AWS accounts &#x2F; regions</li><li>Need to update Route Table in each VPC subnet to make sure they can communicate<ul><li>å‡ºé—®é¢˜å°±æ£€æŸ¥ Route Table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205313.png"></p><hr><h4 id="VPC-Sharing"><a href="#VPC-Sharing" class="headerlink" title="VPC Sharing"></a>VPC Sharing</h4><ul><li>VPC Sharing: Allows multiple AWS accounts to create resources (eg. EC2, RDS) into shared and centrally-managed AWS VPC (é‡è¦)<ul><li>é‡åˆ° centrally managed çš„å°±æ˜¯ VPC Sharing</li><li>è€Œä¸”æ˜¯ owner éœ€è¦ share one or more subnet (æ³¨æ„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img824817.png"></p><hr><h4 id="VPC-Endpoints-AWS-PrivateLink"><a href="#VPC-Endpoints-AWS-PrivateLink" class="headerlink" title="VPC Endpoints (AWS PrivateLink)"></a>VPC Endpoints (AWS PrivateLink)</h4><ul><li>VPC Endpoints allow private access to AWS services within a VPC (é‡è¦)<ul><li>ç”¨ Private Network è¿æ¥ AWS æœåŠ¡, å’Œ On-Premise æ²¡æœ‰å…³ç³»</li><li>Interface Endpoint æ”¯æŒå¤§éƒ¨åˆ† AWS æœåŠ¡ (ä»˜è´¹)</li><li>Gateway Endpoint åªæ”¯æŒ S3 å’Œ DynamoDB (å¾ˆå®¹æ˜“è€ƒ, å…è´¹)</li></ul></li><li>æ³¨æ„, VPC Gateway Endpoint ä¸“é—¨å¤„ç† S3 å’Œ DynamoDB (ä¸è¦å»é€‰æ‹© NAT æˆ–è€… IGW)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205719.png"></p><ul><li>ä¸¤ç§ Types of Endpoints (Interface &#x2F; Gateway)<ul><li>Interface Endpoints: Supports most AWS services (ä»˜è´¹)</li><li>Gateway Endpoints: Must be used as a target in a route table (å…è´¹, é‡è¦)<ul><li>Only support S3 and DynamoDB (åªæ”¯æŒ S3 å’Œ DynamoDB)</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205939.png"></p><hr><h4 id="Site-to-Site-VPN-VPN-Connection"><a href="#Site-to-Site-VPN-VPN-Connection" class="headerlink" title="Site-to-Site VPN (VPN Connection)"></a>Site-to-Site VPN (VPN Connection)</h4><ul><li>Site-to-Site VPN: Connect AWS to Corporate Data Center over public internet (é‡ç‚¹, public internet, On-Premise to AWS)<ul><li>Need a Virtual Private Gateway (VGW) on VPC (AWS æ–¹)</li><li>Need a Customer Gateway (CGW) on DC (On-Premise æ–¹)</li></ul></li><li>å¯¹æ¯” DX, Site-to-Site VPN æ²¡æœ‰æä¾› low latency, and high throughput connection</li><li>Site-to-Site VPN æœ‰ encrypted network connectivity between On-Premise and VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232320.png"></p><ul><li>éœ€è¦ VPN Gateway å’Œ Customer Gateway æ¥è¿æ¥ VPC å’Œ On-Premise</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232649.png"></p><hr><h4 id="Direct-Connect-DX"><a href="#Direct-Connect-DX" class="headerlink" title="Direct Connect (DX)"></a>Direct Connect (DX)</h4><ul><li>Provide a dedicated private connection from a remote network to VPC (é‡ç‚¹, private internet, On-Premise to AWS)<ul><li>éœ€è¦è®¾ç½® VGW, å¦‚æœç»™ DX æ‰¾ backup, é‚£ä¹ˆå°±é€‰æ‹© Site-to-Site VPN (è¿™ä¸¤ä¸ªæœåŠ¡ç±»ä¼¼)</li><li>å¯¹æ¯” Site-to-Site VPN, DX provide low latency, and high throughput connection</li><li>DX ä¸æ”¯æŒ encrypted network connectivity, Site-to-Site VPN å¯ä»¥, ä½†æ˜¯å¦‚æœéœ€è¦ encrypt DX connection å¯ä»¥å’Œ AWS VPN ä¸€èµ·ç”¨ (æ³¨æ„)</li><li>DX çš„ set up æ—¶é—´å¾ˆé•¿ (æ‰€ä»¥ DX ä¸ç®—ä»€ä¹ˆ quick solution)</li></ul></li><li>All private, no public network involve (æ³¨æ„, å¦‚æœé—®åˆ° all Private å°±æ˜¯ DX)<ul><li>Direct Connect does not involve the Internet</li></ul></li><li>å¯ä»¥ access public resources (S3) å’Œ private resources (EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233024.png"></p><ul><li>ä¸¤ç§ Connection Type (å¸¦å®½é€‰é¡¹, Dedicated æœ€å¿«)<ul><li>Dedicated Connections: 1Gbps åˆ° 100Gbps</li><li>Hosted Connections: 50Mbps åˆ° 10 Gbps</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004140.png"></p><ul><li>Direct Connect Gateway (è¿æ¥è®¸å¤š VPC åœ¨ä¸åŒçš„ Region)<ul><li>Direct Connection to one or more VPC in many different regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233531.png"></p><ul><li><p>PrivateLink vs DX</p><ul><li><p>AWS PrivateLink provides a connection between VPCs (Virtual Private Clouds) and AWS services while bypassing the public Internet. It is a private network connection that securely transfers data without leaving the AWS network</p></li><li><p>AWS Direct Connect is a dedicated, private connection between the customerâ€™s on-premises infrastructure at a data center and an AWS location. The main features of the connection are ultra-fast data transfer rates, low latency, and improved security since it bypasses the public Internet</p></li></ul></li></ul><hr><h3 id="9-S3"><a href="#9-S3" class="headerlink" title="9. S3"></a>9. S3</h3><h4 id="AWS-S3"><a href="#AWS-S3" class="headerlink" title="AWS S3"></a>AWS S3</h4><ul><li>S3 Buckets (S3 æ˜¯ Global çš„, ä½†æ˜¯ Bucket æ˜¯ Regional çš„)<ul><li>Store objects (files) in â€œbucketsâ€</li><li>Buckets must have globally unique name (åå­—å¿…é¡»ç‹¬ç‰¹)</li><li>Buckets are defined at region level</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171839.png"></p><ul><li>Objects (files) have a key, max object size is 5TB</li><li>å¦‚æœä¸Šä¼ è¶…è¿‡ 5 GB, å°±è¦ç”¨ Multi-Part Upload (è¿˜æœ‰ S3 Transfer Acceleration)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172025.png"></p><ul><li>S3 sync command: Uses the <code>CopyObject</code> APIs to copy objects between S3 buckets</li><li>S3 always return the lastest version of the object (é‡è¦)</li><li>S3 æ²¡åŠæ³•åŠ å¯† metadata</li><li>S3 æ˜¯ serverless çš„</li><li>å¦‚æœé‡åˆ°éœ€è¦å¤„ç† static content çš„, å°±ä¸€å®šæ˜¯ S3 + CloudFront (é‡è¦)</li><li>å¦‚æœé—®åˆ° S3 è€Œä¸”æ˜¯å…³äºå›¾ç‰‡ä¸Šä¼ , é€‰æ‹© S3 Event Notification, ä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imglifecycle-transitions-v2.png"></p><ul><li>å¦‚æœå‘ç° S3 çš„ä¼ è¾“åŠŸèƒ½å‡ºé—®é¢˜, é‚£ä¹ˆå°±ç»™ S3 bucket åŠ ä¸Š prefix (é‡è¦)</li><li>æ³¨æ„, S3 å’Œ database æ˜¯ä¸æ²¾è¾¹çš„, S3 ä¸æ˜¯æ•°æ®åº“</li><li>å¦‚æœè¦ control access to data stored on AWS S3, å¯ä»¥ç”¨ä¸‹é¢ 2 ç‚¹<ul><li>Query String Authentication, Access Control List (ACLs)</li><li>Bucket policies, Identity and Access Management (IAM) policies</li></ul></li><li>In order to get object access log, the object owner also need to be bucket owner</li><li>S3 Object Ownership is a S3 bucket setting that control ownership of new objects that are uploaded to a bucket (é‡è¦)</li></ul><blockquote><p>By default, an Amazon S3 object is owned by the AWS account that uploaded it. This is true even when the bucket is owned by another account (é‡è¦)</p></blockquote><ul><li>å…³äº S3 data consistency model, æœ‰ 2 ç‚¹<ul><li>A process deletes an existing object and immediately tries to read it. Amazon S3 will not return any data as the object has been deleted</li><li>If you delete a bucket and immediately list all buckets, the deleted bucket might still appear in the list</li></ul></li></ul><hr><h4 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h4><ul><li>User-Based Security<ul><li>IAM Policies: Which API calls should be allowed for a user from IAM (é‡è¦)</li></ul></li><li>Resource-Based Security<ul><li>Bucket Policies: Bucket rules (æ¯”å¦‚è®© object public)</li></ul></li><li>æ³¨æ„, IAM Policy çš„ precedence æ˜¯æ¯” S3 Bucket Policy è¦ä¼˜å…ˆçš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173050.png"></p><ul><li>S3 Bucket Policies (JSON based policies)<ul><li>Resoruces: buckets and objects</li><li>Effect: Allow &#x2F; Deny</li><li>Actions: API to Allow or Deny</li><li>Principal: The account or user to apply the policy to</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173325.png"></p><hr><h4 id="S3-Website"><a href="#S3-Website" class="headerlink" title="S3 Website"></a>S3 Website</h4><ul><li>Host åœ¨ S3 ä¸Šé¢çš„ç½‘ç«™ä¸€èˆ¬æ˜¯ä»¥ä¸‹ä¸¤ç§åç¼€ (dash Region æˆ–è€… dot Region)<ul><li>s3-website-Region: <code>http://bucket-name.s3-website-Region.amazonaws.com</code></li><li>s3-website.Region: <code>http://bucket-name.s3-website.Region.amazonaws.com</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img043622.png"></p><hr><h4 id="S3-Versioning"><a href="#S3-Versioning" class="headerlink" title="S3 Versioning"></a>S3 Versioning</h4><ul><li>Enabled at the bucket level (Default is null)</li><li>Best pratice to version the buckets (å¯ä»¥ roll back, å¯ä»¥é˜²æ­¢è¯¯åˆ , é‡è¦)<ul><li>å¯ä»¥é˜²æ­¢ accidental deletion of objects</li></ul></li><li>Once version-enable a bucket, it can never return to an unversioned state (é‡è¦)</li><li>Versioning æ˜¯é’ˆå¯¹è¿™ä¸ª bucket é‡Œé¢çš„æ‰€æœ‰ object, æ‰€ä»¥ä¸èƒ½æŒ‡å®š folder æ¥ versioning</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174246.png"></p><hr><h4 id="S3-Replication-CRR-amp-SRR"><a href="#S3-Replication-CRR-amp-SRR" class="headerlink" title="S3 Replication (CRR &amp; SRR)"></a>S3 Replication (CRR &amp; SRR)</h4><ul><li>CRR: Cross Region Replication (compliance, lower latency access)</li><li>SRR: Same Region Replication (create test environment)<ul><li>Must enable Versioning</li><li>The Copying is asynchronous</li><li>Must give IAM permissions to S3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174840.png"></p><ul><li>Only new objects are replicated, existing objects need S3 Batch Replication<ul><li>ä¹Ÿå°±æ˜¯è¯´åªæœ‰æ–°çš„ object ä¼šè¢« Replicate, è€çš„ object è¦ S3 Batch Replication</li></ul></li><li>No â€œchainingâ€ in replication<ul><li>æ¯”å¦‚æŠŠ A å¤åˆ¶åˆ° B å’Œ C, éœ€è¦ A å¤åˆ¶åˆ° B å’Œ A å¤åˆ¶åˆ° C</li></ul></li><li>S3 lifecycle actions are not replicated with S3 Replication</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175004.png"></p><hr><h4 id="S3-Storage-Classes"><a href="#S3-Storage-Classes" class="headerlink" title="S3 Storage Classes"></a>S3 Storage Classes</h4><ul><li>ä¸€å…± 7 ç§ Storage Class: General + 2 IA + 3 Glacier + Intelligent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175742.png"></p><ul><li>S3 Standard - General Purpose<ul><li>Used for frequently accessed data (æœ€å¸¸è§)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175932.png"></p><ul><li>S3 Infrequent Access (Standard IA &amp; One Zone IA)<ul><li>For data is less frequent access but require rapid access when needed (é‡è¦)</li><li>Lower cost than Standard</li><li>ä» Standard è½¬åˆ° One Zone IA æœ€å°‘è¦ 30 å¤©</li><li>One Zone IA ä¸æ˜¯ High Availability çš„é€‰æ‹© (æ³¨æ„, å› ä¸º AZ ä¼š down)</li><li>å¦‚æœé‡åˆ° access is always required å°±ä¸èƒ½é€‰ One Zone IA, å› ä¸º AZ å¯èƒ½ä¼š down</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180147.png"></p><ul><li>S3 Glacier Storage Classes (Archive ä¸“ç”¨)<ul><li>Low-cost object storage for archiving &#x2F; backup</li><li>Price: storage + retrieval</li><li>S3 Glacier Instant Retrieval: Glacier é‡Œæœ€å¿«ä½†ä¹Ÿæœ€è´µ</li><li>S3 Glacier Flexible Retrieval: ä¸‰ç§æ¨¡å¼ (Expedited åŠ æ€¥, Standard, Bulk æ‰¹é‡)</li><li>S3 Glacier Deep Archive: å­˜çš„æ—¶é—´æœ€ä¹…, ä¸¤ç§æ¨¡å¼ (Standard, Bulk), 48 å°æ—¶ retrieval</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180642.png"></p><ul><li>S3 Intelligent Tiering<ul><li>Move objects automatically between Access Tiers based on usage</li><li>å°±æ˜¯è‡ªåŠ¨å¸®ä½ æŠŠ Object ç§»åˆ°ä¸åŒçš„ Storage Class é‡Œ</li><li>Intelligent Tier æ˜¯åœ¨ Standard å’Œ Standard IA ä¸‹é¢çš„, ä¸èƒ½ä»ä¸‹å¾€ä¸Šè½¬ç§»</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180806.png"></p><hr><h3 id="10-AWS-CLI-SDK-IAM-Roles-amp-Policies"><a href="#10-AWS-CLI-SDK-IAM-Roles-amp-Policies" class="headerlink" title="10. AWS CLI, SDK, IAM Roles &amp; Policies"></a>10. AWS CLI, SDK, IAM Roles &amp; Policies</h3><h4 id="EC2-Instance-Metadata-IMDS"><a href="#EC2-Instance-Metadata-IMDS" class="headerlink" title="EC2 Instance Metadata (IMDS)"></a>EC2 Instance Metadata (IMDS)</h4><ul><li>Allow EC2 Instance to â€œlearn about themselvesâ€ without using an IAM Role</li><li>AWS CLI ç”¨ Instance Metadata å»æ‹¿ temporary credentials (åœ¨ Python ç¯å¢ƒä¸‹)<ul><li>Metadata &#x3D; info about the EC2 Instance (æ²¡æ³•æ‹¿åˆ° IAM Policy)</li><li>Userdata &#x3D; launch script of the EC2 Instance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150522.png"></p><ul><li>IMDSv2 vs. IMDSv1<ul><li>IMDSv1 access <code>http://169.254.169.254/latest/meta-data</code> (ä¸æ¨è)</li><li>IMDSv2 is more secure and done in two steps</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150716.png"></p><hr><h4 id="MFA-with-CLI"><a href="#MFA-with-CLI" class="headerlink" title="MFA with CLI"></a>MFA with CLI</h4><ul><li>To use MFA with CLI, you must create a temporary session<ul><li>Run the <code>STS GetSession</code> API call</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151057.png"></p><ul><li>å¦‚æœæ˜¯ check IAM permission, ç”¨ <code>AWS CLI --dry-run</code></li></ul><hr><h4 id="AWS-SDK"><a href="#AWS-SDK" class="headerlink" title="AWS SDK"></a>AWS SDK</h4><ul><li>Perform actions on AWS directly from your application code</li><li>If not configure a default region, <code>us-east-1</code> will be chosen by default</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151356.png"></p><hr><h4 id="AWS-Limits-Quotas"><a href="#AWS-Limits-Quotas" class="headerlink" title="AWS Limits (Quotas)"></a>AWS Limits (Quotas)</h4><ul><li>API Rate Limits<ul><li>For Intermittent Errors: implement Exponential Backoff</li><li>For Consistent Errors: request an API throttling limit increase (é€šè¿‡ AWS ç”³è¯·)</li></ul></li><li>Service Quotas &#x2F; Limits<ul><li>Request a service limit increase by opening a ticket</li><li>Request a service quota increase by Service Quotas API</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151813.png"></p><ul><li>Exponential Backoff<ul><li>If get <code>ThrottlingException</code> intermittently, use exponential backoff</li><li>Itâ€™s a retry mechanism included in AWS SDK API calls</li><li>Only retry for 5XX errors</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152100.png"></p><hr><h4 id="AWS-CLI-Credentials-Provider-Chain"><a href="#AWS-CLI-Credentials-Provider-Chain" class="headerlink" title="AWS CLI Credentials Provider Chain"></a>AWS CLI Credentials Provider Chain</h4><ul><li>The CLI will look credentials in order<ul><li><code>Command Line Options -&gt; Environment Variables -&gt; EC2 Instance Profile</code></li></ul></li><li>The credentials chain could give priority to the environment variables</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152316.png"></p><hr><h4 id="AWS-Sigv4"><a href="#AWS-Sigv4" class="headerlink" title="AWS Sigv4"></a>AWS Sigv4</h4><ul><li>AWS SigV4 æ˜¯å¯¹ AWS è¯·æ±‚è¿›è¡Œç­¾åçš„èº«ä»½éªŒè¯æ–¹æ³•ï¼Œç¡®ä¿å®‰å…¨å’Œå®Œæ•´æ€§ (2 ç§é€‰æ‹©)<ul><li>HTTP Header: Signature in Authorization header</li><li>Query String: Signature in <code>X-Amz-Signature</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153415.png"></p><hr><h3 id="11-Advanced-S3"><a href="#11-Advanced-S3" class="headerlink" title="11. Advanced S3"></a>11. Advanced S3</h3><h4 id="S3-Lifecycle-Rules"><a href="#S3-Lifecycle-Rules" class="headerlink" title="S3 Lifecycle Rules"></a>S3 Lifecycle Rules</h4><ul><li>Transition objects between storage classes (æ¯”å¦‚ä» IA åˆ° Glacier)<ul><li>Transition éœ€è¦ Lifecycle Rules (é‡è¦)</li></ul></li><li>æ¯”å¦‚ä» Snowball åˆ° Glacier å°±éœ€è¦ Lifecycle Rule</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235516.png"></p><ul><li>Transition Actions: Configure objects to transition to another storage class (è½¬ç§»)</li><li>Expiration Actions: Configure objects to expire after some time (åˆ é™¤)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235639.png"></p><ul><li>S3 Analytics: Help decide when to transition objects to the right storage class</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000151.png"></p><hr><h4 id="S3-Event-Notifications"><a href="#S3-Event-Notifications" class="headerlink" title="S3 Event Notifications"></a>S3 Event Notifications</h4><ul><li>Automatically react to certain event happened in S3 (æ¯”å¦‚å›¾ç‰‡ä¸Šä¼ )<ul><li>Need to have IAM Permissions</li><li>S3 Event Notification çš„ destination æ˜¯ SQS, SNS, Lambda (è®°ä½)</li></ul></li><li>å¤§éƒ¨åˆ†å’Œ S3 äº‹ä»¶ç›¸å…³çš„éƒ½æ˜¯ S3 Event Notification, è€Œä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000725.png"></p><ul><li>If two writes are made to a single non-versioned object at the same time, it is possible that only a single event notification will be sent</li></ul><hr><h4 id="S3-Performance"><a href="#S3-Performance" class="headerlink" title="S3 Performance"></a>S3 Performance</h4><ul><li>For Upload ä¸Šä¼  (é‡è¦)<ul><li>Multi-Part Upload: å½“ä¸Šä¼ æ–‡ä»¶å¤§äº 5 GB, å¯ä»¥ parallelize uploads</li><li>S3 Transfer Acceleration: å°†æ–‡ä»¶ä¼ åˆ° AWS edge location, å¯ä»¥å’Œ Multi-Part ä¸€èµ·ç”¨</li><li>S3 Transfer Acceleration (S3TA) can speed up content transfers to and from S3</li><li>æ³¨æ„, S3 Transfer Acceleration æ²¡åŠæ³• copy object between buckets</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001645.png"></p><ul><li>For Download ä¸‹è½½<ul><li>S3 Byte-Range Fetches: Parallelize GETs, retrieve partial data (æ‹¿éƒ¨åˆ†æ•°æ®, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001828.png"></p><hr><h4 id="S3-Select-amp-Glacier-Select"><a href="#S3-Select-amp-Glacier-Select" class="headerlink" title="S3 Select &amp; Glacier Select"></a>S3 Select &amp; Glacier Select</h4><ul><li>S3 Select ä½¿ç”¨ SQL æ¥åš server-side filtering, è¿‡æ»¤ä»è€Œå‡å°‘æ•°æ®é‡</li><li>Less network transfer, less CPU cost client-side</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002050.png"></p><hr><h4 id="S3-Object-Tags-amp-Metadata"><a href="#S3-Object-Tags-amp-Metadata" class="headerlink" title="S3 Object Tags &amp; Metadata"></a>S3 Object Tags &amp; Metadata</h4><ul><li>S3 User-Defined Object Metadata: Must begin with <code>x-amz-meta-</code></li><li>S3 Object Tags: Useful for fine-grained permission or analytics purpose</li><li>You cannot search the object metadata or object tags (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194215.png"></p><hr><h3 id="12-S3-Security"><a href="#12-S3-Security" class="headerlink" title="12. S3 Security"></a>12. S3 Security</h3><h4 id="S3-Encryption"><a href="#S3-Encryption" class="headerlink" title="S3 Encryption"></a>S3 Encryption</h4><ul><li>Server-Side Encryption (SSE-S3 å…è´¹, SSE-KMS è¦é’±, SSE-C)</li><li>Client-Side Encryption (å¦‚æœç”¨æˆ·å·²ç»æœ‰ encryption method)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223133.png"></p><ul><li>Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3)<ul><li>Enabled by default for new buckets &amp; objects</li><li>SSE-S3 çš„ header æ˜¯ <code>x-amz-server-side-encryption:AES256</code></li><li>ä½¿ç”¨ SSE-S3, æ¯ä¸€ä¸ª Object éƒ½æ˜¯ç”± unique key æ¥ encrypt çš„</li><li>SSE-S3 ä½¿ç”¨ 256-bit Advanced Encryption Standard (AES-256)</li><li>SSE-S3 æ˜¯æ²¡æœ‰ automatic key rotation çš„, è¦ç”¨ SSE-KMS (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223242.png"></p><ul><li>Server-Side Encryption with KMS Keys stored in AWS KMS (SSE-KMS)<ul><li>User control + audit key usage in CloudTrail (å¯ä»¥ç®¡ç† key rotation)</li><li>SSE-KMS çš„ header æ˜¯ <code>x-amz-server-side-encryption:aws:kms</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223417.png"></p><ul><li>Server-Side Encryption with Customer-Provided Keys (SSE-C)<ul><li>ç”¨æˆ·è‡ªå·±æœ‰ keys, AWS will not store the key, HTTPS must be used (é‡è¦)</li><li>å½“é—®é¢˜ä¸­æåˆ°ç”¨æˆ·éœ€è¦ä½¿ç”¨è‡ªå·±çš„ key, ä½†æ˜¯æ‰“ç®—åœ¨ AWS ç«¯åš encryption</li><li>S3 will reject any requests made over <code>HTTP</code> when using SSE-C (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223602.png"></p><ul><li>Client-Side Encryption<ul><li>User fully manages the keys and encryption cycle</li><li>æ•°æ®åœ¨é€åˆ° AWS ä¹‹å‰å°±æ˜¯åŠ å¯†å¥½çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223715.png"></p><ul><li>Encryption in Transit (SSL&#x2F;TLS)<ul><li>å¯ä»¥ç”¨ <code>aws:SecureTransport</code> æ¥ enforce (ä¸è¿‡æœ‰ SSL åŸºæœ¬ä¸Šå°±æ˜¯ HTTPS)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223811.png"></p><hr><h4 id="S3-CORS"><a href="#S3-CORS" class="headerlink" title="S3 CORS"></a>S3 CORS</h4><ul><li>CORS: Cross-Origin Resource Sharing (è·¨åŸŸé—®é¢˜)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224630.png"></p><ul><li>S3 CORS (é‡è¦)<ul><li>A client makes a cross-origin request on S3 bucket, need the correct CORS headers</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224951.png"></p><hr><h4 id="S3-MFA-Delete"><a href="#S3-MFA-Delete" class="headerlink" title="S3 MFA Delete"></a>S3 MFA Delete</h4><ul><li>MFA Delete: é˜²æ­¢ä¸å°å¿ƒåˆ é™¤æ–‡ä»¶, ç”¨æˆ·éœ€è¦å…ˆéªŒè¯èº«ä»½ (é‡è¦)<ul><li>To use MFA Delete: Versioning must be enabled</li></ul></li><li>Only the bucket owner (root user) can enable&#x2F;disable MFA Delete (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225415.png"></p><hr><h4 id="S3-Access-Logs"><a href="#S3-Access-Logs" class="headerlink" title="S3 Access Logs"></a>S3 Access Logs</h4><ul><li>Any request made to S3 will be logged to another S3 bucket (æ•°æ®åˆ†æ)<ul><li>å¯ä»¥ä½œä¸º Data Analysis çš„å·¥å…·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230251.png"></p><hr><h4 id="S3-Pre-signed-URL"><a href="#S3-Pre-signed-URL" class="headerlink" title="S3 Pre-signed URL"></a>S3 Pre-signed URL</h4><ul><li>S3 Pre-signed URL å…è®¸ä¸´æ—¶è®¿é—®ç‰¹å®š S3 å¯¹è±¡çš„ URL</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230702.png"></p><hr><h4 id="S3-Access-Points"><a href="#S3-Access-Points" class="headerlink" title="S3 Access Points"></a>S3 Access Points</h4><ul><li>Access Points simplify security management for S3 Buckets (æ ¹æ®ç”¨æˆ·å±æ€§)</li><li>Each Access Point: DNS name + Access Point Policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231500.png"></p><hr><h4 id="S3-Object-Lambda"><a href="#S3-Object-Lambda" class="headerlink" title="S3 Object Lambda"></a>S3 Object Lambda</h4><ul><li>Use AWS Lambda to change object before retrieve by caller (åœ¨åˆ°è¾¾ caller ä¹‹å‰)<ul><li>ç”¨é€”: å¯ä»¥ç»™å›¾ç‰‡æ‰“æ°´å°, å¯ä»¥ç”¨æ¥ Invoke remove PII çš„ Lambda æ–¹æ³• (é‡è¦)</li></ul></li><li>éœ€è¦ S3 Access Point å’Œ S3 Object Lambda Access Points</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231810.png"></p><hr><h3 id="13-CloudFront"><a href="#13-CloudFront" class="headerlink" title="13. CloudFront"></a>13. CloudFront</h3><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><ul><li>Content Delivery Network (CDN), å¯ä»¥ serve static &amp; dynamic content<ul><li>Improve read performance, content is cached at the edge</li></ul></li><li>å¯ä»¥é˜²æ­¢ DDoS protection (æ­é… AWS Shield), å¯ä»¥æ ¹æ® content type æ¥ route, å¯ä»¥æŒ‡å®š primary &amp; secondary origins æ¥åš high availiability &amp; failover</li><li>CloudFront Origins: S3 Bucket (OAC) æˆ–è€… Custom Origin (HTTP)<ul><li>OAC: Origin Access Control (é‡è¦, å¦‚æœæ¶‰åŠåˆ° S3 çš„é—®é¢˜)</li></ul></li><li>å¦‚æœé—®åˆ° CloudFront è€Œä¸”éœ€è¦ encryption, é€‰æ‹© field level encryption (ä¸æ˜¯ KMS)<ul><li>Field-level encryption allows you to enable your users to securely upload sensitive information to your web servers.</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232701.png"></p><ul><li>CloudFront vs S3 Cross Region Replication<ul><li>CloudFront: ä½¿ç”¨ global edge network, æœ‰ TTL, ç”¨äº static content</li><li>S3 Cross Region Replication (CRR): æ¯ä¸ª Region éƒ½è¦è®¾ç½®, ä½†æ˜¯æ²¡æœ‰ TTL, ç”¨äº dynamic content (updated in near real-time, åªè¯»)</li><li>é—®åˆ° S3 å¹¶ä¸”æœ‰å…³ high available å’Œ low latency çš„å°±æ˜¯ S3 Cross Region Replication</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233016.png"></p><ul><li>CloudFront å…è®¸ Proxy methods å’Œ Dynamic content è·³è¿‡ regional edge cache</li><li>é™¤äº† WAF å¯ä»¥å» block IP, è¿˜å¯ä»¥ä½¿ç”¨ OAI (origin access identity, é‡è¦)<ul><li>OAI ä¹Ÿå¯ä»¥ç”¨æ¥ secure communication between CloudFront &amp; S3</li></ul></li><li>å¯ä»¥ç”¨ CloudFront signed URLs å’Œ CloudFront signed cookies æ¥ restrict access to documents (æ¯”å¦‚ subscription)</li><li>Can configure CloudFront to require HTTPS from clients (å¯ä»¥ç”¨ CloudFront è¦æ±‚ client å¿…é¡»ä½¿ç”¨ HTTPS)</li><li>å…³äº CloudFront with Origin Groups çš„ 2 ä¸ªç‚¹<ul><li>CloudFront routes all incoming requests to the primary origin, even when a previous request failed over to the secondary origin</li><li>CloudFront fails over to the secondary origin only when the HTTP method of the viewer request is GET, HEAD or OPTIONS</li></ul></li></ul><hr><h4 id="CloudFront-Caching"><a href="#CloudFront-Caching" class="headerlink" title="CloudFront Caching"></a>CloudFront Caching</h4><ul><li>The cache lives at each CloudFront Edge Location</li><li>CloudFront identifies each object in the cache using Cache Key</li><li>å¦‚æœé‡åˆ° CloudFront å¤„ç† language é…ç½®å‡ºé—®é¢˜, é‚£ä¹ˆå¯ä»¥ç”¨ <code>Query string forwarding and caching</code> (è¿™é“é¢˜å¾ˆé•¿)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144432.png"></p><ul><li>CloudFront Cache Key<ul><li>By default, consists of hostname + resource portion of the URL</li><li>Could add other elements to the Cache Key using CloudFront Cache Policies</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144654.png"></p><ul><li>Cache Policy: å¯ä»¥ä½¿ç”¨ HTTP Headers, Cookies, Query Strings (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img444857.png"></p><ul><li>Origin Request Policy<ul><li>Values that you want to include in origin requests without including in the Cache Key</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145256.png"></p><hr><h4 id="CloudFront-Cache-Invalidation"><a href="#CloudFront-Cache-Invalidation" class="headerlink" title="CloudFront Cache Invalidation"></a>CloudFront Cache Invalidation</h4><ul><li>è®© CloudFront è·³è¿‡ TTL ç«‹å³æ›´æ–°<ul><li>æ¯”å¦‚ä½ æ›´æ–°äº†åç«¯, ä½†æ˜¯ CloudFront ä¸ä¼šç«‹å³æ›´æ–°, éœ€è¦ CloudFront Invalidation æ¥è·³è¿‡ TTL æ¥ç«‹å³æ›´æ–°</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234007.png"></p><hr><h4 id="CloudFront-Cache-Behaviors"><a href="#CloudFront-Cache-Behaviors" class="headerlink" title="CloudFront Cache Behaviors"></a>CloudFront Cache Behaviors</h4><ul><li>æ ¹æ®ä¸åŒçš„ URL ç»“æ„åšä¸åŒçš„ Cache Behaviors</li><li>Maximize cache hits by separating staic and dynamic distributions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150007.png"></p><hr><h4 id="CloudFront-Geo-Restriction"><a href="#CloudFront-Geo-Restriction" class="headerlink" title="CloudFront Geo Restriction"></a>CloudFront Geo Restriction</h4><ul><li>Allowlist &amp; Blocklist (é’ˆå¯¹ IP, å›½å®¶è¿›è¡Œè®¿é—®é™åˆ¶)<ul><li>CloudFront Geo Restriction æ²¡åŠæ³•å’Œ VPC ä¸€èµ·ä½¿ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233638.png"></p><hr><h4 id="CloudFront-Signed-URL-x2F-Cookies"><a href="#CloudFront-Signed-URL-x2F-Cookies" class="headerlink" title="CloudFront Signed URL &#x2F; Cookies"></a>CloudFront Signed URL &#x2F; Cookies</h4><ul><li>ç±»ä¼¼ S3 Pre-Signed URL<ul><li>Signed URL: access to individual files (å•ä¸ªæ–‡ä»¶)</li><li>Signed Cookies: access to multiple files (å¤šä¸ªæ–‡ä»¶)</li></ul></li><li>Recommend to use Trusted Key Group than CloudFront Key Pair (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img484256.png"></p><ul><li>CloudFront Signed URL vs. S3 Pre-Signed URL<ul><li>Access CloudFront çš„å°±æ˜¯ CloudFront Signed URL</li><li>Access S3 çš„å°±æ˜¯ S3 Pre-Signed URL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184528.png"></p><ul><li>ä¸ CloudFront signer æœ‰å…³çš„ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>When create a signer, the public key is CloudFront and private key is used to sign a portion of URL</li><li>When use the root user to manage CloudFront key pairs, you can only have up to two active CloudFront key pairs per AWS account</li></ul></li><li>CloudFront Key Pair åªèƒ½ç”± root user æ¥åˆ›å»º</li></ul><hr><h4 id="CloudFront-Advanced-Concepts"><a href="#CloudFront-Advanced-Concepts" class="headerlink" title="CloudFront Advanced Concepts"></a>CloudFront Advanced Concepts</h4><ul><li>Price Classes (ä¸€å…± 3 ç§)<ul><li>Price Class All: all regions - best performance</li><li>Price Class 200: most regions, but excludes the most expensive regions</li><li>Price Class 100: only the least expensive regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185111.png"></p><ul><li>CloudFront - Origin Groups<ul><li>Increase high-availability and do failover</li><li>Origin Group: one primary and one secondary origin</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185430.png"></p><ul><li>CloudFront - Field Level Encryption<ul><li>Protect user sensitive information through application stack (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185545.png"></p><hr><h4 id="CloudFront-Real-Time-Logs"><a href="#CloudFront-Real-Time-Logs" class="headerlink" title="CloudFront Real Time Logs"></a>CloudFront Real Time Logs</h4><ul><li>Get real-time requests received by CloudFront sent to Kinesis Data Stream</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195222.png"></p><hr><h4 id="AWS-Global-Accelerator"><a href="#AWS-Global-Accelerator" class="headerlink" title="AWS Global Accelerator"></a>AWS Global Accelerator</h4><ul><li>åˆ©ç”¨ AWS internal network to route application<ul><li>Provide 2 global static anycast IPs (é‡è¦)</li><li>Improve availability and performance of the applications (globally)</li></ul></li><li>Global Accelerator improves performance for applications over TCP or UDP</li><li>Global Accelerator has automatic failover</li><li>Global Accelerator is more expensive as it adds an extra layer of infrastructure (å¯¹æ¯” CloudFront ä¸æ˜¯ä¸€ä¸ª cost-effective çš„é€‰æ‹©)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234527.png"></p><ul><li>AWS Global Accelerator vs CloudFront<ul><li>CloudFront: Content is served at edge, æ¯”å¦‚å›¾ç‰‡å’Œè§†é¢‘ (cacheable), Dynamic content such as API acceleration &amp; dynamic site delivery</li><li>Global Accelerator: é€‚åˆ TCP æˆ–è€… UDP, æ¯”å¦‚æ¸¸æˆå’Œ IoT (static IP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000939.png"></p><blockquote><p>AWS Global Accelerator is a network service that can provide a global traffic management solution. By creating a standard accelerator in AWS Global Accelerator, you can guide user traffic to the endpoint closest to them, thereby improving the performance and availability of the application.</p></blockquote><hr><h3 id="14-ECS-ECR-amp-Fargate"><a href="#14-ECS-ECR-amp-Fargate" class="headerlink" title="14. ECS, ECR &amp; Fargate"></a>14. ECS, ECR &amp; Fargate</h3><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><ul><li>Elastic Container Service (Manage Docker containers on AWS)</li><li>ECS æœ‰ä¸¤ç§ Launch Type: EC2 å’Œ Fargate (Fargate æ˜¯ serverless çš„)</li><li>EC2 Launch Type: Need Provision, éœ€è¦ ECS Agent (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212508.png"></p><ul><li>Fargate Launch Type: Serverless, No Provision (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212546.png"></p><ul><li>IAM Roles for ECS (é‡è¦, æ˜¯ IAM)<ul><li>EC2 Instance Profile: åªé’ˆå¯¹ EC2 Launch Type, used by ECS agent</li><li>ECS Task Role: æ¯ä¸ª Task éƒ½æœ‰è‡ªå·±çš„ Role (è´Ÿè´£)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212709.png"></p><ul><li>ECS å¯ä»¥å’Œ Load Balancer ä¸€èµ·ç”¨ (ALB &#x2F; NLB)</li><li>ECS å¯ä»¥å’Œ EFS ä¸€èµ·ç”¨ (Fargate + EFS &#x3D; Serverless, ç®¡ç†æ–‡ä»¶)</li><li>å¦‚æœ terminate ECS å‡ºç° synchronization issue, é‚£ä¹ˆ ECS å½“å‰çš„çŠ¶æ€ä¸€å®šæ˜¯ <code>STOPPED</code></li><li>å¦‚æœ ECS cluster launch å‡ºé—®é¢˜, é‚£ä¹ˆå…ˆæ£€æŸ¥ <code>ecs.config</code> æœ‰æ²¡æœ‰é—®é¢˜</li><li>å¯ä»¥ç”¨ awslogs log driver æ¥é€ ECS çš„ log åˆ° CloudWatch, å¦‚æœ ECS æ˜¯ Fargate ç±»å‹çš„, è¿˜éœ€è¦ <code>logConfiguration</code> parameter åœ¨ task definition é‡Œ</li></ul><blockquote><p>Amazon ECS with EC2 launch type is charged based on EC2 instances and EBS volumes used. Amazon ECS with Fargate launch type is charged based on vCPU and memory resources that the containerized application requests</p></blockquote><hr><h4 id="ECS-Auto-Scaling"><a href="#ECS-Auto-Scaling" class="headerlink" title="ECS Auto Scaling"></a>ECS Auto Scaling</h4><ul><li>Automatically increase &#x2F; decrease the number of ECS tasks<ul><li>Target Scaling: Scale based on target value for CloudWatch metric</li><li>Step Scaling: Scale based on CloudWatch Alarm (é‡è¦)</li><li>Scheduled Scaling: Scale based on specific time (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222247.png"></p><ul><li>Auto Scaling EC2 Instances<ul><li>Accommodate ECS Service Scaling by adding underlying EC2 Instances</li><li>Auto Scaling Group Scaling &#x2F; ECS Cluster Capacity Provider</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205104.png"></p><hr><h4 id="ECS-Rolling-Updates"><a href="#ECS-Rolling-Updates" class="headerlink" title="ECS Rolling Updates"></a>ECS Rolling Updates</h4><ul><li>Control how many tasks can be started and stopped when update from v1 to v2</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205259.png"></p><hr><h4 id="ECS-Task-Definitions"><a href="#ECS-Task-Definitions" class="headerlink" title="ECS Task Definitions"></a>ECS Task Definitions</h4><ul><li>Task definitions are metadata in JSON form to tell ECS how to run Docker container</li><li>Environment Variable: Hardcoded, SSM Parameter Store, Secrets Manager, S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210902.png"></p><ul><li>ECS Load Balancing - EC2 Launch Type<ul><li>Get a Dynamic Host Port Mapping if define only the container port in task definiton</li><li>Must allow EC2 Instanceâ€™s Security Group any port from the ALBâ€™s Security Group (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211103.png"></p><ul><li>ECS Load Balancing - Fargate<ul><li>Each task has a unique private IP, only define the container port</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211211.png"></p><ul><li>ECS Data Volumes (Bind Mounts)<ul><li>Share data between multiple containers in the same Task Definition</li><li>Work for both EC2 and Fargate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211542.png"></p><hr><h4 id="ECS-Task-Placements"><a href="#ECS-Task-Placements" class="headerlink" title="ECS Task Placements"></a>ECS Task Placements</h4><ul><li>For EC2 Launch Type, determine where to place the EC2, CPU, Memory ç­‰ç­‰</li><li>ECS Task Placement Strategies could mixed together (Binpack, Random å’Œ Spread)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212801.png"></p><ul><li>ECS Task Placement Strategies - Binpack<ul><li>Place tasks based on the least available amount of CPU or memory</li><li>This minimize the number of instances in use (cost saving, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213429.png"></p><ul><li>ECS Task Placement Strategies - Random<ul><li>Place the task randomly</li><li>To enable random host port, set host <code>port = 0</code> or empty, which allow multiple containers of same type to launch on the same EC2 container instance</li><li>å¦‚æœé—®åˆ°ç¬¬ä¸€ä¸ª container è¿è¡ŒæˆåŠŸ, ä½†ç¬¬äºŒä¸ªè¿è¡Œå¤±è´¥, é‚£å°±æ˜¯ host port çš„é—®é¢˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213517.png"></p><ul><li>ECS Task Placement Strategies - Spread<ul><li>Place the task evenly based on the specified value</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213603.png"></p><ul><li>ECS Task Placement Constraints<ul><li><code>distinctInstance</code>: Place each task on a different container instance</li><li><code>memberOf</code>: Place task on instances that satisfy an expression</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213754.png"></p><hr><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><ul><li>Elastic Container Registry (ECR, ç®¡ç† Docker Image, ä¸æ˜¯ Docker Container)<ul><li>Store and manage Docker images on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222836.png"></p><ul><li>How to use CLI to pull and push image to ECR<ul><li><code>$(aws ecr get-login --no-include-email)</code></li><li><code>docker pull 1234567890.dkr.ecr.eu-west-1.amazonaws.com/demo:latest</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214106.png"></p><hr><h4 id="AWS-CoPilot"><a href="#AWS-CoPilot" class="headerlink" title="AWS CoPilot"></a>AWS CoPilot</h4><ul><li>CLI tool to build, release, and operate production-ready containerized apps<ul><li>Run your apps on AppRunner, ECS, and Fargate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214226.png"></p><hr><h4 id="AWS-EKS"><a href="#AWS-EKS" class="headerlink" title="AWS EKS"></a>AWS EKS</h4><ul><li>Elastic Kubernetes Service (Manage Kubernetes clusters on AWS)<ul><li>Support 2 deployment mode: EC2 &amp; Fargate (å’Œ ECS ä¸€æ ·)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223132.png"></p><ul><li>EKS Data Volumes (éœ€è¦ StorageClass)<ul><li>Leverages a Container Storage Interface (CSI) compliant driver</li><li>æ”¯æŒ EBS, EFS, FSx</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223503.png"></p><hr><h3 id="15-Elastic-Beanstalk"><a href="#15-Elastic-Beanstalk" class="headerlink" title="15. Elastic Beanstalk"></a>15. Elastic Beanstalk</h3><h4 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h4><ul><li>Elastic Beanstalk is a developer centric view of deploying an application on AWS</li><li>Automatically handles capacity provisioning, load balancing, scaling ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150326.png"></p><ul><li>Web Server Tier vs. Worker Tier (é‡è¦)<ul><li>ä¸€ä¸ªç®¡ Web Server, å¦ä¸€ä¸ªå¤„ç† Process (SQS, SNS ç­‰ç­‰)</li></ul></li><li>å¯¹äº Worker æˆ–è€… Web environment æ¥è¯´, éœ€è¦ä¸€ä¸ª <code>cron.yaml</code> æ–‡ä»¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210711.png"></p><ul><li>å¦‚æœé€‰æ‹© deploy åˆ° Elastic Beanstalk ä¸Š, å¹¶ä¸”çœé’±, é€‰æ‹© Single Instance Mode</li><li>å¦‚æœéœ€è¦ç”¨ç±»ä¼¼ Rust è¿™ç§ä¸æ”¯æŒçš„ runtime, å¯ä»¥ç”¨ Docker image å»è·‘ Elastic Beanstalk</li><li>å¦‚æœ deploy å¤±è´¥, é‚£ä¹ˆ EB ä¼š replace the failed instances with instances running in the application version from the most recent successful deployment (é‡è¦)</li><li>å¦‚æœè¦ setup HTTPS on Beanstalk, è¦åœ¨ <code>.ebextensions</code> folder å¼„ä¸€ä¸ª config æ¥ç®¡ Load Balancer</li><li>å¦‚æœè¦ migrate Beanstalk environment across Accounts<ul><li>Create a saved configuration download it to your local machine. Make the account-specific parameter changes and upload to the S3 bucket in another account. From Elastic Beanstalk console, create an application from â€˜Saved Configurationsâ€™</li></ul></li></ul><hr><h4 id="Beanstalk-Deployment-Modes"><a href="#Beanstalk-Deployment-Modes" class="headerlink" title="Beanstalk Deployment Modes"></a>Beanstalk Deployment Modes</h4><ul><li>ä¸€å…± 6 ç§ Beanstalk Deployment Modes</li><li>è¿™é‡Œé¢ Immutable å’Œ Traffic Splitting å¯èƒ½ä¼šå¯¼è‡´ EC2 burst balance lost (é‡è¦)</li><li>æ³¨æ„, Rolling å’Œ Rolling with additional batches éƒ½ä¼šå¯¼è‡´ reduce availability</li><li>All at once (ç›´æ¥å…¨éƒ¨æ›´æ–°, ä½†ä¼šæœ‰ downtime)<ul><li>Fastest, but have downtime</li></ul></li><li>Beanstalk ç”¨æ¥ avoid downtime çš„é€‰æ‹© blue&#x2F;green deployment (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151200.png"></p><ul><li>Rolling (ä¸€æ‰¹ä¸€æ‰¹çš„æ›´æ–°)<ul><li>Update a few instances at a time (bucket), then move onto the next bucket</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151311.png"></p><ul><li>Rolling with additional batches (ç±»ä¼¼ Rolling, ä½†æ˜¯è€ç‰ˆæœ¬ä»ç„¶è¿è¡Œ, æœ‰éƒ¨åˆ†é¢å¤–è´¹ç”¨)<ul><li>Like rolling, but spins up new instances to move the batch, old application still available</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151443.png"></p><ul><li>Immutable (å’Œ quick roll back æœ‰å…³)<ul><li>Spin up new instances in a new ASG, deploys version to these instances, and then swaps all the instances when everything is healthy</li><li>å¦‚æœéœ€è¦ maintain at least the full capacity of the application and minimal impact of fail deployment, é€‰æ‹© Immutable</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151738.png"></p><ul><li>Blue Green (ä¼šå…ˆåˆ›é€ ä¸€ä¸ªæ–°çš„ environment)<ul><li>Create a new environment and switch over when ready</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151838.png"></p><ul><li>Traffic Splitting (åˆ†ä¸€éƒ¨åˆ† traffic åˆ°æ–°ç¯å¢ƒ)<ul><li>Canary testing, send a small % of traffic to new deployment</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151935.png"></p><hr><h4 id="Beanstalk-Lifecycle-Policy"><a href="#Beanstalk-Lifecycle-Policy" class="headerlink" title="Beanstalk Lifecycle Policy"></a>Beanstalk Lifecycle Policy</h4><ul><li>Elastic Beanstalk can store at most 1000 application versions</li><li>To phase out old application versions, use a lifecycle policy (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152423.png"></p><hr><h4 id="Beanstalk-Extensions"><a href="#Beanstalk-Extensions" class="headerlink" title="Beanstalk Extensions"></a>Beanstalk Extensions</h4><ul><li>A zip file containing code must be deployed to Elastic Beanstalk<ul><li>In the <code>.ebextensions/</code> in the root directory (å¿…é¡»å­˜åœ¨ <code>.ebextensions</code> çš„æ–‡ä»¶å¤¹ä¸‹)</li><li><code>.config</code> extensions (å¿…é¡»ä»¥ <code>.config</code> ä¸ºæ–‡ä»¶åç¼€)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155315.png"></p><hr><h4 id="Beanstalk-with-CloudFormation"><a href="#Beanstalk-with-CloudFormation" class="headerlink" title="Beanstalk with CloudFormation"></a>Beanstalk with CloudFormation</h4><ul><li>Under the hood, Elastic Beanstalk relies on CloudFormation</li><li>CloudFormation is used to provision other AWS services</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161346.png"></p><hr><h4 id="Beanstalk-Cloning"><a href="#Beanstalk-Cloning" class="headerlink" title="Beanstalk Cloning"></a>Beanstalk Cloning</h4><ul><li>Clone an environment with the exact same configuration</li><li>Useful for deploying a <code>test</code> version of your application</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161531.png"></p><hr><h3 id="16-AWS-CloudFormation"><a href="#16-AWS-CloudFormation" class="headerlink" title="16. AWS CloudFormation"></a>16. AWS CloudFormation</h3><h4 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h4><ul><li>A declarative way of outlining AWS Infrastructure (ç›¸å½“äºæœ‰ä¸€ä¸ªæ¨¡æ¿å¸®ä½ ç”Ÿæˆä½ æƒ³è¦çš„)<ul><li>éœ€è¦ä»€ä¹ˆ (eg. EC2 Instance, S3), CloudFormation ç»™ä½  create ä»€ä¹ˆ</li><li>CloudFormation æ˜¯ IaaS (Infrastructure as a Service)</li></ul></li><li>Can leverage existing templates on the web (å¯ä»¥ç”¨ç½‘ä¸Šå·²ç»æœ‰çš„ template)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003448.png"></p><ul><li>Templates must be uploaded in S3 and referenced in CloudFormation (é‡è¦)</li><li>To update a template, need to re-upload a new version of the template (é‡è¦)<ul><li>ä¸€èˆ¬æ¥è¯´, å…ˆåœ¨æœ¬åœ°æ›´æ–° CloudFormation template, ç„¶åä¸Šä¼ åˆ° S3 å¹¶åœ¨ CloudFormation console é‡Œé¢åº”ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193232.png"></p><ul><li>Deploying CloudFormation Templates (2 ç§æ–¹æ³•)<ul><li>Manual way: Edit templates in Applcation Composer or code editor</li><li>Automated way: Edit templates in a YAML file</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193404.png"></p><ul><li>æ³¨æ„, ä¾èµ– CloudFormation æ¥ provision resource çš„æ˜¯ Elastic Beanstalk å’Œ SAM</li><li>CloudFormation ç”¨æ¥ upload Lambda å’Œ CloudFormation template çš„æ˜¯ <code>cloudformation package and cloudformation deploy</code></li><li>å¦‚æœè¦ declare Lambda function in CloudFormation<ul><li>Write the AWS Lambda code inline in CloudFormation in the <code>AWS::Lambda::Function</code> block as long as there are no third-party dependencies</li><li>Upload all the code as a zip to S3 and refer the object in <code>AWS::Lambda::Function</code> block</li></ul></li></ul><hr><h4 id="CloudFormation-Resources"><a href="#CloudFormation-Resources" class="headerlink" title="CloudFormation Resources"></a>CloudFormation Resources</h4><ul><li>Resources represent different AWS Components that will be created and configured<ul><li>ä¸éœ€è¦å®šä¹‰ <code>Resource</code> ç”Ÿæˆçš„ order</li><li><code>Resource</code> æ˜¯ mandatory çš„ (é‡è¦)</li></ul></li><li>å½¢å¼ <code>service-provider::service-name::data-type-name</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194109.png"></p><hr><h4 id="CloudFormation-Parameters"><a href="#CloudFormation-Parameters" class="headerlink" title="CloudFormation Parameters"></a>CloudFormation Parameters</h4><ul><li>Parameters are a way to provide inputs to AWS CloudFormation Template<ul><li>Can reuse the templates, also donâ€™t need to re-upload the template</li><li>Parameter type æœ‰ <code>AWS::EC2::KeyPair::KeyName, CommaDelimitedList, String</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194424.png"></p><ul><li>Parameters Settings (è®°ä¸‹é¢ 2 ä¸ª)<ul><li><code>AllowedValues</code>: ç»™ç”¨æˆ·é€‰é¡¹, æ¯”å¦‚é€‰æ‹© <code>t2.micro</code>, <code>t2.small</code>, <code>t2.medium</code></li><li><code>NoEcho</code>: æŠŠ password è¿™ç§ secret çš„ä¸œè¥¿ä» log é‡Œé¢ç§»é™¤</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194757.png"></p><ul><li>Pseudo Parameters<ul><li>Can be used anytime and enabled by default</li><li><code>AccountId, Region, StackId, StackName, NotificationARNs, NoValue</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223040.png"></p><hr><h4 id="CloudFormation-Mappings"><a href="#CloudFormation-Mappings" class="headerlink" title="CloudFormation Mappings"></a>CloudFormation Mappings</h4><ul><li>Mappings are fixed variables within CloudFormation template<ul><li>Used to differentiate between environments (dev vs. prod), regions, AMI ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212000.png"></p><hr><h4 id="CloudFormation-Outputs-amp-Exports"><a href="#CloudFormation-Outputs-amp-Exports" class="headerlink" title="CloudFormation Outputs &amp; Exports"></a>CloudFormation Outputs &amp; Exports</h4><ul><li>Outputs declares optional ouputs values that can import into other stacks (é‡è¦)<ul><li>Outputs å¯ä»¥ç”³æ˜èµ„æºè®©æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»– Stack é‡Œé¢ç”¨ (å‰ææ˜¯å…ˆ export å®ƒä»¬)</li><li>Exported output name åœ¨ Region å†…å¿…é¡»æ˜¯ unique çš„ (é‡è¦)</li></ul></li><li>å¦‚æœæˆ‘ä»¬è¦åœ¨ç¬¬äºŒä¸ª template é‡Œé¢å» leverage å‰ä¸€ä¸ª template çš„èµ„æº, è¦ç”¨åˆ° <code>Fn::ImportValue</code> (é‡è¦)</li><li>æ³¨æ„, <code>ImportValue</code> æ˜¯ç”¨æ¥ reference value from other stack, <code>Export</code> æ‰æ˜¯ç”¨æ¥ export value to other stacks çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212344.png"></p><ul><li>æ³¨æ„, å¯¹äº CloudFormation æ¥è¯´, All of the imports must be removed before you can delete the exporting stack or modify the output value, æ‰€ä»¥å¦‚æœé‡åˆ° Stack B, C éœ€è¦ reference Stack A, é‚£ä¹ˆ Stack A ä¸€å®šæ˜¯æœ€åè¢«åˆ é™¤çš„</li></ul><hr><h4 id="CloudFormation-Conditions"><a href="#CloudFormation-Conditions" class="headerlink" title="CloudFormation Conditions"></a>CloudFormation Conditions</h4><ul><li>Conditions are used to control the creation of resources or outputs based on a condition<ul><li>å¸¸è§çš„æœ‰ Environment, AWS Region, Parameter value</li></ul></li><li>å¯ä»¥å’Œ <code>Conditions</code> associate æœ‰ <code>Resources, Conditions, Outputs</code></li><li>åœ¨ CloudFormation template é‡Œé¢ä»£è¡¨ invalid section çš„æ˜¯ <code>Dependencies</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212731.png"></p><hr><h4 id="CloudFormation-Intrinsic-Functions"><a href="#CloudFormation-Intrinsic-Functions" class="headerlink" title="CloudFormation Intrinsic Functions"></a>CloudFormation Intrinsic Functions</h4><ul><li><code>Fn::Ref</code>: Reference Rarameters or Resources (åªèƒ½åœ¨ Parameter æˆ–è€… Resource é‡Œç”¨)</li><li><code>Fn::GetAtt</code>: Returns the value of an attribute from a resource in the template</li><li><code>Fn::FindInMap</code>: Return a named value from a specific key (æ³¨æ„, å°± 3 å‚æ•°)</li><li><code>Fn::ImportValue</code>: Import values that are exported in other stacks</li><li><code>Fn::Base64</code>: Convert String to itâ€™s Base64 representation</li><li>Condition Functions: <code>Fn::And/Equals/If/Not/Or</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214211.png"></p><hr><h4 id="CloudFormation-Rollbacks"><a href="#CloudFormation-Rollbacks" class="headerlink" title="CloudFormation Rollbacks"></a>CloudFormation Rollbacks</h4><ul><li>Stack Creation Fails å’Œ Stack Update Fails éƒ½ä¼šå» rollback, ä½† rollback ä¹Ÿå¯èƒ½å¤±è´¥</li><li>Rollback ä¹‹åå¦‚æœéœ€è¦é‡æ–°æ›´æ–° Stack, è¦å…ˆåˆ é™¤ä¹‹å‰çš„ Stack, ç„¶å create æ–°çš„ Stack</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215108.png"></p><hr><h4 id="CloudFormation-Service-Role"><a href="#CloudFormation-Service-Role" class="headerlink" title="CloudFormation Service Role"></a>CloudFormation Service Role</h4><ul><li>IAM role that allow CloudFormation to <code>create/update/delete</code> stack resources<ul><li>å¯ä»¥ç”¨ Stack Servie Role å»ç»™ developer permission å»ç®¡ç† resources (é‡è¦)</li></ul></li><li>Achieve least privilege principle, must have <code>iam::PassRole</code> permission</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215347.png"></p><hr><h4 id="CloudFormation-DeletionPolicy"><a href="#CloudFormation-DeletionPolicy" class="headerlink" title="CloudFormation DeletionPolicy"></a>CloudFormation DeletionPolicy</h4><ul><li>DeletionPolicy &#x3D; Delete (é»˜è®¤)<ul><li>Control what happens when the CloudFormation template is deleted or when a resource is removed from a CloudFormation template</li></ul></li><li>Delete wonâ€™t work on S3 if bucket is not empty</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220014.png"></p><ul><li>DeletionPolicy &#x3D; Retain (ç›¸å½“äºç”³æ˜ä»€ä¹ˆè¦è¢«ä¿å­˜)<ul><li>Specify on resources to preserve in case of CloudFormation deletes</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220147.png"></p><ul><li>DeletionPolicy &#x3D; Snapshot (ä¼šåœ¨åˆ é™¤å‰ç”Ÿæˆä¸€ä¸ªå¤‡ä»½)<ul><li>Create one final snapshot before deleting the resource</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220302.png"></p><hr><h4 id="CloudFormation-Stack-Policy"><a href="#CloudFormation-Stack-Policy" class="headerlink" title="CloudFormation Stack Policy"></a>CloudFormation Stack Policy</h4><ul><li>A Stack Policy is a JSON document that defines the update actions that are allowed on specific resources during Stack updates</li><li>Protect resources from unintentional updates (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220535.png"></p><hr><h4 id="CloudFormation-Termination-Protection"><a href="#CloudFormation-Termination-Protection" class="headerlink" title="CloudFormation Termination Protection"></a>CloudFormation Termination Protection</h4><ul><li>To prevent accidental deletes of CloudFormation Stacks, use <code>TerminationProtection</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220655.png"></p><hr><h4 id="CloudFormation-Custom-Resources"><a href="#CloudFormation-Custom-Resources" class="headerlink" title="CloudFormation Custom Resources"></a>CloudFormation Custom Resources</h4><ul><li>Used to define resources that are not supported or outside CloudFormation</li><li>Defined in template with <code>Custom::MyCustomResourceTypeName</code></li><li>å¯ä»¥å¤„ç†ä¹‹å‰æåˆ°çš„ S3 bucket æ— æ³•åˆ é™¤çš„é—®é¢˜</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221103.png"></p><hr><h4 id="CloudFormation-StackSets"><a href="#CloudFormation-StackSets" class="headerlink" title="CloudFormation StackSets"></a>CloudFormation StackSets</h4><ul><li>Create, update, delete stacks across multiple accounts and regions<ul><li>æ³¨æ„, StackSets æ˜¯ç»™å¤šä¸ªè´¦æˆ·, æˆ–è€…å¤šä¸ª Region å»åˆ›é€  CloudFormation stack</li><li>åªæœ‰ Administrator æ‰å¯ä»¥åˆ›å»º StackSets</li></ul></li><li>When update a stack set, all associated stack instance will be updated (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221509.png"></p><hr><h3 id="17-SQS-SNS-Kinesis"><a href="#17-SQS-SNS-Kinesis" class="headerlink" title="17. SQS, SNS, Kinesis"></a>17. SQS, SNS, Kinesis</h3><h4 id="AWS-SQS"><a href="#AWS-SQS" class="headerlink" title="AWS SQS"></a>AWS SQS</h4><ul><li>ç”¨æ¥ decouple applications (æ¯”å¦‚å¤„ç†è§†é¢‘, å±äºå¤šå¯¹å¤šæ¨¡å‹)</li><li>SQS scale automatically (unlimited throughput, unlimited message, can retry)</li><li>SQS æœ€å¤šåªèƒ½ä¿å­˜ message 14 å¤©, SQS ä¸€ä¸ª message æœ€å¤§åªæœ‰ 256 KB (é‡è¦)</li><li>SQS ä¸€æ¬¡æœ€å¤šåªèƒ½ retrieve 10 ä¸ª message (é‡è¦)</li><li>Standard SQS å…è®¸å°† S3 ä½œä¸º event notification destination, SQS FIFO åˆ™ä¸è¡Œ</li><li>å¤„ç† parallel é€‰ SQS è€Œä¸æ˜¯ SNS</li><li>å¤„ç† decouple microservice (ä½†æ˜¯æ²¡æœ‰ 3rd party çš„) å°±æ˜¯ SQS</li><li>å¤„ç† high-throughput request-reponse message pattern çš„, é€‰æ‹© Temporary Queue</li><li>é‡åˆ°è¦å¤„ç† workflows that take a long time to complete, é€‰æ‹© Dedicated worker environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231916.png"></p><ul><li>SQS - Producing Messages<ul><li>Message is persisted in SQS until a consumer delete it (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232217.png"></p><ul><li>SQS - Consuming Messages<ul><li>å¯ä»¥æœ‰å¾ˆå¤š consumer æ¥åŒæ—¶ parallel å¤„ç† messages (é‡è¦)</li><li>Consumer delete messages after processing them (å¤„ç†å®Œå°±åˆ æ‰)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232414.png"></p><ul><li>å½“é‡åˆ° SQS è€Œä¸”éœ€è¦ priority çš„æ—¶å€™, Create two Amazon SQS standard queues, Set up Amazon EC2 instances to prioritize polling</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q32-i1.jpg"></p><ul><li>å…³äº SQS <code>CreateQueue</code> API çš„ 2 ä¸ªçŸ¥è¯†ç‚¹</li><li>The visibility timeout value of the queue is in seconds, default is 30 seconds</li><li>You canâ€™t change the queue type after create it</li><li>å¦‚æœé‡åˆ° <code>ApproximateNumberOfMessagesVisible</code> è¿™ä¸ªé—®é¢˜, å¯ä»¥ç”¨ backlog per instance metric with target tracking scaling policy æ¥è§£å†³</li></ul><hr><h4 id="SQS-Message-Visibility-Timeout"><a href="#SQS-Message-Visibility-Timeout" class="headerlink" title="SQS Message Visibility Timeout"></a>SQS Message Visibility Timeout</h4><ul><li>Visibility Timeout is high: Consumer crash, re-process take time</li><li>Visibility Timeout is low: Get duplicate (é˜²æ­¢ read duplicate, å¢åŠ  timeout, é‡è¦)</li><li>Use the <code>ChangeMessageVisibility</code> API call to increase the visibility timeout (é‡è¦)</li><li>é¢˜ç›®å¤§éƒ¨åˆ†é’ˆå¯¹çš„éƒ½æ˜¯ Visibility Timeout low çš„æƒ…å†µ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020440.png"></p><hr><h4 id="SQS-Dead-Letter-Queues-DLQ"><a href="#SQS-Dead-Letter-Queues-DLQ" class="headerlink" title="SQS Dead Letter Queues (DLQ)"></a>SQS Dead Letter Queues (DLQ)</h4><ul><li>Fail to process message within Visibility Timeout, message goes back to queue<ul><li>é—®é¢˜åœ¨äºè¿™ä¸ª message å¯èƒ½æœ¬èº«å°±æ˜¯æ— æ³•å¤„ç†çš„</li><li>é‡åˆ° SQS message process failure, é€‰æ‹© DLQ æ¥è§£å†³ (é‡è¦)</li></ul></li><li>Set a threshold of how many times a message can go back to queue<ul><li>After <code>MaximumReceives</code> threshold exceeded, message goes to DLQ</li><li>DLQ å¾ˆé€‚åˆç”¨æ¥åš Debug</li></ul></li><li>DLQ of a FIFO queue must also be a FIFO queue, same with Standard (å½¢å¼å¾—ç›¸åŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164418.png"></p><ul><li>DLQ - Redrive to Source (ç›¸å½“äºä» DLQ ä¿®å¤å®Œè¿”å›åŸæ¥çš„ Queue)<ul><li>Feature to help consume messages in DLQ to understand what is wrong</li><li>When the code is fixed, we can redrive the message from DLQ to source queue</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164607.png"></p><hr><h4 id="SQS-Delay-Queues"><a href="#SQS-Delay-Queues" class="headerlink" title="SQS Delay Queues"></a>SQS Delay Queues</h4><ul><li>Delay a message up to 15 minutes (ä½¿ç”¨ <code>DelaySeconds</code> å‚æ•°)</li><li>é‡åˆ°éœ€è¦ SQS å» postpone the delivery of new messages, é‚£ä¹ˆå°±æ˜¯ Delay Queue</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164931.png"></p><hr><h4 id="SQS-Long-Polling"><a href="#SQS-Long-Polling" class="headerlink" title="SQS Long Polling"></a>SQS Long Polling</h4><ul><li>Decrease latency &amp; decrease API call (å‡å°‘ API è¯·æ±‚, æ›´å¥½çš„ performance, é‡è¦)<ul><li>Minimize the cost of using SQS (çœé’±)</li><li>Long Polling ä¸èƒ½å¤„ç† SQS duplicate, è¿˜æ˜¯è¦ç”¨ Visibility Timeout</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003255.png"></p><hr><h4 id="SQS-Extended-Client"><a href="#SQS-Extended-Client" class="headerlink" title="SQS Extended Client"></a>SQS Extended Client</h4><ul><li>Handle send message greater than 256 KB (é‡è¦)<ul><li>è¿™è¯æ˜ SQS çš„ message ä¹Ÿæ˜¯æœ‰ size çš„é™åˆ¶</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165310.png"></p><hr><h4 id="SQS-FIFO-Queues"><a href="#SQS-FIFO-Queues" class="headerlink" title="SQS FIFO Queues"></a>SQS FIFO Queues</h4><ul><li>æŒ‰ order ä¼ é€’ message (SNS ä¹Ÿå¯ä»¥åšåˆ°)<ul><li>By default, FIFO queues support up to 300 messages per second (é‡è¦)</li></ul></li><li>å¦‚æœæ²¡æœ‰ GroupID, é‚£åªèƒ½æœ‰ 1 ä¸ª consumer, å¦‚æœæœ‰ GroupID, å¯ä»¥æœ‰å¤šä¸ª consumer (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003507.png"></p><ul><li>æŠŠ SQS è½¬æˆ FIFO queue<ul><li>Delete the existing SQS and recreate it as FIFO queue</li><li>Make sure the name of the FIFO queue ends with .fifo suffix</li><li>Make sure the throughput for the FIFO queue not exceed 3000 meesage &#x2F; second</li></ul></li></ul><hr><h4 id="SQS-FIFO-Queues-Advanced"><a href="#SQS-FIFO-Queues-Advanced" class="headerlink" title="SQS FIFO Queues Advanced"></a>SQS FIFO Queues Advanced</h4><ul><li>De-duplication: (ä½¿ç”¨ <code>MessageDeduplicationID</code>)<ul><li>Send 2 same message within 5 minutes interval, the second will be refused</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170023.png"></p><ul><li>Message Grouping (ä½¿ç”¨ <code>MessageGroupID</code>)<ul><li>Same <code>MessageGroupID</code> in the entire FIFO queue, then only have 1 consumer</li><li>Different MessageGroupID for a subset of message, have different consumers</li><li>å¯¹äº FIFO queues æ¥è¯´, <code>MessageGroupID</code> å¯ä»¥ä¿è¯ same message group æ˜¯æœ‰ order çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170254.png"></p><hr><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><ul><li>Send one message to many receivers (å¯ä»¥ç»™ç”¨æˆ·å‘ email)<ul><li>Publisher &amp; Subscriber æ¨¡å‹ (å±äºä¸€å¯¹å¤šæ¨¡å‹)</li><li>Subscriber: SQS, Lambda, Kinesis Data Firehose, HTTPS endpoints, Email</li></ul></li><li>SNS Message Filtering: Could filter message based on topic (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010634.png"></p><hr><h4 id="Fan-Out-Pattern"><a href="#Fan-Out-Pattern" class="headerlink" title="Fan Out Pattern"></a>Fan Out Pattern</h4><ul><li>Push once in SNS, receive in all SQS (ç”± SNS ä¼ é€’ message ç»™ SQS æ¥æ¥æ”¶, é‡è¦)<ul><li>Fully decoupled, no data loss (é‡è¦, å› ä¸ºå®ƒ decouple)</li><li>å¯ä»¥ç”¨äº message filtering (ä¿¡æ¯è¿‡æ»¤, æ ¹æ®ä¸åŒçš„ filter policy)</li></ul></li><li>Kinesis ä¹Ÿå¯ä»¥ä½¿ç”¨ Fan Out Pattern (ä½¿ç”¨ Shard)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011026.png"></p><hr><h4 id="AWS-Kinesis"><a href="#AWS-Kinesis" class="headerlink" title="AWS Kinesis"></a>AWS Kinesis</h4><ul><li>Process, ingest, buffer streaming data in real-time (å¤„ç†å®æ—¶æ•°æ®)</li><li>Kinesis Data Streams: Capture, process, store data streams</li><li>Kinesis Data Firehose: Load data streams into AWS data stores (S3, Redshift)</li><li>Kinesis Data Analytics: Analyze data streams with SQL or Apache Flink</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150053.png"></p><blockquote><p>Kinesis Agent cannot write to Amazon Kinesis Firehose for which the delivery stream source is already set as Amazon Kinesis Data Streams</p></blockquote><ul><li>Kinesis Agent is a stand-alone Java software application that offers an easy way to collect and send data to Kinesis Data Streams</li></ul><hr><h4 id="Kinesis-Data-Streams"><a href="#Kinesis-Data-Streams" class="headerlink" title="Kinesis Data Streams"></a>Kinesis Data Streams</h4><ul><li>Have the ability to reprocess &amp; replay stream data (å¤„ç†æ•°æ®, é‡è¦)<ul><li>å¯¹äº injest data æ¥è¯´, Kinesis Data Firehose æ¯” Kinesis Data Streams å¥½</li><li>å¤„ç† real-time data stream, æ¯”å¦‚ clickstreams, transactions, media (é‡‘èæ•°æ®)</li><li>Consumer æœ‰ Lambda, Kinesis Firehose, Kinesis Data Analytics</li><li>Kinesis Data Streams æœ‰åŠ©äºæ¯ç§’ä»å¤šä¸ªæ¥æºè¿ç»­æ”¶é›†æ•° GB çš„æ•°æ®</li><li>Kinesis Data Streams æœ€å¤šä¿å­˜æ•°æ® 1 å¹´</li></ul></li><li>Once data is inserted in Kinesis, it canâ€™t be deleted (æ²¡æ³•åˆ é™¤)</li><li>å¦‚æœé—®åˆ° Kinesis Data Stream åŠ ä¸Š SQL, é‚£ä¹ˆç­”æ¡ˆé‡Œä¸€å®šæœ‰ Kinesis Data Analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014850.png"></p><ul><li>Data share the same partition goes the same shard (æœ‰é¡ºåºçš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151123.png"></p><ul><li>Capacity Mode (ä¸€å…± 2 ç§)<ul><li>Provisioned mode: Choose a number of shards provisioned (è®¾ç½®ä¸Šé™)</li><li>On-demand mode: No need to provision or manage capacity (è‡ªåŠ¨ scale)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151507.png"></p><hr><h4 id="Kinesis-Producers"><a href="#Kinesis-Producers" class="headerlink" title="Kinesis Producers"></a>Kinesis Producers</h4><ul><li>Put data records into data streams</li><li>Producers: AWS SDK, Kinesis Producer Library (KPL), Kinesis Agent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172002.png"></p><ul><li>Use Hash function to determine which message should go to which Shard</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172126.png"></p><ul><li>å¦‚æœé‡åˆ° <code>ProvisionedThroughputExceededException</code> é—®é¢˜<ul><li>Over producing to a shard, get <code>ProvisionedThroughputExceededException</code></li><li>è§£å†³æ–¹æ¡ˆ 1: Use highly distributed partition key</li><li>è§£å†³æ–¹æ¡ˆ 2: Use error retry and exponential backoff mechanism</li><li>è§£å†³æ–¹æ¡ˆ 3: Increase shards</li><li>è§£å†³æ–¹æ¡ˆ 4: Decrease the frequency or size of the requests</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172335.png"></p><hr><h4 id="Kinesis-Consumers"><a href="#Kinesis-Consumers" class="headerlink" title="Kinesis Consumers"></a>Kinesis Consumers</h4><ul><li>Get data records from data streams and process them</li><li>Consumers: Lambda, Kinesis Data Analytics, Kinesis Data Firehose, KCL ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190504.png"></p><ul><li>Kinesis Consumers - Custom Consumer (é‡è¦)<ul><li>Shared Fan-out Consumer: pull, low number of consuming applications, çœé’±</li><li>Enhanced Fan-out Consumer: push, multiple consuming application, è´µ</li><li>Enhanced Fan-out Consumer å¯ä»¥ increase read throughput (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202712.png"></p><ul><li>Kinesis Consumers - AWS Lambda (é‡è¦)<ul><li>Supports Classic &amp; Enhanced fan-out consumers</li><li>Read records in batches, can configure batch size and window</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203145.png"></p><hr><h4 id="Kinesis-Client-Library-KCL"><a href="#Kinesis-Client-Library-KCL" class="headerlink" title="Kinesis Client Library (KCL)"></a>Kinesis Client Library (KCL)</h4><ul><li>A Java library that helps read record from a Kinesis Data Stream</li><li>When using Kinesis Client Library, each shard is to be read-only by one KCL instance</li><li>Progress is checkpointed into DynamoDB (need IAM access)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205645.png"></p><hr><h4 id="Kinesis-Operations"><a href="#Kinesis-Operations" class="headerlink" title="Kinesis Operations"></a>Kinesis Operations</h4><ul><li>Shard Splitting: Deal with <code>hot shard</code><ul><li>Used to increase the Stream capacity, divide a <code>hot shard</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205913.png"></p><ul><li>Merging Shards: Group two shards with low traffic<ul><li>Decrease the Stream capacity and save costs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210015.png"></p><hr><h4 id="Kinesis-Data-Firehose"><a href="#Kinesis-Data-Firehose" class="headerlink" title="Kinesis Data Firehose"></a>Kinesis Data Firehose</h4><ul><li>Kinesis Data Firehose load streaming data into data stores and analytics tools<ul><li>å¯¹äº injest data æ¥è¯´, Kinesis Data Firehose æ¯” Kinesis Data Streams å¥½</li><li>Managed service, auto scaling, serverless, support data transformation</li><li>Kinesis Data Firehose æä¾›å°†æ•°æ®æµä¼ è¿›æ•°æ®å­˜å‚¨æˆ–è€…æ•°æ®åˆ†æçš„åŠŸèƒ½</li></ul></li><li>Near Real Time, è€Œä¸” Firehose åªæ”¯æŒä¸€ä¸ª consumer (dump data in a single data repo)<ul><li>ä½†æ˜¯ä¸è¦è¢« Near Real Time å¿½æ‚ , è¦æ ¹æ®é¢˜ç›®é€‰æ‹© Data Stream æˆ–è€… Data Firehose</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015040.png"></p><ul><li>Firehose çš„å¯¹è±¡æ˜¯ S3, Redshift è¿™ç§ (Serverless, ä¸“é—¨å¤„ç† log æ•°æ®)<ul><li>Firehose ä¸æ”¯æŒ DynamoDB çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151812.png"></p><ul><li>Kinesis Data Streams vs Firehose<ul><li>Data Streams: Write custom code, real-time, have data storage, have replay</li><li>Firehose: Fully managed, near real-time, no data storage, no replay</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152247.png"></p><hr><h4 id="Kinesis-Data-Analytics"><a href="#Kinesis-Data-Analytics" class="headerlink" title="Kinesis Data Analytics"></a>Kinesis Data Analytics</h4><ul><li>Real-time analytics on Kinesis Data Streams &amp; Firehose using SQL (é‡è¦)<ul><li>Fully managed, auto-scaling, serverless</li><li>ä»¥ Kinesis Data Streams &amp; Firehose ä½œä¸ºç›®æ ‡ä½¿ç”¨ SQL è¿›è¡Œæ•°æ®åˆ†æ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225813.png"></p><ul><li>Amazon Managed Service for Apache Flink<ul><li>Use Flink to process and analyze streaming data</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225906.png"></p><hr><h4 id="Data-ordering-for-Kinesis"><a href="#Data-ordering-for-Kinesis" class="headerlink" title="Data ordering for Kinesis"></a>Data ordering for Kinesis</h4><ul><li>Ordering data into Kinesis<ul><li>Same key (Partition) will always go to the same shard (æœ‰é¡ºåº)</li><li>é€‚ç”¨äºéœ€è¦å¤„ç†å¤§é‡ data çš„æƒ…å†µ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154939.png"></p><ul><li>Ordering data into SQS<ul><li>ç›¸æ¯”ä¹‹ä¸‹ SQS åªæœ‰ FIFO (GroupID), ä¸ç„¶å°±æ²¡æœ‰ ordering</li><li>é€‚ç”¨äºéœ€è¦ dynamic number of consumers çš„æƒ…å†µ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210807.png"></p><hr><h3 id="18-AWS-Mointoring-amp-Audit"><a href="#18-AWS-Mointoring-amp-Audit" class="headerlink" title="18. AWS Mointoring &amp; Audit"></a>18. AWS Mointoring &amp; Audit</h3><h4 id="CloudWatch-Metrics"><a href="#CloudWatch-Metrics" class="headerlink" title="CloudWatch Metrics"></a>CloudWatch Metrics</h4><ul><li>CloudWatch Metrics ç”¨äºæ”¶é›†ã€å­˜å‚¨å’Œåˆ†æ AWS èµ„æºå’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½æŒ‡æ ‡</li><li>å¯ä»¥ç”¨ <code>PutMetricData</code> æ¥ push custom metric data åˆ° CloudWatch é‡Œ</li><li>è®°ä½, å¦‚æœæ˜¯å¤„ç†ç¬¬ä¸‰æ–¹çš„ API, ç”¨çš„ä¸€å®šæ˜¯ CloudWatch custom metrics (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010357.png"></p><ul><li>CloudWatch - EC2 Detailed Monitoring (é‡è¦)<ul><li>With detailed monitoring, you get data every 1 minute</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033959.png"></p><hr><h4 id="CloudWatch-Custom-Metrics"><a href="#CloudWatch-Custom-Metrics" class="headerlink" title="CloudWatch Custom Metrics"></a>CloudWatch Custom Metrics</h4><ul><li>Define your own custom metrics to CloudWatch</li><li>High-Resolution Custom Metrics can have a minimum resolution of 1 second (é‡è¦)</li><li>Accepts metric data points two weeks in the past and two hours in the future</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010630.png"></p><hr><h4 id="CloudWatch-Logs"><a href="#CloudWatch-Logs" class="headerlink" title="CloudWatch Logs"></a>CloudWatch Logs</h4><ul><li>A place to store application logs in AWS (S3, Kinesis, Lambda, OpenSearch)<ul><li>CloudWatch Logs å¯ä»¥è‡ªå·±å®šä¹‰ expire çš„æ—¶é—´, é»˜è®¤æ˜¯ never expire</li><li>Log Retention Policy defined at Log Groups level (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010815.png"></p><ul><li>CloudWatch Logs Insights (query engine)<ul><li>Search and analyze log data stored in CloudWatch Logs (æŸ¥è¯¢)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150531.png"></p><ul><li>CloudWatch Logs Subscriptions<ul><li>Get a real-time log events from CloudWatch Logs for processing and analysis</li><li>Subscription Filter: Filter which logs are events delivered to destination (é‡è¦)</li><li>Cross-Account Subscription: Send log events to resources in different AWS account</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150643.png"></p><hr><h4 id="CloudWatch-Agent"><a href="#CloudWatch-Agent" class="headerlink" title="CloudWatch Agent"></a>CloudWatch Agent</h4><ul><li>CloudWatch Logs Agent: Old version, only send to CloudWatch Logs</li><li>CloudWatch Unified Agent: å¯ä»¥ä¼ é€’æ›´å¤šä¿¡æ¯, æ¯”å¦‚ CPU, RAM ç­‰ç­‰<ul><li>CloudWatch Unified Agent å¯ä»¥æŠŠ EC2 çš„ log ä¼ é€’ç»™ CloudWatch (é‡è¦)</li></ul></li><li>å¯ä»¥æŠŠ CloudWatch Agent è£…åœ¨ on-premise ä¸Šæ¥æ”¶é›†ä¿¡æ¯</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151251.png"></p><hr><h4 id="CloudWatch-Logs-Metric-Filter"><a href="#CloudWatch-Logs-Metric-Filter" class="headerlink" title="CloudWatch Logs Metric Filter"></a>CloudWatch Logs Metric Filter</h4><ul><li>CloudWatch Logs Metric Filter ç”¨äºä»æ—¥å¿—æ•°æ®ä¸­æå–æŒ‡æ ‡ï¼Œä»¥ç›‘æ§ç‰¹å®šäº‹ä»¶å’Œæ¨¡å¼</li><li>Filters only publish the metric data points for events that happen after the filter was created (åªæœ‰ filter ç”Ÿæˆåçš„ event æ‰ä¼šè¢« filter)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011918.png"></p><hr><h4 id="CloudWatch-Alarms"><a href="#CloudWatch-Alarms" class="headerlink" title="CloudWatch Alarms"></a>CloudWatch Alarms</h4><ul><li>CloudWatch Alarms are used to trigger notifications for any metric</li><li>CloudWatch Alarms ä¸»è¦å¯¹è±¡æ˜¯ EC2, ASG, SNS (é‡è¦)</li><li>High resolution custom metrics çš„æƒ…å†µä¸‹ triggered æœ€å¿«æ˜¯ 10 ç§’ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012137.png"></p><ul><li>Composite Alarms (ç›‘è§†å½“å‰æ‰€æœ‰ Alarm çš„æƒ…å†µ)<ul><li>Composite Alarams are mointoring the states of multiple other alarms</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151615.png"></p><ul><li>å¯ä»¥ç”¨ <code>set-alarm-state</code> CLI æ¥æ§åˆ¶ CloudWatch Alarms, è¿™æ ·æ˜¯ cost-effective çš„</li></ul><hr><h4 id="CloudWatch-Syntheics"><a href="#CloudWatch-Syntheics" class="headerlink" title="CloudWatch Syntheics"></a>CloudWatch Syntheics</h4><ul><li>Configurable script that monitor your APIs, URLs, Websites<ul><li>Can run once or on a regular schedule</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012521.png"></p><hr><h4 id="AWS-EventBridge"><a href="#AWS-EventBridge" class="headerlink" title="AWS EventBridge"></a>AWS EventBridge</h4><ul><li>Schedule CRON jobs <code>CRON means jobs on a repeating schedule</code></li><li>React to events from SaaS application (AWS services)<ul><li>å¦‚æœæåˆ° 3rd party application, è€ƒè™‘ EventBridge</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185605.png"></p><ul><li>Event Bus<ul><li>å¯ä»¥ archive rvents å¹¶ä¸” replay archived events, good for debugging</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190403.png"></p><ul><li>Schema Registry: Generate code in advance for how data is structured in event bus<ul><li>Analyze events in Event Bus and infer schema</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190004.png"></p><ul><li>Resource-based Policy<ul><li>Manage permissions (allow &#x2F; deny) for a specific Event Bus</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190215.png"></p><hr><h4 id="AWS-X-Ray"><a href="#AWS-X-Ray" class="headerlink" title="AWS X-Ray"></a>AWS X-Ray</h4><ul><li>Automated Trace Analysis &amp; Central Service Map Visulization<ul><li>AWS X-Ray æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è·Ÿè¸ªç³»ç»Ÿï¼Œç”¨äºåˆ†æå’Œè°ƒè¯•ç”Ÿäº§å’Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜</li><li>X-Ray å¯ä»¥ cross-account tracing and visualization (é‡è¦, tracing å’Œ visualization)</li></ul></li><li>å¦‚æœé—®åˆ°è¦æ£€æŸ¥ microservices <code>5XX</code> çš„æŠ¥é”™, é€‰æ‹© X-Ray service, è€Œä¸æ˜¯ CloudTrail service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020641.png"></p><ul><li>How to enable X-Ray (ä¸¤ç§æ–¹æ³•)<ul><li>Import the AWS X-Ray SDK in your code</li><li>Install the X-Ray daemon or enable X-Ray AWS Integration</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021009.png"></p><ul><li>X-Ray Troubleshooting (EC2 è¦åœ¨ Instance ä¸Šè·‘ X-Ray Daemon)<ul><li>EC2: IAM Role has proper permission å’Œ Instace running X-Ray Daemon (é‡è¦)</li><li>Lambda: IAM Role <code>RayWriteOnlyAccess</code> å’Œ Enable Lambda X-Ray Active Tracing</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021323.png"></p><ul><li>å¦‚æœè¦åœ¨ Farget deployed çš„ Docker ä¸Šè·‘ X-Ray daemon<ul><li>Deploy the X-Ray daemon agent as a sidecar container</li><li>Provide the correct IAM task role to the X-Ray container</li></ul></li><li>å¦‚æœè¦éªŒè¯ X-Ray daemon åœ¨ ECS ä¸Šè·‘, ç”¨ <code>AWS_XRAY_DAEMON_ADDRESS</code></li></ul><hr><h4 id="X-Ray-Advance"><a href="#X-Ray-Advance" class="headerlink" title="X-Ray Advance"></a>X-Ray Advance</h4><ul><li>Instrumentation: Measure of productâ€™s performance and write trace information<ul><li>æ£€æµ‹åº”ç”¨ç¨‹åºæ¶‰åŠå‘é€ä¼ å…¥å’Œä¼ å‡ºè¯·æ±‚ä»¥åŠåº”ç”¨ç¨‹åºå†…å…¶ä»–äº‹ä»¶çš„è·Ÿè¸ªæ•°æ®</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021538.png"></p><ul><li>X-Ray Concepts (è®°ä¸‹é¢ 2 ä¸ª)<ul><li><code>Sampling</code>: Decrease the amount of requests sent to X-Ray, reduce cost (çœé’±)</li><li><code>Annotations</code>: Index traces and use with filters (é‡è¦, æœ‰ filter)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021924.png"></p><ul><li>X-Ray Sampling Rules (å¯ä»¥æ§åˆ¶ record data çš„æ•°é‡, é‡è¦)<ul><li>With sampling rules, you control the amount of data that you record</li><li>X-Ray records first request each second, and five percent for additional requests</li><li>ä¸Šé¢é‡è¦çš„ç‚¹: first request <code>each second</code>, addition requests <code>5 percent</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022256.png"></p><hr><h4 id="X-Ray-APIs"><a href="#X-Ray-APIs" class="headerlink" title="X-Ray APIs"></a>X-Ray APIs</h4><ul><li>X-Ray Write APIs<ul><li><code>PutTraceSegments</code>: Upload segment documents to AWS X-Ray</li><li><code>PutTelemetryRecords</code>: Used by AWS X-Ray daemon to upload telemetry</li><li><code>GetSamplingRules</code>: Retrieve all sampling rules</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022650.png"></p><ul><li>X-Ray Read APIs: å…¨éƒ½éƒ½å¸¦æœ‰ <code>Get</code><ul><li><code>GetServiceGraph</code>: Main graph</li><li><code>BatchGetTrace</code>: Retrieve a list of traces specified by ID</li><li><code>GetTraceSummaries</code>: Retrieve IDs and annotations for trace in a time frame</li><li><code>GetTraceGraph</code>: Retrieve a service graph for one or more trace IDs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022934.png"></p><hr><h4 id="X-Ray-with-Beanstalk"><a href="#X-Ray-with-Beanstalk" class="headerlink" title="X-Ray with Beanstalk"></a>X-Ray with Beanstalk</h4><ul><li>å¯ä»¥åœ¨ Elastic Beanstalk ä½¿ç”¨ X-Ray daemon (ç”¨ console æˆ–è€… config file)<ul><li>éœ€è¦ <code>.ebextensions/xray-daemon.config</code> æ–‡ä»¶</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023148.png"></p><hr><h4 id="AWS-Distro-for-OpenTelemetry"><a href="#AWS-Distro-for-OpenTelemetry" class="headerlink" title="AWS Distro for OpenTelemetry"></a>AWS Distro for OpenTelemetry</h4><ul><li>AWS supported distribution of open-source project OpenTelemetry</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023636.png"></p><hr><h4 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h4><ul><li>AWS CloudTrail æ˜¯ä¸€é¡¹æ—¥å¿—è®°å½•æœåŠ¡ï¼Œè®°å½•å’Œç›‘æ§ AWS è´¦æˆ·ä¸­çš„ API è°ƒç”¨å’Œç›¸å…³æ´»åŠ¨</li><li>CloudTrail æ˜¯ Global Service, å¦‚æœä¸œè¥¿è¢«è¯¯åˆ , ç¬¬ä¸€æ—¶é—´çœ‹ CloudTrail</li><li>CloudTrail å¯ä»¥å’Œ EventBridge ä¸€èµ·ç”¨å» Intercept API Calls</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023929.png"></p><ul><li>CloudTrail Events (ä¸€å…± 3 ç§)<ul><li>Management Events: Performed on resources in AWS account</li><li>Data Events: S3 object-level activity</li><li>CloudTrail Insigths Events: Detect unusual activity (å®‰å…¨)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023847.png"></p><ul><li>CloudTrail Insights (é‡è¦, ç›‘æ§ unusual activity)<ul><li>CloudTrail Insights to detect unusual activity in account</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192157.png"></p><ul><li>CloudTrail Event Retention (é‡è¦, å’Œ S3, Athena æœ‰å…³)<ul><li>Keep events to S3 after they stored 90 days and use Athena to analyze</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163847.png"></p><hr><h3 id="19-Lambda"><a href="#19-Lambda" class="headerlink" title="19. Lambda"></a>19. Lambda</h3><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>Virtual functions, serverless, limited by time (short execution of 15 min)<ul><li>Run on-demand, scaling is automated</li></ul></li><li>Could be Event-Driven, could handle CRON job<ul><li>Use EventBridge to trigger Lambda every hour</li></ul></li><li>Lambda æ˜¯æœ‰ account quota (é…é¢é™åˆ¶) çš„, éœ€è¦è”ç³» AWS æ¥æé«˜ä¸Šé™</li><li>Lambda environment variable æœ€å¤§é™åˆ¶æ˜¯ 4KB, æ²¡æœ‰æ•°é‡çš„é™åˆ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img162057.png"></p><ul><li>å¯ä»¥ç”¨ Lambda å» connect private subnets in a VPC in your account (é‡è¦)</li><li>å¤§éƒ¨åˆ†é¢˜ç›®éƒ½æ˜¯é€šè¿‡å¢åŠ  memory æ¥ improve CPU-bound Lambda function peformance (é‡è¦)</li><li>API caching æ˜¯ç”¨æ¥ reduce calls çš„, è¦ faster initialization é€‰æ‹© provisioned concurrency</li></ul><hr><h4 id="Lambda-Synchronous-Invocations"><a href="#Lambda-Synchronous-Invocations" class="headerlink" title="Lambda Synchronous Invocations"></a>Lambda Synchronous Invocations</h4><ul><li>Synchronous: CLI, SDK, API Gateway, Application Load Balancer<ul><li>Results is returned right away</li><li>Error handling must happen client side</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164039.png"></p><hr><h4 id="Lambda-with-ALB"><a href="#Lambda-with-ALB" class="headerlink" title="Lambda with ALB"></a>Lambda with ALB</h4><ul><li>Expose a Lambda function as an HTTPs endpoint, use ALB or API Gateway<ul><li>The Lambda function must be registered in a Target Group (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163555.png"></p><ul><li>ALB Multi-Header Values<ul><li>HTTP headers and query string parameters are shown as arrays</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163757.png"></p><hr><h4 id="Lambda-Asynchronous-Invocations"><a href="#Lambda-Asynchronous-Invocations" class="headerlink" title="Lambda Asynchronous Invocations"></a>Lambda Asynchronous Invocations</h4><ul><li>Asynchronous: S3, SNS, CloudWatch, EventBridge<ul><li>The events are placed in a Event Queue</li><li>Lambda attemps to retry on errors (3 tries total)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164249.png"></p><hr><h4 id="Lambda-Event-Source-Mapping"><a href="#Lambda-Event-Source-Mapping" class="headerlink" title="Lambda Event Source Mapping"></a>Lambda Event Source Mapping</h4><ul><li>Work with Kinesis Data Streams, SQS (FIFO), DynamoDB Streams (é‡è¦)<ul><li>Lambda function is invoked synchronously, æ‰€ä»¥ SNS å°±ä¸èƒ½ç”¨ Event Source Mapping</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165403.png"></p><ul><li>Streasm &amp; Lambda (Kinesis &amp; DynamoDB)<ul><li>An event source mapping creates an iterator for each shard, process items in order</li><li>Low traffic: Use batch window</li><li>High traffic: Multiple batches in parallel</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165631.png"></p><ul><li>Streasm &amp; Lambda Error Handling<ul><li>By default, if function returns an error, the entire batch is reprocessed until the function succeeds, or the items in the batch expire</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165758.png"></p><ul><li>Queue &amp; Lambda (SQS &amp; FIFO)<ul><li>Event Source Mapping will poll SQS (Long Polling)</li><li>If use FIFO queues, Lambda will scale up to the number of active message groups</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165931.png"></p><hr><h4 id="Lambda-Event-and-Context-Objects"><a href="#Lambda-Event-and-Context-Objects" class="headerlink" title="Lambda Event and Context Objects"></a>Lambda Event and Context Objects</h4><ul><li>ç®€å•æ¥è¯´å°±æ˜¯ lambda_hander é‡Œé¢çš„å‚æ•° event å’Œ context</li><li><code>event</code>: JSON document contains data for the function to process</li><li><code>context</code>: Provides information about the invocation, function, runtime environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170535.png"></p><hr><h4 id="Lambda-Destinations"><a href="#Lambda-Destinations" class="headerlink" title="Lambda Destinations"></a>Lambda Destinations</h4><ul><li>Can configure to send result to a destination (é‡è¦)<ul><li>Asynchronous invocations: Define destinations for successful and failed event</li><li>Event Source Mapping: For discarded event batches</li></ul></li><li>æ³¨æ„, Lambda Destionation å¯ä»¥æ˜¯ DLQ, è¿™æ ·å¯ä»¥ç›´æ¥ç”¨ SQS (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170912.png"></p><hr><h4 id="Lambda-Permissions"><a href="#Lambda-Permissions" class="headerlink" title="Lambda Permissions"></a>Lambda Permissions</h4><ul><li>Lambda Execution Role (é‡è¦, å¤§éƒ¨åˆ† Lambda çš„é—®é¢˜éƒ½å’Œ Execution Role æœ‰å…³)<ul><li>Grant Lambda function permissions to AWS services (IAM Role)</li><li>Best practice: Create one Lambda Execution Role per function</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171158.png"></p><ul><li>Lambda Resource Based Policies<ul><li>Use resource-based policies to give other accounts and AWS services permission to use your Lambda resources (æ„Ÿè§‰ Resource Base Policy éƒ½æ˜¯ç»™è·¨è´¦å·æƒé™çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171329.png"></p><hr><h4 id="Lambda-Environment-Variables"><a href="#Lambda-Environment-Variables" class="headerlink" title="Lambda Environment Variables"></a>Lambda Environment Variables</h4><ul><li>å­˜ secrets å’Œ api keys çš„</li><li>å¯ä»¥ç”¨æ¥ inject dynamic variables into Lambda function (é‡è¦)</li><li>æ³¨æ„, åƒ token è¿™ç§å°±ä¸èƒ½æ”¾åœ¨ Environment Variable, è¦åœ¨ deployment package <code>.zip</code> é‡Œ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173203.png"></p><hr><h4 id="Lambda-Logging-amp-Monitoring"><a href="#Lambda-Logging-amp-Monitoring" class="headerlink" title="Lambda Logging &amp; Monitoring"></a>Lambda Logging &amp; Monitoring</h4><ul><li>Lambda execution logs are stored in AWS CloudWatch Logs</li><li>Lambda metrices are displayed in AWS CloudWatch Metrices</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173409.png"></p><ul><li>Lambda Tracing with X-Ray<ul><li>Enable in Lambda configuration (Active Tracing)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173520.png"></p><hr><h4 id="CloudFront-Functions-amp-Lambda-Edge"><a href="#CloudFront-Functions-amp-Lambda-Edge" class="headerlink" title="CloudFront Functions &amp; Lambda@Edge"></a>CloudFront Functions &amp; Lambda@Edge</h4><ul><li>Execute logic at the edge (Edge Function, serverless)</li><li>ä¸¤ç§æ–¹æ³•: CloudFront Functions, Lambda@Edge (å®ƒä»¬æ”¯æŒçš„è¯­è¨€ä¸åŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173715.png"></p><ul><li>CloudFront Functions<ul><li>For high-scale, latency-sensitive CDN customizations (millions çº§åˆ«çš„)</li><li>Used to change Viewer requestes and responses, short execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173900.png"></p><ul><li>Lambda@Edge<ul><li>Scales to 1000s of requests&#x2F;second (thousands çº§åˆ«çš„)</li><li>Used to change Viewer requestes and responses, longer execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214545.png"></p><hr><h4 id="Lambda-in-VPC"><a href="#Lambda-in-VPC" class="headerlink" title="Lambda in VPC"></a>Lambda in VPC</h4><ul><li>æ­£å¸¸æƒ…å†µä¸‹, Lambda æ— æ³•è®¿é—® VPC (æ‰€ä»¥è¦ Lambda in VPC)</li><li>éœ€è¦ VPC ID, Subnet å’Œ Security Groups, Lambda will create an ENI</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174359.png"></p><ul><li>Lambda in VPC - Internet Access (2 ç§æ–¹æ³•)<ul><li>Lambda function in your VPC does not have internet access</li><li>Deploying a Lambda function in public subnet does not give internet access</li></ul></li><li>Need to deploy Lambda function in private subnet and give a NAT Gateway &#x2F; Instance</li><li>Also can use VPC endpoints to privately access AWS services without NAT</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174704.png"></p><hr><h4 id="Lambda-Function-Performance"><a href="#Lambda-Function-Performance" class="headerlink" title="Lambda Function Performance"></a>Lambda Function Performance</h4><ul><li>Lambda Function Configuration<ul><li>RAM: If application is CPU-bound (computation heavy), increase RAM</li><li>Timeout: Default 3 seconds, maximum is 900 seconds (15 minutes)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174946.png"></p><ul><li>Lambda Execution Context<ul><li>The execution context is a temporary runtime environment that initializes any external dependencies of your lambda code</li><li>The execution context includes the <code>/tmp</code> directory (é‡è¦)</li><li><code>/tmp</code> directory çš„æœ€å¤§å®¹é‡æ˜¯ <code>10240</code> MB, default æ˜¯ <code>512</code> MB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175158.png"></p><ul><li>Initialize outside the handler (é‡è¦)<ul><li>é˜²æ­¢ DB connection è¢«å¤šæ¬¡å»ºç«‹</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175513.png"></p><hr><h4 id="Lambda-Layers"><a href="#Lambda-Layers" class="headerlink" title="Lambda Layers"></a>Lambda Layers</h4><ul><li>Create Custom Runtime &amp; Externalize Dependencies to re-use them</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192245.png"></p><hr><h4 id="Lambda-File-Systems-Mounting"><a href="#Lambda-File-Systems-Mounting" class="headerlink" title="Lambda File Systems Mounting"></a>Lambda File Systems Mounting</h4><ul><li>Lambda functions can access EFS file systems if they are running in a VPC<ul><li>Leaverage EFS Access Points</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192513.png"></p><hr><h4 id="Lambda-Concurrency"><a href="#Lambda-Concurrency" class="headerlink" title="Lambda Concurrency"></a>Lambda Concurrency</h4><ul><li>Can set a <code>reserved concurrency</code> to limit the number of concurrent execution</li><li>Each invocation over the concurrency limit will trigger a <code>Throttle</code><ul><li>If need a higher limit, open a support ticket</li></ul></li><li>å¯¹äºå¤„ç† Asynchronous çš„æƒ…å†µ, Lambda ä¼šæŠŠ event è¿”å›åˆ° queue é‡Œ</li><li>å¯ä»¥ configure Auto Scaling to manage Lambda provisioned concurrency on a schedule<ul><li>æ¯”å¦‚è¦åº”å¯¹åœ£è¯èŠ‚è¿™ç§æƒ…å†µ</li></ul></li><li>å¦‚æœæ˜¯è¦è§£å†³ Lambda exceed concurrency limits, é€‰æ‹© reserved concurrency</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193032.png"></p><ul><li>Cold Starts &amp; Provisioned Concurrency<ul><li>Cold Start: First request served by new instances has higher latency than rest</li><li>Provisioned Concurrency: Allocate concurrency before the function is invoked</li><li>Provisioned Concurrency è§£å†³äº† Cold Start çš„é—®é¢˜ (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224130.png"></p><hr><h4 id="Lambda-External-Dependencies"><a href="#Lambda-External-Dependencies" class="headerlink" title="Lambda External Dependencies"></a>Lambda External Dependencies</h4><ul><li>If Lambda function depends on external libraries<ul><li>You need to install the packages alongside your code and zip together</li></ul></li><li>æ³¨æ„, è¿™é‡Œæ˜¯æŠŠ functions å’Œ dependencies zip åœ¨ä¸€èµ·, è€Œä¸æ˜¯åˆ†å¼€ zip (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224459.png"></p><hr><h4 id="Lambda-Container-Image"><a href="#Lambda-Container-Image" class="headerlink" title="Lambda Container Image"></a>Lambda Container Image</h4><ul><li>Deploy Lambda function as container images (ä¹Ÿå°±æ˜¯è¯´ Lambda å’Œ Docker æ˜¯å¯ä»¥ä¸€èµ·ç”¨çš„)</li><li>Pack complex dependencies, large dependencies in a container</li><li>To deploy a container image to Lambda, the container image must implement Lambda Runtime API</li><li>AWS Lambda service does not support Lambda functions that use multi-architecture container image</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000324.png"></p><hr><h4 id="Lambda-Versions-and-Aliases"><a href="#Lambda-Versions-and-Aliases" class="headerlink" title="Lambda Versions and Aliases"></a>Lambda Versions and Aliases</h4><ul><li>Lambda Versions (é‡è¦)<ul><li>When work on a Lambda function, work on $LATEST</li><li>When publish a Lambda function, create a version</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000644.png"></p><ul><li>Lambda Aliases (é‡è¦)<ul><li>Aliases are <code>pointers</code> to Lambda function versions</li><li>Aliases enable Canary deployment by assigning weights to Lambda functions</li><li>Aliases cannot reference aliases</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000912.png"></p><hr><h4 id="Lambda-with-CodeDeploy"><a href="#Lambda-with-CodeDeploy" class="headerlink" title="Lambda with CodeDeploy"></a>Lambda with CodeDeploy</h4><ul><li>CodeDeploy can help automate traffic shift for Lambda aliases<ul><li>Linear: Grow traffic every <code>N minutes</code> until <code>100%</code></li><li>Canary: Try <code>X</code> percent then <code>100%</code></li><li>AllAtOnce: Immediate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001338.png"></p><hr><h4 id="Lambda-Function-URL"><a href="#Lambda-Function-URL" class="headerlink" title="Lambda Function URL"></a>Lambda Function URL</h4><ul><li>Dedicated HTTPS endpoint for Lambda function (ä¸ç”¨ API Gateway çš„åšæ³•)<ul><li>å½¢å¼ <code>https://&lt;url-id&gt;.lambda-url.&lt;region&gt;.on.aws</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001532.png"></p><hr><h4 id="Lambda-with-CodeGuru"><a href="#Lambda-with-CodeGuru" class="headerlink" title="Lambda with CodeGuru"></a>Lambda with CodeGuru</h4><ul><li>Gain insights into runtime performance of your Lambda function</li><li>CodeGuru creates a Profiler Group for your Lambda function</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001843.png"></p><hr><h3 id="20-DynamoDB"><a href="#20-DynamoDB" class="headerlink" title="20. DynamoDB"></a>20. DynamoDB</h3><h4 id="AWS-DynamoDB"><a href="#AWS-DynamoDB" class="headerlink" title="AWS DynamoDB"></a>AWS DynamoDB</h4><ul><li>NoSQL database, with replication across multiple AZs, auto scaling, no provision</li><li>ä¸¤ç§ Class: Standard &amp; Infrequent Access (IA)</li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† Email çš„, å°±æ˜¯ DynamoDB Stream</li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† unpredictable æ•°æ®çš„æ—¶å€™, é€‰æ‹© On-Demand table</li><li>By default, DynamoDB tables are encrypted with AWS owned key (é‡è¦)</li><li>DynamoDB æ²¡åŠæ³•ç”¨ resource policy, æ‰€ä»¥å¿…é¡»è¦ç”¨ IAM role + AssumeRole (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012414.png"></p><ul><li>Each table has a Primary Key, must be decided at creation time (2 ç§é€‰æ‹©)<ul><li>Partition Key (HASH): Partition Key must be unique for each item</li><li>Partition Key + Sort Key (HASH + RANGE): The combination must be unique</li></ul></li><li>Item çš„æœ€å¤§å¤§å°æ˜¯ 400 KB</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012627.png"></p><ul><li>DynamoDB æœ‰ 2 ç§ backup æ–¹æ³•, On-demand å’Œ Point-in-time recovery, ä½†å®ƒä»¬åªèƒ½æŠŠæ•°æ®å†™åˆ° S3 é‡Œ, æ²¡åŠæ³•ä» backup é‡Œé¢å» access S3 buckets</li><li>ä¸è¦ç”¨ DynamoDB å»ä¿å­˜å›¾ç‰‡, å› ä¸º DynamoDB æœ€å¤§ item å¤§å°æ˜¯ 400 KB</li><li>å¦‚æœè¦ç»™ DynamoDB ready-only access, ç”¨ IAM Role <code>AmazonDynamoDBReadOnlyAccess</code></li><li>å¦‚æœè¦ reduce DynamoDB latency, å¯ä»¥ç”¨ä¸‹é¢ 2 ç‚¹<ul><li>Consider using Global tables if your application is accessed by globally distributed users</li><li>Use eventually consistent reads in place of strongly consistent reads whenever possible</li></ul></li></ul><hr><h4 id="DynamoDB-WCU-amp-RCU"><a href="#DynamoDB-WCU-amp-RCU" class="headerlink" title="DynamoDB WCU &amp; RCU"></a>DynamoDB WCU &amp; RCU</h4><ul><li>Read &#x2F; Write Capacity Mode (2 ç§ Mode)<ul><li>Provisioned Mode: è‡ªå·±å®šä¹‰éœ€è¦å¤šå°‘ RCU å’Œ WCU (é»˜è®¤)</li><li>On-Demand Mode: è‡ªåŠ¨ scale éœ€è¦çš„ RCU å’Œ WCU (è´µ)</li></ul></li><li>RCU å’Œ WCU æ²¡æœ‰å…³è”å—, å¯ä»¥åªåŠ  RCU ä¸åŠ  WCU</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014420.png"></p><ul><li>R&#x2F;W Capacity Modes - Provisioned<ul><li>Read Capacity Units (RCU): throughput for reads</li><li>Write Capacity Units (WCU): throughput for writes</li><li>Throughput can be exceeded temporarily using <code>Burst Capacity</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014716.png"></p><ul><li>Write Capacity Units (WCU)<ul><li>One Write Capacity Unit represents <code>one write per second</code> for an item up to <code>1KB</code></li><li>éå¸¸é‡è¦, è®°ä½ WCU æ˜¯ 1 æ¯” 1 çš„, size éœ€è¦ round up åˆ°æ•´æ•°</li><li>ä¾‹å­: 6 items with item size 4.5KB: <code>6 * 5 / 1 = 30 WCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014951.png"></p><ul><li>Strongly Consistent Read vs. Eventually Consistent Read (é‡è¦)<ul><li>Eventually Consistent Read: might get stale data because of duplication (é»˜è®¤)</li><li>Strongly Consistent Read: will always get the correct data (è´µ)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015146.png"></p><ul><li>Read Capacity Units (RCU)<ul><li>One Read Capacity Unit represents one Strongly Consistent Read per second, or two Eventually Consistent Read per second, for an item up to 4 KB in size (é‡è¦)</li><li>éå¸¸é‡è¦, å¯¹äº Strongly Consistent Read æ¥è¯´æ˜¯ 1 æ¯” 4 çš„, size è¦ round up åˆ° 4 çš„å€æ•°</li><li>éå¸¸é‡è¦, å¯¹äº Eventually Consistent Read æ¥è¯´æ˜¯ 2 æ¯” 4 çš„, size è¦ round up åˆ° 4 çš„å€æ•°</li><li>ä¾‹å­: 10 Strongly Consistent Reads with item size 4 KB: <code>10 * 4 / 4 = 10 RCU</code></li><li>ä¾‹å­: 16 Eventually Consistent Reads with item size 12 KB: <code>16 /2 * 12 / 4 = 24 RCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015532.png"></p><ul><li>DynamoDB - Partitions Internal<ul><li>Data is stored in partitions, use Partition Key to know which partition should go</li><li>WCUs and RCUs are spread evenly across partitions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015726.png"></p><ul><li>DynamoDB - Throttling (é‡è¦)<ul><li>Exceeded provisioned RCUs or WCUs, get <code>ProvisionedThroughputExceededException</code></li><li>åŸå› : Hot Keys, Hot Paritions, Very large items (é‡è¦)</li><li>è§£å†³æ–¹æ¡ˆ: Exponential backoff, Distribute partition keys, use DynamoDB DAX (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015936.png"></p><ul><li>R&#x2F;W Capacity Modes - On-Demand<ul><li>Read &#x2F; writes automatically scale up &#x2F; down with workloads</li><li>Read Request Units (RRU): throughput for reads (same as RCU)</li><li>Write Request Units (WRU): throughput for writes (same as WCU)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020318.png"></p><hr><h4 id="DynamoDB-Basic-Operations"><a href="#DynamoDB-Basic-Operations" class="headerlink" title="DynamoDB Basic Operations"></a>DynamoDB Basic Operations</h4><ul><li>æ³¨æ„, DynamoDB <code>UpdateItem</code> æ˜¯æ›´æ–° attribute æˆ–è€…æ–°åˆ›å»ºä¸€ä¸ª (å¦‚æœä¸å­˜åœ¨)</li><li>Writing Data<ul><li><code>PutItem</code>: Create a new item or fully replace an old item</li><li><code>UpdateItem</code>: Edit an existing itemâ€™s attributes or add new items if not exist (æ³¨æ„)</li><li><code>Conditional Writes:</code> Accept a <code>write/update/delete</code> only if condition met</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020700.png"></p><ul><li>Reading Data<ul><li><code>GetItem</code>: Read based on Primary key</li><li><code>Query</code>: Return items based on <code>KeyConditionExpression</code>, <code>FilterExpression</code></li><li><code>Scan</code>: Scan the entire table and then filter out data (å¯ä»¥ parallel, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020844.png"></p><ul><li>Deleting Data<ul><li><code>DeleteItem</code>: Delete an individual item</li><li><code>DeleteTable</code>: Delete the whole table and all its items</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021027.png"></p><ul><li>DynamoDB Batch Operations<ul><li>Allow yout to save in latency by reducing the number of API cals</li><li><code>BatchWriteItem</code> å’Œ <code>BatchGetItem</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021208.png"></p><ul><li>Table Cleanup (2 ç§æ–¹æ³•)<ul><li><code>Scan + DeleteItem</code> æˆ–è€… <code>Drop Table + Recreate Table</code></li></ul></li><li>Copying a DynamoDB Table (3 ç§æ–¹æ³•)<ul><li>AWS Data Pipeline æˆ–è€… Backup + Restore æˆ–è€… <code>Scan + PutItem or BatchWriteItem</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033405.png"></p><hr><h4 id="DynamoDB-Conditional-Writes"><a href="#DynamoDB-Conditional-Writes" class="headerlink" title="DynamoDB Conditional Writes"></a>DynamoDB Conditional Writes</h4><ul><li>For <code>PutItem, UpdateItem, DeleteItem, BatchWriteItem</code></li><li>Specify a conditional expression to determine which item should be modified</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022327.png"></p><hr><h4 id="DynamoDB-Indexes"><a href="#DynamoDB-Indexes" class="headerlink" title="DynamoDB Indexes"></a>DynamoDB Indexes</h4><ul><li>Local Secondary Index (LSI, é‡è¦)<ul><li>Alternative Sort Key for your table (æ³¨æ„è¿™é‡Œæ˜¯ Partition Key)</li><li>Must be defined at table creation time (é‡è¦)</li><li>Attribute Projections: Contain some or all attributes of the base table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025528.png"></p><ul><li>Global Secondary Index (GSI, é‡è¦)<ul><li>Alternative Primary Key from the base table (æ³¨æ„è¿™é‡Œæ˜¯ Primary Key)</li><li>Must provision RCUs &amp; WCUs for the index</li><li>Can be added or modified after table creation</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025824.png"></p><ul><li>Indexes and Throttling<ul><li>GSI: If writes are throttled on the GSI, then the main table will be throttled</li><li>LSI: Use WCUs and RCUs of the main table, no throttling consideration</li><li>é‡è¦, æ˜¯ GSI ä¼šé€ æˆ throttling, LSI ä¸ç”¨è€ƒè™‘ throttling</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025950.png"></p><hr><h4 id="DynamoDB-PartiQL"><a href="#DynamoDB-PartiQL" class="headerlink" title="DynamoDB PartiQL"></a>DynamoDB PartiQL</h4><ul><li>Use a SQL-like syntax to manipulate DynamoDB tables (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030113.png"></p><hr><h4 id="DynamoDB-Optimistic-Locking"><a href="#DynamoDB-Optimistic-Locking" class="headerlink" title="DynamoDB Optimistic Locking"></a>DynamoDB Optimistic Locking</h4><ul><li>A strategy to ensure an item hasnâ€™t changed before update or delete it (é‡è¦)</li><li>DynamoDB Optimistic Locking æ˜¯ Concurrency Model, è€Œä¸”å®ƒç”¨ Conditional Writes (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030304.png"></p><hr><h4 id="DynamoDB-DAX"><a href="#DynamoDB-DAX" class="headerlink" title="DynamoDB DAX"></a>DynamoDB DAX</h4><ul><li>DynamoDB Accelerator (DAX, å¯ä»¥å¤„ç† cache, ä½†æ˜¯ DAX ä¸æ˜¯ relational çš„)<ul><li>Help solve read congestion by caching (microseconds latency, ç¼“å­˜)</li><li>DAX ä¸æ”¯æŒ SQL query caching</li><li>å¯ä»¥æé«˜ DynamoDB çš„ performance (æé«˜çš„æ˜¯ read è€Œä¸æ˜¯ write, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233440.png"></p><hr><h4 id="DynamoDB-Stream"><a href="#DynamoDB-Stream" class="headerlink" title="DynamoDB Stream"></a>DynamoDB Stream</h4><ul><li>DynamoDB Stream: ç›®æ ‡æ˜¯ Lambda å’Œ Kinesis Data Streams, æ²¡æœ‰ SQS (æ³¨æ„)<ul><li>Ordered stream of item-level modifications in table (é‡è¦)</li><li>ç”¨æ¥å¤„ç† Stream çš„, å¯ä»¥ Invoke Lambda function (æ¯”å¦‚å‘é‚®ä»¶)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030626.png"></p><ul><li>DynamoDB Streams are made of shards, like Kinesis Data Streams</li><li>Records are not retroactively populated in a stream after enabling it</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030940.png"></p><hr><h4 id="DynamoDB-TTL"><a href="#DynamoDB-TTL" class="headerlink" title="DynamoDB TTL"></a>DynamoDB TTL</h4><ul><li>Automatic delete items after an expiry timestamp (å®šæ—¶åˆ é™¤ DynamoDB é‡Œçš„ item)</li><li>Expired items deleted within 48 hours of expiration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031135.png"></p><hr><h4 id="DynamoDB-CLI"><a href="#DynamoDB-CLI" class="headerlink" title="DynamoDB CLI"></a>DynamoDB CLI</h4><ul><li><code>projection-expression</code>: Select a subset of attribute to retrieve (subset of attribute)</li><li><code>filter-expression</code>: Filter items to retrieve a subset of the items (subset of items)</li><li>Minimize the items returned in CLI: <code>max-items &amp; starting-token</code></li><li>æ³¨æ„, å¦‚æœé—®åˆ°å’Œ attribute æœ‰å…³çš„å°±æ˜¯ <code>projection-expression</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031324.png"></p><hr><h4 id="DynamoDB-Transcations"><a href="#DynamoDB-Transcations" class="headerlink" title="DynamoDB Transcations"></a>DynamoDB Transcations</h4><ul><li>Coordinated operations to multiple items across one or more tables (é‡‘è, æ¸¸æˆ)</li><li>Provides Atomcity, Consistency, Isolation, and Durability (ACID)</li><li>Consume 2 times of WCUs &amp; RCUs (æ³¨æ„, DynamoDB Transcation æ¶ˆè€— 2 å€ WCU å’Œ RCU)</li><li>Two operations: <code>TransactGetItems</code> å’Œ <code>TransactWriteItems</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031646.png"></p><ul><li>DynamoDB Transactions Capacity Computation<ul><li>3 Transcational writes with item size 5 KB: need 3 _ 5 &#x2F; 1 _ 2 &#x3D; 30 WCUs</li><li>5 Transcation reads with items size 5 KB: need 5 _ 8 &#x2F; 4 _ 2 &#x3D; 20 RCUs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032052.png"></p><hr><h4 id="DynamoDB-Session-State"><a href="#DynamoDB-Session-State" class="headerlink" title="DynamoDB Session State"></a>DynamoDB Session State</h4><ul><li>To use DynamoDB to store the session state</li><li>ElastiCache is in-memory, DynamoDB is serverless (both are key&#x2F;value pair)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032422.png"></p><hr><h4 id="DynamoDB-Write-Sharding"><a href="#DynamoDB-Write-Sharding" class="headerlink" title="DynamoDB Write Sharding"></a>DynamoDB Write Sharding</h4><ul><li>A strategy that allow better distribution of items evenly across partitions<ul><li>To solve the issue of <code>Hot Partition</code></li></ul></li><li>Add a suffix to Partition Key value</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032640.png"></p><hr><h4 id="DynamoDB-Other-Features"><a href="#DynamoDB-Other-Features" class="headerlink" title="DynamoDB Other Features"></a>DynamoDB Other Features</h4><ul><li>Backup and Restore: Point-in-time recovery (PITR) like RDS</li><li>Global Tables: Multi-region, fully replicated, high performance</li><li>DynamoDB Local: Develop and test app locally with out accessing internet</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033717.png"></p><ul><li>DynamoDB Fine-Grained Access Control<ul><li>Assign IAM Role to users with a Condition to limit their API access DynamoDB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033855.png"></p><hr><h3 id="21-API-Gateway"><a href="#21-API-Gateway" class="headerlink" title="21. API Gateway"></a>21. API Gateway</h3><h4 id="AWS-API-Gateway"><a href="#AWS-API-Gateway" class="headerlink" title="AWS API Gateway"></a>AWS API Gateway</h4><ul><li>Invoke Lambda function, expose REST API (stateless client-server communication)</li><li>Lambda + API Gateway &#x3D; No infrastructure to manage</li><li>API Gateway å¯ä»¥é˜²æ­¢ API overwhelmed by too many requests (é˜²æŠ–)</li><li>API Gateway Caching (å¯ä»¥ improve latency, é‡è¦)<ul><li>With caching, you can reduce the number of calls made to your endpoint and also improve the latency of requests to your API</li></ul></li><li>æ³¨æ„, API Gateway ä¸ support STS, å¯ä»¥ç”¨ Congito User Pool, IAM permissions with sigv4 å’Œ Lambda Authorizer</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164125.png"></p><ul><li>API Gateway Endpoint Types<ul><li>Edge-Optimized (é»˜è®¤): For global clients, API Gateway live in one region</li><li>Regional: For client in same region</li><li>Private: Can only be accessed from VPC using ENI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164338.png"></p><ul><li>API Gateway å¯ä»¥ç”¨ Cognito User Pools, AWS IAM roles and policies å’Œ Lambda Authorizer æ¥è¿›è¡Œ authenticate</li></ul><hr><h4 id="API-Gateway-Stages"><a href="#API-Gateway-Stages" class="headerlink" title="API Gateway Stages"></a>API Gateway Stages</h4><ul><li>Making changes in the API Gateway does not mean theyâ€™re effective (é‡è¦)<ul><li>You need to make a â€œdeploymentâ€ for them to be in effect</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173311.png"></p><ul><li>API Gateway - Stage Variables<ul><li>Stage variables are like environment variables for API Gateway</li><li>Use case: Create a stage variable to indicate the Lambda alias (é‡è¦)</li><li>å¦‚æœè¦æŠŠ test promote æˆ prod, è€Œä¸”å½“å‰ prod å­˜åœ¨, ç›´æ¥ update stage variable å°±è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190149.png"></p><hr><h4 id="API-Gateway-Canary-Deployment"><a href="#API-Gateway-Canary-Deployment" class="headerlink" title="API Gateway Canary Deployment"></a>API Gateway Canary Deployment</h4><ul><li>Choose the <code>%</code> of traffic the canary channel receives<ul><li>Canary deployment: é€æ­¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå…ˆå°è§„æ¨¡æµ‹è¯•ï¼Œå†å…¨é¢æ¨å¹¿çš„ç­–ç•¥</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190857.png"></p><hr><h4 id="API-Gateway-Integration-Tyeps"><a href="#API-Gateway-Integration-Tyeps" class="headerlink" title="API Gateway Integration Tyeps"></a>API Gateway Integration Tyeps</h4><ul><li><code>MOCK</code><ul><li>API Gateway returns a response without sending the request to backend</li></ul></li><li><code>HTTP / AWS</code><ul><li>Configure both the integration request and integration response</li><li>Set up data mapping using mapping templates for request &amp; response</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191239.png"></p><ul><li><code>AWS_PROXY</code> (Lambda Proxy)<ul><li>Incoming request from the client is the input to Lambda</li><li>No mapping template, headers, query string parameters are passed as arguments</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191413.png"></p><ul><li><code>HTTP_PROXY</code><ul><li>No mapping template, the HTTP request is passed to the backend</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191520.png"></p><hr><h4 id="API-Gateway-Mapping-Templates"><a href="#API-Gateway-Mapping-Templates" class="headerlink" title="API Gateway Mapping Templates"></a>API Gateway Mapping Templates</h4><ul><li>Mapping templates can be used to modify request &#x2F; responses<ul><li>å¯ä»¥ç”¨æ¥å±è”½ output data ä¸­çš„æŸäº›å­—æ®µ</li></ul></li><li>Modify query string parameters, modify body content, add headers</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191718.png"></p><hr><h4 id="API-Gateway-OpenAPI"><a href="#API-Gateway-OpenAPI" class="headerlink" title="API Gateway OpenAPI"></a>API Gateway OpenAPI</h4><ul><li>Common way to define REST APIs, using API defintion as code</li><li>Request Validation: reduce unnecessary calls to the backend</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201259.png"></p><hr><h4 id="API-Gateway-Caching"><a href="#API-Gateway-Caching" class="headerlink" title="API Gateway Caching"></a>API Gateway Caching</h4><ul><li>Caching reduces the number of calls made to the backend</li><li>Caches are defined per <code>stage</code>, default TTL is <code>300</code> sec, max TTL is <code>3600</code> sec (é‡è¦)</li><li>Client can invalidate the cache with header: <code>Cache-Control:max-age=0</code> (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201709.png"></p><hr><h4 id="API-Gateway-Usage-Plans-amp-API-Keys"><a href="#API-Gateway-Usage-Plans-amp-API-Keys" class="headerlink" title="API Gateway Usage Plans &amp; API Keys"></a>API Gateway Usage Plans &amp; API Keys</h4><ul><li>Make an API availiable as an offering to your customers (é‡è¦)</li><li>Usage Plan: who can access, how much and how fast can access, use API keys to identify</li><li>API Keys: use with usage plans to control access</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202109.png"></p><ul><li>To configure a usage plan<ul><li>Create one or more APIs, configure methods to require API key, deploy API to stage</li><li>Generate or import API keys to distribute to application developer</li><li>Create the usage plan with desired throttle and quota limits</li><li>Associate API stages and API keys with the usage plan</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202324.png"></p><hr><h4 id="API-Gateway-Monitoring"><a href="#API-Gateway-Monitoring" class="headerlink" title="API Gateway Monitoring"></a>API Gateway Monitoring</h4><ul><li><code>CacheHitCount &amp; CacheMissCount</code>: efficiency of the cache</li><li><code>IntegrationLatency &amp; Latency</code>: ç”¨æ¥æµ‹ timeout issue</li><li><code>4XX</code> means Client errors, <code>5XX</code> means Server errors, <code>429</code> æ˜¯ too many requests</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202658.png"></p><hr><h4 id="API-Gateway-CORS"><a href="#API-Gateway-CORS" class="headerlink" title="API Gateway CORS"></a>API Gateway CORS</h4><ul><li>CORS must be enabled when you receive API calls from another domain</li><li>CORS ä¹Ÿå¯ä»¥ç”¨æ¥é™åˆ¶ä¸€äº› domain æ¥é˜²æ­¢å®ƒä»¬ access API</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202855.png"></p><hr><h4 id="API-Gateway-Security"><a href="#API-Gateway-Security" class="headerlink" title="API Gateway Security"></a>API Gateway Security</h4><ul><li>IAM Permissions (for within your AWS account)<ul><li>Authentication is IAM, Authorization is IAM Policy</li><li>Create an IAM policy authorization and attch to User or Role</li><li>If need Cross Account Access, use Resource Policies</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203055.png"></p><ul><li>Cognito User Pools (for your own user pool, é‡è¦)<ul><li>Authentication is Cognito User Pools, Authorization is API Gateway Methods</li><li>API Gateway verifies identity automatically from AWS Cognito</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203446.png"></p><ul><li>Lambda Authorizer (use 3rd party tokens, é‡è¦)<ul><li>Authentication is External, Authorization is Lambda function</li><li>Token-based authorizer, JWT or Oauth</li><li>Lambda Authorizer ä¹Ÿå¯ä»¥ç”¨æ¥ implement authorization scheme that uses request parameters to determine the callerâ€™s identity (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203612.png"></p><hr><h4 id="API-Gateway-WebSocket-API"><a href="#API-Gateway-WebSocket-API" class="headerlink" title="API Gateway WebSocket API"></a>API Gateway WebSocket API</h4><ul><li>WebSocket APIs are often used in real time applications such as chat or trading<ul><li>WebSocket is two ways commmunication</li></ul></li><li>å½¢å¼ <code>wss://[uniqueid].execute-api.[region].amazonaws.com/[stage-name]</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204056.png"></p><ul><li>WebSocket API - Routing<ul><li>Request a route selection expression to select the field on JSON to route from</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204735.png"></p><hr><h3 id="22-AWS-CICD"><a href="#22-AWS-CICD" class="headerlink" title="22. AWS CICD"></a>22. AWS CICD</h3><h4 id="AWS-CodeCommit"><a href="#AWS-CodeCommit" class="headerlink" title="AWS CodeCommit"></a>AWS CodeCommit</h4><ul><li>A version control tool that helps to understand the changes happened to the code</li><li>CodeCommit is a Private Git repository (å°±æ˜¯ä¸ª Github, ä½†æ˜¯ç§äººçš„)</li><li>å¦‚æœé—®åˆ° migrate repository åˆ° CodeCommit ä½¿ç”¨ HTTPS, é‚£ä¹ˆç”¨åˆ°çš„æ˜¯ Git credentials generated from IAM (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213239.png"></p><ul><li>CodeCommit å¯ä»¥ä½¿ç”¨ Git credentials, SSH Keys, AWS Access Keys</li><li>Data in AWS CodeCommit repositories is encrypted in transit and at rest</li></ul><hr><h4 id="AWS-CodePipeline"><a href="#AWS-CodePipeline" class="headerlink" title="AWS CodePipeline"></a>AWS CodePipeline</h4><ul><li>CodePipeline æ˜¯ä¸€ç§è‡ªåŠ¨åŒ– CICD æœåŠ¡, ç”¨äºæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºå’ŒåŸºç¡€è®¾æ–½<ul><li>å¦‚æœçœ‹åˆ° orchestrate CICD, å°±æ˜¯ CodePipeline</li></ul></li><li>å¯ä»¥ create one CodePipline for entire flow and add a manual approval step</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215659.png"></p><ul><li>Each pipeline stage can create artifacts</li><li>Artifaces stored in an S3 bucket and passed on to the next stage</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215817.png"></p><hr><h4 id="AWS-CodeBuild"><a href="#AWS-CodeBuild" class="headerlink" title="AWS CodeBuild"></a>AWS CodeBuild</h4><ul><li>CodeBuild æ˜¯ä¸€ç§å®Œå…¨æ‰˜ç®¡çš„æŒç»­é›†æˆæœåŠ¡, ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œç”Ÿæˆè½¯ä»¶åŒ…</li><li>CodeBuild ç®—æ˜¯ Jenkins çš„æ›¿ä»£å“</li><li>Build instructions: Code file <code>buildspec.yml</code> (é‡è¦) or insert manually in Console</li><li>Automated tests on application before the deployment process (é‡åˆ°éœ€è¦ test çš„å°±æ˜¯ CodeBuild, é‡è¦)</li><li>CodeBuild scales automatically, æ‰€ä»¥é‡åˆ°ä»€ä¹ˆ scaling å’Œ run build parallel éƒ½ä¸ç”¨æ‹…å¿ƒ</li><li>å¦‚æœéœ€è¦ troubleshoot CodeBuild, å¯ä»¥ run CodeBuild locally using CodeBuild Agent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220508.png"></p><ul><li><code>buildspec.yml</code> file must be at the root of your code (é‡è¦)</li><li>è®°ä½, CodeBuild å¯ä»¥ç”¨ KMS key æ¥åŠ å¯† build artifacts (é‡è¦)</li><li>å¯ä»¥ä½¿ç”¨ CodeBuild timeouts å»é˜²æ­¢è¿‡é•¿çš„ building process</li><li>We bundle dependencies in the source code during the build stage of CodeBuild</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220651.png"></p><hr><h4 id="AWS-CodeDeploy"><a href="#AWS-CodeDeploy" class="headerlink" title="AWS CodeDeploy"></a>AWS CodeDeploy</h4><ul><li>CodeDeploy æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–éƒ¨ç½²æœåŠ¡, ç”¨äºåœ¨å„ç§è®¡ç®—ç¯å¢ƒä¸­éƒ¨ç½²åº”ç”¨ç¨‹åºä»£ç </li><li>Automated rollback in case failed deployment (å¯ä»¥è‡ªåŠ¨ roll back å¦‚æœéƒ¨ç½²å¤±è´¥)<ul><li>If a rollback happens, CodeDeploy redeploys the last good revision</li></ul></li><li>A file named <code>appspec.yml</code> defines how the deployment happens</li><li>å¦‚æœé—®åˆ° CodeDeploy å’Œ EC2, é‚£ä¹ˆå°±åªæœ‰ <code>in-place</code> å’Œ <code>blue/green</code><ul><li><code>blue/green</code> å¯ä»¥ re-route traffic from original environment to new environment</li></ul></li><li>å¦‚æœé‡åˆ°è¦ archive number of applicaiton revision, ç”¨ CodeDeploy Agent</li><li>å¦‚æœ CodeDeploy å¤±è´¥å¹¶ä¸” rollback, A new deployment of the last known working version of the application is deployed with a new deployment ID</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220850.png"></p><ul><li>CodeDeploy - EC2 &#x2F; On-premises Platform (éœ€è¦ Agent)<ul><li>Perform <code>in-place</code> deployment or <code>blue/green</code> deployments (éå¸¸é‡è¦)</li><li>Must run the CodeDeploy Agent on the target instances (é‡è¦)</li><li>Order of Lifecycle Events: <code>ApplicationStop, DownloadBundle, BeforeInstall, Install, AfterInstall, ApplicationStart, ValidateService</code></li><li>å››ç§ deployment speed: <code>AllAtOnce, HalfAtATime, OneAtATime, Custom</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221100.png"></p><ul><li>CodeDeploy - Lambda Platform<ul><li>Automate traffic shift for Lambda aliases</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221326.png"></p><ul><li>CodeDeploy - ECS Platform<ul><li>Automate the deployment of a new ECS Task Definition</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221501.png"></p><ul><li>å¦‚æœè¦ deploy application to different EC2 Instance at different time, ç”¨<br>CodeDeploy Deployment Groups</li></ul><hr><h4 id="AWS-CodeStar-CodeCatalyst"><a href="#AWS-CodeStar-CodeCatalyst" class="headerlink" title="AWS CodeStar (CodeCatalyst)"></a>AWS CodeStar (CodeCatalyst)</h4><ul><li>Quickly create <code>CICD-ready</code> projects for EC2, Lambda, Elastic Beanstalk</li><li>One dashboard to view all your componenets (é‡è¦, å’Œ dashboard æœ‰å…³)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224413.png"></p><hr><h4 id="AWS-CodeArtifact"><a href="#AWS-CodeArtifact" class="headerlink" title="AWS CodeArtifact"></a>AWS CodeArtifact</h4><ul><li>CodeArtifact is a secure and cost-effective artifact management for software development (ç±»ä¼¼ npm)</li><li>Developers and CodeBuild can retrieve dependencies straight from CodeArtifact</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221957.png"></p><ul><li>CodeArtifact Resource Policy (Resource Policy å°±æ˜¯å…è®¸åˆ«äººè®¿é—®)<ul><li>Authorize another account to access CodeArtifact</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222141.png"></p><hr><h4 id="AWS-CodeGuru"><a href="#AWS-CodeGuru" class="headerlink" title="AWS CodeGuru"></a>AWS CodeGuru</h4><ul><li>An ML-powered service for code reviews and performance recommendations (é‡è¦)</li><li>CodeGuru Reviewer: Automated code reviews for static code analysis (development)</li><li>CodeGuru Profiler: Recommendations about application performance (production)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222415.png"></p><hr><h4 id="AWS-Cloud9"><a href="#AWS-Cloud9" class="headerlink" title="AWS Cloud9"></a>AWS Cloud9</h4><ul><li>Cloud-based IDE, ç±»ä¼¼ VSCode</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222601.png"></p><hr><h3 id="23-AWS-Serverless-Application-Model-SAM"><a href="#23-AWS-Serverless-Application-Model-SAM" class="headerlink" title="23. AWS Serverless Application Model (SAM)"></a>23. AWS Serverless Application Model (SAM)</h3><h4 id="AWS-SAM"><a href="#AWS-SAM" class="headerlink" title="AWS SAM"></a>AWS SAM</h4><ul><li>SAM &#x3D; Serverless Application Model</li><li>A framework for developing and deploying serverless applications</li><li>å¯ä»¥å°† AWS SAM æ¨¡æ¿ç›´æ¥éƒ¨ç½²åˆ° AWS CloudFormation</li><li>ä½¿ç”¨ AWS Serverless Application Repository (SAR) æ¥å…±äº« SAM å’Œå…¶ä»– AWS è´¦æˆ· (é‡è¦)<ul><li>å¦‚æœæƒ³æ‰¾ pre-built serverless applications å°±ç”¨ SAR</li></ul></li><li>Develop the SAM template locally &#x3D;&gt; upload the template to S3 &#x3D;&gt; deploy your application to the cloud (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153636.png"></p><ul><li>SAM Recipe<ul><li><code>Transform</code> Header for SAM template: <code>AWS::Serverless-2016-10-31</code></li><li>æ³¨æ„, <code>Transform</code> å¯¹äº SAM æ¥è¯´æ˜¯ mandatory çš„</li><li>SAM supports the following resource types: <code>Function, Api, SimpleTable</code> (é‡è¦)</li><li>Upload SAM åˆ° AWS ç”¨åˆ°çš„æ˜¯ <code>sam deploy</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155435.png"></p><ul><li>SAM Accelerate <code>sam sync</code><ul><li>A set of features to reduce latency while deploying resources to AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154010.png"></p><hr><h4 id="SAM-Policy-Templates"><a href="#SAM-Policy-Templates" class="headerlink" title="SAM Policy Templates"></a>SAM Policy Templates</h4><ul><li>List of templates to apply permissions to Lambda Functions<ul><li><code>S3ReadPolicy</code>: Give read only permission to objects in S3</li><li><code>SQSPollerPolicy</code>: Allow to poll an SQS queue</li><li><code>DynamoDBCrudPolicy</code>: create, read, update, delete</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154539.png"></p><hr><h4 id="SAM-Local-Capabilities"><a href="#SAM-Local-Capabilities" class="headerlink" title="SAM Local Capabilities"></a>SAM Local Capabilities</h4><ul><li>SAM Local ç”¨äºæœ¬åœ°æ¨¡æ‹Ÿã€æµ‹è¯•å’Œè°ƒè¯•æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åº, æ”¯æŒ Lambda å’Œ API Gateway</li><li>Locally start AWS Lambda (è®°ä½è¿™é‡Œéƒ½æ˜¯ SAM CLI + AWS Toolkits)</li><li>Locally invoke Lambda Function</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154914.png"></p><ul><li>Locally start an API Gateway Endpoint</li><li>Generate AWS Events for Lambda Functions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155003.png"></p><hr><h3 id="24-Cloud-Deployment-Kit-CDK"><a href="#24-Cloud-Deployment-Kit-CDK" class="headerlink" title="24. Cloud Deployment Kit (CDK)"></a>24. Cloud Deployment Kit (CDK)</h3><h4 id="AWS-Cloud-Development-Kit"><a href="#AWS-Cloud-Development-Kit" class="headerlink" title="AWS Cloud Development Kit"></a>AWS Cloud Development Kit</h4><ul><li>Define your cloud infrastructure using a familiar language (Java, Python)</li><li>Can deploy infrastructure and application runtime code together</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160250.png"></p><ul><li>CDK å’Œ SAM çš„ä¸åŒ (è™½ç„¶å®ƒä»¬éƒ½ç”¨ CloudFormation)<ul><li>SAM ä¸»è¦å…³æ³¨çš„æ˜¯ Serverless å’Œ Lambda, è€Œä¸”åªèƒ½ç”¨ JSON æˆ–è€… YAML çš„å½¢å¼</li><li>CDK å¯ä»¥ç”¨åœ¨æ‰€æœ‰ AWS services ä¸Š, å¯ä»¥ç”¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160532.png"></p><ul><li>æ³¨æ„, CDK æ‰ä¼šæä¾› app template, è€Œä¸æ˜¯ CloudFormation (é‡è¦)</li></ul><hr><h3 id="25-Cognito"><a href="#25-Cognito" class="headerlink" title="25. Cognito"></a>25. Cognito</h3><h4 id="AWS-Cognito"><a href="#AWS-Cognito" class="headerlink" title="AWS Cognito"></a>AWS Cognito</h4><ul><li>AWS Cognito æ˜¯ä¸€ç§ç”¨æˆ·èº«ä»½ç®¡ç†æœåŠ¡, ç”¨äºå®‰å…¨åœ°æ·»åŠ ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œè®¿é—®æ§åˆ¶åŠŸèƒ½<ul><li>Cognito User Pools: Sign in for app, integraet with API Gateway &amp; ALB</li><li>Cognito Identity Pools: Integrate with Cognito User Pools as identity provider</li></ul></li><li>CUP + CIP &#x3D; authentication + authorization</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181012.png"></p><ul><li>Cognito Sync: Enable cross-device syncing of application related user data</li></ul><hr><h4 id="Cognito-User-Pools-CUP"><a href="#Cognito-User-Pools-CUP" class="headerlink" title="Cognito User Pools (CUP)"></a>Cognito User Pools (CUP)</h4><ul><li>ä¸ API Gateway å’Œ Application Load Balancer é›†æˆ (é‡è¦)<ul><li>æ³¨æ„, æ˜¯å’Œ ALB é›†æˆ, è€Œä¸æ˜¯ CloudFront (é‡è¦)</li></ul></li><li>After a successful login using Cognito User Pools, it sends a JWT token (é‡è¦)</li><li>Adaptive Authentication<ul><li>Block sign-ins or require MFA if the login appears suspicious (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181142.png"></p><hr><h4 id="Cognito-Identity-Pools-CIP"><a href="#Cognito-Identity-Pools-CIP" class="headerlink" title="Cognito Identity Pools (CIP)"></a>Cognito Identity Pools (CIP)</h4><ul><li>Get identities for <code>users</code> so they obtain temporary AWS credentials</li><li>å¦‚æœéœ€è¦ integrate user-specific file upload and download feature, ä½¿ç”¨ IAM policy with AWS Cognito identity prefix to restrict users to use their own folders in S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img20555%EF%BC%95.png"></p><hr><h3 id="26-Step-Functions-amp-AppSync"><a href="#26-Step-Functions-amp-AppSync" class="headerlink" title="26. Step Functions &amp; AppSync"></a>26. Step Functions &amp; AppSync</h3><h4 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h4><ul><li>AWS Step Functions æ˜¯ä¸€ç§å¯è§†åŒ–å·¥ä½œæµæœåŠ¡, ç”¨äºåè°ƒå’Œç®¡ç†åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡</li><li>æœ‰ä¸¤ç§ Workflows: Standard å’Œ Express (Express é‡Œæœ‰ Sync å’Œ Async)<ul><li>Standard é€‚åˆ long-running, durable, and auditable workflow</li><li>Express é€‚åˆ high event rates and short duration workflow</li></ul></li><li>Task States: Do some work in the state machine (æ¯”å¦‚ invoke Lambda function)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215042.png"></p><ul><li>Parallel State: Begin parallel branches of execution</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215355.png"></p><ul><li>A Task state <code>(&quot;Type&quot;: &quot;Task&quot;)</code> represents a single unit of work performed by a state machine (é‡è¦)</li></ul><hr><h4 id="Step-Functions-Error-Handling"><a href="#Step-Functions-Error-Handling" class="headerlink" title="Step Functions Error Handling"></a>Step Functions Error Handling</h4><ul><li>Any state can encounter runtime errors for various reasons</li><li>Use <code>Retry</code> and <code>Catch</code> in the State Machine to handle error instead of application code</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215654.png"></p><hr><h4 id="Step-Functions-Wait-for-Task-Token"><a href="#Step-Functions-Wait-for-Task-Token" class="headerlink" title="Step Functions Wait for Task Token"></a>Step Functions Wait for Task Token</h4><ul><li>Allow to pause Step Functions during a Task until a Task Token is returned</li><li>Append <code>.waitForTaskToken</code> to the Resource field</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220013.png"></p><hr><h4 id="Step-Functions-Activity-Tasks"><a href="#Step-Functions-Activity-Tasks" class="headerlink" title="Step Functions Activity Tasks"></a>Step Functions Activity Tasks</h4><ul><li>Task performed by an Activity Worker (Acitvity Worker å¯ä»¥åœ¨ EC2, Lambda ä¸Šè·‘)</li><li>After Activity Worker complete its work, it sends a response back to Step Functions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220441.png"></p><hr><h4 id="AWS-AppSync"><a href="#AWS-AppSync" class="headerlink" title="AWS AppSync"></a>AWS AppSync</h4><ul><li>AppSync is a managed service that use GraphQL (é‡è¦)</li><li>Retrieve data in real-time with WebSocket or MQTT on WebSocket (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221024.png"></p><hr><h4 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a>AWS Amplify</h4><ul><li>A set of tools to create mobile and web applications (å°±ç±»ä¼¼ firebase, é‡è¦)<ul><li>Authentication: leverage AWS Cognito</li><li>Datastore: leverage AWS AppSync and DynamoDB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img22%EF%BC%96024.png"></p><hr><h3 id="27-Advanced-Identity"><a href="#27-Advanced-Identity" class="headerlink" title="27. Advanced Identity"></a>27. Advanced Identity</h3><h4 id="AWS-STS"><a href="#AWS-STS" class="headerlink" title="AWS STS"></a>AWS STS</h4><ul><li>AWS STS (Security Token Service) æ˜¯ä¸€ç§ç”¨äºä¸´æ—¶ç”Ÿæˆè®¿é—®å¯†é’¥ä»¥è®¿é—® AWS èµ„æºçš„æœåŠ¡<ul><li>Allow to grant limited and temporary access to AWS up to 1 hour</li></ul></li><li>æ³¨æ„, é‡åˆ° <code>decode-authorization-message</code> çš„å°±æ˜¯ STS</li><li>STS çš„æœ‰æ•ˆæœŸä» 15 åˆ†é’Ÿåˆ° 1 å°æ—¶, æœ‰æ•ˆæœŸè¿‡åéœ€è¦ renew</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230636.png"></p><hr><h4 id="Advanced-IAM"><a href="#Advanced-IAM" class="headerlink" title="Advanced IAM"></a>Advanced IAM</h4><ul><li>Evaluation of Policies (é‡è¦)<ul><li>å…ˆæŸ¥æ˜¯ä¸æ˜¯ Deny, æ˜¯å°±ç›´æ¥ Deny,ä¸æ˜¯å°±æŸ¥æ˜¯ä¸æ˜¯ Allow, æ˜¯å°±ç›´æ¥ Allow, å¦åˆ™ç›´æ¥ Deny</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231838.png"></p><ul><li>IAM Policies &amp; S3 Bucket Policies<ul><li>éœ€è¦åŒæ—¶ evaluate IAM å’Œ S3 çš„ Polciy, åªè¦ä¸¤ä¸ªé‡Œé¢æ²¡æœ‰ Deny å°±è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232221.png"></p><ul><li>Dynamic Policies with IAM (é‡è¦)<ul><li>Give IAM policy to a specific user, using <code>$&#123;aws:username&#125;</code> (dynamic variable)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232539.png"></p><hr><h4 id="IAM-Access-Analyzer"><a href="#IAM-Access-Analyzer" class="headerlink" title="IAM Access Analyzer"></a>IAM Access Analyzer</h4><ul><li>IAM Access Analyzer simplifies inspecting unused access to guide you toward least privilege (é‡è¦, å¯ä»¥ remove ä¸€äº›ä¸éœ€è¦çš„ IAM Roles)</li><li>IAM Access Analyzer also lets you identify unintended access to your resources and data, which is a security risk (å‡å°‘ security issues)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012837.png"></p><hr><h4 id="AWS-Directory-Services-AD"><a href="#AWS-Directory-Services-AD" class="headerlink" title="AWS Directory Services (AD)"></a>AWS Directory Services (AD)</h4><ul><li>AWS Directory Services (AD) æ˜¯ä¸€ç§æ‰˜ç®¡æœåŠ¡, ç”¨äºåœ¨ AWS äº‘ä¸­è¿è¡Œ Microsoft Active Directory,ç®€åŒ–èº«ä»½éªŒè¯å’Œèµ„æºç®¡ç†<ul><li>AWS Managed Microsoft AD: AD in AWS, supports MFA (é‡è¦ï¼ŒAD åœ¨ AWS )</li><li>AD Connector: Redirect to on-premise AD, supports MFA (é‡è¦, AD åœ¨ on premise)</li><li>Simple AD: AD-compatible managed directory on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232910.png"></p><hr><h3 id="28-AWS-Security-amp-Encryption"><a href="#28-AWS-Security-amp-Encryption" class="headerlink" title="28. AWS Security &amp; Encryption"></a>28. AWS Security &amp; Encryption</h3><h4 id="Encryption-101"><a href="#Encryption-101" class="headerlink" title="Encryption 101"></a>Encryption 101</h4><ul><li>Encryption in flight<ul><li>Data is encrypted before sending and decrypted after receive (é‡è¦)</li></ul></li><li>Server-side encryption<ul><li>Both encryption and decryption happen on the server (é‡è¦)</li></ul></li><li>Client-side encryption<ul><li>Data is encrypted by client and never decrypted by the server (é‡è¦)</li></ul></li></ul><blockquote><p>IAM policy to enforce SSL request to objects stored in S3: <code>aws:SecureTransport</code></p></blockquote><hr><h4 id="AWS-KMS"><a href="#AWS-KMS" class="headerlink" title="AWS KMS"></a>AWS KMS</h4><ul><li>Anytime you hear <code>encryption</code> for an AWS service, itâ€™s most likely KMS</li><li>AWS managed encryption keys for us, æ¯”å¦‚ EBS, S3, RDS, SSM (ä¸éœ€è¦è‡ªå·±åˆ›å»º)</li><li>KMS Keys are scoped per Region, Automatic Key Rotation is 1 year</li><li>æ³¨æ„, KMS å¹¶ä¸é€‚åˆä¿å­˜ secret, åŠ å¯†çš„ä¸œè¥¿ä¸ä¸€å®šæ˜¯ secret</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175137.png"></p><ul><li>Types of KMS Keys (3 ç§): AWS Owned, AWS Managed, CMK (Custom Managed)<ul><li>KMS stores the CMK and receives data from client, which it encrypt and send back</li></ul></li><li>ä¸¤ç§ Key çš„å½¢å¼: Symmetric (Single) &amp; Asymmetric (Public &amp; Private)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171058.png"></p><ul><li>KMS Key Policies<ul><li>KMS Key Policy å¯ä»¥ç”¨æ¥ç®¡ç† KMS CMK (é‡è¦)</li><li>Custom KMS Key Policy: Define who can access the key (Cross Account Access)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175606.png"></p><blockquote><p>Deleting an AWS KMS key in AWS Key Management Service (AWS KMS) is destructive and potentially dangerous. Therefore, AWS KMS enforces a waiting period. (Pending state)</p></blockquote><hr><h4 id="KMS-Envelope-Encryption"><a href="#KMS-Envelope-Encryption" class="headerlink" title="KMS Envelope Encryption"></a>KMS Envelope Encryption</h4><ul><li>KMS <code>Encrypt</code> API call has a limit of 4 KB (é‡è¦)</li><li>If <code>encrypt &gt; 4 KM</code>, we need to use Envelope Encryption (<code>GenerateDataKey</code> API)</li><li>Envelope Encryption æ˜¯ reference data as file within the code</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175943.png"></p><ul><li>KMS Symmetric API Summary<ul><li><code>Encrypt</code>: encrypt up to 4KB of data through KMS</li><li><code>GenerateDataKey</code>: generates a unique symmetric data key (DEK)</li><li><code>GemerateDataKeyWithoutPlaintext</code>: generate a DEK to use later</li><li><code>Decrypt</code>: decrypt up to 4 KB of data</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180803.png"></p><hr><h4 id="KMS-Limits"><a href="#KMS-Limits" class="headerlink" title="KMS Limits"></a>KMS Limits</h4><ul><li>KMS Request Quotas: Exceed a request quota, get a <code>ThrottlingException</code></li><li>Request a Requst Quotas increase through API or AWS support</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184019.png"></p><hr><h4 id="AWS-CloudHSM"><a href="#AWS-CloudHSM" class="headerlink" title="AWS CloudHSM"></a>AWS CloudHSM</h4><ul><li>AWS CloudHSM æ˜¯ä¸€ç§æ‰˜ç®¡ç¡¬ä»¶å®‰å…¨æ¨¡å—æœåŠ¡, ç”¨äºå®‰å…¨å­˜å‚¨å’Œç®¡ç†åŠ å¯†å¯†é’¥<ul><li>We have to manage the encryption keys entirely</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184859.png"></p><hr><h4 id="SSM-Parameter-Store"><a href="#SSM-Parameter-Store" class="headerlink" title="SSM Parameter Store"></a>SSM Parameter Store</h4><ul><li>SSM Parameter Store æ˜¯ä¸€ç§å®‰å…¨çš„å­˜å‚¨æœåŠ¡, ç®¡ç†é…ç½®æ•°æ®å’Œå¯†é’¥, å¦‚å¯†ç å’Œæ•°æ®åº“å­—ç¬¦ä¸²<ul><li>æ¯”èµ· Secrets Manager æœ‰æ›´å¹¿çš„ç”¨é€”, æ¯”å¦‚ URLs, AMI IDs, License keys ç­‰ç­‰</li><li>SSM æ²¡æœ‰ Automatic key rotation (éå¸¸é‡è¦)</li></ul></li><li>Have built-in verion tracking (æ¯æ¬¡ edit secret éƒ½ä¼šè¢«è®°å½•, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173611.png"></p><ul><li>å¯ä»¥å°† secret å‚¨å­˜æˆ SecureString åœ¨ SSM Parameter Store é‡Œ (é‡è¦)</li></ul><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><ul><li>Store secrets, integrated with RDS &amp; Aurora (éå¸¸é‡è¦, å­˜æ•°æ®åº“ secrets çš„)<ul><li>æ˜¯ç»™ confidential information (like database credentials, API keys) ç”¨çš„</li><li>æ¯”èµ· SSM Parameter Store, Secrets Manager æ”¯æŒ Key çš„è½®æ¢ (90 å¤©)</li><li>æ³¨æ„, Secrets Manager çš„ Key Rotateion æ˜¯ 90 å¤©, KMS çš„ Key Rotateion æ˜¯ä¸€å¹´</li></ul></li><li>æ¯”èµ· KMS, Secrets Manager æ›´é€‚åˆå»ä¿å­˜ secret, æ¯”å¦‚ database credential, è€Œä¸” Secrets Manager ä¹Ÿæœ‰ Automatic key rotation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185726.png"></p><ul><li>Multi-Region Secrets (å’Œ Multi-Region Key ç±»ä¼¼)<ul><li>Replicate Secrets across multiple AWS Regions (disaster recovery)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174258.png"></p><hr><h4 id="CloudWatch-Logs-Encryption"><a href="#CloudWatch-Logs-Encryption" class="headerlink" title="CloudWatch Logs Encryption"></a>CloudWatch Logs Encryption</h4><ul><li>Encrypt CloudWatch Logs with KMS keys<ul><li>Encryption is enabled at the log group level, by associating a CMK</li></ul></li><li><code>associate-kms-key</code>: if log group already exists (é‡è¦, CloudWatch å­˜åœ¨çš„æƒ…å†µ)</li><li><code>create-log-group</code>: if the log group doesnâ€™t exist</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190545.png"></p><hr><h4 id="AWS-Nitro-Enclaves"><a href="#AWS-Nitro-Enclaves" class="headerlink" title="AWS Nitro Enclaves"></a>AWS Nitro Enclaves</h4><ul><li>Process highly sensitive data in an isolated compute environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190809.png"></p><hr><h3 id="29-Other-AWS-Services"><a href="#29-Other-AWS-Services" class="headerlink" title="29. Other AWS Services"></a>29. Other AWS Services</h3><h4 id="AWS-SES-Simple-Email-Service"><a href="#AWS-SES-Simple-Email-Service" class="headerlink" title="AWS SES (Simple Email Service)"></a>AWS SES (Simple Email Service)</h4><ul><li>Managed service to send email securely (å‘é‚®ä»¶çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004334.png"></p><hr><h4 id="AWS-OpenSearch"><a href="#AWS-OpenSearch" class="headerlink" title="AWS OpenSearch"></a>AWS OpenSearch</h4><ul><li>With OpenSearch, you can search any field, even partially matches<ul><li>åŸæ¥å«åš ElasticSearch (å°±æ˜¯åšæŸ¥è¯¢çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192053.png"></p><hr><h4 id="AWS-Athena"><a href="#AWS-Athena" class="headerlink" title="AWS Athena"></a>AWS Athena</h4><ul><li>Athena is an query service that analyze data in Amazon S3 using standard SQL<ul><li>Athena æ”¯æŒ SQL query å»å¤„ç† S3 æ•°æ®çš„</li><li>Athena cannot be used to analyze data in real time (æ²¡åŠæ³•å®æ—¶å¤„ç†æ•°æ®, é‡è¦)</li></ul></li><li>Use Athena to process logs, perform ad-hoc analysis, and run interactive queries (é‡è¦)</li><li>Use columnar data for cost-saving (çœé’±, less scan)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192218.png"></p><ul><li>Federated Query<ul><li>Allow to run SQL queries across data stored on AWS or On-Premise</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200427.png"></p><hr><h4 id="AWS-MSK"><a href="#AWS-MSK" class="headerlink" title="AWS MSK"></a>AWS MSK</h4><ul><li>Managed Apache Kafka on AWS (Have Serverless)<ul><li>Kinesis çš„ä»£æ›¿ (åŒæ ·å¤„ç† Stream data), ä½†æ˜¯é’ˆå¯¹ Apache Kafka</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230056.png"></p><hr><h4 id="AWS-Certificate-Manager-ACM"><a href="#AWS-Certificate-Manager-ACM" class="headerlink" title="AWS Certificate Manager (ACM)"></a>AWS Certificate Manager (ACM)</h4><ul><li>AWS Certificate Manager (ACM) æ˜¯ä¸€ç§ç®¡ç† SSL&#x2F;TLS è¯ä¹¦çš„æœåŠ¡, ç”¨äºå®‰å…¨åœ°ä¿æŠ¤å’Œç®¡ç†ç½‘ç«™å’Œåº”ç”¨ç¨‹åºçš„é€šä¿¡<ul><li>å¦‚æœæ˜¯ third party SSL å°±æ²¡åŠæ³•ä½¿ç”¨ automatic certificate rotation</li></ul></li><li>å¯ä»¥ç”¨ EventBridge æ¥æ£€æŸ¥ ACM Certificates æ˜¯å¦è¿‡æœŸ (è¿‡æœŸ Invoke SNS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174451.png"></p><hr><h4 id="AWS-Macie"><a href="#AWS-Macie" class="headerlink" title="AWS Macie"></a>AWS Macie</h4><ul><li>Use ML to protect sensitive data (PII) in AWS (ç”¨ ML ä¿æŠ¤æ•æ„Ÿä¿¡æ¯)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192617.png"></p><hr><h4 id="AWS-AppConfig"><a href="#AWS-AppConfig" class="headerlink" title="AWS AppConfig"></a>AWS AppConfig</h4><ul><li>Configurate, validate, and deploy dynamic configurations</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192722.png"></p><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹, è°¢è°¢</p></blockquote></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AWS/">AWS</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/fa4ed4d8.html" title="è€ƒè¯ï¼šAWS SAA-C03"><img class="cover" src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img4gb8ou3p2t5vv347i6lopc13wtm82qw.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">è€ƒè¯ï¼šAWS SAA-C03</div></div></a></div><div class="next-post pull-right"><a href="/posts/eb0c992c.html" title="CSS å­¦ä¹ ç¬”è®°"><img class="cover" src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img578ut571o3a1a8kj2su9jra6dz7p5ey.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">CSS å­¦ä¹ ç¬”è®°</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/ced5b880.html" title="è€ƒè¯ï¼šAWS CLF-C02"><img class="cover" src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img1l99wbel5ip2y1oivo40zrh051humxd.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-30</div><div class="title">è€ƒè¯ï¼šAWS CLF-C02</div></div></a></div><div><a href="/posts/fa4ed4d8.html" title="è€ƒè¯ï¼šAWS SAA-C03"><img class="cover" src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img4gb8ou3p2t5vv347i6lopc13wtm82qw.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-13</div><div class="title">è€ƒè¯ï¼šAWS SAA-C03</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·ç‹—å­.GIF" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="author-info__name">é´»é”</div><div class="author-info__description">è®°å½• ç”Ÿæ´»</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Hongda-OSU" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.linkedin.com/in/hongda-lin" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://hongdalin.me" target="_blank" title="Portfolio"><i class="iconfont icon-guanfangwangzhan"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ–‡ç« å³ä¸‹è§’å°å·¥å…·è¿›å…¥é˜…è¯»æ¨¡å¼</div></div><div class="xpand" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople1.js"></script><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/zdog.dist.js"></script><script id="rendered-js" src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople.js"></script><style>.card-widget.card-announcement{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">çŸ¥è¯†ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-AWS-Cloud-Overview"><span class="toc-text">1. AWS Cloud Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Regions"><span class="toc-text">AWS Regions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Availability-Zone"><span class="toc-text">AWS Availability Zone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Edge-Locations"><span class="toc-text">AWS Edge Locations</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-IAM"><span class="toc-text">2. IAM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-IAM"><span class="toc-text">AWS IAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Permissions"><span class="toc-text">IAM Permissions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Polices"><span class="toc-text">IAM Polices</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-MFA"><span class="toc-text">IAM MFA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-CLI-amp-SDK"><span class="toc-text">IAM CLI &amp; SDK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Roles"><span class="toc-text">IAM Roles</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Security-Tools"><span class="toc-text">IAM Security Tools</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-EC2-Fundamentals"><span class="toc-text">3. EC2 Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EC2"><span class="toc-text">AWS EC2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Type"><span class="toc-text">EC2 Instance Type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Security-Groups"><span class="toc-text">EC2 Security Groups</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Purchasing-Options"><span class="toc-text">EC2 Instance Purchasing Options</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-EC2-Instance-Storage"><span class="toc-text">4. EC2 Instance Storage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EBS"><span class="toc-text">AWS EBS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Snapshots"><span class="toc-text">EBS Snapshots</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AMI"><span class="toc-text">AWS AMI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Store"><span class="toc-text">EC2 Instance Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Volume-Types"><span class="toc-text">EBS Volume Types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Multi-Attach"><span class="toc-text">EBS Multi-Attach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-RAID"><span class="toc-text">EBS RAID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EFS"><span class="toc-text">AWS EFS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ELB-amp-ASG"><span class="toc-text">5. ELB &amp; ASG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Scalability-amp-High-Availability"><span class="toc-text">Scalability &amp; High Availability</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ELB"><span class="toc-text">AWS ELB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Application-Load-Balancer-ALB"><span class="toc-text">Application Load Balancer (ALB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Network-Load-Balancer-NLB"><span class="toc-text">Network Load Balancer (NLB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Gateway-Load-Balancer-GWLB"><span class="toc-text">Gateway Load Balancer (GWLB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sticky-Sessions-Session-Affinity"><span class="toc-text">Sticky Sessions (Session Affinity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cross-Zone-Load-Balancing"><span class="toc-text">Cross Zone Load Balancing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSL-Certificates"><span class="toc-text">SSL Certificates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deregistration-Delay-Connection-Draining"><span class="toc-text">Deregistration Delay (Connection Draining)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ASG"><span class="toc-text">AWS ASG</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Policies"><span class="toc-text">Scaling Policies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ASG-Instance-Refresh"><span class="toc-text">ASG Instance Refresh</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-AWS-Fundamentals"><span class="toc-text">6. AWS Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-RDS"><span class="toc-text">AWS RDS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Read-Replicas-vs-Multi-AZ"><span class="toc-text">Read Replicas vs. Multi AZ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Aurora"><span class="toc-text">AWS Aurora</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RDS-Security"><span class="toc-text">RDS Security</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RDS-Proxy"><span class="toc-text">RDS Proxy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ElastiCache"><span class="toc-text">AWS ElastiCache</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ElastiCache-Strategies"><span class="toc-text">ElastiCache Strategies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MemoryDB-for-Redis"><span class="toc-text">MemoryDB for Redis</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Route-53"><span class="toc-text">7. Route 53</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#What%E2%80%99s-DNS"><span class="toc-text">Whatâ€™s DNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Route-53"><span class="toc-text">AWS Route 53</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Route-53-TTL"><span class="toc-text">Route 53 TTL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CNAME-vs-Alias"><span class="toc-text">CNAME vs Alias</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Health-Checks"><span class="toc-text">Health Checks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Simple"><span class="toc-text">Routing Policy (Simple)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Weighted"><span class="toc-text">Routing Policy (Weighted)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Latency"><span class="toc-text">Routing Policy (Latency)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Failover"><span class="toc-text">Routing Policy (Failover)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Geolocation"><span class="toc-text">Routing Policy (Geolocation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Geoproximity"><span class="toc-text">Routing Policy (Geoproximity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Traffic-Flow"><span class="toc-text">Routing Policy (Traffic Flow)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-IP-Based"><span class="toc-text">Routing Policy (IP-Based)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Multi-Value"><span class="toc-text">Routing Policy (Multi-Value)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-VPC-Fundamentals"><span class="toc-text">8. VPC Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-VPC"><span class="toc-text">AWS VPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Subnet"><span class="toc-text">VPC Subnet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Internet-Gateway-IGW-amp-Route-Table"><span class="toc-text">Internet Gateway (IGW) &amp; Route Table</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NAT-Gateway-NATGW"><span class="toc-text">NAT Gateway (NATGW)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NACL-amp-Security-Groups"><span class="toc-text">NACL &amp; Security Groups</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Flow-Logs"><span class="toc-text">VPC Flow Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Peering"><span class="toc-text">VPC Peering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Sharing"><span class="toc-text">VPC Sharing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Endpoints-AWS-PrivateLink"><span class="toc-text">VPC Endpoints (AWS PrivateLink)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Site-to-Site-VPN-VPN-Connection"><span class="toc-text">Site-to-Site VPN (VPN Connection)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Direct-Connect-DX"><span class="toc-text">Direct Connect (DX)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-S3"><span class="toc-text">9. S3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-S3"><span class="toc-text">AWS S3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Bucket-Policy"><span class="toc-text">S3 Bucket Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Website"><span class="toc-text">S3 Website</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Versioning"><span class="toc-text">S3 Versioning</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Replication-CRR-amp-SRR"><span class="toc-text">S3 Replication (CRR &amp; SRR)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Storage-Classes"><span class="toc-text">S3 Storage Classes</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-AWS-CLI-SDK-IAM-Roles-amp-Policies"><span class="toc-text">10. AWS CLI, SDK, IAM Roles &amp; Policies</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Metadata-IMDS"><span class="toc-text">EC2 Instance Metadata (IMDS)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MFA-with-CLI"><span class="toc-text">MFA with CLI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SDK"><span class="toc-text">AWS SDK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Limits-Quotas"><span class="toc-text">AWS Limits (Quotas)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CLI-Credentials-Provider-Chain"><span class="toc-text">AWS CLI Credentials Provider Chain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Sigv4"><span class="toc-text">AWS Sigv4</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Advanced-S3"><span class="toc-text">11. Advanced S3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Lifecycle-Rules"><span class="toc-text">S3 Lifecycle Rules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Event-Notifications"><span class="toc-text">S3 Event Notifications</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Performance"><span class="toc-text">S3 Performance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Select-amp-Glacier-Select"><span class="toc-text">S3 Select &amp; Glacier Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Object-Tags-amp-Metadata"><span class="toc-text">S3 Object Tags &amp; Metadata</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-S3-Security"><span class="toc-text">12. S3 Security</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Encryption"><span class="toc-text">S3 Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-CORS"><span class="toc-text">S3 CORS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-MFA-Delete"><span class="toc-text">S3 MFA Delete</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Access-Logs"><span class="toc-text">S3 Access Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Pre-signed-URL"><span class="toc-text">S3 Pre-signed URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Access-Points"><span class="toc-text">S3 Access Points</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Object-Lambda"><span class="toc-text">S3 Object Lambda</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-CloudFront"><span class="toc-text">13. CloudFront</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudFront"><span class="toc-text">AWS CloudFront</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Caching"><span class="toc-text">CloudFront Caching</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Cache-Invalidation"><span class="toc-text">CloudFront Cache Invalidation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Cache-Behaviors"><span class="toc-text">CloudFront Cache Behaviors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Geo-Restriction"><span class="toc-text">CloudFront Geo Restriction</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Signed-URL-x2F-Cookies"><span class="toc-text">CloudFront Signed URL &#x2F; Cookies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Advanced-Concepts"><span class="toc-text">CloudFront Advanced Concepts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Real-Time-Logs"><span class="toc-text">CloudFront Real Time Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Global-Accelerator"><span class="toc-text">AWS Global Accelerator</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-ECS-ECR-amp-Fargate"><span class="toc-text">14. ECS, ECR &amp; Fargate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ECS"><span class="toc-text">AWS ECS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Auto-Scaling"><span class="toc-text">ECS Auto Scaling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Rolling-Updates"><span class="toc-text">ECS Rolling Updates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Task-Definitions"><span class="toc-text">ECS Task Definitions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Task-Placements"><span class="toc-text">ECS Task Placements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ECR"><span class="toc-text">AWS ECR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CoPilot"><span class="toc-text">AWS CoPilot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EKS"><span class="toc-text">AWS EKS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-Elastic-Beanstalk"><span class="toc-text">15. Elastic Beanstalk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Elastic-Beanstalk"><span class="toc-text">AWS Elastic Beanstalk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Deployment-Modes"><span class="toc-text">Beanstalk Deployment Modes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Lifecycle-Policy"><span class="toc-text">Beanstalk Lifecycle Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Extensions"><span class="toc-text">Beanstalk Extensions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-with-CloudFormation"><span class="toc-text">Beanstalk with CloudFormation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Cloning"><span class="toc-text">Beanstalk Cloning</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-AWS-CloudFormation"><span class="toc-text">16. AWS CloudFormation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudFormation"><span class="toc-text">AWS CloudFormation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Resources"><span class="toc-text">CloudFormation Resources</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Parameters"><span class="toc-text">CloudFormation Parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Mappings"><span class="toc-text">CloudFormation Mappings</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Outputs-amp-Exports"><span class="toc-text">CloudFormation Outputs &amp; Exports</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Conditions"><span class="toc-text">CloudFormation Conditions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Intrinsic-Functions"><span class="toc-text">CloudFormation Intrinsic Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Rollbacks"><span class="toc-text">CloudFormation Rollbacks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Service-Role"><span class="toc-text">CloudFormation Service Role</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-DeletionPolicy"><span class="toc-text">CloudFormation DeletionPolicy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Stack-Policy"><span class="toc-text">CloudFormation Stack Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Termination-Protection"><span class="toc-text">CloudFormation Termination Protection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Custom-Resources"><span class="toc-text">CloudFormation Custom Resources</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-StackSets"><span class="toc-text">CloudFormation StackSets</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-SQS-SNS-Kinesis"><span class="toc-text">17. SQS, SNS, Kinesis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SQS"><span class="toc-text">AWS SQS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Message-Visibility-Timeout"><span class="toc-text">SQS Message Visibility Timeout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Dead-Letter-Queues-DLQ"><span class="toc-text">SQS Dead Letter Queues (DLQ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Delay-Queues"><span class="toc-text">SQS Delay Queues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Long-Polling"><span class="toc-text">SQS Long Polling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Extended-Client"><span class="toc-text">SQS Extended Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-FIFO-Queues"><span class="toc-text">SQS FIFO Queues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-FIFO-Queues-Advanced"><span class="toc-text">SQS FIFO Queues Advanced</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SNS"><span class="toc-text">AWS SNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fan-Out-Pattern"><span class="toc-text">Fan Out Pattern</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Kinesis"><span class="toc-text">AWS Kinesis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Streams"><span class="toc-text">Kinesis Data Streams</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Producers"><span class="toc-text">Kinesis Producers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Consumers"><span class="toc-text">Kinesis Consumers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Client-Library-KCL"><span class="toc-text">Kinesis Client Library (KCL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Operations"><span class="toc-text">Kinesis Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Firehose"><span class="toc-text">Kinesis Data Firehose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Analytics"><span class="toc-text">Kinesis Data Analytics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-ordering-for-Kinesis"><span class="toc-text">Data ordering for Kinesis</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-AWS-Mointoring-amp-Audit"><span class="toc-text">18. AWS Mointoring &amp; Audit</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Metrics"><span class="toc-text">CloudWatch Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Custom-Metrics"><span class="toc-text">CloudWatch Custom Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs"><span class="toc-text">CloudWatch Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Agent"><span class="toc-text">CloudWatch Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs-Metric-Filter"><span class="toc-text">CloudWatch Logs Metric Filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Alarms"><span class="toc-text">CloudWatch Alarms</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Syntheics"><span class="toc-text">CloudWatch Syntheics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EventBridge"><span class="toc-text">AWS EventBridge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-X-Ray"><span class="toc-text">AWS X-Ray</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-Advance"><span class="toc-text">X-Ray Advance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-APIs"><span class="toc-text">X-Ray APIs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-with-Beanstalk"><span class="toc-text">X-Ray with Beanstalk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Distro-for-OpenTelemetry"><span class="toc-text">AWS Distro for OpenTelemetry</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudTrail"><span class="toc-text">AWS CloudTrail</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-Lambda"><span class="toc-text">19. Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Lambda"><span class="toc-text">AWS Lambda</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Synchronous-Invocations"><span class="toc-text">Lambda Synchronous Invocations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-ALB"><span class="toc-text">Lambda with ALB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Asynchronous-Invocations"><span class="toc-text">Lambda Asynchronous Invocations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Event-Source-Mapping"><span class="toc-text">Lambda Event Source Mapping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Event-and-Context-Objects"><span class="toc-text">Lambda Event and Context Objects</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Destinations"><span class="toc-text">Lambda Destinations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Permissions"><span class="toc-text">Lambda Permissions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Environment-Variables"><span class="toc-text">Lambda Environment Variables</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Logging-amp-Monitoring"><span class="toc-text">Lambda Logging &amp; Monitoring</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Functions-amp-Lambda-Edge"><span class="toc-text">CloudFront Functions &amp; Lambda@Edge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-in-VPC"><span class="toc-text">Lambda in VPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Function-Performance"><span class="toc-text">Lambda Function Performance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Layers"><span class="toc-text">Lambda Layers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-File-Systems-Mounting"><span class="toc-text">Lambda File Systems Mounting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Concurrency"><span class="toc-text">Lambda Concurrency</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-External-Dependencies"><span class="toc-text">Lambda External Dependencies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Container-Image"><span class="toc-text">Lambda Container Image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Versions-and-Aliases"><span class="toc-text">Lambda Versions and Aliases</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-CodeDeploy"><span class="toc-text">Lambda with CodeDeploy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Function-URL"><span class="toc-text">Lambda Function URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-CodeGuru"><span class="toc-text">Lambda with CodeGuru</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-DynamoDB"><span class="toc-text">20. DynamoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-DynamoDB"><span class="toc-text">AWS DynamoDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-WCU-amp-RCU"><span class="toc-text">DynamoDB WCU &amp; RCU</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Basic-Operations"><span class="toc-text">DynamoDB Basic Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Conditional-Writes"><span class="toc-text">DynamoDB Conditional Writes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Indexes"><span class="toc-text">DynamoDB Indexes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-PartiQL"><span class="toc-text">DynamoDB PartiQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Optimistic-Locking"><span class="toc-text">DynamoDB Optimistic Locking</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-DAX"><span class="toc-text">DynamoDB DAX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Stream"><span class="toc-text">DynamoDB Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-TTL"><span class="toc-text">DynamoDB TTL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-CLI"><span class="toc-text">DynamoDB CLI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Transcations"><span class="toc-text">DynamoDB Transcations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Session-State"><span class="toc-text">DynamoDB Session State</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Write-Sharding"><span class="toc-text">DynamoDB Write Sharding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Other-Features"><span class="toc-text">DynamoDB Other Features</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-API-Gateway"><span class="toc-text">21. API Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-API-Gateway"><span class="toc-text">AWS API Gateway</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Stages"><span class="toc-text">API Gateway Stages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Canary-Deployment"><span class="toc-text">API Gateway Canary Deployment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Integration-Tyeps"><span class="toc-text">API Gateway Integration Tyeps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Mapping-Templates"><span class="toc-text">API Gateway Mapping Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-OpenAPI"><span class="toc-text">API Gateway OpenAPI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Caching"><span class="toc-text">API Gateway Caching</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Usage-Plans-amp-API-Keys"><span class="toc-text">API Gateway Usage Plans &amp; API Keys</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Monitoring"><span class="toc-text">API Gateway Monitoring</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-CORS"><span class="toc-text">API Gateway CORS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Security"><span class="toc-text">API Gateway Security</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-WebSocket-API"><span class="toc-text">API Gateway WebSocket API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-AWS-CICD"><span class="toc-text">22. AWS CICD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeCommit"><span class="toc-text">AWS CodeCommit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodePipeline"><span class="toc-text">AWS CodePipeline</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeBuild"><span class="toc-text">AWS CodeBuild</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeDeploy"><span class="toc-text">AWS CodeDeploy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeStar-CodeCatalyst"><span class="toc-text">AWS CodeStar (CodeCatalyst)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeArtifact"><span class="toc-text">AWS CodeArtifact</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeGuru"><span class="toc-text">AWS CodeGuru</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cloud9"><span class="toc-text">AWS Cloud9</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-AWS-Serverless-Application-Model-SAM"><span class="toc-text">23. AWS Serverless Application Model (SAM)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SAM"><span class="toc-text">AWS SAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAM-Policy-Templates"><span class="toc-text">SAM Policy Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAM-Local-Capabilities"><span class="toc-text">SAM Local Capabilities</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-Cloud-Deployment-Kit-CDK"><span class="toc-text">24. Cloud Deployment Kit (CDK)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cloud-Development-Kit"><span class="toc-text">AWS Cloud Development Kit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-Cognito"><span class="toc-text">25. Cognito</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cognito"><span class="toc-text">AWS Cognito</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cognito-User-Pools-CUP"><span class="toc-text">Cognito User Pools (CUP)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cognito-Identity-Pools-CIP"><span class="toc-text">Cognito Identity Pools (CIP)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-Step-Functions-amp-AppSync"><span class="toc-text">26. Step Functions &amp; AppSync</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Step-Functions"><span class="toc-text">AWS Step Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Error-Handling"><span class="toc-text">Step Functions Error Handling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Wait-for-Task-Token"><span class="toc-text">Step Functions Wait for Task Token</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Activity-Tasks"><span class="toc-text">Step Functions Activity Tasks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AppSync"><span class="toc-text">AWS AppSync</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Amplify"><span class="toc-text">AWS Amplify</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-Advanced-Identity"><span class="toc-text">27. Advanced Identity</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-STS"><span class="toc-text">AWS STS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Advanced-IAM"><span class="toc-text">Advanced IAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Access-Analyzer"><span class="toc-text">IAM Access Analyzer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Directory-Services-AD"><span class="toc-text">AWS Directory Services (AD)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-AWS-Security-amp-Encryption"><span class="toc-text">28. AWS Security &amp; Encryption</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Encryption-101"><span class="toc-text">Encryption 101</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-KMS"><span class="toc-text">AWS KMS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#KMS-Envelope-Encryption"><span class="toc-text">KMS Envelope Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#KMS-Limits"><span class="toc-text">KMS Limits</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudHSM"><span class="toc-text">AWS CloudHSM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSM-Parameter-Store"><span class="toc-text">SSM Parameter Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Secrets-Manager"><span class="toc-text">AWS Secrets Manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs-Encryption"><span class="toc-text">CloudWatch Logs Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Nitro-Enclaves"><span class="toc-text">AWS Nitro Enclaves</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-Other-AWS-Services"><span class="toc-text">29. Other AWS Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SES-Simple-Email-Service"><span class="toc-text">AWS SES (Simple Email Service)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-OpenSearch"><span class="toc-text">AWS OpenSearch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Athena"><span class="toc-text">AWS Athena</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-MSK"><span class="toc-text">AWS MSK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Certificate-Manager-ACM"><span class="toc-text">AWS Certificate Manager (ACM)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Macie"><span class="toc-text">AWS Macie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AppConfig"><span class="toc-text">AWS AppConfig</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text">é™„å½•</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/3458e8f8.html" title="ç¬”è®°"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/od2iyorqbvbnha2g2vybpn8v4tiq4qw.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="ç¬”è®°"></a><div class="content"><a class="title" href="/posts/3458e8f8.html" title="ç¬”è®°">ç¬”è®°</a><time datetime="2024-08-10T15:15:05.000Z" title="å‘è¡¨äº 2024-08-10 10:15:05">2024-08-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29dadae9.html" title="PostgreSQL å­¦ä¹ ç¬”è®°"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgied0v0dgsgyqeoh7804b0ca54buj0qd.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="PostgreSQL å­¦ä¹ ç¬”è®°"></a><div class="content"><a class="title" href="/posts/29dadae9.html" title="PostgreSQL å­¦ä¹ ç¬”è®°">PostgreSQL å­¦ä¹ ç¬”è®°</a><time datetime="2024-08-02T15:15:06.000Z" title="å‘è¡¨äº 2024-08-02 10:15:06">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/69cd31bf.html" title="GraphQL å­¦ä¹ ç¬”è®°"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imge39twvhffwemdsipqncbwko5vayrxgd.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="GraphQL å­¦ä¹ ç¬”è®°"></a><div class="content"><a class="title" href="/posts/69cd31bf.html" title="GraphQL å­¦ä¹ ç¬”è®°">GraphQL å­¦ä¹ ç¬”è®°</a><time datetime="2024-08-02T15:15:05.000Z" title="å‘è¡¨äº 2024-08-02 10:15:05">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/88b435e5.html" title="è€ƒè¯ï¼šGCP Cloud Digital Leader"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/4lm5yuyw4y3lbznbatf6j8o8kcvefg8.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="è€ƒè¯ï¼šGCP Cloud Digital Leader"></a><div class="content"><a class="title" href="/posts/88b435e5.html" title="è€ƒè¯ï¼šGCP Cloud Digital Leader">è€ƒè¯ï¼šGCP Cloud Digital Leader</a><time datetime="2024-07-19T17:03:05.000Z" title="å‘è¡¨äº 2024-07-19 12:03:05">2024-07-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4c411076.html" title="è€ƒè¯ï¼šExam AZ-900"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img1u6qw3ad64bz8nsedrd2wddgrax5wew.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="è€ƒè¯ï¼šExam AZ-900"></a><div class="content"><a class="title" href="/posts/4c411076.html" title="è€ƒè¯ï¼šExam AZ-900">è€ƒè¯ï¼šExam AZ-900</a><time datetime="2024-07-07T17:03:05.000Z" title="å‘è¡¨äº 2024-07-07 12:03:05">2024-07-07</time></div></div></div></div></div></div></main><footer id="footer" style="background:rgba(0,0,0,.25)"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 &nbsp;<i id="heartbeat" class="fa fas fa-heartbeat"></i> &nbsp;é´»é”</div><div class="footer_custom_text"><p class="badge"><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-informational?style=flat&logo=hexo"></a><a style="margin-inline:5px" target="_blank" href="https://domains.google/"><img src="https://img.shields.io/badge/Hosted-Google-ff69b4?style=flat&logo=googledomains"></a><a style="margin-inline:5px" target="_blank" href="https://gulpjs.com/"><img src="https://img.shields.io/badge/Compress-gulp-critical?style=flat&logo=gulp"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-black?style=flat&logo=GitHub"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris"></a></p></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="/js/util.js"></script><script defer src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script disable-devtool-auto src="https://cdn.jsdelivr.net/npm/disable-devtool"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>