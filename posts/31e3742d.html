<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>AWS DVA-C02 | 鴻鵠誌達</title><meta name="author" content="鴻達"><meta name="copyright" content="鴻達"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#1a1a1a"><meta name="description" content="AWS 认证开发人员 - 助理"><meta property="og:type" content="article"><meta property="og:title" content="AWS DVA-C02"><meta property="og:url" content="https://hongdalin.blog/posts/31e3742d.html"><meta property="og:site_name" content="鴻鵠誌達"><meta property="og:description" content="AWS 认证开发人员 - 助理"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch3.png"><meta property="article:published_time" content="2024-03-30T17:03:05.000Z"><meta property="article:modified_time" content="2025-11-15T03:26:06.130Z"><meta property="article:author" content="鴻達"><meta property="article:tag" content="AWS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch3.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/德克萨斯.GIF"><link rel="canonical" href="https://hongdalin.blog/posts/31e3742d.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"AWS DVA-C02",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-11-14 21:26:06"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,n){if(0===n)return;const o=864e5*n,a={value:t,expiry:(new Date).getTime()+o};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t);if(!((new Date).getTime()>n.expiry))return n.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,n)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onerror=n,o.onload=o.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)})),e.getCSS=e=>new Promise(((t,n)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=()=>t(),o.onerror=()=>n(),document.head.appendChild(o)}));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/color.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/font.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/icon.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/layout.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/德狗子.GIF" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch3.png')"><nav id="nav"><span id="blog-info"><a href="/" title="鴻鵠誌達"><span class="site-name">鴻鵠誌達</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">AWS DVA-C02</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-30T17:03:05.000Z" title="发表于 2024-03-30 12:03:05">2024-03-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-15T03:26:06.130Z" title="更新于 2025-11-14 21:26:06">2025-11-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Certification/">Certification</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">36.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>132分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="AWS DVA-C02"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>官网: <a target="_blank" rel="noopener" href="https://aws.amazon.com/certification/certified-developer-associate/">https://aws.amazon.com/certification/certified-developer-associate/</a></p></blockquote><hr><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><h3 id="1-AWS-Cloud-Overview"><a href="#1-AWS-Cloud-Overview" class="headerlink" title="1. AWS Cloud Overview"></a>1. AWS Cloud Overview</h3><h4 id="AWS-Regions"><a href="#AWS-Regions" class="headerlink" title="AWS Regions"></a>AWS Regions</h4><ul><li>Region 是数据中心集群</li><li>特点<ul><li>地理位置独立</li><li>每个 Region 有多个可用区 (AZ)</li><li>某些服务和资源限定在 Region 内</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231130.png"></p><ul><li>跨 Region 复用 SSH 密钥<ul><li>从私钥生成公钥</li><li>将公钥导入到每个 Region</li></ul></li></ul><hr><h4 id="AWS-Availability-Zone"><a href="#AWS-Availability-Zone" class="headerlink" title="AWS Availability Zone"></a>AWS Availability Zone</h4><ul><li>每个 Region 包含 3-6 个可用区 (AZ)</li><li>特点<ul><li>物理位置分离，独立供电和网络</li><li>通过高速专用网络连接</li><li>提供故障隔离和高可用性</li></ul></li><li>用途: 部署多 AZ 架构实现容错</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140727.png"></p><hr><h4 id="AWS-Edge-Locations"><a href="#AWS-Edge-Locations" class="headerlink" title="AWS Edge Locations"></a>AWS Edge Locations</h4><ul><li>向用户低延迟分发内容 (离用户越近，速度越快)</li><li>特点<ul><li>数量远多于 Region (全球 400+ 个)</li><li>缓存内容，减少源服务器负载</li></ul></li><li>主要服务<ul><li>CloudFront (CDN)</li><li>Route 53 (DNS)</li><li>AWS Global Accelerator</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140903.png"></p><hr><h3 id="2-IAM"><a href="#2-IAM" class="headerlink" title="2. IAM"></a>2. IAM</h3><h4 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h4><ul><li>Root Account - 默认创建, 拥有完全权限, 不要共享</li><li>Users - 组织内的个人用户</li><li>Groups - 只包含 Users, 不包含其他 Groups (User 可属于多个 Group)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145736.png"></p><ul><li>AWS 需要至少 5 周生成预算预测 (budget forecasts)</li><li>User 默认无法访问 Billing and Cost Management 控制台, 需授权</li></ul><hr><h4 id="IAM-Permissions"><a href="#IAM-Permissions" class="headerlink" title="IAM Permissions"></a>IAM Permissions</h4><ul><li>定义 User 或 Group 的访问权限</li><li>最小权限原则 (Least Privilege Principle) - 只授予必需的最小权限</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160124.png"></p><ul><li>安全最佳实践<ul><li>不要创建 IAM User 并传递凭证给应用</li><li>不要在应用中嵌入凭证</li><li>使用 IAM Role 替代</li></ul></li></ul><hr><h4 id="IAM-Policies"><a href="#IAM-Policies" class="headerlink" title="IAM Policies"></a>IAM Policies</h4><ul><li>Policy Statement 必须包含: Effect, Principal, Action, Resource</li><li>策略类型<ul><li>Managed Policy - AWS 或客户管理, 可复用</li><li>Inline Policy - 直接附加到单个用户、组或角色</li></ul></li><li>IAM 支持的唯一基于资源的策略: Trust Policy (信任策略)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175653.png"></p><ul><li>IAM 策略定义操作权限, 与执行方法无关</li></ul><hr><h4 id="IAM-MFA"><a href="#IAM-MFA" class="headerlink" title="IAM MFA"></a>IAM MFA</h4><ul><li>保护 Root Account 和 IAM Users</li><li>MFA 选项<ul><li>Virtual MFA Device - 手机应用 (Google Authenticator, Authy)</li><li>U2F Security Key - 物理 USB 设备 (YubiKey)</li><li>Hardware MFA Device - 硬件令牌</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180624.png"></p><hr><h4 id="IAM-CLI-amp-SDK"><a href="#IAM-CLI-amp-SDK" class="headerlink" title="IAM CLI &amp; SDK"></a>IAM CLI &amp; SDK</h4><ul><li>AWS 访问方式<ul><li>AWS Management Console - 网页控制台</li><li>AWS CLI - 命令行工具</li><li>AWS SDK - 编程接口 (多种语言)</li></ul></li><li>CLI 使用示例<ul><li>设置 EBS 卷属性: <code>--delete-on-termination=false</code></li><li>批量操作和自动化脚本</li></ul></li><li>考试提示: 遇到脚本或自动化问题, 优先选择 CLI</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193342.png"></p><hr><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li>定义一组权限供 AWS 服务使用, 提供临时凭证, 无需长期密钥</li><li>常见角色<ul><li>EC2 Instance Role - EC2 访问其他服务</li><li>Lambda Function Role - Lambda 执行权限</li><li>Cross-Account Role - 跨账户访问</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203306.png"></p><ul><li>优势<ul><li>自动轮换凭证</li><li>安全性高于硬编码密钥</li><li>遵循最小权限原则</li></ul></li></ul><hr><h4 id="IAM-Security-Tools"><a href="#IAM-Security-Tools" class="headerlink" title="IAM Security Tools"></a>IAM Security Tools</h4><ul><li>IAM Credentials Report (账户级别)<ul><li>列出所有用户及其凭证状态</li><li>用于审计和合规性检查</li></ul></li><li>IAM Access Advisor (用户级别)<ul><li>显示用户授权的服务和最后访问时间</li><li>用于识别未使用的权限, 实现最小权限</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203553.png"></p><hr><h3 id="3-EC2-Fundamentals"><a href="#3-EC2-Fundamentals" class="headerlink" title="3. EC2 Fundamentals"></a>3. EC2 Fundamentals</h3><h4 id="AWS-EC2"><a href="#AWS-EC2" class="headerlink" title="AWS EC2"></a>AWS EC2</h4><ul><li>EC2 &#x3D; Elastic Compute Cloud &#x3D; IaaS</li><li>绑定到特定可用区 (AZ)</li><li>Instance Metadata<ul><li>访问元数据: <code>http://169.254.169.254/latest/meta-data/</code></li><li>获取公有 IP: <code>http://169.254.169.254/latest/meta-data/public-ipv4</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214749.png"></p><ul><li>User Data<ul><li>实例启动时自动执行的脚本</li><li>默认仅在首次启动时运行</li><li>以 root 用户权限执行</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214956.png"></p><ul><li>监控和优化<ul><li>启用详细监控: <code>aws ec2 monitor-instances --instance-ids &#123;id&#125;</code></li><li>降低 CPU 使用率方案 (SSL 卸载): 在 ALB 上配置 SSL&#x2F;TLS 证书 (通过 ACM) → 创建 HTTPS 监听器并启用 SSL 终止 → 减轻 EC2 实例的 SSL 处理负担</li></ul></li></ul><hr><h4 id="EC2-Instance-Type"><a href="#EC2-Instance-Type" class="headerlink" title="EC2 Instance Type"></a>EC2 Instance Type</h4><ul><li>7 种实例类型, 常用 4 种</li><li>General Purpose (通用型)<ul><li>计算、内存、网络资源平衡</li><li>适用于 Web 服务器、小型数据库</li></ul></li><li>Compute Optimized (计算优化型)<ul><li>高性能处理器</li><li>适用于批处理、视频编码、HPC、机器学习</li></ul></li><li>Memory Optimized (内存优化型)<ul><li>大内存, 内存中处理数据</li><li>适用于缓存、实时大数据分析、内存数据库</li></ul></li><li>Storage Optimized (存储优化型)<ul><li>高速本地存储读写</li><li>适用于 OLTP、数据仓库、分布式文件系统</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220941.png"></p><hr><h4 id="EC2-Security-Groups"><a href="#EC2-Security-Groups" class="headerlink" title="EC2 Security Groups"></a>EC2 Security Groups</h4><ul><li>控制 EC2 实例的入站和出站流量 (类似虚拟防火墙)</li><li>只包含允许规则 (默认拒绝所有)</li><li>状态化: 允许的入站流量自动允许出站响应</li><li>绑定到 Region&#x2F;VPC</li><li>Inbound Rule 来源类型<ul><li>IP 地址 (单个 IP)</li><li>CIDR 块 (IP 范围)</li><li>另一个 Security Group (引用)</li></ul></li><li>故障排查提示: EC2 连接问题优先检查 Security Group</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222531.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223020.png"></p><hr><h4 id="EC2-Instance-Purchasing-Options"><a href="#EC2-Instance-Purchasing-Options" class="headerlink" title="EC2 Instance Purchasing Options"></a>EC2 Instance Purchasing Options</h4><ul><li>On-Demand Instances<ul><li>按秒计费, 无长期承诺</li><li>适用于短期、不可预测的工作负载</li></ul></li><li>Reserved Instances (1-3 年)<ul><li>Standard RI - 最高 72% 折扣, 固定实例类型</li><li>Convertible RI - 最高 66% 折扣, 可更改实例类型</li><li>范围: Regional (无容量预留) &#x2F; Zonal (有容量预留)</li></ul></li><li>Savings Plans (1-3 年)<ul><li>承诺使用量, 最高 72% 折扣</li><li>超出承诺部分按 On-Demand 计费</li><li>Compute Savings Plan - 66% 折扣, 适用于 Lambda 和 Fargate</li></ul></li><li>Spot Instances<ul><li>最高 90% 折扣, 最便宜</li><li>可能被随时中断, 适合容错工作负载</li></ul></li><li>Dedicated Hosts<ul><li>完全独占物理服务器, 最贵</li><li>可控制实例放置, 满足合规要求</li></ul></li><li>Dedicated Instances<ul><li>独立硬件运行, 但不锁定到特定服务器</li></ul></li><li>Capacity Reservations<ul><li>预留特定 AZ 的容量</li><li>适用于短时间需要保证容量的场景</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224149.png"></p><hr><h3 id="4-EC2-Instance-Storage"><a href="#4-EC2-Instance-Storage" class="headerlink" title="4. EC2 Instance Storage"></a>4. EC2 Instance Storage</h3><h4 id="AWS-EBS"><a href="#AWS-EBS" class="headerlink" title="AWS EBS"></a>AWS EBS</h4><ul><li>块级存储 (Block-level storage), 类似网络硬盘</li><li>绑定到特定 AZ, 无法跨 AZ 使用</li><li>需要预配置容量 (Provisioned Capacity)</li><li>可以从一个 EC2 实例卸载并挂载到另一个实例</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191440.png"></p><ul><li>Delete on Termination 属性<ul><li>根卷 (Root Volume) 默认在实例终止时删除</li><li>其他 EBS 卷默认在实例终止时保留</li><li>可通过 AWS Console 或 AWS CLI 控制此行为</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002840.png"></p><ul><li>EBS 加密<ul><li>默认加密是 Region 级别设置, 启用后无法对该 Region 的单个卷或快照禁用</li><li>从加密快照恢复的卷或加密快照的副本始终保持加密状态</li></ul></li></ul><hr><h4 id="EBS-Snapshots"><a href="#EBS-Snapshots" class="headerlink" title="EBS Snapshots"></a>EBS Snapshots</h4><ul><li>EBS 卷备份, 可以跨 AZ 或 Region 使用快照</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195715.png"></p><ul><li>Snapshot Archive - 成本降低 75%, 恢复时间 24-72 小时</li><li>Recycle Bin - 设置规则保留已删除的快照, 支持恢复</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195833.png"></p><hr><h4 id="AWS-AMI"><a href="#AWS-AMI" class="headerlink" title="AWS AMI"></a>AWS AMI</h4><ul><li>AMI (Amazon Machine Image) - EC2 实例的自定义镜像, 可以更快速地启动和配置 EC2 实例</li><li>构建在特定 Region 中, 可以跨 Region 复制</li><li>跨 Region 复制时会在目标 Region 自动创建 snapshot</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200249.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200341.png"></p><hr><h4 id="EC2-Instance-Store"><a href="#EC2-Instance-Store" class="headerlink" title="EC2 Instance Store"></a>EC2 Instance Store</h4><ul><li>物理硬盘 (Physical drive), 块级临时存储</li><li>高随机 I&#x2F;O 性能</li><li>适合缓存、临时数据、缓冲区等低成本场景</li><li>实例停止或终止时数据丢失 (Ephemeral)</li><li>数据不会持久化, 无法在实例间复用</li><li>典型使用场景: 临时数据处理、高性能缓存</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203146.png"></p><hr><h4 id="EBS-Volume-Types"><a href="#EBS-Volume-Types" class="headerlink" title="EBS Volume Types"></a>EBS Volume Types</h4><ul><li>General Purpose SSD (gp2&#x2F;gp3) - 性价比高, 平衡性能<ul><li>gp3 最大 IOPS 16,000</li><li>适用于大多数工作负载</li></ul></li><li>Provisioned IOPS SSD (io1&#x2F;io2) - 高性能, 支持 Multi-Attach<ul><li>低延迟, 高吞吐量</li><li>IOPS 更高但成本也更高</li><li>适用于关键业务应用和数据库</li></ul></li><li>Hard Disk Drives (HDD)<ul><li>Throughput Optimized (st1) - 大数据, 数据仓库</li><li>Cold HDD (sc1) - 不频繁访问的数据</li><li>不能用作 EC2 启动卷</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203437.png"></p><hr><h4 id="EBS-Multi-Attach"><a href="#EBS-Multi-Attach" class="headerlink" title="EBS Multi-Attach"></a>EBS Multi-Attach</h4><ul><li>将同一个 EBS 卷挂载到同一 AZ 中的多个 EC2 实例</li><li>仅支持 io1&#x2F;io2 系列 (Provisioned IOPS SSD)</li><li>适用场景: 集群应用, 高可用性应用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203956.png"></p><hr><h4 id="EBS-RAID"><a href="#EBS-RAID" class="headerlink" title="EBS RAID"></a>EBS RAID</h4><ul><li>RAID 0 (性能优先)<ul><li>I&#x2F;O 性能比容错更重要时使用</li><li>通过条带化提高性能</li><li>无冗余, 任何磁盘故障导致数据丢失</li></ul></li><li>RAID 1 (容错优先)<ul><li>容错比 I&#x2F;O 性能更重要时使用</li><li>数据镜像, 提供冗余</li><li>可用容量减半</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q37-i1.jpg"></p><hr><h4 id="AWS-EFS"><a href="#AWS-EFS" class="headerlink" title="AWS EFS"></a>AWS EFS</h4><ul><li>NFS (网络文件系统), 可挂载到多个 EC2 实例</li><li>自动扩展, 高可用, 无需容量规划</li><li>可跨 AZ, Region, VPC 访问</li><li>使用 VPC Security Group 或 IAM Policy 控制访问</li><li>仅支持 Linux 实例 (POSIX 兼容), 不支持 Windows</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233415.png"></p><ul><li>Performance Mode (创建时设置)<ul><li>General Purpose - 默认模式, 低延迟 (适用于 Web 服务器)</li><li>Max I&#x2F;O - 高延迟但高吞吐量, 高并行 (适用于大数据, 媒体处理)</li></ul></li><li>Throughput Mode<ul><li>Bursting - 吞吐量随存储量增长</li><li>Provisioned - 设置固定吞吐量上限 (适用于大量文件迁移)</li><li>Elastic - 根据工作负载自动扩展</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233732.png"></p><ul><li>存储类别<ul><li>Standard - 频繁访问</li><li>Infrequent Access (EFS-IA) - 成本优化, 不频繁访问的文件</li></ul></li><li>存储方案对比<ul><li>EBS - 高 IOPS, 单实例挂载, 性能最快</li><li>EFS - 共享文件系统, 可跨 AZ, 自动扩展</li><li>S3 - 对象存储, 成本最低</li></ul></li></ul><hr><h3 id="5-ELB-amp-ASG"><a href="#5-ELB-amp-ASG" class="headerlink" title="5. ELB &amp; ASG"></a>5. ELB &amp; ASG</h3><h4 id="Scalability-amp-High-Availability"><a href="#Scalability-amp-High-Availability" class="headerlink" title="Scalability &amp; High Availability"></a>Scalability &amp; High Availability</h4><ul><li>Vertical Scaling (垂直扩展) - 增加实例大小, 例如从 t2.micro 升级到 t2.large</li><li>Horizontal Scaling (水平扩展) - 增加实例数量, 例如从 1 个实例扩展到 10 个实例</li><li>High Availability (高可用性) - 在至少 2 个 AZ 中运行应用, 实现容灾和故障转移</li><li>常见的高可用 + 高扩展架构: ALB + ECS, API Gateway + Lambda</li></ul><hr><h4 id="AWS-ELB"><a href="#AWS-ELB" class="headerlink" title="AWS ELB"></a>AWS ELB</h4><ul><li>将流量分发到多个 EC2 实例, 跨 AZ 实现高可用</li><li>自动处理下游实例故障, 通过健康检查 (Health Check) 监控实例状态</li><li>架构设计: ELB 部署在 public subnet, ASG 部署在 private subnet, 分离公共流量和私有流量</li><li>限制: 无法跨 Region 分发流量, 使用端口范围 1024-65535</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img141400.png"></p><ul><li>三种类型<ul><li>Application Load Balancer (ALB) - HTTP&#x2F;HTTPS, Layer 7, 提供静态 DNS</li><li>Network Load Balancer (NLB) - TCP&#x2F;UDP, Layer 4, 提供静态 DNS 和静态 IP</li><li>Gateway Load Balancer (GWLB) - 安全检查, Layer 3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090125.png"></p><ul><li>流量不均衡的常见原因: 特定容量类型的实例在 AZ 间分布不均, 或启用了粘性会话 (Sticky Sessions)</li></ul><hr><h4 id="Application-Load-Balancer-ALB"><a href="#Application-Load-Balancer-ALB" class="headerlink" title="Application Load Balancer (ALB)"></a>Application Load Balancer (ALB)</h4><ul><li>Layer 7 负载均衡, 支持 HTTP&#x2F;HTTPS 和 WebSocket</li><li>多种路由规则<ul><li>基于路径 (<code>/home</code>, <code>/api</code>)</li><li>基于查询字符串 (<code>?platform=mobile</code>)</li><li>基于主机名 (<code>api.example.com</code>)</li><li>基于 HTTP 头部</li><li>基于客户端 IP</li></ul></li><li>自动添加 <code>X-Forwarded-For</code> 头部包含客户端真实 IP</li><li>可配置 HTTP 到 HTTPS 重定向</li><li>不支持静态 IP (仅 NLB 支持静态 IP)</li><li>Access Logs 可用于分析请求延迟和 IP 地址</li><li>Target 类型: EC2 实例 (Instance)、IP 地址 (不支持公网 IP)、Lambda 函数</li><li>错误排查: HTTP 503 错误表示未注册任何目标</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192523.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142631.png"></p><hr><h4 id="Network-Load-Balancer-NLB"><a href="#Network-Load-Balancer-NLB" class="headerlink" title="Network Load Balancer (NLB)"></a>Network Load Balancer (NLB)</h4><ul><li>Layer 4 负载均衡, 支持 TCP&#x2F;UDP</li><li>超低延迟和高吞吐量, 适用于银行交易、游戏服务器等高性能需求场景</li><li>每个 AZ 一个静态 IP, 支持分配 Elastic IP</li><li>支持 HTTP、TCP、HTTPS 健康检查</li><li>Target 路由方式<ul><li>使用实例 ID - 流量路由到主网络接口的主私有 IP</li><li>使用 IP - 直接路由到指定 IP</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144359.png"></p><hr><h4 id="Gateway-Load-Balancer-GWLB"><a href="#Gateway-Load-Balancer-GWLB" class="headerlink" title="Gateway Load Balancer (GWLB)"></a>Gateway Load Balancer (GWLB)</h4><ul><li>Layer 3 负载均衡 (网络层)</li><li>部署和管理第三方虚拟设备 (防火墙、IDS&#x2F;IPS、深度包检测)</li><li>对多个 VPC 流量进行内联检查</li><li>使用 GENEVE 协议, 端口 6081</li><li>简化和扩展安全设备部署</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223042.png"></p><hr><h4 id="Sticky-Sessions-Session-Affinity"><a href="#Sticky-Sessions-Session-Affinity" class="headerlink" title="Sticky Sessions (Session Affinity)"></a>Sticky Sessions (Session Affinity)</h4><ul><li>同一客户端始终路由到同一后端实例, 保持会话数据 (例如用户登录状态)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223425.png"></p><ul><li>Cookie 类型<ul><li>Application-based Cookies - 应用自定义 Cookie (不能使用保留名称: AWSALB, AWSALBAPP, AWSALBTG)</li><li>Duration-based Cookies - 负载均衡器生成的 Cookie (ALB 使用 AWSALB, CLB 使用 AWSELB)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223604.png"></p><hr><h4 id="Cross-Zone-Load-Balancing"><a href="#Cross-Zone-Load-Balancing" class="headerlink" title="Cross Zone Load Balancing"></a>Cross Zone Load Balancing</h4><ul><li>在所有 AZ 的所有实例间均匀分配流量</li><li>启用时每个实例接收相同流量, 未启用时流量在 AZ 级别均分后再在 AZ 内部均分</li><li>默认设置: ALB 默认启用, NLB 和 GWLB 默认禁用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230059.png"></p><hr><h4 id="SSL-Certificates"><a href="#SSL-Certificates" class="headerlink" title="SSL Certificates"></a>SSL Certificates</h4><ul><li>加密客户端与负载均衡器之间的流量 (HTTPS)</li><li>证书管理服务<ul><li>AWS Certificate Manager (ACM) - 推荐使用</li><li>IAM - 也支持存储和部署证书</li></ul></li><li>SNI (Server Name Indication)<ul><li>在一个 Web 服务器上加载多个 SSL 证书</li><li>适用于需要管理多个 SSL&#x2F;TLS 证书的场景</li><li>仅 ALB 和 NLB 支持 (CLB 不支持)</li><li>允许在同一监听器上暴露多个 HTTPS 应用, 每个应用有自己的证书</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230614.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230910.png"></p><hr><h4 id="Deregistration-Delay-Connection-Draining"><a href="#Deregistration-Delay-Connection-Draining" class="headerlink" title="Deregistration Delay (Connection Draining)"></a>Deregistration Delay (Connection Draining)</h4><ul><li>等待正在进行的连接完成后再注销实例</li><li>允许负载均衡器完成发送到正在注销或不健康实例的请求, 防止用户请求中断</li><li>默认时间 300 秒 (可配置 0-3600 秒)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231418.png"></p><hr><h4 id="AWS-ASG"><a href="#AWS-ASG" class="headerlink" title="AWS ASG"></a>AWS ASG</h4><ul><li>根据需求自动扩展或缩减 EC2 实例数量 (服务本身免费)</li><li>设置最小&#x2F;最大实例数量, 配合 ELB 使用实现高可用和负载均衡</li><li>在单个 Region 内跨多个 AZ 扩展, 无法跨 Region</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232350.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232615.png"></p><ul><li>实例终止策略<ul><li>不健康实例 - 先终止不健康实例, 再创建新实例</li><li>AZ 不平衡 - 先启动新实例, 再终止旧实例</li><li>同 AZ 内 - 优先终止最早启动的实例</li></ul></li><li>Launch Template vs Launch Configuration<ul><li>Launch Template (推荐) - 支持版本控制, 支持多种实例类型 (Spot, On-Demand 混合)</li><li>Launch Configuration (旧版) - 不可修改, 需要重新创建</li><li>更新方式: 创建新版本的 Launch Template, ASG 使用新版本</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232823.png"></p><ul><li>扩展策略<ul><li>Target Tracking - 维持目标指标 (如 CPU 使用率 50%)</li><li>Simple&#x2F;Step Scaling - 基于 CloudWatch 告警</li><li>Scheduled Scaling - 基于时间计划 (节日前扩展等)</li><li>Predictive Scaling - 基于历史数据预测</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232959.png"></p><ul><li>Scaling Cooldown (冷却期) - 扩展活动后进入冷却期 (默认 300 秒), 防止频繁扩展导致成本增加</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025149.png"></p><ul><li>ASG 不终止实例的情况<ul><li>实例健康检查宽限期未过期</li><li>实例处于 Impaired 状态</li><li>ELB 健康检查失败但 EC2 健康检查类型未更改</li></ul></li><li>故障排查: 如果 ASG 未替换不健康实例, 需要将健康检查类型从 EC2 改为 ELB</li></ul><hr><h4 id="Scaling-Policies"><a href="#Scaling-Policies" class="headerlink" title="Scaling Policies"></a>Scaling Policies</h4><ul><li>Target Tracking Scaling - 维持目标指标 (例如 CPU 使用率保持 50%, SQS 队列长度保持 1000), 自动创建和管理 CloudWatch 告警</li><li>Simple&#x2F;Step Scaling - 基于 CloudWatch 告警触发<ul><li>Simple - 单一扩展动作</li><li>Step - 根据告警严重程度分级扩展</li></ul></li><li>Scheduled Actions - 基于时间计划扩展 (例如感恩节、黑五等可预测流量高峰)</li><li>Predictive Scaling - 基于历史数据预测负载并提前扩展, 使用机器学习分析历史模式</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233532.png"></p><ul><li>任何扩展策略都不会超过 ASG 设置的 maximum capacity</li></ul><hr><h4 id="ASG-Instance-Refresh"><a href="#ASG-Instance-Refresh" class="headerlink" title="ASG Instance Refresh"></a>ASG Instance Refresh</h4><ul><li>更新 Launch Template 后自动重新创建所有 EC2 实例</li><li>逐步替换实例保证可用性, 可设置最小健康百分比 (默认 90%) 和预热时间 (Warm-up time)</li><li>使用场景: 部署新 AMI, 更新用户数据, 更改实例类型</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212220.png"></p><hr><h3 id="6-AWS-Fundamentals"><a href="#6-AWS-Fundamentals" class="headerlink" title="6. AWS Fundamentals"></a>6. AWS Fundamentals</h3><h4 id="AWS-RDS"><a href="#AWS-RDS" class="headerlink" title="AWS RDS"></a>AWS RDS</h4><ul><li>托管的关系型数据库服务, 支持 MySQL、PostgreSQL、MariaDB、Oracle、MS SQL Server、Aurora</li><li>对比自建 EC2 数据库的优势<ul><li>自动完成配置、操作系统补丁和备份</li><li>存储容量自动扩展</li><li>支持 Read Replicas (最多 15 个) 提升读性能</li><li>支持 Multi-AZ 部署实现高可用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161720.png"></p><ul><li>Read Replicas (读副本)<ul><li>提高读取性能 (不是存储扩展, 也不是高可用方案)</li><li>适用于报表、分析等读密集型工作负载</li><li>支持跨 Region 部署, 可作为灾难恢复备份</li><li>主库加密时副本也会自动加密</li><li>成本比主库更高</li></ul></li><li>Multi-AZ (多可用区) - 提供高可用性<ul><li>主实例数据同步复制到不同 AZ 的备用实例</li><li>故障时自动切换到备用实例</li><li>更新流程: 先更新备用实例 → 提升为主实例 → 更新原主实例 → 原主实例变为新备用 (过程中会短暂停机)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161952.png"></p><ul><li>Storage Auto Scaling - 适用于工作负载不可预测的应用, 自动扩展存储容量</li><li>IAM Database Authentication - 使用 IAM 角色访问数据库, 无需密码, 使用令牌</li><li>灾难恢复策略: 在不同 Region 创建 Read Replica, 并在 Read Replica 上启用 Multi-AZ</li><li>迁移到 Aurora: 从 RDS Read Replica 迁移到 Aurora Read Replica, 最小变更, 适用于 Read Replica 场景</li></ul><hr><h4 id="Read-Replicas-vs-Multi-AZ"><a href="#Read-Replicas-vs-Multi-AZ" class="headerlink" title="Read Replicas vs. Multi AZ"></a>Read Replicas vs. Multi AZ</h4><ul><li>Read Replicas (读副本) - 提升可扩展性和读取性能<ul><li>异步复制 (Async Replication) 数据</li><li>可部署在同 AZ、跨 AZ 或跨 Region</li><li>同 Region 复制免费, 跨 Region 收费</li><li>无法从未加密的主库创建加密副本</li><li>典型场景: 生产库处理日常业务, 副本处理报表和分析工作</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173522.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173820.png"></p><ul><li>Multi-AZ (多可用区) - 实现高可用性和灾难恢复<ul><li>同步复制 (Sync Replication) 数据</li><li>仅支持同 Region 不同 AZ</li><li>主库故障时 CNAME 自动更新指向备用实例</li><li>应用层无需更改 SQL 连接字符串</li><li>不用于读取扩展, 备用实例不接受读请求</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174148.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174357.png"></p><hr><h4 id="AWS-Aurora"><a href="#AWS-Aurora" class="headerlink" title="AWS Aurora"></a>AWS Aurora</h4><ul><li>兼容性: PostgreSQL 和 MySQL</li><li>特性<ul><li>存储自动扩展 (无需管理)</li><li>性能比 RDS 快 5 倍 (MySQL) 或 3 倍 (PostgreSQL)</li><li>无备用数据库概念, Aurora Replica 作为故障转移目标</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img183915.png"></p><ul><li>高可用性与读扩展<ul><li>架构: 1 个主实例 (写), 最多 15 个副本 (读), 共 16 个实例</li><li>故障转移: 副本层级 (Tier) 越高, 优先提升为主实例</li><li>网络请求激增: 使用 Aurora Read Replica</li></ul></li><li>Aurora Serverless<ul><li>自动扩展计算容量</li><li>适用场景: 不可预测或间歇性工作负载</li><li>按需付费, 无需管理容量</li></ul></li><li>Aurora Database Cloning<ul><li>快速创建数据库副本</li><li>使用写时复制 (Copy-on-write) 协议</li><li>适用场景: 测试环境, 开发环境</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184105.png"></p><hr><h4 id="RDS-Security"><a href="#RDS-Security" class="headerlink" title="RDS Security"></a>RDS Security</h4><ul><li>静态加密 (At-rest Encryption)<ul><li>使用 AWS KMS 加密数据库和备份</li><li>必须在创建时启用</li><li>无法加密现有未加密的数据库</li></ul></li><li>传输加密 (In-flight Encryption)<ul><li>使用 TLS&#x2F;SSL 证书</li><li>强制客户端使用 SSL 连接</li></ul></li><li>IAM Authentication<ul><li>使用 IAM 角色连接数据库</li><li>无需密码, 使用认证令牌</li><li>令牌有效期 15 分钟</li><li>支持 MySQL 和 PostgreSQL</li></ul></li><li>Security Groups<ul><li>控制网络访问</li><li>定义允许的 IP 和端口</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img133048.png"></p><hr><h4 id="RDS-Proxy"><a href="#RDS-Proxy" class="headerlink" title="RDS Proxy"></a>RDS Proxy</h4><ul><li>功能: 数据库连接代理<ul><li>连接池和复用, 减少数据库打开的连接数</li><li>提高数据库效率, 降低数据库压力</li><li>故障转移时间减少 66%</li><li>强制使用 IAM 身份验证</li></ul></li><li>特性<ul><li>Serverless, 自动扩展</li><li>高可用 (Multi-AZ)</li><li>仅 VPC 内访问 (非公开访问, 重要)</li></ul></li><li>适用场景<ul><li>Lambda 函数连接数据库 (避免连接数耗尽)</li><li>连接数高的应用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184531.png"></p><hr><h4 id="AWS-ElastiCache"><a href="#AWS-ElastiCache" class="headerlink" title="AWS ElastiCache"></a>AWS ElastiCache</h4><ul><li>托管的内存数据库服务: Redis 或 Memcached<ul><li>解决数据库高频读取问题</li><li>高性能、低延迟</li><li>减轻数据库读密集型工作负载</li><li>帮助应用无状态化</li></ul></li><li>限制<ul><li>不支持关系型数据库功能</li><li>不支持 SQL 查询</li><li>不用于 S3 缓存 (S3 使用 CloudFront)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184841.png"></p><ul><li>使用场景 1: 数据库缓存<ul><li>先查询 ElastiCache</li><li>未命中则从 RDS 读取并存入缓存</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185024.png"></p><ul><li>使用场景 2: 用户会话存储<ul><li>将会话数据写入 ElastiCache</li><li>其他实例可共享会话, 保持用户登录状态</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185153.png"></p><ul><li>Redis vs Memcached<ul><li>Redis<ul><li>支持 Read Replicas (集群模式禁用时最多 5 个)</li><li>高可用 (Multi-AZ)</li><li>持久化: 备份和恢复</li><li>数据类型丰富: 列表、集合、排序集合等</li><li>单线程</li></ul></li><li>Memcached<ul><li>无高可用</li><li>无持久化, 有数据丢失风险</li><li>数据类型简单</li><li>支持多线程</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185310.png"></p><ul><li>Redis Cluster 限制<ul><li>所有节点必须在同一 Region</li><li>集群模式启用时, 无法手动提升副本为主节点</li></ul></li></ul><hr><h4 id="ElastiCache-Strategies"><a href="#ElastiCache-Strategies" class="headerlink" title="ElastiCache Strategies"></a>ElastiCache Strategies</h4><ul><li>Lazy Loading (延迟加载 &#x2F; Cache-Aside)<ul><li>机制: 仅在请求时加载数据到缓存</li><li>优点: 只缓存请求的数据, 节省内存</li><li>缺点<ul><li>缓存未命中时需要 3 次往返 (读缓存 → 读数据库 → 写缓存)</li><li>可能存在过期数据</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200816.png"></p><ul><li>Write Through (写入式)<ul><li>机制: 写入数据库时同时写入缓存</li><li>优点: 缓存数据始终最新, 读延迟低</li><li>缺点<ul><li>写入需要 2 次调用, 写延迟高</li><li>数据库中新增或更新前缓存中没有数据</li><li>可能缓存大量不常用数据</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201308.png"></p><ul><li>Cache Eviction (缓存淘汰) 和 TTL<ul><li>Cache Eviction: 缓存达到上限时的数据清理策略<ul><li>LRU (Least Recently Used): 删除最少使用的数据</li><li>LFU (Least Frequently Used): 删除使用频率最低的数据</li></ul></li><li>TTL (Time-to-Live): 设置数据过期时间<ul><li>防止数据过期</li><li>平衡数据新鲜度和缓存效率</li><li>建议: 根据应用需求设置合适的 TTL</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201512.png"></p><hr><h4 id="MemoryDB-for-Redis"><a href="#MemoryDB-for-Redis" class="headerlink" title="MemoryDB for Redis"></a>MemoryDB for Redis</h4><ul><li>Redis 兼容的持久化内存数据库服务</li><li>特性<ul><li>持久化内存数据存储</li><li>Multi-AZ 事务日志</li><li>微秒级读延迟, 个位数毫秒写延迟</li></ul></li><li>与 ElastiCache for Redis 的区别<ul><li>MemoryDB: 持久化, 可作为主数据库</li><li>ElastiCache: 缓存, 数据可能丢失</li></ul></li><li>使用场景: 需要持久化的高性能数据库 (Web&#x2F;移动应用, 游戏排行榜等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201727.png"></p><hr><h3 id="7-Route-53"><a href="#7-Route-53" class="headerlink" title="7. Route 53"></a>7. Route 53</h3><h4 id="What’s-DNS"><a href="#What’s-DNS" class="headerlink" title="What’s DNS"></a>What’s DNS</h4><ul><li>DNS (Domain Name System) 将域名解析为 IP 地址 (如 <code>www.google.com</code> → <code>172.217.18.36</code>)</li><li>分层结构 - 根域名服务器 → 顶级域名服务器 → 权威域名服务器</li><li>缓存提高解析速度, 减少查询次数</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213136.png"></p><hr><h4 id="AWS-Route-53"><a href="#AWS-Route-53" class="headerlink" title="AWS Route 53"></a>AWS Route 53</h4><ul><li>AWS 托管 DNS 服务 - 高可用、可扩展, 支持域名注册和 DNS 记录更新</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213527.png"></p><ul><li>DNS 记录组成 - 域名 (Domain Name), 记录类型 (Record Type), 值 (Value), 路由策略 (Routing Policy), TTL (Time To Live)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213613.png"></p><ul><li>记录类型<ul><li>A - 域名映射到 IPv4 地址</li><li>AAAA - 域名映射到 IPv6 地址</li><li>CNAME - 域名映射到另一个域名 (不能用于根域名)</li><li>NS - 托管区域的名称服务器</li><li>MX - 邮件服务器</li><li>TXT - 文本记录 (验证、SPF 等)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213753.png"></p><ul><li><strong>Hosted Zones</strong> (托管区域)<ul><li>Public Hosted Zones - 公共域名, 互联网可访问</li><li>Private Hosted Zones - 私有域名, 仅 VPC 内访问, - VPC 必须启用 DNS hostnames 和 DNS resolution</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234126.png"></p><ul><li>第三方域名注册商集成 (如 GoDaddy) - 在 Route 53 创建 Public Hosted Zone, 在第三方注册商更新 NS 记录指向 Route 53</li><li><strong>Health Check</strong> (健康检查) - 监控终端节点健康状态, 与路由策略集成实现故障转移, - ELB 故障时切换到备用资源</li></ul><hr><h4 id="Route-53-TTL"><a href="#Route-53-TTL" class="headerlink" title="Route 53 TTL"></a>Route 53 TTL</h4><ul><li>TTL (Time To Live) - DNS 记录的缓存时间, 定义客户端缓存 DNS 解析结果的时长</li><li><ul><li>后端更新不会立即生效, 需等待 TTL 过期</li></ul></li><li>高 TTL (如 24 小时) - 减少 Route 53 查询成本但更新生效慢</li><li>低 TTL (如 60 秒) - 更新生效快但查询成本高</li><li>修改记录前先降低 TTL, 等待生效后再修改</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232659.png"></p><hr><h4 id="CNAME-vs-Alias"><a href="#CNAME-vs-Alias" class="headerlink" title="CNAME vs Alias"></a>CNAME vs Alias</h4><ul><li><strong>CNAME</strong> (Canonical Name) - 将一个域名指向另一个域名, 不能用于根域名 (如 example.com), 需要付费查询</li><li><strong>Alias</strong> (别名记录)<ul><li>将域名指向 AWS 资源</li><li><ul><li>可用于根域名, 免费查询, 自动识别 AWS 资源 IP 变化</li></ul></li><li>支持目标 - ELB, CloudFront, S3, API Gateway, Elastic Beanstalk 等</li><li>限制不支持 EC2 DNS 名称</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233313.png"></p><hr><h4 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h4><ul><li><ul><li>仅适用于公共资源</li></ul></li><li><ul><li>检查类型</li><li><strong>Endpoint Health Checks</strong> - 监控端点健康状态 (HTTP, HTTPS, TCP), 默认每 30 秒检查一次 (可设置为 10 秒但费用更高), 18% 以上检查者报告健康则判定为健康</li><li><strong>Calculated Health Checks</strong> - 组合多个健康检查, 支持 OR, AND, NOT 逻辑, 可监控最多 256 个子健康检查</li><li><strong>CloudWatch Alarm Health Checks</strong> - 基于 CloudWatch 指标, 适用于私有资源监控</li></ul></li><li>与路由策略集成实现自动故障转移</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000106.png"></p><hr><h4 id="Routing-Policy-Simple"><a href="#Routing-Policy-Simple" class="headerlink" title="Routing Policy (Simple)"></a>Routing Policy (Simple)</h4><ul><li>共 7 种路由策略 - Simple, Weighted, Latency, Failover, Geolocation, Geoproximity, Multi-Value</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234623.png"></p><ul><li><strong>Simple</strong> (简单路由) - 将流量路由到单个资源, 可返回多个值 (客户端随机选择), 不支持健康检查, 用于单个资源或不需要流量控制的简单场景</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234350.png"></p><hr><h4 id="Routing-Policy-Weighted"><a href="#Routing-Policy-Weighted" class="headerlink" title="Routing Policy (Weighted)"></a>Routing Policy (Weighted)</h4><ul><li><strong>Weighted</strong> (加权路由) - 按百分比控制流量分配到各个资源</li><li>计算 - 权重 &#x3D; 特定记录权重 &#x2F; 所有记录权重总和</li><li>支持健康检查 (不健康的资源不接收流量)</li><li>使用场景 - A&#x2F;B 测试, 跨区域负载均衡, 金丝雀发布 (逐步迁移流量)</li><li>设置权重为 0 停止向该资源发送流量</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234856.png"></p><hr><h4 id="Routing-Policy-Latency"><a href="#Routing-Policy-Latency" class="headerlink" title="Routing Policy (Latency)"></a>Routing Policy (Latency)</h4><ul><li><strong>Latency</strong> (延迟路由) - 将用户重定向到延迟最低的资源</li><li>延迟基准 - 用户与 AWS Region 之间的网络延迟</li><li>支持健康检查 (自动切换到次优延迟资源)</li><li>使用场景 - 全球分布的应用, 需要最佳用户体验的服务, 跨区域部署的应用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235654.png"></p><hr><h4 id="Routing-Policy-Failover"><a href="#Routing-Policy-Failover" class="headerlink" title="Routing Policy (Failover)"></a>Routing Policy (Failover)</h4><ul><li><strong>Failover</strong> (故障转移路由) - 主实例 (Primary) + 备用实例 (Secondary)</li><li>主实例不健康时自动切换到备用实例</li><li><ul><li>仅支持 Active-Passive 模式, 不支持 Active-Active</li></ul></li><li>必须配置健康检查监控主实例</li><li>使用场景 - 灾难恢复, 维护窗口切换, 主备站点架构</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150940.png"></p><hr><h4 id="Routing-Policy-Geolocation"><a href="#Routing-Policy-Geolocation" class="headerlink" title="Routing Policy (Geolocation)"></a>Routing Policy (Geolocation)</h4><ul><li><strong>Geolocation</strong> (地理位置路由) - 基于用户地理位置路由流量</li><li>位置粒度 - 洲 &gt; 国家 &gt; 州 (美国)</li><li><ul><li>必须创建”默认”记录处理未匹配的位置</li></ul></li><li>支持健康检查 (位置不健康时使用下一优先级位置)</li><li>使用场景 - 网站本地化 (不同国家显示不同语言), 内容分发限制 (版权地域限制), 负载均衡基于用户位置</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151650.png"></p><hr><h4 id="Routing-Policy-Geoproximity"><a href="#Routing-Policy-Geoproximity" class="headerlink" title="Routing Policy (Geoproximity)"></a>Routing Policy (Geoproximity)</h4><ul><li><strong>Geoproximity</strong> (地理邻近路由) - 基于用户和资源的地理位置路由流量</li><li><ul><li><strong>Bias</strong> (偏移值)</li><li>范围 -99 到 99</li><li>正值 - 扩大地理区域, 吸引更多流量</li><li>负值 - 缩小地理区域, 减少流量</li></ul></li><li>资源位置可设为 AWS Region 或自定义经纬度坐标</li><li>使用场景 - 精细控制区域流量分配, 逐步迁移用户到新区域, 平衡跨区域负载</li><li>必须使用 Route 53 Traffic Flow</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152310.png"></p><hr><h4 id="Routing-Policy-Traffic-Flow"><a href="#Routing-Policy-Traffic-Flow" class="headerlink" title="Routing Policy (Traffic Flow)"></a>Routing Policy (Traffic Flow)</h4><ul><li><strong>Traffic Flow</strong> - 可视化编辑器管理复杂路由决策树</li><li>图形化界面创建路由策略, 支持多种路由策略组合 (Geoproximity, Latency, Weighted 等)</li><li>配置可保存为 Traffic Flow Policy, 策略可应用到不同的 Hosted Zone (重用), 支持策略版本管理</li><li>使用场景 - 复杂的全球流量路由, 需要组合多种路由策略, 多环境部署 (开发、测试、生产)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224018.png"></p><hr><h4 id="Routing-Policy-IP-Based"><a href="#Routing-Policy-IP-Based" class="headerlink" title="Routing Policy (IP-Based)"></a>Routing Policy (IP-Based)</h4><ul><li><strong>IP-Based</strong> (IP 路由) - 基于客户端 IP 地址路由流量</li><li>定义 CIDR 块列表和对应的位置&#x2F;端点, 匹配最具体的 CIDR 块</li><li>使用场景 - 根据 ISP 优化性能, 按 IP 范围限制访问, 企业内部流量路由 (特定办公室到特定资源), 成本优化 (不同 IP 段使用不同端点)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153711.png"></p><hr><h4 id="Routing-Policy-Multi-Value"><a href="#Routing-Policy-Multi-Value" class="headerlink" title="Routing Policy (Multi-Value)"></a>Routing Policy (Multi-Value)</h4><ul><li><strong>Multi-Value</strong> (多值路由) - 返回多个健康资源的 IP 地址 (最多 8 个), 客户端随机选择一个返回的 IP</li><li>支持健康检查 (仅返回健康资源)</li><li>与 Simple 路由的区别 - Multi-Value 支持健康检查</li><li><ul><li>不能替代 ELB (没有负载均衡功能, 没有会话保持)</li></ul></li><li>使用场景 - 客户端侧负载均衡, 提高可用性</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153842.png"></p><hr><h3 id="8-VPC-Fundamentals"><a href="#8-VPC-Fundamentals" class="headerlink" title="8. VPC Fundamentals"></a>8. VPC Fundamentals</h3><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><ul><li>VPC (Virtual Private Cloud) - 虚拟私有云, 每个 AWS 账户都有一个默认 VPC, 逻辑隔离的网络环境</li><li><ul><li>CIDR 配置 - CIDR 块不能重叠, 最大 &#x2F;16 (65,536 个 IP), 最小 &#x2F;28 (16 个 IP)</li></ul></li><li>自定义域名需要启用 <code>enableDnsHostnames</code> 和 <code>enableDnsSupport</code></li><li><ul><li><strong>Shared Service VPC</strong> - 集中式服务 VPC, 其他 VPC 通过 VPC Peering 或 Transit Gateway 访问共享服务, 用于共享 Active Directory、监控服务等</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201530.png"></p><ul><li><ul><li>EC2 实例租赁属性 (Tenancy) - Default (共享硬件), Dedicated Instance (专用实例独占硬件但不绑定物理服务器), Dedicated Host (专用主机绑定物理服务器), 可以在 Dedicated Instance 和 Dedicated Host 之间切换</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042420.png"></p><hr><h4 id="VPC-Subnet"><a href="#VPC-Subnet" class="headerlink" title="VPC Subnet"></a>VPC Subnet</h4><ul><li>在 VPC 内划分网络 - Public Subnet (可通过 Internet Gateway 访问互联网), Private Subnet (无法直接访问互联网)</li><li><ul><li>AWS 保留 IP - 每个子网保留 5 个 IP 地址 (前 4 个 + 最后 1 个)</li><li>示例 10.0.0.0&#x2F;24 - 10.0.0.0 (网络地址), 10.0.0.1 (VPC 路由器), 10.0.0.2 (DNS 服务器), 10.0.0.3 (AWS 保留供将来使用), 10.0.0.255 (网络广播地址)</li></ul></li><li><ul><li>路由表关联 - 每个子网必须关联一个路由表, 未显式关联时使用主路由表</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013421.png"></p><hr><h4 id="Internet-Gateway-IGW-amp-Route-Table"><a href="#Internet-Gateway-IGW-amp-Route-Table" class="headerlink" title="Internet Gateway (IGW) &amp; Route Table"></a>Internet Gateway (IGW) &amp; Route Table</h4><ul><li><strong>Internet Gateway (IGW)</strong> - - 允许 VPC 中的资源连接互联网, 水平扩展、冗余、高可用, 提供 NAT 功能, 每个 VPC 只能关联一个 IGW</li><li><ul><li>使用要求 - 必须配置路由表将 0.0.0.0&#x2F;0 指向 IGW, 资源必须有公网 IP 或 Elastic IP, 安全组必须允许互联网流量</li></ul></li><li><ul><li>不能直接用于 Private Subnet, Private Subnet 需要通过 NAT Gateway&#x2F;Instance</li></ul></li><li><ul><li>IGW vs NAT - IGW (VPC 级别, 用于 Public Subnet), NAT (Subnet 级别, 用于 Private Subnet 访问互联网)</li></ul></li><li>故障排查 - 首先检查路由表配置, 检查安全组和 NACL 规则, 确认实例有公网 IP</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202043.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193121.png"></p><hr><h4 id="NAT-Gateway-NATGW"><a href="#NAT-Gateway-NATGW" class="headerlink" title="NAT Gateway (NATGW)"></a>NAT Gateway (NATGW)</h4><ul><li>NAT Gateway - AWS 托管的 NAT 服务, 允许 Private Subnet 中的实例访问互联网, 协议 IPv4 (IPv6 使用 Egress-only Internet Gateway), 使用 Elastic IP</li><li><ul><li>部署要求 - 必须部署在 Public Subnet 中, 需要 Internet Gateway (IGW), Private Subnet 路由表指向 NATGW</li></ul></li><li>单 AZ 内高可用 (自动冗余), - 跨 AZ 需要在每个 AZ 部署独立的 NATGW, 每个 AZ 一个 NATGW 提供容错能力</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233648.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203654.png"></p><ul><li><ul><li>NAT Gateway vs Internet Gateway - NATGW (Subnet 级别, Private Subnet 访问互联网), IGW (VPC 级别, Public Subnet 双向互联网访问)</li></ul></li></ul><hr><h4 id="NACL-amp-Security-Groups"><a href="#NACL-amp-Security-Groups" class="headerlink" title="NACL &amp; Security Groups"></a>NACL &amp; Security Groups</h4><ul><li>流量控制层级 - NACL (Subnet 级别无状态 Stateless, 入站和出站流量分别检查), Security Group (实例级别有状态 Stateful, 入站允许则出站自动允许)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204310.png"></p><ul><li><strong>Network Access Control List (NACL)</strong> - 控制进出子网的流量 (如阻止特定 IP), 一个子网关联一个 NACL</li><li><ul><li>默认 NACL 允许所有入站和出站流量</li></ul></li><li><ul><li>自定义 NACL 默认拒绝所有入站和出站流量</li></ul></li><li>规则优先级 - 规则编号越小优先级越高, 按顺序匹配匹配后停止, 建议编号间隔 (如 100, 200, 300) 便于插入新规则</li><li>使用场景 - 封禁特定 IP, 子网级别的访问控制</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204553.png"></p><hr><h4 id="VPC-Flow-Logs"><a href="#VPC-Flow-Logs" class="headerlink" title="VPC Flow Logs"></a>VPC Flow Logs</h4><ul><li>捕获网络接口的 IP 流量信息, 监控和排查网络连接问题, 分析网络流量模式, 检测异常流量和安全威胁</li><li>日志级别 - VPC (捕获整个 VPC 的流量), Subnet (捕获子网内所有接口的流量), ENI (捕获特定网络接口的流量)</li><li>目标 - CloudWatch Logs, S3 (成本更低), Kinesis Data Firehose</li><li>使用场景 - 排查安全组或 NACL 规则问题, 识别被拒绝的连接, 分析流量趋势, 合规性审计</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231819.png"></p><hr><h4 id="VPC-Peering"><a href="#VPC-Peering" class="headerlink" title="VPC Peering"></a>VPC Peering</h4><ul><li>VPC Peering - 通过 AWS 网络私密连接两个 VPC, - 适用于少量 VPC 互连, 不支持传递性 (A-B, B-C 不代表 A-C 连通), 每对 VPC 需要单独的 Peering 连接</li><li>限制 - CIDR 块不能重叠, 不支持边缘到边缘路由</li><li>跨账户&#x2F;跨区域 - 支持不同 AWS 账户之间的 VPC Peering, 支持不同 Region 之间的 VPC Peering</li><li><ul><li>配置要求 - 两侧 VPC 都需要更新路由表, 安全组可引用对端 VPC 的安全组</li></ul></li><li>故障排查 - 首先检查双方路由表配置, 检查安全组和 NACL 规则</li><li>使用场景 - 2-3 个 VPC 互连, 跨账户资源共享</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205313.png"></p><hr><h4 id="VPC-Sharing"><a href="#VPC-Sharing" class="headerlink" title="VPC Sharing"></a>VPC Sharing</h4><ul><li>VPC Sharing - 允许多个 AWS 账户在共享的集中管理 VPC 中创建资源, - 关键词 Centrally Managed</li><li>工作方式 - VPC 所有者 (Owner) 共享一个或多个子网给参与者, 参与者 (Participant) 可在共享子网中创建资源 (EC2, RDS 等)</li><li>所有者保留 VPC 和子网的所有权和控制权, 参与者只能在共享子网中创建、管理、删除自己的资源, 共享子网中的资源可以互相通信</li><li>优势 - 减少 VPC 数量简化网络架构, 集中管理网络配置 (路由表、NACL 等), 降低成本 (共享 NAT Gateway 等)</li><li>使用场景 - 大型组织内多账户资源共享, 集中式网络管理</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img824817.png"></p><hr><h4 id="VPC-Endpoints-AWS-PrivateLink"><a href="#VPC-Endpoints-AWS-PrivateLink" class="headerlink" title="VPC Endpoints (AWS PrivateLink)"></a>VPC Endpoints (AWS PrivateLink)</h4><ul><li><ul><li>VPC Endpoints - 通过私有网络访问 AWS 服务, 流量不经过公网保持在 AWS 网络内, 提高安全性降低延迟, 无需 Internet Gateway、NAT Gateway 或 VPN</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205719.png"></p><ul><li>两种类型<ul><li><strong>Interface Endpoint</strong> (接口端点) - 使用 AWS PrivateLink 技术, 在子网中创建 ENI (弹性网络接口), 支持大部分 AWS 服务 (EC2, SNS, SQS, CloudWatch 等), 收费按小时和数据传输量计费, 需要配置安全组</li><li><ul><li><strong>Gateway Endpoint</strong> (网关端点) - 仅支持 S3 和 DynamoDB (考试重点), 作为路由表中的目标, 免费, 不使用 ENI, 不需要配置安全组</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205939.png"></p><ul><li>使用场景 - Private Subnet 访问 S3&#x2F;DynamoDB 使用 Gateway Endpoint, Private Subnet 访问其他 AWS 服务使用 Interface Endpoint, 满足合规要求避免流量经过公网</li></ul><hr><h4 id="Site-to-Site-VPN-VPN-Connection"><a href="#Site-to-Site-VPN-VPN-Connection" class="headerlink" title="Site-to-Site VPN (VPN Connection)"></a>Site-to-Site VPN (VPN Connection)</h4><ul><li><ul><li>Site-to-Site VPN - 通过公网连接 AWS 和企业数据中心, 连接方向 On-Premise ↔ AWS VPC, 传输方式通过公共互联网, 提供加密的网络连接</li></ul></li><li>组件 - Virtual Private Gateway (VGW) AWS 侧的 VPN 集中器附加到 VPC, Customer Gateway (CGW) 企业数据中心侧的设备或软件</li><li>特性 - 快速部署 (几分钟内完成), 成本低, 加密传输</li><li>限制 - 依赖公网带宽和延迟不稳定, 不提供低延迟和高吞吐量 (对比 Direct Connect)</li><li>使用场景 - 临时连接需求, 低流量应用, 成本敏感的场景, Direct Connect 的备份连接</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232320.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232649.png"></p><hr><h4 id="Direct-Connect-DX"><a href="#Direct-Connect-DX" class="headerlink" title="Direct Connect (DX)"></a>Direct Connect (DX)</h4><ul><li><ul><li>Direct Connect - 从本地网络到 AWS 的专用私有连接, 连接方式通过专线不经过公网, 关键词 Private, Dedicated, Low Latency, High Throughput</li></ul></li><li>组件 - 需要 Virtual Private Gateway (VGW), 在 AWS Direct Connect Location 建立物理连接</li><li>特性 - 低延迟高吞吐量 (对比 Site-to-Site VPN), 带宽稳定网络性能一致, 可访问公共资源 (S3) 和私有资源 (EC2), - 流量完全私有不涉及公网</li><li><ul><li>限制 - 不提供加密 (需要加密可结合 AWS VPN 使用), 设置时间长 (不是快速解决方案), 成本较高</li></ul></li><li>备份方案 - Site-to-Site VPN (这两个服务类似)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233024.png"></p><ul><li>连接类型 - Dedicated Connections (专用连接 1 Gbps, 10 Gbps, 100 Gbps), Hosted Connections (托管连接 50 Mbps 到 10 Gbps)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004140.png"></p><ul><li><strong>Direct Connect Gateway</strong> - 连接多个不同 Region 的 VPC, 单一 DX 连接访问多个 VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233531.png"></p><ul><li><strong>PrivateLink vs Direct Connect</strong><ul><li>PrivateLink - VPC 与 AWS 服务之间的私有连接, 范围 AWS 内部 (VPC ↔ AWS 服务), 不经过公网</li><li>Direct Connect - 本地数据中心与 AWS 的专用连接, 范围 On-Premise ↔ AWS, 超高速数据传输低延迟, 不经过公网提高安全性</li></ul></li></ul><hr><h3 id="9-S3"><a href="#9-S3" class="headerlink" title="9. S3"></a>9. S3</h3><h4 id="AWS-S3"><a href="#AWS-S3" class="headerlink" title="AWS S3"></a>AWS S3</h4><ul><li><strong>S3 Buckets</strong> - 存储对象 (文件) 的容器, Bucket 名称必须全球唯一, 在 Region 级别定义 (S3 是全球服务但 Bucket 是区域性的)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171839.png"></p><ul><li><strong>Objects</strong> (对象) - 由 Key (完整路径) 标识, 最大对象大小 5 TB, 单次上传最大 5 GB</li><li><ul><li>超过 5 GB 必须使用 Multi-Part Upload</li></ul></li><li>加速上传使用 S3 Transfer Acceleration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172025.png"></p><ul><li>Serverless 自动扩展, - 始终返回对象的最新版本</li><li>无法加密 Metadata</li><li>S3 Sync 使用 CopyObject API 在 S3 Bucket 间复制对象</li><li><ul><li><strong>对象所有权</strong> (S3 Object Ownership)</li><li>默认上传对象的 AWS 账户拥有对象 (即使 Bucket 属于其他账户)</li><li>可通过 Bucket 设置控制新上传对象的所有权</li><li>要获取对象访问日志, 对象所有者必须是 Bucket 所有者</li></ul></li><li>数据一致性模型 - 删除对象后立即读取不返回数据 (已删除), 删除 Bucket 后立即列出所有 Bucket 时已删除的 Bucket 可能仍显示</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imglifecycle-transitions-v2.png"></p><ul><li>访问控制 - Bucket Policies, IAM Policies, Access Control Lists (ACLs), Query String Authentication (预签名 URL)</li><li>常见场景<ul><li><ul><li>静态内容托管使用 S3 + CloudFront</li></ul></li><li><ul><li>图片上传处理使用 S3 Event Notification (不是 EventBridge)</li></ul></li><li>传输性能优化使用 Bucket Prefix 分区</li></ul></li><li>S3 不是数据库, 不提供数据库功能</li></ul><hr><h4 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h4><ul><li><strong>User-Based</strong> (基于用户) - - IAM Policies 控制特定 IAM 用户&#x2F;角色可以调用哪些 S3 API</li><li><strong>Resource-Based</strong> (基于资源) - Bucket Policies (Bucket 级别访问规则), Object ACLs (对象级别), Bucket ACLs (Bucket 级别, 不常用)</li><li>IAM 权限与 Bucket Policy 的并集决定最终访问权限, 显式 DENY 优先于所有 ALLOW</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173050.png"></p><ul><li><strong>S3 Bucket Policy</strong> (JSON 格式) - Resources (指定 Bucket 和 Object ARN), Effect (Allow 或 Deny), Actions (允许或拒绝的 S3 API 操作), Principal (应用策略的账户或用户), Condition (可选条件限制)</li><li>常见使用场景 - 授予公共访问权限, 跨账户访问, 强制加密上传, 限制 IP 地址访问</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173325.png"></p><hr><h4 id="S3-Website"><a href="#S3-Website" class="headerlink" title="S3 Website"></a>S3 Website</h4><ul><li>S3 静态网站托管 - 托管静态网站 (HTML, CSS, JavaScript), 必须启用公共读取访问权限</li><li>网站 URL 格式 - <code>http://bucket-name.s3-website-Region.amazonaws.com</code> (dash) 或 <code>http://bucket-name.s3-website.Region.amazonaws.com</code> (dot)</li><li>配置 - 索引文档 index.html, 错误文档 error.html (可选)</li><li>使用场景 - 静态网站托管, 配合 CloudFront 提供 HTTPS 和全球加速, 单页应用 (SPA) 托管</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img043622.png"></p><hr><h4 id="S3-Versioning"><a href="#S3-Versioning" class="headerlink" title="S3 Versioning"></a>S3 Versioning</h4><ul><li>版本控制 Bucket 级别设置 (默认状态未启用)</li><li>版本状态 - Unversioned (未版本化默认), Enabled (已启用), Suspended (已暂停)</li><li><ul><li>启用后无法返回未版本化状态只能暂停, 应用于 Bucket 中的所有对象无法指定文件夹, 每次修改生成新版本 ID</li></ul></li><li>优势 - 防止意外删除 (删除添加删除标记可恢复), 支持回滚到之前版本, 建议启用版本控制</li><li>删除行为 - 删除对象添加删除标记不真正删除, 删除删除标记恢复对象, 永久删除需删除特定版本 ID</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174246.png"></p><hr><h4 id="S3-Replication-CRR-amp-SRR"><a href="#S3-Replication-CRR-amp-SRR" class="headerlink" title="S3 Replication (CRR &amp; SRR)"></a>S3 Replication (CRR &amp; SRR)</h4><ul><li><strong>CRR</strong> (Cross-Region Replication) - 跨区域复制, 用于合规要求、降低延迟、跨区域备份</li><li><strong>SRR</strong> (Same-Region Replication) - 同区域复制, 用于日志聚合、测试&#x2F;开发环境、数据副本</li><li><ul><li>前提条件 - 源和目标 Bucket 必须启用版本控制, 必须授予 S3 IAM 权限, Bucket 可以在不同 AWS 账户</li></ul></li><li>异步复制, 仅复制新对象 (启用复制后上传的对象), 现有对象需要使用 S3 Batch Replication</li><li><ul><li>不支持链式复制 (无传递性)</li><li>示例 - A→B, B→C, A 的对象不会复制到 C</li><li>需要 A→B 和 A→C 两个独立复制配置</li><li>不复制删除标记 (可配置), 不复制生命周期操作</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174840.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175004.png"></p><hr><h4 id="S3-Storage-Classes"><a href="#S3-Storage-Classes" class="headerlink" title="S3 Storage Classes"></a>S3 Storage Classes</h4><ul><li>7 种存储类别 - Standard + 2 个 IA + 3 个 Glacier + Intelligent-Tiering</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175742.png"></p><ul><li><strong>S3 Standard - General Purpose</strong> - 频繁访问的数据, 低延迟高吞吐量, 可用性 99.99%, 用于大数据分析、移动应用、内容分发</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175932.png"></p><ul><li><strong>S3 Infrequent Access (IA)</strong> - - 不频繁访问但需要快速检索的数据, 比 Standard 低但有检索费用<ul><li><strong>Standard-IA</strong> - 多 AZ 高可用, 可用性 99.9%, 最小存储期限 30 天, 用于灾难恢复、备份</li><li><strong>One Zone-IA</strong> - 单 AZ 比 Standard-IA 低 20%, 可用性 99.5%, - 不适合高可用场景 (AZ 故障会导致数据不可用), 最小存储期限 30 天, 用于次要备份、可重新创建的数据</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180147.png"></p><ul><li><strong>S3 Glacier</strong> (归档存储) - 长期归档和备份, 定价 &#x3D; 存储费用 + 检索费用<ul><li><strong>Glacier Instant Retrieval</strong> - 毫秒级检索, Glacier 中成本最高, 最小存储期限 90 天, 用于季度访问的归档数据</li><li><strong>Glacier Flexible Retrieval</strong> - 检索模式 Expedited (1-5 分钟), Standard (3-5 小时), Bulk (5-12 小时最便宜), 最小存储期限 90 天, 用于备份、不需要即时访问的数据</li><li><strong>Glacier Deep Archive</strong> - 最低成本存储类别, 检索 Standard (12 小时), Bulk (48 小时), 最小存储期限 180 天, 用于长期保留 (7-10 年)、合规归档</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180642.png"></p><ul><li><strong>S3 Intelligent-Tiering</strong> - 根据访问模式自动在访问层之间移动对象, 无检索费用但有小额监控费用</li><li>访问层 - Frequent Access (默认), Infrequent Access (30 天未访问), Archive Instant Access (90 天未访问), Archive Access (可选 90-730 天未访问), Deep Archive Access (可选 180-730 天未访问)</li><li>适用于访问模式不可预测或变化的数据</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180806.png"></p><hr><h3 id="10-AWS-CLI-SDK-IAM-Roles-amp-Policies"><a href="#10-AWS-CLI-SDK-IAM-Roles-amp-Policies" class="headerlink" title="10. AWS CLI, SDK, IAM Roles &amp; Policies"></a>10. AWS CLI, SDK, IAM Roles &amp; Policies</h3><h4 id="EC2-Instance-Metadata-IMDS"><a href="#EC2-Instance-Metadata-IMDS" class="headerlink" title="EC2 Instance Metadata (IMDS)"></a>EC2 Instance Metadata (IMDS)</h4><ul><li>Instance Metadata 允许 EC2 实例获取自身信息, 无需 IAM 角色</li><li>AWS CLI 使用 Instance Metadata 获取临时凭证, 获取实例信息 (主机名, 公网 IP, 安全组等)</li><li>Metadata 是 EC2 实例的信息 (无法获取 IAM Policy), Userdata 是 EC2 实例的启动脚本</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150522.png"></p><ul><li><strong>IMDSv1</strong> (不推荐) - 直接 HTTP GET 请求 <code>http://169.254.169.254/latest/meta-data</code>, 安全性较低</li><li><strong>IMDSv2</strong> (推荐, 更安全) - 两步流程: 先获取会话令牌 (PUT 请求), 再使用令牌访问元数据 (GET 请求), 防止 SSRF 攻击, 可强制仅使用 IMDSv2</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150716.png"></p><hr><h4 id="MFA-with-CLI"><a href="#MFA-with-CLI" class="headerlink" title="MFA with CLI"></a>MFA with CLI</h4><ul><li>CLI 使用 MFA 必须创建临时会话</li><li>调用 STS GetSessionToken API, 提供 MFA 设备的序列号和令牌代码</li><li>返回临时凭证 (Access Key, Secret Key, Session Token), 有效期默认 12 小时 (可配置 15 分钟到 36 小时)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151057.png"></p><ul><li>使用 <code>aws --dry-run</code> 测试 IAM 权限, 不实际执行操作仅验证权限</li></ul><hr><h4 id="AWS-SDK"><a href="#AWS-SDK" class="headerlink" title="AWS SDK"></a>AWS SDK</h4><ul><li>AWS SDK (Software Development Kit) 在应用代码中直接调用 AWS 服务</li><li>支持语言 - Python (Boto3), Java, JavaScript (Node.js), .NET, PHP, Ruby, Go, C++ 等</li><li>凭证配置优先级<ol><li>代码中的凭证 (不推荐, 安全风险)</li><li>环境变量 (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>)</li><li>CLI 凭证文件 (<code>~/.aws/credentials</code>)</li><li>EC2 实例配置文件 (IAM Role, 推荐)</li></ol></li><li><ul><li>未配置时默认使用 <code>us-east-1</code>, 建议显式配置 Region</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151356.png"></p><hr><h4 id="AWS-Limits-Quotas"><a href="#AWS-Limits-Quotas" class="headerlink" title="AWS Limits (Quotas)"></a>AWS Limits (Quotas)</h4><ul><li><strong>API Rate Limits</strong> (API 速率限制)<ul><li>间歇性错误 - 使用指数退避 (Exponential Backoff) 重试, AWS SDK 内置此机制</li><li>持续性错误 - 请求提高 API 限流阈值, 通过 AWS Support 提交申请</li></ul></li><li><strong>Service Quotas</strong> (服务配额) - 提交工单申请提高服务限制, 使用 Service Quotas API 编程方式请求增加配额</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151813.png"></p><ul><li><ul><li><strong>Exponential Backoff</strong> (指数退避)</li><li>收到 <code>ThrottlingException</code> 间歇性错误时触发</li><li>工作原理 - 第一次重试等待 1 秒, 第二次 2 秒, 第三次 4 秒, 依此类推指数增长</li><li>AWS SDK 自动实现</li><li>仅对 5xx 错误重试 (服务器错误), 不对 4xx 错误重试 (客户端错误如权限问题)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152100.png"></p><hr><h4 id="AWS-CLI-Credentials-Provider-Chain"><a href="#AWS-CLI-Credentials-Provider-Chain" class="headerlink" title="AWS CLI Credentials Provider Chain"></a>AWS CLI Credentials Provider Chain</h4><ul><li><ul><li>CLI 凭证查找顺序</li></ul><ol><li>命令行选项 (<code>--region</code>, <code>--output</code>, <code>--profile</code>)</li><li>环境变量 (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_SESSION_TOKEN</code>)</li><li>CLI 凭证文件 (<code>~/.aws/credentials</code> Linux&#x2F;Mac, <code>%UserProfile%\.aws\credentials</code> Windows)</li><li>CLI 配置文件 (<code>~/.aws/config</code>)</li><li>容器凭证 (ECS 任务的 IAM 角色)</li><li>EC2 实例配置文件凭证 (EC2 实例的 IAM 角色)</li></ol></li><li>最佳实践 - 生产环境使用 IAM 角色 (EC2 或 ECS), 开发环境使用命名配置文件, 避免硬编码凭证</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152316.png"></p><hr><h4 id="AWS-Sigv4"><a href="#AWS-Sigv4" class="headerlink" title="AWS Sigv4"></a>AWS Sigv4</h4><ul><li>AWS Signature Version 4 - AWS 请求签名身份验证方法, 确保请求的安全性和完整性, 防止请求被篡改或重放</li><li>两种签名方式<ul><li><strong>HTTP Header</strong> (推荐) - 签名放在 <code>Authorization</code> 头部, 用于大多数 AWS API 调用</li><li><strong>Query String</strong> (预签名 URL) - 签名放在 <code>X-Amz-Signature</code> 查询参数, 用于临时授权访问 (如 S3 预签名 URL), 可设置过期时间</li></ul></li><li>签名过程 - 创建规范请求 (Canonical Request) → 创建待签名字符串 (String to Sign) → 计算签名 (Calculate Signature) → 将签名添加到请求</li><li>使用场景 - 所有 AWS API 调用, S3 预签名 URL (临时共享文件), CloudFront 签名 URL&#x2F;Cookie</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153415.png"></p><hr><h3 id="11-Advanced-S3"><a href="#11-Advanced-S3" class="headerlink" title="11. Advanced S3"></a>11. Advanced S3</h3><h4 id="S3-Lifecycle-Rules"><a href="#S3-Lifecycle-Rules" class="headerlink" title="S3 Lifecycle Rules"></a>S3 Lifecycle Rules</h4><ul><li>在存储类别之间自动转移对象或删除对象, 基于对象年龄或前缀自动执行, 降低存储成本</li><li><ul><li>规则类型</li><li><strong>Transition Actions</strong> (转移操作) - 将对象转移到另一个存储类别 (如 30 天后转到 Standard-IA, 90 天后转到 Glacier)</li><li><strong>Expiration Actions</strong> (过期操作) - 在指定时间后删除对象, 删除旧版本对象, 删除不完整的分段上传</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235516.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235639.png"></p><ul><li>转移限制 - 从 Standard 到 Standard-IA 最少 30 天, 从 Standard-IA 到 Glacier 最少 30 天, 对象最小大小 128 KB</li><li>常见场景<ul><li>日志文件 - 30 天后转到 IA, 1 年后转到 Glacier</li><li>临时文件 - 7 天后自动删除</li><li>合规归档 - 保留 7 年后删除</li><li><ul><li>Snowball 导入数据后自动转到 Glacier</li></ul></li></ul></li><li><strong>S3 Analytics</strong> (存储类别分析) - 分析访问模式建议最佳转移时间, 仅支持 Standard 和 Standard-IA, 生成报告需要 24-48 小时</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000151.png"></p><hr><h4 id="S3-Event-Notifications"><a href="#S3-Event-Notifications" class="headerlink" title="S3 Event Notifications"></a>S3 Event Notifications</h4><ul><li>自动响应 S3 中的特定事件 (对象创建、删除、恢复、复制等), 近实时通知 (通常几秒内)</li><li><ul><li>支持的目标服务 - SNS, SQS, Lambda Functions, EventBridge (高级事件路由)</li></ul></li><li>必须配置 IAM 权限, 目标服务的资源策略必须允许 S3 访问</li><li>事件类型 - <code>s3:ObjectCreated:*</code>, <code>s3:ObjectRemoved:*</code>, <code>s3:ObjectRestore:*</code>, <code>s3:Replication:*</code></li><li>常见场景<ul><li>图片上传后生成缩略图 (Lambda)</li><li>日志文件上传后分析处理 (SQS + 处理程序)</li><li>重要文件变更通知 (SNS + Email)</li></ul></li><li><ul><li>S3 Event Notifications vs EventBridge</li><li>S3 Event Notifications - 简单 S3 事件处理, 直接集成 (推荐)</li><li>EventBridge - 高级事件路由, 多目标, 事件筛选, 归档</li></ul></li><li>同时写入同一未版本化对象可能只发送一个事件通知, 启用版本控制可确保每次写入都有事件</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000725.png"></p><hr><h4 id="S3-Performance"><a href="#S3-Performance" class="headerlink" title="S3 Performance"></a>S3 Performance</h4><ul><li><p><strong>Multi-Part Upload</strong> (分段上传)</p><ul><li>推荐 &gt; 100 MB, 必须 &gt; 5 GB</li><li>并行上传分段提高速度, 失败后可重试单个分段</li><li>最多 10,000 个分段, 每个 5 MB - 5 GB</li></ul></li><li><p><strong>S3 Transfer Acceleration</strong> (传输加速)</p><ul><li>通过 AWS Edge Location 加速上传, 适用于远距离传输 (跨大洲)</li><li>可与 Multi-Part Upload 结合使用</li><li>使用专用端点 <code>bucket-name.s3-accelerate.amazonaws.com</code></li><li><ul><li>无法用于 Bucket 间复制对象</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001645.png"></p><ul><li><ul><li><strong>S3 Byte-Range Fetches</strong> (字节范围获取)</li><li>并行化 GET 请求提高下载速度</li><li>仅检索部分数据 (如文件头部), 故障时可重试特定字节范围</li><li>使用场景 - 加速大文件下载 (并行), 部分文件检索 (如前 50 字节获取元数据), 提高容错能力</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001828.png"></p><ul><li>请求速率优化 - 3,500 PUT&#x2F;COPY&#x2F;POST&#x2F;DELETE 请求&#x2F;秒&#x2F;前缀, 5,500 GET&#x2F;HEAD 请求&#x2F;秒&#x2F;前缀, 使用多个前缀分散负载</li></ul><hr><h4 id="S3-Select-amp-Glacier-Select"><a href="#S3-Select-amp-Glacier-Select" class="headerlink" title="S3 Select &amp; Glacier Select"></a>S3 Select &amp; Glacier Select</h4><ul><li>使用 SQL 表达式进行服务器端过滤, 仅检索所需数据子集, 在 S3 端完成过滤减少网络传输</li><li>优势 - 减少网络传输量 (最多 80%), 降低客户端 CPU 成本, 提高查询性能 (最多 400%)</li><li>支持格式 - CSV, JSON, Parquet, 压缩文件 (GZIP, BZIP2)</li><li>SQL 功能 - SELECT, WHERE 子句, 简单聚合 (COUNT, SUM, AVG), LIMIT 限制返回行数</li><li>常见场景 - 日志文件分析 (仅提取错误日志), 大型 CSV 文件查询 (仅提取特定列), JSON 数据筛选</li><li><strong>Glacier Select</strong> - 与 S3 Select 功能相同, 用于 Glacier 归档数据查询, 先恢复再查询</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002050.png"></p><hr><h4 id="S3-Object-Tags-amp-Metadata"><a href="#S3-Object-Tags-amp-Metadata" class="headerlink" title="S3 Object Tags &amp; Metadata"></a>S3 Object Tags &amp; Metadata</h4><ul><li><strong>S3 Object Metadata</strong> (对象元数据)<ul><li>系统元数据 - S3 自动生成 (Content-Type, Last-Modified 等)</li><li>用户定义元数据 - 必须以 <code>x-amz-meta-</code> 开头, 键值对形式, 上传时设置之后不可修改, 用于存储应用相关信息</li></ul></li><li><strong>S3 Object Tags</strong> (对象标签)<ul><li>键值对形式 (最多 10 个标签&#x2F;对象), 可在对象创建后添加或修改</li><li>用途 - 细粒度权限控制 (IAM 策略), 生命周期规则筛选, 成本分配和分析, 对象分类管理</li></ul></li><li><ul><li>无法通过元数据或标签搜索对象, 需要搜索功能使用 S3 Inventory 或 Athena</li></ul></li><li>Metadata 用于描述性信息且上传时固定, Tags 用于分类和管理且可动态修改</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194215.png"></p><hr><h3 id="12-S3-Security"><a href="#12-S3-Security" class="headerlink" title="12. S3 Security"></a>12. S3 Security</h3><h4 id="S3-Encryption"><a href="#S3-Encryption" class="headerlink" title="S3 Encryption"></a>S3 Encryption</h4><ul><li>Server-Side Encryption (SSE) - S3 端加密</li><li>Client-Side Encryption (CSE) - 客户端加密</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223133.png"></p><ul><li><strong>SSE-S3</strong> (S3 托管密钥, 默认)<ul><li>新 Bucket 和对象默认启用</li><li>AES-256 加密算法, 每个对象使用唯一密钥</li><li>AWS 管理密钥, 免费</li><li>请求头 <code>x-amz-server-side-encryption: AES256</code></li><li><ul><li>不支持自动密钥轮换 (需要 SSE-KMS)</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223242.png"></p><ul><li><strong>SSE-KMS</strong> (KMS 托管密钥)<ul><li>用户控制密钥 (AWS KMS), 可审计密钥使用 (CloudTrail)</li><li>支持自动密钥轮换</li><li>请求头 <code>x-amz-server-side-encryption: aws:kms</code></li><li>收费 (KMS API 调用), 受 KMS 配额限制 (上传&#x2F;下载计入配额)</li><li>适合需要密钥审计、轮换、细粒度控制的场景</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223417.png"></p><ul><li><strong>SSE-C</strong> (客户提供密钥)<ul><li>用户自己管理密钥</li><li><ul><li>AWS 不存储密钥, 必须使用 HTTPS</li></ul></li><li>每次请求必须提供密钥, S3 拒绝所有 HTTP 请求</li><li>适合有自己的密钥但希望在 AWS 端加密的场景</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223602.png"></p><ul><li><strong>Client-Side Encryption</strong> (客户端加密)<ul><li>用户完全管理密钥和加密周期</li><li>数据在发送到 AWS 前已加密, AWS 接收和存储加密数据</li><li>适合最高安全要求, 完全控制加密过程</li><li>工具 - AWS Encryption SDK, S3 Encryption Client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223715.png"></p><ul><li><strong>Encryption in Transit</strong> (传输加密, SSL&#x2F;TLS)<ul><li>HTTPS (推荐), HTTP (可用但不推荐)</li><li>强制 HTTPS - Bucket Policy 使用 <code>aws:SecureTransport</code> 条件</li><li>SSE-C 必须使用 HTTPS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223811.png"></p><hr><h4 id="S3-CORS"><a href="#S3-CORS" class="headerlink" title="S3 CORS"></a>S3 CORS</h4><ul><li>CORS (Cross-Origin Resource Sharing) - 跨域资源共享, 浏览器安全机制</li><li>允许一个域的 Web 应用访问另一个域的资源</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224630.png"></p><ul><li><ul><li>客户端向 S3 Bucket 发起跨域请求时, 必须在 S3 Bucket 配置正确的 CORS 头部</li></ul></li><li>配置元素<ul><li><code>AllowedOrigins</code> - 允许的源域 (<code>https://example.com</code> 或 <code>*</code>)</li><li><code>AllowedMethods</code> - 允许的 HTTP 方法 (GET, PUT, POST, DELETE, HEAD)</li><li><code>AllowedHeaders</code> - 允许的请求头</li><li><code>ExposeHeaders</code> - 暴露给客户端的响应头</li><li><code>MaxAgeSeconds</code> - 预检请求的缓存时间</li></ul></li><li>工作流程 - 浏览器发送 OPTIONS 预检请求 → S3 返回 CORS 头部 → 浏览器允许实际请求 → S3 返回资源</li><li>常见场景 - 静态网站从不同域的 S3 Bucket 加载资源, 跨域 AJAX 请求, SPA 访问 API</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224951.png"></p><hr><h4 id="S3-MFA-Delete"><a href="#S3-MFA-Delete" class="headerlink" title="S3 MFA Delete"></a>S3 MFA Delete</h4><ul><li>删除对象或版本前需要 MFA 身份验证, 防止意外删除重要数据</li><li><ul><li>必须先启用版本控制 (Versioning)</li></ul></li><li>需要 MFA 的操作 - 永久删除对象版本, 暂停 Bucket 版本控制</li><li>不需要 MFA 的操作 - 启用版本控制, 列出已删除版本</li><li><ul><li>只有 Bucket 所有者 (根账户) 可以启用&#x2F;禁用, 必须使用 CLI (无法通过控制台配置)</li></ul></li><li>适合合规要求、关键数据保护、防止误操作</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225415.png"></p><hr><h4 id="S3-Access-Logs"><a href="#S3-Access-Logs" class="headerlink" title="S3 Access Logs"></a>S3 Access Logs</h4><ul><li>所有对 S3 的请求都会被记录到另一个 S3 存储桶中</li><li>日志包含详细信息: 访问者、时间、操作、状态码等</li><li>日志可能需要几小时才能送达目标存储桶</li><li>目标存储桶必须在同一区域</li><li>不要将日志存储到被监控的同一存储桶（会导致无限日志循环）</li><li>可用于审计、安全分析、故障排查</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230251.png"></p><hr><h4 id="S3-Pre-signed-URL"><a href="#S3-Pre-signed-URL" class="headerlink" title="S3 Pre-signed URL"></a>S3 Pre-signed URL</h4><ul><li>临时授权 URL，允许用户在有限时间内访问私有 S3 对象</li><li>使用生成者的权限进行访问（继承 IAM 用户或角色的权限）</li><li>有效期: S3 Console 生成最多 12 小时，AWS CLI 最多 168 小时（7 天）</li><li>常见用途<ul><li>允许用户下载高级内容（付费用户临时访问）</li><li>允许用户临时上传文件到指定位置</li><li>动态生成下载链接给不断变化的用户列表</li></ul></li><li>生成方式: AWS Console、AWS CLI、SDK</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230702.png"></p><hr><h4 id="S3-Access-Points"><a href="#S3-Access-Points" class="headerlink" title="S3 Access Points"></a>S3 Access Points</h4><ul><li>简化 S3 存储桶的安全管理，为不同用户&#x2F;应用提供独立访问入口</li><li>每个 Access Point 有自己的<ul><li>DNS 名称（唯一访问端点）</li><li>Access Point Policy（独立的访问策略）</li></ul></li><li>可以针对特定前缀或用户组创建专用 Access Point</li><li>支持 VPC Origin: 限制只能从指定 VPC 访问</li><li>优势: 避免复杂的存储桶策略，每个访问点独立管理权限</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231500.png"></p><hr><h4 id="S3-Object-Lambda"><a href="#S3-Object-Lambda" class="headerlink" title="S3 Object Lambda"></a>S3 Object Lambda</h4><ul><li>使用 Lambda 函数在对象返回给调用者之前动态转换数据</li><li>需要配置: S3 Access Point + S3 Object Lambda Access Point</li><li>常见用途</li><li>移除敏感信息 (PII - Personally Identifiable Information)</li><li>图片处理: 添加水印、调整大小、格式转换</li><li>数据格式转换: XML 转 JSON、数据增强</li><li>根据调用者权限返回不同内容（数据过滤、编辑）</li><li>优势: 无需创建多个数据副本，实时动态处理</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231810.png"></p><hr><h3 id="13-CloudFront"><a href="#13-CloudFront" class="headerlink" title="13. CloudFront"></a>13. CloudFront</h3><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><ul><li>全球内容分发网络 (CDN)，支持静态和动态内容分发</li><li>内容缓存在边缘节点，提升读取性能和用户体验</li><li>集成 AWS Shield 提供 DDoS 防护</li><li>支持基于内容类型的路由，支持主备源站实现高可用和故障转移</li><li><strong>源站类型 (Origins)</strong><ul><li>S3 存储桶: 需配置 OAC (Origin Access Control)<ul><li>S3 + CloudFront 题目必考 OAC</li></ul></li><li>自定义源站 (Custom Origin): 任何 HTTP 端点（ALB、EC2、外部网站等）</li></ul></li><li><strong>加密</strong><ul><li>CloudFront 加密需求选择 Field-Level Encryption（不是 KMS）</li><li>Field-Level Encryption: 允许用户安全上传敏感信息到 Web 服务器</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232701.png"></p><ul><li><strong>CloudFront vs S3 Cross Region Replication</strong><ul><li>CloudFront<ul><li>全球边缘网络（216+ 个边缘节点）</li><li>内容有 TTL（通常 1 天）</li><li>适用于必须全球可用的静态内容</li></ul></li><li>S3 Cross Region Replication (CRR)<ul><li>必须为每个目标区域单独设置</li><li>近实时更新，无缓存</li><li>适用于少数区域的动态内容，低延迟读取</li></ul></li><li>题目提到 S3 + 高可用 + 低延迟 &#x3D; S3 CRR</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233016.png"></p><ul><li><strong>性能优化</strong><ul><li>Proxy 方法（PUT、POST、PATCH、DELETE）和动态内容会跳过区域边缘缓存</li><li>直接转发到源站，不缓存</li></ul></li><li><strong>安全控制</strong><ul><li>WAF 集成: 阻止恶意 IP</li><li>OAI (Origin Access Identity)<ul><li>保护 CloudFront 与 S3 之间的通信</li><li>确保 S3 只能通过 CloudFront 访问</li></ul></li><li>Signed URLs &#x2F; Signed Cookies: 限制文档访问（付费订阅、高级内容）</li><li>可强制要求客户端使用 HTTPS</li></ul></li><li><strong>Origin Groups（高可用配置）</strong><ul><li>所有新请求始终路由到主源站（即使之前故障转移到备用源站）</li><li>仅对 GET、HEAD、OPTIONS 方法进行故障转移（POST、PUT 等写入方法不会故障转移）</li></ul></li></ul><hr><h4 id="CloudFront-Caching"><a href="#CloudFront-Caching" class="headerlink" title="CloudFront Caching"></a>CloudFront Caching</h4><ul><li>缓存位于每个 CloudFront 边缘节点</li><li>CloudFront 使用 Cache Key 识别缓存中的每个对象</li><li>如果 CloudFront 处理语言配置出问题，使用 <code>Query String Forwarding and Caching</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144432.png"></p><ul><li><strong>Cache Key</strong><ul><li>默认组成: Hostname + 资源 URL 路径</li><li>可通过 CloudFront Cache Policy 添加其他元素到 Cache Key</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144654.png"></p><ul><li><strong>Cache Policy</strong><ul><li>可以使用 HTTP Headers、Cookies、Query Strings 作为 Cache Key 的一部分</li><li>控制哪些请求参数会影响缓存命中率</li><li>包含在 Cache Key 中的元素会转发到源站</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img444857.png"></p><ul><li><strong>Origin Request Policy</strong><ul><li>指定要转发到源站但不包含在 Cache Key 中的值</li><li>用于源站需要但不影响缓存的参数（如身份验证头）</li><li>不影响缓存命中率，但会传递给源站</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145256.png"></p><hr><h4 id="CloudFront-Cache-Invalidation"><a href="#CloudFront-Cache-Invalidation" class="headerlink" title="CloudFront Cache Invalidation"></a>CloudFront Cache Invalidation</h4><ul><li>让 CloudFront 跳过 TTL 立即更新<ul><li>比如你更新了后端, 但是 CloudFront 不会立即更新, 需要 CloudFront Invalidation 来跳过 TTL 来立即更新</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234007.png"></p><hr><h4 id="CloudFront-Cache-Behaviors"><a href="#CloudFront-Cache-Behaviors" class="headerlink" title="CloudFront Cache Behaviors"></a>CloudFront Cache Behaviors</h4><ul><li>根据不同的 URL 结构做不同的 Cache Behaviors</li><li>Maximize cache hits by separating staic and dynamic distributions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150007.png"></p><hr><h4 id="CloudFront-Geo-Restriction"><a href="#CloudFront-Geo-Restriction" class="headerlink" title="CloudFront Geo Restriction"></a>CloudFront Geo Restriction</h4><ul><li>Allowlist &amp; Blocklist (针对 IP, 国家进行访问限制)<ul><li>CloudFront Geo Restriction 没办法和 VPC 一起使用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233638.png"></p><hr><h4 id="CloudFront-Signed-URL-x2F-Cookies"><a href="#CloudFront-Signed-URL-x2F-Cookies" class="headerlink" title="CloudFront Signed URL &#x2F; Cookies"></a>CloudFront Signed URL &#x2F; Cookies</h4><ul><li>类似 S3 Pre-Signed URL<ul><li>Signed URL: access to individual files (单个文件)</li><li>Signed Cookies: access to multiple files (多个文件)</li></ul></li><li>Recommend to use Trusted Key Group than CloudFront Key Pair</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img484256.png"></p><ul><li>CloudFront Signed URL vs. S3 Pre-Signed URL<ul><li>Access CloudFront 的就是 CloudFront Signed URL</li><li>Access S3 的就是 S3 Pre-Signed URL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184528.png"></p><ul><li>与 CloudFront signer 有关的 2 个知识点<ul><li>When create a signer, the public key is CloudFront and private key is used to sign a portion of URL</li><li>When use the root user to manage CloudFront key pairs, you can only have up to two active CloudFront key pairs per AWS account</li></ul></li><li>CloudFront Key Pair 只能由 root user 来创建</li></ul><hr><h4 id="CloudFront-Advanced-Concepts"><a href="#CloudFront-Advanced-Concepts" class="headerlink" title="CloudFront Advanced Concepts"></a>CloudFront Advanced Concepts</h4><ul><li>Price Classes (一共 3 种)<ul><li>Price Class All: all regions - best performance</li><li>Price Class 200: most regions, but excludes the most expensive regions</li><li>Price Class 100: only the least expensive regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185111.png"></p><ul><li>CloudFront - Origin Groups<ul><li>Increase high-availability and do failover</li><li>Origin Group: one primary and one secondary origin</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185430.png"></p><ul><li>CloudFront - Field Level Encryption<ul><li>Protect user sensitive information through application stack</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185545.png"></p><hr><h4 id="CloudFront-Real-Time-Logs"><a href="#CloudFront-Real-Time-Logs" class="headerlink" title="CloudFront Real Time Logs"></a>CloudFront Real Time Logs</h4><ul><li>Get real-time requests received by CloudFront sent to Kinesis Data Stream</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195222.png"></p><hr><h4 id="AWS-Global-Accelerator"><a href="#AWS-Global-Accelerator" class="headerlink" title="AWS Global Accelerator"></a>AWS Global Accelerator</h4><ul><li>利用 AWS internal network to route application<ul><li>Provide 2 global static anycast IPs</li><li>Improve availability and performance of the applications (globally)</li></ul></li><li>Global Accelerator improves performance for applications over TCP or UDP</li><li>Global Accelerator has automatic failover</li><li>Global Accelerator is more expensive as it adds an extra layer of infrastructure (对比 CloudFront 不是一个 cost-effective 的选择)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234527.png"></p><ul><li>AWS Global Accelerator vs CloudFront<ul><li>CloudFront: Content is served at edge, 比如图片和视频 (cacheable), Dynamic content such as API acceleration &amp; dynamic site delivery</li><li>Global Accelerator: 适合 TCP 或者 UDP, 比如游戏和 IoT (static IP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000939.png"></p><blockquote><p>AWS Global Accelerator is a network service that can provide a global traffic management solution. By creating a standard accelerator in AWS Global Accelerator, you can guide user traffic to the endpoint closest to them, thereby improving the performance and availability of the application.</p></blockquote><hr><h3 id="14-ECS-ECR-amp-Fargate"><a href="#14-ECS-ECR-amp-Fargate" class="headerlink" title="14. ECS, ECR &amp; Fargate"></a>14. ECS, ECR &amp; Fargate</h3><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><ul><li>Elastic Container Service - 在 AWS 上管理 Docker 容器</li><li>两种 Launch Type<ul><li>EC2 Launch Type - 需要预配置, 需要 ECS Agent</li><li>Fargate Launch Type - Serverless, 无需预配置</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212508.png"></p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212546.png"></p><ul><li>IAM Roles for ECS<ul><li>EC2 Instance Profile - 仅针对 EC2 Launch Type, 由 ECS agent 使用</li><li>ECS Task Role - 每个 Task 都有自己的 Role</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212709.png"></p><ul><li>可以与 Load Balancer (ALB&#x2F;NLB) 配合使用</li><li>可以与 EFS 配合使用 (Fargate + EFS &#x3D; Serverless 文件管理)</li><li>如果 terminate ECS 出现 synchronization issue, ECS 当前状态一定是 <code>STOPPED</code></li><li>如果 ECS cluster launch 出问题, 先检查 <code>ecs.config</code> 配置</li><li>可以用 awslogs log driver 将 ECS 日志发送到 CloudWatch, Fargate 类型还需要在 task definition 中添加 <code>logConfiguration</code> 参数</li><li>计费方式: EC2 Launch Type 按 EC2 实例和 EBS 卷计费, Fargate Launch Type 按容器请求的 vCPU 和内存资源计费</li></ul><hr><h4 id="ECS-Auto-Scaling"><a href="#ECS-Auto-Scaling" class="headerlink" title="ECS Auto Scaling"></a>ECS Auto Scaling</h4><ul><li>自动增加&#x2F;减少 ECS 任务数量<ul><li>Target Scaling - 基于 CloudWatch 指标的目标值扩展</li><li>Step Scaling - 基于 CloudWatch 告警扩展</li><li>Scheduled Scaling - 基于特定时间扩展</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222247.png"></p><ul><li>Auto Scaling EC2 Instances<ul><li>通过添加底层 EC2 实例来适应 ECS Service 扩展</li><li>使用 Auto Scaling Group Scaling 或 ECS Cluster Capacity Provider</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205104.png"></p><hr><h4 id="ECS-Rolling-Updates"><a href="#ECS-Rolling-Updates" class="headerlink" title="ECS Rolling Updates"></a>ECS Rolling Updates</h4><ul><li>控制从 v1 更新到 v2 时可以启动和停止的任务数量</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205259.png"></p><hr><h4 id="ECS-Task-Definitions"><a href="#ECS-Task-Definitions" class="headerlink" title="ECS Task Definitions"></a>ECS Task Definitions</h4><ul><li>Task definitions 是 JSON 格式的元数据, 告诉 ECS 如何运行 Docker 容器</li><li>环境变量来源: 硬编码、SSM Parameter Store、Secrets Manager、S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210902.png"></p><ul><li>ECS Load Balancing - EC2 Launch Type<ul><li>如果在 task definition 中仅定义容器端口, 会获得动态主机端口映射</li><li>必须允许 EC2 实例的 Security Group 接受来自 ALB Security Group 的任何端口</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211103.png"></p><ul><li>ECS Load Balancing - Fargate<ul><li>每个任务有唯一的私有 IP, 只需定义容器端口</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211211.png"></p><ul><li>ECS Data Volumes (Bind Mounts)<ul><li>在同一 Task Definition 中的多个容器间共享数据</li><li>同时支持 EC2 和 Fargate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211542.png"></p><hr><h4 id="ECS-Task-Placements"><a href="#ECS-Task-Placements" class="headerlink" title="ECS Task Placements"></a>ECS Task Placements</h4><ul><li>针对 EC2 Launch Type, 决定在哪里放置 EC2 (考虑 CPU、Memory 等)</li><li>ECS Task Placement Strategies 可以混合使用 (Binpack, Random 和 Spread)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212801.png"></p><ul><li>ECS Task Placement Strategies - Binpack<ul><li>基于最少可用 CPU 或内存放置任务</li><li>最小化使用的实例数量 (节省成本)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213429.png"></p><ul><li>ECS Task Placement Strategies - Random<ul><li>随机放置任务</li><li>启用随机主机端口: 设置 host <code>port = 0</code> 或留空, 允许同类型的多个容器在同一 EC2 容器实例上启动</li><li>如果第一个 container 运行成功但第二个失败, 通常是 host port 配置问题</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213517.png"></p><ul><li>ECS Task Placement Strategies - Spread<ul><li>基于指定值均匀分布任务</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213603.png"></p><ul><li>ECS Task Placement Constraints<ul><li><code>distinctInstance</code> - 将每个任务放置在不同的容器实例上</li><li><code>memberOf</code> - 将任务放置在满足表达式的实例上</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213754.png"></p><hr><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><ul><li>Elastic Container Registry (ECR) - 在 AWS 上存储和管理 Docker 镜像</li><li>注意区分: ECR 管理 Docker Image, 不是 Docker Container</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222836.png"></p><ul><li>使用 CLI 拉取和推送镜像到 ECR 的命令<ul><li>登录命令: <code>$(aws ecr get-login --no-include-email)</code></li><li>拉取镜像: <code>docker pull 1234567890.dkr.ecr.eu-west-1.amazonaws.com/demo:latest</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214106.png"></p><hr><h4 id="AWS-CoPilot"><a href="#AWS-CoPilot" class="headerlink" title="AWS CoPilot"></a>AWS CoPilot</h4><ul><li>CLI 工具, 用于构建、发布和运维生产就绪的容器化应用 (production-ready containerized apps)</li><li>支持在 AppRunner、ECS 和 Fargate 上运行应用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214226.png"></p><hr><h4 id="AWS-EKS"><a href="#AWS-EKS" class="headerlink" title="AWS EKS"></a>AWS EKS</h4><ul><li>Elastic Kubernetes Service - 在 AWS 上管理 Kubernetes 集群</li><li>支持两种部署模式: EC2 和 Fargate (与 ECS 相同)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223132.png"></p><ul><li>EKS Data Volumes<ul><li>需要 StorageClass manifest</li><li>利用 Container Storage Interface (CSI) compliant driver</li><li>支持的存储类型: EBS、EFS、FSx for Lustre</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223503.png"></p><hr><h3 id="15-Elastic-Beanstalk"><a href="#15-Elastic-Beanstalk" class="headerlink" title="15. Elastic Beanstalk"></a>15. Elastic Beanstalk</h3><h4 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h4><ul><li>Elastic Beanstalk 是以开发者为中心的 AWS 应用部署服务</li><li>自动处理容量配置 (capacity provisioning)、负载均衡 (load balancing)、自动扩展 (scaling)、应用健康监控等</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150326.png"></p><ul><li>Web Server Tier vs. Worker Tier<ul><li>Web Server Tier - 处理 HTTP 请求, 运行 Web 应用</li><li>Worker Tier - 处理后台任务, 从 SQS 队列消费消息, 可配合 SNS 使用</li></ul></li><li>Worker 或 Web environment 需要 <code>cron.yaml</code> 文件来定义定时任务</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210711.png"></p><ul><li>部署模式选择<ul><li>Single Instance Mode - 单实例模式, 成本最低, 适合开发&#x2F;测试环境</li><li>High Availability Mode - 高可用模式, 多实例 + Load Balancer, 适合生产环境</li></ul></li><li>不支持的运行时 (如 Rust) 可以使用 Docker image 来运行</li><li>部署失败处理: Elastic Beanstalk 会用最近一次成功部署的应用版本替换失败的实例 (replace the failed instances with instances running in the application version from the most recent successful deployment)</li><li>配置 HTTPS: 在 <code>.ebextensions</code> 文件夹中创建配置文件来管理 Load Balancer 的 SSL 证书</li><li>跨账户迁移 Beanstalk 环境<ul><li>创建 saved configuration 并下载到本地</li><li>修改账户相关参数</li><li>上传到另一个账户的 S3 bucket</li><li>在 Elastic Beanstalk 控制台从 ‘Saved Configurations’ 创建应用</li></ul></li></ul><hr><h4 id="Beanstalk-Deployment-Modes"><a href="#Beanstalk-Deployment-Modes" class="headerlink" title="Beanstalk Deployment Modes"></a>Beanstalk Deployment Modes</h4><ul><li>Beanstalk 提供 6 种部署模式, 各有不同的特点和适用场景</li><li>Immutable 和 Traffic Splitting 可能会导致 EC2 burst balance 丢失</li><li>Rolling 和 Rolling with additional batches 都会导致可用性降低 (reduced availability)</li><li>避免停机时间 (avoid downtime) 的最佳选择: Blue&#x2F;Green Deployment</li></ul><p><strong>All at once (全量更新)</strong></p><ul><li>最快的部署方式, 但会有停机时间 (downtime)</li><li>直接更新所有实例, 适合开发环境</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151200.png"></p><p><strong>Rolling (滚动更新)</strong></p><ul><li>分批更新实例 (update a few instances at a time - bucket)</li><li>逐批移动到下一组 (move onto the next bucket)</li><li>部署期间应用容量降低, 运行多个版本</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151311.png"></p><p><strong>Rolling with additional batches (额外批次滚动更新)</strong></p><ul><li>类似 Rolling, 但会先启动新实例来保持容量</li><li>旧版本应用仍然可用 (old application still available)</li><li>有额外的实例成本, 但保持了完整容量</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151443.png"></p><p><strong>Immutable (不可变部署)</strong></p><ul><li>在新的 ASG 中启动新实例, 部署新版本</li><li>所有实例健康后进行交换 (swap all instances when everything is healthy)</li><li>支持快速回滚 (quick rollback)</li><li>如果需要保持完整应用容量且最小化失败部署的影响 (maintain at least the full capacity and minimal impact of failed deployment), 选择 Immutable</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151738.png"></p><p><strong>Blue&#x2F;Green (蓝绿部署)</strong></p><ul><li>创建一个全新的环境 (create a new environment)</li><li>准备就绪后切换流量 (switch over when ready)</li><li>零停机时间, 易于回滚</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151838.png"></p><p><strong>Traffic Splitting (流量分割)</strong></p><ul><li>金丝雀测试 (Canary testing)</li><li>将一小部分流量发送到新部署 (send a small % of traffic to new deployment)</li><li>逐步验证新版本的稳定性</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151935.png"></p><hr><h4 id="Beanstalk-Lifecycle-Policy"><a href="#Beanstalk-Lifecycle-Policy" class="headerlink" title="Beanstalk Lifecycle Policy"></a>Beanstalk Lifecycle Policy</h4><ul><li>Elastic Beanstalk 最多存储 1000 个应用版本</li><li>使用 lifecycle policy 自动淘汰旧版本应用 (phase out old application versions, 重要)</li><li>可基于版本总数或版本年龄删除旧版本, 当前使用的版本不会被删除</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152423.png"></p><hr><h4 id="Beanstalk-Extensions"><a href="#Beanstalk-Extensions" class="headerlink" title="Beanstalk Extensions"></a>Beanstalk Extensions</h4><ul><li>部署到 Elastic Beanstalk 的 zip 文件包含代码和配置文件</li><li>配置文件必须放在根目录的 <code>.ebextensions/</code> 文件夹下, 文件后缀为 <code>.config</code> (YAML 或 JSON 格式)</li><li>可配置内容: option settings, Linux&#x2F;Windows 服务器配置, 自定义资源 (RDS, ElastiCache, DynamoDB 等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155315.png"></p><hr><h4 id="Beanstalk-with-CloudFormation"><a href="#Beanstalk-with-CloudFormation" class="headerlink" title="Beanstalk with CloudFormation"></a>Beanstalk with CloudFormation</h4><ul><li>Elastic Beanstalk 底层依赖 CloudFormation 来配置基础设施</li><li>CloudFormation 用于自动化部署其他 AWS 服务 (EC2, RDS, Load Balancer 等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161346.png"></p><hr><h4 id="Beanstalk-Cloning"><a href="#Beanstalk-Cloning" class="headerlink" title="Beanstalk Cloning"></a>Beanstalk Cloning</h4><ul><li>克隆现有环境, 创建具有完全相同配置的新环境</li><li>适用于部署应用的测试版本 (test version), 或创建生产环境的副本进行实验</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161531.png"></p><hr><h3 id="16-AWS-CloudFormation"><a href="#16-AWS-CloudFormation" class="headerlink" title="16. AWS CloudFormation"></a>16. AWS CloudFormation</h3><h4 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h4><ul><li>声明式方式定义 AWS 基础设施 (Infrastructure as Code, IaC)</li><li>描述需要的资源 (如 EC2, S3, RDS), CloudFormation 自动创建和配置</li><li>CloudFormation 是 IaaS (Infrastructure as a Service), 可以使用网上现有的模板</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003448.png"></p><ul><li>Templates 必须上传到 S3 并在 CloudFormation 中引用</li><li>更新 template 需要重新上传新版本 → 流程: 本地更新 template → 上传到 S3 → 在 CloudFormation console 应用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193232.png"></p><ul><li>部署 CloudFormation Templates 的两种方式<ul><li>Manual - 在 Application Composer 或代码编辑器中手动编辑</li><li>Automated - 通过 YAML 文件自动化部署</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193404.png"></p><ul><li>依赖 CloudFormation 来 provision resources 的服务: Elastic Beanstalk 和 SAM</li><li>上传 Lambda 和 CloudFormation template 使用命令: <code>cloudformation package</code> 和 <code>cloudformation deploy</code></li><li>在 CloudFormation 中声明 Lambda function<ul><li>无第三方依赖时可以在 <code>AWS::Lambda::Function</code> block 中直接内联代码 (inline code)</li><li>有第三方依赖时将代码打包成 zip 上传到 S3, 然后在 <code>AWS::Lambda::Function</code> block 中引用 S3 对象</li></ul></li></ul><hr><h4 id="CloudFormation-Resources"><a href="#CloudFormation-Resources" class="headerlink" title="CloudFormation Resources"></a>CloudFormation Resources</h4><ul><li>Resources 代表将要创建和配置的不同 AWS 组件</li><li>CloudFormation 自动处理资源的创建顺序和依赖关系, 无需手动定义创建顺序</li><li>Resources 是 CloudFormation template 中唯一必需的部分 (mandatory)</li><li>资源类型命名格式: <code>service-provider::service-name::data-type-name</code> (如 <code>AWS::EC2::Instance</code>)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194109.png"></p><hr><h4 id="CloudFormation-Parameters"><a href="#CloudFormation-Parameters" class="headerlink" title="CloudFormation Parameters"></a>CloudFormation Parameters</h4><ul><li>Parameters 用于向 CloudFormation template 提供输入值</li><li>可以复用同一个 template 而无需重新上传, 只需更改参数值</li><li>常见 Parameter 类型: <code>AWS::EC2::KeyPair::KeyName</code>, <code>CommaDelimitedList</code>, <code>String</code>, <code>Number</code> 等</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194424.png"></p><ul><li>重要的 Parameters 设置<ul><li><code>AllowedValues</code> - 限制用户可选的值 (如实例类型只能选 t2.micro, t2.small, t2.medium)</li><li><code>NoEcho</code> - 隐藏敏感信息 (如密码) 避免在日志和控制台中显示</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194757.png"></p><ul><li>Pseudo Parameters (伪参数)<ul><li>默认启用可随时使用, 无需定义</li><li>常用伪参数: <code>AWS::AccountId</code>, <code>AWS::Region</code>, <code>AWS::StackId</code>, <code>AWS::StackName</code>, <code>AWS::NotificationARNs</code>, <code>AWS::NoValue</code></li><li>使用场景: 动态引用账户 ID、区域等信息, 使 template 更通用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223040.png"></p><hr><h4 id="CloudFormation-Mappings"><a href="#CloudFormation-Mappings" class="headerlink" title="CloudFormation Mappings"></a>CloudFormation Mappings</h4><ul><li>Mappings 是 CloudFormation template 中的固定变量 (硬编码的键值对)</li><li>用于根据不同条件返回不同值, 如区分环境 (dev vs prod)、区域 (us-east-1 vs eu-west-1)、AMI ID 等</li><li>使用 <code>Fn::FindInMap</code> 函数访问 Mapping 中的值</li><li>适用于预定义的、可预测的值, 动态值使用 Parameters</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212000.png"></p><hr><h4 id="CloudFormation-Outputs-amp-Exports"><a href="#CloudFormation-Outputs-amp-Exports" class="headerlink" title="CloudFormation Outputs &amp; Exports"></a>CloudFormation Outputs &amp; Exports</h4><ul><li>Outputs 声明可选的输出值, 允许其他 stack 导入和使用这些值</li><li>工作流程: Stack A 通过 <code>Export</code> 导出值 → Stack B 通过 <code>Fn::ImportValue</code> 导入和引用该值</li><li>Exported output name 在同一 Region 内必须唯一</li><li><code>Export</code> 用于导出值给其他 stacks, <code>ImportValue</code> 用于从其他 stack 引用值</li><li>使用场景: 跨 stack 共享资源 (如 VPC ID, Security Group ID, Load Balancer DNS 等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212344.png"></p><ul><li>删除限制: 必须先删除所有导入该值的 stack, 才能删除或修改导出该值的 stack</li><li>示例: Stack B 和 C 引用 Stack A 的输出值, 则必须先删除 Stack B 和 C, 最后删除 Stack A</li></ul><hr><h4 id="CloudFormation-Conditions"><a href="#CloudFormation-Conditions" class="headerlink" title="CloudFormation Conditions"></a>CloudFormation Conditions</h4><ul><li>Conditions 根据条件控制资源或输出的创建</li><li>常见条件类型: 环境 (dev vs prod)、AWS Region、Parameter 值</li><li>可以与 Conditions 关联的部分: Resources, Conditions (条件嵌套), Outputs</li><li>常用条件函数: <code>Fn::And</code>, <code>Fn::Equals</code>, <code>Fn::If</code>, <code>Fn::Not</code>, <code>Fn::Or</code></li><li>CloudFormation template 中无效的 section 是 <code>Dependencies</code> (正确的是 <code>DependsOn</code> 属性)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212731.png"></p><hr><h4 id="CloudFormation-Intrinsic-Functions"><a href="#CloudFormation-Intrinsic-Functions" class="headerlink" title="CloudFormation Intrinsic Functions"></a>CloudFormation Intrinsic Functions</h4><ul><li><code>Fn::Ref</code> (简写 <code>!Ref</code>) - 引用 Parameters 或 Resources<ul><li>引用 Parameter 返回参数值, 引用 Resource 返回资源物理 ID</li><li>只能在 Parameter 或 Resource 部分使用</li><li>示例: <code>!Ref MyBucket</code> 返回 bucket 名称</li></ul></li><li><code>Fn::GetAtt</code> (简写 <code>!GetAtt</code>) - 获取资源的属性值<ul><li>不同资源类型有不同可用属性</li><li>示例: <code>!GetAtt EC2Instance.PublicIp</code> 获取 EC2 公网 IP</li></ul></li><li><code>Fn::FindInMap</code> (简写 <code>!FindInMap</code>) - 从 Mappings 中查找值<ul><li>接受 3 个参数: MapName, TopLevelKey, SecondLevelKey</li><li>示例: <code>!FindInMap [RegionMap, !Ref &quot;AWS::Region&quot;, AMI]</code></li></ul></li><li><code>Fn::ImportValue</code> (简写 <code>!ImportValue</code>) - 导入其他 stack 的 Outputs 值<ul><li>实现跨 stack 资源共享</li><li>示例: <code>!ImportValue NetworkStackVPCID</code></li></ul></li><li><code>Fn::Join</code> - 连接字符串数组<ul><li>第一个参数是分隔符, 第二个参数是字符串列表</li><li>示例: <code>!Join [&quot;-&quot;, [a, b, c]]</code> 返回 “a-b-c”</li></ul></li><li><code>Fn::Sub</code> - 字符串变量替换<ul><li>将 <code>$&#123;&#125;</code> 包裹的变量替换为实际值</li><li>示例: <code>!Sub &quot;arn:aws:s3:::$&#123;BucketName&#125;/*&quot;</code></li></ul></li><li><code>Fn::Base64</code> - Base64 编码<ul><li>常用于 EC2 User Data</li><li>示例: <code>!Base64 &quot;#!/bin/bash\necho Hello&quot;</code></li></ul></li><li>Condition Functions - 条件控制函数<ul><li><code>Fn::And</code>, <code>Fn::Equals</code>, <code>Fn::If</code>, <code>Fn::Not</code>, <code>Fn::Or</code></li><li>用于根据条件创建或配置资源</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214211.png"></p><hr><h4 id="CloudFormation-Rollbacks"><a href="#CloudFormation-Rollbacks" class="headerlink" title="CloudFormation Rollbacks"></a>CloudFormation Rollbacks</h4><ul><li>Stack Creation Fails - 创建失败时自动回滚<ul><li>默认删除所有已创建的资源</li><li>可使用 <code>--disable-rollback</code> 保留资源用于调试</li></ul></li><li>Stack Update Fails - 更新失败时回滚到上一个工作状态<ul><li>保留原有资源配置, 撤销失败的更改</li><li>自动恢复到已知的稳定状态</li></ul></li><li>Rollback 失败 - 回滚过程也可能失败<ul><li>stack 进入 <code>UPDATE_ROLLBACK_FAILED</code> 状态</li><li>原因: 资源依赖问题, 权限不足, 外部资源被手动删除</li><li>解决方法: 使用 <code>ContinueUpdateRollback</code> API 继续回滚, 或删除 stack 重建</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215108.png"></p><hr><h4 id="CloudFormation-Service-Role"><a href="#CloudFormation-Service-Role" class="headerlink" title="CloudFormation Service Role"></a>CloudFormation Service Role</h4><ul><li>IAM role 允许 CloudFormation 代表用户创建&#x2F;更新&#x2F;删除 stack 资源</li><li>用户通过 Service Role 授权 CloudFormation 操作资源, 无需直接给用户资源权限, 实现最小权限原则</li><li>用户必须有 <code>iam:PassRole</code> 权限才能将 role 传递给 CloudFormation</li><li>应用场景: 限制开发者权限, 只允许通过 CloudFormation 管理特定资源, 不允许直接在 console 手动操作</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215347.png"></p><hr><h4 id="CloudFormation-DeletionPolicy"><a href="#CloudFormation-DeletionPolicy" class="headerlink" title="CloudFormation DeletionPolicy"></a>CloudFormation DeletionPolicy</h4><p>控制 CloudFormation template 删除或资源从 template 中移除时的行为</p><ul><li><code>DeletionPolicy = Delete</code> - 默认策略, stack 删除时同时删除资源<ul><li>S3 Bucket 非空时删除失败</li><li>适用于临时资源、测试环境</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220014.png"></p><ul><li><code>DeletionPolicy = Retain</code> - 保留资源, stack 删除时资源不被删除<ul><li>用于保护关键数据资源 (如生产数据库、重要 S3 bucket)</li><li>资源脱离 CloudFormation 管理变为独立资源</li><li>适用场景: 数据库迁移、资源转移到其他 stack</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220147.png"></p><ul><li><code>DeletionPolicy = Snapshot</code> - 删除资源前创建最终快照备份<ul><li>支持的资源: EBS Volume, RDS, Redshift, Neptune, DocumentDB</li><li>删除资源但保留快照, 可用于数据恢复</li><li>适用场景: 需要数据备份的资源清理</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220302.png"></p><hr><h4 id="CloudFormation-Stack-Policy"><a href="#CloudFormation-Stack-Policy" class="headerlink" title="CloudFormation Stack Policy"></a>CloudFormation Stack Policy</h4><ul><li>JSON 文档定义 stack 更新时允许的操作</li><li>防止关键资源被意外修改或删除</li><li>设置后默认拒绝所有更新, 必须显式允许</li><li>无法删除只能更新, 可使用临时 policy 覆盖</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220535.png"></p><hr><h4 id="CloudFormation-Termination-Protection"><a href="#CloudFormation-Termination-Protection" class="headerlink" title="CloudFormation Termination Protection"></a>CloudFormation Termination Protection</h4><ul><li>防止 CloudFormation Stack 被意外删除</li><li>启用 <code>TerminationProtection</code> 后必须先禁用才能删除 stack</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220655.png"></p><hr><h4 id="CloudFormation-Custom-Resources"><a href="#CloudFormation-Custom-Resources" class="headerlink" title="CloudFormation Custom Resources"></a>CloudFormation Custom Resources</h4><ul><li>用于定义 CloudFormation 不支持的资源或执行自定义逻辑</li><li>Template 中使用 <code>Custom::MyCustomResourceTypeName</code> 定义</li><li>工作原理: CloudFormation 发送请求到 Lambda&#x2F;SNS → Lambda 执行自定义操作 → 返回 SUCCESS&#x2F;FAILED 响应</li><li>典型应用场景<ul><li>清空 S3 bucket 后再删除 (解决非空 bucket 无法删除问题, 重要)</li><li>调用第三方 API 创建外部资源</li><li>初始化数据库 schema 或导入初始数据</li><li>执行复杂的资源配置逻辑</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221103.png"></p><hr><h4 id="CloudFormation-StackSets"><a href="#CloudFormation-StackSets" class="headerlink" title="CloudFormation StackSets"></a>CloudFormation StackSets</h4><ul><li>跨多个 AWS 账户和 Region 创建、更新、删除 stacks</li><li>只有 Administrator 账户可以创建 StackSets, target 账户接收部署</li><li>更新 StackSet 时所有关联的 stack instances 自动更新</li><li>部署配置选项<ul><li>并发控制: 指定同时部署的账户&#x2F;Region 数量</li><li>失败容忍度: 设置可容忍的失败数量或百分比</li><li>部署顺序: 按 Region 优先或按账户优先</li></ul></li><li>典型应用场景: 多账户统一安全基线配置, 跨 Region 部署相同应用架构, 组织级别的合规策略部署</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221509.png"></p><hr><h3 id="17-SQS-SNS-Kinesis"><a href="#17-SQS-SNS-Kinesis" class="headerlink" title="17. SQS, SNS, Kinesis"></a>17. SQS, SNS, Kinesis</h3><h4 id="AWS-SQS"><a href="#AWS-SQS" class="headerlink" title="AWS SQS"></a>AWS SQS</h4><ul><li>解耦应用组件, 支持多对多通信模型 (视频处理队列、订单处理等场景)</li><li>自动扩展: 无限吞吐量, 无限消息数量</li><li>消息保留时间 4 天 (默认), 最长 14 天; 单条消息最大 256 KB</li><li>一次最多检索 10 条消息</li><li>Standard SQS 支持作为 S3 Event Notification 目标; FIFO SQS 不支持</li><li>并行处理场景选择 SQS; 解耦微服务 (无第三方集成需求) 选择 SQS</li><li>高吞吐量的请求-响应消息模式选择 Temporary Queue</li><li>长时间运行的工作流选择 Dedicated Worker Environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231916.png"></p><ul><li>Producing Messages<ul><li>消息持久化保存在 SQS 中直到被 consumer 删除</li><li>支持延迟投递 (<code>DelaySeconds</code>), FIFO 支持去重 (<code>MessageDeduplicationId</code>)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232217.png"></p><ul><li>Consuming Messages<ul><li>支持多个 consumer 并行处理消息</li><li>Consumer 必须在处理后调用 <code>DeleteMessage</code> 删除消息</li><li>未删除的消息在 Visibility Timeout 后会重新回到队列</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232414.png"></p><ul><li>Priority Queue 实现: 创建两个 Standard Queue (高优先级 &#x2F; 普通优先级), EC2 instances 优先轮询高优先级队列</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q32-i1.jpg"></p><ul><li><code>CreateQueue</code> API 关键配置<ul><li><code>VisibilityTimeout</code> 默认 30 秒</li><li>创建后无法更改队列类型 (Standard vs FIFO)</li></ul></li><li>监控: 使用 <code>ApproximateNumberOfMessagesVisible</code> 指标, 配合 backlog per instance metric 和 Target Tracking Scaling Policy 调整 worker 数量</li></ul><hr><h4 id="SQS-Message-Visibility-Timeout"><a href="#SQS-Message-Visibility-Timeout" class="headerlink" title="SQS Message Visibility Timeout"></a>SQS Message Visibility Timeout</h4><ul><li>Consumer 拉取消息后, 该消息在 Visibility Timeout 期间对其他 consumer 不可见</li><li>默认 30 秒, 范围 0 秒 - 12 小时</li><li><strong>Timeout 过长</strong>: Consumer 崩溃后, 消息被锁定, 重新处理需要等待较长时间</li><li><strong>Timeout 过短</strong>: Consumer 未完成处理, 消息提前回到队列, 导致重复消费 (考试重点)</li><li>使用 <code>ChangeMessageVisibility</code> API 动态调整单条消息的 Visibility Timeout</li><li>考试场景通常关注: Visibility Timeout 过短 → 重复消息 → 增加 timeout 或使用 <code>ChangeMessageVisibility</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020440.png"></p><hr><h4 id="SQS-Dead-Letter-Queues-DLQ"><a href="#SQS-Dead-Letter-Queues-DLQ" class="headerlink" title="SQS Dead Letter Queues (DLQ)"></a>SQS Dead Letter Queues (DLQ)</h4><ul><li>消息在 Visibility Timeout 后回到队列, 但某些消息可能本身无法处理 (格式错误、依赖服务不可用等)</li><li>DLQ 用于隔离反复失败的消息, 避免无限重试阻塞队列</li><li>设置 <code>MaximumReceives</code> 阈值: 消息重新进入队列次数超过阈值后自动转移到 DLQ</li><li>DLQ 适合用于调试和分析失败原因</li><li>FIFO 队列的 DLQ 必须也是 FIFO 队列; Standard 队列的 DLQ 必须是 Standard 队列</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164418.png"></p><ul><li>DLQ - Redrive to Source<ul><li>从 DLQ 中读取失败消息, 分析问题原因</li><li>修复代码后, 使用 Redrive 功能将消息从 DLQ 重新发送回源队列进行处理</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164607.png"></p><hr><h4 id="SQS-Delay-Queues"><a href="#SQS-Delay-Queues" class="headerlink" title="SQS Delay Queues"></a>SQS Delay Queues</h4><ul><li>延迟消息投递最长 15 分钟, 使用 <code>DelaySeconds</code> 参数设置</li><li>Consumer 在延迟时间到达前无法看到消息</li><li>适用场景: 需要延迟处理的任务 (如订单取消前的等待期)</li><li>可在队列级别设置默认延迟, 也可在消息级别单独设置</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164931.png"></p><hr><h4 id="SQS-Long-Polling"><a href="#SQS-Long-Polling" class="headerlink" title="SQS Long Polling"></a>SQS Long Polling</h4><ul><li>Consumer 调用 <code>ReceiveMessage</code> 时等待消息到达, 而不是立即返回空响应</li><li>减少 API 调用次数, 降低延迟和成本</li><li>等待时间 1-20 秒 (通过 <code>WaitTimeSeconds</code> 设置), 0 秒为 Short Polling</li><li>Long Polling 不能解决重复消息问题, 仍需依赖 Visibility Timeout 机制</li><li>可在队列级别或单次请求级别设置</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003255.png"></p><hr><h4 id="SQS-Extended-Client"><a href="#SQS-Extended-Client" class="headerlink" title="SQS Extended Client"></a>SQS Extended Client</h4><ul><li>处理大于 256 KB 的消息 (最大支持 2 GB)</li><li>使用 AWS SDK for Java Extended Client Library</li><li>原理: 大消息存储在 S3, SQS 中只保留 S3 对象引用</li><li>Consumer 使用 Extended Client 自动从 S3 下载完整消息</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165310.png"></p><hr><h4 id="SQS-FIFO-Queues"><a href="#SQS-FIFO-Queues" class="headerlink" title="SQS FIFO Queues"></a>SQS FIFO Queues</h4><ul><li>严格保证消息顺序, 队列名必须以 <code>.fifo</code> 结尾</li><li>默认吞吐量: 300 消息&#x2F;秒 (无批处理) 或 3000 消息&#x2F;秒 (使用批处理)</li><li>无 <code>MessageGroupID</code>: 所有消息串行处理, 只能有 1 个 consumer</li><li>有 <code>MessageGroupID</code>: 同一 Group 内消息有序, 不同 Group 可并行, 支持多个 consumer</li><li>SNS FIFO + SQS FIFO 可实现端到端有序消息传递</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003507.png"></p><ul><li>将 Standard Queue 转为 FIFO Queue<ul><li>删除现有 Standard Queue, 重新创建 FIFO Queue (无法直接转换)</li><li>确保队列名以 <code>.fifo</code> 结尾</li><li>确认吞吐量需求不超过 FIFO 限制 (3000 消息&#x2F;秒)</li></ul></li></ul><hr><h4 id="SQS-FIFO-Queues-Advanced"><a href="#SQS-FIFO-Queues-Advanced" class="headerlink" title="SQS FIFO Queues Advanced"></a>SQS FIFO Queues Advanced</h4><ul><li>De-duplication (去重)<ul><li>使用 <code>MessageDeduplicationID</code> 识别重复消息</li><li>5 分钟内发送相同 ID 的消息会被拒绝</li><li>或启用 <code>ContentBasedDeduplication</code>, 基于消息体 SHA-256 哈希自动去重</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170023.png"></p><ul><li>Message Grouping (消息分组)<ul><li>使用 <code>MessageGroupID</code> 对消息分组</li><li>同一 Group 内的消息严格有序, 只能由一个 consumer 顺序处理</li><li>不同 Group 的消息可并行处理, 支持多个 consumer 提高吞吐量</li><li>所有消息使用相同 <code>MessageGroupID</code> → 整个队列串行处理, 只能 1 个 consumer</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170254.png"></p><hr><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><ul><li>Pub&#x2F;Sub 模型, 一条消息发送给多个订阅者 (一对多)</li><li>Publisher 发送消息到 Topic, 所有订阅该 Topic 的 Subscriber 都会收到</li><li>Subscriber 类型: SQS, Lambda, Kinesis Data Firehose, HTTP&#x2F;HTTPS, Email, SMS, Mobile Push</li><li>支持 Message Filtering: 订阅者可基于消息属性过滤, 只接收感兴趣的消息</li><li>单个 Topic 最多 12,500,000 个订阅, 每个账户最多 100,000 个 Topic</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010634.png"></p><hr><h4 id="Fan-Out-Pattern"><a href="#Fan-Out-Pattern" class="headerlink" title="Fan Out Pattern"></a>Fan Out Pattern</h4><ul><li>SNS + SQS 组合: SNS Topic 发布一次消息, 多个 SQS 队列订阅并接收</li><li>完全解耦, 无数据丢失; 每个 SQS 队列可独立消费, 互不影响</li><li>支持 Message Filtering: 不同 SQS 订阅者可设置不同过滤策略, 只接收符合条件的消息</li><li>Kinesis Data Streams 也支持 Fan Out: 通过 Enhanced Fan-Out 每个 Consumer 获得专用 2MB&#x2F;s 吞吐量</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011026.png"></p><hr><h4 id="AWS-Kinesis"><a href="#AWS-Kinesis" class="headerlink" title="AWS Kinesis"></a>AWS Kinesis</h4><ul><li>实时数据流处理平台, 用于采集、处理、存储流式数据</li><li><strong>Kinesis Data Streams</strong>: 实时数据流的采集、存储和处理; 支持自定义消费者应用</li><li><strong>Kinesis Data Firehose</strong>: 将数据流加载到 AWS 数据存储 (S3, Redshift, OpenSearch, HTTP endpoints); 近实时, 自动扩展</li><li><strong>Kinesis Data Analytics</strong>: 使用 SQL 或 Apache Flink 实时分析数据流</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150053.png"></p><blockquote><p>Kinesis Agent 无法直接写入已配置为从 Kinesis Data Streams 接收数据的 Firehose delivery stream</p></blockquote><ul><li>Kinesis Agent: 独立的 Java 应用, 简化从服务器收集日志并发送到 Kinesis Data Streams 的过程</li></ul><hr><h4 id="Kinesis-Data-Streams"><a href="#Kinesis-Data-Streams" class="headerlink" title="Kinesis Data Streams"></a>Kinesis Data Streams</h4><ul><li>实时数据流采集和存储, 支持数据重放 (Replay) 和重新处理</li><li>数据保留期 24 小时 (默认) - 365 天; 数据写入后不可删除, 只能等待过期</li><li>适用场景: 实时日志分析、点击流数据、金融交易、IoT 传感器数据</li><li>Consumer 类型: Lambda, Kinesis Data Firehose, Kinesis Data Analytics, 自定义应用 (KCL)</li><li>每秒可从多个 Producer 采集数 GB 数据</li><li>考试提示: Kinesis Data Streams + SQL 查询 → 使用 Kinesis Data Analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014850.png"></p><ul><li>相同 Partition Key 的数据进入同一 Shard, 保证顺序性</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151123.png"></p><ul><li>Capacity Mode<ul><li><strong>Provisioned Mode</strong>: 手动指定 Shard 数量; 每个 Shard 1MB&#x2F;s 写入, 2MB&#x2F;s 读取; 按 Shard 小时计费</li><li><strong>On-Demand Mode</strong>: 自动扩展, 无需管理容量; 默认 4MB&#x2F;s 或 4000 records&#x2F;s; 按数据吞吐量计费</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151507.png"></p><hr><h4 id="Kinesis-Producers"><a href="#Kinesis-Producers" class="headerlink" title="Kinesis Producers"></a>Kinesis Producers</h4><ul><li>将数据记录写入 Kinesis Data Streams</li><li>Producer 类型<ul><li><strong>AWS SDK</strong>: 直接调用 <code>PutRecord</code> &#x2F; <code>PutRecords</code> API; 适合低吞吐量场景</li><li><strong>Kinesis Producer Library (KPL)</strong>: 高性能 C++&#x2F;Java 库, 支持批处理、压缩、聚合; 适合高吞吐量</li><li><strong>Kinesis Agent</strong>: 预构建应用, 从日志文件持续采集数据到 Kinesis</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172002.png"></p><ul><li>使用 Hash 函数对 Partition Key 计算, 决定数据进入哪个 Shard</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172126.png"></p><ul><li><code>ProvisionedThroughputExceededException</code> 异常处理<ul><li>原因: 写入速度超过 Shard 容量 (1MB&#x2F;s 或 1000 records&#x2F;s per shard)</li><li><strong>解决方案 1</strong>: 使用高度分散的 Partition Key, 避免热点 Shard</li><li><strong>解决方案 2</strong>: 实现指数退避重试机制</li><li><strong>解决方案 3</strong>: 增加 Shard 数量 (通过 UpdateShardCount 或 On-Demand Mode)</li><li><strong>解决方案 4</strong>: 减少请求频率或单条记录大小</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172335.png"></p><hr><h4 id="Kinesis-Consumers"><a href="#Kinesis-Consumers" class="headerlink" title="Kinesis Consumers"></a>Kinesis Consumers</h4><ul><li>从 Kinesis Data Streams 读取并处理数据记录</li><li>Consumer 类型: Lambda, Kinesis Data Analytics, Kinesis Data Firehose, 自定义应用 (KCL)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190504.png"></p><ul><li>Kinesis Consumers - 自定义 Consumer<ul><li><strong>Shared (Classic) Fan-Out</strong>: Pull 模式, 所有 Consumer 共享每个 Shard 的 2MB&#x2F;s 读取; 适合少量 Consumer, 成本低</li><li><strong>Enhanced Fan-Out</strong>: Push 模式, 每个 Consumer 获得专用 2MB&#x2F;s 读取; 适合多 Consumer 并发, 延迟更低 (~70ms), 成本高</li><li>Enhanced Fan-Out 可显著提升读取吞吐量, 避免 Consumer 之间竞争</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202712.png"></p><ul><li>Kinesis Consumers - AWS Lambda<ul><li>支持 Classic 和 Enhanced Fan-Out 两种模式</li><li>批量读取记录, 可配置批量大小和批处理时间窗口</li><li>Lambda 自动轮询 Kinesis, 处理失败时自动重试</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203145.png"></p><hr><h4 id="Kinesis-Client-Library-KCL"><a href="#Kinesis-Client-Library-KCL" class="headerlink" title="Kinesis Client Library (KCL)"></a>Kinesis Client Library (KCL)</h4><ul><li>Java&#x2F;Python&#x2F;Node.js&#x2F;Ruby 库, 简化从 Kinesis Data Streams 读取和处理数据</li><li>每个 Shard 只能由一个 KCL instance 读取, KCL 自动分配 Shard 给不同的 Worker</li><li>进度通过 Checkpoint 保存到 DynamoDB (需要 IAM 权限访问 DynamoDB)</li><li>支持负载均衡: KCL instances 数量可以少于或等于 Shard 数量, 自动分配工作负载</li><li>适合构建复杂的自定义 Consumer 应用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205645.png"></p><hr><h4 id="Kinesis-Operations"><a href="#Kinesis-Operations" class="headerlink" title="Kinesis Operations"></a>Kinesis Operations</h4><ul><li><strong>Shard Splitting</strong> (拆分分片)<ul><li>用于处理热点 Shard (Hot Shard), 将一个高流量 Shard 拆分为两个</li><li>增加 Stream 容量, 提升吞吐量</li><li>旧 Shard 关闭后数据仍可读取直到过期</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205913.png"></p><ul><li><strong>Merging Shards</strong> (合并分片)<ul><li>将两个低流量 Shard 合并为一个</li><li>减少 Stream 容量, 降低成本</li><li>旧 Shard 关闭但数据保留至过期</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210015.png"></p><hr><h4 id="Kinesis-Data-Firehose"><a href="#Kinesis-Data-Firehose" class="headerlink" title="Kinesis Data Firehose"></a>Kinesis Data Firehose</h4><ul><li>全托管服务, 将流式数据加载到数据存储和分析工具</li><li>Serverless, 自动扩展, 无需管理基础设施</li><li>支持数据转换 (Lambda 函数), 格式转换 (JSON → Parquet&#x2F;ORC), 压缩</li><li><strong>Near Real-Time</strong> 交付: 最小延迟 60 秒或当缓冲区达到 1MB (非实时, 考试需注意区分)</li><li>单一目标: 一个 Delivery Stream 只能写入一个目标 (S3, Redshift, OpenSearch, HTTP endpoint, Datadog 等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015040.png"></p><ul><li>支持的目标<ul><li>AWS: S3, Redshift (通过 S3 COPY), OpenSearch</li><li>第三方: Datadog, Splunk, New Relic, MongoDB</li><li>自定义: HTTP Endpoint</li><li><strong>不支持 DynamoDB</strong></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151812.png"></p><ul><li>Kinesis Data Streams vs Firehose<ul><li><strong>Data Streams</strong>: 实时 (200ms 延迟), 需要编写自定义 Consumer 代码, 数据保留 1-365 天, 支持 Replay</li><li><strong>Firehose</strong>: 近实时 (60s+ 延迟), 全托管无需编码, 无数据存储, 不支持 Replay, 直接写入目标</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152247.png"></p><hr><h4 id="Kinesis-Data-Analytics"><a href="#Kinesis-Data-Analytics" class="headerlink" title="Kinesis Data Analytics"></a>Kinesis Data Analytics</h4><ul><li>对 Kinesis Data Streams 或 Firehose 中的流式数据进行实时分析</li><li>全托管, 自动扩展, Serverless</li><li>支持两种分析引擎<ul><li><strong>SQL 应用</strong>: 使用标准 SQL 查询实时数据流, 适合简单聚合、过滤、转换</li><li><strong>Apache Flink 应用</strong>: 使用 Java&#x2F;Scala&#x2F;Python 编写复杂流处理逻辑, 支持高级分析和机器学习</li></ul></li><li>输入源: Kinesis Data Streams, Kinesis Data Firehose</li><li>输出目标: Kinesis Data Streams, Kinesis Data Firehose, Lambda, S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225813.png"></p><ul><li>Amazon Managed Service for Apache Flink<ul><li>使用 Apache Flink 处理和分析流式数据</li><li>适合复杂的实时 ETL, 事件驱动应用, 实时机器学习推理</li><li>自动管理集群, 快照和检查点, 支持精确一次 (Exactly-Once) 处理</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225906.png"></p><hr><h4 id="Data-Ordering-for-Kinesis-vs-SQS"><a href="#Data-Ordering-for-Kinesis-vs-SQS" class="headerlink" title="Data Ordering for Kinesis vs SQS"></a>Data Ordering for Kinesis vs SQS</h4><ul><li><strong>Kinesis Data Streams 数据排序</strong><ul><li>相同 Partition Key 的数据始终路由到同一 Shard, 保证顺序</li><li>适用场景: 大规模数据流, 需要多个 Consumer 并行消费不同 Shard</li><li>每个 Shard 内严格有序, 不同 Shard 之间无序</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154939.png"></p><ul><li><strong>SQS 数据排序</strong><ul><li>仅 SQS FIFO 队列支持排序, 使用 <code>MessageGroupID</code> 分组</li><li>相同 <code>MessageGroupID</code> 的消息严格有序, 不同 Group 可并行</li><li>适用场景: 需要动态数量的 Consumer, 无需 Shard 管理</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210807.png"></p><hr><h3 id="18-AWS-Mointoring-amp-Audit"><a href="#18-AWS-Mointoring-amp-Audit" class="headerlink" title="18. AWS Mointoring &amp; Audit"></a>18. AWS Mointoring &amp; Audit</h3><h4 id="CloudWatch-Metrics"><a href="#CloudWatch-Metrics" class="headerlink" title="CloudWatch Metrics"></a>CloudWatch Metrics</h4><ul><li>收集、存储和可视化 AWS 资源及应用程序的性能指标</li><li>AWS 服务自动发布指标 (如 EC2 CPU, EBS IOPS, S3 请求数等)</li><li>使用 <code>PutMetricData</code> API 推送自定义指标到 CloudWatch</li><li>第三方 API 或应用程序监控必须使用 Custom Metrics</li><li>指标保留: 1 分钟数据点保留 15 天, 5 分钟数据点保留 63 天, 1 小时数据点保留 455 天</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010357.png"></p><ul><li>CloudWatch - EC2 Detailed Monitoring<ul><li>默认监控: 5 分钟间隔, 免费</li><li>Detailed Monitoring: 1 分钟间隔, 额外收费; 适合需要快速响应的 Auto Scaling</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033959.png"></p><hr><h4 id="CloudWatch-Custom-Metrics"><a href="#CloudWatch-Custom-Metrics" class="headerlink" title="CloudWatch Custom Metrics"></a>CloudWatch Custom Metrics</h4><ul><li>自定义指标用于监控 AWS 原生不支持的数据 (如应用级别指标, 内存使用率等)</li><li>使用 <code>PutMetricData</code> API 发送自定义指标</li><li>标准分辨率: 1 分钟; 高分辨率: 最低 1 秒 (需在 API 调用中指定 <code>StorageResolution</code>)</li><li>可接受过去 2 周和未来 2 小时内的数据点 (用于补发或时钟偏移场景)</li><li>支持添加 Dimensions (维度) 用于筛选和聚合</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010630.png"></p><hr><h4 id="CloudWatch-Logs"><a href="#CloudWatch-Logs" class="headerlink" title="CloudWatch Logs"></a>CloudWatch Logs</h4><ul><li>集中存储和管理来自 AWS 服务和应用程序的日志</li><li>日志组织结构: Log Groups (日志组) → Log Streams (日志流)</li><li>日志保留策略在 Log Group 级别设置, 默认永久保留; 可设置 1 天 - 10 年</li><li>可导出到 S3 (批量归档), Kinesis Data Streams&#x2F;Firehose (实时流), Lambda (实时处理), OpenSearch (搜索分析)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010815.png"></p><ul><li>CloudWatch Logs Insights<ul><li>强大的查询引擎, 使用类 SQL 语法搜索和分析日志</li><li>支持聚合、过滤、统计、可视化</li><li>按扫描的数据量计费</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150531.png"></p><ul><li>CloudWatch Logs Subscriptions<ul><li>实时获取 CloudWatch Logs 中的日志事件进行处理和分析</li><li><strong>Subscription Filter</strong>: 过滤哪些日志事件传递到目标 (支持正则表达式)</li><li>目标: Kinesis Data Streams, Kinesis Data Firehose, Lambda</li><li><strong>Cross-Account Subscription</strong>: 跨账户发送日志到其他 AWS 账户的资源</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150643.png"></p><hr><h4 id="CloudWatch-Agent"><a href="#CloudWatch-Agent" class="headerlink" title="CloudWatch Agent"></a>CloudWatch Agent</h4><ul><li><strong>CloudWatch Logs Agent</strong> (旧版): 仅支持发送日志到 CloudWatch Logs</li><li><strong>CloudWatch Unified Agent</strong> (推荐): 收集系统级指标和日志<ul><li>支持收集 EC2 和 On-Premises 服务器的 CPU, RAM, Disk, Netstat, Process 等指标</li><li>同时收集日志并发送到 CloudWatch Logs</li><li>配置通过 SSM Parameter Store 或本地文件管理</li></ul></li><li>可安装在 On-Premises 服务器上, 实现混合云监控</li><li>需要 IAM 角色&#x2F;权限允许 Agent 发送数据到 CloudWatch</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151251.png"></p><hr><h4 id="CloudWatch-Logs-Metric-Filter"><a href="#CloudWatch-Logs-Metric-Filter" class="headerlink" title="CloudWatch Logs Metric Filter"></a>CloudWatch Logs Metric Filter</h4><ul><li>从日志数据中提取自定义指标, 监控特定事件和模式</li><li>使用模式匹配 (如正则表达式) 从日志中提取数值并转换为 CloudWatch Metric</li><li>常见用途: 统计错误次数, 监控特定 API 调用频率, 提取响应时间</li><li><strong>注意</strong>: Metric Filter 只处理创建后的日志事件, 不会回溯历史日志</li><li>提取的指标可用于 CloudWatch Alarms 触发告警</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011918.png"></p><hr><h4 id="CloudWatch-Alarms"><a href="#CloudWatch-Alarms" class="headerlink" title="CloudWatch Alarms"></a>CloudWatch Alarms</h4><ul><li>基于任何 CloudWatch Metric 触发通知或自动化操作</li><li>Alarm States: OK (正常), ALARM (告警), INSUFFICIENT_DATA (数据不足)</li><li>触发目标: SNS Topic (通知), EC2 Actions (停止&#x2F;终止&#x2F;重启&#x2F;恢复), Auto Scaling Actions</li><li>评估周期: 标准指标最快 1 分钟, 高分辨率自定义指标最快 10 秒</li><li>支持多种统计方法: Average, Sum, Min, Max, Percentile</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012137.png"></p><ul><li>Composite Alarms<ul><li>监控多个其他 Alarm 的状态, 使用 AND&#x2F;OR 逻辑组合</li><li>减少告警噪音: 仅当多个条件同时满足时触发</li><li>适合复杂的监控场景 (如应用的多层健康检查)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151615.png"></p><ul><li>可使用 <code>set-alarm-state</code> CLI 手动测试 Alarm 行为, 无需等待真实告警触发, 节省成本</li></ul><hr><h4 id="CloudWatch-Synthetics"><a href="#CloudWatch-Synthetics" class="headerlink" title="CloudWatch Synthetics"></a>CloudWatch Synthetics</h4><ul><li>可配置的脚本 (Canary), 用于主动监控 API, URL, 网站可用性和性能</li><li>使用 Headless Chrome 浏览器模拟用户行为</li><li>脚本语言: Node.js (JavaScript) 或 Python</li><li>运行频率: 一次性或定期 (最频繁每 1 分钟)</li><li>自动捕获截图, HAR 文件, CloudWatch Metrics 和 Logs</li><li>适用场景: 端到端用户流程测试, 链接检查, API 可用性监控</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012521.png"></p><hr><h4 id="AWS-EventBridge"><a href="#AWS-EventBridge" class="headerlink" title="AWS EventBridge"></a>AWS EventBridge</h4><ul><li>事件驱动架构的核心服务, 连接 AWS 服务, SaaS 应用和自定义应用</li><li><strong>Schedule</strong>: 定时触发 (Cron 表达式或 Rate 表达式), 替代 CloudWatch Events</li><li><strong>Event Pattern</strong>: 响应 AWS 服务事件 (如 EC2 状态变化, S3 上传) 或第三方 SaaS 应用事件</li><li>考试提示: 题目提到第三方应用集成 → 选择 EventBridge</li><li>目标: Lambda, SQS, SNS, Kinesis, Step Functions, ECS Task, 等</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185605.png"></p><ul><li>Event Bus<ul><li><strong>Default Event Bus</strong>: 接收 AWS 服务事件</li><li><strong>Custom Event Bus</strong>: 接收自定义应用或第三方 SaaS 事件</li><li><strong>Partner Event Bus</strong>: 接收 SaaS 合作伙伴事件 (如 Datadog, Zendesk)</li><li>支持 Archive 和 Replay 事件, 适合调试和灾难恢复</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190403.png"></p><ul><li>Schema Registry<ul><li>自动发现和记录 Event Bus 中的事件结构</li><li>为事件生成代码绑定 (Java, Python, TypeScript), 简化开发</li><li>支持版本管理和 Schema 演进</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190004.png"></p><ul><li>Resource-based Policy<ul><li>管理特定 Event Bus 的权限 (允许&#x2F;拒绝跨账户访问)</li><li>用于跨账户事件聚合或多区域事件路由</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190215.png"></p><hr><h4 id="AWS-X-Ray"><a href="#AWS-X-Ray" class="headerlink" title="AWS X-Ray"></a>AWS X-Ray</h4><ul><li>分布式跟踪系统, 用于分析和调试微服务架构的性能问题</li><li><strong>自动化跟踪分析</strong>: 识别性能瓶颈, 延迟热点, 错误根因</li><li><strong>服务地图可视化</strong>: 显示服务依赖关系和调用流程</li><li>支持跨账户跟踪和可视化</li><li>考试提示: 检查微服务 5XX 错误或性能问题 → 选择 X-Ray (而非 CloudTrail)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020641.png"></p><ul><li>如何启用 X-Ray<ul><li><strong>方法 1</strong>: 在代码中导入 AWS X-Ray SDK, 对请求进行插桩 (Instrumentation)</li><li><strong>方法 2</strong>: 安装 X-Ray Daemon (EC2&#x2F;On-Premises) 或启用 AWS 集成 (Lambda&#x2F;Elastic Beanstalk)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021009.png"></p><ul><li>X-Ray 故障排查<ul><li><strong>EC2</strong>: 确保 IAM Role 有 <code>AWSXRayDaemonWriteAccess</code> 权限 + 实例运行 X-Ray Daemon</li><li><strong>Lambda</strong>: IAM Role 附加 <code>AWSXRayWriteOnlyAccess</code> + 启用 Active Tracing</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021323.png"></p><ul><li>ECS &#x2F; Fargate 上运行 X-Ray Daemon<ul><li>将 X-Ray Daemon 作为 Sidecar 容器部署</li><li>为 X-Ray 容器提供正确的 IAM Task Role</li><li>使用环境变量 <code>AWS_XRAY_DAEMON_ADDRESS</code> 配置应用连接到 Daemon</li></ul></li></ul><hr><h4 id="X-Ray-Advanced"><a href="#X-Ray-Advanced" class="headerlink" title="X-Ray Advanced"></a>X-Ray Advanced</h4><ul><li><strong>Instrumentation</strong> (插桩)<ul><li>在应用代码中测量性能并写入跟踪信息</li><li>SDK 自动记录传入&#x2F;传出请求, 数据库调用, HTTP 调用, 队列消息等</li><li>手动插桩可添加自定义 Subsegments 和 Annotations</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021538.png"></p><ul><li>X-Ray 核心概念<ul><li><strong>Sampling (采样)</strong>: 控制记录的请求数量, 降低成本; 默认每秒第一个请求 + 额外请求的 5%</li><li><strong>Annotations (注释)</strong>: 键值对, 可索引和过滤; 用于自定义筛选条件 (如 <code>user_id</code>, <code>game_id</code>)</li><li><strong>Metadata (元数据)</strong>: 键值对, 不可索引; 用于存储附加信息</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021924.png"></p><ul><li>X-Ray Sampling Rules<ul><li>控制记录数据的数量, 平衡成本和可见性</li><li>默认规则: 每秒第一个请求 (Reservoir) + 额外请求的 5% (Rate)</li><li>可自定义规则: 基于服务名称, HTTP 方法, URL 路径等条件设置不同采样率</li><li>考试重点: 每秒第一个请求 + 额外请求 5%</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022256.png"></p><hr><h4 id="X-Ray-APIs"><a href="#X-Ray-APIs" class="headerlink" title="X-Ray APIs"></a>X-Ray APIs</h4><ul><li><strong>X-Ray Write APIs</strong> (写入跟踪数据)<ul><li><code>PutTraceSegments</code>: 上传 Segment 文档到 X-Ray</li><li><code>PutTelemetryRecords</code>: X-Ray Daemon 使用, 上传遥测数据 (SegmentsSentCount, BacklogSize 等)</li><li><code>GetSamplingRules</code>: 获取所有采样规则 (Daemon 定期调用以更新采样策略)</li><li><code>GetSamplingTargets</code>: 获取采样目标 (用于动态调整采样率)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022650.png"></p><ul><li><strong>X-Ray Read APIs</strong> (查询跟踪数据, 全部以 <code>Get</code> 或 <code>Batch</code> 开头)<ul><li><code>GetServiceGraph</code>: 获取服务依赖关系图</li><li><code>BatchGetTraces</code>: 根据 Trace ID 列表批量获取完整跟踪数据</li><li><code>GetTraceSummaries</code>: 获取时间范围内的 Trace ID 和摘要信息 (可基于 Annotations 过滤)</li><li><code>GetTraceGraph</code>: 获取一个或多个 Trace ID 的服务调用图</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022934.png"></p><hr><h4 id="X-Ray-with-Elastic-Beanstalk"><a href="#X-Ray-with-Elastic-Beanstalk" class="headerlink" title="X-Ray with Elastic Beanstalk"></a>X-Ray with Elastic Beanstalk</h4><ul><li>Elastic Beanstalk 原生支持 X-Ray 集成</li><li>启用方式<ul><li><strong>方法 1</strong>: Beanstalk Console 中启用 X-Ray Daemon</li><li><strong>方法 2</strong>: 在 <code>.ebextensions/xray-daemon.config</code> 配置文件中启用</li></ul></li><li>自动为应用配置 IAM 权限 (<code>AWSXRayDaemonWriteAccess</code>)</li><li>应用代码中导入 X-Ray SDK 并进行插桩</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023148.png"></p><hr><h4 id="AWS-Distro-for-OpenTelemetry"><a href="#AWS-Distro-for-OpenTelemetry" class="headerlink" title="AWS Distro for OpenTelemetry"></a>AWS Distro for OpenTelemetry</h4><ul><li>AWS 支持的开源项目 OpenTelemetry 发行版</li><li>提供统一的可观测性数据采集 (Traces, Metrics, Logs)</li><li>支持多种后端: X-Ray, CloudWatch, Prometheus, 第三方工具</li><li>与 X-Ray SDK 相比, 更开放, 避免供应商锁定</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023636.png"></p><hr><h4 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h4><ul><li>审计和合规服务, 记录 AWS 账户中的所有 API 调用和相关活动</li><li>全局服务, 覆盖所有区域; 资源被误删或配置变更时首选工具</li><li>可与 EventBridge 集成, 实时拦截和响应特定 API 调用</li><li>日志可发送到 S3 (长期存储), CloudWatch Logs (实时监控和告警)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023929.png"></p><ul><li>CloudTrail Events 类型<ul><li><strong>Management Events</strong>: 资源管理操作 (创建&#x2F;删除 EC2, 创建 VPC 等), 默认记录</li><li><strong>Data Events</strong>: 数据层面操作 (S3 对象级别活动, Lambda 函数调用), 默认不记录, 高频</li><li><strong>Insights Events</strong>: 检测异常活动 (如突发 API 调用激增), 需手动启用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023847.png"></p><ul><li>CloudTrail Insights<ul><li>自动检测账户中的异常活动 (如 API 调用率突增, 异常权限变更)</li><li>使用机器学习分析基线行为, 生成 Insights 事件</li><li>发送到 S3, CloudWatch Events, 用于安全响应</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192157.png"></p><ul><li>CloudTrail Event Retention<ul><li>默认保留 90 天, 之后自动删除</li><li>长期保留: 将日志发送到 S3 bucket, 使用 Athena 查询分析历史日志</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163847.png"></p><hr><h3 id="19-Lambda"><a href="#19-Lambda" class="headerlink" title="19. Lambda"></a>19. Lambda</h3><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>Serverless 计算服务, 运行代码无需管理服务器</li><li>执行时间限制: 最长 15 分钟; 按需运行, 自动扩展</li><li>触发方式: 事件驱动 (S3, DynamoDB, SQS 等) 或定时任务 (EventBridge CRON)</li><li>Account Limits<ul><li>并发执行数: 1000 (默认, 可申请提升)</li><li>环境变量: 单个变量最大 4 KB, 总大小无限制</li><li>部署包: 50 MB (zip 直接上传), 250 MB (解压后), 无限制 (通过 S3)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img162057.png"></p><ul><li>可连接 VPC 内的 Private Subnets, 访问 RDS, ElastiCache 等私有资源</li><li>提升 CPU 性能: 增加内存分配 (CPU 与内存成比例), 考试常见考点</li><li>加速冷启动: 使用 Provisioned Concurrency (预热实例); API Gateway Caching 仅减少调用次数</li></ul><hr><h4 id="Lambda-Synchronous-Invocations"><a href="#Lambda-Synchronous-Invocations" class="headerlink" title="Lambda Synchronous Invocations"></a>Lambda Synchronous Invocations</h4><ul><li><strong>同步调用</strong>: 调用者等待 Lambda 执行完成并返回结果</li><li>触发源: CLI, SDK, API Gateway, Application Load Balancer</li><li>特点<ul><li>结果立即返回 (成功或错误)</li><li>错误处理由客户端负责 (需实现重试逻辑)</li><li>调用者阻塞直到函数返回或超时</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164039.png"></p><hr><h4 id="Lambda-with-ALB"><a href="#Lambda-with-ALB" class="headerlink" title="Lambda with ALB"></a>Lambda with ALB</h4><ul><li>通过 ALB 将 Lambda 函数暴露为 HTTP(S) 端点</li><li>Lambda 必须注册到 ALB 的 Target Group</li><li>ALB 将 HTTP 请求转换为 Lambda 事件, Lambda 响应转换为 HTTP 响应</li><li>适用场景: 无需 API Gateway 的简单 HTTP 服务, 与现有 ALB 集成</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163555.png"></p><ul><li>ALB Multi-Header Values<ul><li>ALB 支持多值 HTTP Headers 和 Query String Parameters</li><li>以数组形式传递给 Lambda (需在 Target Group 启用 <code>lambda.multi_value_headers.enabled</code>)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163757.png"></p><hr><h4 id="Lambda-Asynchronous-Invocations"><a href="#Lambda-Asynchronous-Invocations" class="headerlink" title="Lambda Asynchronous Invocations"></a>Lambda Asynchronous Invocations</h4><ul><li><strong>异步调用</strong>: 调用者不等待 Lambda 执行结果, 立即返回</li><li>触发源: S3, SNS, CloudWatch Events, EventBridge, SES</li><li>特点<ul><li>事件放入 Lambda 内部 Event Queue, Lambda 从队列读取并处理</li><li>失败自动重试: 最多 3 次 (首次 + 2 次重试), 重试间隔 1 分钟 → 2 分钟</li><li>可配置 DLQ (Dead Letter Queue, SQS 或 SNS) 处理失败事件</li><li>可配置 Destination (成功&#x2F;失败事件发送到 SQS, SNS, Lambda, EventBridge)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164249.png"></p><hr><h4 id="Lambda-Event-Source-Mapping"><a href="#Lambda-Event-Source-Mapping" class="headerlink" title="Lambda Event Source Mapping"></a>Lambda Event Source Mapping</h4><ul><li>用于从流式数据源或队列中批量读取数据并调用 Lambda</li><li>支持的数据源: Kinesis Data Streams, DynamoDB Streams, SQS (Standard &amp; FIFO)</li><li>Lambda <strong>同步调用</strong> (不支持异步触发源如 SNS)</li><li>Event Source Mapping 由 Lambda 服务管理, 自动轮询数据源</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165403.png"></p><ul><li>Streams &amp; Lambda (Kinesis &amp; DynamoDB)<ul><li>Event Source Mapping 为每个 Shard 创建一个迭代器, 按顺序处理记录</li><li>低流量: 使用 Batch Window (等待时间) 累积批量记录</li><li>高流量: 单个 Shard 可并行处理多个批次 (最多 10 个并发批次)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165631.png"></p><ul><li>Streams &amp; Lambda 错误处理<ul><li>默认: 函数返回错误时, 整个批次重新处理直到成功或记录过期</li><li>配置: 可设置 <code>BisectBatchOnFunctionError</code> (失败时拆分批次), <code>MaximumRetryAttempts</code>, <code>MaximumRecordAgeInSeconds</code></li><li>失败记录可发送到 Destination (SQS, SNS)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165758.png"></p><ul><li>Queue &amp; Lambda (SQS &amp; SQS FIFO)<ul><li>Event Source Mapping 使用 Long Polling 轮询 SQS</li><li>Standard Queue: 最多 1000 个并发 Lambda 实例</li><li>FIFO Queue: Lambda 扩展到活动 Message Group 数量 (相同 Group 串行处理)</li><li>删除消息: Lambda 成功处理后自动从队列删除; 失败则消息回到队列 (基于 Visibility Timeout)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165931.png"></p><hr><h4 id="Lambda-Event-and-Context-Objects"><a href="#Lambda-Event-and-Context-Objects" class="headerlink" title="Lambda Event and Context Objects"></a>Lambda Event and Context Objects</h4><ul><li>Lambda 函数入口 <code>lambda_handler(event, context)</code> 的两个参数</li><li><strong><code>event</code></strong>: JSON 文档, 包含触发 Lambda 的数据<ul><li>内容取决于触发源 (S3 事件, API Gateway 请求, SQS 消息等)</li></ul></li><li><strong><code>context</code></strong>: 提供运行时信息<ul><li><code>context.aws_request_id</code>: 请求 ID</li><li><code>context.function_name</code>, <code>context.memory_limit_in_mb</code>, <code>context.log_group_name</code></li><li><code>context.get_remaining_time_in_millis()</code>: 剩余执行时间</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170535.png"></p><hr><h4 id="Lambda-Destinations"><a href="#Lambda-Destinations" class="headerlink" title="Lambda Destinations"></a>Lambda Destinations</h4><ul><li>配置 Lambda 执行结果的目标, 替代 DLQ 并提供更多功能</li><li><strong>异步调用</strong>: 为成功和失败事件分别定义目标 (SQS, SNS, Lambda, EventBridge)</li><li><strong>Event Source Mapping</strong>: 为丢弃的事件批次定义目标 (处理失败后的记录)</li><li>推荐使用 Destinations 而非 DLQ: 支持成功事件, 更详细的上下文信息</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170912.png"></p><hr><h4 id="Lambda-Permissions"><a href="#Lambda-Permissions" class="headerlink" title="Lambda Permissions"></a>Lambda Permissions</h4><ul><li><strong>Lambda Execution Role</strong> (IAM Role)<ul><li>授予 Lambda 访问其他 AWS 服务的权限 (如 S3, DynamoDB, CloudWatch Logs)</li><li>考试重点: 大部分 Lambda 权限问题与 Execution Role 相关</li><li>最佳实践: 每个函数使用独立的 Execution Role, 遵循最小权限原则</li><li>常用托管策略: <code>AWSLambdaBasicExecutionRole</code> (CloudWatch Logs), <code>AWSLambdaVPCAccessExecutionRole</code> (VPC 访问)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171158.png"></p><ul><li><strong>Lambda Resource-Based Policies</strong><ul><li>控制谁可以调用 Lambda 函数 (其他 AWS 账户, AWS 服务)</li><li>与 Execution Role 不同: Execution Role 控制 Lambda 访问外部资源, Resource Policy 控制外部访问 Lambda</li><li>常用场景: 允许 S3, API Gateway, EventBridge 调用 Lambda, 跨账户访问</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171329.png"></p><hr><h4 id="Lambda-Environment-Variables"><a href="#Lambda-Environment-Variables" class="headerlink" title="Lambda Environment Variables"></a>Lambda Environment Variables</h4><ul><li>键值对形式, 注入动态配置到 Lambda 函数 (无需修改代码)</li><li>适用场景: 数据库连接字符串, API 端点, 功能开关</li><li>安全存储敏感数据: 使用 KMS 加密环境变量 (如 API Keys, Secrets)</li><li>限制: 单个变量最大 4 KB, 所有变量总大小最大 4 KB</li><li>注意: 短期 Token 或频繁变化的密钥不适合环境变量, 应使用 Secrets Manager 或 Parameter Store</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173203.png"></p><hr><h4 id="Lambda-Logging-amp-Monitoring"><a href="#Lambda-Logging-amp-Monitoring" class="headerlink" title="Lambda Logging &amp; Monitoring"></a>Lambda Logging &amp; Monitoring</h4><ul><li><strong>日志</strong>: Lambda 执行日志自动存储到 CloudWatch Logs (需 Execution Role 有写权限)</li><li><strong>指标</strong>: CloudWatch Metrics 自动收集 Lambda 指标<ul><li>Invocations (调用次数), Duration (执行时间), Errors (错误次数), Throttles (限流次数)</li><li>ConcurrentExecutions (并发执行数), DeadLetterErrors (DLQ 错误)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173409.png"></p><ul><li>Lambda Tracing with X-Ray<ul><li>在 Lambda 配置中启用 Active Tracing</li><li>自动记录 AWS SDK 调用, HTTP 请求, 数据库查询</li><li>需 Execution Role 有 <code>AWSXRayWriteOnlyAccess</code> 权限</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173520.png"></p><hr><h4 id="CloudFront-Functions-amp-Lambda-Edge"><a href="#CloudFront-Functions-amp-Lambda-Edge" class="headerlink" title="CloudFront Functions &amp; Lambda@Edge"></a>CloudFront Functions &amp; Lambda@Edge</h4><ul><li>在 CloudFront 边缘位置运行代码, 实现低延迟自定义逻辑</li><li>两种选择: CloudFront Functions (轻量级), Lambda@Edge (功能强大)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173715.png"></p><ul><li><strong>CloudFront Functions</strong><ul><li>超大规模, 低延迟场景 (百万级请求&#x2F;秒)</li><li>仅支持 Viewer Request 和 Viewer Response</li><li>运行时: JavaScript, 执行时间 &lt; 1 ms, 内存 2 MB</li><li>适用: URL 重写, Header 修改, 简单认证, Cache Key 规范化</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173900.png"></p><ul><li><strong>Lambda@Edge</strong><ul><li>中等规模 (千级请求&#x2F;秒)</li><li>支持所有 CloudFront 事件: Viewer Request, Origin Request, Origin Response, Viewer Response</li><li>运行时: Node.js, Python; 执行时间最长 5-10 秒, 内存最大 10 GB</li><li>适用: 复杂逻辑, 访问外部资源 (如 S3, DynamoDB), 动态内容生成</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214545.png"></p><hr><h4 id="Lambda-in-VPC"><a href="#Lambda-in-VPC" class="headerlink" title="Lambda in VPC"></a>Lambda in VPC</h4><ul><li>默认 Lambda 运行在 AWS 管理的 VPC, 无法访问用户 VPC 内的资源 (如 RDS, ElastiCache)</li><li>配置 Lambda in VPC: 指定 VPC ID, Subnets, Security Groups</li><li>Lambda 在每个 Subnet 创建 ENI (Elastic Network Interface), 通过 ENI 访问 VPC 资源</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174359.png"></p><ul><li>Lambda in VPC - Internet Access<ul><li>VPC 内的 Lambda 默认无互联网访问</li><li><strong>错误做法</strong>: 部署在 Public Subnet (Lambda 无公网 IP, 无法访问互联网)</li><li><strong>正确做法 1</strong>: 部署在 Private Subnet + NAT Gateway&#x2F;Instance</li><li><strong>正确做法 2</strong>: 使用 VPC Endpoints 访问 AWS 服务 (S3, DynamoDB 等), 无需 NAT</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174704.png"></p><hr><h4 id="Lambda-Function-Performance"><a href="#Lambda-Function-Performance" class="headerlink" title="Lambda Function Performance"></a>Lambda Function Performance</h4><ul><li><strong>内存配置 (RAM)</strong><ul><li>范围 128 MB - 10240 MB (10 GB), 以 1 MB 递增</li><li>CPU 与内存成正比: 增加内存同时提升 CPU 性能</li><li>CPU 密集型任务: 增加内存是提升性能的主要方法</li></ul></li><li><strong>超时配置 (Timeout)</strong><ul><li>默认 3 秒, 最长 900 秒 (15 分钟)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174946.png"></p><ul><li><strong>Lambda Execution Context</strong><ul><li>临时运行环境, 初始化外部依赖 (数据库连接, SDK 客户端等)</li><li>在多次调用间可重用, 加速后续调用 (避免冷启动)</li><li>包含 <code>/tmp</code> 目录: 默认 512 MB, 最大 10240 MB (10 GB)</li><li><code>/tmp</code> 适用: 临时文件存储, 缓存数据, 大文件处理</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175158.png"></p><ul><li><strong>最佳实践: 在 Handler 外部初始化</strong><ul><li>数据库连接, SDK 客户端在 handler 函数外部初始化</li><li>Execution Context 重用时避免重复初始化, 减少延迟</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175513.png"></p><hr><h4 id="Lambda-Layers"><a href="#Lambda-Layers" class="headerlink" title="Lambda Layers"></a>Lambda Layers</h4><ul><li>创建可重用的代码库和依赖包, 多个 Lambda 函数共享</li><li>用途: 自定义运行时, 共享库 (如 NumPy, Pandas), 公共代码模块</li><li>单个函数最多 5 个 Layers, 总解压大小不超过 250 MB</li><li>减少部署包大小, 分离代码和依赖, 便于版本管理</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192245.png"></p><hr><h4 id="Lambda-File-Systems-Mounting"><a href="#Lambda-File-Systems-Mounting" class="headerlink" title="Lambda File Systems Mounting"></a>Lambda File Systems Mounting</h4><ul><li>Lambda 可挂载 EFS 文件系统 (需 Lambda in VPC)</li><li>适用场景: 大文件处理 (超过 <code>/tmp</code> 限制), 跨函数共享数据, 持久化存储</li><li>配置: 使用 EFS Access Points, 指定挂载路径 (如 <code>/mnt/efs</code>)</li><li>性能: EFS 提供低延迟持久化存储, 支持并发访问</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192513.png"></p><hr><h4 id="Lambda-Concurrency"><a href="#Lambda-Concurrency" class="headerlink" title="Lambda Concurrency"></a>Lambda Concurrency</h4><ul><li><strong>并发执行数</strong>: 同时处理的请求数量</li><li><strong>Account Limit</strong>: 默认 1000 (区域级别), 可通过工单提升</li><li><strong>Reserved Concurrency</strong>: 为特定函数保留并发数, 防止其他函数占用; 超出限制触发 <code>Throttle</code> 错误</li><li><strong>Unreserved Concurrency</strong>: 账户剩余并发数, 所有未设置 Reserved Concurrency 的函数共享</li><li>异步调用 Throttle 处理: 事件返回内部队列, 自动重试 (最多 6 小时)</li><li>同步调用 Throttle 处理: 返回 429 错误, 客户端需实现重试</li><li>考试提示: 超出并发限制 → 配置 Reserved Concurrency</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193032.png"></p><ul><li><strong>Cold Start &amp; Provisioned Concurrency</strong><ul><li><strong>Cold Start</strong>: 新实例首次请求需初始化环境 (下载代码, 初始化运行时), 延迟 100ms - 数秒</li><li><strong>Provisioned Concurrency</strong>: 预先初始化指定数量的实例, 保持热状态</li><li>适用场景: 延迟敏感应用, 流量高峰期 (如促销活动), 可配置 Auto Scaling 按计划调整</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224130.png"></p><hr><h4 id="Lambda-External-Dependencies"><a href="#Lambda-External-Dependencies" class="headerlink" title="Lambda External Dependencies"></a>Lambda External Dependencies</h4><ul><li>Lambda 函数依赖外部库 (如 NumPy, Pandas, SDK) 时, 需要打包到部署包</li><li>步骤<ol><li>本地安装依赖: <code>pip install -t . &lt;package&gt;</code></li><li>与函数代码一起打包为 <code>.zip</code> 文件</li><li>上传到 Lambda (直接上传或通过 S3)</li></ol></li><li>注意: 函数代码和依赖必须在同一个 <code>.zip</code> 文件中, 保持正确的目录结构</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224459.png"></p><hr><h4 id="Lambda-Container-Image"><a href="#Lambda-Container-Image" class="headerlink" title="Lambda Container Image"></a>Lambda Container Image</h4><ul><li>使用容器镜像部署 Lambda 函数 (支持 Docker 工作流)</li><li>适用场景: 复杂依赖, 大型依赖 (镜像最大 10 GB), 自定义运行时</li><li>要求: 容器镜像必须实现 Lambda Runtime API</li><li>限制: 不支持多架构容器镜像 (如同时支持 x86 和 ARM)</li><li>镜像存储在 Amazon ECR (Elastic Container Registry)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000324.png"></p><hr><h4 id="Lambda-Versions-and-Aliases"><a href="#Lambda-Versions-and-Aliases" class="headerlink" title="Lambda Versions and Aliases"></a>Lambda Versions and Aliases</h4><ul><li><strong>Lambda Versions</strong><ul><li><code>$LATEST</code>: 可编辑的工作版本</li><li><strong>发布版本</strong>: 不可变的快照, 有独立 ARN, 递增版本号 (v1, v2, v3…)</li><li>每个版本有独立配置和代码</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000644.png"></p><ul><li><strong>Lambda Aliases</strong><ul><li>指向特定版本的指针 (如 <code>dev</code> → v1, <code>prod</code> → v2)</li><li>支持流量加权: 金丝雀部署, 按百分比分配流量到不同版本</li><li>限制: Alias 不能指向另一个 Alias</li><li>好处: 客户端使用稳定的 Alias ARN, 无需更改代码即可切换版本</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000912.png"></p><hr><h4 id="Lambda-with-CodeDeploy"><a href="#Lambda-with-CodeDeploy" class="headerlink" title="Lambda with CodeDeploy"></a>Lambda with CodeDeploy</h4><ul><li>CodeDeploy 自动化 Lambda Alias 的流量切换, 支持安全部署</li><li>部署策略<ul><li><strong>Linear</strong>: 线性增长, 每 N 分钟增加固定百分比流量 (如 <code>Linear10PercentEvery10Minutes</code>)</li><li><strong>Canary</strong>: 先测试少量流量, 成功后切换全部 (如 <code>Canary10Percent5Minutes</code>: 10% 测试 5 分钟, 然后 100%)</li><li><strong>AllAtOnce</strong>: 立即切换全部流量</li></ul></li><li>支持自动回滚: CloudWatch Alarms 触发时回滚到旧版本</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001338.png"></p><hr><h4 id="Lambda-Function-URL"><a href="#Lambda-Function-URL" class="headerlink" title="Lambda Function URL"></a>Lambda Function URL</h4><ul><li>为 Lambda 函数提供专用的 HTTPS 端点, 无需 API Gateway</li><li>URL 格式: <code>https://&lt;url-id&gt;.lambda-url.&lt;region&gt;.on.aws</code></li><li>支持 CORS 配置, IAM 或公开访问控制</li><li>适用场景: 简单的 HTTP 端点, Webhook, 无需 API Gateway 高级功能 (限流, API Key 等)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001532.png"></p><hr><h4 id="Lambda-with-CodeGuru"><a href="#Lambda-with-CodeGuru" class="headerlink" title="Lambda with CodeGuru"></a>Lambda with CodeGuru</h4><ul><li>CodeGuru Profiler 分析 Lambda 函数运行时性能</li><li>自动为 Lambda 函数创建 Profiler Group</li><li>识别性能瓶颈 (CPU 密集代码, 内存泄漏, 低效算法)</li><li>提供优化建议和成本节省机会</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001843.png"></p><hr><h3 id="20-DynamoDB"><a href="#20-DynamoDB" class="headerlink" title="20. DynamoDB"></a>20. DynamoDB</h3><h4 id="AWS-DynamoDB"><a href="#AWS-DynamoDB" class="headerlink" title="AWS DynamoDB"></a>AWS DynamoDB</h4><ul><li>全托管 NoSQL 数据库, 跨多个 AZ 自动复制, 自动扩展, 无需预配服务器</li><li><strong>Table Class</strong><ul><li><strong>Standard</strong>: 默认, 适合频繁访问的数据</li><li><strong>Infrequent Access (IA)</strong>: 降低存储成本, 适合不常访问的数据</li></ul></li><li><strong>加密</strong>: 默认使用 AWS Owned Key 加密, 可选 AWS Managed Key 或 Customer Managed Key</li><li><strong>权限控制</strong>: 不支持 Resource-based Policy, 必须使用 IAM Role + AssumeRole (跨账户访问)</li><li>考试提示<ul><li>DynamoDB + Email 处理 → DynamoDB Streams</li><li>不可预测的流量 → On-Demand Capacity Mode</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012414.png"></p><ul><li><strong>Primary Key</strong> (创建时必须定义, 不可更改)<ul><li><strong>Partition Key (HASH)</strong>: 单一主键, 每个 Item 的 Partition Key 必须唯一</li><li><strong>Partition Key + Sort Key (HASH + RANGE)</strong>: 复合主键, 组合必须唯一; Partition Key 相同时, Sort Key 可用于排序和范围查询</li></ul></li><li><strong>Item 大小限制</strong>: 最大 400 KB (包括属性名和值)<ul><li>不适合存储图片、文件等大对象; 应存储在 S3, DynamoDB 保存 S3 对象引用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012627.png"></p><ul><li><strong>Backup 方法</strong><ul><li><strong>On-Demand Backup</strong>: 手动创建完整备份到 S3</li><li><strong>Point-in-Time Recovery (PITR)</strong>: 持续备份, 恢复到过去 35 天内任意秒级时间点</li><li>注意: Backup 存储在 S3, 但无法直接访问 S3 Buckets, 只能通过 DynamoDB 恢复</li></ul></li><li><strong>只读访问</strong>: 使用 IAM 托管策略 <code>AmazonDynamoDBReadOnlyAccess</code></li><li><strong>降低延迟方法</strong><ul><li>使用 <strong>Global Tables</strong> (多区域复制), 适合全球分布的用户</li><li>使用 <strong>Eventually Consistent Reads</strong> 替代 Strongly Consistent Reads (延迟更低, 成本更低)</li></ul></li></ul><hr><h4 id="DynamoDB-WCU-amp-RCU"><a href="#DynamoDB-WCU-amp-RCU" class="headerlink" title="DynamoDB WCU &amp; RCU"></a>DynamoDB WCU &amp; RCU</h4><ul><li><strong>Read&#x2F;Write Capacity Mode</strong><ul><li><strong>Provisioned Mode</strong> (默认): 手动设置 RCU 和 WCU, 支持 Auto Scaling; 适合可预测的流量</li><li><strong>On-Demand Mode</strong>: 按实际使用量付费, 自动扩展; 适合不可预测或间歇性流量</li></ul></li><li>RCU 和 WCU 独立配置, 可单独调整</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014420.png"></p><ul><li><strong>Provisioned Mode</strong><ul><li><strong>RCU (Read Capacity Units)</strong>: 读取吞吐量</li><li><strong>WCU (Write Capacity Units)</strong>: 写入吞吐量</li><li><strong>Burst Capacity</strong>: 短时间内可超出预配容量 (使用未消耗的容量积累)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014716.png"></p><ul><li><strong>Write Capacity Units (WCU) 计算</strong><ul><li><strong>1 WCU</strong> &#x3D; 每秒 1 次写入, Item 大小最多 1 KB</li><li>Item 大小向上取整到 1 KB 的倍数</li><li>公式: <code>总写入次数/秒 × (Item 大小 KB / 1 KB 向上取整)</code></li><li>例子: 每秒 6 次写入, Item 大小 4.5 KB → <code>6 × 5 = 30 WCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014951.png"></p><ul><li><strong>Strongly Consistent Read vs. Eventually Consistent Read</strong><ul><li><strong>Eventually Consistent Read</strong> (默认): 可能读到旧数据 (复制延迟), 消耗 RCU 较少</li><li><strong>Strongly Consistent Read</strong>: 保证读到最新数据, 消耗 RCU 2 倍</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015146.png"></p><ul><li><strong>Read Capacity Units (RCU) 计算</strong><ul><li><strong>1 RCU</strong> &#x3D; 每秒 1 次 Strongly Consistent Read 或 2 次 Eventually Consistent Read, Item 大小最多 4 KB</li><li>Item 大小向上取整到 4 KB 的倍数</li><li><strong>Strongly Consistent Read</strong>: <code>总读取次数/秒 × (Item 大小 KB / 4 KB 向上取整)</code></li><li><strong>Eventually Consistent Read</strong>: <code>总读取次数/秒 / 2 × (Item 大小 KB / 4 KB 向上取整)</code></li><li>例子 1: 每秒 10 次 Strongly Consistent Read, Item 4 KB → <code>10 × 1 = 10 RCU</code></li><li>例子 2: 每秒 16 次 Eventually Consistent Read, Item 12 KB → <code>(16 / 2) × 3 = 24 RCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015532.png"></p><ul><li><strong>DynamoDB Partitions Internal</strong><ul><li>数据存储在分区中, Partition Key 决定数据所在分区</li><li>WCU 和 RCU 均匀分布到所有分区</li><li>分区数量由数据大小和预配容量决定</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015726.png"></p><ul><li><strong>DynamoDB Throttling</strong><ul><li>超出预配 RCU 或 WCU → <code>ProvisionedThroughputExceededException</code></li><li>原因: Hot Keys (某个 Partition Key 访问过多), Hot Partitions, 超大 Item</li><li>解决方案<ul><li>使用 Exponential Backoff 重试</li><li>分散 Partition Key (避免集中访问)</li><li>增加 RCU&#x2F;WCU 或使用 On-Demand Mode</li><li>使用 DynamoDB Accelerator (DAX) 缓存</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015936.png"></p><ul><li><strong>On-Demand Mode</strong><ul><li>读&#x2F;写自动扩展, 无需预配容量</li><li><strong>RRU (Read Request Units)</strong>: 等同于 RCU 计算方式</li><li><strong>WRU (Write Request Units)</strong>: 等同于 WCU 计算方式</li><li>按实际请求数量计费, 适合流量不可预测的应用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020318.png"></p><hr><h4 id="DynamoDB-Basic-Operations"><a href="#DynamoDB-Basic-Operations" class="headerlink" title="DynamoDB Basic Operations"></a>DynamoDB Basic Operations</h4><ul><li><strong>Writing Data</strong><ul><li><code>PutItem</code>: 创建新 Item 或完全替换已有 Item (覆盖所有属性)</li><li><code>UpdateItem</code>: 更新已有 Item 的属性, 或创建新 Item (如果不存在); 只修改指定属性, 保留其他属性</li><li><code>Conditional Writes</code>: 仅在满足条件时执行写入&#x2F;更新&#x2F;删除 (如 <code>attribute_exists</code>, <code>attribute_not_exists</code>)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020700.png"></p><ul><li><strong>Reading Data</strong><ul><li><code>GetItem</code>: 根据 Primary Key 读取单个 Item</li><li><code>Query</code>: 基于 Partition Key (必须) + Sort Key (可选) 查询; 支持 <code>KeyConditionExpression</code>, <code>FilterExpression</code>; 高效, 返回结果有序</li><li><code>Scan</code>: 扫描整个表并过滤数据; 低效, 消耗大量 RCU; 支持并行扫描 (Parallel Scan) 提升速度</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020844.png"></p><ul><li><strong>Deleting Data</strong><ul><li><code>DeleteItem</code>: 删除单个 Item (根据 Primary Key)</li><li><code>DeleteTable</code>: 删除整个表及所有 Item</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021027.png"></p><ul><li><strong>Batch Operations</strong><ul><li><code>BatchWriteItem</code>: 批量写入&#x2F;删除最多 25 个 Item, 减少 API 调用次数和延迟</li><li><code>BatchGetItem</code>: 批量读取最多 100 个 Item (最多 16 MB)</li><li>批量操作部分失败时返回未处理项, 需客户端重试</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021208.png"></p><ul><li><strong>Table Cleanup 方法</strong><ul><li><strong>方法 1</strong>: <code>Scan</code> + <code>DeleteItem</code> (逐个删除, 慢且消耗 RCU&#x2F;WCU)</li><li><strong>方法 2</strong>: <code>DeleteTable</code> + <code>CreateTable</code> (快速清空, 重新创建表)</li></ul></li><li><strong>Copying a Table 方法</strong><ul><li><strong>方法 1</strong>: AWS Data Pipeline (托管 ETL, 适合大规模数据迁移)</li><li><strong>方法 2</strong>: Backup + Restore (适合跨区域复制)</li><li><strong>方法 3</strong>: <code>Scan</code> + <code>PutItem</code>&#x2F;<code>BatchWriteItem</code> (自定义脚本, 灵活但慢)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033405.png"></p><hr><h4 id="DynamoDB-Conditional-Writes"><a href="#DynamoDB-Conditional-Writes" class="headerlink" title="DynamoDB Conditional Writes"></a>DynamoDB Conditional Writes</h4><ul><li>支持条件写入的操作: <code>PutItem</code>, <code>UpdateItem</code>, <code>DeleteItem</code>, <code>BatchWriteItem</code></li><li>通过条件表达式 (Conditional Expression) 控制哪些 Item 可被修改</li><li>仅当条件为 true 时执行写入; 条件失败则拒绝操作并返回错误</li><li>常用条件函数:<ul><li><code>attribute_exists(partition_key)</code> - 检查 Item 是否存在</li><li><code>attribute_not_exists(partition_key)</code> - 检查 Item 是否不存在</li><li><code>attribute_type</code> - 检查属性类型</li><li><code>begins_with</code> - 检查属性值前缀</li><li>比较运算符: <code>=</code>, <code>&lt;&gt;</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li><li>逻辑运算符: <code>AND</code>, <code>OR</code>, <code>NOT</code></li></ul></li><li>使用场景:<ul><li>乐观锁定 (Optimistic Locking): 仅在版本号匹配时更新</li><li>防止覆盖: 仅在 Item 不存在时创建</li><li>原子计数器: 仅在值满足条件时增减</li><li>数据完整性: 确保更新符合业务规则</li></ul></li><li>条件写入不消耗额外 WCU, 但失败的写入仍消耗 WCU</li><li>条件表达式是实现乐观锁定的推荐方式</li><li>条件失败返回 <code>ConditionalCheckFailedException</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022327.png"></p><hr><h4 id="DynamoDB-Indexes"><a href="#DynamoDB-Indexes" class="headerlink" title="DynamoDB Indexes"></a>DynamoDB Indexes</h4><ul><li><strong>Local Secondary Index (LSI)</strong><ul><li>为表提供备用 Sort Key (Partition Key 保持不变)</li><li>必须在创建表时定义, 之后无法添加或删除</li><li>使用主表的 WCU 和 RCU, 无需单独配置容量</li><li>Attribute Projections (属性投影):<ul><li><code>KEYS_ONLY</code> - 仅包含索引键和主键</li><li><code>INCLUDE</code> - 包含指定的额外属性</li><li><code>ALL</code> - 包含基表的所有属性</li></ul></li><li>每个表最多 5 个 LSI</li><li>所有 LSI 和基表 Item 的总大小不能超过 10 KB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025528.png"></p><ul><li><strong>Global Secondary Index (GSI)</strong><ul><li>提供备用 Primary Key (可以是不同的 Partition Key 和 Sort Key)</li><li>可以在创建表后添加、修改或删除</li><li>必须为索引单独配置 RCU 和 WCU</li><li>最终一致性 (Eventually Consistent), 数据更新可能有延迟</li><li>Attribute Projections: 与 LSI 相同的三种选项</li><li>每个表最多 20 个 GSI</li><li>可以跨不同属性查询数据</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025824.png"></p><ul><li><strong>Indexes and Throttling</strong><ul><li><strong>GSI</strong>: 如果 GSI 上的写入被节流, 主表也会被节流</li><li>GSI 的 WCU 不足会影响主表的写入性能</li><li>需要仔细规划 GSI 的容量以避免影响主表</li><li><strong>LSI</strong>: 使用主表的 WCU 和 RCU, 不会单独导致节流</li><li>LSI 的读写操作计入主表的容量单位</li></ul></li><li><strong>LSI vs GSI 关键区别</strong>:<ul><li>LSI 必须在创建表时定义, GSI 可以后续添加</li><li>LSI 共享主表容量, GSI 需要独立容量</li><li>LSI 支持强一致性读取 (Strongly Consistent Reads), GSI 只支持最终一致性</li></ul></li><li>考试提示: GSI 节流会导致主表节流 (常见考题)</li><li>需要强一致性读取时使用 LSI; 需要灵活查询不同属性时使用 GSI</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025950.png"></p><hr><h4 id="DynamoDB-PartiQL"><a href="#DynamoDB-PartiQL" class="headerlink" title="DynamoDB PartiQL"></a>DynamoDB PartiQL</h4><ul><li>使用类 SQL 语法操作 DynamoDB 表</li><li>支持 <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> 语句</li><li>适合熟悉 SQL 的开发者, 降低学习曲线</li><li>仍受 DynamoDB 限制 (如必须指定 Partition Key)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030113.png"></p><hr><h4 id="DynamoDB-Optimistic-Locking"><a href="#DynamoDB-Optimistic-Locking" class="headerlink" title="DynamoDB Optimistic Locking"></a>DynamoDB Optimistic Locking</h4><ul><li>乐观锁定策略: 确保 Item 在更新或删除前未被修改</li><li>通过 Conditional Writes 实现 (检查版本号或时间戳属性)</li><li>并发控制模型 (Concurrency Model): 适合低冲突场景</li><li>工作原理: 读取时记录版本号, 写入时检查版本号是否匹配; 不匹配则拒绝操作</li><li>考试提示: DynamoDB Optimistic Locking 使用 Conditional Writes 实现</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030304.png"></p><hr><h4 id="DynamoDB-DAX"><a href="#DynamoDB-DAX" class="headerlink" title="DynamoDB DAX"></a>DynamoDB DAX</h4><ul><li>DynamoDB Accelerator (DAX): 完全托管的内存缓存, 专为 DynamoDB 设计</li><li>通过缓存解决读取拥塞问题, 延迟降至微秒级 (microseconds)</li><li>仅提升读取性能 (read performance), 不提升写入性能</li><li>不支持 SQL 查询缓存 (DAX 不是 relational 数据库)</li><li>与应用程序无缝集成, 无需修改代码逻辑 (使用 DAX SDK)</li><li>考试提示: 需要缓存 DynamoDB 读取 → DAX (不是 ElastiCache)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233440.png"></p><hr><h4 id="DynamoDB-Stream"><a href="#DynamoDB-Stream" class="headerlink" title="DynamoDB Stream"></a>DynamoDB Stream</h4><ul><li>DynamoDB Streams: 记录表中 Item 级别修改的有序流 (ordered stream)</li><li>支持的目标: Lambda 函数, Kinesis Data Streams (注意: 不支持 SQS)</li><li>用途: 实时处理数据变更 (如发送通知邮件, 数据同步, 审计日志)</li><li>可以触发 Lambda 函数自动响应数据变更</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030626.png"></p><ul><li>DynamoDB Streams 由分片 (shards) 组成, 类似 Kinesis Data Streams</li><li>启用 Stream 后, 仅记录新的变更 (不会回溯已有数据)</li><li>记录保留 24 小时, 之后自动删除</li><li>可选的流视图类型 (Stream View Type):<ul><li><code>KEYS_ONLY</code> - 仅包含主键</li><li><code>NEW_IMAGE</code> - 修改后的完整 Item</li><li><code>OLD_IMAGE</code> - 修改前的完整 Item</li><li><code>NEW_AND_OLD_IMAGES</code> - 修改前后的完整 Item</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030940.png"></p><hr><h4 id="DynamoDB-TTL"><a href="#DynamoDB-TTL" class="headerlink" title="DynamoDB TTL"></a>DynamoDB TTL</h4><ul><li>Time to Live (TTL): 根据过期时间戳自动删除 Item</li><li>适用场景: 自动清理过期数据 (如会话记录, 临时数据, 事件日志)</li><li>过期 Item 在到期后 48 小时内删除 (非实时删除)</li><li>TTL 删除不消耗 WCU (免费操作)</li><li>删除的 Item 会出现在 DynamoDB Streams 中 (可用于审计或归档)</li><li>需要指定一个数字类型的属性作为 TTL 属性, 值为 Unix 时间戳 (秒)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031135.png"></p><hr><h4 id="DynamoDB-CLI"><a href="#DynamoDB-CLI" class="headerlink" title="DynamoDB CLI"></a>DynamoDB CLI</h4><ul><li><code>--projection-expression</code>: 选择要检索的属性子集 (subset of attributes)</li><li><code>--filter-expression</code>: 过滤 Item 以检索 Item 子集 (subset of items)</li><li><code>--max-items</code> &amp; <code>--starting-token</code>: 限制返回的 Item 数量, 支持分页</li><li><code>--page-size</code>: 控制每次 API 请求的 Item 数量 (不影响返回的总 Item 数)</li><li>考试提示: 问题涉及”选择特定属性” → 使用 <code>--projection-expression</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031324.png"></p><hr><h4 id="DynamoDB-Transactions"><a href="#DynamoDB-Transactions" class="headerlink" title="DynamoDB Transactions"></a>DynamoDB Transactions</h4><ul><li>事务操作: 跨一个或多个表协调多个 Item 的操作</li><li>提供 ACID 保证 (Atomicity 原子性, Consistency 一致性, Isolation 隔离性, Durability 持久性)</li><li>适用场景: 金融交易, 游戏计分, 订单处理等需要强一致性的场景</li><li>两种操作:<ul><li><code>TransactGetItems</code> - 事务读取 (最多 100 个 Item)</li><li><code>TransactWriteItems</code> - 事务写入 (最多 100 个 Item)</li></ul></li><li>消耗 2 倍的 WCU 和 RCU (事务成本是普通操作的 2 倍)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031646.png"></p><ul><li><strong>DynamoDB Transactions 容量计算</strong><ul><li>事务写入: 3 次写入, Item 大小 5 KB → <code>3 × (5/1 向上取整) × 2 = 3 × 5 × 2 = 30 WCU</code></li><li>事务读取: 5 次读取, Item 大小 5 KB → <code>5 × (5/4 向上取整) × 2 = 5 × 2 × 2 = 20 RCU</code></li><li>注意: 事务操作先按普通操作计算 WCU&#x2F;RCU, 再乘以 2</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032052.png"></p><hr><h4 id="DynamoDB-Session-State"><a href="#DynamoDB-Session-State" class="headerlink" title="DynamoDB Session State"></a>DynamoDB Session State</h4><ul><li>使用 DynamoDB 存储会话状态 (Session State)</li><li>适合无服务器架构, 自动扩展, 持久化存储</li><li>与 ElastiCache 对比:<ul><li>ElastiCache: 内存缓存, 延迟更低, 但需要管理集群</li><li>DynamoDB: Serverless, 完全托管, 持久化存储</li><li>两者都是 key&#x2F;value 存储</li></ul></li><li>考试提示: Serverless + 会话状态 → DynamoDB; 极低延迟 + 会话状态 → ElastiCache</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032422.png"></p><hr><h4 id="DynamoDB-Write-Sharding"><a href="#DynamoDB-Write-Sharding" class="headerlink" title="DynamoDB Write Sharding"></a>DynamoDB Write Sharding</h4><ul><li>写分片策略: 通过更均匀地分布 Item 到各分区来提升性能</li><li>解决 Hot Partition 问题 (某个分区访问量过高导致节流)</li><li>实现方式: 在 Partition Key 值后添加随机后缀 (如 <code>user123_1</code>, <code>user123_2</code>)</li><li>优点: 写入分散到多个分区, 避免单个分区过载</li><li>缺点: 查询时需要查询所有后缀的分区 (增加查询复杂度)</li><li>适用场景: 写入密集型应用, 特定 Partition Key 访问量极高的场景</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032640.png"></p><hr><h4 id="DynamoDB-Other-Features"><a href="#DynamoDB-Other-Features" class="headerlink" title="DynamoDB Other Features"></a>DynamoDB Other Features</h4><ul><li><strong>Backup and Restore</strong><ul><li>Point-in-Time Recovery (PITR): 类似 RDS, 可恢复到过去 35 天内任意时间点</li><li>On-Demand Backup: 手动创建完整备份, 长期保留</li></ul></li><li><strong>Global Tables</strong><ul><li>多区域复制 (Multi-region replication), 完全托管</li><li>双向复制, 任意区域可读写</li><li>适用场景: 全球分布的应用, 灾难恢复, 低延迟访问</li><li>要求: 必须启用 DynamoDB Streams</li></ul></li><li><strong>DynamoDB Local</strong><ul><li>本地开发和测试工具, 无需访问互联网或 AWS 账户</li><li>模拟 DynamoDB 功能, 降低开发成本</li><li>注意: 不支持所有 DynamoDB 功能 (如 TTL, 全局表)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033717.png"></p><ul><li><strong>DynamoDB Fine-Grained Access Control (细粒度访问控制)</strong><ul><li>使用 IAM 策略的 Condition 限制用户对特定 Item 或属性的访问</li><li>基于 Leading Key (前导键) 限制访问: 用户只能访问与自己 ID 匹配的 Item</li><li>示例: 条件 <code>dynamodb:LeadingKeys</code> 限制用户只能访问自己的数据</li><li>适用场景: 多租户应用, SaaS 平台, 用户隔离</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033855.png"></p><hr><h3 id="21-API-Gateway"><a href="#21-API-Gateway" class="headerlink" title="21. API Gateway"></a>21. API Gateway</h3><h4 id="AWS-API-Gateway"><a href="#AWS-API-Gateway" class="headerlink" title="AWS API Gateway"></a>AWS API Gateway</h4><ul><li>托管服务: 创建、发布和管理 REST API 和 WebSocket API</li><li>调用 Lambda 函数, 暴露 REST API (无状态客户端-服务器通信)</li><li>Lambda + API Gateway: 无需管理基础设施, 完全 Serverless</li><li>限流保护 (Throttling): 防止 API 被过多请求压垮</li><li><strong>API Gateway Caching</strong><ul><li>缓存 API 响应, 减少后端调用次数, 降低延迟</li><li>缓存 TTL: 0 秒到 3600 秒 (默认 300 秒)</li><li>按 Stage 级别配置缓存</li><li>考试提示: 降低 API 延迟 → API Gateway Caching</li></ul></li><li><strong>身份验证方式</strong><ul><li>Cognito User Pools: 用户身份验证和管理</li><li>IAM Permissions (Sigv4): 适合 AWS 内部服务调用</li><li>Lambda Authorizer (Custom Authorizer): 自定义身份验证逻辑</li><li>注意: API Gateway 不支持 STS 直接集成</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164125.png"></p><ul><li><strong>API Gateway Endpoint Types</strong><ul><li><strong>Edge-Optimized (默认)</strong>: 通过 CloudFront Edge Locations 分发, 适合全球客户端; API Gateway 部署在一个区域</li><li><strong>Regional</strong>: 仅在当前区域部署, 适合同区域客户端; 可以手动配置 CloudFront</li><li><strong>Private</strong>: 仅可从 VPC 内通过 ENI (Elastic Network Interface) 访问, 适合内部 API</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164338.png"></p><hr><h4 id="API-Gateway-Stages"><a href="#API-Gateway-Stages" class="headerlink" title="API Gateway Stages"></a>API Gateway Stages</h4><ul><li>API Gateway 修改不会立即生效, 需要”部署 (Deployment)”才能应用更改</li><li><strong>Stage (阶段)</strong>: API 的不同版本环境 (如 dev, test, prod)</li><li>每个 Stage 有独立的配置: 缓存设置, 限流设置, 日志级别等</li><li>Stage URL 格式: <code>https://&#123;api-id&#125;.execute-api.&#123;region&#125;.amazonaws.com/&#123;stage&#125;</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173311.png"></p><ul><li><strong>API Gateway Stage Variables</strong><ul><li>Stage Variables: 类似环境变量, 每个 Stage 可以有不同的值</li><li>使用场景:<ul><li>指向不同的 Lambda 函数或 Lambda Alias (如 dev → v1, prod → v2)</li><li>配置不同的后端 HTTP 端点</li><li>传递特定配置参数到集成</li></ul></li><li>从 test 提升到 prod: 直接更新 Stage Variable 指向新的 Lambda Alias, 无需修改代码</li><li>考试提示: 需要在不同环境使用不同后端 → Stage Variables</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190149.png"></p><hr><h4 id="API-Gateway-Canary-Deployment"><a href="#API-Gateway-Canary-Deployment" class="headerlink" title="API Gateway Canary Deployment"></a>API Gateway Canary Deployment</h4><ul><li>金丝雀部署: 逐步发布新版本, 先小规模测试, 再全面推广的策略</li><li>配置流量百分比: 选择 Canary 通道接收的流量比例 (0% - 50%)</li><li>工作原理: 新版本部署到 Canary, 分配部分流量进行测试; 验证通过后提升为主版本</li><li>可配置 Canary Stage Variables 和 Canary 缓存设置</li><li>优点: 降低发布风险, 快速回滚, 实时监控新版本性能</li><li>考试提示: 需要安全地测试新 API 版本 → Canary Deployment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190857.png"></p><hr><h4 id="API-Gateway-Integration-Types"><a href="#API-Gateway-Integration-Types" class="headerlink" title="API Gateway Integration Types"></a>API Gateway Integration Types</h4><ul><li><p><strong><code>MOCK</code></strong></p><ul><li>API Gateway 直接返回响应, 不发送请求到后端</li><li>用途: 测试 API 结构, 返回静态响应, 无需后端服务</li></ul></li><li><p><strong><code>HTTP / AWS</code> (Non-Proxy)</strong></p><ul><li>需要配置集成请求和集成响应</li><li>使用 Mapping Templates 设置请求&#x2F;响应的数据映射</li><li>完全控制请求和响应的转换</li><li>适用场景: 需要修改请求&#x2F;响应格式, 与 AWS 服务集成 (如 DynamoDB, S3)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191239.png"></p><ul><li><strong><code>AWS_PROXY</code> (Lambda Proxy)</strong><ul><li>客户端请求直接传递给 Lambda 函数作为输入</li><li>不使用 Mapping Templates, Headers, Query String 和 Body 作为参数传递</li><li>Lambda 返回格式必须符合 API Gateway 要求 (包含 <code>statusCode</code>, <code>body</code> 等)</li><li>优点: 简化配置, Lambda 处理所有逻辑</li><li>考试提示: 简化 Lambda 集成 → AWS_PROXY</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191413.png"></p><ul><li><strong><code>HTTP_PROXY</code></strong><ul><li>HTTP 请求直接传递到后端, 不进行任何转换</li><li>不使用 Mapping Templates</li><li>后端必须能够处理原始 HTTP 请求</li><li>适用场景: 代理现有的 HTTP 端点</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191520.png"></p><hr><h4 id="API-Gateway-Mapping-Templates"><a href="#API-Gateway-Mapping-Templates" class="headerlink" title="API Gateway Mapping Templates"></a>API Gateway Mapping Templates</h4><ul><li>Mapping Templates: 使用 VTL (Velocity Template Language) 修改请求和响应</li><li>用途:<ul><li>修改 Query String 参数</li><li>修改 Body 内容 (转换 JSON 格式, 过滤字段)</li><li>添加或删除 Headers</li><li>屏蔽输出数据中的敏感字段</li></ul></li><li>适用于 <code>HTTP / AWS</code> (Non-Proxy) 集成类型</li><li>常见场景: 将 REST API 请求转换为 SOAP, 过滤响应中的敏感信息</li><li>考试提示: 需要转换请求&#x2F;响应格式 → Mapping Templates</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191718.png"></p><hr><h4 id="API-Gateway-OpenAPI"><a href="#API-Gateway-OpenAPI" class="headerlink" title="API Gateway OpenAPI"></a>API Gateway OpenAPI</h4><ul><li>OpenAPI (Swagger): 定义 REST API 的标准规范, 将 API 定义为代码</li><li>可以导入 OpenAPI 3.0 定义来创建 API Gateway</li><li>可以导出现有 API 为 OpenAPI 定义</li><li>使用扩展 (x-amazon-apigateway-) 定义 API Gateway 特定功能</li><li><strong>Request Validation (请求验证)</strong>:<ul><li>在请求到达后端之前验证请求参数和 Body</li><li>减少不必要的后端调用, 降低成本和延迟</li><li>验证失败返回 400 错误</li><li>可验证: Query String, Headers, Request Body (基于 JSON Schema)</li></ul></li><li>考试提示: 减少无效请求到后端 → Request Validation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201259.png"></p><hr><h4 id="API-Gateway-Caching"><a href="#API-Gateway-Caching" class="headerlink" title="API Gateway Caching"></a>API Gateway Caching</h4><ul><li>缓存减少对后端的调用次数, 降低延迟和成本</li><li>缓存按 Stage 级别定义, 每个 Stage 有独立的缓存配置</li><li>默认 TTL: 300 秒, 最大 TTL: 3600 秒 (1 小时)</li><li>缓存容量: 0.5 GB 到 237 GB</li><li>客户端可以使用 Header <code>Cache-Control: max-age=0</code> 使缓存失效 (需要适当的 IAM 授权)</li><li>可以为每个方法 (Method) 覆盖缓存设置</li><li>考试提示: 降低 API 延迟和后端负载 → API Gateway Caching</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201709.png"></p><hr><h4 id="API-Gateway-Usage-Plans-amp-API-Keys"><a href="#API-Gateway-Usage-Plans-amp-API-Keys" class="headerlink" title="API Gateway Usage Plans &amp; API Keys"></a>API Gateway Usage Plans &amp; API Keys</h4><ul><li>将 API 作为产品提供给客户 (如 SaaS 服务)</li><li><strong>Usage Plan (使用计划)</strong>: 定义谁可以访问, 访问频率和限额<ul><li>Throttle (限流): 每秒请求数限制 (Burst 和 Rate)</li><li>Quota (配额): 每天&#x2F;周&#x2F;月的请求总数限制</li><li>关联到特定的 API Stage</li></ul></li><li><strong>API Keys</strong>: 用于识别客户端, 与 Usage Plan 配合控制访问<ul><li>注意: API Keys 不是安全机制, 仅用于使用跟踪和限流</li><li>应与其他身份验证方式 (IAM, Cognito, Lambda Authorizer) 配合使用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202109.png"></p><ul><li><strong>配置 Usage Plan 的步骤</strong>:<ol><li>创建 API 并配置方法要求 API Key</li><li>将 API 部署到 Stage</li><li>生成或导入 API Keys, 分发给应用开发者</li><li>创建 Usage Plan, 设置限流和配额</li><li>将 API Stage 和 API Keys 关联到 Usage Plan</li></ol></li><li>考试提示: 向客户提供付费 API → Usage Plans &amp; API Keys</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202324.png"></p><hr><h4 id="API-Gateway-Monitoring"><a href="#API-Gateway-Monitoring" class="headerlink" title="API Gateway Monitoring"></a>API Gateway Monitoring</h4><ul><li>CloudWatch 指标 (Metrics):<ul><li><code>CacheHitCount</code> &amp; <code>CacheMissCount</code>: 缓存效率, 缓存命中率</li><li><code>Count</code>: API 请求总数</li><li><code>IntegrationLatency</code>: API Gateway 到后端的请求和响应时间</li><li><code>Latency</code>: 完整的请求响应时间 (包括 API Gateway 开销)</li><li><code>4XXError</code>: 客户端错误 (如 400 Bad Request, 403 Forbidden, 404 Not Found)</li><li><code>5XXError</code>: 服务器错误 (如 502 Bad Gateway, 504 Gateway Timeout)</li></ul></li><li>常见错误码:<ul><li><code>400</code>: Bad Request - 请求格式错误</li><li><code>403</code>: Forbidden - WAF 过滤或授权失败</li><li><code>429</code>: Too Many Requests - 超出限流配置</li><li><code>502</code>: Bad Gateway - 后端返回无效响应</li><li><code>503</code>: Service Unavailable - 服务不可用</li><li><code>504</code>: Integration Timeout - 后端响应超时 (默认 29 秒)</li></ul></li><li>考试提示: 诊断 timeout 问题 → 查看 <code>IntegrationLatency</code> 和 <code>Latency</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202658.png"></p><hr><h4 id="API-Gateway-CORS"><a href="#API-Gateway-CORS" class="headerlink" title="API Gateway CORS"></a>API Gateway CORS</h4><ul><li>CORS (Cross-Origin Resource Sharing): 跨域资源共享</li><li>当 API 接收来自不同域名的调用时, 必须启用 CORS</li><li>CORS 配置 Headers:<ul><li><code>Access-Control-Allow-Origin</code>: 允许的来源域名 (如 <code>*</code> 或特定域名)</li><li><code>Access-Control-Allow-Methods</code>: 允许的 HTTP 方法 (如 GET, POST, PUT)</li><li><code>Access-Control-Allow-Headers</code>: 允许的 Headers</li></ul></li><li>CORS 也可以限制特定域名访问 API, 提升安全性</li><li>考试提示: 浏览器报 CORS 错误 → 启用 CORS 配置</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202855.png"></p><hr><h4 id="API-Gateway-Security"><a href="#API-Gateway-Security" class="headerlink" title="API Gateway Security"></a>API Gateway Security</h4><ul><li><strong>IAM Permissions (适合 AWS 账户内部访问)</strong><ul><li>身份验证 (Authentication): IAM</li><li>授权 (Authorization): IAM Policy</li><li>创建 IAM Policy 并附加到 User 或 Role</li><li>请求必须使用 Sig v4 签名</li><li>跨账户访问: 使用 Resource Policies</li><li>适用场景: AWS 服务之间调用, EC2&#x2F;Lambda 内部调用</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203055.png"></p><ul><li><strong>Cognito User Pools (适合管理自己的用户池)</strong><ul><li>身份验证: Cognito User Pools</li><li>授权: API Gateway Methods</li><li>API Gateway 自动验证来自 Cognito 的身份令牌</li><li>无需编写自定义授权代码</li><li>适用场景: 移动&#x2F;Web 应用的用户管理, 社交登录集成</li><li>考试提示: 管理用户身份 + API 访问 → Cognito User Pools</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203446.png"></p><ul><li><strong>Lambda Authorizer (适合第三方 Token 或自定义授权)</strong><ul><li>身份验证: External (第三方身份提供商)</li><li>授权: Lambda 函数</li><li>支持 Token-based (JWT, OAuth) 或 Request-based 授权</li><li>Lambda 函数返回 IAM Policy, 决定是否允许请求</li><li>可以使用请求参数 (Headers, Query String) 确定调用者身份</li><li>结果可以缓存, 减少 Lambda 调用次数</li><li>适用场景: 第三方 OAuth, 自定义授权逻辑, 复杂业务规则</li><li>考试提示: 第三方 Token 或自定义授权 → Lambda Authorizer</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203612.png"></p><hr><h4 id="API-Gateway-WebSocket-API"><a href="#API-Gateway-WebSocket-API" class="headerlink" title="API Gateway WebSocket API"></a>API Gateway WebSocket API</h4><ul><li>WebSocket API: 用于实时应用 (如聊天, 交易平台, 协作工具, 游戏)</li><li>WebSocket 是双向通信协议 (Two-way communication), 服务器可以主动推送数据给客户端</li><li>连接 URL 格式: <code>wss://[unique-id].execute-api.[region].amazonaws.com/[stage-name]</code></li><li>连接是有状态的 (Stateful), 保持长连接</li><li>API Gateway 维护连接 ID, 用于向特定客户端发送消息</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204056.png"></p><ul><li><strong>WebSocket API Routing (路由)</strong><ul><li>使用 Route Selection Expression 从 JSON 消息中选择字段进行路由</li><li>默认表达式: <code>$request.body.action</code></li><li>特殊路由:<ul><li><code>$connect</code>: 客户端连接时触发</li><li><code>$disconnect</code>: 客户端断开时触发</li><li><code>$default</code>: 未匹配到其他路由时触发</li></ul></li><li>自定义路由: 根据消息内容路由到不同的后端 (Lambda 函数, HTTP 端点)</li><li>示例: <code>&#123;&quot;action&quot;: &quot;sendMessage&quot;&#125;</code> 路由到 <code>sendMessage</code> 路由</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204735.png"></p><hr><h3 id="22-AWS-CICD"><a href="#22-AWS-CICD" class="headerlink" title="22. AWS CICD"></a>22. AWS CICD</h3><h4 id="AWS-CodeCommit"><a href="#AWS-CodeCommit" class="headerlink" title="AWS CodeCommit"></a>AWS CodeCommit</h4><ul><li>版本控制工具: 帮助理解代码的变更历史</li><li>私有 Git 仓库 (类似私有 GitHub), 完全托管, 无需管理服务器</li><li>支持标准 Git 操作 (clone, push, pull, branch, merge)</li><li>身份验证方式:<ul><li>Git Credentials: IAM 生成的 HTTPS 用户名和密码</li><li>SSH Keys: 上传公钥到 IAM</li><li>AWS Access Keys: 使用 AWS CLI credential helper</li></ul></li><li>数据加密: 传输中 (in transit) 和静态 (at rest) 均加密</li><li>考试提示: 使用 HTTPS 迁移仓库到 CodeCommit → 使用 IAM 生成的 Git Credentials</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213239.png"></p><hr><h4 id="AWS-CodePipeline"><a href="#AWS-CodePipeline" class="headerlink" title="AWS CodePipeline"></a>AWS CodePipeline</h4><ul><li>完全托管的 CI&#x2F;CD 编排服务, 自动化构建、测试和部署流程</li><li>编排整个发布流程 (Source → Build → Test → Deploy)</li><li>考试提示: 看到”orchestrate CI&#x2F;CD” → CodePipeline</li><li>可以为整个流程创建一个 Pipeline, 并添加手动批准步骤 (Manual Approval)</li><li>Pipeline 由多个 Stage 组成, 每个 Stage 可以包含多个 Action</li><li>支持集成: CodeCommit, GitHub, S3, CodeBuild, CodeDeploy, Lambda, ECS, Elastic Beanstalk</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215659.png"></p><ul><li><strong>Artifacts (构建产物)</strong>:<ul><li>每个 Stage 可以生成 Artifacts</li><li>Artifacts 存储在 S3 Bucket 中</li><li>自动传递到下一个 Stage 作为输入</li><li>示例: Build Stage 生成的 JAR 文件传递给 Deploy Stage</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215817.png"></p><hr><h4 id="AWS-CodeBuild"><a href="#AWS-CodeBuild" class="headerlink" title="AWS CodeBuild"></a>AWS CodeBuild</h4><ul><li>完全托管的持续集成服务 (Continuous Integration), 用于编译代码、运行测试、生成软件包</li><li>托管的 Jenkins 替代品, 无需管理构建服务器</li><li><strong>构建指令 (Build Instructions)</strong>:<ul><li><code>buildspec.yml</code> 文件: 必须位于代码根目录, 定义构建步骤</li><li>也可以在 Console 中手动插入构建命令</li></ul></li><li>部署前自动测试应用程序 (考试提示: 需要测试 → CodeBuild)</li><li>自动扩展 (Auto Scaling): 并行运行构建, 无需担心扩展问题</li><li>本地调试: 可以使用 CodeBuild Agent 在本地运行 CodeBuild</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220508.png"></p><ul><li><strong>buildspec.yml 关键点</strong>:<ul><li>必须位于代码根目录</li><li>定义构建阶段: <code>install</code>, <code>pre_build</code>, <code>build</code>, <code>post_build</code></li><li>指定构建产物 (artifacts) 和缓存 (cache)</li></ul></li><li>使用 KMS Key 加密构建产物 (build artifacts)</li><li>使用 Timeouts 防止构建过程过长 (默认 1 小时, 最长 8 小时)</li><li>在构建阶段打包依赖项到源代码中</li><li>考试提示: 构建产物加密 → KMS Key; 防止长时间构建 → Timeouts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220651.png"></p><hr><h4 id="AWS-CodeDeploy"><a href="#AWS-CodeDeploy" class="headerlink" title="AWS CodeDeploy"></a>AWS CodeDeploy</h4><ul><li>自动化部署服务, 将应用代码部署到各种计算环境 (EC2, Lambda, ECS, On-premises)</li><li><strong>自动回滚 (Automatic Rollback)</strong>:<ul><li>部署失败时自动回滚</li><li>重新部署最后一个正常版本, 生成新的 Deployment ID</li></ul></li><li><strong>appspec.yml 文件</strong>: 定义部署方式 (部署步骤, 脚本, 生命周期事件)</li><li>考试提示: 归档应用版本数量 → 使用 CodeDeploy Agent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220850.png"></p><ul><li><strong>CodeDeploy - EC2 &#x2F; On-premises Platform (需要 Agent)</strong><ul><li>支持两种部署类型:<ul><li><code>In-Place Deployment</code>: 在现有实例上停止应用, 部署新版本, 启动应用</li><li><code>Blue/Green Deployment</code>: 创建新实例, 部署新版本, 将流量从旧实例切换到新实例</li></ul></li><li>必须在目标实例上运行 CodeDeploy Agent</li><li><strong>生命周期事件顺序 (Lifecycle Events)</strong>:<br><code>ApplicationStop</code> → <code>DownloadBundle</code> → <code>BeforeInstall</code> → <code>Install</code> → <code>AfterInstall</code> → <code>ApplicationStart</code> → <code>ValidateService</code></li><li><strong>四种部署速度</strong>:<ul><li><code>AllAtOnce</code>: 同时部署到所有实例 (最快, 但有停机时间)</li><li><code>HalfAtATime</code>: 每次部署到一半实例</li><li><code>OneAtATime</code>: 每次部署到一个实例 (最慢, 但最安全)</li><li><code>Custom</code>: 自定义百分比</li></ul></li><li>考试提示: EC2 部署 → In-Place 或 Blue&#x2F;Green; Blue&#x2F;Green 可以重新路由流量</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221100.png"></p><ul><li><strong>CodeDeploy - Lambda Platform</strong><ul><li>自动化 Lambda Aliases 的流量切换</li><li>支持金丝雀部署 (Canary), 线性部署 (Linear), 全部切换 (AllAtOnce)</li><li>与 SAM 框架集成</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221326.png"></p><ul><li><strong>CodeDeploy - ECS Platform</strong><ul><li>自动部署新的 ECS Task Definition</li><li>支持 Blue&#x2F;Green 部署, 逐步切换流量</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221501.png"></p><ul><li><strong>CodeDeploy Deployment Groups</strong>:<ul><li>将应用部署到不同时间的不同 EC2 实例</li><li>按标签 (Tags) 或 Auto Scaling Group 分组实例</li><li>每个 Deployment Group 可以有不同的部署配置</li></ul></li></ul><hr><h4 id="AWS-CodeStar-CodeCatalyst"><a href="#AWS-CodeStar-CodeCatalyst" class="headerlink" title="AWS CodeStar (CodeCatalyst)"></a>AWS CodeStar (CodeCatalyst)</h4><ul><li>快速创建 CI&#x2F;CD 就绪的项目模板</li><li>支持的计算平台: EC2, Lambda, Elastic Beanstalk</li><li>统一仪表板 (Dashboard) 查看所有组件 (代码, 构建, 部署, 问题跟踪)</li><li>自动配置 CodeCommit, CodeBuild, CodeDeploy, CodePipeline</li><li>集成问题跟踪工具 (如 Jira)</li><li>考试提示: 统一查看 CI&#x2F;CD 组件 → CodeStar Dashboard</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224413.png"></p><hr><h4 id="AWS-CodeArtifact"><a href="#AWS-CodeArtifact" class="headerlink" title="AWS CodeArtifact"></a>AWS CodeArtifact</h4><ul><li>安全且经济高效的软件包管理服务 (类似私有 npm, Maven, PyPI)</li><li>存储和共享软件依赖项 (如 npm 包, Maven 依赖, Python 包)</li><li>开发者和 CodeBuild 可以直接从 CodeArtifact 检索依赖项</li><li>支持公共仓库代理 (如 npm, Maven Central), 缓存常用包</li><li>减少外部依赖风险, 提升构建速度</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221957.png"></p><ul><li><strong>CodeArtifact Resource Policy</strong><ul><li>资源策略 (Resource Policy): 允许其他 AWS 账户访问 CodeArtifact</li><li>跨账户共享软件包</li><li>示例: 允许组织内其他账户读取特定 CodeArtifact 仓库</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222141.png"></p><hr><h4 id="AWS-CodeGuru"><a href="#AWS-CodeGuru" class="headerlink" title="AWS CodeGuru"></a>AWS CodeGuru</h4><ul><li>基于机器学习的代码审查和性能优化服务</li><li><strong>CodeGuru Reviewer</strong>:<ul><li>自动化代码审查, 静态代码分析</li><li>检测代码缺陷, 安全漏洞, 性能问题</li><li>提供改进建议 (如资源泄漏, 线程安全问题)</li><li>适用阶段: 开发阶段 (Development)</li></ul></li><li><strong>CodeGuru Profiler</strong>:<ul><li>分析应用运行时性能</li><li>识别性能瓶颈 (如 CPU 密集代码, 内存泄漏)</li><li>提供成本优化建议</li><li>适用阶段: 生产环境 (Production)</li></ul></li><li>考试提示: 代码审查 → CodeGuru Reviewer; 性能优化 → CodeGuru Profiler</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222415.png"></p><hr><h4 id="AWS-Cloud9"><a href="#AWS-Cloud9" class="headerlink" title="AWS Cloud9"></a>AWS Cloud9</h4><ul><li>云端 IDE (Integrated Development Environment)</li><li>类似 VSCode, 直接在浏览器中编写、运行和调试代码</li><li>内置终端, 支持直接访问 AWS 服务</li><li>协作功能: 多人实时编辑同一代码</li><li>适用场景: 无需本地开发环境, 远程协作开发</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222601.png"></p><hr><h3 id="23-AWS-Serverless-Application-Model-SAM"><a href="#23-AWS-Serverless-Application-Model-SAM" class="headerlink" title="23. AWS Serverless Application Model (SAM)"></a>23. AWS Serverless Application Model (SAM)</h3><h4 id="AWS-SAM"><a href="#AWS-SAM" class="headerlink" title="AWS SAM"></a>AWS SAM</h4><ul><li>SAM (Serverless Application Model): 用于开发和部署无服务器应用的框架</li><li>简化 Lambda, API Gateway, DynamoDB 等 Serverless 资源的定义和部署</li><li>SAM 模板最终转换为 CloudFormation 模板进行部署</li><li><strong>AWS Serverless Application Repository (SAR)</strong>:<ul><li>共享和发现预构建的无服务器应用</li><li>可以与其他 AWS 账户或公开共享 SAM 应用</li><li>考试提示: 查找预构建无服务器应用 → SAR</li></ul></li><li><strong>部署流程</strong>:<ol><li>本地开发 SAM 模板 (template.yaml)</li><li>打包并上传到 S3 (<code>sam package</code> 或 <code>sam build</code>)</li><li>部署到 AWS (<code>sam deploy</code>)</li></ol></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153636.png"></p><ul><li><strong>SAM Recipe (模板配置)</strong>:<ul><li><strong>Transform Header</strong> (必需): <code>Transform: AWS::Serverless-2016-10-31</code></li><li>该 Header 将 SAM 模板转换为 CloudFormation 模板</li><li><strong>支持的资源类型</strong>:<ul><li><code>AWS::Serverless::Function</code> - Lambda 函数</li><li><code>AWS::Serverless::Api</code> - API Gateway</li><li><code>AWS::Serverless::SimpleTable</code> - DynamoDB 表</li></ul></li><li><strong>部署命令</strong>: <code>sam deploy</code> (将打包后的模板上传到 AWS)</li><li>考试提示: SAM 模板必需 Transform Header</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155435.png"></p><ul><li><strong>SAM Accelerate (<code>sam sync</code>)</strong>:<ul><li>快速同步本地更改到 AWS, 减少部署延迟</li><li>跳过 CloudFormation 完整部署流程, 直接更新资源</li><li>适用于开发和测试阶段, 加快迭代速度</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154010.png"></p><hr><h4 id="SAM-Policy-Templates"><a href="#SAM-Policy-Templates" class="headerlink" title="SAM Policy Templates"></a>SAM Policy Templates</h4><ul><li>预定义的权限模板列表, 简化 Lambda 函数的 IAM 权限配置</li><li>常用模板:<ul><li><code>S3ReadPolicy</code>: 只读访问 S3 对象</li><li><code>SQSPollerPolicy</code>: 允许轮询 SQS 队列</li><li><code>DynamoDBCrudPolicy</code>: DynamoDB 的 Create, Read, Update, Delete 权限</li><li><code>SQSWritePolicy</code>: 写入 SQS 队列</li><li><code>SNSPublishMessagePolicy</code>: 发布消息到 SNS</li></ul></li><li>在 SAM 模板中直接引用, 无需手动编写 IAM 策略</li><li>考试提示: 简化 Lambda 权限配置 → SAM Policy Templates</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154539.png"></p><hr><h4 id="SAM-Local-Capabilities"><a href="#SAM-Local-Capabilities" class="headerlink" title="SAM Local Capabilities"></a>SAM Local Capabilities</h4><ul><li>SAM Local: 在本地模拟、测试和调试无服务器应用</li><li>支持本地运行 Lambda 函数和 API Gateway 端点</li><li>需要 SAM CLI 和 AWS Toolkits</li><li><strong>本地启动 Lambda 函数</strong>:<ul><li><code>sam local invoke</code> - 本地调用 Lambda 函数</li><li><code>sam local start-lambda</code> - 启动本地 Lambda 端点</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154914.png"></p><ul><li><strong>本地启动 API Gateway 端点</strong>:<ul><li><code>sam local start-api</code> - 启动本地 API Gateway</li><li>在 <code>http://localhost:3000</code> 测试 API</li></ul></li><li><strong>生成 AWS 事件</strong>:<ul><li><code>sam local generate-event</code> - 生成测试事件 (如 S3, SQS, DynamoDB Streams)</li><li>用于本地测试 Lambda 函数对不同事件的响应</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155003.png"></p><hr><h3 id="24-Cloud-Development-Kit-CDK"><a href="#24-Cloud-Development-Kit-CDK" class="headerlink" title="24. Cloud Development Kit (CDK)"></a>24. Cloud Development Kit (CDK)</h3><h4 id="AWS-Cloud-Development-Kit"><a href="#AWS-Cloud-Development-Kit" class="headerlink" title="AWS Cloud Development Kit"></a>AWS Cloud Development Kit</h4><ul><li>CDK: 使用熟悉的编程语言 (TypeScript, Python, Java, C#, Go) 定义云基础设施</li><li>Infrastructure as Code (IaC): 使用编程语言而非 JSON&#x2F;YAML</li><li>可以同时部署基础设施和应用运行时代码</li><li>CDK 代码最终编译为 CloudFormation 模板进行部署</li><li>优势: 使用熟悉的 IDE, 代码补全, 类型检查, 逻辑控制 (循环, 条件)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160250.png"></p><ul><li><strong>CDK vs SAM</strong> (两者都使用 CloudFormation)<ul><li><strong>SAM</strong>:<ul><li>专注于 Serverless 应用 (Lambda, API Gateway, DynamoDB)</li><li>使用 JSON 或 YAML 格式</li><li>简化 Serverless 资源定义</li></ul></li><li><strong>CDK</strong>:<ul><li>支持所有 AWS 服务 (EC2, S3, VPC, RDS 等)</li><li>使用编程语言 (TypeScript, Python, Java, C#, Go)</li><li>更灵活, 可构建复杂基础设施</li></ul></li></ul></li><li>CDK 提供 App Templates (应用模板), CloudFormation 不提供</li><li>考试提示: 使用编程语言定义基础设施 → CDK; 仅 Serverless → SAM</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160532.png"></p><hr><h3 id="25-Cognito"><a href="#25-Cognito" class="headerlink" title="25. Cognito"></a>25. Cognito</h3><h4 id="AWS-Cognito"><a href="#AWS-Cognito" class="headerlink" title="AWS Cognito"></a>AWS Cognito</h4><ul><li>用户身份和访问管理服务, 提供用户注册、登录和访问控制功能</li><li>两个主要组件:<ul><li><strong>Cognito User Pools (CUP)</strong>: 用户身份验证 (Authentication), 用户目录</li><li><strong>Cognito Identity Pools (CIP)</strong>: 授权 (Authorization), 提供临时 AWS 凭证</li></ul></li><li><strong>CUP + CIP &#x3D; 完整的身份验证和授权解决方案</strong><ul><li>CUP: 验证用户身份, 颁发 JWT Token</li><li>CIP: 使用 CUP 或其他身份提供商, 颁发临时 AWS 凭证访问 AWS 资源</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181012.png"></p><ul><li><strong>Cognito Sync</strong>: 跨设备同步应用相关的用户数据 (已被 AppSync 取代)</li></ul><hr><h4 id="Cognito-User-Pools-CUP"><a href="#Cognito-User-Pools-CUP" class="headerlink" title="Cognito User Pools (CUP)"></a>Cognito User Pools (CUP)</h4><ul><li>用户目录和身份验证服务, 管理用户注册、登录、密码重置</li><li>集成对象:<ul><li>API Gateway: 验证 API 请求</li><li>Application Load Balancer (ALB): 保护 Web 应用</li><li>注意: 与 ALB 集成, 不是 CloudFront</li></ul></li><li>成功登录后返回 JWT Token (JSON Web Token)<ul><li>ID Token: 用户身份信息</li><li>Access Token: 访问用户池 API</li><li>Refresh Token: 刷新 ID 和 Access Token</li></ul></li><li><strong>Adaptive Authentication (自适应身份验证)</strong>:<ul><li>基于风险评估的安全措施</li><li>检测可疑登录 (如异常位置, 设备)</li><li>可疑登录时阻止或要求 MFA (多因素身份验证)</li></ul></li><li>支持社交登录 (Google, Facebook, Amazon) 和 SAML 身份提供商</li><li>考试提示: 用户身份验证 + API Gateway&#x2F;ALB → Cognito User Pools</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181142.png"></p><hr><h4 id="Cognito-Identity-Pools-CIP"><a href="#Cognito-Identity-Pools-CIP" class="headerlink" title="Cognito Identity Pools (CIP)"></a>Cognito Identity Pools (CIP)</h4><ul><li>为用户提供临时 AWS 凭证, 直接访问 AWS 服务 (如 S3, DynamoDB)</li><li>支持的身份提供商:<ul><li>Cognito User Pools</li><li>社交登录 (Google, Facebook, Amazon)</li><li>SAML 身份提供商</li><li>自定义身份提供商</li></ul></li><li>为认证用户和未认证用户 (Guest) 分配不同的 IAM 角色</li><li><strong>用户特定文件访问控制</strong>:<ul><li>使用 IAM Policy 变量 <code>$&#123;cognito-identity.amazonaws.com:sub&#125;</code> 限制用户访问</li><li>示例: 限制用户只能访问 S3 中自己的文件夹</li><li>考试提示: 用户特定文件上传&#x2F;下载 → IAM Policy with Cognito Identity Prefix</li></ul></li><li>临时凭证通过 STS AssumeRoleWithWebIdentity 获取</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img20555%EF%BC%95.png"></p><hr><h3 id="26-Step-Functions-amp-AppSync"><a href="#26-Step-Functions-amp-AppSync" class="headerlink" title="26. Step Functions &amp; AppSync"></a>26. Step Functions &amp; AppSync</h3><h4 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h4><ul><li>可视化工作流服务, 协调和编排分布式应用和微服务</li><li>使用 JSON 定义状态机 (State Machine), 可视化执行流程</li><li><strong>两种工作流类型</strong>:<ul><li><strong>Standard Workflow</strong>:<ul><li>长时间运行 (最长 1 年)</li><li>持久化 (Durable), 可审计 (Auditable)</li><li>精确执行一次 (Exactly-once execution)</li><li>适用场景: 订单处理, 数据管道, 复杂业务流程</li></ul></li><li><strong>Express Workflow</strong>:<ul><li>短时间运行 (最长 5 分钟)</li><li>高事件速率 (每秒 100,000+ 事件)</li><li>至少执行一次 (At-least-once execution)</li><li>两种模式: Synchronous (同步) 和 Asynchronous (异步)</li><li>适用场景: IoT 数据处理, 实时流处理, 移动后端</li></ul></li></ul></li><li><strong>Task States</strong>: 执行工作单元 (如调用 Lambda, 发布 SNS, 启动 ECS Task)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215042.png"></p><ul><li><strong>Parallel State</strong>: 并行执行多个分支, 等待所有分支完成后继续</li><li>常用状态类型:<ul><li><code>Task</code>: 执行工作</li><li><code>Choice</code>: 条件分支</li><li><code>Wait</code>: 等待指定时间</li><li><code>Parallel</code>: 并行执行</li><li><code>Map</code>: 迭代处理数组</li><li><code>Pass</code>: 传递输入到输出</li><li><code>Succeed</code> &#x2F; <code>Fail</code>: 成功或失败终止</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215355.png"></p><hr><h4 id="Step-Functions-Error-Handling"><a href="#Step-Functions-Error-Handling" class="headerlink" title="Step Functions Error Handling"></a>Step Functions Error Handling</h4><ul><li>任何状态都可能遇到运行时错误 (如 Lambda 超时, 权限不足, 资源不可用)</li><li>使用 <code>Retry</code> 和 <code>Catch</code> 在状态机中处理错误, 而非在应用代码中</li><li><strong>Retry (重试)</strong>:<ul><li>指定错误类型 (ErrorEquals)</li><li>重试间隔 (IntervalSeconds)</li><li>最大重试次数 (MaxAttempts)</li><li>退避倍率 (BackoffRate)</li></ul></li><li><strong>Catch (捕获)</strong>:<ul><li>捕获特定错误类型</li><li>跳转到指定状态 (Next)</li><li>可以记录错误或发送通知</li></ul></li><li>常见错误类型: <code>States.ALL</code>, <code>States.Timeout</code>, <code>States.TaskFailed</code>, <code>Lambda.ServiceException</code></li><li>考试提示: 工作流错误处理 → Step Functions Retry&#x2F;Catch</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215654.png"></p><hr><h4 id="Step-Functions-Wait-for-Task-Token"><a href="#Step-Functions-Wait-for-Task-Token" class="headerlink" title="Step Functions Wait for Task Token"></a>Step Functions Wait for Task Token</h4><ul><li>暂停 Step Functions 执行, 直到收到 Task Token (回调模式)</li><li>在 Resource 字段追加 <code>.waitForTaskToken</code></li><li>使用场景:<ul><li>等待人工审批</li><li>等待外部系统响应</li><li>集成第三方服务</li></ul></li><li>Task Token 通过 <code>SendTaskSuccess</code> 或 <code>SendTaskFailure</code> API 返回</li><li>超时时间可配置 (HeartbeatSeconds, TimeoutSeconds)</li><li>考试提示: 需要外部系统回调 → Wait for Task Token</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220013.png"></p><hr><h4 id="Step-Functions-Activity-Tasks"><a href="#Step-Functions-Activity-Tasks" class="headerlink" title="Step Functions Activity Tasks"></a>Step Functions Activity Tasks</h4><ul><li>Activity Task: 由 Activity Worker 执行的任务</li><li>Activity Worker 可以运行在任何地方 (EC2, Lambda, On-premises, 容器)</li><li>工作流程:<ol><li>Activity Worker 轮询 Step Functions 获取任务 (<code>GetActivityTask</code> API)</li><li>Worker 执行任务</li><li>Worker 返回结果 (<code>SendTaskSuccess</code> 或 <code>SendTaskFailure</code>)</li></ol></li><li>适用场景: 需要在 AWS 外部执行任务, 自定义处理逻辑</li><li>与 Lambda 集成的区别: Activity Worker 需要主动轮询, Lambda 由 Step Functions 调用</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220441.png"></p><hr><h4 id="AWS-AppSync"><a href="#AWS-AppSync" class="headerlink" title="AWS AppSync"></a>AWS AppSync</h4><ul><li>托管的 GraphQL 服务, 简化 API 开发</li><li>使用 GraphQL 查询语言, 客户端指定需要的数据</li><li>支持实时数据同步:<ul><li>WebSocket: 实时订阅数据变更</li><li>MQTT on WebSocket: 轻量级实时通信</li></ul></li><li>数据源集成: DynamoDB, Lambda, RDS, HTTP APIs, OpenSearch</li><li>自动生成 GraphQL Schema 和 Resolvers</li><li>离线数据同步: 移动应用离线时缓存数据, 联网后自动同步</li><li>适用场景: 移动&#x2F;Web 应用, 实时协作应用, 聊天应用</li><li>考试提示: GraphQL + 实时数据 → AppSync</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221024.png"></p><hr><h4 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a>AWS Amplify</h4><ul><li>用于创建移动和 Web 应用的完整开发平台 (类似 Google Firebase)</li><li>提供前端和后端服务集成:<ul><li><strong>Authentication (身份验证)</strong>: 集成 AWS Cognito, 提供用户注册、登录、MFA</li><li><strong>Datastore (数据存储)</strong>: 集成 AppSync 和 DynamoDB, 提供实时数据同步和离线支持</li><li><strong>Storage (存储)</strong>: 集成 S3, 提供文件上传下载</li><li><strong>API (GraphQL&#x2F;REST)</strong>: 集成 AppSync 和 API Gateway</li><li><strong>Functions (云函数)</strong>: 集成 Lambda</li><li><strong>Hosting (托管)</strong>: CI&#x2F;CD 部署, 自动构建和发布前端应用</li></ul></li><li>支持框架: React, Angular, Vue, Next.js, React Native, Flutter</li><li>Amplify Studio: 可视化开发环境, 拖拽创建 UI 和数据模型</li><li>Amplify CLI: 命令行工具, 快速配置后端资源</li><li>适用场景: 快速构建全栈应用, Serverless 移动&#x2F;Web 应用</li><li>考试提示: 快速构建移动&#x2F;Web 应用 → Amplify</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img22%EF%BC%96024.png"></p><hr><h3 id="27-Advanced-Identity"><a href="#27-Advanced-Identity" class="headerlink" title="27. Advanced Identity"></a>27. Advanced Identity</h3><h4 id="AWS-STS"><a href="#AWS-STS" class="headerlink" title="AWS STS"></a>AWS STS</h4><ul><li>STS (Security Token Service): 生成临时安全凭证访问 AWS 资源</li><li>授予有限且临时的访问权限 (默认 1 小时, 最长 12 小时)</li><li>主要 API:<ul><li><code>AssumeRole</code>: 跨账户访问或临时提升权限</li><li><code>AssumeRoleWithWebIdentity</code>: 使用 Web 身份提供商 (Google, Facebook) 登录</li><li><code>AssumeRoleWithSAML</code>: 使用 SAML 2.0 身份提供商</li><li><code>GetSessionToken</code>: 为 IAM 用户或 root 用户生成临时凭证 (需要 MFA)</li><li><code>GetFederationToken</code>: 为联合用户生成临时凭证</li></ul></li><li><strong>DecodeAuthorizationMessage</strong>:<ul><li>解码授权失败消息, 获取详细错误信息</li><li>考试提示: 看到 <code>decode-authorization-message</code> → STS API</li></ul></li><li>临时凭证有效期: 15 分钟到 12 小时 (默认 1 小时), 过期后需重新获取</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230636.png"></p><hr><h4 id="Advanced-IAM"><a href="#Advanced-IAM" class="headerlink" title="Advanced IAM"></a>Advanced IAM</h4><ul><li><strong>策略评估逻辑 (Policy Evaluation Logic)</strong>:<ol><li>默认: Deny (隐式拒绝)</li><li>检查所有策略中是否有明确的 Deny → 有则直接 Deny</li><li>检查是否有 Allow → 有则 Allow</li><li>否则 Deny (隐式拒绝)</li></ol><ul><li>考试提示: Deny 优先级最高, 明确 Deny 无法被 Allow 覆盖</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231838.png"></p><ul><li><strong>IAM Policies &amp; S3 Bucket Policies</strong>:<ul><li>同时评估 IAM Policy 和 S3 Bucket Policy</li><li>只要任一策略中有 Deny, 最终结果就是 Deny</li><li>需要 IAM 和 S3 策略都没有 Deny 且至少一个有 Allow, 才能访问</li><li>考试提示: 跨账户访问 S3 → IAM 和 Bucket Policy 都需要 Allow</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232221.png"></p><ul><li><strong>动态策略 (Dynamic Policies)</strong>:<ul><li>使用策略变量为特定用户定制 IAM 策略</li><li>常用变量:<ul><li><code>$&#123;aws:username&#125;</code> - IAM 用户名</li><li><code>$&#123;aws:userid&#125;</code> - IAM 用户 ID</li><li><code>$&#123;aws:PrincipalTag/tag-key&#125;</code> - Principal 标签值</li><li><code>$&#123;aws:CurrentTime&#125;</code> - 当前时间</li></ul></li><li>示例: 限制用户只能访问 S3 中自己的文件夹 <code>home/$&#123;aws:username&#125;/*</code></li><li>考试提示: 用户特定权限 → 动态策略变量</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232539.png"></p><hr><h4 id="IAM-Access-Analyzer"><a href="#IAM-Access-Analyzer" class="headerlink" title="IAM Access Analyzer"></a>IAM Access Analyzer</h4><ul><li>简化检查未使用的访问权限, 指导实现最小权限原则</li><li>功能:<ul><li>识别未使用的 IAM Roles, 用户, 访问密钥</li><li>删除不必要的权限, 降低安全风险</li><li>发现对资源和数据的意外访问 (如公开的 S3 Bucket, 跨账户访问)</li><li>持续监控并生成报告</li></ul></li><li>基于区域分析器 (Zone of Trust): 定义可信边界, 检测外部访问</li><li>考试提示: 移除未使用的 IAM 权限 → IAM Access Analyzer; 减少安全风险 → Access Analyzer</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012837.png"></p><hr><h4 id="AWS-Directory-Services-AD"><a href="#AWS-Directory-Services-AD" class="headerlink" title="AWS Directory Services (AD)"></a>AWS Directory Services (AD)</h4><ul><li>托管的 Microsoft Active Directory 服务, 简化身份验证和资源管理</li><li><strong>三种类型</strong>:<ul><li><strong>AWS Managed Microsoft AD</strong>:<ul><li>在 AWS 中运行完整的 Microsoft AD</li><li>支持 MFA, 信任关系 (与本地 AD 双向信任)</li><li>适用场景: 需要完整 AD 功能, 云中 Windows 工作负载</li><li>考试提示: AD 在 AWS, 需要完整 AD 功能 → AWS Managed Microsoft AD</li></ul></li><li><strong>AD Connector</strong>:<ul><li>代理服务, 重定向到本地 AD (AD 保留在本地)</li><li>支持 MFA, 不存储用户凭证</li><li>适用场景: 保留本地 AD, AWS 资源使用本地 AD 身份验证</li><li>考试提示: AD 在本地, AWS 连接本地 AD → AD Connector</li></ul></li><li><strong>Simple AD</strong>:<ul><li>AWS 托管的轻量级 AD 兼容目录</li><li>不支持 MFA, 信任关系</li><li>适用场景: 小型 AD 需求, 低成本</li></ul></li></ul></li><li>集成: EC2 实例加入域, 支持 SSO, RDS SQL Server 身份验证</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232910.png"></p><hr><h3 id="28-AWS-Security-amp-Encryption"><a href="#28-AWS-Security-amp-Encryption" class="headerlink" title="28. AWS Security &amp; Encryption"></a>28. AWS Security &amp; Encryption</h3><h4 id="Encryption-101"><a href="#Encryption-101" class="headerlink" title="Encryption 101"></a>Encryption 101</h4><ul><li><strong>传输中加密 (Encryption in Flight &#x2F; in Transit)</strong>:<ul><li>数据在发送前加密, 接收后解密</li><li>使用 SSL&#x2F;TLS 协议 (HTTPS)</li><li>防止中间人攻击 (Man-in-the-Middle Attack)</li></ul></li><li><strong>服务端加密 (Server-Side Encryption &#x2F; SSE)</strong>:<ul><li>数据在服务器端加密和解密</li><li>客户端发送明文数据, 服务器加密后存储</li><li>示例: S3 Server-Side Encryption</li></ul></li><li><strong>客户端加密 (Client-Side Encryption &#x2F; CSE)</strong>:<ul><li>数据在客户端加密, 服务器从不解密</li><li>服务器仅存储加密数据</li><li>客户端负责密钥管理</li><li>示例: S3 Client-Side Encryption</li></ul></li></ul><blockquote><p><strong>强制 S3 对象使用 SSL 请求</strong>: 使用 IAM Policy 条件 <code>aws:SecureTransport: true</code></p></blockquote><hr><h4 id="AWS-KMS"><a href="#AWS-KMS" class="headerlink" title="AWS KMS"></a>AWS KMS</h4><ul><li>KMS (Key Management Service): 托管的加密密钥服务</li><li>听到 AWS 服务的”加密” (encryption) → 大概率是 KMS</li><li>AWS 托管加密密钥: 适用于 EBS, S3, RDS, SSM 等 (无需手动创建)</li><li>KMS Keys 按区域 (Region) 隔离, 每个区域独立管理</li><li>自动密钥轮换 (Automatic Key Rotation): 每年轮换一次 (仅限 Customer Managed Keys)</li><li>KMS 不适合保存 Secret (如数据库密码), Secret 应使用 Secrets Manager</li><li>考试提示: 加密 ≠ Secret; KMS 用于加密, Secrets Manager 用于密钥管理</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175137.png"></p><ul><li><p><strong>KMS Keys 类型 (3 种)</strong>:</p><ul><li><strong>AWS Owned Keys</strong>: AWS 拥有, 用于多个账户, 用户无法查看或管理</li><li><strong>AWS Managed Keys</strong>: AWS 管理, 用户可查看但不能管理, 免费</li><li><strong>Customer Managed Keys (CMK)</strong>: 用户创建和管理, 可设置策略和轮换, 按使用量收费</li></ul></li><li><p>KMS 存储 CMK, 接收客户端数据, 加密后返回密文</p></li><li><p><strong>密钥形式 (2 种)</strong>:</p><ul><li><strong>Symmetric (对称密钥)</strong>: 单一密钥, 加密和解密使用同一密钥, AWS 服务默认使用</li><li><strong>Asymmetric (非对称密钥)</strong>: 公钥 + 私钥对, 公钥加密, 私钥解密, 用于签名验证</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171058.png"></p><ul><li><strong>KMS Key Policies (密钥策略)</strong>:<ul><li>类似 S3 Bucket Policies, 控制谁可以访问和使用 KMS Key</li><li>Default KMS Key Policy: 允许账户 root 用户完全访问</li><li>Custom KMS Key Policy: 定义特定用户&#x2F;角色的访问权限, 支持跨账户访问</li><li>考试提示: 跨账户访问 KMS Key → Custom KMS Key Policy</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175606.png"></p><blockquote><p><strong>删除 KMS Key</strong>: 具有破坏性和危险性, AWS KMS 强制执行等待期 (Pending Deletion State, 7-30 天), 期间可以取消删除</p></blockquote><hr><h4 id="KMS-Envelope-Encryption"><a href="#KMS-Envelope-Encryption" class="headerlink" title="KMS Envelope Encryption"></a>KMS Envelope Encryption</h4><ul><li>KMS <code>Encrypt</code> API 限制: 最多加密 4 KB 数据</li><li>加密大于 4 KB 的数据 → 使用信封加密 (Envelope Encryption)</li><li><strong>工作原理</strong>:<ol><li>调用 <code>GenerateDataKey</code> API 生成数据加密密钥 (DEK)</li><li>KMS 返回明文 DEK 和加密的 DEK</li><li>使用明文 DEK 加密大文件 (客户端)</li><li>删除明文 DEK, 存储加密的 DEK 和加密文件</li><li>解密时: 调用 <code>Decrypt</code> API 解密 DEK, 再使用 DEK 解密文件</li></ol></li><li>信封加密将数据密钥引用为代码中的文件</li><li>考试提示: 加密大于 4 KB 数据 → Envelope Encryption</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175943.png"></p><ul><li><strong>KMS Symmetric API 总结</strong>:<ul><li><code>Encrypt</code>: 加密最多 4 KB 数据</li><li><code>Decrypt</code>: 解密最多 4 KB 数据</li><li><code>GenerateDataKey</code>: 生成唯一的对称数据加密密钥 (DEK), 返回明文和密文</li><li><code>GenerateDataKeyWithoutPlaintext</code>: 生成 DEK 供以后使用, 仅返回密文</li><li><code>ReEncrypt</code>: 使用新的 KMS Key 重新加密数据, 无需先解密</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180803.png"></p><hr><h4 id="KMS-Limits"><a href="#KMS-Limits" class="headerlink" title="KMS Limits"></a>KMS Limits</h4><ul><li>KMS 请求配额 (Request Quotas): 按区域和 API 限制</li><li>超出配额 → 收到 <code>ThrottlingException</code></li><li>配额示例: 每秒 5,500 - 30,000 次请求 (根据区域和 API 类型)</li><li>解决方案:<ul><li>使用数据加密密钥 (DEK) 在客户端加密, 减少 KMS API 调用</li><li>使用指数退避 (Exponential Backoff) 重试</li><li>通过 API 或 AWS Support 请求配额增加</li></ul></li><li>考试提示: KMS API 限流 → ThrottlingException; 减少 KMS 调用 → 使用 DEK 缓存</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184019.png"></p><hr><h4 id="AWS-CloudHSM"><a href="#AWS-CloudHSM" class="headerlink" title="AWS CloudHSM"></a>AWS CloudHSM</h4><ul><li>托管的硬件安全模块 (Hardware Security Module) 服务</li><li>用户完全管理加密密钥 (AWS 无法访问密钥)</li><li>符合 FIPS 140-2 Level 3 安全标准</li><li>支持对称和非对称加密</li><li>部署在 VPC 中, 通过 ENI 访问</li><li>高可用性: 跨多个 AZ 部署</li><li>与 KMS 对比:<ul><li>KMS: AWS 管理密钥, 多租户, 更简单</li><li>CloudHSM: 用户管理密钥, 单租户, 更高安全性</li></ul></li><li>适用场景: 需要符合严格合规要求, 需要完全控制密钥</li><li>考试提示: 需要完全控制密钥 → CloudHSM</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184859.png"></p><hr><h4 id="SSM-Parameter-Store"><a href="#SSM-Parameter-Store" class="headerlink" title="SSM Parameter Store"></a>SSM Parameter Store</h4><ul><li>安全的存储服务, 管理配置数据和密钥 (密码, 数据库字符串, License keys 等)</li><li>用途广泛: URLs, AMI IDs, License Keys, 配置参数 (比 Secrets Manager 更广)</li><li><strong>没有自动密钥轮换</strong> (与 Secrets Manager 的关键区别)</li><li><strong>内置版本跟踪</strong>: 每次编辑都会记录, 可回溯历史版本</li><li>三种参数类型:<ul><li>String: 普通字符串</li><li>StringList: 逗号分隔的字符串列表</li><li>SecureString: 使用 KMS 加密的敏感数据</li></ul></li><li>两个层级:<ul><li>Standard: 免费, 最多 10,000 个参数, 参数值最大 4 KB</li><li>Advanced: 收费, 最多 100,000 个参数, 参数值最大 8 KB, 支持参数策略</li></ul></li><li>集成: CloudFormation, EC2, Lambda, CodeBuild</li><li>考试提示: 配置管理 + 无需自动轮换 → SSM Parameter Store</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173611.png"></p><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><ul><li>专门存储敏感信息 (数据库凭证, API Keys) 的托管服务</li><li><strong>与 RDS &amp; Aurora 深度集成</strong>: 自动轮换数据库凭证</li><li><strong>自动密钥轮换</strong>: 默认 90 天 (可自定义)</li><li>与 SSM Parameter Store 对比:<ul><li>Secrets Manager: 专注于密钥, 支持自动轮换, 更贵</li><li>SSM Parameter Store: 通用配置, 无自动轮换, 更便宜</li></ul></li><li>与 KMS 对比:<ul><li>KMS: 用于加密数据</li><li>Secrets Manager: 用于存储和管理密钥</li></ul></li><li>Lambda 轮换函数: 自动调用 Lambda 更新密钥</li><li>考试提示: 数据库凭证 + 自动轮换 → Secrets Manager; Secrets Manager 轮换 90 天, KMS 轮换 1 年</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185726.png"></p><ul><li><strong>Multi-Region Secrets</strong>:<ul><li>跨多个 AWS 区域复制 Secrets</li><li>用于灾难恢复 (Disaster Recovery)</li><li>主 Secret 更新时自动同步到副本区域</li><li>类似 Multi-Region KMS Keys</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174258.png"></p><hr><h4 id="CloudWatch-Logs-Encryption"><a href="#CloudWatch-Logs-Encryption" class="headerlink" title="CloudWatch Logs Encryption"></a>CloudWatch Logs Encryption</h4><ul><li>使用 KMS Keys 加密 CloudWatch Logs</li><li>加密在日志组 (Log Group) 级别启用, 关联 CMK</li><li><strong>两种配置方式</strong>:<ul><li><code>associate-kms-key</code>: 日志组已存在时使用 (考试重点)</li><li><code>create-log-group</code>: 创建新日志组时指定 KMS Key</li></ul></li><li>默认情况下 CloudWatch Logs 未加密</li><li>考试提示: 已存在的 CloudWatch Logs 加密 → associate-kms-key</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190545.png"></p><hr><h4 id="AWS-Nitro-Enclaves"><a href="#AWS-Nitro-Enclaves" class="headerlink" title="AWS Nitro Enclaves"></a>AWS Nitro Enclaves</h4><ul><li>在隔离的计算环境中处理高度敏感数据</li><li>基于 Nitro Hypervisor, 提供 CPU 和内存隔离</li><li>无持久化存储, 无外部网络, 无交互式访问</li><li>使用加密证明 (Cryptographic Attestation) 验证 Enclave</li><li>适用场景: 处理个人身份信息 (PII), 医疗数据, 财务数据, 加密密钥处理</li><li>与主 EC2 实例通过本地安全通道通信</li><li>考试提示: 隔离环境处理敏感数据 → Nitro Enclaves</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190809.png"></p><hr><h3 id="29-Other-AWS-Services"><a href="#29-Other-AWS-Services" class="headerlink" title="29. Other AWS Services"></a>29. Other AWS Services</h3><h4 id="AWS-SES-Simple-Email-Service"><a href="#AWS-SES-Simple-Email-Service" class="headerlink" title="AWS SES (Simple Email Service)"></a>AWS SES (Simple Email Service)</h4><ul><li>托管服务, 安全发送电子邮件</li><li>适用场景:<ul><li>营销邮件 (Marketing emails)</li><li>事务性邮件 (Transactional emails, 如订单确认)</li><li>批量邮件发送</li></ul></li><li>集成: Lambda, SNS, S3 (接收邮件)</li><li>支持 SMTP 接口和 API 调用</li><li>考试提示: 发送邮件 → SES</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004334.png"></p><hr><h4 id="AWS-OpenSearch"><a href="#AWS-OpenSearch" class="headerlink" title="AWS OpenSearch"></a>AWS OpenSearch</h4><ul><li>托管的搜索和分析引擎 (原名 ElasticSearch)</li><li>支持全文搜索, 部分匹配 (Partial Matches), 任意字段搜索</li><li>适用场景:<ul><li>日志分析和可视化 (搭配 Kibana)</li><li>应用程序搜索 (搜索产品, 文档)</li><li>实时数据分析</li></ul></li><li>与 Athena 对比:<ul><li>OpenSearch: 实时搜索, 全文检索</li><li>Athena: 批量查询, SQL 分析 S3 数据</li></ul></li><li>考试提示: 全文搜索 + 部分匹配 → OpenSearch</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192053.png"></p><hr><h4 id="AWS-Athena"><a href="#AWS-Athena" class="headerlink" title="AWS Athena"></a>AWS Athena</h4><ul><li>无服务器查询服务, 使用标准 SQL 分析 S3 数据</li><li><strong>无法实时分析数据</strong> (批量查询, 非流式处理)</li><li>按扫描数据量收费 → 使用列式格式 (Parquet, ORC) 节省成本</li><li>适用场景:<ul><li>处理日志 (CloudTrail, VPC Flow Logs, ALB Logs)</li><li>即席分析 (Ad-hoc analysis)</li><li>交互式查询 (Interactive queries)</li></ul></li><li>与其他服务对比:<ul><li>Athena: S3 数据 SQL 查询, 批量处理</li><li>OpenSearch: 实时搜索, 全文检索</li><li>Kinesis Data Analytics: 实时流数据 SQL 分析</li></ul></li><li>考试提示: S3 数据 + SQL 查询 → Athena; 实时分析 → 不用 Athena</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192218.png"></p><ul><li><strong>Federated Query</strong>:<ul><li>跨数据源 SQL 查询 (AWS 或 On-Premise)</li><li>使用 Data Source Connectors (Lambda 函数)</li><li>支持: RDS, Aurora, Redshift, DynamoDB, On-Premise 数据库</li><li>查询结果可存储回 S3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200427.png"></p><hr><h4 id="AWS-MSK"><a href="#AWS-MSK" class="headerlink" title="AWS MSK"></a>AWS MSK</h4><ul><li>托管的 Apache Kafka 服务 (Managed Streaming for Apache Kafka)</li><li>支持 Serverless 模式和 Provisioned 模式</li><li>Kinesis 的替代方案, 处理流式数据 (Streaming Data)</li><li>与 Kinesis 对比:<ul><li>MSK: 完全兼容 Apache Kafka, 更灵活, 需要管理集群</li><li>Kinesis: AWS 原生, 更简单, 完全托管</li></ul></li><li>适用场景:<ul><li>已使用 Apache Kafka 的应用迁移到 AWS</li><li>需要 Kafka 生态系统工具 (Kafka Connect, Kafka Streams)</li><li>高吞吐量实时数据处理</li></ul></li><li>考试提示: Apache Kafka 迁移 → MSK; 简单流处理 → Kinesis</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230056.png"></p><hr><h4 id="AWS-Certificate-Manager-ACM"><a href="#AWS-Certificate-Manager-ACM" class="headerlink" title="AWS Certificate Manager (ACM)"></a>AWS Certificate Manager (ACM)</h4><ul><li>托管 SSL&#x2F;TLS 证书服务, 保护网站和应用通信</li><li><strong>自动续订证书</strong> (仅限 ACM 颁发的证书)</li><li><strong>第三方证书无法自动续订</strong> (需手动导入和管理)</li><li>集成: ELB, CloudFront, API Gateway</li><li>免费使用 (公共证书)</li><li><strong>使用 EventBridge 监控证书过期</strong>:<ul><li>创建 EventBridge 规则监听 ACM 证书到期事件</li><li>触发 SNS 通知管理员</li><li>适用于第三方导入证书</li></ul></li><li>考试提示: SSL&#x2F;TLS 证书管理 → ACM; 第三方证书 → 无自动续订; 证书到期提醒 → EventBridge + SNS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174451.png"></p><hr><h4 id="AWS-Macie"><a href="#AWS-Macie" class="headerlink" title="AWS Macie"></a>AWS Macie</h4><ul><li>使用机器学习 (ML) 保护 S3 中的敏感数据</li><li>自动发现和分类敏感数据:<ul><li>个人身份信息 (PII): 姓名, 地址, 信用卡号</li><li>财务数据, 医疗数据, 知识产权</li></ul></li><li>生成安全发现 (Findings) 并发送到 EventBridge</li><li>集成: EventBridge → Lambda&#x2F;SNS (自动化响应)</li><li>适用场景: 合规性审计, 数据泄露防护, 敏感数据发现</li><li>考试提示: S3 敏感数据发现 → Macie; PII 保护 → Macie</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192617.png"></p><hr><h4 id="AWS-AppConfig"><a href="#AWS-AppConfig" class="headerlink" title="AWS AppConfig"></a>AWS AppConfig</h4><ul><li>托管服务, 配置, 验证和部署动态配置</li><li>适用场景:<ul><li>应用程序功能开关 (Feature flags)</li><li>配置参数动态更新 (无需重启应用)</li><li>逐步推出配置更改 (Gradual rollout)</li></ul></li><li><strong>关键功能</strong>:<ul><li>配置验证: 部署前验证配置正确性</li><li>部署策略: 线性, 指数, 全量部署</li><li>回滚: 自动检测错误并回滚</li></ul></li><li>与 SSM Parameter Store 对比:<ul><li>AppConfig: 动态配置, 验证, 部署策略, 回滚</li><li>SSM Parameter Store: 静态配置存储, 版本跟踪</li></ul></li><li>集成: Lambda, ECS, EKS, EC2</li><li>考试提示: 动态配置 + 验证 + 部署策略 → AppConfig</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192722.png"></p></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AWS/">AWS</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/fa4ed4d8.html" title="AWS SAA-C03"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch4.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">AWS SAA-C03</div></div></a></div><div class="next-post pull-right"><a href="/posts/eb0c992c.html" title="CSS 学习笔记"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch2.png" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CSS 学习笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/50096d59.html" title="AWS MLA-C01"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/700px-卡冈图雅-像素.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-14</div><div class="title">AWS MLA-C01</div></div></a></div><div><a href="/posts/ced5b880.html" title="AWS CLF-C02"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-30</div><div class="title">AWS CLF-C02</div></div></a></div><div><a href="/posts/da74417d.html" title="AWS SAP-C02"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/imggsnxpqsobtbwodv20gzdbxnlvk45k5p.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-15</div><div class="title">AWS SAP-C02</div></div></a></div><div><a href="/posts/fa4ed4d8.html" title="AWS SAA-C03"><img class="cover" src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-Dot_scenario_s2_ep1_ch4.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-13</div><div class="title">AWS SAA-C03</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/德狗子.GIF" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="author-info__name">鴻達</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Hongda-OSU" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.linkedin.com/in/hongda-lin" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://hongdalin.me" target="_blank" title="Portfolio"><i class="iconfont icon-guanfangwangzhan"></i></a></div></div><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople1.js"></script><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/zdog.dist.js"></script><script id="rendered-js" src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople.js"></script><style>.card-widget.card-announcement{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-AWS-Cloud-Overview"><span class="toc-text">1. AWS Cloud Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Regions"><span class="toc-text">AWS Regions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Availability-Zone"><span class="toc-text">AWS Availability Zone</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Edge-Locations"><span class="toc-text">AWS Edge Locations</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-IAM"><span class="toc-text">2. IAM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-IAM"><span class="toc-text">AWS IAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Permissions"><span class="toc-text">IAM Permissions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Policies"><span class="toc-text">IAM Policies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-MFA"><span class="toc-text">IAM MFA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-CLI-amp-SDK"><span class="toc-text">IAM CLI &amp; SDK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Roles"><span class="toc-text">IAM Roles</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Security-Tools"><span class="toc-text">IAM Security Tools</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-EC2-Fundamentals"><span class="toc-text">3. EC2 Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EC2"><span class="toc-text">AWS EC2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Type"><span class="toc-text">EC2 Instance Type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Security-Groups"><span class="toc-text">EC2 Security Groups</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Purchasing-Options"><span class="toc-text">EC2 Instance Purchasing Options</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-EC2-Instance-Storage"><span class="toc-text">4. EC2 Instance Storage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EBS"><span class="toc-text">AWS EBS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Snapshots"><span class="toc-text">EBS Snapshots</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AMI"><span class="toc-text">AWS AMI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Store"><span class="toc-text">EC2 Instance Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Volume-Types"><span class="toc-text">EBS Volume Types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-Multi-Attach"><span class="toc-text">EBS Multi-Attach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EBS-RAID"><span class="toc-text">EBS RAID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EFS"><span class="toc-text">AWS EFS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ELB-amp-ASG"><span class="toc-text">5. ELB &amp; ASG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Scalability-amp-High-Availability"><span class="toc-text">Scalability &amp; High Availability</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ELB"><span class="toc-text">AWS ELB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Application-Load-Balancer-ALB"><span class="toc-text">Application Load Balancer (ALB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Network-Load-Balancer-NLB"><span class="toc-text">Network Load Balancer (NLB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Gateway-Load-Balancer-GWLB"><span class="toc-text">Gateway Load Balancer (GWLB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sticky-Sessions-Session-Affinity"><span class="toc-text">Sticky Sessions (Session Affinity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cross-Zone-Load-Balancing"><span class="toc-text">Cross Zone Load Balancing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSL-Certificates"><span class="toc-text">SSL Certificates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deregistration-Delay-Connection-Draining"><span class="toc-text">Deregistration Delay (Connection Draining)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ASG"><span class="toc-text">AWS ASG</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Policies"><span class="toc-text">Scaling Policies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ASG-Instance-Refresh"><span class="toc-text">ASG Instance Refresh</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-AWS-Fundamentals"><span class="toc-text">6. AWS Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-RDS"><span class="toc-text">AWS RDS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Read-Replicas-vs-Multi-AZ"><span class="toc-text">Read Replicas vs. Multi AZ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Aurora"><span class="toc-text">AWS Aurora</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RDS-Security"><span class="toc-text">RDS Security</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RDS-Proxy"><span class="toc-text">RDS Proxy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ElastiCache"><span class="toc-text">AWS ElastiCache</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ElastiCache-Strategies"><span class="toc-text">ElastiCache Strategies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MemoryDB-for-Redis"><span class="toc-text">MemoryDB for Redis</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Route-53"><span class="toc-text">7. Route 53</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#What%E2%80%99s-DNS"><span class="toc-text">What’s DNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Route-53"><span class="toc-text">AWS Route 53</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Route-53-TTL"><span class="toc-text">Route 53 TTL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CNAME-vs-Alias"><span class="toc-text">CNAME vs Alias</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Health-Checks"><span class="toc-text">Health Checks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Simple"><span class="toc-text">Routing Policy (Simple)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Weighted"><span class="toc-text">Routing Policy (Weighted)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Latency"><span class="toc-text">Routing Policy (Latency)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Failover"><span class="toc-text">Routing Policy (Failover)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Geolocation"><span class="toc-text">Routing Policy (Geolocation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Geoproximity"><span class="toc-text">Routing Policy (Geoproximity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Traffic-Flow"><span class="toc-text">Routing Policy (Traffic Flow)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-IP-Based"><span class="toc-text">Routing Policy (IP-Based)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing-Policy-Multi-Value"><span class="toc-text">Routing Policy (Multi-Value)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-VPC-Fundamentals"><span class="toc-text">8. VPC Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-VPC"><span class="toc-text">AWS VPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Subnet"><span class="toc-text">VPC Subnet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Internet-Gateway-IGW-amp-Route-Table"><span class="toc-text">Internet Gateway (IGW) &amp; Route Table</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NAT-Gateway-NATGW"><span class="toc-text">NAT Gateway (NATGW)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NACL-amp-Security-Groups"><span class="toc-text">NACL &amp; Security Groups</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Flow-Logs"><span class="toc-text">VPC Flow Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Peering"><span class="toc-text">VPC Peering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Sharing"><span class="toc-text">VPC Sharing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VPC-Endpoints-AWS-PrivateLink"><span class="toc-text">VPC Endpoints (AWS PrivateLink)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Site-to-Site-VPN-VPN-Connection"><span class="toc-text">Site-to-Site VPN (VPN Connection)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Direct-Connect-DX"><span class="toc-text">Direct Connect (DX)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-S3"><span class="toc-text">9. S3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-S3"><span class="toc-text">AWS S3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Bucket-Policy"><span class="toc-text">S3 Bucket Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Website"><span class="toc-text">S3 Website</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Versioning"><span class="toc-text">S3 Versioning</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Replication-CRR-amp-SRR"><span class="toc-text">S3 Replication (CRR &amp; SRR)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Storage-Classes"><span class="toc-text">S3 Storage Classes</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-AWS-CLI-SDK-IAM-Roles-amp-Policies"><span class="toc-text">10. AWS CLI, SDK, IAM Roles &amp; Policies</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#EC2-Instance-Metadata-IMDS"><span class="toc-text">EC2 Instance Metadata (IMDS)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MFA-with-CLI"><span class="toc-text">MFA with CLI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SDK"><span class="toc-text">AWS SDK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Limits-Quotas"><span class="toc-text">AWS Limits (Quotas)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CLI-Credentials-Provider-Chain"><span class="toc-text">AWS CLI Credentials Provider Chain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Sigv4"><span class="toc-text">AWS Sigv4</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Advanced-S3"><span class="toc-text">11. Advanced S3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Lifecycle-Rules"><span class="toc-text">S3 Lifecycle Rules</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Event-Notifications"><span class="toc-text">S3 Event Notifications</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Performance"><span class="toc-text">S3 Performance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Select-amp-Glacier-Select"><span class="toc-text">S3 Select &amp; Glacier Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Object-Tags-amp-Metadata"><span class="toc-text">S3 Object Tags &amp; Metadata</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-S3-Security"><span class="toc-text">12. S3 Security</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Encryption"><span class="toc-text">S3 Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-CORS"><span class="toc-text">S3 CORS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-MFA-Delete"><span class="toc-text">S3 MFA Delete</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Access-Logs"><span class="toc-text">S3 Access Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Pre-signed-URL"><span class="toc-text">S3 Pre-signed URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Access-Points"><span class="toc-text">S3 Access Points</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#S3-Object-Lambda"><span class="toc-text">S3 Object Lambda</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-CloudFront"><span class="toc-text">13. CloudFront</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudFront"><span class="toc-text">AWS CloudFront</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Caching"><span class="toc-text">CloudFront Caching</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Cache-Invalidation"><span class="toc-text">CloudFront Cache Invalidation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Cache-Behaviors"><span class="toc-text">CloudFront Cache Behaviors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Geo-Restriction"><span class="toc-text">CloudFront Geo Restriction</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Signed-URL-x2F-Cookies"><span class="toc-text">CloudFront Signed URL &#x2F; Cookies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Advanced-Concepts"><span class="toc-text">CloudFront Advanced Concepts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Real-Time-Logs"><span class="toc-text">CloudFront Real Time Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Global-Accelerator"><span class="toc-text">AWS Global Accelerator</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-ECS-ECR-amp-Fargate"><span class="toc-text">14. ECS, ECR &amp; Fargate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ECS"><span class="toc-text">AWS ECS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Auto-Scaling"><span class="toc-text">ECS Auto Scaling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Rolling-Updates"><span class="toc-text">ECS Rolling Updates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Task-Definitions"><span class="toc-text">ECS Task Definitions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ECS-Task-Placements"><span class="toc-text">ECS Task Placements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-ECR"><span class="toc-text">AWS ECR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CoPilot"><span class="toc-text">AWS CoPilot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EKS"><span class="toc-text">AWS EKS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-Elastic-Beanstalk"><span class="toc-text">15. Elastic Beanstalk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Elastic-Beanstalk"><span class="toc-text">AWS Elastic Beanstalk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Deployment-Modes"><span class="toc-text">Beanstalk Deployment Modes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Lifecycle-Policy"><span class="toc-text">Beanstalk Lifecycle Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Extensions"><span class="toc-text">Beanstalk Extensions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-with-CloudFormation"><span class="toc-text">Beanstalk with CloudFormation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Beanstalk-Cloning"><span class="toc-text">Beanstalk Cloning</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-AWS-CloudFormation"><span class="toc-text">16. AWS CloudFormation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudFormation"><span class="toc-text">AWS CloudFormation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Resources"><span class="toc-text">CloudFormation Resources</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Parameters"><span class="toc-text">CloudFormation Parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Mappings"><span class="toc-text">CloudFormation Mappings</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Outputs-amp-Exports"><span class="toc-text">CloudFormation Outputs &amp; Exports</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Conditions"><span class="toc-text">CloudFormation Conditions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Intrinsic-Functions"><span class="toc-text">CloudFormation Intrinsic Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Rollbacks"><span class="toc-text">CloudFormation Rollbacks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Service-Role"><span class="toc-text">CloudFormation Service Role</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-DeletionPolicy"><span class="toc-text">CloudFormation DeletionPolicy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Stack-Policy"><span class="toc-text">CloudFormation Stack Policy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Termination-Protection"><span class="toc-text">CloudFormation Termination Protection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-Custom-Resources"><span class="toc-text">CloudFormation Custom Resources</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFormation-StackSets"><span class="toc-text">CloudFormation StackSets</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-SQS-SNS-Kinesis"><span class="toc-text">17. SQS, SNS, Kinesis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SQS"><span class="toc-text">AWS SQS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Message-Visibility-Timeout"><span class="toc-text">SQS Message Visibility Timeout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Dead-Letter-Queues-DLQ"><span class="toc-text">SQS Dead Letter Queues (DLQ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Delay-Queues"><span class="toc-text">SQS Delay Queues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Long-Polling"><span class="toc-text">SQS Long Polling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-Extended-Client"><span class="toc-text">SQS Extended Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-FIFO-Queues"><span class="toc-text">SQS FIFO Queues</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQS-FIFO-Queues-Advanced"><span class="toc-text">SQS FIFO Queues Advanced</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SNS"><span class="toc-text">AWS SNS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fan-Out-Pattern"><span class="toc-text">Fan Out Pattern</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Kinesis"><span class="toc-text">AWS Kinesis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Streams"><span class="toc-text">Kinesis Data Streams</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Producers"><span class="toc-text">Kinesis Producers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Consumers"><span class="toc-text">Kinesis Consumers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Client-Library-KCL"><span class="toc-text">Kinesis Client Library (KCL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Operations"><span class="toc-text">Kinesis Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Firehose"><span class="toc-text">Kinesis Data Firehose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kinesis-Data-Analytics"><span class="toc-text">Kinesis Data Analytics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-Ordering-for-Kinesis-vs-SQS"><span class="toc-text">Data Ordering for Kinesis vs SQS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-AWS-Mointoring-amp-Audit"><span class="toc-text">18. AWS Mointoring &amp; Audit</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Metrics"><span class="toc-text">CloudWatch Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Custom-Metrics"><span class="toc-text">CloudWatch Custom Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs"><span class="toc-text">CloudWatch Logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Agent"><span class="toc-text">CloudWatch Agent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs-Metric-Filter"><span class="toc-text">CloudWatch Logs Metric Filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Alarms"><span class="toc-text">CloudWatch Alarms</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Synthetics"><span class="toc-text">CloudWatch Synthetics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-EventBridge"><span class="toc-text">AWS EventBridge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-X-Ray"><span class="toc-text">AWS X-Ray</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-Advanced"><span class="toc-text">X-Ray Advanced</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-APIs"><span class="toc-text">X-Ray APIs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Ray-with-Elastic-Beanstalk"><span class="toc-text">X-Ray with Elastic Beanstalk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Distro-for-OpenTelemetry"><span class="toc-text">AWS Distro for OpenTelemetry</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudTrail"><span class="toc-text">AWS CloudTrail</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-Lambda"><span class="toc-text">19. Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Lambda"><span class="toc-text">AWS Lambda</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Synchronous-Invocations"><span class="toc-text">Lambda Synchronous Invocations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-ALB"><span class="toc-text">Lambda with ALB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Asynchronous-Invocations"><span class="toc-text">Lambda Asynchronous Invocations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Event-Source-Mapping"><span class="toc-text">Lambda Event Source Mapping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Event-and-Context-Objects"><span class="toc-text">Lambda Event and Context Objects</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Destinations"><span class="toc-text">Lambda Destinations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Permissions"><span class="toc-text">Lambda Permissions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Environment-Variables"><span class="toc-text">Lambda Environment Variables</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Logging-amp-Monitoring"><span class="toc-text">Lambda Logging &amp; Monitoring</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudFront-Functions-amp-Lambda-Edge"><span class="toc-text">CloudFront Functions &amp; Lambda@Edge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-in-VPC"><span class="toc-text">Lambda in VPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Function-Performance"><span class="toc-text">Lambda Function Performance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Layers"><span class="toc-text">Lambda Layers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-File-Systems-Mounting"><span class="toc-text">Lambda File Systems Mounting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Concurrency"><span class="toc-text">Lambda Concurrency</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-External-Dependencies"><span class="toc-text">Lambda External Dependencies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Container-Image"><span class="toc-text">Lambda Container Image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Versions-and-Aliases"><span class="toc-text">Lambda Versions and Aliases</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-CodeDeploy"><span class="toc-text">Lambda with CodeDeploy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-Function-URL"><span class="toc-text">Lambda Function URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lambda-with-CodeGuru"><span class="toc-text">Lambda with CodeGuru</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-DynamoDB"><span class="toc-text">20. DynamoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-DynamoDB"><span class="toc-text">AWS DynamoDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-WCU-amp-RCU"><span class="toc-text">DynamoDB WCU &amp; RCU</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Basic-Operations"><span class="toc-text">DynamoDB Basic Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Conditional-Writes"><span class="toc-text">DynamoDB Conditional Writes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Indexes"><span class="toc-text">DynamoDB Indexes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-PartiQL"><span class="toc-text">DynamoDB PartiQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Optimistic-Locking"><span class="toc-text">DynamoDB Optimistic Locking</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-DAX"><span class="toc-text">DynamoDB DAX</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Stream"><span class="toc-text">DynamoDB Stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-TTL"><span class="toc-text">DynamoDB TTL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-CLI"><span class="toc-text">DynamoDB CLI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Transactions"><span class="toc-text">DynamoDB Transactions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Session-State"><span class="toc-text">DynamoDB Session State</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Write-Sharding"><span class="toc-text">DynamoDB Write Sharding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DynamoDB-Other-Features"><span class="toc-text">DynamoDB Other Features</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-API-Gateway"><span class="toc-text">21. API Gateway</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-API-Gateway"><span class="toc-text">AWS API Gateway</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Stages"><span class="toc-text">API Gateway Stages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Canary-Deployment"><span class="toc-text">API Gateway Canary Deployment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Integration-Types"><span class="toc-text">API Gateway Integration Types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Mapping-Templates"><span class="toc-text">API Gateway Mapping Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-OpenAPI"><span class="toc-text">API Gateway OpenAPI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Caching"><span class="toc-text">API Gateway Caching</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Usage-Plans-amp-API-Keys"><span class="toc-text">API Gateway Usage Plans &amp; API Keys</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Monitoring"><span class="toc-text">API Gateway Monitoring</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-CORS"><span class="toc-text">API Gateway CORS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-Security"><span class="toc-text">API Gateway Security</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#API-Gateway-WebSocket-API"><span class="toc-text">API Gateway WebSocket API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-AWS-CICD"><span class="toc-text">22. AWS CICD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeCommit"><span class="toc-text">AWS CodeCommit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodePipeline"><span class="toc-text">AWS CodePipeline</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeBuild"><span class="toc-text">AWS CodeBuild</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeDeploy"><span class="toc-text">AWS CodeDeploy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeStar-CodeCatalyst"><span class="toc-text">AWS CodeStar (CodeCatalyst)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeArtifact"><span class="toc-text">AWS CodeArtifact</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CodeGuru"><span class="toc-text">AWS CodeGuru</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cloud9"><span class="toc-text">AWS Cloud9</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-AWS-Serverless-Application-Model-SAM"><span class="toc-text">23. AWS Serverless Application Model (SAM)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SAM"><span class="toc-text">AWS SAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAM-Policy-Templates"><span class="toc-text">SAM Policy Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAM-Local-Capabilities"><span class="toc-text">SAM Local Capabilities</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-Cloud-Development-Kit-CDK"><span class="toc-text">24. Cloud Development Kit (CDK)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cloud-Development-Kit"><span class="toc-text">AWS Cloud Development Kit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-Cognito"><span class="toc-text">25. Cognito</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Cognito"><span class="toc-text">AWS Cognito</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cognito-User-Pools-CUP"><span class="toc-text">Cognito User Pools (CUP)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cognito-Identity-Pools-CIP"><span class="toc-text">Cognito Identity Pools (CIP)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-Step-Functions-amp-AppSync"><span class="toc-text">26. Step Functions &amp; AppSync</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Step-Functions"><span class="toc-text">AWS Step Functions</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Error-Handling"><span class="toc-text">Step Functions Error Handling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Wait-for-Task-Token"><span class="toc-text">Step Functions Wait for Task Token</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Functions-Activity-Tasks"><span class="toc-text">Step Functions Activity Tasks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AppSync"><span class="toc-text">AWS AppSync</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Amplify"><span class="toc-text">AWS Amplify</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-Advanced-Identity"><span class="toc-text">27. Advanced Identity</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-STS"><span class="toc-text">AWS STS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Advanced-IAM"><span class="toc-text">Advanced IAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IAM-Access-Analyzer"><span class="toc-text">IAM Access Analyzer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Directory-Services-AD"><span class="toc-text">AWS Directory Services (AD)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-AWS-Security-amp-Encryption"><span class="toc-text">28. AWS Security &amp; Encryption</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Encryption-101"><span class="toc-text">Encryption 101</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-KMS"><span class="toc-text">AWS KMS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#KMS-Envelope-Encryption"><span class="toc-text">KMS Envelope Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#KMS-Limits"><span class="toc-text">KMS Limits</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-CloudHSM"><span class="toc-text">AWS CloudHSM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSM-Parameter-Store"><span class="toc-text">SSM Parameter Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Secrets-Manager"><span class="toc-text">AWS Secrets Manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CloudWatch-Logs-Encryption"><span class="toc-text">CloudWatch Logs Encryption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Nitro-Enclaves"><span class="toc-text">AWS Nitro Enclaves</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-Other-AWS-Services"><span class="toc-text">29. Other AWS Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-SES-Simple-Email-Service"><span class="toc-text">AWS SES (Simple Email Service)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-OpenSearch"><span class="toc-text">AWS OpenSearch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Athena"><span class="toc-text">AWS Athena</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-MSK"><span class="toc-text">AWS MSK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Certificate-Manager-ACM"><span class="toc-text">AWS Certificate Manager (ACM)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-Macie"><span class="toc-text">AWS Macie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AWS-AppConfig"><span class="toc-text">AWS AppConfig</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c888933a.html" title="Liquibase 101"><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/1100px-Event_top_01.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="Liquibase 101"></a><div class="content"><a class="title" href="/posts/c888933a.html" title="Liquibase 101">Liquibase 101</a><time datetime="2025-06-15T17:03:05.000Z" title="发表于 2025-06-15 12:03:05">2025-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50096d59.html" title="AWS MLA-C01"><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/700px-卡冈图雅-像素.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="AWS MLA-C01"></a><div class="content"><a class="title" href="/posts/50096d59.html" title="AWS MLA-C01">AWS MLA-C01</a><time datetime="2025-06-14T17:03:05.000Z" title="发表于 2025-06-14 12:03:05">2025-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/998b6089.html" title="JS &amp; Python 小技巧"><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/700px-荷赛拉大战-机械淘淘宣传图.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="JS &amp; Python 小技巧"></a><div class="content"><a class="title" href="/posts/998b6089.html" title="JS &amp; Python 小技巧">JS &amp; Python 小技巧</a><time datetime="2025-06-14T17:03:05.000Z" title="发表于 2025-06-14 12:03:05">2025-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3f28c94.html" title="GCP 实操练习"><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/imgf46582az111imog7tayrkhdegi73sg9.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="GCP 实操练习"></a><div class="content"><a class="title" href="/posts/3f28c94.html" title="GCP 实操练习">GCP 实操练习</a><time datetime="2025-06-13T17:03:05.000Z" title="发表于 2025-06-13 12:03:05">2025-06-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e7e09e2.html" title="Security 101"><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img700px-挑战ep5-像素3.png" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="Security 101"></a><div class="content"><a class="title" href="/posts/e7e09e2.html" title="Security 101">Security 101</a><time datetime="2025-06-13T17:03:05.000Z" title="发表于 2025-06-13 12:03:05">2025-06-13</time></div></div></div></div></div></div></main><footer id="footer" style="background:rgba(0,0,0,.25)"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 &nbsp;<i id="heartbeat" class="fa fas fa-heartbeat"></i> &nbsp;鴻達</div><div class="footer_custom_text"><p class="badge"><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-informational?style=flat&logo=hexo"></a><a style="margin-inline:5px" target="_blank" href="https://domains.google/"><img src="https://img.shields.io/badge/Hosted-Google-ff69b4?style=flat&logo=googledomains"></a><a style="margin-inline:5px" target="_blank" href="https://gulpjs.com/"><img src="https://img.shields.io/badge/Compress-gulp-critical?style=flat&logo=gulp"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-black?style=flat&logo=GitHub"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris"></a></p></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="/js/util.js"></script><script defer src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script disable-devtool-auto src="https://cdn.jsdelivr.net/npm/disable-devtool"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>