<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>å‰ç«¯é¢è¯•ç¬”è®° | é´»éµ èªŒé”</title><meta name="author" content="é´»é”"><meta name="copyright" content="é´»é”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#1a1a1a"><meta name="description" content="ğŸ˜ƒ"><meta property="og:type" content="article"><meta property="og:title" content="å‰ç«¯é¢è¯•ç¬”è®°"><meta property="og:url" content="https://hongdalin.blog/posts/c7d67744.html"><meta property="og:site_name" content="é´»éµ èªŒé”"><meta property="og:description" content="ğŸ˜ƒ"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/gknx188yxuapxelxaeyjso308qyhne0.jpg"><meta property="article:published_time" content="2023-01-26T16:15:05.000Z"><meta property="article:modified_time" content="2025-01-04T02:14:09.645Z"><meta property="article:author" content="é´»é”"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/gknx188yxuapxelxaeyjso308qyhne0.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·å…‹è¨æ–¯.GIF"><link rel="canonical" href="https://hongdalin.blog/posts/c7d67744.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"å¤©",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"å‰ç«¯é¢è¯•ç¬”è®°",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-01-03 20:14:09"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,n){if(0===n)return;const o=864e5*n,a={value:t,expiry:(new Date).getTime()+o};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t);if(!((new Date).getTime()>n.expiry))return n.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,n)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onerror=n,o.onload=o.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)})),e.getCSS=e=>new Promise(((t,n)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=()=>t(),o.onerror=()=>n(),document.head.appendChild(o)}));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/color.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/font.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/icon.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/layout.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·ç‹—å­.GIF" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/gknx188yxuapxelxaeyjso308qyhne0.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="é´»éµ èªŒé”"><span class="site-name">é´»éµ èªŒé”</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">å‰ç«¯é¢è¯•ç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-01-26T16:15:05.000Z" title="å‘è¡¨äº 2023-01-26 10:15:05">2023-01-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-01-04T02:14:09.645Z" title="æ›´æ–°äº 2025-01-03 20:14:09">2025-01-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">8.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>30åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="å‰ç«¯é¢è¯•ç¬”è®°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="1-CSS-é¢˜ç›®"><a href="#1-CSS-é¢˜ç›®" class="headerlink" title="1. CSS é¢˜ç›®"></a>1. CSS é¢˜ç›®</h3><h4 id="1-1-ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢"><a href="#1-1-ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢" class="headerlink" title="1.1 ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢"></a>1.1 ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢</h4><ul><li><p>è¿™é¢˜æ˜¯ç¾å›¢å‰ç«¯é¢è¯•ä¸€é¢é¢˜: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6950081305560219679?searchId=202410130111434E030964573D8F88A42E">å‚è€ƒé“¾æ¥</a></p></li><li><p>ç¬¬ä¸€ç§æ–¹æ³•: ä½¿ç”¨<code>boarder</code></p></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/mojg3tqL/13/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li>ç¬¬äºŒç§æ–¹æ³•: ä½¿ç”¨<code>linear-gradient</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/uwykmf1a/4/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li>ç¬¬ä¸‰ç§æ–¹æ³•: ä½¿ç”¨<code>clip-path</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/7eowjy52/15/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><hr><h4 id="1-2-ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­"><a href="#1-2-ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="1.2 ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­"></a>1.2 ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­</h4><ul><li>ç¬¬ä¸€ç§æ–¹æ³•: ä½¿ç”¨<code>Flexbox</code> (ä¹Ÿå¯ä»¥çˆ¶å…ƒç´ æ˜¯<code>flex</code>ç„¶åå­å…ƒç´ <code>margin:auto</code>)</li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/9fa0m5rg/14/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li>ç¬¬äºŒç§æ–¹æ³•: ä½¿ç”¨<code>Grid</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/0b2oduje/4/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li>ç¬¬ä¸‰ç§æ–¹æ³•: ç»å¯¹å®šä½ + <code>transform</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/u1e7a2mv/5/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><hr><h4 id="1-3-æ­£æ–¹å½¢å­å…ƒç´ "><a href="#1-3-æ­£æ–¹å½¢å­å…ƒç´ " class="headerlink" title="1.3 æ­£æ–¹å½¢å­å…ƒç´ "></a>1.3 æ­£æ–¹å½¢å­å…ƒç´ </h4><ul><li>è¿™é¢˜æ˜¯å­—èŠ‚è·³åŠ¨ä¸€é¢é¢˜: çˆ¶å…ƒç´ çš„å®½é«˜ä¸å›ºå®šï¼Œå¹¶ä¸”å¯ä»¥éšçª—å£å˜å½¢ï¼Œè€Œå­å…ƒç´ å¿…é¡»ä¿æŒæ­£æ–¹å½¢ (åªèƒ½ä½¿ç”¨<code>CSS</code>)<ul><li>è§£å†³æ–¹æ¡ˆ: å­å…ƒç´ ä½¿ç”¨ç™¾åˆ†æ¯”å®½åº¦å¹¶ä½¿ç”¨<code>aspect-ratio</code>å±æ€§æ¥ä¿æŒå­å…ƒç´ çš„æ­£æ–¹å½¢æ¯”ä¾‹</li></ul></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/qy79su82/27/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><hr><h4 id="1-4-position-å®šä½"><a href="#1-4-position-å®šä½" class="headerlink" title="1.4 position å®šä½"></a>1.4 position å®šä½</h4><ul><li><p><code>position: static</code>ï¼ˆé»˜è®¤å®šä½ï¼‰: æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å®šä½æ–¹å¼ã€‚å…ƒç´ æŒ‰ç…§æ­£å¸¸çš„æ–‡æ¡£æµæ’åˆ—ï¼Œä¸ä¼šå—<code>top</code>ã€<code>right</code>ã€<code>bottom</code>æˆ–<code>left</code>ç­‰å±æ€§çš„å½±å“</p></li><li><p><code>position: relative</code>ï¼ˆç›¸å¯¹å®šä½ï¼‰: ç›¸å¯¹äºå…ƒç´ è‡ªèº«çš„åŸå§‹ä½ç½®è¿›è¡Œå®šä½ï¼Œä½†å¯ä»¥é€šè¿‡<code>top</code>ã€<code>right</code>ã€<code>bottom</code>ã€<code>left</code>ç­‰å±æ€§è°ƒæ•´å…ƒç´ çš„ç›¸å¯¹ä½ç½®</p></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/5qb29Lzg/2/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li><code>position: absolute</code>ï¼ˆç»å¯¹å®šä½ï¼‰: ç›¸å¯¹äºæœ€è¿‘çš„é<code>static</code>å®šä½çš„çˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚å¦‚æœæ²¡æœ‰é<code>static</code>çš„çˆ¶å…ƒç´ ï¼Œåˆ™ç›¸å¯¹äºæ–‡æ¡£çš„æ ¹å…ƒç´ ï¼ˆé€šå¸¸æ˜¯<code>&lt;html&gt;</code>æˆ–<code>&lt;body&gt;</code>ï¼‰è¿›è¡Œå®šä½</li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/3jmu7q8a/7/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><ul><li><p><code>position: fixed</code>ï¼ˆå›ºå®šå®šä½ï¼‰: ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ï¼Œæ— è®ºé¡µé¢å¦‚ä½•æ»šåŠ¨ï¼Œå…ƒç´ å§‹ç»ˆä¿æŒåœ¨æµè§ˆå™¨çª—å£ä¸­çš„å›ºå®šä½ç½®</p></li><li><p><code>position: sticky</code>ï¼ˆç²˜æ€§å®šä½ï¼‰: ç»“åˆäº†<code>relative</code>å’Œ<code>fixed</code>çš„ç‰¹æ€§ã€‚å…ƒç´ ä¸€å¼€å§‹æ˜¯ç›¸å¯¹äºæ–‡æ¡£æµå®šä½çš„ï¼ˆ<code>relative</code>ï¼‰ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œå…ƒç´ ä¼šå˜ä¸ºå›ºå®šå®šä½ï¼ˆ<code>fixed</code>ï¼‰</p><ul><li>çˆ¶å…ƒç´ ä¸èƒ½<code>overflow:hidden</code>æˆ–è€…<code>overflow:auto</code>å±æ€§</li><li>å¿…é¡»æŒ‡å®š<code>top</code>ã€<code>bottom</code>ã€<code>left</code>ã€<code>right</code>å››ä¸ªå€¼ä¹‹ä¸€ï¼Œå¦åˆ™åªä¼šå¤„äºç›¸å¯¹å®šä½</li></ul></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/ybk3o9Lu/23/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen></iframe><hr><h4 id="1-5-ç›’æ¨¡å‹"><a href="#1-5-ç›’æ¨¡å‹" class="headerlink" title="1.5 ç›’æ¨¡å‹"></a>1.5 ç›’æ¨¡å‹</h4><p>ç›’æ¨¡å‹åˆ†ä¸º<code>IE</code>ç›’æ¨¡å‹å’Œ<code>W3C</code>æ ‡å‡†ç›’æ¨¡å‹</p><ul><li>åœ¨æ ‡å‡†ç›’æ¨¡å‹ä¸‹ï¼Œä¸€ä¸ªå—çš„æ€»å®½åº¦ &#x3D; <code>width + margin(å·¦å³) + padding(å·¦å³) + border(å·¦å³)</code></li><li>åœ¨<code>IE</code>ç›’æ¨¡å‹ä¸‹ï¼Œä¸€ä¸ªå—çš„æ€»å®½åº¦ &#x3D; <code>width + margin(å·¦å³)</code>ï¼ˆå³<code>width</code>å·²ç»åŒ…å«äº†<code>padding</code>å’Œ<code>border</code>å€¼ï¼‰</li></ul><blockquote><p>å½“è®¾ç½®<code>box-sizing:content-box</code>æ—¶ï¼Œé‡‡ç”¨æ ‡å‡†ç›’æ¨¡å‹è®¡ç®—ï¼Œä¹Ÿæ˜¯é»˜è®¤æ¨¡å¼<br>å½“è®¾ç½®<code>box-sizing:border-box</code>æ—¶ï¼Œé‡‡ç”¨<code>IE</code>ç›’æ¨¡å‹è®¡ç®—</p></blockquote><ul><li><code>JS</code>å¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜<ul><li><code>window.getComputedStyle(dom).width/height</code>: å–åˆ°çš„æ˜¯æœ€ç»ˆæ¸²æŸ“åçš„å®½å’Œé«˜</li><li><code>dom.getBoundingClientRect().width/height</code>: å¾—åˆ°æ¸²æŸ“åçš„å®½å’Œé«˜ï¼Œè¿˜å¯ä»¥å–åˆ°ç›¸å¯¹äºè§†çª—çš„ä¸Šä¸‹å·¦å³çš„è·ç¦»</li><li><code>dom.offsetWidth/offsetHeight</code>: åŒ…æ‹¬é«˜åº¦ï¼ˆå®½åº¦ï¼‰ã€å†…è¾¹è·å’Œè¾¹æ¡†ï¼Œä¸åŒ…æ‹¬å¤–è¾¹è· (å…¼å®¹æ€§æœ€å¥½)</li></ul></li></ul><hr><h4 id="1-6-CSS-å®ç°æ‰‡å½¢"><a href="#1-6-CSS-å®ç°æ‰‡å½¢" class="headerlink" title="1.6 CSS å®ç°æ‰‡å½¢"></a>1.6 CSS å®ç°æ‰‡å½¢</h4><hr><h4 id="1-7-BFC"><a href="#1-7-BFC" class="headerlink" title="1.7 BFC"></a>1.7 BFC</h4><ul><li><code>BFC</code>æ˜¯<code>CSS</code>å¸ƒå±€çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ˜¯ä¸€å—ç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œæ˜¯ä¸€ä¸ªç¯å¢ƒï¼Œé‡Œé¢çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å…ƒç´ </li></ul><hr><h3 id="2-JS-é¢˜ç›®"><a href="#2-JS-é¢˜ç›®" class="headerlink" title="2. JS é¢˜ç›®"></a>2. JS é¢˜ç›®</h3><h4 id="2-1-var-ä¸å¾ªç¯"><a href="#2-1-var-ä¸å¾ªç¯" class="headerlink" title="2.1 var ä¸å¾ªç¯"></a>2.1 var ä¸å¾ªç¯</h4><ul><li>å­—èŠ‚è·³åŠ¨ä¸€é¢çš„é¢˜ç›®</li><li>ä¸‹é¢å¾ªç¯çš„æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼æ˜¯ä»€ä¹ˆï¼Œ<code>i</code>åœ¨å¾ªç¯ç»“æŸåçš„å€¼æ˜¯ä»€ä¹ˆ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è¿™ä¸ªå¾ªç¯å°†ä¼šè¾“å‡º<code>0 1 2 3 4</code>ï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼ä¸º<code>5</code></p></li><li><p>ç”±äº<code>var</code>å£°æ˜çš„å˜é‡åœ¨æ•´ä¸ªå‡½æ•°ï¼ˆæˆ–å…¨å±€èŒƒå›´å†…ï¼‰éƒ½æ˜¯å…±äº«çš„ï¼Œå®ƒä¸å—å—ä½œç”¨åŸŸçš„é™åˆ¶ã€‚å› æ­¤ï¼Œ<code>i</code>åœ¨æ•´ä¸ªå‡½æ•°æˆ–è„šæœ¬èŒƒå›´å†…æ˜¯å¯è§çš„ã€‚æ¢å¥è¯è¯´ï¼Œ<code>i</code>ä»ç„¶åœ¨å¾ªç¯ç»“æŸåå­˜åœ¨å¹¶ä¸”å¯ä»¥è®¿é—®</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™ä¸ªå¾ªç¯å°†ä¼šè¾“å‡º<code>5 5 5 5 5</code>ï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼ä¸º<code>5</code></li><li>ç”±äº<code>var</code>æ˜¯å‡½æ•°çº§ä½œç”¨åŸŸï¼Œæ‰€æœ‰çš„<code>setTimeout</code>å›è°ƒå‡½æ•°åœ¨æ‰§è¡Œæ—¶è®¿é—®çš„éƒ½æ˜¯åŒä¸€ä¸ª<code>i</code>ï¼Œå³å¾ªç¯ç»“æŸæ—¶çš„<code>i</code>å€¼<code>5</code>ã€‚å› ä¸º<code>setTimeout</code>æ˜¯å¼‚æ­¥çš„ï¼Œå®ƒä¼šåœ¨<code>1</code>ç§’åæ‰§è¡Œï¼Œæ­¤æ—¶å¾ªç¯æ—©å·²ç»“æŸï¼Œ<code>i</code>å·²ç»è¢«æ›´æ–°ä¸º<code>5</code></li><li>è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨<code>let</code>æˆ–é—­åŒ…å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿æ¯æ¬¡è¿­ä»£æ—¶<code>i</code>çš„å€¼æ˜¯ç‹¬ç«‹çš„</li></ul><hr><h4 id="2-2-æ‰‹å†™å€’è®¡æ—¶"><a href="#2-2-æ‰‹å†™å€’è®¡æ—¶" class="headerlink" title="2.2 æ‰‹å†™å€’è®¡æ—¶"></a>2.2 æ‰‹å†™å€’è®¡æ—¶</h4><ul><li><p>ç¾å›¢ä¸€é¢çš„é¢˜ç›®</p></li><li><p>æ‰‹å†™ä¸€ä¸ªå€’è®¡æ—¶å‡½æ•°ï¼Œè¦æ±‚è¾“å‡º<code>5 4 3 2 1</code>ï¼Œæ¯éš”ä¸€åˆ†é’Ÿè¾“å‡ºä¸€ä¸ªå€¼</p></li><li><p>æ–¹æ³•ä¸€: ä½¿ç”¨<code>setInterval</code></p><ul><li><code>setInterval</code>ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…åå¤æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œç›´åˆ°æ‰‹åŠ¨æ¸…é™¤è¿™ä¸ªå®šæ—¶å™¨</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(intervalId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">60000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">countdown</span>();</span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•äºŒ: ä½¿ç”¨<code>Generator</code>å‡½æ•°<ul><li>ä½¿ç”¨<code>Generator</code>å‡½æ•°å¯ä»¥é€šè¿‡<code>yield</code>æš‚åœå’Œæ¢å¤å‡½æ•°çš„æ‰§è¡Œï¼Œç»“åˆ<code>setTimeout</code>æ¥å®ç°å€’è®¡æ—¶</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">countdownGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">while</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> count;</span><br><span class="line">        count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> generator = <span class="title function_">countdownGenerator</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">nextCountdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; value, done &#125; = generator.<span class="title function_">next</span>();</span><br><span class="line">        <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">            <span class="built_in">setTimeout</span>(nextCountdown, <span class="number">60000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">nextCountdown</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">countdown</span>();</span><br></pre></td></tr></table></figure><hr><h4 id="2-3-é˜²æŠ–å’ŒèŠ‚æµ"><a href="#2-3-é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="2.3 é˜²æŠ–å’ŒèŠ‚æµ"></a>2.3 é˜²æŠ–å’ŒèŠ‚æµ</h4><ul><li><p>å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>loadash</code>è¿™ç§åº“æ¥å®ç°</p></li><li><p>é˜²æŠ– <code>Debounce</code></p><ul><li>é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘<code>n</code>ç§’ååœ¨æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™<code>n</code>ç§’å†…æ—¶é—´åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶</li><li>å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡é—­åŒ…ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨ id</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span></span><br><span class="line">        <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// å¼€å§‹è®¾å®šä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œä¼ å…¥çš„å‡½æ•° fn</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œå¿…é¡»æ˜¯ç®­å¤´å‡½æ•°ï¼Œä¸ç„¶ this æŒ‡å‘ windowï¼Œè¦è®© this å°±æŒ‡å‘ fn çš„è°ƒç”¨è€…</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ debounce å‡½æ•°è¿”å›æ–°å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> betterFn = <span class="title function_">debounce</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn é˜²æŠ–æ‰§è¡Œäº†&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// åœæ­¢æ»‘åŠ¨ 1 ç§’åæ‰§è¡Œå‡½æ•° () =&gt; console.log(&#x27;fn é˜²æŠ–æ‰§è¡Œäº†&#x27;)</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, betterFn)</span><br></pre></td></tr></table></figure><blockquote><p>é˜²æŠ–å‡½æ•°åˆ†ä¸ºéç«‹å³æ‰§è¡Œç‰ˆå’Œç«‹å³æ‰§è¡Œç‰ˆï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥å†³å®šéœ€è¦ä½¿ç”¨å“ªä¸€ä¸ªç‰ˆæœ¬çš„é˜²æŠ–å‡½æ•°</p></blockquote><ul><li>èŠ‚æµ <code>Throttle</code><ul><li>èŠ‚æµå°±æ˜¯ä¸€å®šæ—¶é—´å†…æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ï¼Œå³ä½¿é‡å¤è§¦å‘ï¼Œä¹Ÿåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ</li><li>å¯ä»¥ä½¿ç”¨åœ¨ç›‘å¬æ»šåŠ¨<code>scroll</code>äº‹ä»¶ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡</li></ul></li></ul><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ—¶é—´æˆ³ç‰ˆæœ¬</button></li><li class="tab"><button type="button" data-href="#test-2">å®šæ—¶å™¨ç‰ˆæœ¬</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">throttle</span> = (<span class="params">fn, delay = <span class="number">500</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ä¸Šä¸€æ¬¡æ‰§è¡Œ fn çš„æ—¶é—´</span></span><br><span class="line">  <span class="keyword">let</span> prev = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ—¶é—´ï¼Œè½¬æ¢æˆæ—¶é—´æˆ³ï¼Œå•ä½æ¯«ç§’</span></span><br><span class="line">    <span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="comment">// å¦‚æœå·®å€¼å¤§äºç­‰äºè®¾ç½®çš„ç­‰å¾…æ—¶é—´å°±æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt;= delay) &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      prev = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ throttle å‡½æ•°è¿”å›æ–°å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> betterFn = <span class="title function_">throttle</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn å‡½æ•°æ‰§è¡Œäº†&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// æ¯ 10 æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ betterFn å‡½æ•°ï¼Œä½†æ˜¯åªæœ‰æ—¶é—´å·®å¤§äº 1s æ—¶æ‰ä¼šæ‰§è¡Œ fn</span></span><br><span class="line"><span class="built_in">setInterval</span>(betterFn, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">throttle</span> = (<span class="params">fn, delay = <span class="number">500</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå®Œåï¼Œéœ€é‡ç½®å®šæ—¶å™¨ï¼Œä¸ç„¶ timer ä¸€ç›´æœ‰å€¼ï¼Œæ— æ³•å¼€å¯ä¸‹ä¸€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line">      timer = <span class="literal">null</span>;	</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>å¯¹äºèŠ‚æµï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ï¼Œåˆ†åˆ«æ˜¯æ—¶é—´æˆ³ç‰ˆå’Œå®šæ—¶å™¨ç‰ˆã€‚æ—¶é—´æˆ³ç‰ˆçš„å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…å¼€å§‹çš„æ—¶å€™ï¼Œè€Œå®šæ—¶å™¨ç‰ˆçš„å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…ç»“æŸçš„æ—¶å€™</p></blockquote><hr><h4 id="2-4-undefined-ä¸-null-çš„åŒºåˆ«"><a href="#2-4-undefined-ä¸-null-çš„åŒºåˆ«" class="headerlink" title="2.4 undefined ä¸ null çš„åŒºåˆ«"></a>2.4 undefined ä¸ null çš„åŒºåˆ«</h4><ul><li><code>undefined</code>è¡¨ç¤ºâ€ç¼ºå°‘å€¼â€ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰</li><li><code>null</code>è¡¨ç¤ºâ€æ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼</li></ul><hr><h4 id="2-5-æµ…æ‹·è´å’Œæ·±æ‹·è´"><a href="#2-5-æµ…æ‹·è´å’Œæ·±æ‹·è´" class="headerlink" title="2.5 æµ…æ‹·è´å’Œæ·±æ‹·è´"></a>2.5 æµ…æ‹·è´å’Œæ·±æ‹·è´</h4><ul><li>æµ…æ‹·è´<ul><li>æµ…æ‹·è´æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´</li><li>å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">shallowCopy</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// åªæ‹·è´å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹æˆ– null ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || object === <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// hasOwnProperty åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡è‡ªèº«å±æ€§ï¼Œä¼šå¿½ç•¥ä»åŸå‹é“¾ä¸Šç»§æ‰¿çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key))</span><br><span class="line">      newObj[key] = obj[key]; <span class="comment">// åªæ‹·è´å¯¹è±¡æœ¬èº«çš„å±æ€§</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="keyword">var</span> obj =&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">8</span>,</span><br><span class="line">    <span class="attr">pal</span>:[<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;ç‹å…­&#x27;</span>,<span class="string">&#x27;ç‹ä¸ƒ&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="title function_">shallowCopy</span>(obj);</span><br><span class="line">obj2.<span class="property">name</span> = <span class="string">&#x27;æå››&#x27;</span></span><br><span class="line">obj2.<span class="property">pal</span>[<span class="number">0</span>] = <span class="string">&#x27;ç‹éº»å­&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">//&#123;age: 8, name: &quot;å¼ ä¸‰&quot;, pal: [&#x27;ç‹éº»å­&#x27;, &#x27;ç‹å…­&#x27;, &#x27;ç‹ä¸ƒ&#x27;]&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2); <span class="comment">//&#123;age: 8, name: &quot;æå››&quot;, pal: [&#x27;ç‹éº»å­&#x27;, &#x27;ç‹å…­&#x27;, &#x27;ç‹ä¸ƒ&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><ul><li>æ·±æ‹·è´<ul><li>æ·±æ‹·è´æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥ï¼Œä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡ï¼Œä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">obj, map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">  <span class="comment">// åŸºæœ¬ç±»å‹æˆ– null ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj === <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ©ç”¨ map è§£å†³å¾ªç¯å¼•ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">has</span>(obj))</span><br><span class="line">    <span class="keyword">return</span> map.<span class="title function_">get</span>(obj);</span><br><span class="line"></span><br><span class="line">  map.<span class="title function_">set</span>(obj, newObj); <span class="comment">// å°†å½“å‰å¯¹è±¡ä½œä¸º keyï¼Œå…‹éš†å¯¹è±¡ä½œä¸º value</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key))</span><br><span class="line">      newObj[key] = <span class="title function_">deepCopy</span>(object[key], map); <span class="comment">// é€’å½’</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">&#x27;AKã€å“’å“’å“’&#x27;</span>,</span><br><span class="line">    arr : [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> obj2=<span class="title function_">deepCopy</span>(obj1)</span><br><span class="line">obj2.<span class="property">name</span> = <span class="string">&quot;å“’å“’å“’&quot;</span>;</span><br><span class="line">obj2.<span class="property">arr</span>[<span class="number">1</span>] = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>] ; <span class="comment">// æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜</span></span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj1&#x27;</span>,obj1) <span class="comment">// obj1 &#123; name: &#x27;AKã€å“’å“’å“’&#x27;, arr: [ 1, [ 2, 3 ], 4 ] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj2&#x27;</span>,obj2) <span class="comment">// obj2 &#123; name: &#x27;å“’å“’å“’&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="2-6-å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#2-6-å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="2.6 å‡½æ•°æŸ¯é‡ŒåŒ–"></a>2.6 å‡½æ•°æŸ¯é‡ŒåŒ–</h4><ul><li>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯</li></ul><blockquote><p>æŸ¯é‡ŒåŒ–å®é™…æ˜¯æŠŠç®€å•çš„é—®é¢˜å¤æ‚åŒ–ï¼Œä½†æ˜¯å¤æ‚åŒ–çš„åŒæ—¶ï¼Œåœ¨ä½¿ç”¨å‡½æ•°æ—¶æ‹¥æœ‰äº†æ›´åŠ å¤šçš„è‡ªç”±åº¦ã€‚è€Œå¯¹äºå‡½æ•°å‚æ•°çš„è‡ªç”±å¤„ç†ï¼Œæ­£æ˜¯æŸ¯é‡ŒåŒ–çš„æ ¸å¿ƒæ‰€åœ¨ã€‚æŸ¯é‡ŒåŒ–æœ¬è´¨ä¸Šæ˜¯é™ä½é€šç”¨æ€§ï¼Œæé«˜é€‚ç”¨æ€§</p></blockquote><ul><li>å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ–<ul><li>å‡è®¾å­˜åœ¨ä¸€ä¸ªåŸå‡½æ•°<code>fn</code>ï¼Œ<code>fn</code>æ¥å—ä¸‰ä¸ªå‚æ•°<code>a, b, c</code>ï¼Œé‚£ä¹ˆå‡½æ•°<code>fn</code>æœ€å¤šè¢«æŸ¯é‡ŒåŒ–ä¸‰æ¬¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="comment">// è·å–åŸå‡½æ•°çš„å‚æ•°é•¿åº¦</span></span><br><span class="line">  <span class="keyword">const</span> argLen = fn.<span class="property">length</span>;</span><br><span class="line">  <span class="comment">// ä¿å­˜é¢„ç½®å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> presetArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼šç»§ç»­ä¼ å‚</span></span><br><span class="line">    <span class="keyword">const</span> restArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">const</span> allArgs = [...presetArgs, ...restArgs]</span><br><span class="line">    <span class="keyword">if</span> (allArgs.<span class="property">length</span> &gt;= argLen) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå‚æ•°å¤Ÿäº†ï¼Œå°±æ‰§è¡ŒåŸå‡½æ•°</span></span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, allArgs)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦åˆ™ç»§ç»­æŸ¯é‡ŒåŒ–</span></span><br><span class="line">      <span class="keyword">return</span> curry.<span class="title function_">call</span>(<span class="literal">null</span>, fn, ...allArgs)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> curried = <span class="title function_">curry</span>(sum);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">//6</span></span><br></pre></td></tr></table></figure><ul><li>å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–<ul><li>å¦‚æœè¦æ”¯æŒå‚æ•°ä¸å®šé•¿çš„åœºæ™¯ï¼Œå·²ç»æŸ¯é‡ŒåŒ–çš„å‡½æ•°åœ¨æ‰§è¡Œå®Œæ¯•æ—¶ä¸èƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œåªèƒ½è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚åŒæ—¶è¦è®©<code>JS</code>å¼•æ“åœ¨è§£æå¾—åˆ°çš„è¿™ä¸ªç»“æœæ—¶ï¼Œèƒ½æ±‚å‡ºé¢„æœŸçš„å€¼</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¿å­˜é¢„ç½®å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> presetArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">curried</span> () &#123;</span><br><span class="line">    <span class="comment">// æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼šç»§ç»­ä¼ å‚</span></span><br><span class="line">    <span class="keyword">const</span> restArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">const</span> allArgs = [...presetArgs, ...restArgs]</span><br><span class="line">    <span class="keyword">return</span> curry.<span class="title function_">call</span>(<span class="literal">null</span>, fn, ...allArgs)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é‡å†™toString</span></span><br><span class="line">  curried.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="literal">null</span>, presetArgs)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> curried;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dynamicAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [...<span class="variable language_">arguments</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> prev + curr</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> add = <span class="title function_">curry</span>(dynamicAdd);</span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>, <span class="number">4</span>)(<span class="number">5</span>, <span class="number">6</span>) <span class="comment">// 21</span></span><br></pre></td></tr></table></figure><hr><h4 id="2-7-æ•°ç»„æ‰å¹³åŒ–"><a href="#2-7-æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="2.7 æ•°ç»„æ‰å¹³åŒ–"></a>2.7 æ•°ç»„æ‰å¹³åŒ–</h4><blockquote><p>å®ç°æ‰å¹³åŒ–çš„æ–¹æ³•ï¼Œå°è£…<code>flatten</code><br>å·²æœ‰å¤šçº§åµŒå¥—æ•°ç»„<code>[1, [2, [3, [4, 5]]], 6]</code> å°†å…¶æ‰å¹³åŒ–å¤„ç†ï¼Œè¾“å‡º<code>[1,2,3,4,5,6]</code></p></blockquote><ul><li><code>ES6 flat</code><ul><li><code>flat(depth)</code>æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ä½¿ç”¨<code>Infinity</code>ï¼Œå¯å±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]], <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> params.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: [1,2,3,4,5,6]</span></span><br></pre></td></tr></table></figure><blockquote><p>â­ ç›´æ¥ä½¿ç”¨è‡ªå¸¦çš„æ–¹æ³•å¯ä»¥å¾ˆå¿«çš„å®ç°, ä½†æ˜¯é¢è¯•å®˜å½“ç„¶ä¸å¸Œæœ›å°±çœ‹åˆ°è¿™äº›å‘€</p></blockquote><ul><li>å¾ªç¯é€’å½’<ul><li>å¾ªç¯åˆ¤æ–­æ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯å¦æ˜¯æ•°ç»„<code>Array.isArray(arr[i])</code></li><li>æ˜¯æ•°ç»„å°±é€’å½’è°ƒç”¨æ‰å¹³åŒ–ä»£ç <code>result = result.concat(flatten(arr[i]));</code></li><li>ä¸æ˜¯æ•°ç»„,ç›´æ¥é€šè¿‡<code>push</code>æ·»åŠ åˆ°è¿”å›å€¼æ•°ç»„</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr[i])) &#123;</span><br><span class="line">      result = result.<span class="title function_">concat</span>(<span class="title function_">flatten</span>(arr[i]));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result.<span class="title function_">push</span>(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­ ä½¿ç”¨é€’å½’å†™å‡ºæ•°ç»„æ‰å¹³åŒ–, ä½†æ˜¯ç¼ºå°‘æ§åˆ¶å±‚çº§å…³ç³»</p></blockquote><ul><li>å¢åŠ å‚æ•°æ§åˆ¶æ‰å¹³åŒ–æ·±åº¦<ul><li>å¯ä»¥ç†è§£ä¸ºæ‰‹å†™<code>flat()</code>æ–¹æ³•</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// forEach éå†æ•°ç»„ä¼šè‡ªåŠ¨è·³è¿‡ç©ºå…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">eachFlat</span> = (<span class="params">arr = [], depth = <span class="number">1</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> result = []; <span class="comment">// ç¼“å­˜é€’å½’ç»“æœ</span></span><br><span class="line">  <span class="comment">// å¼€å§‹é€’å½’</span></span><br><span class="line">  (<span class="keyword">function</span> <span class="title function_">flat</span>(<span class="params">arr, depth</span>) &#123;</span><br><span class="line">    <span class="comment">// forEach ä¼šè‡ªåŠ¨å»é™¤æ•°ç»„ç©ºä½</span></span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ§åˆ¶é€’å½’æ·±åº¦</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(item) &amp;&amp; depth &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// é€’å½’æ•°ç»„</span></span><br><span class="line">        <span class="title function_">flat</span>(item, depth - <span class="number">1</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ç¼“å­˜å…ƒç´ </span></span><br><span class="line">        result.<span class="title function_">push</span>(item)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)(arr, depth)</span><br><span class="line">  <span class="comment">// è¿”å›é€’å½’ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­â­ ä½¿ç”¨é€’å½’å†™å‡ºæ•°ç»„æ‰å¹³åŒ–, å¯ä»¥é€šè¿‡å‚æ•°æ§åˆ¶å±‚çº§å…³ç³»</p></blockquote><ul><li><code>while</code>å¾ªç¯+<code>some</code>æ–¹æ³•<ul><li>é€šè¿‡<code>some</code>æ¥åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦ç”¨æ•°ç»„, é€šè¿‡<code>while</code>ä¸æ–­å¾ªç¯æ‰§è¡Œåˆ¤æ–­, å¦‚æœæ˜¯æ•°ç»„çš„è¯å¯ä»¥ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦<code>...</code>, <code>...</code>æ¯æ¬¡åªèƒ½å±•å¼€æœ€å¤–å±‚çš„æ•°ç»„, åŠ ä¸Š<code>contact</code>æ¥å‡å°‘åµŒå¥—å±‚æ•°</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.<span class="title function_">some</span>(<span class="function"><span class="params">item</span>=&gt;</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(item))) &#123;</span><br><span class="line">    arr = [].<span class="title function_">concat</span>(...arr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­â­ ä½¿ç”¨<code>while</code>å¾ªç¯å–æ¶ˆé€’å½’æ“ä½œ, å·§ç”¨<code>some</code>æ“ä½œè¿›è¡Œåˆ¤æ–­</p></blockquote><hr><h4 id="2-8-typeof-åˆ¤æ–­"><a href="#2-8-typeof-åˆ¤æ–­" class="headerlink" title="2.8 typeof åˆ¤æ–­"></a>2.8 typeof åˆ¤æ–­</h4><ul><li><code>typeof null</code> æ˜¯ <code>â€œobjectâ€</code>: å†å²é—ç•™é—®é¢˜</li><li><code>typeof NaN</code> æ˜¯ <code>â€œnumberâ€</code>: <code>NaN</code> å®é™…å­˜å‚¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°å€¼ç±»å‹</li><li><code>typeof Function.prototype</code> æ˜¯ <code>function</code></li></ul><table><thead><tr><th align="center">ç±»å‹</th><th align="center">ç»“æœ</th></tr></thead><tbody><tr><td align="center">Undefined</td><td align="center"><code>&quot;undefined&quot;</code></td></tr><tr><td align="center">Null</td><td align="center"><code>&quot;object&quot;</code></td></tr><tr><td align="center">Boolean</td><td align="center"><code>&quot;boolean&quot;</code></td></tr><tr><td align="center">Number</td><td align="center"><code>&quot;number&quot;</code></td></tr><tr><td align="center">BigInt</td><td align="center"><code>&quot;bigint&quot;</code></td></tr><tr><td align="center">String</td><td align="center"><code>&quot;string&quot;</code></td></tr><tr><td align="center">Symbol</td><td align="center"><code>&quot;symbol&quot;</code></td></tr><tr><td align="center">Function (class)</td><td align="center"><code>&quot;function&quot;</code></td></tr><tr><td align="center">å…¶ä»–ä»»ä½•å¯¹è±¡</td><td align="center"><code>&quot;object&quot;</code></td></tr></tbody></table><hr><h4 id="2-9-äº‹ä»¶å§”æ‰˜ä¼˜åŒ–"><a href="#2-9-äº‹ä»¶å§”æ‰˜ä¼˜åŒ–" class="headerlink" title="2.9 äº‹ä»¶å§”æ‰˜ä¼˜åŒ–"></a>2.9 äº‹ä»¶å§”æ‰˜ä¼˜åŒ–</h4><ul><li>å­—èŠ‚ä¸€é¢é¢˜</li></ul><blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦å»åš<code>Event Tracking System</code>ï¼Œéœ€è¦å»è®°å½•ç”¨æˆ·åœ¨ç½‘ç«™å†…åšäº†ä»€ä¹ˆï¼Œç‚¹å‡»äº†ä»€ä¹ˆæŒ‰é’®ã€‚å¦‚æœæœ‰å¾ˆå¤šä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªéƒ½ç»‘ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ€§èƒ½å¾ˆå·®ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</p></blockquote><ul><li>ç»‘å®šäº‹ä»¶åˆ°çˆ¶å…ƒç´ <ul><li>è€Œä¸æ˜¯ä¸ºæ¯ä¸ªå­èŠ‚ç‚¹å•ç‹¬ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œäº‹ä»¶å§”æ‰˜å¯ä»¥å°†äº‹ä»¶å¤„ç†ç¨‹åºç»‘å®šåˆ°å…¬å…±çš„çˆ¶å…ƒç´ ä¸Šï¼Œç„¶åé€šè¿‡äº‹ä»¶çš„<code>target</code>æ¥ç¡®å®šå®é™…è§¦å‘äº‹ä»¶çš„å­èŠ‚ç‚¹ã€‚</li></ul></li><li>æ£€æŸ¥ç›®æ ‡å…ƒç´ <ul><li>ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„<code>event.target</code>å±æ€§æ¥åˆ¤æ–­å“ªä¸ªå­èŠ‚ç‚¹è§¦å‘äº†äº‹ä»¶ï¼Œå¹¶æ ¹æ®éœ€è¦å¤„ç†ç›¸åº”çš„é€»è¾‘</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul id=&quot;parent&quot;&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 1&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 2&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 3&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 4&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°†ç‚¹å‡»äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ </span><br><span class="line">const parent = document.getElementById(&#x27;parent&#x27;);</span><br><span class="line"></span><br><span class="line">// äº‹ä»¶å¤„ç†å™¨ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Š</span><br><span class="line">parent.addEventListener(&#x27;click&#x27;, function (event) &#123;</span><br><span class="line">  // é€šè¿‡ event.target æ¥åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å¦æ˜¯ç›®æ ‡å­èŠ‚ç‚¹</span><br><span class="line">  if (event.target &amp;&amp; event.target.classList.contains(&#x27;child&#x27;)) &#123;</span><br><span class="line">    console.log(&#x27;ç‚¹å‡»äº†å­èŠ‚ç‚¹ï¼š&#x27;, event.target.innerText);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>äº‹ä»¶å§”æ‰˜ç‰¹åˆ«é€‚ç”¨äºå­˜åœ¨å¤§é‡ç±»ä¼¼å…ƒç´ çš„åœºæ™¯ï¼Œå¦‚åˆ—è¡¨ã€è¡¨æ ¼ä¸­çš„è¡Œã€åŠ¨æ€ç”Ÿæˆçš„å…ƒç´ ç­‰</p></blockquote><hr><h3 id="3-ç½‘ç»œå®‰å…¨"><a href="#3-ç½‘ç»œå®‰å…¨" class="headerlink" title="3. ç½‘ç»œå®‰å…¨"></a>3. ç½‘ç»œå®‰å…¨</h3><h4 id="3-1-è·¨ç«™è„šæœ¬æ”»å‡»-XSS"><a href="#3-1-è·¨ç«™è„šæœ¬æ”»å‡»-XSS" class="headerlink" title="3.1 è·¨ç«™è„šæœ¬æ”»å‡» XSS"></a>3.1 è·¨ç«™è„šæœ¬æ”»å‡» XSS</h4><ul><li><code>XSS</code>ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œ<code>Cross-Site Scripting</code>ï¼‰æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…é€šè¿‡å‘ç½‘é¡µæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä½¿å¾—å½“ç”¨æˆ·è®¿é—®å—æ„ŸæŸ“çš„é¡µé¢æ—¶ï¼Œæ¶æ„è„šæœ¬ä¼šåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œ<ul><li>é˜²æ­¢ <code>XSS</code>æ”»å‡»çš„å…³é”®æ˜¯ä¸¥æ ¼å¤„ç†ç”¨æˆ·è¾“å…¥å’Œè¾“å‡º</li><li>å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼éªŒè¯å’Œè¿‡æ»¤<strong>ï¼Œ</strong>ä½¿ç”¨å®‰å…¨çš„æ¡†æ¶å’Œåº“</li></ul></li></ul><hr><h4 id="3-2-è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF"><a href="#3-2-è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF" class="headerlink" title="3.2 è·¨ç«™è¯·æ±‚ä¼ªé€  CSRF"></a>3.2 è·¨ç«™è¯·æ±‚ä¼ªé€  CSRF</h4><ul><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (<code>CSRF</code>) æ˜¯ä¸€ç§å‰ç«¯å®‰å…¨æ”»å‡»ï¼Œé€šè¿‡ä¼ªé€ çš„å½¢å¼æ¥æ‰§è¡Œä½ åŸæœ¬ä¸å¸Œæœ›æ‰§è¡Œçš„æ“ä½œ<ul><li>é˜²æ­¢<code>CSRF</code>æ”»å‡»éœ€è¦ç¡®ä¿è¯·æ±‚æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸”æ˜¯ç”¨æˆ·æœ‰æ„å‘èµ·çš„</li><li>é˜²æ­¢<code>CSRF</code>æ”»å‡»çš„æœ€ç®€å•æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨ä»æœåŠ¡å™¨ç”Ÿæˆçš„<code>CSRF</code>ä»¤ç‰Œã€‚å¦‚æœå®¢æˆ·ç«¯æ— æ³•æä¾›å‡†ç¡®çš„ä»¤ç‰Œï¼ŒæœåŠ¡å™¨å¯ä»¥æ‹’ç»è¯·æ±‚çš„æ“ä½œ</li></ul></li></ul><hr><h3 id="4-ç½‘ç»œåè®®"><a href="#4-ç½‘ç»œåè®®" class="headerlink" title="4. ç½‘ç»œåè®®"></a>4. ç½‘ç»œåè®®</h3><h4 id="4-1-ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«"><a href="#4-1-ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«" class="headerlink" title="4.1 ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«"></a>4.1 ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«</h4><ul><li>å‚è€ƒ: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903492763533319?searchId=20241013095821BCBAFA2F17F7FC9E99C5">é“¾æ¥</a></li><li>ç½‘ç»œä¸ƒå±‚æ¨¡å‹ <code>OSI</code>ï¼ˆ<code>Open Systems Interconnection Model</code>ï¼‰æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œè€Œéå®ç°</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture1234.PNG"></p><ul><li><code>OSI</code>æ¨¡å‹æ˜¯ä»ä¸Šå¾€ä¸‹çš„ï¼Œè¶Šåº•å±‚è¶Šæ¥è¿‘ç¡¬ä»¶ï¼Œè¶Šå¾€ä¸Šè¶Šæ¥è¿‘è½¯ä»¶ï¼Œè¿™ä¸ƒå±‚æ¨¡å‹åˆ†åˆ«æ˜¯<strong>ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚</strong>ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; ç‰©ç†å±‚ï¼šåº•å±‚æ•°æ®ä¼ è¾“ï¼Œå¦‚ç½‘çº¿ï¼›ç½‘å¡æ ‡å‡†ã€‚</span><br><span class="line">&gt; æ•°æ®é“¾è·¯å±‚ï¼šå®šä¹‰æ•°æ®çš„åŸºæœ¬æ ¼å¼ï¼Œå¦‚ä½•ä¼ è¾“ï¼Œå¦‚ä½•æ ‡è¯†ï¼›å¦‚ç½‘å¡MACåœ°å€ã€‚</span><br><span class="line">&gt; ç½‘ç»œå±‚ï¼šå®šä¹‰IPç¼–å€ï¼Œå®šä¹‰è·¯ç”±åŠŸèƒ½ï¼›å¦‚ä¸åŒè®¾å¤‡çš„æ•°æ®è½¬å‘ã€‚</span><br><span class="line">&gt; ä¼ è¾“å±‚ï¼šç«¯åˆ°ç«¯ä¼ è¾“æ•°æ®çš„åŸºæœ¬åŠŸèƒ½ï¼›å¦‚ TCPã€UDPã€‚</span><br><span class="line">&gt; ä¼šè¯å±‚ï¼šæ§åˆ¶åº”ç”¨ç¨‹åºä¹‹é—´ä¼šè¯èƒ½åŠ›ï¼›å¦‚ä¸åŒè½¯ä»¶æ•°æ®åˆ†å‘ç»™ä¸åŒè½¯ä»¶ã€‚</span><br><span class="line">&gt; æ ‡è¯†å±‚ï¼šæ•°æ®æ ¼å¼æ ‡è¯†ï¼ŒåŸºæœ¬å‹ç¼©åŠ å¯†åŠŸèƒ½ã€‚</span><br><span class="line">&gt; åº”ç”¨å±‚ï¼šå„ç§åº”ç”¨è½¯ä»¶ï¼ŒåŒ…æ‹¬ Web åº”ç”¨ã€‚</span><br></pre></td></tr></table></figure><ul><li>ç½‘ç»œå››å±‚æ¨¡å‹æ˜¯ä¸€ä¸ªå®ç°çš„åº”ç”¨æ¨¡å‹ï¼Œç”±ä¸ƒå±‚æ¨¡å‹ç®€åŒ–åˆå¹¶è€Œæ¥</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture4321.PNG"></p><ul><li><code>TCP/IP</code>æ¨¡å‹å°†<code>OSI</code>æ¨¡å‹ç”±ä¸ƒå±‚ç®€åŒ–ä¸ºå››å±‚ï¼Œä¼ è¾“å±‚å’Œç½‘ç»œå±‚è¢«å®Œæ•´ä¿ç•™ï¼Œå› æ­¤ç½‘ç»œä¸­æœ€æ ¸å¿ƒçš„æŠ€æœ¯å°±æ˜¯ä¼ è¾“å±‚å’Œç½‘ç»œå±‚æŠ€æœ¯</li></ul><hr><h4 id="4-2-http-å’Œ-https-åŸºæœ¬æ¦‚å¿µ"><a href="#4-2-http-å’Œ-https-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4.2 http å’Œ https åŸºæœ¬æ¦‚å¿µ"></a>4.2 http å’Œ https åŸºæœ¬æ¦‚å¿µ</h4><ul><li><code>HTTP</code>: æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†<code>TCP</code>ï¼Œç”¨äºä»<code>WWW</code>æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘</li><li><code>HTTPS</code>: æ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„<code>HTTP</code>é€šé“ï¼Œç®€å•è®²æ˜¯<code>HTTP</code>çš„å®‰å…¨ç‰ˆï¼Œå³<code>HTTP</code>ä¸‹åŠ å…¥<code>SSL</code>å±‚ï¼Œ<code>HTTPS</code>çš„å®‰å…¨åŸºç¡€æ˜¯<code>SSL</code>ï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦<code>SSL</code></li><li><code>HTTPS</code>åè®®çš„ä¸»è¦ä½œç”¨å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ã€‚å¦ä¸€ç§å°±æ˜¯ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</li></ul><hr><h4 id="4-3-http-å’Œ-https-åŒºåˆ«"><a href="#4-3-http-å’Œ-https-åŒºåˆ«" class="headerlink" title="4.3 http å’Œ https åŒºåˆ«"></a>4.3 http å’Œ https åŒºåˆ«</h4><p><code>HTTP</code>åè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨<code>HTTP</code>åè®®ä¼ è¾“éšç§ä¿¡æ¯éå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯ è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼Œäºæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†<code>SSL</code>(<code>Secure Sockets Layer</code>)åè®®ç”¨äºå¯¹<code>HTTP</code>åè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œå°±è¯ç”Ÿäº†<code>HTTPS</code>ã€‚ç®€å•æ¥è¯´ï¼Œ<code>HTTPS</code>åè®®æ˜¯ç”±<code>SSL+HTTP</code>åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”<code>HTTP</code>åè®®å®‰å…¨</p><ul><li><code>https</code>åè®®éœ€è¦åˆ°<code>ca</code>ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨</li><li><code>http</code>æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œ<code>https</code>åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„<code>ssl</code>åŠ å¯†ä¼ è¾“åè®®</li><li><code>http</code>å’Œ<code>https</code>ä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯<code>80</code>ï¼Œåè€…æ˜¯<code>443</code></li><li><code>http</code>çš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚<code>https</code>åè®®æ˜¯ç”±<code>SSL+HTTP</code>åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”<code>http</code>åè®®å®‰å…¨</li></ul><blockquote><p>æ³¨æ„: <code>HTTPS = HTTP + SSL/TLS</code>ï¼Œå¦‚ä»Š<code>SSL</code>å·²åºŸå¼ƒï¼Œæ‰€ä»¥ç°åœ¨åªå…³æ³¨<code>HTTP + TLS</code></p></blockquote><hr><h4 id="4-4-http1-x-å’Œ-http2-x-åŒºåˆ«"><a href="#4-4-http1-x-å’Œ-http2-x-åŒºåˆ«" class="headerlink" title="4.4 http1.x å’Œ http2.x åŒºåˆ«"></a>4.4 http1.x å’Œ http2.x åŒºåˆ«</h4><p><code>http1.x</code>å’Œ<code>http2.x</code>ä¸»è¦æœ‰ä»¥ä¸‹<code>4</code>ä¸ªåŒºåˆ«</p><ul><li><p><code>HTTP2</code>ä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶ä¼ é€ï¼Œ<code>HTTP1.X</code>æ˜¯æ–‡æœ¬(å­—ç¬¦ä¸²)ä¼ é€</p><ul><li>äºŒè¿›åˆ¶ä¼ é€çš„å•ä½æ˜¯å¸§å’Œæµã€‚å¸§ç»„æˆäº†æµï¼ŒåŒæ—¶æµè¿˜æœ‰æµ<code>ID</code>æ ‡ç¤º</li><li>ä¼˜åŠ¿: ä¼ è¾“é€Ÿåº¦æ›´å¿« (äºŒè¿›åˆ¶æ•°æ®ä½“ç§¯è¾ƒå°), å¤„ç†æ›´é«˜æ•ˆ (ä¸éœ€è¦è¿›è¡Œæ–‡æœ¬è§£æ), é€‚ç”¨äºå¤æ‚æ•°æ®ç±»å‹ (å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘), å®‰å…¨æ€§æ›´é«˜ (äºŒè¿›åˆ¶æ•°æ®ä¸æ˜“è¢«ç›´æ¥é˜…è¯»)</li></ul></li><li><p><code>HTTP2</code>æ”¯æŒå¤šè·¯å¤ç”¨</p><ul><li>å› ä¸ºæœ‰æµ<code>ID</code>ï¼Œæ‰€ä»¥é€šè¿‡åŒä¸€ä¸ª<code>http</code>è¯·æ±‚å®ç°å¤šä¸ª<code>http</code>è¯·æ±‚ä¼ è¾“å˜æˆäº†å¯èƒ½ï¼Œå¯ä»¥é€šè¿‡æµ<code>ID</code>æ¥æ ‡ç¤ºç©¶ç«Ÿæ˜¯å“ªä¸ªæµä»è€Œå®šä½åˆ°æ˜¯å“ªä¸ª<code>http</code>è¯·æ±‚</li></ul></li><li><p><code>HTTP2</code>å¤´éƒ¨å‹ç¼©</p><ul><li><code>HTTP2</code>é€šè¿‡<code>gzip</code>å’Œ<code>compress</code>å‹ç¼©å¤´éƒ¨ç„¶åå†å‘é€ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŒæ—¶ç»´æŠ¤ä¸€å¼ å¤´ä¿¡æ¯è¡¨ï¼Œæ‰€æœ‰å­—æ®µéƒ½è®°å½•åœ¨è¿™å¼ è¡¨ä¸­ï¼Œè¿™æ ·åé¢æ¯æ¬¡ä¼ è¾“åªéœ€è¦ä¼ è¾“è¡¨é‡Œé¢çš„ç´¢å¼•<code>ID</code>å°±è¡Œï¼Œé€šè¿‡ç´¢å¼•<code>ID</code>æŸ¥è¯¢è¡¨å¤´çš„å€¼</li></ul></li><li><p><code>HTTP2</code>æ”¯æŒæœåŠ¡å™¨æ¨é€</p><ul><li><code>HTTP2</code>æ”¯æŒåœ¨æœªç»å®¢æˆ·ç«¯è®¸å¯çš„æƒ…å†µä¸‹ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€å†…å®¹</li></ul></li></ul><hr><h4 id="4-5-http-è¯·æ±‚æ–¹å¼"><a href="#4-5-http-è¯·æ±‚æ–¹å¼" class="headerlink" title="4.5 http è¯·æ±‚æ–¹å¼"></a>4.5 http è¯·æ±‚æ–¹å¼</h4><p><code>http</code>è¯·æ±‚æ–¹å¼æœ‰ä»¥ä¸‹<code>8</code>ç§ï¼Œå…¶ä¸­<code>GET</code>å’Œ<code>POST</code>æ˜¯æœ€å¸¸ç”¨çš„</p><ul><li><code>GET</code>: å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚<code>GET</code>æ–¹æ³•ä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­</li><li><code>POST</code>: å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚, ä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚<code>POST</code>è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ&#x2F;æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹</li><li><code>PUT</code>: å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹</li><li><code>DELETE</code>: è¯·æ±‚æœåŠ¡å™¨åˆ é™¤<code>Request-URL</code>æ‰€æ ‡è¯†çš„èµ„æº</li><li><code>HEAD</code>: å‘æœåŠ¡å™¨ç´¢ä¸<code>GET</code>è¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥å†ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”å°æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯</li><li><code>OPTIONS</code>: è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„<code>HTTP</code>è¯·æ±‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å‘<code>web</code>æœåŠ¡å™¨å‘é€<code>â€˜*â€™</code>çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§</li><li><code>TRACE</code>: å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</li><li><code>CONNECT</code>: <code>HTTP/1.1</code>åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</li></ul><hr><h4 id="4-6-TCP-ä¸‰æ¬¡æ¡æ‰‹"><a href="#4-6-TCP-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="4.6 TCP ä¸‰æ¬¡æ¡æ‰‹"></a>4.6 TCP ä¸‰æ¬¡æ¡æ‰‹</h4><hr><h3 id="5-React-é¢˜ç›®"><a href="#5-React-é¢˜ç›®" class="headerlink" title="5. React é¢˜ç›®"></a>5. React é¢˜ç›®</h3><hr><h3 id="6-ç¼“å­˜"><a href="#6-ç¼“å­˜" class="headerlink" title="6. ç¼“å­˜"></a>6. ç¼“å­˜</h3><h4 id="6-1-å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜"><a href="#6-1-å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜" class="headerlink" title="6.1 å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜"></a>6.1 å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜</h4><ul><li><p>å‚è€ƒ: <a target="_blank" rel="noopener" href="https://juejin.cn/post/7259298281578889273?searchId=20241013235036EC2DA00FC6CFFB00CC87">é“¾æ¥</a></p></li><li><p>ä¸ºäº†å‡å°‘èµ„æºè¯·æ±‚æ¬¡æ•°ï¼ŒåŠ å¿«èµ„æºè®¿é—®é€Ÿåº¦ï¼Œæµè§ˆå™¨ä¼šå¯¹èµ„æºæ–‡ä»¶å¦‚å›¾ç‰‡ã€<code>css</code>æ–‡ä»¶ã€<code>js</code>æ–‡ä»¶ç­‰è¿›è¡Œç¼“å­˜ï¼Œè€Œæµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆåˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜</p></li><li><p>å¼ºç¼“å­˜ <code>Strong Cache</code></p><ul><li>æ‰€è°“å¼ºç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸ºå¼ºåˆ¶ç¼“å­˜çš„æ„æ€ï¼Œå³æµè§ˆå™¨åœ¨è®¿é—®æŸä¸ªèµ„æºæ—¶ä¼šåˆ¤æ–­æ˜¯å¦ä½¿ç”¨æœ¬åœ°ç¼“å­˜é‡Œå·²ç»å­˜åœ¨çš„èµ„æºæ–‡ä»¶ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„è¯åˆ™ä¸ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ°å‡è½»æœåŠ¡å™¨è®¿é—®å‹åŠ›çš„ä½œç”¨ï¼Œä¸”ç”±äºç›´æ¥ä»æœ¬åœ°ç¼“å­˜è¯»å–èµ„æºæ–‡ä»¶ï¼Œå¤§å¤§æé«˜äº†åŠ è½½é€Ÿåº¦</li><li>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„æŸä¸ªèµ„æºæ—¶ï¼Œå¦‚æœæœåŠ¡å™¨å¸Œæœ›æµè§ˆå™¨å¾—åˆ°è¯¥èµ„æºåä¸€æ®µæ—¶é—´å†…ä¸è¦å†å‘é€è¯·æ±‚è¿‡æ¥ï¼Œç›´æ¥ä»æµè§ˆå™¨é‡Œçš„ç¼“å­˜é‡Œå–ï¼Œåˆ™æœåŠ¡å™¨å¯ä»¥é€šè¿‡åœ¨å“åº”å¤´é‡Œè®¾ç½®<code>Cache-Control: max-age=31536000</code>ï¼Œ<code>max-age</code>ä»£è¡¨ç¼“å­˜æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œè¿™é‡Œçš„æ•°æ®æ¢ç®—è¿‡æ¥å°±æ˜¯ä¸€å¹´ï¼Œæ„å‘³ç€åœ¨ä¸€å¹´å†…æµè§ˆå™¨ä¸ä¼šå†å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture4567.PNG"></p><ul><li>ä½¿ç”¨ç¼“å­˜çš„è¯ï¼ŒçŠ¶æ€ç <code>200</code>åé¢ä¼šæ ‡æ˜æƒ…å†µã€‚æµè§ˆå™¨ç¼“å­˜èµ„æºçš„åœ°æ–¹æœ‰ä¸¤ä¸ª: ç£ç›˜ç¼“å­˜ï¼ˆ<code>disk cache</code>ï¼‰å’Œå†…å­˜ç¼“å­˜ï¼ˆ<code>memory cache</code>ï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture7654.PNG"></p><ul><li>å½“ç¼“å­˜æ—¶é—´åˆ°æœŸåå†æ¬¡è®¿é—®æ—¶ï¼ŒçŠ¶æ€ç <code>200</code>åé¢ä¾¿æ²¡æœ‰æ‹¬å·å†…çš„å†…å®¹äº†</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture12345.PNG"></p><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šå°†è¾ƒå¤§çš„èµ„æºç¼“å­˜åˆ°<code>disk cache</code>ï¼Œè€Œè¾ƒå°çš„èµ„æºåˆ™è¢«ç¼“å­˜åˆ°<code>memory cache</code>é‡Œã€‚å†…å­˜ç¼“å­˜ä¸ç£ç›˜ç¼“å­˜ç›¸æ¯”ï¼Œè®¿é—®é€Ÿåº¦è¦æ›´å¿«ä¸€äº›</p></blockquote><ul><li>å¼ºç¼“å­˜é™¤äº†ä½¿ç”¨<code>Cache-Control</code>å®ç°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>Expires</code>å­—æ®µï¼Œ<code>Expires</code>æ˜¯<code>Http1.0</code>è§„èŒƒï¼Œ<code>Cache-Control</code>æ˜¯<code>Http1.1</code>è§„èŒƒï¼Œ<code>Expires</code>è¿”å›ä¸€ä¸ªå…·ä½“çš„æ—¶é—´å€¼ï¼Œä»£è¡¨ç¼“å­˜çš„æœ‰æ•ˆæœŸï¼Œåœ¨è¯¥æ—¥æœŸå†…æµè§ˆå™¨ä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜é‡Œè·å–èµ„æº</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture5431.PNG"></p><ul><li>å› ä¸º<code>Expires</code>å‚ç…§çš„æ˜¯æœ¬åœ°å®¢æˆ·ç«¯çš„æ—¶é—´ï¼Œè€Œå®¢æˆ·ç«¯çš„æ—¶é—´æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¼šæœ‰è¯¯å·®äº§ç”Ÿçš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯<code>Expires</code>çš„ä¸€ä¸ªç¼ºç‚¹ï¼Œæ‰€ä»¥æœ‰äº†åæ¥<code>Http1.1</code>è§„èŒƒçš„<code>Cache-control</code></li></ul><blockquote><p><code>Cache-control</code>çš„ä¼˜å…ˆçº§è¦é«˜äº<code>Expires</code>ï¼Œå¦‚æœä¸¤è€…åŒæ—¶è®¾ç½®ï¼Œä¼šä¼˜å…ˆä½¿ç”¨<code>Cache-control</code>è€Œå¿½ç•¥æ‰<code>Expires</code></p></blockquote><ul><li>åå•†ç¼“å­˜ <code>Negotiation Cache</code><ul><li>åœ¨å¼ºç¼“å­˜é‡Œï¼Œæ˜¯å¦ä½¿ç”¨ç¼“å­˜æ˜¯ç”±æµè§ˆå™¨æ¥ç¡®å®šçš„ï¼Œè€Œåå•†ç¼“å­˜åˆ™æ˜¯ç”±æœåŠ¡å™¨æ¥å‘Šè¯‰æµè§ˆå™¨æ˜¯å¦ä½¿ç”¨ç¼“å­˜èµ„æºï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨æ¯ä¸€æ¬¡éƒ½è¦å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨è¯¢é—®æ˜¯å¦ä½¿ç”¨ç¼“å­˜</li><li>æµè§ˆå™¨åˆæ¬¡è¯·æ±‚èµ„æºï¼ŒæœåŠ¡å™¨è¿”å›èµ„æºï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ª<code>Etag</code>å€¼æºå¸¦åœ¨å“åº”å¤´é‡Œè¿”å›ç»™æµè§ˆå™¨ï¼Œå½“æµè§ˆå™¨å†æ¬¡è¯·æ±‚èµ„æºæ—¶ä¼šåœ¨è¯·æ±‚å¤´é‡Œæºå¸¦<code>If-None-Match</code>ï¼Œå€¼æ˜¯ä¹‹å‰æœåŠ¡å™¨è¿”å›çš„<code>Etag</code>çš„å€¼ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¹‹åæ‹¿è¯¥å€¼ä¸èµ„æºæ–‡ä»¶æœ€æ–°çš„<code>Etag</code>å€¼åšå¯¹æ¯”</li></ul></li></ul><blockquote><p>å¦‚æœæ²¡æœ‰å˜åŒ–åˆ™è¿”å›<code>304</code>ï¼Œå‘Šè¯‰æµè§ˆå™¨ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼ˆä¸è¿”å›èµ„æºæ–‡ä»¶ï¼‰<br>å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œåˆ™è¿”å›<code>200</code>å’Œæœ€æ–°çš„èµ„æºæ–‡ä»¶ç»™æµè§ˆå™¨ä½¿ç”¨</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture2567.PNG"></p><ul><li>é™¤äº†<code>Etag</code>å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>Last-Modified</code>çš„å±æ€§ï¼Œå®ƒæ˜¯<code>Http1.0</code>è§„èŒƒçš„ï¼ŒæœåŠ¡å™¨è¿”å›<code>Last-Modified</code>ï¼Œæµè§ˆå™¨è¯·æ±‚å¤´å¯¹åº”æºå¸¦çš„æ˜¯<code>If-Modified-since</code>ï¼Œä¸<code>Etag</code>ä¸åŒçš„æ˜¯ï¼Œ<code>Last-Modified</code>çš„å€¼æ˜¯ä¸€ä¸ªæ—¶é—´å€¼ï¼Œä»£è¡¨æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼ŒæœåŠ¡å™¨é€šè¿‡å¯¹æ¯”æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦å‘ç”Ÿæ”¹å˜æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture7890.PNG"></p><ul><li>ç›¸æ¯”<code>Last-Modified</code>ï¼Œ<code>Etag</code>ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨ä¸Šä¹Ÿæ›´ç²¾ç¡®ä¸€äº›ï¼Œå› ä¸ºæœ‰æ—¶å€™ä¼šå­˜åœ¨æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å˜æ›´äº†ï¼Œ<code>Last-Modified</code>ä¸ä¸€è‡´æ‰€ä»¥æœåŠ¡å™¨ä¼šé‡æ–°è¿”å›èµ„æºæ–‡ä»¶ï¼Œå®é™…ä¸Šè¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜çš„</li></ul><blockquote><p>å¼ºç¼“å­˜ä¼˜å…ˆçº§å¤§äºåå•†ç¼“å­˜ï¼Œå³ä¸¤è€…åŒæ—¶å­˜åœ¨æ—¶ï¼Œå¦‚æœå¼ºç¼“å­˜å¼€å¯ä¸”åœ¨æœ‰æ•ˆæœŸå†…ï¼Œåˆ™ä¸ä¼šèµ°åå•†ç¼“å­˜</p></blockquote><hr><h3 id="7-ç®—æ³•"><a href="#7-ç®—æ³•" class="headerlink" title="7. ç®—æ³•"></a>7. ç®—æ³•</h3><h4 id="7-1-LRU-Cache"><a href="#7-1-LRU-Cache" class="headerlink" title="7.1 LRU Cache"></a>7.1 LRU Cache</h4><ul><li>å­—èŠ‚ä¸€é¢ç®—æ³•é¢˜</li><li>ä½¿ç”¨<code>JS</code>å®ç°ä¸€ä¸ªé­”æ”¹ç‰ˆçš„<code>LRU Cache</code>ï¼Œå¹¶ä¸”æ»¡è¶³ä»¥ä¸‹è¦æ±‚</li></ul><blockquote><p>ç»´æŠ¤ä¸€ä¸ªå®¹é‡ä¸º<code>n</code>çš„ç¼“å­˜<br>æ¯ä¸ªç¼“å­˜é¡¹å¦‚æœåœ¨<code>X</code>ç§’åæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™è‡ªåŠ¨åˆ é™¤</p></blockquote><ul><li>å¯ä»¥ä½¿ç”¨<code>Map</code>æ¥ç»´æŠ¤ç¼“å­˜çš„é¡ºåºå’Œå®¹é‡ï¼Œåˆ©ç”¨<code>setTimeout</code>æ¥å®ç°è‡ªåŠ¨åˆ é™¤çš„åŠŸèƒ½</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">capacity, expireTime</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">capacity</span> = capacity; <span class="comment">// ç¼“å­˜å®¹é‡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">expireTime</span> = expireTime; <span class="comment">// ç¼“å­˜é¡¹çš„æœ‰æ•ˆæ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// ç”¨ Map æ¥å­˜å‚¨ç¼“å­˜æ•°æ®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// ç”¨æ¥å­˜å‚¨æ¯ä¸ªç¼“å­˜é¡¹çš„å®šæ—¶å™¨</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ç¼“å­˜</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰è¿™ä¸ªkeyï¼Œè¿”å›-1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œéœ€è¦åˆ·æ–°ç¼“å­˜çš„é¡ºåºï¼ˆå°†è¿™ä¸ªkeyç§»åˆ°æœ€æ–°çš„ä½ç½®ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(key);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// å…ˆåˆ é™¤è€çš„ä½ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value); <span class="comment">// é‡æ–°æ’å…¥ï¼Œä¿è¯æœ€æ–°è®¿é—®çš„åœ¨æœ«å°¾</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡ç½®å®šæ—¶å™¨ï¼Œå»¶é•¿è¿‡æœŸæ—¶é—´</span></span><br><span class="line">    <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(key)); <span class="comment">// æ¸…é™¤è€çš„å®šæ—¶å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">setExpiration</span>(key)); <span class="comment">// é‡æ–°è®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ ç¼“å­˜</span></span><br><span class="line">  <span class="title function_">put</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ é™¤æ—§çš„ç¼“å­˜</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key);</span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(key));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ é™¤æœ€è€çš„ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="property">size</span> &gt;= <span class="variable language_">this</span>.<span class="property">capacity</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> oldestKey = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">keys</span>().<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// è·å– Map ä¸­ç¬¬ä¸€ä¸ªï¼ˆæœ€æ—§ï¼‰çš„key</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(oldestKey); <span class="comment">// åˆ é™¤æœ€æ—§çš„ç¼“å­˜é¡¹</span></span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(oldestKey)); <span class="comment">// æ¸…é™¤ç›¸åº”çš„å®šæ—¶å™¨</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">delete</span>(oldestKey); <span class="comment">// åˆ é™¤å®šæ—¶å™¨è®°å½•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥æ–°çš„ç¼“å­˜é¡¹</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">setExpiration</span>(key)); <span class="comment">// è®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®ç¼“å­˜é¡¹çš„è‡ªåŠ¨åˆ é™¤å®šæ—¶å™¨</span></span><br><span class="line">  <span class="title function_">setExpiration</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// åˆ é™¤ç¼“å­˜é¡¹</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">delete</span>(key); <span class="comment">// åˆ é™¤å®šæ—¶å™¨è®°å½•</span></span><br><span class="line">    &#125;, <span class="variable language_">this</span>.<span class="property">expireTime</span> * <span class="number">1000</span>); <span class="comment">// è½¬æ¢ä¸ºæ¯«ç§’</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lru = <span class="keyword">new</span> <span class="title class_">LRUCache</span>(<span class="number">3</span>, <span class="number">5</span>); <span class="comment">// åˆ›å»ºå®¹é‡ä¸º3ï¼Œç¼“å­˜é¡¹5ç§’åå¤±æ•ˆçš„LRU Cache</span></span><br><span class="line">lru.<span class="title function_">put</span>(<span class="number">1</span>, <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">lru.<span class="title function_">put</span>(<span class="number">2</span>, <span class="string">&#x27;B&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">1</span>)); <span class="comment">// è¾“å‡º &#x27;A&#x27;</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">2</span>)); <span class="comment">// åœ¨5ç§’å†…è®¿é—®ï¼Œè¾“å‡º &#x27;B&#x27;</span></span><br><span class="line">&#125;, <span class="number">4000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">1</span>)); <span class="comment">// è¶…è¿‡5ç§’æœªè®¿é—®ï¼Œè¾“å‡º -1ï¼ˆå·²è¿‡æœŸï¼‰</span></span><br><span class="line">&#125;, <span class="number">6000</span>);</span><br></pre></td></tr></table></figure><hr><h4 id="7-2-æ ¼å¼åŒ–æ•°å­—"><a href="#7-2-æ ¼å¼åŒ–æ•°å­—" class="headerlink" title="7.2 æ ¼å¼åŒ–æ•°å­—"></a>7.2 æ ¼å¼åŒ–æ•°å­—</h4><ul><li><p>å­—èŠ‚ä¸€é¢ç®—æ³•é¢˜</p></li><li><p>ç»™ä¸€ä¸ªæ•°å­—æ¯”å¦‚<code>1000000</code>ï¼ŒæŠŠå®ƒè½¬åŒ–æˆ<code>1,000,000</code>ã€‚æˆ–è€…æ˜¯<code>1000000.12</code>ï¼ŒæŠŠå®ƒè½¬åŒ–æˆ<code>1,000,000.12</code>ã€‚åªèƒ½ä½¿ç”¨<code>JS</code>å®ç°</p></li><li><p>è§£å†³æ–¹æ¡ˆä¸€: ä½¿ç”¨<code>toLocaleString()</code></p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ†ç¦»æ•´æ•°å’Œå°æ•°éƒ¨åˆ†ï¼Œé»˜è®¤å°æ•°éƒ¨åˆ†ä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">let</span> [integer, decimal = <span class="string">&#x27;&#x27;</span>] = (number + <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é€šè¿‡ toLocaleString æ ¼å¼åŒ–æ•´æ•°éƒ¨åˆ†ï¼Œè‡ªåŠ¨åŠ ä¸Šåƒåˆ†ä½é€—å·</span></span><br><span class="line">  integer = (+integer).<span class="title function_">toLocaleString</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰å°æ•°éƒ¨åˆ†ï¼Œç›´æ¥è¿”å›æ ¼å¼åŒ–åçš„æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">if</span> (decimal === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> integer;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°æ•°éƒ¨åˆ†æ— éœ€åè½¬æˆ–ä½¿ç”¨ toLocaleStringï¼Œç›´æ¥è¿”å›åŸæ¥çš„å°æ•°éƒ¨åˆ†å³å¯</span></span><br><span class="line">  <span class="keyword">return</span> integer + <span class="string">&#x27;.&#x27;</span> + decimal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³æ–¹æ¡ˆäºŒ: æ­£åˆ™è¡¨è¾¾å¼</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formateNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> number.<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formateNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formateNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³æ–¹æ¡ˆä¸‰: æ‰‹åŠ¨å®ç°æ ¼å¼åŒ–</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="comment">// ç±»å‹æ£€æµ‹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> number !== <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å…ˆè½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">  number = number.<span class="title function_">toString</span>();</span><br><span class="line">  <span class="comment">// æ”¯æŒå°æ•°,æŒ‰å°æ•°ç‚¹åˆ†æˆä¸¤éƒ¨åˆ† ä½¿ç”¨äº†es6è§£æ„</span></span><br><span class="line">  <span class="keyword">let</span> [integer, decimal] = number.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°è£…äº† doSplit æ–¹æ³• ç¬¬äºŒä¸ªå‚æ•° isInteger æ¥è¡¨ç¤ºæ˜¯æ•´æ•°éƒ¨åˆ†è¿˜æ˜¯å°æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">doSplit</span> = (<span class="params">num, isInteger = <span class="literal">true</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸ºç©ºï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (!num) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æ•´æ•°éƒ¨åˆ† å…ˆæŒ‰ä½åˆ‡å‰²å†åè½¬</span></span><br><span class="line">    <span class="comment">// æ•´æ•°éƒ¨åˆ†æ•°å­—ä»å³å¾€å·¦æ•°ï¼Œæ¯3ä½æ’å…¥ä¸€ä¸ªé€—å·</span></span><br><span class="line">    <span class="comment">// å°æ•°éƒ¨åˆ†ä»å·¦å¾€å³æ•°</span></span><br><span class="line">    <span class="comment">// ä¸¤æ¬¡åè½¬ï¼Œå®ƒçš„é€—å·é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isInteger) num = num.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>();</span><br><span class="line">    <span class="keyword">let</span> str = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i !== <span class="number">0</span> &amp;&amp; i % <span class="number">3</span> === <span class="number">0</span>) str.<span class="title function_">push</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">      str.<span class="title function_">push</span>(num[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isInteger) <span class="keyword">return</span> str.<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¤„ç†æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">  integer = <span class="title function_">doSplit</span>(integer);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¤„ç†å°æ•°éƒ¨åˆ†ï¼Œç¡®ä¿ undefined å°æ•°ä¸ä¼šå¯¼è‡´é—®é¢˜</span></span><br><span class="line">  decimal = decimal ? <span class="title function_">doSplit</span>(decimal, <span class="literal">false</span>) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> integer + (decimal === <span class="string">&#x27;&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;.&#x27;</span> + decimal);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><hr><h4 id="7-3-æ‰‹å†™æ•°ç»„è½¬æ ‘"><a href="#7-3-æ‰‹å†™æ•°ç»„è½¬æ ‘" class="headerlink" title="7.3 æ‰‹å†™æ•°ç»„è½¬æ ‘"></a>7.3 æ‰‹å†™æ•°ç»„è½¬æ ‘</h4><ul><li>åšåˆ°ç±»ä¼¼ä¸‹é¢çš„è½¬æ¢</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> input = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>, <span class="attr">parentId</span>: <span class="literal">null</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>, <span class="attr">parentId</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> output = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>,</span><br><span class="line">            <span class="attr">children</span>: []</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrayToTree</span>(<span class="params">array</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> root = array[<span class="number">0</span>];</span><br><span class="line">  array.<span class="title function_">shift</span>();</span><br><span class="line">  <span class="keyword">let</span> tree = &#123;</span><br><span class="line">    <span class="attr">id</span>: root.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">val</span>: root.<span class="property">val</span>,</span><br><span class="line">    <span class="attr">children</span>: array.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="title function_">toTree</span>(root.<span class="property">id</span>, array) : []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tree;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toTree</span>(<span class="params">parentId, array</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> children = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = array[i];</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">parentId</span> === parentId) &#123;</span><br><span class="line">      children.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: node.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">val</span>: node.<span class="property">val</span>,</span><br><span class="line">        <span class="attr">children</span>: <span class="title function_">toTree</span>(node.<span class="property">id</span>, array)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> children;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">arrayToTree</span>(input));</span><br></pre></td></tr></table></figure><hr><h4 id="7-4-æ•°ç»„å»é‡"><a href="#7-4-æ•°ç»„å»é‡" class="headerlink" title="7.4 æ•°ç»„å»é‡"></a>7.4 æ•°ç»„å»é‡</h4><ul><li><p>å°†<code>[1,1,2,2,3,3,4,4,5,5]</code>å»é‡, ç»“æœåº”è¯¥æ˜¯<code>[1,2,3,4,5]</code></p></li><li><p>æ–¹æ³•ä¸€: <code>ES6</code>çš„<code>Set</code>å»é‡</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> setData = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(setData);</span><br></pre></td></tr></table></figure><blockquote><p><code>Set</code>å»é‡æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œæ— æ³•å»é‡å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚æ¯”å¦‚å¯¹è±¡æ•°ç»„<code>[&#123;a:1&#125;, &#123;a:1&#125;]</code></p></blockquote><ul><li>æ–¹æ³•äºŒ: åŒé‡<code>for</code>å¾ªç¯å»é‡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleRemoveRepeat</span> = (<span class="params">arr</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] === arr[j]) &#123;</span><br><span class="line">        arr.<span class="title function_">splice</span>(j, <span class="number">1</span>);</span><br><span class="line">        j--;</span><br><span class="line">        len--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨<code>len = arr.length</code>çš„åŸå› : å‡è®¾è¿™ä¸ªå¾ªç¯éœ€è¦å¾ªç¯<code>10000</code>æ¬¡ï¼Œ<code>length</code>å°±ä¼šè¢«æ‰§è¡Œ<code>10000</code>æ¬¡</p></blockquote><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>æ–‡ä»¶è¿˜æœªä¸Šä¼  Github</p></blockquote></article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3458e8f8.html" title="ç®—æ³•ç¬”è®°"><img class="cover" src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/od2iyorqbvbnha2g2vybpn8v4tiq4qw.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ç®—æ³•ç¬”è®°</div></div></a></div><div class="next-post pull-right"><a href="/posts/fbe58254.html" title="ES6å­¦ä¹ ç¬”è®° â€¢ ä¸Š"><img class="cover" src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/8shhfm8bsq648izivnrc32jq9e0d62e.jpg" onerror='onerror=null,src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ES6å­¦ä¹ ç¬”è®° â€¢ ä¸Š</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/å¾·ç‹—å­.GIF" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="avatar"></div><div class="author-info__name">é´»é”</div><div class="author-info__description">è®°å½• æˆ‘çš„ ç”Ÿæ´»</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Hongda-OSU" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.linkedin.com/in/hongda-lin" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://hongdalin.me" target="_blank" title="Portfolio"><i class="iconfont icon-guanfangwangzhan"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ–‡ç« å³ä¸‹è§’å°å·¥å…·è¿›å…¥é˜…è¯»æ¨¡å¼</div></div><div class="xpand" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople1.js"></script><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/zdog.dist.js"></script><script id="rendered-js" src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople.js"></script><style>.card-widget.card-announcement{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-CSS-%E9%A2%98%E7%9B%AE"><span class="toc-text">1. CSS é¢˜ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E7%94%BB%E7%AD%89%E8%85%B0%E7%9B%B4%E8%A7%92%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-text">1.1 ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E4%B8%8D%E5%AE%9A%E5%AE%BD%E9%AB%98%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD"><span class="toc-text">1.2 ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%AD%90%E5%85%83%E7%B4%A0"><span class="toc-text">1.3 æ­£æ–¹å½¢å­å…ƒç´ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-position-%E5%AE%9A%E4%BD%8D"><span class="toc-text">1.4 position å®šä½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E7%9B%92%E6%A8%A1%E5%9E%8B"><span class="toc-text">1.5 ç›’æ¨¡å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-CSS-%E5%AE%9E%E7%8E%B0%E6%89%87%E5%BD%A2"><span class="toc-text">1.6 CSS å®ç°æ‰‡å½¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-BFC"><span class="toc-text">1.7 BFC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JS-%E9%A2%98%E7%9B%AE"><span class="toc-text">2. JS é¢˜ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-var-%E4%B8%8E%E5%BE%AA%E7%8E%AF"><span class="toc-text">2.1 var ä¸å¾ªç¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%89%8B%E5%86%99%E5%80%92%E8%AE%A1%E6%97%B6"><span class="toc-text">2.2 æ‰‹å†™å€’è®¡æ—¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81"><span class="toc-text">2.3 é˜²æŠ–å’ŒèŠ‚æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-undefined-%E4%B8%8E-null-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.4 undefined ä¸ null çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-text">2.5 æµ…æ‹·è´å’Œæ·±æ‹·è´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="toc-text">2.6 å‡½æ•°æŸ¯é‡ŒåŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96"><span class="toc-text">2.7 æ•°ç»„æ‰å¹³åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-typeof-%E5%88%A4%E6%96%AD"><span class="toc-text">2.8 typeof åˆ¤æ–­</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98%E4%BC%98%E5%8C%96"><span class="toc-text">2.9 äº‹ä»¶å§”æ‰˜ä¼˜åŒ–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-text">3. ç½‘ç»œå®‰å…¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB-XSS"><span class="toc-text">3.1 è·¨ç«™è„šæœ¬æ”»å‡» XSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-CSRF"><span class="toc-text">3.2 è·¨ç«™è¯·æ±‚ä¼ªé€  CSRF</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE"><span class="toc-text">4. ç½‘ç»œåè®®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E7%BD%91%E7%BB%9C%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E4%B8%8E%E5%9B%9B%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8C%BA%E5%88%AB"><span class="toc-text">4.1 ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-http-%E5%92%8C-https-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">4.2 http å’Œ https åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-http-%E5%92%8C-https-%E5%8C%BA%E5%88%AB"><span class="toc-text">4.3 http å’Œ https åŒºåˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-http1-x-%E5%92%8C-http2-x-%E5%8C%BA%E5%88%AB"><span class="toc-text">4.4 http1.x å’Œ http2.x åŒºåˆ«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-http-%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-text">4.5 http è¯·æ±‚æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-TCP-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-text">4.6 TCP ä¸‰æ¬¡æ¡æ‰‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-React-%E9%A2%98%E7%9B%AE"><span class="toc-text">5. React é¢˜ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%BC%93%E5%AD%98"><span class="toc-text">6. ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E5%BC%BA%E7%BC%93%E5%AD%98%E4%B8%8E%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98"><span class="toc-text">6.1 å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E7%AE%97%E6%B3%95"><span class="toc-text">7. ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-LRU-Cache"><span class="toc-text">7.1 LRU Cache</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%95%B0%E5%AD%97"><span class="toc-text">7.2 æ ¼å¼åŒ–æ•°å­—</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E6%89%8B%E5%86%99%E6%95%B0%E7%BB%84%E8%BD%AC%E6%A0%91"><span class="toc-text">7.3 æ‰‹å†™æ•°ç»„è½¬æ ‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-text">7.4 æ•°ç»„å»é‡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text">é™„å½•</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/7c522c36.html" title="åˆ‡å›¾ä»” 2"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgbmcrg53uzso0a5lk4rcm76njiw0mw0m.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="åˆ‡å›¾ä»” 2"></a><div class="content"><a class="title" href="/posts/7c522c36.html" title="åˆ‡å›¾ä»” 2">åˆ‡å›¾ä»” 2</a><time datetime="2024-12-23T18:03:05.000Z" title="å‘è¡¨äº 2024-12-23 12:03:05">2024-12-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d58818f0.html" title="WebGL å­¦ä¹ ç¬”è®°"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgdip29s0ui3xcpinvtb8pelnc00xb05s.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="WebGL å­¦ä¹ ç¬”è®°"></a><div class="content"><a class="title" href="/posts/d58818f0.html" title="WebGL å­¦ä¹ ç¬”è®°">WebGL å­¦ä¹ ç¬”è®°</a><time datetime="2024-12-08T16:15:05.000Z" title="å‘è¡¨äº 2024-12-08 10:15:05">2024-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/558bc4fb.html" title="GO å­¦ä¹ ç¬”è®°"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgbqwt4ir73bffcbd68bcq4c0turzstua.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="GO å­¦ä¹ ç¬”è®°"></a><div class="content"><a class="title" href="/posts/558bc4fb.html" title="GO å­¦ä¹ ç¬”è®°">GO å­¦ä¹ ç¬”è®°</a><time datetime="2024-11-23T16:15:05.000Z" title="å‘è¡¨äº 2024-11-23 10:15:05">2024-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/13fe9182.html" title="åŸå‹é“¾è§£æ"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgl5zrba8rs677k0siqvc37eh5l0hdzqu.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="åŸå‹é“¾è§£æ"></a><div class="content"><a class="title" href="/posts/13fe9182.html" title="åŸå‹é“¾è§£æ">åŸå‹é“¾è§£æ</a><time datetime="2024-11-14T16:15:05.000Z" title="å‘è¡¨äº 2024-11-14 10:15:05">2024-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29dadae9.html" title="PostgreSQL å­¦ä¹ ç¬”è®°"><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgied0v0dgsgyqeoh7804b0ca54buj0qd.jpg" onerror='this.onerror=null,this.src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/404.GIF"' alt="PostgreSQL å­¦ä¹ ç¬”è®°"></a><div class="content"><a class="title" href="/posts/29dadae9.html" title="PostgreSQL å­¦ä¹ ç¬”è®°">PostgreSQL å­¦ä¹ ç¬”è®°</a><time datetime="2024-08-02T15:15:06.000Z" title="å‘è¡¨äº 2024-08-02 10:15:06">2024-08-02</time></div></div></div></div></div></div></main><footer id="footer" style="background:rgba(0,0,0,.25)"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 &nbsp;<i id="heartbeat" class="fa fas fa-heartbeat"></i> &nbsp;é´»é”</div><div class="footer_custom_text"><p class="badge"><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-informational?style=flat&logo=hexo"></a><a style="margin-inline:5px" target="_blank" href="https://domains.google/"><img src="https://img.shields.io/badge/Hosted-Google-ff69b4?style=flat&logo=googledomains"></a><a style="margin-inline:5px" target="_blank" href="https://gulpjs.com/"><img src="https://img.shields.io/badge/Compress-gulp-critical?style=flat&logo=gulp"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-black?style=flat&logo=GitHub"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris"></a></p></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="/js/util.js"></script><script defer src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script disable-devtool-auto src="https://cdn.jsdelivr.net/npm/disable-devtool"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>