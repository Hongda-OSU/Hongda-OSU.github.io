"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var n,o,r,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return o=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){o=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw r}}};if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _regeneratorRuntime(){_regeneratorRuntime=function(){return a};var a={},t=Object.prototype,s=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var r,i,a,c,e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),o=new b(o||[]);return l(e,"_invoke",{value:(r=t,i=n,a=o,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return I()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var o=n.method,r=e.iterator[o];if(void 0===r)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),f;o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}(n,a);if(n){if(n===f)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c="executing";n=u(r,i,a);if("normal"===n.type){if(c=a.done?"completed":"suspendedYield",n.arg===f)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c="completed",a.method="throw",a.arg=n.arg)}})}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var f={};function d(){}function h(){}function m(){}var e={},p=(i(e,o,function(){return this}),Object.getPrototypeOf),p=p&&p(p(x([]))),v=(p&&p!==t&&s.call(p,o)&&(e=p),m.prototype=d.prototype=Object.create(e));function y(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function g(a,c){var e;l(this,"_invoke",{value:function(n,o){function t(){return new c(function(t,e){!function e(t,n,o,r){var i,t=u(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==_typeof(n)&&s.call(n,"__await")?c.resolve(n.__await).then(function(t){e("next",t,o,r)},function(t){e("throw",t,o,r)}):c.resolve(n).then(function(t){i.value=t,o(i)},function(t){return e("throw",t,o,r)});r(t.arg)}(n,o,t,e)})}return e=e?e.then(t,t):t()}})}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function b(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(e){if(e){var n,t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t}).next=t}return{next:I}}function I(){return{value:void 0,done:!0}}return l(v,"constructor",{value:h.prototype=m,configurable:!0}),l(m,"constructor",{value:h,configurable:!0}),h.displayName=i(m,r,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,i(t,r,"GeneratorFunction")),t.prototype=Object.create(v),t},a.awrap=function(t){return{__await:t}},y(g.prototype),i(g.prototype,n,function(){return this}),a.AsyncIterator=g,a.async=function(t,e,n,o,r){void 0===r&&(r=Promise);var i=new g(c(t,e,n,o),r);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},y(v),i(v,r,"Generator"),i(v,o,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),o=[];for(e in n)o.push(e);return o.reverse(),function t(){for(;o.length;){var e=o.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=x,b.prototype={constructor:b,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function t(t,e){return i.type="throw",i.arg=n,o.next=t,e&&(o.method="next",o.arg=void 0),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e],i=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&s.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}var i=(r=r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc?null:r)?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,o,r=this.tryEntries[e];if(r.tryLoc===t)return"throw"===(n=r.completion).type&&(o=n.arg,L(r)),o}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},a}function asyncGeneratorStep(t,e,n,o,r,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var o=c.apply(t,a);function r(t){asyncGeneratorStep(o,e,n,r,i,"next",t)}function i(t){asyncGeneratorStep(o,e,n,r,i,"throw",t)}r(void 0)})}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(){function f(t){return Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:t}var r;function d(t,e,n){var o;!t||sessionStorage.getItem("waifu-text")&&sessionStorage.getItem("waifu-text")>n||(r&&(clearTimeout(r),r=null),t=f(t),sessionStorage.setItem("waifu-text",n),(o=document.getElementById("waifu-tips")).innerHTML=t,o.classList.add("waifu-tips-active"),r=setTimeout(function(){sessionStorage.removeItem("waifu-text"),o.classList.remove("waifu-tips-active")},e))}var h=function(){function o(t){_classCallCheck(this,o);var e=t.apiPath,t=t.cdnPath,n=!1;if("string"==typeof t)n=!0,t.endsWith("/")||(t+="/");else{if("string"!=typeof e)throw"Invalid initWidget argument!";e.endsWith("/")||(e+="/")}this.useCDN=n,this.apiPath=e,this.cdnPath=t}var t,e,r,n;return _createClass(o,[{key:"loadModelList",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.cdnPath,"model_list.json"));case 2:return e=t.sent,t.next=5,e.json();case 5:this.modelList=t.sent;case 6:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"loadModel",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function t(e,n,o){var r;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.setItem("modelId",e),localStorage.setItem("modelTexturesId",n),d(o,4e3,10),!this.useCDN){t.next=9;break}if(t.t0=this.modelList,t.t0){t.next=5;break}return t.next=5,this.loadModelList();case 5:r=f(this.modelList.models[e]),loadlive2d("live2d","".concat(this.cdnPath,"model/").concat(r,"/index.json")),t.next=10;break;case 9:loadlive2d("live2d","".concat(this.apiPath,"get/?id=").concat(e,"-").concat(n)),console.log("Live2D 模型 ".concat(e,"-").concat(n," 加载完成"));case 10:case"end":return t.stop()}},t,this)})),function(t,e,n){return r.apply(this,arguments)})},{key:"loadRandModel",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,o,r=this;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("modelId"),n=localStorage.getItem("modelTexturesId"),!this.useCDN){t.next=10;break}if(t.t0=this.modelList,t.t0){t.next=6;break}return t.next=6,this.loadModelList();case 6:o=f(this.modelList.models[e]),loadlive2d("live2d","".concat(this.cdnPath,"model/").concat(o,"/index.json")),d("我的新衣服好看嘛？",4e3,10),t.next=11;break;case 10:fetch("".concat(this.apiPath,"rand_textures/?id=").concat(e,"-").concat(n)).then(function(t){return t.json()}).then(function(t){1!==t.textures.id||1!==n&&0!==n?r.loadModel(e,t.textures.id,"我的新衣服好看嘛？"):d("我还没有其他衣服呢！",4e3,10)});case 11:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"loadOtherModel",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,n,o=this;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("modelId"),!this.useCDN){t.next=10;break}if(t.t0=this.modelList,t.t0){t.next=6;break}return t.next=6,this.loadModelList();case 6:n=++e>=this.modelList.models.length?0:e,this.loadModel(n,0,this.modelList.messages[n]),t.next=11;break;case 10:fetch("".concat(this.apiPath,"switch/?id=").concat(e)).then(function(t){return t.json()}).then(function(t){o.loadModel(t.model.id,0,t.model.message)});case 11:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]),o}(),m={hitokoto:{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>',callback:function(){fetch("https://v1.hitokoto.cn").then(function(t){return t.json()}).then(function(t){var e="这句一言来自 <span>「".concat(t.from,"」</span>，是 <span>").concat(t.creator,"</span> 在 hitokoto.cn 投稿的。");d(t.hitokoto,6e3,9),setTimeout(function(){d(e,4e3,9)},6e3)})}},asteroids:{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>',callback:function(){var t;window.Asteroids?(window.ASTEROIDSPLAYERS||(window.ASTEROIDSPLAYERS=[]),window.ASTEROIDSPLAYERS.push(new Asteroids)):((t=document.createElement("script")).src="https://fastly.jsdelivr.net/gh/stevenjoezhang/asteroids/asteroids.js",document.head.appendChild(t))}},"switch-model":{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"/></svg>',callback:function(){}},"switch-texture":{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M320 64A64 64 0 1 0 192 64a64 64 0 1 0 128 0zm-96 96c-35.3 0-64 28.7-64 64v48c0 17.7 14.3 32 32 32h1.8l11.1 99.5c1.8 16.2 15.5 28.5 31.8 28.5h38.7c16.3 0 30-12.3 31.8-28.5L318.2 304H320c17.7 0 32-14.3 32-32V224c0-35.3-28.7-64-64-64H224zM132.3 394.2c13-2.4 21.7-14.9 19.3-27.9s-14.9-21.7-27.9-19.3c-32.4 5.9-60.9 14.2-82 24.8c-10.5 5.3-20.3 11.7-27.8 19.6C6.4 399.5 0 410.5 0 424c0 21.4 15.5 36.1 29.1 45c14.7 9.6 34.3 17.3 56.4 23.4C130.2 504.7 190.4 512 256 512s125.8-7.3 170.4-19.6c22.1-6.1 41.8-13.8 56.4-23.4c13.7-8.9 29.1-23.6 29.1-45c0-13.5-6.4-24.5-14-32.6c-7.5-7.9-17.3-14.3-27.8-19.6c-21-10.6-49.5-18.9-82-24.8c-13-2.4-25.5 6.3-27.9 19.3s6.3 25.5 19.3 27.9c30.2 5.5 53.7 12.8 69 20.5c3.2 1.6 5.8 3.1 7.9 4.5c3.6 2.4 3.6 7.2 0 9.6c-8.8 5.7-23.1 11.8-43 17.3C374.3 457 318.5 464 256 464s-118.3-7-157.7-17.9c-19.9-5.5-34.2-11.6-43-17.3c-3.6-2.4-3.6-7.2 0-9.6c2.1-1.4 4.8-2.9 7.9-4.5c15.3-7.7 38.8-14.9 69-20.5z"/></svg>',callback:function(){}},photo:{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M220.6 121.2L271.1 96 448 96v96H333.2c-21.9-15.1-48.5-24-77.2-24s-55.2 8.9-77.2 24H64V128H192c9.9 0 19.7-2.3 28.6-6.8zM0 128V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H271.1c-9.9 0-19.7 2.3-28.6 6.8L192 64H160V48c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16l0 16C28.7 64 0 92.7 0 128zM168 304a88 88 0 1 1 176 0 88 88 0 1 1 -176 0z"/></svg>',callback:function(){d("照好了嘛，是不是很可爱呢？",6e3,9),Live2D.captureName="photo.png",Live2D.captureFrame=!0}},info:{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',callback:function(){open("https://github.com/stevenjoezhang/live2d-widget")}},quit:{icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>',callback:function(){localStorage.setItem("waifu-display",Date.now()),d("愿你有一天能与重要的人重逢。",2e3,11),document.getElementById("waifu").style.bottom="-500px",setTimeout(function(){document.getElementById("waifu").style.display="none",document.getElementById("waifu-toggle").classList.add("waifu-toggle-active")},3e3)}}};function o(t){var e,n,o=new h(t);function r(a){function t(){}var e,c,n=!1,r=a.message.default;window.addEventListener("mousemove",function(){return n=!0}),window.addEventListener("keydown",function(){return n=!0}),setInterval(function(){e=n?(n=!1,clearInterval(e),null):e||setInterval(function(){d(r,6e3,9)},2e4)},1e3),d(function(t){if("/"===location.pathname){var e,n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var o=e.value,r=o.hour,i=o.text,a=new Date,c=r.split("-")[0],s=r.split("-")[1]||c;if(c<=a.getHours()&&a.getHours()<=s)return i}}catch(t){n.e(t)}finally{n.f()}}var l,u,f,t="欢迎阅读<span>「".concat(document.title.split(" - ")[0],"」</span>");return""===document.referrer||(u=(l=new URL(document.referrer)).hostname.split(".")[1],f={baidu:"百度",so:"360搜索",google:"谷歌搜索"},location.hostname===l.hostname)?t:(f=u in f?f[u]:l.hostname,"Hello！来自 <span>".concat(f,"</span> 的朋友<br>").concat(t))}(a.time),7e3,11),window.addEventListener("mouseover",function(t){var e,n=_createForOfIteratorHelper(a.mouseover);try{for(n.s();!(e=n.n()).done;){var o=e.value,r=o.selector,i=o.text;if(t.target.closest(r))return c===r?void 0:(c=r,void d(i=(i=f(i)).replace("{text}",t.target.innerText),4e3,8))}}catch(t){n.e(t)}finally{n.f()}}),window.addEventListener("click",function(t){var e,n=_createForOfIteratorHelper(a.click);try{for(n.s();!(e=n.n()).done;){var o=e.value,r=o.selector,i=o.text;if(t.target.closest(r))return void d(i=(i=f(i)).replace("{text}",t.target.innerText),4e3,8)}}catch(t){n.e(t)}finally{n.f()}}),a.seasons.forEach(function(t){var e=t.date,t=t.text,n=new Date,o=e.split("-")[0],e=e.split("-")[1]||o;o.split("/")[0]<=n.getMonth()+1&&n.getMonth()+1<=e.split("/")[0]&&o.split("/")[1]<=n.getDate()&&n.getDate()<=e.split("/")[1]&&(t=(t=f(t)).replace("{year}",n.getFullYear()),r.push(t))});console.log("%c",t),t.toString=function(){d(a.message.console,6e3,9)},window.addEventListener("copy",function(){d(a.message.copy,6e3,9)}),window.addEventListener("visibilitychange",function(){document.hidden||d(a.message.visibilitychange,6e3,9)})}localStorage.removeItem("waifu-display"),sessionStorage.removeItem("waifu-text"),document.body.insertAdjacentHTML("beforeend",'<div id="waifu">\n            <div id="waifu-tips"></div>\n            <canvas id="live2d" width="800" height="800"></canvas>\n            <div id="waifu-tool"></div>\n        </div>'),setTimeout(function(){document.getElementById("waifu").style.bottom=0},0),m["switch-model"].callback=function(){return o.loadOtherModel()},m["switch-texture"].callback=function(){return o.loadRandModel()},Array.isArray(t.tools)||(t.tools=Object.keys(m));var i,a=_createForOfIteratorHelper(t.tools);try{for(a.s();!(i=a.n()).done;){var c,s,l,u=i.value;m[u]&&(s=(c=m[u]).icon,l=c.callback,document.getElementById("waifu-tool").insertAdjacentHTML("beforeend",'<span id="waifu-tool-'.concat(u,'">').concat(s,"</span>")),document.getElementById("waifu-tool-".concat(u)).addEventListener("click",l))}}catch(t){a.e(t)}finally{a.f()}e=localStorage.getItem("modelId"),n=localStorage.getItem("modelTexturesId"),null===e&&(e=1,n=53),o.loadModel(e,n),fetch(t.waifuPath).then(function(t){return t.json()}).then(r)}window.initWidget=function(t,e){"string"==typeof t&&(t={waifuPath:t,apiPath:e}),document.body.insertAdjacentHTML("beforeend",'<div id="waifu-toggle">\n            <span>看板娘</span>\n        </div>');var n=document.getElementById("waifu-toggle");n.addEventListener("click",function(){n.classList.remove("waifu-toggle-active"),n.getAttribute("first-time")?(o(t),n.removeAttribute("first-time")):(localStorage.removeItem("waifu-display"),document.getElementById("waifu").style.display="",setTimeout(function(){document.getElementById("waifu").style.bottom=0},0))}),localStorage.getItem("waifu-display")&&Date.now()-localStorage.getItem("waifu-display")<=864e5?(n.setAttribute("first-time",!0),setTimeout(function(){n.classList.add("waifu-toggle-active")},0)):o(t)}}();