<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Liquibase 101</title>
      <link href="/posts/c888933a.html"/>
      <url>/posts/c888933a.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>AWS MLA-C01</title>
      <link href="/posts/50096d59.html"/>
      <url>/posts/50096d59.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS &amp; Python å°æŠ€å·§</title>
      <link href="/posts/998b6089.html"/>
      <url>/posts/998b6089.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GCP å®æ“ç»ƒä¹ </title>
      <link href="/posts/3f28c94.html"/>
      <url>/posts/3f28c94.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Security 101</title>
      <link href="/posts/e7e09e2.html"/>
      <url>/posts/e7e09e2.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>System Design 101</title>
      <link href="/posts/733301f0.html"/>
      <url>/posts/733301f0.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> System Design </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ç®—æ³•é›†åˆ</title>
      <link href="/posts/5470c8ce.html"/>
      <url>/posts/5470c8ce.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="15e82533bcb1293ce756ee9fbcc59de43332ea84af97385de66d9d2187f15914">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3392aea18f5ba83a6ce29c7e1144d90c760cb672ac36819a3e414f16924b3610a129f4732b5b01d6a33086e7ec72383eec2d6c734fee1bd49b773e9dadb57d7103ffc8c872c93bfddda3671e1478d25af326387f2008078db54c42a5501acd5a88b40d06637002c29490e6eca76633cc7d9b1a85d00f9656c8af1ca351c236f451caeb05ff7c8f920c7e6c94d7ac82f57f55764ee39687bd81232ce46b396a6841b9dada990a9709e8d90afcb07cc5a1e3493665540714003cad9c3f0e28a22a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Google Cloud Associate Cloud Engineer</title>
      <link href="/posts/3fb7a84c.html"/>
      <url>/posts/3fb7a84c.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://cloud.google.com/learn/certification/cloud-engineer/">https://cloud.google.com/learn/certification/cloud-engineer/</a></p></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Terraform Associate 003</title>
      <link href="/posts/bb3fbb6d.html"/>
      <url>/posts/bb3fbb6d.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/imgrj2v0kxiwnf99hfja1ood1dwupdaex6.png"></p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://developer.hashicorp.com/terraform">https://developer.hashicorp.com/terraform</a><br>Terraform Registry: <a href="https://registry.terraform.io/namespaces/hashicorp">https://registry.terraform.io/namespaces/hashicorp</a></p></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h4 id="What-is-Terraform"><a href="#What-is-Terraform" class="headerlink" title="What is Terraform"></a>What is Terraform</h4><ul><li><p>Terraform æ˜¯ä¸€ä¸ªå¼€æºçš„â€œåŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰â€å·¥å…·ï¼Œç”± HashiCorp å¼€å‘ã€‚å®ƒå…è®¸ä½ ä½¿ç”¨ä¸€ç§å£°æ˜å¼è¯­è¨€ï¼ˆHCLï¼ŒHashiCorp Configuration Languageï¼‰æ¥å®šä¹‰å’Œç®¡ç†äº‘èµ„æºï¼Œæ¯”å¦‚æœåŠ¡å™¨ã€æ•°æ®åº“ã€ç½‘ç»œã€é˜²ç«å¢™ç­‰</p><ul><li>Terraform å¯ä»¥ç®¡ç†å¤šä¸ªäº‘å¹³å°ä¸Šçš„åŸºç¡€è®¾æ–½</li><li>åŸºç¡€è®¾æ–½åƒå†™ä»£ç ä¸€æ ·ç®¡ç†</li><li>Terraform çš„çŠ¶æ€å…è®¸æ‚¨åœ¨æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ä¸­è·Ÿè¸ªèµ„æºå˜åŒ–</li><li>ä»£ç å®¡è®¡ + ç‰ˆæœ¬æ§åˆ¶ï¼ˆé…åˆ Gitï¼‰</li></ul></li><li><p>ä¸ºä»€ä¹ˆä½¿ç”¨ Terraform</p><ul><li>ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼æ‰‹åŠ¨ç‚¹ç‚¹ç‚¹ âœ æ˜“å‡ºé”™ã€ä¸å¯é‡å¤</li></ul></li><li><p>ä¸€äº› Terraform çš„ Alternatives</p><ul><li>AWS CloudFormation, Azure Resource Manager, GCP Deployment Manager, Pulumi</li></ul></li></ul><hr><h4 id="What-is-Infrastructure-as-Code"><a href="#What-is-Infrastructure-as-Code" class="headerlink" title="What is Infrastructure as Code"></a>What is Infrastructure as Code</h4><ul><li><p><a href="https://www.hashicorp.com/en/blog/infrastructure-as-code-in-a-private-or-public-cloud">Infrastructure as Code</a> æ˜¯ä¸€ç§ç”¨ä»£ç ç®¡ç†å’Œéƒ¨ç½²åŸºç¡€è®¾æ–½ï¼ˆå¦‚æœåŠ¡å™¨ã€ç½‘ç»œã€æ•°æ®åº“ç­‰ï¼‰çš„æ–¹å¼ã€‚å®ƒå°±åƒ DevOps çš„â€œå»ºç­‘å›¾çº¸â€ï¼Œè®©ä½ ç”¨è„šæœ¬æ¥åˆ›å»ºå’Œç®¡ç† IT ç¯å¢ƒï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ç‚¹å‡»ç•Œé¢æ“ä½œã€‚</p></li><li><p>IaC çš„æ ¸å¿ƒä»·å€¼</p><ul><li>åä½œå¹³å°: ä½œä¸ºå›¢é˜Ÿåä½œçš„ä¸­å¿ƒï¼Œè®©å¼€å‘ã€è¿ç»´ç­‰å¤šè§’è‰²å…±åŒæ„å»ºå’Œç®¡ç†åŸºç¡€è®¾æ–½</li><li>å¿«é€Ÿæ‰©å±•: ç”¨ä»£ç å¿«é€Ÿå¤åˆ¶å’Œæ‰©å®¹èµ„æºï¼Œå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²</li><li>æ ‡å‡†åŒ–éƒ¨ç½²: æ‰€æœ‰ç¯å¢ƒéƒ½ç”¨ç›¸åŒæ¨¡æ¿ï¼Œå‡å°‘äººä¸ºé”™è¯¯ã€æé«˜ä¸€è‡´æ€§</li></ul></li></ul><blockquote><p>å‡è®¾ä½ éœ€è¦åœ¨ AWS ä¸Šå»ºä¸€ä¸ª S3 æ¡¶ï¼Œä¼ ç»Ÿåšæ³•æ˜¯ç™»å½•æ§åˆ¶å°ç‚¹ç‚¹ç‚¹<br>è€Œç”¨ Terraformï¼Œä½ å¯ä»¥å†™ä¸€ä¸ªæ–‡ä»¶</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">resource &quot;aws_s3_bucket&quot; &quot;my_bucket&quot; &#123;</span><br><span class="line">  bucket = &quot;hongda-demo-bucket&quot;</span><br><span class="line">  acl    = &quot;private&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="Benefits-of-IaC"><a href="#Benefits-of-IaC" class="headerlink" title="Benefits of IaC"></a>Benefits of IaC</h4>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Terraform </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS SAP-C02</title>
      <link href="/posts/da74417d.html"/>
      <url>/posts/da74417d.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://aws.amazon.com/certification/certified-solutions-architect-professional/?ch=sec&sec=rmg&d=1">https://aws.amazon.com/certification/certified-solutions-architect-professional/?ch=sec&amp;sec=rmg&amp;d=1</a><br>é¢˜åº“: <a href="https://www.examtopics.com/exams/amazon/aws-certified-solutions-architect-professional-sap-c02/">https://www.examtopics.com/exams/amazon/aws-certified-solutions-architect-professional-sap-c02/</a></p></blockquote><hr><h3 id="1-Identity-amp-Federation"><a href="#1-Identity-amp-Federation" class="headerlink" title="1. Identity &amp; Federation"></a>1. Identity &amp; Federation</h3><h4 id="IAM"><a href="#IAM" class="headerlink" title="IAM"></a>IAM</h4><div style="text-align: center; padding: 0.5rem">ğŸ” IAM èº«ä»½ç±»å‹ä¸€è§ˆ</div><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>Users</td><td>é•¿æœŸå‡­è¯ç”¨æˆ·ï¼ˆç”¨æˆ·å+å¯†ç  &#x2F; access keyï¼‰</td></tr><tr><td>Groups</td><td>ç”¨æˆ·é›†åˆï¼Œç”¨äºç»Ÿä¸€æˆæƒ</td></tr><tr><td>Roles</td><td>ä½¿ç”¨ STS ç­¾å‘çš„ä¸´æ—¶å‡­è¯ï¼ˆè·¨è´¦æˆ·ã€æœåŠ¡è®¿é—®ã€EC2 ç­‰ï¼‰</td></tr><tr><td>EC2 Instance Roles</td><td>é€šè¿‡ Instance Metadata Service è·å–ä¸´æ—¶å‡­è¯ï¼ˆæ¯ä¸ª EC2 ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªè§’è‰²ï¼‰</td></tr><tr><td>Service Roles</td><td>ç”¨äº AWS æœåŠ¡è®¿é—®å¦ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚ API Gatewayã€CodeDeploy ç­‰</td></tr><tr><td>Cross Account Roles</td><td>è·¨è´¦æˆ·è®¿é—®æƒé™ï¼Œä½¿ç”¨ AssumeRole å®ç°</td></tr></tbody></table><div style="text-align: center; padding: 0.5rem">ğŸ“ IAM ç­–ç•¥ç±»å‹</div><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>AWS Managed Policy</td><td>AWS é¢„å®šä¹‰çš„ç­–ç•¥ï¼Œå¦‚ <code>AdministratorAccess</code></td></tr><tr><td>Customer Managed</td><td>ä½ åˆ›å»ºå’Œç»´æŠ¤çš„å¯å¤ç”¨ç­–ç•¥</td></tr><tr><td>Inline Policy</td><td>ç›´æ¥åµŒå…¥åˆ°ç”¨æˆ· &#x2F; ç»„ &#x2F; è§’è‰²ä¸Šçš„ç­–ç•¥ï¼Œä½œç”¨åŸŸé™äºè¯¥å®ä½“</td></tr><tr><td>Resource-based Policy</td><td>åº”ç”¨äºèµ„æºä¸Šçš„ç­–ç•¥ï¼Œå¦‚ S3 Bucketã€SQS Queue ç­‰</td></tr></tbody></table><div style="text-align: center; padding: 0.5rem">ğŸ” IAM å·¥å…·ä¸å¯è§†åŒ–</div><table><thead><tr><th>å·¥å…·åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Access Advisor</td><td>æŸ¥çœ‹è§’è‰²æˆ–ç”¨æˆ·çš„æƒé™å®é™…ä½¿ç”¨æƒ…å†µï¼ˆæ”¯æŒæœ€è¿‘è®¿é—®æ—¶é—´ï¼‰</td></tr><tr><td>Access Analyzer</td><td>æ£€æŸ¥èµ„æºæ˜¯å¦è¢«å¤–éƒ¨å®ä½“å…±äº«ï¼ˆä¾‹å¦‚ S3 Bucket å…¬å¼€ã€KMS Key å…±äº«ï¼‰</td></tr><tr><td>Policy Simulator</td><td>æ¨¡æ‹Ÿç­–ç•¥æ•ˆæœï¼ŒéªŒè¯ç­–ç•¥æ˜¯å¦æŒ‰é¢„æœŸç”Ÿæ•ˆ</td></tr></tbody></table><hr><h4 id="IAM-Policy"><a href="#IAM-Policy" class="headerlink" title="IAM Policy"></a>IAM Policy</h4><ul><li>IAM ç­–ç•¥æ˜¯ä¸€ä¸ª JSON æ–‡æ¡£ï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹å­—æ®µ</li></ul><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>&quot;Effect&quot;</code></td><td>ç­–ç•¥æ•ˆæœï¼Œå¯ä¸º <code>&quot;Allow&quot;</code> æˆ– <code>&quot;Deny&quot;</code></td></tr><tr><td><code>&quot;Action&quot;</code></td><td>å…è®¸çš„æ“ä½œï¼Œä¾‹å¦‚ <code>&quot;s3:GetObject&quot;</code></td></tr><tr><td><code>&quot;NotAction&quot;</code></td><td>æ˜ç¡®æ’é™¤çš„æ“ä½œï¼ˆé€šå¸¸ä¸ <code>&quot;Effect&quot;: &quot;Allow&quot;</code> æ­é…ä½¿ç”¨ï¼‰</td></tr><tr><td><code>&quot;Resource&quot;</code></td><td>ä½œç”¨çš„èµ„æº ARNï¼Œä¾‹å¦‚ <code>&quot;arn:aws:s3:::my-bucket/*&quot;</code></td></tr><tr><td><code>&quot;Condition&quot;</code></td><td>å¯é€‰å­—æ®µï¼Œç”¨äºæ·»åŠ é™„åŠ é™åˆ¶æ¡ä»¶</td></tr></tbody></table><ul><li><strong>æ˜¾å¼ <code>Deny</code> ä¼˜å…ˆäº <code>Allow</code></strong>  </li><li><strong>æœ€ä½³å®è·µï¼šå§‹ç»ˆéµå¾ªæœ€å°æƒé™åŸåˆ™ï¼ˆLeast Privilegeï¼‰</strong></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img520756.png"></p><hr><h4 id="IAM-Policies-Variables-and-Tags"><a href="#IAM-Policies-Variables-and-Tags" class="headerlink" title="IAM Policies Variables and Tags"></a>IAM Policies Variables and Tags</h4><ul><li><code>$&#123;aws:username&#125;</code>: ä»£è¡¨å½“å‰æ‰§è¡Œè¯·æ±‚çš„ IAM ç”¨æˆ·å</li><li><code>AWS Specific</code>: aws:CurrentTime, aws:TokenIssueTime, aws:principaltypeâ€¦</li><li><code>Service Specific</code>: s3:prefix, s3:max-keys, s3:x-amz-aclâ€¦</li><li><code>Tag Based</code>: iam:ResourceTag&#x2F;key-name, aws:PrincipalTag&#x2F;key-nameâ€¦</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s3:*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:s3:::mybucket/$&#123;aws:username&#125;/*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>å‡è®¾ IAM ç”¨æˆ· alice å‘èµ·äº†è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸ª policy ä¸­çš„å˜é‡å°±ä¼šè‡ªåŠ¨æ›¿æ¢æˆ</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:s3:::mybucket/alice/*&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img042721.png"></p><hr><h4 id="IAM-Roles-vs-Resource-Based-Policies"><a href="#IAM-Roles-vs-Resource-Based-Policies" class="headerlink" title="IAM Roles vs Resource Based Policies"></a>IAM Roles vs Resource Based Policies</h4><ul><li>IAM ä¸­çš„è®¿é—®æ§åˆ¶å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°<ul><li>ä½¿ç”¨è§’è‰²ï¼ˆIAM Roleï¼‰ï¼šé€šè¿‡æ‰®æ¼”è§’è‰²è¿›è¡Œè®¿é—®ï¼ˆä»£ç†èº«ä»½ï¼‰</li><li>ä½¿ç”¨èµ„æºç­–ç•¥ï¼ˆResource-based Policyï¼‰ï¼šç›´æ¥å°†æƒé™é™„åŠ åœ¨èµ„æºä¸Š</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img042719.png"></p><ul><li>IAM Role ç¤ºä¾‹ï¼šA è´¦æˆ·ä¸­çš„ Lambda è¦è®¿é—® B è´¦æˆ·ä¸­çš„ DynamoDBï¼ŒA è´¦æˆ·çš„ Lambda å¿…é¡» Assume B è´¦æˆ·ä¸­çš„è§’è‰²</li><li>Resource-based Policy ç¤ºä¾‹ï¼šB è´¦æˆ·çš„ S3 Bucket Policy ç›´æ¥å…è®¸ A è´¦æˆ·çš„æŸä¸ªè§’è‰²æˆ–æœåŠ¡è®¿é—®è¯¥ Bucket</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img421721.png"></p><div style="text-align: center; padding: 0.5rem">ğŸ†š IAM Role vs Resource-based Policy å¯¹æ¯”æ€»ç»“</div><table><thead><tr><th>ç»´åº¦</th><th>IAM Roleï¼ˆè§’è‰²ï¼‰</th><th>Resource-based Policyï¼ˆèµ„æºç­–ç•¥ï¼‰</th></tr></thead><tbody><tr><td>é™„åŠ ä½ç½®</td><td>é™„åŠ åœ¨èº«ä»½ï¼ˆUserã€Serviceã€Accountï¼‰ä¸Š</td><td>é™„åŠ åœ¨èµ„æºä¸Šï¼ˆå¦‚ S3 Bucketã€SQSã€KMS ç­‰ï¼‰</td></tr><tr><td>ä½¿ç”¨æ–¹å¼</td><td>è®¿é—®æ–¹å…ˆ AssumeRoleï¼Œä¸´æ—¶è·å–æƒé™</td><td>èµ„æºæ¥æ”¶å¤–éƒ¨è¯·æ±‚æ—¶ï¼Œæ ¹æ®ç­–ç•¥åˆ¤æ–­æ˜¯å¦å…è®¸è®¿é—®</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç”¨æˆ· &#x2F; æœåŠ¡è®¿é—®å…¶ä»–è´¦æˆ·èµ„æº</td><td>èµ„æºæˆæƒç»™å¤–éƒ¨è´¦æˆ·ã€æœåŠ¡æˆ–åŒ¿åç”¨æˆ·</td></tr><tr><td>æ”¯æŒè·¨è´¦æˆ·è®¿é—®</td><td>âœ… æ˜¯ï¼Œé€šè¿‡ <code>AssumeRole</code> å®ç°</td><td>âœ… æ˜¯ï¼Œç›´æ¥åœ¨èµ„æºä¸Šå…è®¸å…¶ä»–è´¦æˆ· &#x2F; æœåŠ¡è®¿é—®</td></tr><tr><td>ä¾‹å­</td><td>EC2 å®ä¾‹è§’è‰²ã€Lambda æ‰§è¡Œè§’è‰²ã€è·¨è´¦æˆ·è®¿é—®è§’è‰²</td><td>S3 Bucket Policyã€SQS Queue Policyã€KMS Key Policy</td></tr><tr><td>æˆæƒä¸»ä½“æ§åˆ¶æƒåœ¨å“ªä¸€æ–¹ï¼Ÿ</td><td>è®¿é—®è€…ï¼ˆä¸»åŠ¨æ‰®æ¼”è§’è‰²ï¼‰</td><td>èµ„æºæ‹¥æœ‰è€…ï¼ˆå†³å®šè°å¯è®¿é—®èµ„æºï¼‰</td></tr></tbody></table><hr><h4 id="IAM-Permission-Boundaries"><a href="#IAM-Permission-Boundaries" class="headerlink" title="IAM Permission Boundaries"></a>IAM Permission Boundaries</h4><ul><li>Permission Boundary æ˜¯ä¸€ç§é«˜çº§ IAM æ§åˆ¶æœºåˆ¶ï¼Œç”¨äºä¸º User æˆ– Role è®¾ç½®æƒé™ä¸Šé™ã€‚âš ï¸ ä¸æ”¯æŒç”¨äº Group<ul><li>å‡è®¾ç”¨æˆ· A è¢«æˆäºˆäº† AdministratorAccessï¼ˆå‡ ä¹æ‰€æœ‰æƒé™ï¼‰</li><li>ä½†ä»–çš„ Permission Boundary é™å®šä¸ºåªå…è®¸ï¼šs3:<em>, ec2:</em>, cloudwatch:*</li><li>ç»“æœ, ç”¨æˆ· A æ— æ³•æ‰§è¡Œ iam:CreateUserï¼Œå³ä½¿ä»–çš„ç­–ç•¥ä¸­å†™äº†ä¹Ÿæ— æ•ˆ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img421726.png"></p><ul><li>å§”æ‰˜æƒé™ç»™éç®¡ç†å‘˜: æ¯”å¦‚è®©å¼€å‘è€…è‡ªè¡Œç®¡ç†æƒé™ï¼ˆä½†ä¸èƒ½å‡æƒï¼‰</li><li>å…è®¸è‡ªåŠ©æƒé™ç®¡ç†: ç”¨æˆ·å¯ä»¥ attach policyï¼Œä½†å— boundary é™åˆ¶</li><li>ç²¾ç»†é™åˆ¶ç‰¹å®šç”¨æˆ·æˆ–è§’è‰²: é’ˆå¯¹å…³é”®å²—ä½åšä¸¥æ ¼è¾¹ç•Œæ§åˆ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img421729.png"></p><hr><h4 id="IAM-Access-Analyzer"><a href="#IAM-Access-Analyzer" class="headerlink" title="IAM Access Analyzer"></a>IAM Access Analyzer</h4><ul><li>Access Analyzer æ˜¯ IAM çš„å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºå¸®åŠ©ä½ è¯†åˆ«èµ„æºæ˜¯å¦è¢«æ„å¤–å…±äº«ï¼Œå¹¶æä¾›ç­–ç•¥åˆ†æä¸å»ºè®®åŠŸèƒ½ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img425312.png"></p><ul><li>IAM Access Analyzer Policy Validation<ul><li>Validates your policy against IAM policy grammar and best practices</li><li>è‡ªåŠ¨æ£€æŸ¥ IAM Policy æ˜¯å¦ç¬¦åˆè¯­æ³• + å®‰å…¨æœ€ä½³å®è·µ</li></ul></li><li>IAM Access Analyzer Policy Generation<ul><li>Generates IAM policy based on access activity</li><li>æ ¹æ®å®é™…è®¿é—®è¡Œä¸ºè‡ªåŠ¨ç”Ÿæˆæœ€å°æƒé™ç­–ç•¥ï¼ˆleast privilegeï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img425314.png"></p><hr><h4 id="STS-Security-Token-Service"><a href="#STS-Security-Token-Service" class="headerlink" title="STS (Security Token Service)"></a>STS (Security Token Service)</h4><ul><li><p>ä½¿ç”¨ AWS Security Token Service (STS)ï¼Œä½ å¯ä»¥è®©ä¸€ä¸ªç”¨æˆ·ã€æœåŠ¡æˆ–åº”ç”¨ ä¸´æ—¶æ‰®æ¼”å¦ä¸€ä¸ª IAM Roleï¼Œè·å–ä¸€ç»„çŸ­æœŸå‡­è¯</p></li><li><p>å®šä¹‰ IAM Roleï¼ˆæœ¬è´¦æˆ·æˆ–è·¨è´¦æˆ·ï¼‰</p><ul><li>ä¿¡ä»»ç­–ç•¥ï¼ˆTrust Policyï¼‰ï¼šå®šä¹‰è°å¯ä»¥ assume è¿™ä¸ªè§’è‰²ï¼ˆå“ªäº› Principalï¼‰</li><li>æƒé™ç­–ç•¥ï¼ˆPermissions Policyï¼‰ï¼šå®šä¹‰è¿™ä¸ªè§’è‰² assume åèƒ½åšä»€ä¹ˆæ“ä½œ</li></ul></li><li><p>ç¤ºä¾‹ Trust Policyï¼ˆå…è®¸ IAM ç”¨æˆ· assume è¯¥è§’è‰²ï¼‰</p></li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;AWS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:iam::123456789012:user/developer&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sts:AssumeRole&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ AWS STS è·å–ä¸´æ—¶å‡­è¯ï¼šè°ƒç”¨ AssumeRole APIï¼Œè·å¾—ä¸´æ—¶å‡­è¯</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">aws sts assume-role \</span><br><span class="line">  --role-arn <span class="string">&quot;arn:aws:iam::123456789012:role/MyRole&quot;</span> \</span><br><span class="line">  --role-session-name <span class="string">&quot;example-session&quot;</span></span><br></pre></td></tr></table></figure><ul><li>ä¸´æ—¶å‡­è¯æœ‰æ•ˆæœŸï¼šå¯é…ç½®èŒƒå›´ï¼š15 åˆ†é’Ÿ ~ 12 å°æ—¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img204619.png"></p><table><thead><tr><th>åœºæ™¯</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ”„ è·¨è´¦æˆ·è®¿é—®</td><td>è®©è´¦æˆ· A çš„ç”¨æˆ·è®¿é—®è´¦æˆ· B çš„èµ„æºï¼ˆä½ æ‹¥æœ‰ä¸¤ä¸ªè´¦æˆ·ï¼‰</td></tr><tr><td>ğŸ¤ ç¬¬ä¸‰æ–¹è®¿é—®æˆæƒ</td><td>æˆæƒç¬¬ä¸‰æ–¹ï¼ˆå¦‚ä¾›åº”å•†ï¼‰è´¦æˆ·çš„ IAM ç”¨æˆ·è®¿é—®ä½ è´¦æˆ·ä¸­çš„èµ„æº</td></tr><tr><td>â˜ï¸ AWS æœåŠ¡é—´è®¿é—®</td><td>EC2ã€Lambda ç­‰ AWS æœåŠ¡é€šè¿‡ role è®¿é—®å…¶ä»–èµ„æºï¼ˆS3ã€DynamoDB ç­‰ï¼‰</td></tr><tr><td>ğŸŒ èº«ä»½è”åˆï¼ˆFederationï¼‰</td><td>å¤–éƒ¨èº«ä»½æºï¼ˆå¦‚ ADã€Googleã€SAMLï¼‰ç”¨æˆ·é€šè¿‡è”åˆç™»å½•å assume è§’è‰²</td></tr><tr><td>â›” ä¼šè¯åŠé”€æœºåˆ¶</td><td>ä½¿ç”¨ <code>aws:TokenIssueTime</code> + æ¡ä»¶ç­–ç•¥åŠé”€æ—§ä¼šè¯ï¼ˆ<code>AWSRevokeOlderSessions</code>ï¼‰</td></tr></tbody></table><ul><li>ä½ å¯ä»¥è®©æŸä¸ªè´¦æˆ·ä¸­çš„ IAM ç”¨æˆ·åˆ‡æ¢èº«ä»½ï¼Œè®¿é—®å¦ä¸€ä¸ªè´¦æˆ·ï¼ˆæˆ–åŒè´¦æˆ·ï¼‰ä¸­çš„ IAM Role</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img204957.png"></p><ul><li>å¦‚ä½•å®‰å…¨åœ°æˆæƒç¬¬ä¸‰æ–¹ AWS è´¦æˆ·è®¿é—®ä½ èµ„æºä¸­çš„ IAM Role<ul><li>Zone of Trustï¼šä½ è‡ªå·±æ‹¥æœ‰çš„è´¦æˆ·æˆ– AWS Organization</li><li>Outside Zone of Trustï¼šç¬¬ä¸‰æ–¹æ‹¥æœ‰çš„ AWS è´¦æˆ·ï¼ˆå¦‚ä¾›åº”å•†ã€åˆä½œä¼™ä¼´ï¼‰</li></ul></li><li>è®¿é—®æˆæƒæµç¨‹ï¼ˆç»™ç¬¬ä¸‰æ–¹è´¦æˆ·ï¼‰<ul><li>ç¬¬ä¸‰æ–¹çš„ AWS Account ID</li><li>ä¸€ä¸ª External IDï¼ˆå…±äº«çš„ secret å­—ç¬¦ä¸²ï¼Œç”±ç¬¬ä¸‰æ–¹æä¾›ï¼‰</li><li>åœ¨ä½ è´¦æˆ·ä¸­åˆ›å»º IAM Role<ul><li>æŒ‡å®šå…è®¸ AssumeRole çš„ AWS è´¦æˆ· ID</li><li>æ·»åŠ  Condition é™åˆ¶ External IDï¼Œç¡®ä¿åªæˆæƒç»™ç‰¹å®šç¬¬ä¸‰æ–¹</li></ul></li><li>ç¬¬ä¸‰æ–¹ assume è¯¥è§’è‰²<ul><li>åœ¨è°ƒç”¨ AssumeRole æ—¶å¿…é¡»æä¾›æ­£ç¡®çš„ External IDï¼Œå¦åˆ™æ‹’ç»è®¿é—®</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img205645.png"></p><ul><li>External ID çš„é‡è¦æ€§</li></ul><table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ§¿ é˜²æ­¢â€œconfused deputyâ€ æ”»å‡»</td><td>é˜²æ­¢åˆ«äººå†’ç”¨ç¬¬ä¸‰æ–¹èº«ä»½å» assume ä½ æš´éœ²çš„è§’è‰²</td></tr><tr><td>ğŸ”’ å®‰å…¨é€šé“</td><td>External ID æ˜¯ä½ ä¸ç¬¬ä¸‰æ–¹ä¹‹é—´çš„ç§˜å¯†ï¼ŒAWS ä½œä¸ºéªŒè¯è€…</td></tr><tr><td>ğŸ¤ æ˜ç¡®æˆæƒå¯¹è±¡</td><td>ä½ å¯ä»¥æ ¹æ®ä¸åŒç¬¬ä¸‰æ–¹ä½¿ç”¨ä¸åŒ External IDï¼Œå®ç°ç»‘å®š</td></tr></tbody></table><ul><li>Session Tags in STS<ul><li>å½“ä½ é€šè¿‡ STS AssumeRole &#x2F; AssumeRoleWithSAML &#x2F; AssumeRoleWithWebIdentity è·å–ä¸´æ—¶å‡­è¯æ—¶ï¼Œå¯ä»¥é™„å¸¦è‡ªå®šä¹‰ Tagï¼Œè¿™äº› Tag ä¼šä½œä¸ºâ€œèº«ä»½å…ƒä¿¡æ¯â€è·Ÿéšè¯¥ä¼šè¯</li></ul></li></ul><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ·ï¸ æƒé™æ§åˆ¶</td><td>å¯ç”¨äºé€šè¿‡ IAM Policy ä¸­çš„ <code>aws:PrincipalTag</code> æ¡ä»¶é™åˆ¶èµ„æºè®¿é—®</td></tr><tr><td>ğŸ” å®¡è®¡è¿½è¸ª</td><td>Session tags ä¼šæ˜¾ç¤ºåœ¨ CloudTrail ä¸­ï¼Œä¾¿äºå®¡è®¡</td></tr><tr><td>ğŸ§‘â€ğŸ’¼ ç”¨æˆ·ä¿¡æ¯ä¼ é€’</td><td>å¯ä»¥ä¼ é€’æ¯”å¦‚ <code>Department=Finance</code>ã€<code>Project=Alpha</code> è¿™æ ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</td></tr><tr><td>ğŸ” å®‰å…¨å¢å¼º</td><td>é™åˆ¶åªæœ‰å…·æœ‰ç‰¹å®š tag çš„ç”¨æˆ·æ‰èƒ½ä¼ é€’æŸäº› tagï¼ˆé˜²æ­¢ä¼ªé€ ï¼‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img210325.png"></p><table><thead><tr><th>API åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>AssumeRole</strong></td><td>è·å–ä¸´æ—¶å‡­è¯ä»¥è®¿é—®æœ¬è´¦æˆ·æˆ–è·¨è´¦æˆ·çš„ IAM Roleï¼Œæœ€å¸¸ç”¨çš„ STS æ¥å£ã€‚</td></tr><tr><td><strong>AssumeRoleWithSAML</strong></td><td>ä¸ºé€šè¿‡ SAML ç™»å½•çš„ç”¨æˆ·è¿”å›ä¸´æ—¶å‡­è¯ï¼Œå¸¸ç”¨äºä¼ä¸š SSOï¼ˆå¦‚ AD FSï¼‰ã€‚</td></tr><tr><td><strong>AssumeRoleWithWebIdentity</strong></td><td>ä¸ºé€šè¿‡ Web Identity Providerï¼ˆå¦‚ Cognitoã€Facebookã€Googleã€OIDCï¼‰ç™»å½•çš„ç”¨æˆ·æä¾›ä¸´æ—¶å‡­è¯ã€‚AWS æ¨èä½¿ç”¨ Cognitoã€‚</td></tr><tr><td><strong>GetSessionToken</strong></td><td>è·å–å½“å‰ IAM ç”¨æˆ·æˆ– Root ç”¨æˆ·çš„ä¸´æ—¶å‡­è¯ï¼Œå¸¸ä¸ MFA ä¸€èµ·ä½¿ç”¨ã€‚</td></tr><tr><td><strong>GetFederationToken</strong></td><td>ä¸ºè”åˆç”¨æˆ·ï¼ˆä¸åœ¨ IAM ä¸­æ³¨å†Œçš„ç”¨æˆ·ï¼‰è·å–ä¸´æ—¶å‡­è¯ï¼Œå¸¸ç”¨äºä»£ç†ç¨‹åºæˆ–å†…éƒ¨ç½‘ç»œä¸­çš„åº”ç”¨ã€‚</td></tr></tbody></table><hr><h4 id="Identity-Federation-in-AWS"><a href="#Identity-Federation-in-AWS" class="headerlink" title="Identity Federation in AWS"></a>Identity Federation in AWS</h4><ul><li>Give users outside of AWS permissions to access AWS resources in your account</li><li>å…è®¸ AWS è´¦æˆ·å¤–éƒ¨çš„ç”¨æˆ· è·å–å¯¹ AWS èµ„æºçš„è®¿é—®æƒé™ï¼Œæ— éœ€åˆ›å»º IAM ç”¨æˆ·<ul><li>SAML 2.0, Custom Identity Broker, WebIdentityFederationWith(out)AmazonCognito, IAM Identity Center</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img426112.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+----------+     Authenticate    +-----------------+</span><br><span class="line">|   User   | -----------------&gt; | External IdP     |</span><br><span class="line">+----------+                    +-----------------+</span><br><span class="line">                                    |</span><br><span class="line">                                    v</span><br><span class="line">                      [Get Token / Assertion from IdP]</span><br><span class="line">                                    |</span><br><span class="line">                                    v</span><br><span class="line">                     +-----------------------------+</span><br><span class="line">                     | STS (AssumeRoleXxx)         |</span><br><span class="line">                     +-----------------------------+</span><br><span class="line">                                    |</span><br><span class="line">                                    v</span><br><span class="line">                     [Get Temporary Credentials]</span><br><span class="line">                                    |</span><br><span class="line">                                    v</span><br><span class="line">                          Access AWS Resources</span><br></pre></td></tr></table></figure><hr><h4 id="AWS-Directroy-Service-AD"><a href="#AWS-Directroy-Service-AD" class="headerlink" title="AWS Directroy Service (AD)"></a>AWS Directroy Service (AD)</h4><ul><li>Active Directoryï¼ˆADï¼‰ æ˜¯å¾®è½¯åœ¨ Windows Server ä¸­æä¾›çš„ç›®å½•æœåŠ¡ï¼Œç”¨äºé›†ä¸­ç®¡ç†ç½‘ç»œä¸­çš„ç”¨æˆ·ã€è®¡ç®—æœºã€èµ„æºå’Œæƒé™</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img426133.png"></p><table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ¯ ç”¨æˆ·ç®¡ç†</td><td>åˆ›å»º&#x2F;ä¿®æ”¹ç”¨æˆ·è´¦å·ï¼Œè®¾ç½®å¯†ç ç­–ç•¥ã€ç™»å½•æƒé™ç­‰</td></tr><tr><td>ğŸ–¥ï¸ èµ„æºç®¡ç†</td><td>ç»Ÿä¸€ç®¡ç†è®¡ç®—æœºã€æ‰“å°æœºã€æ–‡ä»¶å…±äº«ç­‰èµ„æº</td></tr><tr><td>ğŸ” æƒé™åˆ†é…</td><td>ä½¿ç”¨ç»„ï¼ˆSecurity Groupsï¼‰æ¥ç®€åŒ–è®¿é—®æ§åˆ¶</td></tr><tr><td>ğŸ—‚ï¸ é›†ä¸­è®¤è¯ï¼ˆSSOï¼‰</td><td>ç”¨æˆ·åªéœ€ç™»å½•ä¸€æ¬¡ï¼Œä¾¿å¯è®¿é—®å¤šä¸ªç½‘ç»œèµ„æºï¼ˆKerberos åè®®ï¼‰</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Forest</span><br><span class="line">â””â”€â”€ Tree (example.com)</span><br><span class="line">    â”œâ”€â”€ Domain: example.com</span><br><span class="line">    â”‚   â”œâ”€â”€ OU: HR</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ User: Alice</span><br><span class="line">    â”‚   â”œâ”€â”€ OU: IT</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ Computer: IT-PC-01</span><br><span class="line">    â””â”€â”€ Domain: sub.example.com</span><br></pre></td></tr></table></figure><ul><li>AWS Directory Services</li></ul><table><thead><tr><th>æœåŠ¡åç§°</th><th>æè¿°</th><th>æ˜¯å¦ä¸æœ¬åœ° AD é›†æˆ</th><th>æ”¯æŒ MFA</th><th>ç”¨æˆ·å­˜å‚¨ä½ç½®</th></tr></thead><tbody><tr><td>AWS Managed Microsoft AD</td><td>AWS æ‰˜ç®¡çš„ Microsoft ADï¼Œå®Œå…¨å…¼å®¹ï¼Œæ”¯æŒ AD ä¿¡ä»»å…³ç³»</td><td>âœ…ï¼ˆæ”¯æŒä¿¡ä»»ï¼‰</td><td>âœ…</td><td>å­˜åœ¨ AWS æ‰˜ç®¡ AD ä¸­</td></tr><tr><td>AD Connector</td><td>ç›®å½•ä»£ç†ï¼Œå……å½“ AWS å’Œæœ¬åœ° AD çš„æ¡¥æ¢ï¼ˆä¸å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼‰</td><td>âœ…ï¼ˆç›´è¿ï¼‰</td><td>âœ…</td><td>ç”¨æˆ·å­˜å‚¨åœ¨æœ¬åœ° AD</td></tr><tr><td>Simple AD</td><td>AWS æä¾›çš„ç®€åŒ–ç‰ˆã€å…¼å®¹ AD åè®®çš„æ‰˜ç®¡ç›®å½•ï¼Œé€‚åˆè½»é‡åº”ç”¨</td><td>âŒï¼ˆæ— æ³•ä¿¡ä»»ï¼‰</td><td>âŒ</td><td>å­˜å‚¨åœ¨ AWS Simple AD</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261136.png"></p><ul><li><code>AWS Managed Microsoft AD</code>ï¼ˆæ‰˜ç®¡ Microsoft ADï¼‰<ul><li>å®Œå…¨æ‰˜ç®¡çš„ Active Directoryï¼Œè¿è¡Œåœ¨ä½ çš„ AWS VPC å†…ï¼Œé€‚åˆéœ€è¦å¾®è½¯ AD åŠŸèƒ½çš„ä¼ä¸šå·¥ä½œè´Ÿè½½</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+----------------------+        +----------------------+</span><br><span class="line">|   Availability Zone 1|        |   Availability Zone 2|</span><br><span class="line">|                      |        |                      |</span><br><span class="line">|  +----------------+  |        |  +----------------+  |</span><br><span class="line">|  |   AD DC        |  |        |  |   AD DC        |  |</span><br><span class="line">|  +----------------+  |        |  +----------------+  |</span><br><span class="line">|        ^   ^         |        |        ^   ^         |</span><br><span class="line">|       /     \        |        |       /     \        |</span><br><span class="line">|   EC2 / Apps  \      |        |   EC2 / Apps  \      |</span><br><span class="line">+----------------------+        +----------------------+</span><br><span class="line"></span><br><span class="line">            â†•  Auto replication</span><br><span class="line">      â†” Cross-VPC / Multi-Account Join</span><br></pre></td></tr></table></figure><ul><li>Connect to on-premises AD<ul><li>åœ¨ AWS ä¸­éƒ¨ç½² AWS Managed Microsoft AD åï¼Œå¯ä»¥é€šè¿‡ VPN æˆ– Direct Connect ä¸ä½ ç°æœ‰çš„ æœ¬åœ° ADï¼ˆon-premises ADï¼‰ å»ºç«‹ ä¿¡ä»»å…³ç³»ï¼ˆTrustï¼‰</li></ul></li></ul><p>è¿æ¥æ–¹å¼</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ›°ï¸ VPN</td><td>ä½¿ç”¨ AWS Site-to-Site VPN å»ºç«‹åŠ å¯†è¿æ¥</td></tr><tr><td>âš¡ Direct Connect</td><td>ä½¿ç”¨ AWS DX æä¾›æ›´ç¨³å®šçš„ç§ç½‘è¿æ¥</td></tr></tbody></table><p>æ”¯æŒçš„ä¿¡ä»»ç±»å‹ï¼ˆForest Trustï¼‰</p><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ” åŒå‘ä¿¡ä»» (Two-way)</td><td>AWS å’Œæœ¬åœ° AD ç›¸äº’ä¿¡ä»»ï¼Œå¯åŒå‘èº«ä»½éªŒè¯</td></tr><tr><td>ğŸ‘‰ å•å‘ä¿¡ä»»ï¼šAWS â æœ¬åœ° AD</td><td>AWS ç”¨æˆ·å¯ä»¥è®¿é—®æœ¬åœ°èµ„æº</td></tr><tr><td>ğŸ‘‰ å•å‘ä¿¡ä»»ï¼šæœ¬åœ° â AWS</td><td>æœ¬åœ°ç”¨æˆ·å¯ä»¥è®¿é—® AWS ä¸­çš„èµ„æº</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img426123.png"></p><ul><li>Solution Architecture: Active Directory Replication<ul><li>ä¸ºäº†é™ä½å»¶è¿Ÿå¹¶æé«˜å¯ç”¨æ€§ï¼Œå¯åœ¨ AWS ä¸­éƒ¨ç½²æœ¬åœ° AD çš„å‰¯æœ¬ï¼Œä»¥ä¾¿åœ¨ VPN æˆ– Direct Connect è¿æ¥ä¸­æ–­æ—¶ä»å¯æ­£å¸¸è®¤è¯å’Œè®¿é—®èµ„æº</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261229.png"></p><ul><li><code>AWS Directory Services AD Connector</code><ul><li>AD Connector æ˜¯ä¸€ç§ç›®å½•ç½‘å…³ï¼ˆDirectory Gatewayï¼‰ï¼Œç”¨äºå°† AWS å†…çš„èº«ä»½éªŒè¯è¯·æ±‚è½¬å‘è‡³ä½ çš„ æœ¬åœ° Microsoft Active Directory</li><li>é€‚åˆçº¯èº«ä»½éªŒè¯ä»£ç†ï¼Œä¸æ”¯æŒ SQL Server</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261231.png"></p><ul><li><code>AWS Directory Services Simple AD</code><ul><li>Simple AD æ˜¯ä¸€ç§ä½æˆæœ¬ã€è½»é‡çº§çš„ç›®å½•æœåŠ¡ï¼Œå…¼å®¹ Microsoft Active Directoryï¼Œé€‚ç”¨äºå°è§„æ¨¡èº«ä»½è®¤è¯éœ€æ±‚</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img42561234.png"></p><table><thead><tr><th>ç›®å½•æœåŠ¡ç±»å‹</th><th>æ˜¯å¦æ”¯æŒ Trust</th><th>æ”¯æŒ SSO</th><th>æ”¯æŒ MFA</th><th>ç”¨æˆ·ç®¡ç†ä½ç½®</th><th>æœ€å¤§ç”¨æˆ·æ•°</th></tr></thead><tbody><tr><td>Simple AD</td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>æ‰˜ç®¡åœ¨ AWS</td><td>500 &#x2F; 5000</td></tr><tr><td>AD Connector</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>æœ¬åœ° AD</td><td>å–å†³äºæœ¬åœ° AD</td></tr><tr><td>Managed Microsoft AD</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>æ‰˜ç®¡åœ¨ AWS</td><td>å¯æ‰©å±•</td></tr></tbody></table><hr><h4 id="AWS-Organizations"><a href="#AWS-Organizations" class="headerlink" title="AWS Organizations"></a>AWS Organizations</h4><ul><li>AWS Organizations å…è®¸ä½ åœ¨ä¸€ä¸ªç»Ÿä¸€çš„ç®¡ç†æ¡†æ¶ä¸‹ï¼Œé›†ä¸­ç®¡ç†å¤šä¸ª AWS è´¦æˆ·ã€‚å¯é€šè¿‡ç»„ç»‡å•å…ƒï¼ˆOrganizational Unitsï¼ŒOUsï¼‰åˆ†ç»„ï¼Œå¹¶åº”ç”¨ç­–ç•¥ç»Ÿä¸€æ§åˆ¶<ul><li><code>Root</code>: æ•´ä¸ªç»„ç»‡çš„é¡¶å±‚èŠ‚ç‚¹ï¼ŒåŒ…å«æ‰€æœ‰ OUs å’Œè´¦å·</li><li><code>Management Account</code>: ç”¨äºåˆ›å»ºç»„ç»‡ã€é‚€è¯·è´¦å·ã€åº”ç”¨ SCP ç­–ç•¥</li><li><code>Organizational Unit (OU)</code>: ç±»ä¼¼ç›®å½•ç»“æ„ä¸­çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºé€»è¾‘åˆ†ç»„è´¦æˆ·ï¼ˆå¦‚ Devã€Prodã€HRï¼‰</li><li><code>Member Accounts</code>: åŠ å…¥ç»„ç»‡çš„å­è´¦æˆ·ï¼Œå¯ç»§æ‰¿ OU çš„ç­–ç•¥é™åˆ¶ï¼Œä½†ä¸å…·å¤‡ç»„ç»‡æ§åˆ¶æƒ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261238.png"></p><ul><li>AWS Organizations - <code>OrganizationAccountAccessRole</code><ul><li>è¿™æ˜¯ä¸€ä¸ª IAM è§’è‰²ï¼Œç”¨äºå…è®¸ ç®¡ç†è´¦æˆ·ï¼ˆManagement Accountï¼‰ å¯¹ æˆå‘˜è´¦æˆ·ï¼ˆMember Accountsï¼‰ æ‰§è¡Œç®¡ç†å‘˜æ“ä½œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261240.png"></p><ul><li>AWS Multi-Account Strategies<ul><li>åœ¨ä¼ä¸šçº§æ¶æ„ä¸­ï¼Œé‡‡ç”¨å¤šä¸ª AWS è´¦æˆ·ï¼ˆMulti-Accountï¼‰å¯ä»¥å¸¦æ¥æ›´é«˜çš„å®‰å…¨æ€§ã€èµ„æºéš”ç¦»æ€§å’Œå¯æ‰©å±•æ€§</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261242.png"></p><ul><li>AWS Organizations â€“ Feature Modes<ul><li>AWS Organizations æä¾›ä¸¤ç§åŠŸèƒ½æ¨¡å¼ï¼ˆFeature Setsï¼‰ï¼Œæ§åˆ¶ç»„ç»‡å¯ç”¨çš„åŠŸèƒ½èŒƒ</li></ul></li></ul><p><code>Consolidated Billing Features</code>ï¼ˆè´¦å•æ•´åˆæ¨¡å¼ï¼‰</p><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ’³ ç»Ÿä¸€è´¦å•ç®¡ç†</td><td>æ‰€æœ‰æˆå‘˜è´¦æˆ·å…±äº«ä¸€ä¸ªæ”¯ä»˜æ–¹å¼ï¼Œç”±ç®¡ç†è´¦æˆ·ä»˜æ¬¾</td></tr><tr><td>ğŸ’° ä½¿ç”¨é‡èšåˆä¼˜æƒ </td><td>åƒ EC2ã€S3 è¿™ç±»èµ„æºä½¿ç”¨é‡å¯è·¨è´¦æˆ·èšåˆï¼Œäº«å—æ›´é«˜æŠ˜æ‰£</td></tr><tr><td>ğŸš« æ—  SCPï¼ˆService Control Policiesï¼‰æ”¯æŒ</td><td>æ— æ³•è¿›è¡Œæƒé™ç»Ÿä¸€é™åˆ¶ç®¡ç†</td></tr></tbody></table><p><code>All Features</code>ï¼ˆå…¨åŠŸèƒ½æ¨¡å¼ï¼‰âœ… é»˜è®¤é€‰é¡¹</p><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… åŒ…å« Consolidated Billing æ‰€æœ‰åŠŸèƒ½</td><td>ç»§æ‰¿è´¦å•æ•´åˆæ¨¡å¼çš„æ‰€æœ‰ä¼˜ç‚¹</td></tr><tr><td>âœ… å¯ç”¨ Service Control Policiesï¼ˆSCPï¼‰ ç®¡ç†æˆå‘˜è´¦æˆ·æƒé™</td><td>å¯ç»Ÿä¸€ç®¡ç†æˆå‘˜è´¦æˆ·çš„æœåŠ¡è®¿é—®æƒé™</td></tr><tr><td>âœ… å¯å°†è´¦æˆ·ä»ç»„ç»‡ä¸­â€œé”å®šâ€</td><td>é€šè¿‡ SCP é˜²æ­¢æˆå‘˜è´¦æˆ·æ“…è‡ªç¦»å¼€ç»„ç»‡</td></tr><tr><td>ğŸ” æ›´ç»†ç²’åº¦æ§åˆ¶</td><td>é€‚ç”¨äºå¤šè´¦æˆ·å®‰å…¨ä¸åˆè§„æ€§æ¶æ„</td></tr><tr><td>âš ï¸ ä¸€æ—¦å¯ç”¨ï¼Œæ— æ³•å›é€€ åˆ°ä»…è´¦å•æ¨¡å¼</td><td>å¯ç”¨åæ— æ³•é™çº§å› Consolidated Billing æ¨¡å¼</td></tr></tbody></table><ul><li>AWS Organizations â€“ Moving Accountsï¼ˆè¿ç§»è´¦æˆ·ï¼‰<ul><li>ä»åŸ Organization ä¸­ç§»é™¤æˆå‘˜è´¦æˆ·</li><li>ä»ç›®æ ‡ Organization å‘é€é‚€è¯·</li><li>æˆå‘˜è´¦æˆ·æ¥å—é‚€è¯·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4261248.png"></p><hr><h4 id="Service-Control-Policies-SCP"><a href="#Service-Control-Policies-SCP" class="headerlink" title="Service Control Policies (SCP)"></a>Service Control Policies (SCP)</h4><ul><li>SCP æ˜¯ AWS Organizations çš„ä¸€ç§æƒé™æ§åˆ¶æœºåˆ¶ï¼Œç”¨äºå¯¹ç»„ç»‡ä¸­çš„è´¦æˆ·è¿›è¡Œç»Ÿä¸€çš„æœåŠ¡è®¿é—®æ§åˆ¶</li><li>ä½œç”¨èŒƒå›´ä¸º OU æˆ–è´¦æˆ·å±‚çº§, ä¸ä½œç”¨äºç®¡ç†è´¦æˆ·ï¼ˆManagement Accountï¼‰</li><li>ä½œç”¨äºè´¦å·ä¸­çš„æ‰€æœ‰ç”¨æˆ·å’Œè§’è‰², åŒ…æ‹¬ Root Userï¼Œä½†ä¸åŒ…æ‹¬ Service-linked Roles</li><li>ç­–ç•¥ç»§æ‰¿æœºåˆ¶: SCP çš„ç”Ÿæ•ˆè·¯å¾„å¿…é¡»ä» Root OU åˆ°ç›®æ ‡è´¦å· æ¯ä¸€å±‚éƒ½æœ‰ Allowï¼Œé»˜è®¤ä¸å…è®¸ä»»ä½•æ“ä½œ</li></ul><table><thead><tr><th>å¯¹è±¡</th><th>ä½œç”¨åŸŸ</th><th>æ§åˆ¶è¡Œä¸º</th></tr></thead><tbody><tr><td>IAM Policy</td><td>ç”¨æˆ· &#x2F; è§’è‰²</td><td>å®šä¹‰ç”¨æˆ·å¯åšä»€ä¹ˆ</td></tr><tr><td>SCP</td><td>è´¦å· &#x2F; OU</td><td>å®šä¹‰è´¦å·æœ€å¤šèƒ½åšä»€ä¹ˆï¼ˆæƒé™ä¸Šé™ï¼‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427514.png"></p><table><thead><tr><th>ç”¨ä¾‹åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸš« ç¦æ­¢ä½¿ç”¨æŸäº›æœåŠ¡</td><td>ç¦æ­¢æŸä¸ª OU ä¸‹ä½¿ç”¨ EMRã€CloudShell ç­‰é«˜é£é™©æœåŠ¡</td></tr><tr><td>âœ… é™åˆ¶èµ„æºåˆ›å»ºåŒºåŸŸ</td><td>é™åˆ¶åªèƒ½åœ¨ us-east-1 åŒºåŸŸä¸­ä½¿ç”¨æœåŠ¡</td></tr><tr><td>ğŸ“‹ å¼ºåˆ¶åˆè§„ç­–ç•¥</td><td>ç¡®ä¿æŸäº›æœåŠ¡ï¼ˆå¦‚ RDSï¼‰å¼€å¯åŠ å¯†ï¼Œæˆ–å…³é—­ä¸åˆè§„æœåŠ¡ä»¥æ»¡è¶³ PCIã€HIPAA è¦æ±‚</td></tr><tr><td>ğŸ” é™åˆ¶ root æƒé™</td><td>è™½ç„¶ root æ— æ³•è¢«åˆ é™¤ï¼Œä½†å¯é€šè¿‡ SCP ç¦æ­¢å…¶è®¿é—®æ•æ„ŸæœåŠ¡</td></tr></tbody></table><ul><li>Service Control Policies (SCP) ä¼šæ²¿ç€ Organizational Unit (OU) å±‚çº§å‘ä¸‹ç»§æ‰¿ï¼Œå½¢æˆæœ€ç»ˆæ¯ä¸ªè´¦æˆ·çš„æƒé™ä¸Šé™</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Root OU (applies: FullAWSAccess)</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ Management Account â†’ âœ… ä¸å— SCP é™åˆ¶ï¼ˆCan do anythingï¼‰</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ OU: Workloads (applies: FullAWSAccess)</span><br><span class="line">â”‚   â”œâ”€â”€ OU: Test (applies: Deny EC2)</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Account D â†’ âŒ EC2 è¢«ç¦æ­¢ï¼Œå…¶ä½™å…è®¸</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€ OU: Prod (applies: FullAWSAccess)</span><br><span class="line">â”‚       â”œâ”€â”€ Account E â†’ âœ… å…¨éƒ¨å…è®¸</span><br><span class="line">â”‚       â””â”€â”€ Account F â†’ âœ… å…¨éƒ¨å…è®¸</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€ OU: Sandbox (applies: Deny S3)</span><br><span class="line">    â”œâ”€â”€ Account A â†’ âŒ S3 è¢«ç¦æ­¢ï¼ˆæ¥è‡ª Sandbox OUï¼‰  </span><br><span class="line">    â”œâ”€â”€ Account B â†’ âŒ S3 è¢«ç¦æ­¢ï¼ˆSandboxï¼‰  </span><br><span class="line">    â””â”€â”€ Account C â†’ âŒ S3 è¢«ç¦æ­¢ï¼ˆSandboxï¼‰  </span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427517.png"></p><ul><li>å·¦è¾¹: é™¤äº† DynamoDB è¢«ç¦ç”¨ï¼Œå…¶ä»–æœåŠ¡ï¼ˆS3ã€EC2ã€Lambda ç­‰ï¼‰éƒ½å¯ä»¥ç”¨</li><li>å³è¾¹: é™¤äº† ec2:* å’Œ cloudwatch:* ä»¥å¤–çš„æœåŠ¡ï¼ˆå¦‚ S3ã€RDSã€IAMï¼‰å…¨éƒ¨ä¸å…è®¸è®¿é—®</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img4275518.png"></p><ul><li>IAM Policy Evaluation Logicï¼ˆæƒé™è¯„ä¼°é€»è¾‘ï¼‰<ul><li><ol><li><code>Deny Evaluation</code>ï¼ˆæœ€å…ˆè¯„ä¼°ï¼‰: æ˜¯å¦æœ‰æ˜ç¡® Deny? å¦‚æœå­˜åœ¨æ˜¾å¼ Denyï¼ˆä¾‹å¦‚ IAM Policyã€SCPã€Resource Policy ä¸­ï¼‰ï¼Œç«‹å³ç»ˆæ­¢è¯„ä¼°ï¼Œå†³ç­–ä¸º Denyï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</li></ol></li><li><ol start="2"><li><code>Organizations SCPs</code>ï¼ˆç»„ç»‡çº§æœåŠ¡æ§åˆ¶ç­–ç•¥ï¼‰: å¦‚æœè´¦æˆ·æœ‰ SCPï¼Œåˆ™å¿…é¡»åœ¨ SCP ä¸­å…è®¸ç›¸åº”æ“ä½œ</li></ol></li><li><ol start="3"><li><code>Resource-based Policies</code>ï¼ˆèµ„æºçº§ç­–ç•¥ï¼‰: æ¯”å¦‚ S3 Bucket Policyã€Lambda Resource Policyã€KMS Key Policy ç­‰, è‹¥ä¸å…è®¸ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªé˜¶æ®µ</li></ol></li><li><ol start="4"><li><code>Identity-based Policies</code>ï¼ˆèº«ä»½ç­–ç•¥ï¼‰: è¯„ä¼° IAM User&#x2F;Role&#x2F;Group çš„ç­–ç•¥æ˜¯å¦å­˜åœ¨æœ‰æ•ˆçš„ Allow? è‹¥æ— ï¼Œåˆ™éšå¼æ‹’ç»ï¼ˆImplicit Denyï¼‰</li></ol></li><li><ol start="5"><li><code>IAM Permissions Boundaries</code>ï¼ˆæƒé™è¾¹ç•Œï¼‰: æƒé™è¾¹ç•Œä¹Ÿä¼šé™åˆ¶ä¸€ä¸ªç”¨æˆ·&#x2F;è§’è‰²çš„æœ€å¤§æƒé™èŒƒå›´, å¿…é¡»åŒæ—¶æ»¡è¶³ Identity Policy å’Œ Boundary æ‰èƒ½é€šè¿‡</li></ol></li><li><ol start="6"><li><code>Session Policies</code>ï¼ˆä¼šè¯ç­–ç•¥ï¼‰: å¦‚æœæ˜¯é€šè¿‡ä¸´æ—¶å‡­è¯ï¼ˆä¾‹å¦‚ AssumeRoleï¼‰è®¿é—®ï¼Œä¼šè¯ä¸­å¯èƒ½é™„å¸¦ policy</li></ol></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427519.png"></p><hr><h4 id="IAM-Identity-Center"><a href="#IAM-Identity-Center" class="headerlink" title="IAM Identity Center"></a>IAM Identity Center</h4><ul><li>Formerly known as AWS Single Sign-On (SSO)</li></ul><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ” ç»Ÿä¸€ç™»å½•ï¼ˆSingle Sign-Onï¼‰</td><td>å®ç°ä¸€æ¬¡ç™»å½•ï¼Œè®¿é—®å¤šä¸ª AWS è´¦æˆ·åŠä¸šåŠ¡åº”ç”¨</td></tr><tr><td>ğŸ”„ é›†ä¸­å¼èº«ä»½è®¿é—®ç®¡ç†</td><td>ç»Ÿä¸€ç®¡ç†ç”¨æˆ·æƒé™ï¼Œè·¨è´¦æˆ·&#x2F;è·¨åŒºåŸŸç”Ÿæ•ˆ</td></tr><tr><td>ğŸ§‘â€ğŸ’¼ æ”¯æŒå¤šç§èº«ä»½æº</td><td>å†…ç½®ç”¨æˆ·ç›®å½• + ç¬¬ä¸‰æ–¹ IdPï¼ˆå¦‚ ADã€Oktaï¼‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427534.png"></p><ul><li>AWS IAM Identity Centerï¼ˆå‰ AWS SSOï¼‰ çš„æ¶æ„æ•´åˆä¸å·¥ä½œæµç¨‹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç”¨æˆ·é€šè¿‡æµè§ˆå™¨ç™»å½• Identity Center</span><br><span class="line">2. åç«¯é€šè¿‡å†…ç½®ç›®å½•æˆ– AD ç¡®è®¤èº«ä»½</span><br><span class="line">3. æ ¹æ®ç”¨æˆ·ç»‘å®šçš„ Permission Set åˆ†é…è®¿é—®æƒé™</span><br><span class="line">4. è‡ªåŠ¨ SSO åˆ°ï¼š</span><br><span class="line">   - AWS æ§åˆ¶å°ï¼ˆå¤šä¸ªè´¦æˆ·ï¼‰</span><br><span class="line">   - SaaS åº”ç”¨</span><br><span class="line">   - æ”¯æŒ SAML2.0 çš„è‡ªå®šä¹‰ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427536.png"></p><ul><li>IAM Identity Center ä¸ AWS Organizations çš„é›†æˆç»“æ„ <ul><li>å¦‚ä½•é€šè¿‡æƒé™é›†ï¼ˆPermission Setï¼‰ä¸ºç”¨æˆ·è·¨è´¦æˆ·èµ‹æƒ</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Bob å’Œ Alice å±äº Developers ç»„ â†’</span><br><span class="line">Developers ç»„è¢«èµ‹äºˆï¼š</span><br><span class="line">  - ReadOnlyAccess â†’ Dev Account A</span><br><span class="line">  - FullAccess â†’ Prod Account A</span><br><span class="line"></span><br><span class="line">â¡ï¸ ç”¨æˆ·ç™»å½•åä¼šçœ‹åˆ°å¯¹åº” AWS è´¦æˆ·åŠå…¶å¯é€‰çš„ Role</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img427538.png"></p><ul><li>AWS IAM Identity Center â€“ Fine-grained Permissions and Assignmentsï¼ˆç»†ç²’åº¦æƒé™ä¸æˆæƒï¼‰</li></ul><p>Multi-Account Permissionsï¼ˆè·¨è´¦æˆ·æƒé™ï¼‰</p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>âœ… è·¨è´¦æˆ·æƒé™ç®¡ç†</td><td>ç®¡ç†æ•´ä¸ª AWS Organization ä¸­å¤šä¸ªè´¦æˆ·çš„è®¿é—®æƒé™</td></tr><tr><td>ğŸ“¦ Permission Set</td><td>ä¸€ç»„ IAM Policy çš„é›†åˆï¼Œç”¨äºèµ‹äºˆç”¨æˆ·&#x2F;ç»„ AWS è´¦æˆ·è®¿é—®æƒé™</td></tr><tr><td>â• æƒé™èµ‹äºˆæœºåˆ¶</td><td>å°† Permission Set åˆ†é…ç»™ç”¨æˆ·&#x2F;ç»„ + æŒ‡å®šè´¦æˆ·ï¼Œå³å¯è·¨è´¦æˆ·è®¿é—®</td></tr></tbody></table><p>Application Assignmentsï¼ˆSAML åº”ç”¨æˆæƒï¼‰</p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>âœ… SSO è®¿é—®ä¼ä¸š SaaS åº”ç”¨</td><td>æ”¯æŒ Salesforceã€Boxã€Microsoft 365 ç­‰ SAML 2.0 åº”ç”¨</td></tr><tr><td>ğŸ” æä¾›æ‰€éœ€çš„è¿æ¥ä¿¡æ¯</td><td>åŒ…æ‹¬ SAML URLã€è¯ä¹¦ã€Metadata ä¾›åº”ç”¨é…ç½®ä½¿ç”¨</td></tr></tbody></table><p>Attribute-Based Access Control (ABAC)</p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ·ï¸ åŸºäºç”¨æˆ·å±æ€§çš„æƒé™æ§åˆ¶</td><td>å¯æ ¹æ®ç”¨æˆ·å±æ€§è‡ªåŠ¨åº”ç”¨æƒé™ï¼Œé™ä½æ‰‹åŠ¨ç»´æŠ¤æˆæœ¬</td></tr><tr><td>ç¤ºä¾‹å±æ€§</td><td><code>costcenter</code>, <code>title</code>, <code>locale</code> ç­‰</td></tr><tr><td>ç”¨ä¾‹</td><td>å®šä¹‰ä¸€æ¬¡æƒé™ï¼Œåç»­é€šè¿‡ä¿®æ”¹å±æ€§æ§åˆ¶è®¿é—®èŒƒå›´ï¼Œæ— éœ€ä¿®æ”¹ç­–ç•¥</td></tr></tbody></table><hr><h4 id="AWS-Control-Tower"><a href="#AWS-Control-Tower" class="headerlink" title="AWS Control Tower"></a>AWS Control Tower</h4><ul><li>AWS Control Tower æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–æ­å»ºã€ç®¡ç†å®‰å…¨åˆè§„å¤šè´¦æˆ·ç¯å¢ƒçš„æœåŠ¡ï¼ŒåŸºäº AWS æœ€ä½³å®è·µ</li><li>Control Tower ä¾èµ– AWS Organizations ç®¡ç†å¤šè´¦æˆ·ç»“æ„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img428831.png"></p><ul><li>AWS Control Tower â€“ Account Factory<ul><li>Account Factory æ˜¯ AWS Control Tower æä¾›çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨æ¥æ ‡å‡†åŒ–å’Œæ‰¹é‡åˆ›å»ºæ–°çš„ AWS è´¦æˆ·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img428832.png"></p><ul><li>AWS Control Tower â€“ Detect and Remediate Policy Violations<ul><li>Control Tower é€šè¿‡ Guardrailsï¼ˆæŠ¤æ è§„åˆ™ï¼‰ æ¥æŒç»­ç›‘æ§å’Œç®¡ç†è´¦æˆ·ç¯å¢ƒä¸­çš„åˆè§„æ€§</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img428834.png"></p><ul><li>AWS Control Tower â€“ Guardrails Levels<ul><li>Guardrailsï¼ˆæŠ¤æ è§„åˆ™ï¼‰æŒ‰é‡è¦æ€§å’Œå¼ºåˆ¶æ€§è¢«åˆ†ä¸ºä¸‰ç§ä¸åŒçº§åˆ«</li></ul></li></ul><table><thead><tr><th>ç­‰çº§</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ›¡ï¸ Mandatory ï¼ˆå¼ºåˆ¶ï¼‰</td><td>è‡ªåŠ¨å¯ç”¨ï¼ŒAWS Control Tower å¿…é¡»å¼ºåˆ¶æ‰§è¡Œ</td><td>ç¦æ­¢ Log Archive è´¦æˆ·å¯¹å¤–å…¬å¼€è¯»æƒé™</td></tr><tr><td>ğŸ’¬ Strongly Recommended ï¼ˆå¼ºçƒˆæ¨èï¼‰</td><td>æ ¹æ® AWS æœ€ä½³å®è·µæ¨èï¼Œå¯ç”¨å¯æå‡å®‰å…¨æ€§ï¼Œä½†å¯é€‰</td><td>å»ºè®®ä¸º EC2 æŒ‚è½½çš„ EBS å·å¯ç”¨åŠ å¯†</td></tr><tr><td>ğŸ“ Elective ï¼ˆè‡ªé€‰ï¼‰</td><td>ä¼ä¸šå¸¸ç”¨çš„é™„åŠ æ§åˆ¶æªæ–½ï¼Œå¯æ ¹æ®éœ€è¦é€‰æ‹©æ€§å¯ç”¨</td><td>ç¦æ­¢æ—  MFA çš„ S3 åˆ é™¤æ“ä½œ</td></tr></tbody></table><hr><h4 id="AWS-Resource-Access-Manager-RAM"><a href="#AWS-Resource-Access-Manager-RAM" class="headerlink" title="AWS Resource Access Manager (RAM)"></a>AWS Resource Access Manager (RAM)</h4><ul><li>AWS RAM å…è®¸ä½ å°† AWS èµ„æºè·¨è´¦æˆ·å…±äº«ï¼Œé¿å…èµ„æºé‡å¤åˆ›å»ºï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡å’Œæˆæœ¬æ•ˆç›Š</li><li>åˆ©ç”¨ RAM å…±äº« VPC å­ç½‘ï¼Œå¤šä¸ªè´¦æˆ·çš„èµ„æºå¯ä»¥éƒ¨ç½²åœ¨åŒä¸€ä¸ª VPC ä¸­ï¼ŒåŒæ—¶ä¿æŒè´¦æˆ·çº§èµ„æºéš”ç¦»</li><li></li></ul><p>æ”¯æŒå…±äº«çš„èµ„æºç¤ºä¾‹</p><table><thead><tr><th>èµ„æºç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸŒ VPC å­ç½‘ï¼ˆSubnetsï¼‰</td><td>å…è®¸å¤šä¸ªè´¦æˆ·çš„èµ„æºéƒ¨ç½²åˆ°åŒä¸€ä¸ªå­ç½‘å†…ï¼ˆä½†å¿…é¡»åŒå±ä¸€ä¸ª AWS Organizationï¼‰</td></tr><tr><td>ğŸš« é™åˆ¶</td><td>ä¸æ”¯æŒå…±äº« Security Groups å’Œ Default VPC</td></tr><tr><td>ğŸš Transit Gateway</td><td>å¤šè´¦æˆ·å…±ç”¨åŒä¸€ä¸ª Transit Gateway å®ç°ç½‘ç»œäº’é€š</td></tr><tr><td>ğŸŒ Route 53</td><td>å¯ä»¥å…±äº« Resolver è§„åˆ™ã€DNS Firewall è§„åˆ™ç»„ç­‰</td></tr><tr><td>ğŸ›¡ï¸ License Manager é…ç½®</td><td>è·¨è´¦æˆ·ç»Ÿä¸€ç®¡ç†è®¸å¯è¯åˆ†é…</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img428837.png"></p><hr><h3 id="2-Security"><a href="#2-Security" class="headerlink" title="2. Security"></a>2. Security</h3><h4 id="CloudTrail"><a href="#CloudTrail" class="headerlink" title="CloudTrail"></a>CloudTrail</h4><ul><li>CloudTrail æ˜¯ AWS çš„æ—¥å¿—å®¡è®¡æœåŠ¡ï¼Œç”¨äºè®°å½•è´¦å·ä¸­çš„æ‰€æœ‰ API è°ƒç”¨å†å²ï¼Œä¾¿äºå®¡è®¡ã€åˆè§„ä¸å®‰å…¨è°ƒæŸ¥ï¼ˆèµ„æºåˆ é™¤äº†ï¼Ÿå…ˆæŸ¥ CloudTrailï¼ï¼‰</li><li><code>é»˜è®¤å¯ç”¨</code>: æ¯ä¸ª AWS è´¦æˆ·è‡ªåŠ¨å¯ç”¨åŸºæœ¬äº‹ä»¶è®°å½•ï¼ˆ90 å¤©å†…ï¼‰</li><li><code>è®°å½•æ‰€æœ‰ API è°ƒç”¨</code>: åŒ…æ‹¬é€šè¿‡æ§åˆ¶å°ã€SDKã€CLIã€AWS æœåŠ¡å†…éƒ¨è°ƒç”¨ç­‰</li><li><code>è·¨åŒºåŸŸæ”¯æŒ</code>: å¯é€‰æ‹©è®°å½•å•ä¸ª Regionï¼Œæˆ–è·¨ Regionï¼ˆé»˜è®¤ All Regionsï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img220750.png"></p><p>CloudTrail äº‹ä»¶ç±»å‹å¯¹æ¯”</p><table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>é»˜è®¤å¯ç”¨</th><th>æ˜¯å¦é«˜é¢‘</th><th>æ˜¯å¦åŒºåˆ†è¯»å†™</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Management Events</td><td>âœ… æ˜¯</td><td>ä¸­é¢‘</td><td>âœ… å¯åŒºåˆ†</td><td>IAM, EC2, CloudTrail</td></tr><tr><td>Data Events</td><td>âŒ å¦</td><td>é«˜é¢‘</td><td>âœ… å¯åŒºåˆ†</td><td>S3 å¯¹è±¡, Lambda è°ƒç”¨</td></tr><tr><td>CloudTrail Insights</td><td>âŒ å¦</td><td>æ™ºèƒ½æ£€æµ‹</td><td>æ— éœ€åŒºåˆ†</td><td>æ£€æµ‹çªå¢&#x2F;å¼‚å¸¸è¡Œä¸º</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221339.png"></p><ul><li>CloudTrail Events Retention<ul><li>é»˜è®¤ä¿ç•™æœŸé™: 90 å¤©ï¼ˆCloudTrail æ§åˆ¶å°ä¸­é»˜è®¤å¯æŸ¥è¯¢çš„äº‹ä»¶æ—¶é—´èŒƒå›´ï¼‰</li><li>é•¿æœŸä¿å­˜: è‹¥éœ€ä¿å­˜è¶…è¿‡ 90 å¤©ï¼Œéœ€å°†æ—¥å¿—å†™å…¥ S3 å­˜å‚¨æ¡¶</li><li>æŸ¥è¯¢åˆ†æ: å¯é…åˆ Amazon Athena æŸ¥è¯¢å­˜å‚¨åœ¨ S3 ä¸­çš„å†å²æ—¥å¿—ï¼Œå®ç°ç»“æ„åŒ–åˆ†æ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221603.png"></p><ul><li>EventBridge + CloudTrail<ul><li>é€šè¿‡ Amazon EventBridge + CloudTrail æ‹¦æˆª AWS API è°ƒç”¨ï¼Œç”¨äºå®æ—¶å®‰å…¨å“åº”ä¸å‘Šè­¦</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·å‘èµ· DeleteTable API æ“ä½œ â è¢« CloudTrail è®°å½• â äº‹ä»¶è¢« EventBridge æ•æ‰ â å‘å‡º SNS å‘Šè­¦</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221813.png"></p><hr><h4 id="KMS-Key-Management-Service"><a href="#KMS-Key-Management-Service" class="headerlink" title="KMS (Key Management Service)"></a>KMS (Key Management Service)</h4><ul><li>KMS æ˜¯ AWS æä¾›çš„æ‰˜ç®¡å¯†é’¥æœåŠ¡ï¼Œç”¨äºç®¡ç†åŠ å¯†ã€è§£å¯†å’Œå¯†é’¥æˆæƒï¼Œå‡ ä¹æ¶‰åŠæ‰€æœ‰æ•°æ®åŠ å¯†çš„åœºæ™¯</li><li><code>æ•°æ®åŠ å¯†å¼•æ“</code>: AWS ä¸­æ‰€æœ‰â€œåŠ å¯†â€ç›¸å…³åŠŸèƒ½å‡ ä¹éƒ½ä¾èµ– KMS</li><li><code>å¯†é’¥æ‰˜ç®¡ä¸æ§åˆ¶</code>: AWS ç®¡ç†å¯†é’¥çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºã€è½®æ¢ã€ç¦ç”¨ç­‰ï¼‰</li><li><code>ä¸ IAM é›†æˆæˆæƒ</code>: ä½¿ç”¨ IAM æƒé™æ§åˆ¶è°èƒ½è®¿é—®æˆ–ä½¿ç”¨å¯†é’¥</li><li>KMS æ”¯æŒä¸¤ç§ç±»å‹çš„å¯†é’¥ï¼šå¯¹ç§°å¯†é’¥ï¼ˆSymmetricï¼‰ å’Œ éå¯¹ç§°å¯†é’¥ï¼ˆAsymmetricï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img224545.png"></p><p>KMS å¯†é’¥ç±»å‹å¯¹æ¯”</p><table><thead><tr><th>ç‰¹æ€§</th><th>Customer Managed Key</th><th>AWS Managed Key</th><th>AWS Owned Key</th></tr></thead><tbody><tr><td>ç”¨æˆ·æ§åˆ¶</td><td>âœ… å®Œå…¨æ§åˆ¶</td><td>âŒ å—é™</td><td>âŒ æ— æ³•æ§åˆ¶</td></tr><tr><td>è‡ªåŠ¨è½®æ¢</td><td>âœ… å¯å¯ç”¨</td><td>âœ… è‡ªåŠ¨å¯ç”¨</td><td>âœ… AWS è‡ªç®¡</td></tr><tr><td>æ”¯æŒ CloudTrail å®¡è®¡</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td></tr><tr><td>å¯ç”¨ä½œ Envelope åŠ å¯†</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>å¸¸è§ä½¿ç”¨åœºæ™¯</td><td>é«˜æ•æ„Ÿæ•°æ®</td><td>æœåŠ¡é»˜è®¤åŠ å¯†</td><td>AWS å†…éƒ¨ä½¿ç”¨</td></tr></tbody></table><ul><li>KMS Key Material Originï¼ˆå¯†é’¥ææ–™æ¥æºï¼‰<ul><li><code>AWS_KMS</code>: ç”± AWS è‡ªåŠ¨ç”Ÿæˆ, KMS åœ¨å…¶å—æ§çš„å¯†é’¥å­˜å‚¨ä¸­åˆ›å»ºå¹¶ç®¡ç†å¯†é’¥ææ–™</li><li><code>EXTERNAL</code>: ç”¨æˆ·è‡ªè¡Œå¯¼å…¥å¯†é’¥ææ–™, ä½¿ç”¨ ImportKeyMaterial API å°†å¯†é’¥æ³¨å…¥åˆ° KMS ä¸­</li><li><code>AWS_CLOUDHSM</code>: ä½¿ç”¨ AWS CloudHSM åˆ›å»ºå¯†é’¥ææ–™, CloudHSM æ˜¯åŸºäºç¡¬ä»¶çš„å¯†é’¥æ¨¡å—ï¼ˆHSMï¼‰æœåŠ¡</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img502823.png"></p><ul><li>KMS Key Source â€“ Custom Key Store (CloudHSM)<ul><li>å°† KMS ä¸ CloudHSM é›†ç¾¤é›†æˆï¼Œä½¿ KMS å¯†é’¥ææ–™æ‰˜ç®¡åœ¨ä½ è‡ªæœ‰çš„ HSM ä¸­ï¼Œè¿›ä¸€æ­¥å¢å¼ºå®‰å…¨è¾¹ç•Œä¸åˆè§„èƒ½åŠ›</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img105554.png"></p><ul><li>KMS Key Source â€“ Externalï¼ˆBring Your Own Key, BYOKï¼‰<ul><li>å°†ä½ è‡ªå·±çš„å¯†é’¥ææ–™ï¼ˆKey Materialï¼‰å¯¼å…¥åˆ° AWS KMS ä¸­ï¼Œä½¿ä½ èƒ½åœ¨ AWS å†…éƒ¨ä½¿ç”¨å¤–éƒ¨ç”Ÿæˆçš„å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†æ“ä½œ</li><li>AWS æä¾›ä½¿ç”¨æ¥å£ï¼Œä½†ä¸å†è´Ÿè´£å¯†é’¥ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ä¸å®‰å…¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img105739.png"></p><ul><li>AWS KMS Multi-Region Keys<ul><li>åœ¨å¤šä¸ª Region ä¸­åˆ›å»ºä¸€ç»„ åŠŸèƒ½ä¸Šç­‰æ•ˆçš„ KMS å¯†é’¥ï¼Œæ”¯æŒè·¨åŒºåŸŸåŠ å¯†&#x2F;è§£å¯†ï¼Œæ— éœ€é‡æ–°åŠ å¯†æˆ–è·¨åŒºåŸŸ API è°ƒç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img110341.png"></p><hr><h4 id="SSM-Parameter-Store"><a href="#SSM-Parameter-Store" class="headerlink" title="SSM Parameter Store"></a>SSM Parameter Store</h4><ul><li>Parameter Store æ˜¯ AWS æä¾›çš„ é…ç½®ä¸å¯†é’¥å€¼å­˜å‚¨æœåŠ¡ï¼Œé€‚ç”¨äºç¯å¢ƒå˜é‡ã€å‡­è¯ã€å¯†é’¥ç­‰çš„å®‰å…¨ç®¡ç†</li></ul><p>SSM Parameter Store â€“ å¸¸è§ç”¨é€”</p><table><thead><tr><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ§ª ç¯å¢ƒé…ç½®æ³¨å…¥</td><td>Dev &#x2F; Staging &#x2F; Prod ä½¿ç”¨ä¸åŒå‚æ•°</td></tr><tr><td>ğŸ” å¯†é’¥å­˜å‚¨</td><td>å­˜å‚¨æ•°æ®åº“å¯†ç ã€API å¯†é’¥ã€ä»¤ç‰Œç­‰</td></tr><tr><td>ğŸ” CI&#x2F;CD é›†æˆ</td><td>Pipeline ä¸­åŠ¨æ€è¯»å–ç‰ˆæœ¬åŒ–é…ç½®</td></tr><tr><td>ğŸ§© æœåŠ¡é—´è§£è€¦é…ç½®</td><td>å¤šä¸ª Lambda &#x2F; ECS æœåŠ¡å…±äº«ç›¸åŒé…ç½®ä½†ä¸ç¡¬ç¼–ç </td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img110601.png"></p><ul><li>SSM Parameter Store â€“ åˆ†å±‚ç»“æ„ï¼ˆHierarchyï¼‰<ul><li>Parameter Store æ”¯æŒä»¥â€œè·¯å¾„â€æ–¹å¼ç»„ç»‡å‚æ•°ï¼Œéå¸¸é€‚åˆå¤§å‹é¡¹ç›®çš„å¤šç¯å¢ƒé…ç½®ç®¡ç†</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/my-department/</span><br><span class="line">â”œâ”€â”€ my-app/</span><br><span class="line">â”‚   â”œâ”€â”€ dev/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ db-url</span><br><span class="line">â”‚   â”‚   â””â”€â”€ db-password</span><br><span class="line">â”‚   â””â”€â”€ prod/</span><br><span class="line">â”‚       â”œâ”€â”€ db-url</span><br><span class="line">â”‚       â””â”€â”€ db-password</span><br><span class="line">â”œâ”€â”€ other-app/</span><br><span class="line">/other-department/</span><br></pre></td></tr></table></figure><ul><li>SSM Parameter Store â€“ Standard ä¸ Advanced å‚æ•°å±‚çº§å¯¹æ¯”</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>Standard</th><th>Advanced</th></tr></thead><tbody><tr><td>å‚æ•°æ€»æ•°é‡ä¸Šé™ï¼ˆæ¯è´¦æˆ·æ¯åŒºåŸŸï¼‰</td><td>10,000</td><td>100,000</td></tr><tr><td>å•ä¸ªå‚æ•°æœ€å¤§å€¼å¤§å°</td><td>4 KB</td><td>8 KB</td></tr><tr><td>æ˜¯å¦æ”¯æŒå‚æ•°ç­–ç•¥ï¼ˆè¿‡æœŸç­‰ï¼‰</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æˆæœ¬</td><td>âœ… å…è´¹</td><td>ğŸ’² æ¯ä¸ªå‚æ•° $0.05&#x2F;æœˆ</td></tr><tr><td>å…¸å‹ç”¨é€”</td><td>ä¸€èˆ¬é…ç½®ã€å°è§„æ¨¡ç³»ç»Ÿ</td><td>å¤§å‹ä¼ä¸šç³»ç»Ÿã€åˆè§„è¦æ±‚ã€å¤šç‰ˆæœ¬é…ç½®ç­‰</td></tr></tbody></table><ul><li>SSM Parameter Store â€“ Parameter Policiesï¼ˆå‚æ•°ç­–ç•¥ï¼Œä»…é™ Advanced å‚æ•°ï¼‰<ul><li>Parameter Policies æ˜¯ä¸ºé«˜çº§å‚æ•°ï¼ˆAdvanced Tierï¼‰æä¾›çš„é™„åŠ åŠŸèƒ½ï¼Œç”¨äºæ§åˆ¶å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸã€å®‰å…¨æ€§ä¸åˆè§„æ€§</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img110924.png"></p><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><ul><li>Secrets Manager æ˜¯ AWS ä¸“é—¨ç”¨äºå­˜å‚¨å’Œè‡ªåŠ¨è½®æ¢æ•æ„Ÿå‡­è¯ï¼ˆå¦‚å¯†ç ã€API å¯†é’¥ç­‰ï¼‰çš„æœåŠ¡ï¼Œæ¯” Parameter Store æ›´å®‰å…¨ã€æ›´è‡ªåŠ¨åŒ–</li></ul><p>Secrets Manager vs SSM Parameter Store å¯¹æ¯”ç®€è¡¨</p><table><thead><tr><th>é¡¹ç›®</th><th>Secrets Manager</th><th>SSM Parameter Store (SecureString)</th></tr></thead><tbody><tr><td>è‡ªåŠ¨è½®æ¢</td><td>âœ… æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒï¼ˆéœ€æ‰‹åŠ¨ï¼‰</td></tr><tr><td>æˆæœ¬</td><td>ğŸ’² $0.40 æ¯å¯†é’¥ &#x2F; æœˆ</td><td>æ ‡å‡†å…è´¹ï¼Œé«˜çº§ $0.05 &#x2F; æœˆ</td></tr><tr><td>æ”¯æŒ Lambda é›†æˆ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âŒ æ— </td></tr><tr><td>åŸç”ŸæœåŠ¡é›†æˆ</td><td>âœ… å¼ºï¼ˆRDSã€Redshiftï¼‰</td><td>âœ… ä¸€èˆ¬</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img506823.png"></p><ul><li>AWS Secrets Manager â€“ è·¨è´¦æˆ·å…±äº«ï¼ˆSharing Across Accountsï¼‰<ul><li>è¦è®©å…¶ä»– AWS è´¦æˆ·è®¿é—®æŸä¸ª Secrets Manager ä¸­çš„å¯†é’¥ï¼Œéœ€ åŒæ—¶é…ç½® KMS ç­–ç•¥ä¸ Resource-based Policy</li></ul></li></ul><p>SSM Parameter Store vs. Secrets Manager â€“ Rotation</p><table><thead><tr><th>ç‰¹æ€§</th><th>Secrets Manager</th><th>SSM Parameter Store</th></tr></thead><tbody><tr><td>è½®æ¢æ–¹å¼</td><td>âœ… å†…å»ºè‡ªåŠ¨è½®æ¢</td><td>âŒ éœ€è‡ªå»º EventBridge + Lambda</td></tr><tr><td>RDS æ”¯æŒ</td><td>âœ… åŸç”Ÿé›†æˆ</td><td>âœ… éœ€è‡ªè¡Œå®ç°è¿æ¥ä¸æ›´æ–°é€»è¾‘</td></tr><tr><td>Lambda æ¨¡æ¿æ”¯æŒ</td><td>âœ… AWS æä¾›æ¨¡æ¿</td><td>âŒ æ— æ¨¡æ¿</td></tr><tr><td>æˆæœ¬</td><td>ğŸ’² $0.40 &#x2F; æœˆ &#x2F; å¯†é’¥</td><td>ğŸ’² å…è´¹ï¼ˆæ ‡å‡†ï¼‰æˆ– $0.05 &#x2F; æœˆï¼ˆé«˜çº§ï¼‰</td></tr><tr><td>ä½¿ç”¨å»ºè®®</td><td>é«˜æ•æ„Ÿæ•°æ®ï¼Œæ•°æ®åº“å¯†ç ç®¡ç†</td><td>ç®€å•é…ç½®è½®æ¢æˆ–æˆæœ¬æ•æ„Ÿåœºæ™¯</td></tr></tbody></table><hr><h4 id="SSL-x2F-TLS-Basics"><a href="#SSL-x2F-TLS-Basics" class="headerlink" title="SSL&#x2F;TLS - Basics"></a>SSL&#x2F;TLS - Basics</h4><ul><li>SSL&#x2F;TLS æ˜¯ç”¨äºç½‘ç»œè¿æ¥åŠ å¯†çš„åè®®ï¼Œå¸¸ç”¨äºä¿æŠ¤æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“å®‰å…¨</li></ul><table><thead><tr><th>é¡¹ç›®</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ” SSLï¼ˆSecure Sockets Layerï¼‰</td><td>æœ€åˆç”¨äºå®ç°å®‰å…¨é€šä¿¡çš„åè®®ï¼Œç°å·²è¢«æ·˜æ±°</td></tr><tr><td>ğŸ” TLSï¼ˆTransport Layer Securityï¼‰</td><td>SSL çš„å‡çº§ç‰ˆï¼Œå½“å‰ä¸»æµå®‰å…¨ä¼ è¾“åè®®ï¼ˆå¦‚ TLS 1.2, TLS 1.3ï¼‰</td></tr><tr><td>ğŸ—£ï¸ é€šä¿—å«æ³•</td><td>å°½ç®¡ä½¿ç”¨çš„æ˜¯ TLSï¼Œå¤§å®¶ä»ä¹ æƒ¯è¯´ â€œSSL è¯ä¹¦â€</td></tr></tbody></table><ul><li>SSL â€“ Man-in-the-Middle (MITM) Attack<ul><li>MITMï¼ˆä¸­é—´äººæ”»å‡»ï¼‰æ˜¯æŒ‡æ”»å‡»è€…åœ¨ç”¨æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´æ‚„æ‚„æ’å…¥ï¼Œæ‹¦æˆªã€è¯»å–ç”šè‡³ç¯¡æ”¹ä¼ è¾“çš„æ•°æ®ï¼Œå¸¸è§äºå…¬å…± Wi-Fi æˆ– DNS æ¬ºéª—åœºæ™¯</li></ul></li></ul><p>MITM æ”»å‡»é˜²æŠ¤æªæ–½åˆ†ç±»</p><table><thead><tr><th>ç­‰çº§</th><th>æè¿°</th><th>ç¤ºä¾‹æˆ–å»ºè®®</th></tr></thead><tbody><tr><td>ğŸ›¡ï¸ Mandatory ï¼ˆå¼ºåˆ¶ï¼‰</td><td>åŸºæœ¬é˜²æŠ¤æªæ–½ï¼Œå¿…é¡»å¯ç”¨</td><td>æ‰€æœ‰å…¬ç½‘æµé‡ä½¿ç”¨ HTTPSï¼Œéƒ¨ç½²æœ‰æ•ˆ SSL&#x2F;TLS è¯ä¹¦</td></tr><tr><td>ğŸ’¬ Strongly Recommended ï¼ˆå¼ºçƒˆæ¨èï¼‰</td><td>AWS æ¨èçš„å¢å¼ºé˜²æŠ¤æ‰‹æ®µï¼Œå¯æ˜¾è‘—æå‡å®‰å…¨æ€§</td><td>å¯ç”¨ DNSSEC æ¥é˜²æ­¢ DNS è¢«åŠ«æŒ</td></tr><tr><td>ğŸ“ Elective ï¼ˆè‡ªé€‰ï¼‰</td><td>ä¼ä¸šå¸¸ç”¨çš„é™„åŠ æ‰‹æ®µï¼Œå¯è§†æƒ…å†µå¯ç”¨</td><td>ä½¿ç”¨è‡ªå®šä¹‰ DNS æœåŠ¡å™¨æå‡æ§åˆ¶åŠ›ï¼ˆå¦‚ Bindã€dnsmasqï¼‰</td></tr></tbody></table><hr><h4 id="AWS-Certificate-Manager-ACM"><a href="#AWS-Certificate-Manager-ACM" class="headerlink" title="AWS Certificate Manager (ACM)"></a>AWS Certificate Manager (ACM)</h4><ul><li>ACMï¼ˆAWS Certificate Managerï¼‰æ˜¯ AWS æä¾›çš„ SSL&#x2F;TLS è¯ä¹¦ç®¡ç†æœåŠ¡ï¼Œæ”¯æŒç”³è¯·ã€æ‰˜ç®¡ã€åˆ†å‘ã€ç»­æœŸç­‰åŠŸèƒ½ï¼Œæå¤§ç®€åŒ–äº†è¯ä¹¦åœ¨äº‘ä¸­çš„éƒ¨ç½²æµç¨‹</li></ul><p>ACM æ”¯æŒé›†æˆçš„æœåŠ¡</p><table><thead><tr><th>é›†æˆæœåŠ¡</th><th>æè¿°</th></tr></thead><tbody><tr><td>âš–ï¸ Load Balancer</td><td>æ”¯æŒ ALB &#x2F; NLBï¼ŒåŒ…æ‹¬ç”± Elastic Beanstalk åˆ›å»ºçš„è´Ÿè½½å‡è¡¡å™¨</td></tr><tr><td>ğŸŒ CloudFront</td><td>å¯ä¸ºåˆ†å‘çš„å†…å®¹å¯ç”¨ HTTPS æ”¯æŒ</td></tr><tr><td>ğŸ“¡ API Gateway</td><td>ä¸º API ç½‘å…³çš„è‡ªå®šä¹‰åŸŸåé…ç½® SSL è¯ä¹¦</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img509401.png"></p><p>å»ºè®®ä½¿ç”¨åœºæ™¯æ€»ç»“</p><table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®</th></tr></thead><tbody><tr><td>âœ… å¤–éƒ¨ç½‘ç«™æˆ– API</td><td>ä½¿ç”¨ ACM å…¬æœ‰è¯ä¹¦ï¼ˆè‡ªåŠ¨ç»­æœŸ + å…è´¹ï¼‰</td></tr><tr><td>ğŸ” å†…éƒ¨å¾®æœåŠ¡é€šä¿¡ï¼ˆéå…¬ç½‘ï¼‰</td><td>åˆ›å»º Private CA + ç§æœ‰è¯ä¹¦ï¼Œå¹¶é…ç½®ç³»ç»Ÿä¿¡ä»»é“¾</td></tr><tr><td>ğŸŒ å¤šåŒºåŸŸåº”ç”¨éƒ¨ç½²</td><td>åœ¨æ¯ä¸ª AWS Region å†…å•ç‹¬ç­¾å‘è¯ä¹¦ï¼Œ<strong>ä¸æ”¯æŒè·¨åŒºåŸŸå¤åˆ¶æˆ–å¤ç”¨</strong></td></tr></tbody></table><hr><h4 id="CloudHSM"><a href="#CloudHSM" class="headerlink" title="CloudHSM"></a>CloudHSM</h4><ul><li><p>CloudHSM æ˜¯ AWS æä¾›çš„ ä¸“å±ç¡¬ä»¶åŠ å¯†æ¨¡å—æœåŠ¡ï¼ˆHSM &#x3D; Hardware Security Moduleï¼‰ï¼Œé€‚ç”¨äºå¯¹å¯†é’¥æœ‰é«˜åº¦æ§åˆ¶è¦æ±‚çš„åœºæ™¯</p></li><li><p>CloudHSM ç‰¹æ€§æ¦‚è§ˆ</p><ul><li>ğŸ’¡ ä¸“å±ç¡¬ä»¶å®ä¾‹ï¼ˆHSMï¼‰ï¼šæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„ç‰©ç†è®¾å¤‡</li><li>ğŸ”‘ å¯†é’¥å…¨æƒç®¡ç†ï¼šåªæœ‰ä½ æ‹¥æœ‰å¯†é’¥æ§åˆ¶æƒï¼ŒAWS æ— æ³•è®¿é—®</li><li>ğŸ“œ åˆè§„ä¼˜åŠ¿ï¼šé€šè¿‡ FIPS 140-2 Level 3 å®‰å…¨è®¤è¯</li><li>ğŸ” æ”¯æŒåŠ è§£å¯†ç®—æ³•ï¼šå¯¹ç§°ï¼ˆAESï¼‰ã€éå¯¹ç§°ï¼ˆRSAã€ECCï¼‰ã€TLS è¯ä¹¦ç®¡ç†ç­‰</li><li>ğŸ§© é›†æˆæ”¯æŒï¼šå¦‚ Redshift å¯ä½¿ç”¨ CloudHSM è¿›è¡Œæ•°æ®åº“åŠ å¯†å’Œå¯†é’¥ç®¡ç†ï¼ˆSSE-C åœºæ™¯æ¨èï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img509405.png"></p><p>KMS vs. CloudHSM é€‰æ‹©å»ºè®®</p><table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®é€‰æ‹©</th></tr></thead><tbody><tr><td>âœ… ä¸€èˆ¬åŠ å¯†éœ€æ±‚ï¼Œä½¿ç”¨ AWS æœåŠ¡é›†æˆ</td><td>AWS KMSï¼ˆæ‰˜ç®¡å¼ + æ˜“ç”¨ï¼‰</td></tr><tr><td>ğŸ” é«˜åˆè§„åœºæ™¯ï¼ˆå¦‚æ”¿åºœã€é‡‘èã€åŒ»ç–—ï¼‰</td><td>AWS CloudHSMï¼ˆä¸“å±ç¡¬ä»¶ + ç”¨æˆ·æ§å¯†é’¥ï¼‰</td></tr></tbody></table><hr><h4 id="S3-Security"><a href="#S3-Security" class="headerlink" title="S3 Security"></a>S3 Security</h4><ul><li>S3 æä¾›å¤šç§å¯¹è±¡åŠ å¯†æ–¹å¼ï¼Œç¡®ä¿æ•°æ®é™æ€åŠ å¯†ï¼ˆencryption at restï¼‰ï¼Œé€‚ç”¨äºä¸åŒçš„å¯†é’¥ç®¡ç†éœ€æ±‚</li><li>S3 æä¾› HTTP ä¸ HTTPS ä¸¤ç§è®¿é—®æ–¹å¼ï¼Œå»ºè®®å§‹ç»ˆä½¿ç”¨ åŠ å¯†ä¼ è¾“ï¼ˆHTTPSï¼‰ æ¥ä¿æŠ¤æ•°æ®åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨</li></ul><table><thead><tr><th>åŠ å¯†æ–¹å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸŸ£ SSE-S3</td><td>- ä½¿ç”¨ AWS è‡ªä¸»ç®¡ç†çš„å¯†é’¥ï¼ˆAES-256ï¼‰<br>- å®Œå…¨æ‰˜ç®¡ã€é›¶é…ç½®</td></tr><tr><td>ğŸŸ¡ SSE-KMS</td><td>- ä½¿ç”¨ AWS KMS ç®¡ç†å¯†é’¥<br>- æ”¯æŒè®¿é—®æ§åˆ¶ä¸ CloudTrail å®¡è®¡æ—¥å¿—</td></tr><tr><td>ğŸ”’ SSE-C</td><td>- è‡ªå®šä¹‰å®¢æˆ·æä¾›å¯†é’¥ï¼ˆClient-Provided Keysï¼‰<br>- S3 ä¸ä¿å­˜å¯†é’¥ï¼Œä»…ä¸´æ—¶ä½¿ç”¨</td></tr><tr><td>ğŸ’» Client-Side</td><td>- åŠ å¯†åœ¨å®¢æˆ·ç«¯å®Œæˆåå†ä¸Šä¼ åˆ° S3<br>- å®¢æˆ·ç«¯è´Ÿè´£å¯†é’¥ç”Ÿæˆã€åŠ å¯†ä¸è§£å¯†é€»è¾‘</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img509432.png"></p><ul><li>Events in S3 Buckets<ul><li>S3 æ”¯æŒå¤šç§äº‹ä»¶ä¸æ—¥å¿—æœºåˆ¶ï¼Œç”¨äºè¿½è¸ªå¯¹è±¡è®¿é—®ã€å˜æ›´ä¸å®‰å…¨çŠ¶æ€</li></ul></li></ul><table><thead><tr><th>ç›®çš„</th><th>å»ºè®®ä½¿ç”¨æœºåˆ¶</th></tr></thead><tbody><tr><td>è·å–å®Œæ•´è®¿é—®æ—¥å¿—</td><td>S3 Access Logs</td></tr><tr><td>å®æ—¶è§¦å‘å‡½æ•°&#x2F;æ¶ˆæ¯</td><td>S3 Event Notifications</td></tr><tr><td>å¯¹æ¥è·¨æœåŠ¡äº‹ä»¶å¤„ç†</td><td>CloudTrail + EventBridge</td></tr><tr><td>æ£€æŸ¥æ¡¶æƒé™æ˜¯å¦åˆè§„</td><td>Trusted Advisor</td></tr></tbody></table><ul><li>S3 Security å®‰å…¨æ§åˆ¶æ–¹å¼<ul><li>S3 æä¾›ä¸¤ç§ä¸»è¦çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼šåŸºäºç”¨æˆ· ä¸ åŸºäºèµ„æºï¼Œå¯çµæ´»æ­é…ä½¿ç”¨ä»¥å®ç°ç²¾ç»†æƒé™æ§åˆ¶</li></ul></li></ul><p>ğŸ‘¤ User-basedï¼ˆåŸºäºç”¨æˆ·ï¼‰</p><table><thead><tr><th>æ§åˆ¶æ–¹å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ” IAM Policy</td><td>åœ¨ IAM æ§åˆ¶å°ä¸­é…ç½®ï¼Œå®šä¹‰ç‰¹å®šç”¨æˆ·å¯æ‰§è¡Œå“ªäº› S3 API æ“ä½œï¼ˆå¦‚ GetObjectã€PutObjectï¼‰</td></tr></tbody></table><p>ğŸ“¦ Resource-basedï¼ˆåŸºäºèµ„æºï¼‰</p><table><thead><tr><th>æ§åˆ¶æ–¹å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ“œ Bucket Policy</td><td>åœ¨ S3 æ§åˆ¶å°ä¸­ä¸º Bucket è®¾ç½®çš„ç­–ç•¥ï¼Œæ”¯æŒè·¨è´¦æˆ·è®¿é—®æ§åˆ¶</td></tr><tr><td>ğŸ§¾ Object ACL</td><td>ç‰©ä»¶çº§æƒé™æ§åˆ¶ï¼Œç²’åº¦æ›´ç»†ï¼ˆå¯æ§åˆ¶å•ä¸ªå¯¹è±¡çš„è¯»&#x2F;å†™æƒé™ï¼‰</td></tr><tr><td>ğŸ“¦ Bucket ACL</td><td>é’ˆå¯¹æ•´ä¸ªæ¡¶çš„è®¿é—®æ§åˆ¶ï¼Œä¸å¸¸ç”¨ï¼ŒåŠŸèƒ½å·²è¢« Bucket Policy æ›¿ä»£ä¸ºä¸»</td></tr></tbody></table><ul><li>S3 Bucket Policies<ul><li>S3 Bucket Policy æ˜¯ä¸€ç§ èµ„æºçº§åˆ«çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œç”¨äºé›†ä¸­å®šä¹‰æ•´æ¡¶å¯¹è±¡çš„æƒé™ç­–ç•¥</li><li>æˆäºˆå…¬å…±è®¿é—®æƒé™ï¼ˆç”¨äºé™æ€ç½‘ç«™æ‰˜ç®¡æˆ–å…¬å¼€èµ„æºï¼‰</li><li>å¼ºåˆ¶ä¸Šä¼ å¯¹è±¡æ—¶åŠ å¯†ï¼ˆé€šè¿‡æ¡ä»¶é™åˆ¶åŠ å¯†æ–¹å¼ï¼‰</li><li>è·¨è´¦æˆ·æˆæƒè®¿é—®ï¼ˆæˆäºˆå…¶ä»– AWS è´¦æˆ·è®¿é—®æƒé™ï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img222722.png"></p><ul><li>S3 Pre-signed URLs<ul><li>é¢„ç­¾å URL å…è®¸ä¸´æ—¶æˆæƒç”¨æˆ·è®¿é—® S3 ä¸­çš„å¯¹è±¡ï¼Œå¸¸ç”¨äº ä¸´æ—¶ä¸‹è½½ æˆ– å—æ§ä¸Šä¼  åœºæ™¯</li></ul></li></ul><p>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</p><table><thead><tr><th>åœºæ™¯æè¿°</th><th>ç¤ºä¾‹æ•ˆæœ</th></tr></thead><tbody><tr><td>ğŸ¬ ä»…ç™»å½•ç”¨æˆ·å¯ä¸‹è½½ä»˜è´¹è§†é¢‘</td><td>ç”Ÿæˆ GET ç±»å‹çš„é¢„ç­¾å URLï¼Œä¾›ç™»å½•ç”¨æˆ·ä½¿ç”¨</td></tr><tr><td>ğŸ“¥ åŠ¨æ€æˆæƒç”¨æˆ·ä¸‹è½½æ–‡ä»¶</td><td>æ ¹æ®ç”¨æˆ·èº«ä»½åŠ¨æ€ç”Ÿæˆ GET URLï¼Œå®ç°çµæ´»æ–‡ä»¶è®¿é—®æ§åˆ¶</td></tr><tr><td>ğŸ“¤ ä¸´æ—¶ä¸Šä¼ æ–‡ä»¶è‡³æŒ‡å®šä½ç½®ï¼ˆå¦‚å¤´åƒã€PDFï¼‰</td><td>ä¸ºæŸè·¯å¾„ç”Ÿæˆ PUT ç±»å‹çš„é¢„ç­¾å URLï¼Œä»…ä¸´æ—¶å¼€æ”¾ä¸Šä¼ æƒé™</td></tr></tbody></table><ul><li>S3 Object Lock &amp; Glacier Vault Lock<ul><li>è¿™ä¸¤ç§é”å®šæœºåˆ¶éƒ½é‡‡ç”¨ WORMï¼ˆWrite Once Read Manyï¼‰æ¨¡å‹ï¼Œä¸»è¦ç”¨äº åˆè§„å­˜å‚¨ ä¸ é˜²ç¯¡æ”¹æ•°æ®ä¿æŠ¤</li></ul></li></ul><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæœºåˆ¶</th></tr></thead><tbody><tr><td>æ™®é€šå¯¹è±¡é˜²åˆ ï¼ˆå«ç‰ˆæœ¬æ§åˆ¶ï¼‰</td><td>S3 Object Lock</td></tr><tr><td>å½’æ¡£æ•°æ®é•¿æœŸä¸å¯æ›´æ”¹ï¼ˆå¦‚äº¤æ˜“è®°å½•ï¼‰</td><td>Glacier Vault Lock</td></tr><tr><td>åˆè§„è¦æ±‚ + é˜²ç¯¡æ”¹ + æ°¸ä¹…ä¿å­˜éœ€æ±‚</td><td>å¯ç»“åˆ S3 Object Lock + Glacier Vault Lock åŒå±‚ä¿æŠ¤</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img510114.png"></p><hr><h4 id="S3-â€“-Access-Points"><a href="#S3-â€“-Access-Points" class="headerlink" title="S3 â€“ Access Points"></a>S3 â€“ Access Points</h4><ul><li>S3 Access Points æä¾›ä¸€ç§æ›´çµæ´»ã€å®‰å…¨çš„æ–¹å¼æ¥ç®¡ç†ä¸åŒç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºå¯¹åŒä¸€ Bucket çš„è®¿é—®æƒé™ï¼ŒæŒ‰è§’è‰²æˆ–ä¸šåŠ¡çº¿åˆ’åˆ†æƒé™ï¼Œç®€åŒ– Bucket Policy ç®¡ç†å¤æ‚åº¦</li></ul><table><thead><tr><th>ç”¨æˆ·è§’è‰²</th><th>è®¿é—®å‰ç¼€</th><th>Access Point åç§°</th><th>ç­–ç•¥è¯´æ˜</th></tr></thead><tbody><tr><td>Users (Finance)</td><td>&#x2F;finance&#x2F;*</td><td>FinanceAccessPoint</td><td>å…è®¸è¯»å†™ &#x2F;finance åŒºåŸŸ</td></tr><tr><td>Users (Sales)</td><td>&#x2F;sales&#x2F;*</td><td>SalesAccessPoint</td><td>å…è®¸è¯»å†™ &#x2F;sales åŒºåŸŸ</td></tr><tr><td>Users (Analytics)</td><td>æ‰€æœ‰è·¯å¾„ï¼ˆåªè¯»ï¼‰</td><td>AnalyticsAccessPoint</td><td>å¯¹æ•´ä¸ª Bucket åªè¯»</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img510115.png"></p><ul><li>S3 â€“ Access Pointsï¼ˆVPC Originï¼‰<ul><li>S3 Access Points å¯é…ç½®ä¸º ä»…å…è®¸æ¥è‡ªç‰¹å®š VPC å†…éƒ¨çš„è®¿é—®ï¼Œæé«˜å®‰å…¨æ€§ä¸éš”ç¦»æ€§ï¼Œé€‚åˆç§æœ‰ç½‘ç»œå†…çš„ä¼ä¸šåº”ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img510117.png"></p><ul><li>S3 â€“ Multi-Region Access Pointsï¼ˆMRAPï¼‰<ul><li>Multi-Region Access Pointsï¼ˆMRAPï¼‰æä¾›ä¸€ä¸ª å…¨çƒç»Ÿä¸€çš„è®¿é—®å…¥å£ï¼Œè‡ªåŠ¨å°†è¯·æ±‚è·¯ç”±åˆ°å¤šä¸ª AWS åŒºåŸŸä¸­çš„ S3 å­˜å‚¨æ¡¶ï¼Œå®ç°è·¨åŒºåŸŸé«˜å¯ç”¨ã€ä½å»¶è¿Ÿè®¿é—®</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img510118.png"></p><hr><h4 id="S3-Object-Lambda"><a href="#S3-Object-Lambda" class="headerlink" title="S3 Object Lambda"></a>S3 Object Lambda</h4><ul><li>S3 Object Lambda å…è®¸åœ¨å¯¹è±¡è¢«è¯»å–å‰ï¼Œé€šè¿‡ AWS Lambda å®æ—¶å¤„ç†å¯¹è±¡å†…å®¹ï¼Œæ— éœ€ä¿®æ”¹åŸå§‹ S3 å¯¹è±¡</li></ul><table><thead><tr><th>ä½¿ç”¨åœºæ™¯æè¿°</th><th>ç¤ºä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ”’ å±è”½æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ PIIï¼‰</td><td>åœ¨åˆ†ææˆ–æµ‹è¯•ç¯å¢ƒä¸­è‡ªåŠ¨è„±æ•æ•°æ®ï¼ˆå¦‚éšè—é‚®ç®±ã€æ‰‹æœºå·ï¼‰</td></tr><tr><td>ğŸ”„ è½¬æ¢æ•°æ®æ ¼å¼</td><td>å°†å¯¹è±¡ä» XML è½¬æ¢ä¸º JSONï¼Œæå‡å…¼å®¹æ€§</td></tr><tr><td>ğŸ–¼ï¸ å®æ—¶å¤„ç†å›¾ç‰‡</td><td>æ ¹æ®è°ƒç”¨ç”¨æˆ·ä¿¡æ¯åŠ¨æ€ç¼©æ”¾å›¾ç‰‡æˆ–æ·»åŠ æ°´å°</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511445.png"></p><hr><h4 id="DDoS-Protection-on-AWS"><a href="#DDoS-Protection-on-AWS" class="headerlink" title="DDoS Protection on AWS"></a>DDoS Protection on AWS</h4><ul><li>DDoS Protection on AWS<ul><li>AWS æä¾›å¤šå±‚æ¬¡çš„é˜²æŠ¤æ–¹æ¡ˆï¼Œç»“åˆç½‘ç»œæ¶æ„ä¸æœåŠ¡é…ç½®ï¼Œå¯æœ‰æ•ˆç¼“è§£åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDoSï¼‰æ”»å‡»å¸¦æ¥çš„å½±å“</li></ul></li></ul><table><thead><tr><th>æœåŠ¡&#x2F;æœºåˆ¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ›¡ï¸ AWS Shield Standard</td><td>é»˜è®¤å¯ç”¨ï¼Œå…è´¹ä¸ºæ‰€æœ‰ AWS ç”¨æˆ·æä¾›åŸºç¡€ DDoS é˜²æŠ¤ï¼ˆL3&#x2F;L4 æ”»å‡»ï¼‰</td></tr><tr><td>ğŸ›¡ï¸ AWS Shield Advanced</td><td>ä»˜è´¹æœåŠ¡ï¼Œæä¾› 24&#x2F;7 SOC æ”¯æŒã€æ”»å‡»æ£€æµ‹ã€æµé‡åˆ†æã€è´¹ç”¨ä¿æŠ¤ç­‰é«˜çº§åŠŸèƒ½</td></tr><tr><td>ğŸŒ AWS WAF</td><td>åº”ç”¨å±‚é˜²æŠ¤ï¼ˆL7ï¼‰ï¼Œå¯è‡ªå®šä¹‰è§„åˆ™è¿‡æ»¤æ¶æ„è¯·æ±‚ï¼ˆå¦‚ IP é»‘åå•ã€SQL æ³¨å…¥ç­‰ï¼‰</td></tr><tr><td>ğŸš€ CloudFront &amp; Route 53</td><td>å€ŸåŠ© AWS å…¨çƒè¾¹ç¼˜ç½‘ç»œè¿›è¡Œæµé‡åˆ†å‘ï¼Œç»“åˆ AWS Shield å¯å®ç°è¾¹ç¼˜å±‚ DDoS ç¼“è§£</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511449.png"></p><p>é€‰æ‹©å»ºè®®æ€»ç»“</p><table><thead><tr><th>éœ€æ±‚åœºæ™¯</th><th>æ¨èæœºåˆ¶</th></tr></thead><tbody><tr><td>åŸºæœ¬é˜²æŠ¤ï¼ˆæ— éœ€é¢å¤–é…ç½®ï¼‰</td><td>AWS Shield Standard</td></tr><tr><td>é¢å¯¹ä¸šåŠ¡å…³é”®ç³»ç»Ÿ&#x2F;é«˜é£é™©ç›®æ ‡</td><td>AWS Shield Advanced + WAF + CDN</td></tr><tr><td>Web åº”ç”¨å±‚çº§è®¿é—®æ§åˆ¶</td><td>AWS WAFï¼ˆç»“åˆ CloudFront æ•ˆæœæ›´ä½³ï¼‰</td></tr></tbody></table><hr><h4 id="AWS-Shield"><a href="#AWS-Shield" class="headerlink" title="AWS Shield"></a>AWS Shield</h4><ul><li>AWS Shield æ˜¯ AWS æä¾›çš„ åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ï¼ˆDDoSï¼‰é˜²æŠ¤æœåŠ¡ï¼Œåˆ†ä¸º Standard ä¸ Advanced ä¸¤ä¸ªç­‰çº§ï¼Œè¦†ç›– L3&#x2F;L4 å±‚çš„æ”»å‡»é˜²æŠ¤</li></ul><p>ğŸ›¡ï¸ Shield Standard vs Advanced ç®€è¦å¯¹æ¯”</p><table><thead><tr><th>ç‰¹æ€§</th><th>Shield Standard</th><th>Shield Advanced</th></tr></thead><tbody><tr><td>è´¹ç”¨</td><td>å…è´¹</td><td>$3,000&#x2F;æœˆ</td></tr><tr><td>æ”»å‡»ç±»å‹æ”¯æŒ</td><td>åŸºç¡€ç½‘ç»œæ”»å‡»ï¼ˆL3&#x2F;L4ï¼‰</td><td>å¤æ‚æ”»å‡»ï¼ˆå¦‚åº”ç”¨å±‚æ»¥ç”¨ã€çŠ¶æ€è€—å°½ç­‰ï¼‰</td></tr><tr><td>ä¿æŠ¤æœåŠ¡èŒƒå›´</td><td>æ‰€æœ‰ AWS å…¬ç½‘æœåŠ¡</td><td>é™å®šæœåŠ¡ï¼ˆEC2ã€ELBã€CloudFront ç­‰ï¼‰</td></tr><tr><td>DDoS å“åº”å›¢é˜Ÿæ”¯æŒ</td><td>âŒ æ— </td><td>âœ… æä¾› 24&#x2F;7 ä¸“å®¶æ”¯æŒ</td></tr><tr><td>è´¹ç”¨è±å…ä¿éšœ</td><td>âŒ æ— </td><td>âœ… æä¾›ï¼ˆéœ€ç¬¦åˆ AWS æ¡ä»¶ï¼‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511450.png"></p><hr><h4 id="AWS-WAF"><a href="#AWS-WAF" class="headerlink" title="AWS WAF"></a>AWS WAF</h4><ul><li>AWS WAF æ˜¯ä¸€æ¬¾ åº”ç”¨å±‚é˜²ç«å¢™ï¼ˆLayer 7ï¼‰ï¼Œç”¨äºä¿æŠ¤ Web åº”ç”¨å…å—å¸¸è§æ”»å‡»å¦‚ SQL æ³¨å…¥ã€XSSã€æ¶æ„è¯·æ±‚ç­‰</li><li>æ³¨æ„ï¼šWAF å¹¶é DDoS é˜²æŠ¤å·¥å…·ï¼Œä½†å¯é…åˆ Shield ä½¿ç”¨ä»¥æå‡æ•´ä½“é˜²æŠ¤èƒ½åŠ›</li></ul><table><thead><tr><th>éƒ¨ç½²ç›®æ ‡</th><th>æè¿°</th></tr></thead><tbody><tr><td>âš–ï¸ Application Load Balancer</td><td>åœ¨ ALB ä¸Šéƒ¨ç½²åŒºåŸŸæ€§è§„åˆ™ï¼Œç”¨äº EC2ã€ECSã€Lambda åç«¯</td></tr><tr><td>ğŸŒ CloudFront</td><td>åœ¨å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹ä¸Šæ‹¦æˆªæ”»å‡»ï¼ˆå…¨çƒç”Ÿæ•ˆï¼‰</td></tr><tr><td>ğŸ“¡ API Gateway</td><td>åœ¨ REST æˆ– HTTP API å‰éƒ¨ç½²è§„åˆ™ï¼ˆåŒºåŸŸçº§æˆ–è¾¹ç¼˜ï¼‰</td></tr><tr><td>ğŸ§  AppSync</td><td>ä¿æŠ¤ GraphQL æ¥å£ï¼Œé˜²æ­¢æ¶æ„æŸ¥è¯¢</td></tr><tr><td>ğŸ§± æ”¯æŒè‡ªå®šä¹‰æºç«™</td><td>å¦‚ Classic Load Balancerã€EC2ã€S3 ç½‘ç«™æ‰˜ç®¡ã€è‡ªå»ºåº”ç”¨ç­‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511455.png"></p><ul><li>Web ACLï¼ˆWeb Access Control Listï¼‰<ul><li>Web ACL æ˜¯ WAF çš„æ ¸å¿ƒé…ç½®å•å…ƒï¼Œç”±ä¸€ç»„è§„åˆ™ç»„æˆï¼Œæ§åˆ¶å“ªäº›è¯·æ±‚è¢«å…è®¸ã€é˜»æ­¢æˆ–è¿›ä¸€æ­¥æŒ‘æˆ˜</li></ul></li></ul><table><thead><tr><th>è§„åˆ™å†…å®¹ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ”¢ IP åœ°å€è¿‡æ»¤</td><td>åŒ…æ‹¬é»‘åå• &#x2F; ç™½åå•</td></tr><tr><td>ğŸ“„ HTTP å†…å®¹åŒ¹é…</td><td>å¯åŸºäº Headerã€Bodyã€URI è¿›è¡Œæ¨¡å¼åŒ¹é…</td></tr><tr><td>ğŸ” SQL Injection &#x2F; XSS æ£€æµ‹</td><td>AWS æä¾›å†…å»ºè§„åˆ™é›†å¯ç›´æ¥å¯ç”¨é˜²æŠ¤</td></tr><tr><td>ğŸŒ åœ°ç†ä½ç½®ï¼ˆGeo Matchï¼‰</td><td>æŒ‰å›½å®¶ &#x2F; åŒºåŸŸé™åˆ¶è®¿é—®</td></tr><tr><td>ğŸ” é€Ÿç‡é™åˆ¶ï¼ˆRate-basedï¼‰</td><td>é™åˆ¶åŒä¸€ IP çš„è¯·æ±‚é¢‘ç‡ï¼Œé˜²æ­¢çˆ¬è™«&#x2F;çˆ†ç ´</td></tr><tr><td>ğŸ“ è¯·æ±‚å¤§å°é™åˆ¶ï¼ˆSize Constraintï¼‰</td><td>é™åˆ¶ URIã€Headerã€Body çš„æœ€å¤§é•¿åº¦</td></tr></tbody></table><ul><li>AWS WAF â€“ Managed Rulesï¼ˆæ‰˜ç®¡è§„åˆ™é›†ï¼‰</li><li>AWS WAF æä¾›è¶…è¿‡ 190 æ¡ æ‰˜ç®¡è§„åˆ™ï¼ˆManaged Rulesï¼‰ï¼Œç”± AWS ä¸ AWS Marketplace åˆä½œä¼™ä¼´ç»´æŠ¤ï¼Œå¼€ç®±å³ç”¨ï¼Œç®€åŒ–é˜²æŠ¤é…ç½®</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511457.png"></p><ul><li>AWS WAF â€“ Web ACL Loggingï¼ˆæ—¥å¿—è®°å½•ï¼‰<ul><li>WAF æ”¯æŒå°† Web ACL çš„åŒ¹é…è®°å½•å¯¼å‡ºè‡³å¤šç§æ—¥å¿—ç³»ç»Ÿï¼Œç”¨äº å®‰å…¨å®¡è®¡ã€å¯è§†åŒ–åˆ†æå’Œåˆè§„ç•™æ¡£</li><li>CloudWatch Logs â†’ ç”¨äºå®æ—¶åˆ†æä¸å¯è§†åŒ–å‘Šè­¦ï¼ˆæ­é… Metric Filterï¼‰</li><li>S3 â†’ ä¾¿äºåˆè§„å®¡è®¡ã€å­˜å‚¨ä¸ Athena åˆ†æ</li><li>Firehose â†’ å®æ—¶æµå¤„ç†ã€é›†æˆç¬¬ä¸‰æ–¹ SIEM&#x2F;å¯è§‚æµ‹å¹³å°</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511459.png"></p><hr><h4 id="AWS-Firewall-Manager"><a href="#AWS-Firewall-Manager" class="headerlink" title="AWS Firewall Manager"></a>AWS Firewall Manager</h4><ul><li>AWS Firewall Manager æ˜¯ä¸€ä¸ªé›†ä¸­å¼å®‰å…¨ç­–ç•¥ç®¡ç†æœåŠ¡ï¼Œé€‚ç”¨äºå¤šè´¦æˆ·ç¯å¢ƒï¼ˆå¦‚ AWS Organizationsï¼‰ï¼Œå¯ç»Ÿä¸€ä¸‹å‘å¹¶è‡ªåŠ¨åº”ç”¨ç½‘ç»œå®‰å…¨è§„åˆ™</li></ul><table><thead><tr><th>éœ€æ±‚åœºæ™¯</th><th>å»ºè®®æ“ä½œ</th></tr></thead><tbody><tr><td>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è´¦æˆ·çš„ WAF &#x2F; Shield ç­–ç•¥</td><td>å¯ç”¨ Firewall Manager å¹¶åˆ›å»º WAF Policy</td></tr><tr><td>å®ç°è‡ªåŠ¨åŒ–åˆè§„ä¿éšœ</td><td>ç»“åˆ SCP + Firewall Manager + Config</td></tr><tr><td>é›†ä¸­æ§åˆ¶ EC2&#x2F;ALB å®‰å…¨ç»„é…ç½®</td><td>å¯ç”¨ Security Group Policy ç®¡ç†</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511541.png"></p><ul><li>WAF vs. Firewall Manager vs. Shield</li></ul><table><thead><tr><th>æœåŠ¡</th><th>ä½œç”¨èŒƒå›´</th></tr></thead><tbody><tr><td><strong>AWS WAF</strong></td><td>å®šä¹‰ Web ACL è§„åˆ™ï¼Œæä¾›èµ„æºçº§åˆ«çš„åº”ç”¨å±‚ï¼ˆLayer 7ï¼‰æ”»å‡»é˜²æŠ¤</td></tr><tr><td><strong>AWS Firewall Manager</strong></td><td>ç”¨äºè·¨è´¦æˆ·é›†ä¸­ç®¡ç† WAFã€Shieldã€Security Groupã€Network Firewall ç­–ç•¥</td></tr><tr><td><strong>AWS Shield</strong></td><td>é˜²å¾¡ DDoS æ”»å‡»ï¼ŒåŒ…å«å…è´¹ç‰ˆï¼ˆStandardï¼‰å’Œé«˜çº§ç‰ˆï¼ˆAdvancedï¼‰</td></tr></tbody></table><hr><h4 id="AWS-Inspecctor"><a href="#AWS-Inspecctor" class="headerlink" title="AWS Inspecctor"></a>AWS Inspecctor</h4><ul><li>Amazon Inspector æ˜¯ä¸€é¡¹è‡ªåŠ¨åŒ–å®‰å…¨è¯„ä¼°æœåŠ¡ï¼Œç”¨äºæ£€æµ‹ AWS ä¸Šèµ„æºï¼ˆå¦‚ EC2ã€ECRã€Lambdaï¼‰ä¸­å­˜åœ¨çš„æ¼æ´ä¸é…ç½®é£é™©ï¼Œå¹¶é›†æˆæŠ¥å‘Šå’Œå‘Šè­¦æµç¨‹</li></ul><table><thead><tr><th>åœºæ™¯æè¿°</th><th>å»ºè®®é…ç½®</th></tr></thead><tbody><tr><td>éœ€è¦å®šæœŸè¯„ä¼° EC2 ä¸»æœºç³»ç»Ÿä¸ç½‘ç»œé£é™©</td><td>å¯ç”¨ Amazon Inspector + å®‰è£…&#x2F;æ¿€æ´» SSM Agent</td></tr><tr><td>å®¹å™¨é•œåƒå®‰å…¨æ²»ç†</td><td>å¯ç”¨ ECR æ¨é€é•œåƒæ‰«æï¼Œé…åˆ Inspector è‡ªåŠ¨æ£€æµ‹ä¾èµ–æ¼æ´</td></tr><tr><td>ä¿éšœ Serverless å‡½æ•°è¿è¡Œæ—¶å®‰å…¨</td><td>å¯ç”¨å¯¹ Lambda å‡½æ•°çš„ Inspector æ‰«æ</td></tr><tr><td>å¤šå·¥å…·é›†æˆä¸ç»Ÿä¸€ç›‘æ§</td><td>å°† Inspector Findings å‘é€åˆ° Security Hub &#x2F; EventBridge</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511545.png"></p><hr><h4 id="AWS-Config"><a href="#AWS-Config" class="headerlink" title="AWS Config"></a>AWS Config</h4><ul><li>AWS Config æ˜¯ä¸€é¡¹èµ„æºå®¡è®¡ä¸åˆè§„æ€§æ£€æŸ¥æœåŠ¡ï¼Œèƒ½æŒç»­è®°å½•å’Œè¿½è¸ª AWS èµ„æºçš„é…ç½®å˜æ›´ï¼Œå¸®åŠ©æ»¡è¶³å®¡è®¡ã€åˆè§„ä¸è¿è¥åˆ†æéœ€æ±‚</li></ul><table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®æ“ä½œ</th></tr></thead><tbody><tr><td>æŒç»­åˆè§„å®¡è®¡ä¸èµ„æºè¿½è¸ª</td><td>å¯ç”¨ AWS Config + å…³é”®è§„åˆ™é›†</td></tr><tr><td>å¤šè´¦æˆ·ç¯å¢ƒç»Ÿä¸€åˆè§„è§†å›¾</td><td>ä½¿ç”¨ Config Aggregator èšåˆæ‰€æœ‰è´¦æˆ·åˆè§„çŠ¶æ€</td></tr><tr><td>å®šåˆ¶ä¼ä¸šè§„åˆ™</td><td>é…ç½®è‡ªå®šä¹‰ Lambda è§„åˆ™ï¼Œä¸ AWS Config é›†æˆ</td></tr><tr><td>ç»“åˆå“åº”æœºåˆ¶</td><td>é…ç½® SNS + EventBridge å®ç°å®æ—¶å“åº”æˆ–è‡ªåŠ¨ä¿®å¤æµç¨‹</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511547.png"></p><ul><li>AWS Config Rules<ul><li>AWS Config Rules ç”¨äºè‡ªåŠ¨æ£€æŸ¥èµ„æºæ˜¯å¦ç¬¦åˆæœŸæœ›é…ç½®ï¼Œå¹¶å¯ä¸ EventBridge + Lambda &#x2F; SSM é…åˆå®ç°è‡ªåŠ¨ä¿®å¤</li></ul></li></ul><table><thead><tr><th>ç”¨ä¾‹æè¿°</th><th>è§„åˆ™ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ç¡®ä¿æ‰€æœ‰ EBS å·ç±»å‹ä¸º gp2</td><td>è‡ªå®šä¹‰è§„åˆ™ï¼šæ£€æŸ¥ EBS ç±»å‹æ˜¯å¦ä¸º gp2</td></tr><tr><td>æ£€æŸ¥æ‰€æœ‰ EC2 å®ä¾‹æ˜¯å¦ä¸º t2.micro</td><td>è‡ªå®šä¹‰è§„åˆ™ï¼šå®ä¾‹ç±»å‹ä¸º t2.micro æ‰åˆè§„</td></tr><tr><td>æ£€æŸ¥å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾ 0.0.0.0&#x2F;0 çš„ SSH ç«¯å£</td><td>ä½¿ç”¨æ‰˜ç®¡è§„åˆ™ <code>restricted-ssh</code></td></tr><tr><td>S3 Bucket æ˜¯å¦å…³é—­å…¬æœ‰è®¿é—®</td><td>ä½¿ç”¨æ‰˜ç®¡è§„åˆ™ <code>s3-bucket-public-read-prohibited</code> ç­‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511548.png"></p><hr><h4 id="AWS-Managed-Logs"><a href="#AWS-Managed-Logs" class="headerlink" title="AWS Managed Logs"></a>AWS Managed Logs</h4><ul><li>AWS æä¾›å¤šç§æœåŠ¡çš„ æ‰˜ç®¡æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯å°†å…³é”®æ“ä½œã€æµé‡æˆ–è®¿é—®è¡Œä¸ºè®°å½•åˆ° S3ã€CloudWatch Logs æˆ– Kinesis ä¸­ï¼Œä¾›åç»­å®¡è®¡ã€ç›‘æ§ä¸åˆ†æä½¿ç”¨</li></ul><table><thead><tr><th>ç›®æ ‡åœºæ™¯</th><th>å»ºè®®é…ç½®</th></tr></thead><tbody><tr><td>å®¡è®¡è´¦æˆ· API æ“ä½œ</td><td>å¯ç”¨ CloudTrailï¼Œå†™å…¥ S3 + CloudWatch Logs</td></tr><tr><td>åˆ†æç½‘ç»œæµé‡ä¸å®‰å…¨è¡Œä¸º</td><td>å¯ç”¨ VPC Flow Logsï¼Œç»“åˆ CloudWatch Logs æˆ– Athena ä½¿ç”¨</td></tr><tr><td>å›æº¯å­˜å‚¨è®¿é—®è¡Œä¸º</td><td>å¯ç”¨ S3 æˆ– CloudFront Access Logs</td></tr><tr><td>åˆè§„ç›‘ç®¡ &#x2F; é…ç½®å˜æ›´æº¯æº</td><td>å¯ç”¨ AWS Config å¹¶å°†æ—¥å¿—å¯¼å‡ºè‡³ S3</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511550.png"></p><hr><h4 id="AWS-GuardDuty"><a href="#AWS-GuardDuty" class="headerlink" title="AWS GuardDuty"></a>AWS GuardDuty</h4><ul><li>Amazon GuardDuty æ˜¯ä¸€é¡¹åŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½å¨èƒæ£€æµ‹æœåŠ¡ï¼Œå¯è¯†åˆ« AWS ç¯å¢ƒä¸­çš„å¼‚å¸¸è¡Œä¸ºã€æ¶æ„æ´»åŠ¨ä¸æ½œåœ¨æ”»å‡»ï¼Œæ— éœ€å®‰è£…ä»£ç†æˆ–ä¿®æ”¹èµ„æºé…ç½®</li></ul><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ“ä½œ</th></tr></thead><tbody><tr><td>å¿«é€Ÿå¯ç”¨è´¦æˆ·çº§å®‰å…¨ç›‘æ§</td><td>å¯ç”¨ GuardDutyï¼Œé»˜è®¤å¼€å¯ CloudTrailã€VPCã€DNS åˆ†æ</td></tr><tr><td>è‡ªåŠ¨åŒ–å®‰å…¨å“åº”</td><td>é…ç½® EventBridge + Lambda å¤„ç† GuardDuty Findings</td></tr><tr><td>å¤šè´¦æˆ·ç»Ÿä¸€æ£€æµ‹</td><td>é…ç½® GuardDuty ç®¡ç†è´¦æˆ·ï¼ˆMaster-Detector æ¶æ„ï¼‰</td></tr><tr><td>é«˜é£é™©èµ„æºï¼ˆå¦‚ S3ã€Lambdaï¼‰ç›‘æ§</td><td>å¯ç”¨å¯é€‰æ•°æ®æºå¦‚ S3 Data Eventsã€Lambda è¿è¡Œç›‘æ§ç­‰</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511555.png"></p><p>âš ï¸ æ£€æµ‹ç¤ºä¾‹ï¼ˆFindingsï¼‰</p><table><thead><tr><th>å¨èƒç±»å‹</th><th>ç¤ºä¾‹æè¿°</th></tr></thead><tbody><tr><td>ğŸ’° åŠ å¯†è´§å¸æŒ–çŸ¿æ”»å‡»</td><td>æ£€æµ‹ EC2 å®ä¾‹ç–‘ä¼¼è¢«åŠ«æŒç”¨äºæŒ–çŸ¿ï¼ˆæœ‰ä¸“ç”¨ Finding ç±»å‹ï¼‰</td></tr><tr><td>ğŸ”“ è¢«ç›—å‡­è¯æ“ä½œ</td><td>ä½¿ç”¨å·²æ³„éœ²çš„ API å¯†é’¥è¿›è¡Œéå¸¸è§„æ“ä½œ</td></tr><tr><td>ğŸ”„ åå¸¸æµé‡æ¨¡å¼</td><td>æŸå®ä¾‹çŸ­æ—¶é—´å†…è®¿é—®å¤§é‡å¤–éƒ¨ IP æˆ–å‘é€å¼‚å¸¸ DNS æŸ¥è¯¢</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511558.png"></p><p>ğŸ“¥ è¾“å…¥æ—¥å¿—æº</p><table><thead><tr><th>æ¥æºç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ“‹ CloudTrail Events</td><td>æ£€æµ‹å¼‚å¸¸ API è°ƒç”¨ã€æœªæˆæƒæ“ä½œï¼ˆå¦‚ createTrailã€createVpcã€updateSecurityGroupï¼‰</td></tr><tr><td>ğŸª£ CloudTrail S3 Data Events</td><td>æ£€æµ‹å¼‚å¸¸è®¿é—®è¡Œä¸ºï¼ˆå¦‚ getObjectã€listObjectsã€deleteObjectï¼‰</td></tr><tr><td>ğŸŒ VPC Flow Logs</td><td>åˆ†ææµé‡æ¨¡å¼ï¼ˆå¦‚ç«¯å£æ‰«æã€å¯ç–‘å†…ç½‘é€šä¿¡ã€é€šä¿¡å¼‚å¸¸ IPï¼‰</td></tr><tr><td>ğŸŒ DNS æŸ¥è¯¢æ—¥å¿—</td><td>æ£€æµ‹åŸŸåæ»¥ç”¨ï¼Œå¦‚ EC2 é€šè¿‡ DNS éšè”½ä¼ è¾“æ•°æ®ï¼ˆæ•°æ®æ¸—æ¼ï¼‰</td></tr><tr><td>ğŸ§ª å¯é€‰æ•°æ®æº</td><td>åŒ…æ‹¬ EKS å®¡è®¡æ—¥å¿—ã€RDSã€Auroraã€EBS å·è¡Œä¸ºã€Lambdaã€S3 æ•°æ®äº‹ä»¶ç­‰</td></tr></tbody></table><ul><li>GuardDuty â€“ Delegated Administratorï¼ˆå§”æ´¾ç®¡ç†å‘˜ï¼‰<ul><li>åœ¨å¤šè´¦æˆ·æ¶æ„ä¸‹ï¼Œå¯é€šè¿‡ å§”æ´¾ç®¡ç†å‘˜ï¼ˆDelegated Administratorï¼‰ é›†ä¸­ç®¡ç† Amazon GuardDutyï¼Œé€‚ç”¨äº AWS Organizations</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511559.png"></p><hr><h4 id="IAM-Conditions"><a href="#IAM-Conditions" class="headerlink" title="IAM Conditions"></a>IAM Conditions</h4><ul><li>IAM æ”¯æŒé€šè¿‡æ¡ä»¶ï¼ˆConditionï¼‰é™åˆ¶ç­–ç•¥ä½œç”¨èŒƒå›´ï¼Œæå‡æƒé™æ§åˆ¶çš„çµæ´»æ€§ä¸ç²¾ç»†åº¦</li></ul><p>âœ… å¸¸è§ IAM æ¡ä»¶é”®ï¼ˆCondition Keysï¼‰</p><table><thead><tr><th>æ¡ä»¶é”®</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>aws:SourceIp</code></td><td>é™åˆ¶ API è¯·æ±‚åªèƒ½ä»æŒ‡å®š IP èŒƒå›´å‘èµ·</td></tr><tr><td><code>aws:RequestedRegion</code></td><td>é™åˆ¶ API è¯·æ±‚åªèƒ½é’ˆå¯¹ç‰¹å®š AWS åŒºåŸŸ</td></tr><tr><td><code>aws:MultiFactorAuthPresent</code></td><td>å¼ºåˆ¶è¦æ±‚è¯·æ±‚è€…å¯ç”¨å¹¶ä½¿ç”¨ MFAï¼ˆå¤šé‡èº«ä»½éªŒè¯ï¼‰</td></tr><tr><td><code>ec2:ResourceTag</code></td><td>é™åˆ¶æ“ä½œä»…é€‚ç”¨äºåŒ…å«æŒ‡å®šæ ‡ç­¾çš„ EC2 èµ„æºï¼ˆä¾‹å¦‚å¼ºåˆ¶æ‰“æ ‡ç­¾ï¼‰</td></tr></tbody></table><ul><li><code>aws:PrincipalOrgID</code> æ˜¯ä¸€ä¸ªå¯ç”¨äº èµ„æºç­–ç•¥ï¼ˆResource Policiesï¼‰ çš„æ¡ä»¶ï¼Œç”¨äºé™åˆ¶è®¿é—®è€…å¿…é¡»å±äºæŸä¸ª AWS Organizationï¼Œå®ç°è·¨è´¦æˆ·ä½†å—ç»„ç»‡è¾¹ç•Œæ§åˆ¶çš„å®‰å…¨æˆæƒ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img213524.png"></p><hr><h4 id="IAM-for-S3"><a href="#IAM-for-S3" class="headerlink" title="IAM for S3"></a>IAM for S3</h4><ul><li>é’ˆå¯¹ S3ï¼Œæƒé™ç²’åº¦åˆ’åˆ†ä¸º Bucket çº§åˆ« ä¸ Object çº§åˆ«</li></ul><p>ğŸª£ S3 æ“ä½œæƒé™ä¸ ARN ç¤ºä¾‹</p><table><thead><tr><th>æ“ä½œæƒé™</th><th>ARN ç¤ºä¾‹</th><th>æƒé™è¯´æ˜</th></tr></thead><tbody><tr><td><code>s3:ListBucket</code></td><td><code>arn:aws:s3:::my-bucket</code></td><td>âœ… Bucket çº§æƒé™</td></tr><tr><td><code>s3:GetObject</code><br><code>s3:PutObject</code><br><code>s3:DeleteObject</code></td><td><code>arn:aws:s3:::my-bucket/*</code></td><td>âœ… Object çº§æƒé™</td></tr></tbody></table><hr><h4 id="AWS-Security-Hub"><a href="#AWS-Security-Hub" class="headerlink" title="AWS Security Hub"></a>AWS Security Hub</h4><ul><li>AWS Security Hub æ˜¯ä¸€ä¸ªé›†ä¸­åŒ–çš„å®‰å…¨ä¸åˆè§„çŠ¶æ€å¯è§†åŒ–å¹³å°ï¼Œè‡ªåŠ¨èšåˆæ¥è‡ªå¤šä¸ª AWS æœåŠ¡ä¸ç¬¬ä¸‰æ–¹å·¥å…·çš„å®‰å…¨å‘ç°ï¼ˆFindingsï¼‰ï¼Œå¹¶æ”¯æŒè·¨è´¦æˆ·é›†ä¸­ç®¡ç†</li></ul><p>ğŸ§° æ ¸å¿ƒåŠŸèƒ½</p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ“Š ç»Ÿä¸€ä»ªè¡¨ç›˜</td><td>æä¾›å¤šè´¦æˆ·ã€å¤šæœåŠ¡çš„å®‰å…¨çŠ¶æ€æ€»è§ˆï¼Œæ”¯æŒå¿«é€Ÿå‘ç°é—®é¢˜å¹¶å“åº”</td></tr><tr><td>ğŸ” å®‰å…¨å‘ç°èšåˆ</td><td>è‡ªåŠ¨æ•´åˆæ¥è‡ª AWS æœåŠ¡ä¸åˆä½œå‚å•†çš„ Findingsï¼ˆæ”¯æŒ AWS Security Finding Formatï¼‰</td></tr><tr><td>âœ… å®‰å…¨æ£€æŸ¥è‡ªåŠ¨åŒ–</td><td>å†…å»ºå¯¹ç…§å¦‚ CIS Benchmarksã€PCI DSS çš„åˆè§„æ€§æ£€æŸ¥è§„åˆ™é›†</td></tr><tr><td>ğŸ”” é›†æˆé€šçŸ¥ä¸å“åº”</td><td>å¯ç»“åˆ EventBridge + Lambda&#x2F;SNS è§¦å‘è‡ªåŠ¨ä¿®å¤æˆ–æé†’æµç¨‹</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511603.png"></p><p>ğŸ“¥ æ”¯æŒçš„ AWS æœåŠ¡ï¼ˆFindings æ¥æºï¼‰</p><table><thead><tr><th>æ¥æºæœåŠ¡</th><th>æ£€æµ‹å†…å®¹ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ§¾ AWS Config</td><td>åˆè§„è§„åˆ™è§¦å‘ã€ä¸åˆè§„é…ç½®å˜æ›´</td></tr><tr><td>ğŸ›¡ï¸ GuardDuty</td><td>å¼‚å¸¸è¡Œä¸ºã€æ¶æ„æµé‡ã€è´¦å·æ»¥ç”¨ç­‰</td></tr><tr><td>ğŸ” Inspector</td><td>ä¸»æœºã€å®¹å™¨ã€Lambda æ¼æ´æ‰«æ</td></tr><tr><td>ğŸ” Macie</td><td>S3 ä¸­çš„æ•æ„Ÿæ•°æ®æ£€æµ‹ï¼ˆå¦‚ PIIã€ä¿¡ç”¨å¡å·ï¼‰</td></tr><tr><td>ğŸ‘ï¸ IAM Access Analyzer</td><td>èµ„æºæš´éœ²ã€å¤–éƒ¨å¯è®¿é—®è·¯å¾„å‘ç°</td></tr><tr><td>âš™ï¸ Systems Manager</td><td>å¼‚å¸¸è¡¥ä¸çŠ¶æ€ã€å®ä¾‹åˆè§„æ€§è¯„ä¼°</td></tr><tr><td>ğŸ”¥ Firewall Manager</td><td>é˜²ç«å¢™è§„åˆ™ä¸ä¸€è‡´ã€ç­–ç•¥æœªåº”ç”¨</td></tr><tr><td>ğŸ¥ AWS Health</td><td>AWS æœåŠ¡å±‚äº‹ä»¶å½±å“å’Œé€šçŸ¥</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511604.png"></p><hr><h4 id="Amazon-Detective"><a href="#Amazon-Detective" class="headerlink" title="Amazon Detective"></a>Amazon Detective</h4><ul><li>Amazon Detective æ˜¯ä¸€æ¬¾ä¸“ä¸ºæ·±å…¥åˆ†æå’Œè°ƒæŸ¥ AWS å®‰å…¨äº‹ä»¶æ ¹å› è€Œè®¾è®¡çš„æœåŠ¡ï¼Œç»“åˆå›¾æ•°æ®åº“å’Œæœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œä»å¤§é‡æ—¥å¿—ä¸­æ„å»ºæ¸…æ™°çš„å¯è§†åŒ–ä¸Šä¸‹æ–‡</li></ul><table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®æ“ä½œ</th></tr></thead><tbody><tr><td>åˆ†æ GuardDuty&#x2F;Macie Findings èƒŒåçš„æ ¹å› </td><td>å¯ç”¨ Detective å¹¶ç»“åˆå›¾å½¢åˆ†æè§†å›¾ä½¿ç”¨</td></tr><tr><td>éœ€è¦è¿½æº¯ç”¨æˆ· &#x2F; èµ„æºè¡Œä¸ºå…¨é“¾è·¯</td><td>ä½¿ç”¨ Detective çš„è¡Œä¸ºå›¾è°±ä¸æ—¶é—´çº¿</td></tr><tr><td>å¤šè´¦æˆ·ç¯å¢ƒé›†ä¸­è°ƒæŸ¥å®‰å…¨äº‹ä»¶</td><td>åœ¨ç®¡ç†è´¦æˆ·ä¸­å¯ç”¨ Amazon Detective å¹¶è¿æ¥æ‰€æœ‰å­è´¦æˆ·</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img511605.png"></p><hr><h3 id="3-Compute-amp-Load-Balancing"><a href="#3-Compute-amp-Load-Balancing" class="headerlink" title="3. Compute &amp; Load Balancing"></a>3. Compute &amp; Load Balancing</h3><h4 id="EC2"><a href="#EC2" class="headerlink" title="EC2"></a>EC2</h4><ul><li>EC2 Instance Types â€“ å¸¸è§ç±»åˆ«é€Ÿè§ˆ<ul><li>Amazon EC2 æä¾›å¤šç§å®ä¾‹ç±»å‹ï¼Œé’ˆå¯¹ä¸åŒè®¡ç®—ã€å†…å­˜ã€å­˜å‚¨å’Œå›¾å½¢åŠ é€Ÿéœ€æ±‚è¿›è¡Œä¼˜åŒ–</li></ul></li></ul><p>å¸¸è§ä¸»æµå®ä¾‹æ—å¯¹ç…§è¡¨</p><table><thead><tr><th>å®ä¾‹ç±»å‹</th><th>ç”¨é€”åœºæ™¯æè¿°</th><th>ç‰¹ç‚¹å…³é”®è¯</th></tr></thead><tbody><tr><td><code>R</code></td><td>é«˜å†…å­˜åœºæ™¯ï¼Œå¦‚ Redisã€Memcached</td><td>å†…å­˜ä¼˜åŒ–å‹ï¼ˆRAM ä¼˜å…ˆï¼‰</td></tr><tr><td><code>C</code></td><td>é«˜è®¡ç®—éœ€æ±‚ï¼Œå¦‚æ‰¹é‡å¤„ç†ã€æ•°æ®åº“</td><td>è®¡ç®—ä¼˜åŒ–å‹ï¼ˆCPU æ€§èƒ½ä¼˜å…ˆï¼‰</td></tr><tr><td><code>M</code></td><td>é€šç”¨ä¸šåŠ¡ï¼Œå¦‚ Web åº”ç”¨ã€å¼€å‘ç¯å¢ƒ</td><td>å‡è¡¡å‹ï¼ˆâ€œMâ€ &#x3D; Mediumï¼‰</td></tr><tr><td><code>I</code></td><td>é«˜æœ¬åœ° I&#x2F;Oï¼Œå¦‚ NoSQLã€æ—¥å¿—èšåˆæ•°æ®åº“</td><td>å­˜å‚¨ä¼˜åŒ–å‹ï¼ˆæœ¬åœ° SSDï¼‰</td></tr><tr><td><code>G</code></td><td>GPU åŠ é€Ÿéœ€æ±‚ï¼Œå¦‚æ·±åº¦å­¦ä¹ ã€å›¾åƒå¤„ç†</td><td>å›¾å½¢&#x2F;GPU ä¼˜åŒ–å‹</td></tr><tr><td><code>T2 / T3</code></td><td>çªå‘å‹åœºæ™¯ï¼Œè½»é‡ Webã€æµ‹è¯•ç¯å¢ƒ</td><td>çªå‘æ€§èƒ½å‹ï¼ˆCPU credit æ¨¡å‹ï¼‰</td></tr><tr><td><code>T2/T3 - unlimited</code></td><td>æ”¯æŒæŒç»­çªå‘ï¼Œæ— æ€§èƒ½é™åˆ¶</td><td>è¶…å‡º baseline ä¸é™æ—¶</td></tr></tbody></table><ul><li>EC2 â€“ Placement Groups<ul><li>Placement Groups å¯ç”¨äºæ§åˆ¶ EC2 å®ä¾‹åœ¨ AWS æ•°æ®ä¸­å¿ƒä¸­çš„ç‰©ç†éƒ¨ç½²æ–¹å¼ï¼Œä¼˜åŒ–ç½‘ç»œå»¶è¿Ÿã€å®¹é”™èƒ½åŠ›æˆ–åˆ†å¸ƒç­–ç•¥</li><li><code>Cluster</code>: ä½å»¶è¿Ÿç½‘ç»œã€é«˜å¸¦å®½é€šä¿¡</li><li><code>Spread</code>: é«˜å¯ç”¨æ€§ &#x2F; é¿å…å•ç‚¹æ•…éšœç¡¬ä»¶ä¾èµ–</li><li><code>Partition</code>: å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„éƒ¨ç½²</li></ul></li></ul><p></p><p>ğŸ§© ä¸‰ç§ Placement Group ç­–ç•¥ç±»å‹</p><table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>æè¿°</th><th>åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Cluster</td><td>å®ä¾‹éƒ¨ç½²åœ¨åŒä¸€ä¸ªå¯ç”¨åŒºï¼ˆAZï¼‰çš„è¿‘è·ç¦»ç¡¬ä»¶ä¸Šï¼Œå®ç°è¶…ä½ç½‘ç»œå»¶è¿Ÿä¸é«˜ååé‡</td><td>HPCã€é«˜é¢‘äº¤æ˜“ã€åˆ†å¸ƒå¼ç¼“å­˜</td></tr><tr><td>Spread</td><td>å®ä¾‹åˆ†å¸ƒåœ¨å¤šä¸ªåº•å±‚ç¡¬ä»¶ï¼ˆæ¯ä¸ª AZ æœ€å¤š 7 ä¸ªå®ä¾‹ï¼‰ï¼Œä»¥æå‡å®¹é”™æ€§</td><td>å…³é”®ç³»ç»Ÿï¼ˆå¦‚æ•°æ®åº“ä¸»å¤‡ã€å‰ç«¯èŠ‚ç‚¹ï¼‰</td></tr><tr><td>Partition</td><td>å®ä¾‹åˆ†å¸ƒåœ¨å¤šä¸ªâ€œåˆ†åŒºâ€å†…ï¼Œæ¯ä¸ªåˆ†åŒºåŸºäºä¸åŒçš„æœºæ¶ç»„ï¼Œå¯æ‰©å±•åˆ°æ•°ç™¾å°å®ä¾‹</td><td>å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¦‚ Hadoopã€Kafkaã€Cassandraï¼‰</td></tr></tbody></table><ul><li>Placement Groups â€“ Cluster ç­–ç•¥<ul><li>æé«˜çš„ç½‘ç»œæ€§èƒ½ï¼Œ<strong>å®ä¾‹é—´å¸¦å®½å¯è¾¾ 10 Gbps</strong>ï¼ˆéœ€å¯ç”¨ Enhanced Networkingï¼‰</li><li>éå¸¸é€‚åˆéœ€è¦<strong>ä½å»¶è¿Ÿã€é«˜ååé‡</strong>çš„å†…éƒ¨é€šä¿¡åœºæ™¯</li><li>æ‰€æœ‰å®ä¾‹é›†ä¸­åœ¨åŒä¸€æœºæ¶ç»„ï¼Œ<strong>è‹¥è¯¥æœºæ¶æ•…éšœï¼Œåˆ™æ‰€æœ‰å®ä¾‹åŒæ—¶å®•æœº</strong></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img512712.png"></p><ul><li>Placement Groups â€“ Spread ç­–ç•¥ <ul><li><strong>å¯è·¨å¤šä¸ªå¯ç”¨åŒºï¼ˆAZï¼‰éƒ¨ç½²</strong></li><li>å®ä¾‹éƒ¨ç½²åœ¨ä¸åŒçš„ç‰©ç†ç¡¬ä»¶ä¸Šï¼Œ<strong>å¤§å¤§é™ä½åŒæ—¶æ•…éšœçš„é£é™©</strong></li><li>åˆå…³é”®ä¸šåŠ¡åœºæ™¯ä¸‹çš„<strong>å®ä¾‹éš”ç¦»</strong></li><li><strong>æ¯ä¸ª AZ é™åˆ¶æœ€å¤š 7 ä¸ªå®ä¾‹</strong>ï¼ˆæ¯ä¸ª Placement Group ä¸­ï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img512722.png"></p><ul><li>Placement Groups â€“ Partition ç­–ç•¥ <ul><li>æ¯ä¸ª <strong>å¯ç”¨åŒºï¼ˆAZï¼‰æœ€å¤šæ”¯æŒ 7 ä¸ªåˆ†åŒº</strong></li><li>å•ä¸ªåˆ†åŒºå¯åŒ…å« <strong>æ•°ç™¾ä¸ª EC2 å®ä¾‹</strong></li><li>åŒä¸€åˆ†åŒºå†…çš„å®ä¾‹å…±äº«æœºæ¶ï¼Œä¸åŒåˆ†åŒºçš„å®ä¾‹<strong>ç‰©ç†éš”ç¦»</strong></li><li><strong>åˆ†åŒºçº§æ•…éšœ</strong> åªå½±å“å•ä¸ªåˆ†åŒºï¼Œ<strong>ä¸ä¼šæ³¢åŠå…¶å®ƒåˆ†åŒº</strong></li><li>å®ä¾‹å¯ä»¥é€šè¿‡ <strong>å®ä¾‹å…ƒæ•°æ®ï¼ˆMetadataï¼‰è·å–æ‰€å±åˆ†åŒºä¿¡æ¯</strong></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img512724.png"></p><ul><li>EC2 Instance Launch Typesï¼ˆå¯åŠ¨ç±»å‹ï¼‰<ul><li>EC2 æä¾›å¤šç§å®ä¾‹å¯åŠ¨æ–¹å¼ï¼Œé€‚ç”¨äºä¸åŒä¸šåŠ¡åœºæ™¯å’Œæˆæœ¬ç­–ç•¥</li></ul></li></ul><p>ğŸš€ å¯åŠ¨ç±»å‹å¯¹ç…§è¡¨</p><table><thead><tr><th>å¯åŠ¨ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>ç‰¹ç‚¹ &#x2F; ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>On-Demand Instances</td><td>çŸ­æœŸã€çµæ´»æ€§éœ€æ±‚</td><td>âœ… æŒ‰å°æ—¶&#x2F;ç§’è®¡è´¹ï¼Œå¯é ã€æ— æ‰¿è¯º</td></tr><tr><td>Spot Instances</td><td>å¯ä¸­æ–­å‹çŸ­æœŸä»»åŠ¡</td><td>ğŸ’° ä»·æ ¼ä½è‡³æŒ‰éœ€çš„ 90% æŠ˜æ‰£ï¼Œâš ï¸ å¯èƒ½éšæ—¶è¢«å›æ”¶</td></tr><tr><td>Reserved Instances</td><td>é•¿æœŸç¨³å®šå·¥ä½œè´Ÿè½½ï¼ˆâ‰¥1 å¹´ï¼‰</td><td>ğŸ’° æå‰æ‰¿è¯ºæ¢æŠ˜æ‰£ï¼ˆæœ€å¤š 75%ï¼‰ï¼Œæ”¯æŒåŒºåŸŸæˆ–å®ä¾‹é¢„å®š</td></tr><tr><td>Convertible Reserved Instances</td><td>é•¿æœŸå·¥ä½œè´Ÿè½½ + å®ä¾‹ç±»å‹çµæ´»</td><td>âœ… å…è®¸åœ¨æœŸé™å†…æ›´æ¢å®ä¾‹è§„æ ¼ï¼Œé€‚åˆä¸ç¡®å®šæœªæ¥å®ä¾‹ç±»å‹çš„æƒ…å†µ</td></tr><tr><td>Dedicated Instances</td><td>éœ€éš”ç¦»ç¡¬ä»¶ã€æå‡å®‰å…¨æ€§</td><td>ğŸ›¡ï¸ ä»…è¯¥å®¢æˆ·ä½¿ç”¨ç‰©ç†æœåŠ¡å™¨çš„éƒ¨åˆ†èµ„æºï¼Œé€‚åˆåˆè§„æ€§éœ€æ±‚</td></tr><tr><td>Dedicated Hosts</td><td>æ§åˆ¶å®ä¾‹éƒ¨ç½² + è½¯ä»¶è®¸å¯éœ€æ±‚</td><td>ğŸ§© æ‹¥æœ‰æ•´ä¸ªç‰©ç†æœåŠ¡å™¨èµ„æº</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img512834.png"></p><ul><li>EC2 Graviton å¤„ç†å™¨<ul><li>AWS Graviton æ˜¯åŸºäº Arm æ¶æ„ çš„è‡ªç ”å¤„ç†å™¨ç³»åˆ—ï¼Œæä¾›å“è¶Šçš„æ€§ä»·æ¯”ä¸èƒ½æ•ˆä¼˜åŠ¿ï¼Œé€‚ç”¨äºå¤šç§è®¡ç®—åœºæ™¯</li></ul></li></ul><p>ğŸ§  å¤„ç†å™¨ç‰ˆæœ¬å¯¹æ¯”</p><table><thead><tr><th>ç‰ˆæœ¬</th><th>æ€§èƒ½æå‡</th><th>ç‰¹ç‚¹æ‘˜è¦</th></tr></thead><tbody><tr><td>Graviton2</td><td>æ¯”ç¬¬ 5 ä»£ x86 å®ä¾‹é«˜å‡ºçº¦ 40%</td><td>æœ€æ—©å¹¿æ³›éƒ¨ç½²çš„é«˜æ€§ä»·æ¯” Arm å®ä¾‹</td></tr><tr><td>Graviton3</td><td>æ¯” Graviton2 å¿« æœ€é«˜ 3 å€</td><td>æå‡æµ®ç‚¹è®¡ç®—ã€åŠ å¯†ã€ML æ¨ç†æ€§èƒ½ï¼ŒåŠŸè€—æ›´ä½</td></tr></tbody></table><ul><li>EC2 é»˜è®¤ç›‘æ§æŒ‡æ ‡ï¼ˆCloudWatch Metricsï¼‰<ul><li>EC2 å®ä¾‹åœ¨ä¸é¢å¤–é…ç½®çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨æ”¶é›†ä»¥ä¸‹åŸºç¡€æŒ‡æ ‡ï¼Œé€‚ç”¨äºæ€§èƒ½ç›‘æ§ä¸çŠ¶æ€æ’æŸ¥</li><li>å†…å­˜ï¼ˆRAMï¼‰ä½¿ç”¨æƒ…å†µä¸æ˜¯é»˜è®¤æŒ‡æ ‡</li></ul></li></ul><p>ğŸ“Š å†…å»ºæŒ‡æ ‡åˆ†ç±»ï¼ˆEC2 é»˜è®¤ CloudWatch Metricsï¼‰</p><table><thead><tr><th>ç»´åº¦</th><th>ç›‘æ§é¡¹åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ§  CPU</td><td><code>CPUUtilization</code></td><td>CPU ä½¿ç”¨ç‡ï¼ˆ%ï¼‰</td></tr><tr><td></td><td><code>CPUCreditUsage</code> &#x2F; <code>CPUCreditBalance</code></td><td>ä»…é€‚ç”¨äº T ç³»åˆ—çªå‘å‹å®ä¾‹</td></tr><tr><td>ğŸŒ ç½‘ç»œ</td><td><code>NetworkIn</code> &#x2F; <code>NetworkOut</code></td><td>ç½‘ç»œæµé‡ï¼ˆå­—èŠ‚ï¼‰</td></tr><tr><td>âœ… çŠ¶æ€æ£€æŸ¥</td><td><code>InstanceStatusCheck</code></td><td>æ£€æŸ¥ EC2 è™šæ‹Ÿæœºçº§åˆ«é—®é¢˜</td></tr><tr><td></td><td><code>SystemStatusCheck</code></td><td>æ£€æŸ¥å®¿ä¸»æœºç¡¬ä»¶å’Œç½‘ç»œæ˜¯å¦æ­£å¸¸</td></tr><tr><td>ğŸ’½ ç£ç›˜ï¼ˆä¸´æ—¶å­˜å‚¨ï¼‰</td><td><code>DiskReadOps</code> &#x2F; <code>WriteOps</code><br><code>DiskReadBytes</code> &#x2F; <code>WriteBytes</code></td><td>ä»…é€‚ç”¨äº Instance Storeï¼Œä¸åŒ…å« EBS</td></tr></tbody></table><ul><li>EC2 Instance Recoveryï¼ˆå®ä¾‹æ¢å¤ï¼‰<ul><li>å½“ EC2 å®ä¾‹å‘ç”Ÿç³»ç»Ÿçº§æ•…éšœæ—¶ï¼ŒAWS æ”¯æŒé€šè¿‡ è‡ªåŠ¨æ¢å¤æœºåˆ¶ï¼ˆInstance Recoveryï¼‰å°†å®ä¾‹è¿ç§»è‡³å¥åº·ç¡¬ä»¶ä¸Šï¼Œä¿ç•™åŸæœ‰é…ç½®ä¸å˜</li><li>åªæœ‰ System Status Check å¤±è´¥ï¼ˆStatusCheckFailed_Systemï¼‰ æ—¶æ‰å¯è§¦å‘ EC2 Recovery</li></ul></li></ul><p>âœ… çŠ¶æ€æ£€æŸ¥ï¼ˆStatus Checkï¼‰</p><table><thead><tr><th>æ£€æŸ¥ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Instance Status</td><td>æ£€æŸ¥ EC2 å®ä¾‹å†…æ“ä½œç³»ç»Ÿã€ç½‘ç»œé…ç½®ç­‰</td></tr><tr><td>System Status</td><td>æ£€æŸ¥åº•å±‚ç¡¬ä»¶ï¼ˆå¦‚å®¿ä¸»ç‰©ç†æœåŠ¡å™¨æ•…éšœï¼‰</td></tr></tbody></table><hr><h4 id="High-Performance-Computing-HPC"><a href="#High-Performance-Computing-HPC" class="headerlink" title="High Performance Computing (HPC)"></a>High Performance Computing (HPC)</h4><ul><li>äº‘è®¡ç®—å¹³å°ï¼ˆç‰¹åˆ«æ˜¯ AWSï¼‰éå¸¸é€‚åˆè¿›è¡Œ é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰ï¼Œå¯åŠ¨æ€æ‰©å±•ã€å¿«é€Ÿéƒ¨ç½²å¹¶é™ä½æˆæœ¬</li></ul><p>ğŸ“¦ Data Management &amp; Transfer for HPC</p><table><thead><tr><th>æœåŠ¡</th><th>ç”¨é€”åœºæ™¯</th></tr></thead><tbody><tr><td><strong>AWS Direct Connect</strong></td><td>æä¾›é«˜å¸¦å®½ã€ä½å»¶è¿Ÿã€ä¸“çº¿è¿æ¥ AWSï¼Œé€‚åˆä¼ è¾“ GB&#x2F;s æ•°æ®</td></tr><tr><td><strong>AWS Snowball</strong></td><td>ç‰©ç†è®¾å¤‡ï¼Œé€‚åˆæ‰¹é‡ä¼ è¾“ PB çº§æ•°æ® åˆ° AWS</td></tr><tr><td><strong>AWS DataSync</strong></td><td>å¿«é€Ÿå°†å¤§é‡æ•°æ® ä»æœ¬åœ°åŒæ­¥åˆ° S3ã€EFSã€FSx</td></tr></tbody></table><p>âš™ï¸ Compute and Networking for HPC</p><table><thead><tr><th>é€‰é¡¹</th><th>ç”¨é€”è¯´æ˜</th></tr></thead><tbody><tr><td><strong>EC2 å®ä¾‹</strong></td><td>æä¾›åŸºç¡€çš„è®¡ç®—èµ„æºï¼Œå¯é€‰æ‹© CPU ä¼˜åŒ–å‹ã€GPU ä¼˜åŒ–å‹ å®ä¾‹</td></tr><tr><td><strong>Spot å®ä¾‹ &#x2F; Spot Fleet</strong></td><td>é€‚ç”¨äºå¼¹æ€§ã€çŸ­æ—¶æ‰¹å¤„ç†ä»»åŠ¡ï¼Œæå¤§é™ä½æˆæœ¬ï¼Œå¯ç»“åˆ Auto Scaling ä½¿ç”¨</td></tr><tr><td><strong>Auto Scaling</strong></td><td>æ ¹æ®è®¡ç®—éœ€æ±‚è‡ªåŠ¨æ‰©ç¼© EC2 æ•°é‡ï¼Œé€‚åº”åŠ¨æ€è´Ÿè½½å˜åŒ–</td></tr></tbody></table><p>ğŸš€ EC2 Enhanced Networkingï¼ˆåŸºäº SR-IOVï¼‰</p><table><thead><tr><th>ç½‘ç»œç±»å‹</th><th>ç‰¹æ€§è¯´æ˜</th><th>é€‚ç”¨å¸¦å®½</th></tr></thead><tbody><tr><td>Elastic Network Adapter (ENA)</td><td>é»˜è®¤æ¨èï¼Œæ”¯æŒå¤šç§å®ä¾‹ç±»å‹ï¼Œæœ€é«˜ 100 Gbps</td><td>âœ… é«˜é€Ÿï¼ˆç°ä»£æ ‡å‡†ï¼‰</td></tr><tr><td>Intel 82599 VF (Legacy)</td><td>è¾ƒæ—§çš„é€‰é¡¹ï¼Œé€‚ç”¨äºéƒ¨åˆ†æ—©æœŸå®ä¾‹</td><td>â›” æœ€å¤š 10 Gbps</td></tr><tr><td>Elastic Fabric Adapter (EFA)</td><td>åŸºäº ENA å¢å¼ºï¼Œé€‚ç”¨äº HPCï¼Œæ”¯æŒ MPIï¼Œç»•è¿‡å†…æ ¸ï¼Œæä¾›è¶…ä½å»¶è¿Ÿé€šä¿¡</td><td>âœ… é«˜é€Ÿ + æä½å»¶è¿Ÿ</td></tr></tbody></table><p>ğŸ“Œ å®ä¾‹é™„åŠ å­˜å‚¨ï¼ˆä¸ EC2 ç´§è€¦åˆï¼‰</p><table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨å»ºè®®</th></tr></thead><tbody><tr><td>Amazon EBS</td><td>å¯æŒä¹…åŒ–ã€å¯ç‹¬ç«‹æŒ‚è½½ï¼Œæ”¯æŒå¿«ç…§ã€åŠ å¯†ã€IOPS è°ƒä¼˜</td><td>âœ… é€šç”¨å­˜å‚¨ï¼Œå¦‚æ•°æ®åº“ç£ç›˜ã€å®¹å™¨å·</td></tr><tr><td>- io2 Block Express</td><td>æä¾›é«˜è¾¾ 256,000 IOPSï¼Œé€‚åˆé«˜æ€§èƒ½åœºæ™¯</td><td>é«˜æ€§èƒ½æ•°æ®åº“ã€æ—¥å¿—ç³»ç»Ÿ</td></tr><tr><td>Instance Store</td><td>ä¸ EC2 å®ä¾‹ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œè¶…ä½å»¶è¿Ÿï¼Œå¯è¾¾ç™¾ä¸‡çº§ IOPS</td><td>ä¸´æ—¶æ•°æ®ç¼“å­˜ã€HPC ä¸´æ—¶ç»“æœ</td></tr></tbody></table><p>ğŸ“¦ ç½‘ç»œå­˜å‚¨ï¼ˆé€šè¿‡ç½‘ç»œè®¿é—®ï¼‰</p><table><thead><tr><th>æœåŠ¡</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Amazon S3</td><td>å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæ”¯æŒæ— é™æ‰©å±•ï¼Œä¸æ˜¯çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿ</td><td>âœ… é™æ€æ–‡ä»¶ã€æ¨¡å‹æ•°æ®ã€å¤‡ä»½å½’æ¡£ç­‰</td></tr><tr><td>Amazon EFS</td><td>åˆ†å¸ƒå¼å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œè‡ªåŠ¨æ‰©å±•ï¼ŒæŒ‰å®¹é‡è®¡è´¹ï¼Œæ”¯æŒ provisioned IOPS</td><td>å¤šå®ä¾‹å…±äº«æŒ‚è½½ã€å®¹å™¨ã€Web æ–‡ä»¶å­˜å‚¨</td></tr><tr><td>Amazon FSx for Lustre</td><td>é¢å‘ HPC ä¼˜åŒ–çš„é«˜å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒç™¾ä¸‡çº§ IOPSï¼Œå¯æŒ‚è½½åˆ° S3</td><td>Genomicsã€æ¸²æŸ“ã€AI æ¨¡å‹è®­ç»ƒç­‰ HPC åœºæ™¯</td></tr></tbody></table><p>ğŸ¤– è‡ªåŠ¨åŒ–ä¸ç¼–æ’å·¥å…·ï¼ˆAutomation &amp; Orchestration for HPCï¼‰</p><table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>AWS Batch</strong></td><td>æ”¯æŒå¤šèŠ‚ç‚¹å¹¶è¡Œä½œä¸šï¼ˆMulti-node Parallel Jobsï¼‰ï¼Œè‡ªåŠ¨è°ƒåº¦å’Œæ‰©ç¼© EC2 å®ä¾‹</td><td>âœ… åŠ¨æ€æ‰¹å¤„ç†ä»»åŠ¡è°ƒåº¦ã€åˆ†å¸ƒå¼è®­ç»ƒã€ä»¿çœŸã€æ¸²æŸ“ç­‰</td></tr><tr><td><strong>AWS ParallelCluster</strong></td><td>å¼€æºé›†ç¾¤ç®¡ç†å·¥å…·ï¼ŒåŸºäºæ–‡æœ¬é…ç½®ï¼Œè‡ªåŠ¨åˆ›å»º VPCã€å­ç½‘ã€å®ä¾‹ç±»å‹ä¸ä½œä¸šè°ƒåº¦å™¨</td><td>âœ… æ„å»ºå®Œæ•´ HPC é›†ç¾¤ï¼ˆæ”¯æŒ Lustreã€EFAã€Slurm ç­‰ï¼‰</td></tr></tbody></table><hr><h4 id="Auto-Scaling"><a href="#Auto-Scaling" class="headerlink" title="Auto Scaling"></a>Auto Scaling</h4><ul><li>Auto Scaling Groups â€“ Dynamic Scaling Policiesï¼ˆåŠ¨æ€æ‰©ç¼©å®¹ç­–ç•¥ï¼‰<ul><li>åŠ¨æ€æ‰©ç¼©å®¹ç­–ç•¥å¯ä»¥æ ¹æ®å®æ—¶æŒ‡æ ‡æˆ–å·²çŸ¥ä½¿ç”¨æ¨¡å¼è‡ªåŠ¨è°ƒæ•´ EC2 å®ä¾‹æ•°é‡ï¼Œç¡®ä¿ç³»ç»Ÿæ—¢å…·å¤‡å¼¹æ€§åˆé¿å…èµ„æºæµªè´¹</li></ul></li></ul><table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ¯ Target Tracking Scaling</td><td>âœ… æœ€ç®€å•æ˜“ç”¨ï¼Œè‡ªåŠ¨å°†å®ä¾‹æ•°ç»´æŒåœ¨æŸä¸ªç›®æ ‡æŒ‡æ ‡é™„è¿‘</td><td>å¸Œæœ›å¹³å‡ CPU åˆ©ç”¨ç‡ç»´æŒåœ¨ 40%</td></tr><tr><td>ğŸ“ˆ Simple &#x2F; Step Scaling</td><td>åŸºäº CloudWatch è­¦æŠ¥è¿›è¡Œæ‰©ç¼©å®¹ï¼Œæ”¯æŒå¤šä¸ªé˜ˆå€¼ä¸åŠ¨ä½œï¼Œé€‚åˆç²¾ç»†æ§åˆ¶</td><td>CPU &gt; 70% â æ‰©å®¹ 2 å°<br>CPU &lt; 30% â ç¼©å®¹ 1 å°</td></tr><tr><td>â° Scheduled Actions</td><td>é¢„è®¾æ—¶é—´ç‚¹è§¦å‘æ‰©ç¼©è®¡åˆ’ï¼Œé€‚ç”¨äºæµé‡è§„å¾‹æ˜æ˜¾çš„åœºæ™¯</td><td>æ¯å‘¨äº” 17:00 â è®¾ç½®æœ€å°å®¹é‡ä¸º 10ï¼Œåº”å¯¹å‘¨æœ«é«˜å³°</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img223430.png"></p><ul><li>Auto Scaling Groups â€“ Predictive Scalingï¼ˆé¢„æµ‹å‹æ‰©ç¼©ç­–ç•¥<ul><li>é¢„æµ‹å‹æ‰©ç¼©å®¹é€šè¿‡ æœºå™¨å­¦ä¹ ç®—æ³•åˆ†æå†å²è´Ÿè½½è¶‹åŠ¿ï¼Œæå‰é¢„æµ‹å³å°†åˆ°æ¥çš„è´Ÿè½½å˜åŒ–ï¼Œå¹¶æå‰é¢„çƒ­å®ä¾‹ï¼Œä»è€Œé¿å…å“åº”å»¶è¿Ÿæˆ–å†·å¯åŠ¨é—®é¢˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img225447.png"></p><p>ğŸ“ˆ æ¨èç”¨äºæ‰©ç¼©å®¹çš„æŒ‡æ ‡</p><table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>CPUUtilization</td><td>å®ä¾‹çš„å¹³å‡ CPU ä½¿ç”¨ç‡ï¼Œæœ€å¸¸ç”¨çš„é€šç”¨æ‰©ç¼©å®¹æŒ‡æ ‡</td></tr><tr><td>RequestCountPerTarget</td><td>æ¯ä¸ªç›®æ ‡å®ä¾‹çš„è¯·æ±‚é‡ï¼ˆé€‚ç”¨äºå¸¦æœ‰è´Ÿè½½å‡è¡¡å™¨çš„ Web åº”ç”¨ï¼‰</td></tr><tr><td>Average Network In&#x2F;Out</td><td>å¹³å‡ç½‘ç»œæµå…¥ &#x2F; æµå‡ºå­—èŠ‚æ•°ï¼Œé€‚åˆç½‘ç»œå¯†é›†å‹åº”ç”¨ï¼ˆå¦‚è§†é¢‘æµã€æ•°æ®ä¼ è¾“ï¼‰</td></tr><tr><td>è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆCustom Metricï¼‰</td><td>å¯ä½¿ç”¨ CloudWatch è‡ªè¡Œæ¨é€ä»»æ„ä¸šåŠ¡ç›¸å…³æŒ‡æ ‡ï¼ˆå¦‚é˜Ÿåˆ—é•¿åº¦ã€å“åº”æ—¶é—´ç­‰ï¼‰</td></tr></tbody></table><ul><li>Auto Scaling â€“ Instance Refresh<ul><li>åœ¨ä¸å®Œå…¨é‡å»º Auto Scaling Group çš„å‰æä¸‹ï¼Œè‡ªåŠ¨æ»šåŠ¨æ›´æ–° EC2 å®ä¾‹ä»¥ä½¿ç”¨æ–°çš„å¯åŠ¨æ¨¡æ¿ï¼ˆLaunch Templateï¼‰æˆ–é…ç½®</li><li>ç”±ç”¨æˆ·ä¸»åŠ¨è°ƒç”¨ StartInstanceRefresh, æŒ‰ç…§æŒ‡å®šæ¯”ä¾‹é€æ­¥æ›¿æ¢ç°æœ‰å®ä¾‹ï¼Œç¡®ä¿æœåŠ¡ä¸ä¸­æ–­</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img515727.png"></p><ul><li>Auto Scaling â€“ Health Checksï¼ˆå¥åº·æ£€æŸ¥æœºåˆ¶ï¼‰<ul><li>Auto Scaling Groupï¼ˆASGï¼‰ä¼šæ ¹æ®å¥åº·æ£€æŸ¥ç»“æœè‡ªåŠ¨è¯†åˆ«å¤±æ•ˆå®ä¾‹ï¼Œå¹¶æ‰§è¡Œç»ˆæ­¢ + æ›¿æ¢æ“ä½œï¼Œç¡®ä¿æœåŠ¡é«˜å¯ç”¨</li></ul></li></ul><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>EC2 Status Checks</td><td>é»˜è®¤å¯ç”¨ï¼Œæ£€æŸ¥å®ä¾‹è‡ªèº«çŠ¶æ€ï¼ˆå¦‚ CPU å¡æ­»ã€å†…æ ¸å´©æºƒï¼‰<br>åŒ…æ‹¬ç³»ç»Ÿçº§ï¼ˆSystemï¼‰å’Œå®ä¾‹çº§ï¼ˆInstanceï¼‰çŠ¶æ€æ£€æŸ¥</td></tr><tr><td>ELB Health Checks</td><td>é€‚ç”¨äº ASG å…³è”äº† Load Balancerï¼ˆALB &#x2F; NLB &#x2F; CLBï¼‰<br>ä½¿ç”¨ HTTP&#x2F;TCP å®šæœŸæ¢æµ‹å®ä¾‹å¥åº·ï¼Œè´´è¿‘ä¸šåŠ¡å±‚</td></tr><tr><td>è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼ˆCustomï¼‰</td><td>ä½¿ç”¨ AWS CLI &#x2F; SDK ä¸»åŠ¨ä¸ŠæŠ¥å®ä¾‹å¥åº·çŠ¶æ€<br>å‘½ä»¤ç¤ºä¾‹ï¼š<code>set-instance-health</code>ï¼ˆå°†å®ä¾‹æ ‡è®°ä¸º Unhealthyï¼‰</td></tr></tbody></table><hr><h4 id="EC2-Spot-Instances"><a href="#EC2-Spot-Instances" class="headerlink" title="EC2 Spot Instances"></a>EC2 Spot Instances</h4><ul><li>EC2 Spot å®ä¾‹æ˜¯ä¸€ç§é«˜æ€§ä»·æ¯”çš„è®¡ç®—èµ„æºè·å–æ–¹å¼ï¼Œå¯ä»¥ä¸ºå¼¹æ€§å·¥ä½œè´Ÿè½½æ˜¾è‘—èŠ‚çœæˆæœ¬ã€‚é€‚ç”¨äºå¯¹ä¸­æ–­å®¹å¿åº¦é«˜çš„åœºæ™¯ï¼Œä¾‹å¦‚æ‰¹å¤„ç†ã€æ•°æ®åˆ†æç­‰</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>æˆæœ¬æä½</td><td>ç›¸è¾ƒ On-Demand å®ä¾‹æœ€é«˜å¯çœ 90%</td></tr><tr><td>è‡ªå®šä¹‰æœ€å¤§ç«ä»·</td><td>ç”¨æˆ·è®¾å®šæœ€å¤§å¯æ¥å—ä»·æ ¼ï¼Œå½“å‰å¸‚åœºä»·æ ¼ä½äºè¯¥å€¼æ—¶è·å–å®ä¾‹</td></tr><tr><td>å®æ—¶ä»·æ ¼æµ®åŠ¨</td><td>ä»·æ ¼ä¾æ®åŒºåŸŸå®¹é‡ä¾›éœ€æƒ…å†µæ¯å°æ—¶è°ƒæ•´</td></tr><tr><td>å¯é…ç½®ä¸­æ–­è¡Œä¸º</td><td>ä»·æ ¼ä¸Šæ¶¨è¶…å‡ºè®¾å®šæ—¶å¯é€‰æ‹© Stop &#x2F; Terminateï¼Œæå‰ 2 åˆ†é’Ÿé€šçŸ¥</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img515752.png"></p><hr><h4 id="EC2-Spot-Fleets"><a href="#EC2-Spot-Fleets" class="headerlink" title="EC2 Spot Fleets"></a>EC2 Spot Fleets</h4><ul><li>Spot Fleet æ˜¯ AWS æä¾›çš„ä¸€ç§æ–¹å¼ï¼Œç”¨äºè‡ªåŠ¨ç®¡ç†å¤šä¸ª Spot å®ä¾‹ + å¯é€‰çš„ On-Demand å®ä¾‹ç»„åˆï¼Œä»¥æ»¡è¶³ä½ è®¾å®šçš„è®¡ç®—å®¹é‡ç›®æ ‡</li><li>å¤§è§„æ¨¡æ•°æ®å¤„ç†ï¼ˆå¦‚ Sparkã€EMRï¼‰, è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹, éå…³é”®ä½†é«˜ç®—åŠ›å¯†é›†å‹ä»»åŠ¡</li></ul><p>ğŸ§© Spot Fleet å¯åŠ¨æ± ï¼ˆLaunch Poolsï¼‰ç¤ºä¾‹</p><ul><li>ä½ å¯ä»¥å®šä¹‰å¤šä¸ªå€™é€‰é…ç½®æ± ï¼ŒSpot Fleet ä¼šä»è¿™äº›æ± ä¸­è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç»„åˆä»¥æ»¡è¶³ç­–ç•¥</li></ul><table><thead><tr><th>å±æ€§</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å®ä¾‹ç±»å‹</td><td><code>m5.large</code>, <code>c5.xlarge</code></td></tr><tr><td>æ“ä½œç³»ç»Ÿ</td><td>Amazon Linux 2, Ubuntu</td></tr><tr><td>å¯ç”¨åŒº</td><td><code>us-east-1a</code>, <code>us-east-1b</code></td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img515754.png"></p><hr><h4 id="AWS-ECS-Elastic-Container-Service"><a href="#AWS-ECS-Elastic-Container-Service" class="headerlink" title="AWS ECS (Elastic Container Service)"></a>AWS ECS (Elastic Container Service)</h4><ul><li>è¦åœ¨ AWS ä¸Šç®¡ç† Docker å®¹å™¨ï¼Œä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹å¹³å°</li></ul><table><thead><tr><th>æœåŠ¡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>Amazon ECS</td><td>AWS è‡ªç ”å®¹å™¨ç¼–æ’å¹³å°ï¼Œæ”¯æŒ Dockerï¼Œæ˜“äºé›†æˆ AWS ç”Ÿæ€</td></tr><tr><td>Amazon EKS</td><td>æ‰˜ç®¡ç‰ˆ Kubernetesï¼ˆå¼€æºï¼‰ï¼Œé€‚åˆå·²æœ‰ K8s ç»éªŒçš„å›¢é˜Ÿ</td></tr><tr><td>AWS Fargate</td><td>æ— æœåŠ¡å™¨å®¹å™¨è¿è¡Œå¹³å°ï¼ˆServerlessï¼‰ï¼Œå¯æ­é… ECS æˆ– EKS ä½¿ç”¨</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img517216.png"></p><ul><li>Amazon ECS â€“ Use Cases<ul><li>Amazon ECS æ˜¯ AWS è‡ªç ”çš„å®¹å™¨ç¼–æ’æœåŠ¡ï¼Œé€‚ç”¨äºä»å¾®æœåŠ¡æ¶æ„åˆ°æ‰¹å¤„ç†ä½œä¸šçš„å¤šç§åœºæ™¯</li></ul></li></ul><table><thead><tr><th>åœºæ™¯ç±»å‹</th><th>ç¤ºä¾‹ä¸è¯´æ˜</th></tr></thead><tbody><tr><td>å¾®æœåŠ¡æ¶æ„</td><td>éƒ¨ç½²å¤šä¸ªå®¹å™¨ï¼Œæ”¯æŒæ¨¡å—åŒ–æœåŠ¡ä¸ç‹¬ç«‹æ‰©å±•</td></tr><tr><td>è‡ªåŠ¨æ‰©ç¼©å®¹</td><td>æ”¯æŒä»»åŠ¡å’ŒæœåŠ¡çš„åŠ¨æ€æ‰©ç¼©å®¹ï¼ŒåŒ¹é…æµé‡éœ€æ±‚</td></tr><tr><td>ä¸è´Ÿè½½å‡è¡¡é›†æˆ</td><td>åŸç”Ÿé›†æˆ ALB &#x2F; NLBï¼Œè‡ªåŠ¨æ³¨å†Œç›®æ ‡å®¹å™¨</td></tr><tr><td>æ‰¹å¤„ç†ä¸å®šæ—¶ä»»åŠ¡</td><td>ä½¿ç”¨ ECS è¿è¡Œå®šæœŸä»»åŠ¡ï¼Œå…¼å®¹ Spot &#x2F; On-Demand ç­‰å®ä¾‹ç±»å‹</td></tr><tr><td>åº”ç”¨ä¸Šäº‘è¿ç§»</td><td>å°†æœ¬åœ° Docker åŒ–åº”ç”¨æ— ç¼è¿ç§»è‡³ ECS å¹³å°</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img517219.png"></p><ul><li>Amazon ECS â€“ æ ¸å¿ƒæ¦‚å¿µ<ul><li>Amazon ECS é‡‡ç”¨ä»»åŠ¡é©±åŠ¨æ¨¡å‹ï¼Œç»“åˆæœåŠ¡å®šä¹‰ä¸ IAM æ§åˆ¶ï¼Œé€‚åˆé«˜å¯ç”¨å®¹å™¨åŒ–éƒ¨ç½²</li></ul></li></ul><table><thead><tr><th>æ¦‚å¿µ</th><th>æè¿°</th></tr></thead><tbody><tr><td>ECS Cluster</td><td>EC2 å®ä¾‹çš„é€»è¾‘åˆ†ç»„ï¼Œå®¹å™¨ä»»åŠ¡åœ¨æ­¤é›†ç¾¤ä¸­è¿è¡Œï¼ˆFargate æ¨¡å¼ä¸‹å¯ä¸ºç©ºï¼‰</td></tr><tr><td>ECS Service</td><td>å®šä¹‰è¿è¡Œå¤šå°‘ä¸ªä»»åŠ¡ï¼Œå¦‚ä½•éƒ¨ç½²ä¸ç»´æŒä»»åŠ¡å‰¯æœ¬æ•°</td></tr><tr><td>Task Definition</td><td>ä»»åŠ¡å®šä¹‰æ–‡ä»¶ï¼ˆJSONï¼‰ï¼Œæè¿°å®¹å™¨é•œåƒã€CPUã€å†…å­˜ã€ç«¯å£ç­‰é…ç½®</td></tr><tr><td>ECS Task</td><td>æŸä¸ª Task Definition çš„è¿è¡Œå®ä¾‹ï¼Œå³ä¸€ä¸ªæˆ–å¤šä¸ªå®é™…è¿è¡Œçš„å®¹å™¨</td></tr></tbody></table><ul><li>ğŸ” ECS IAM è§’è‰²</li></ul><table><thead><tr><th>IAM è§’è‰²ç±»å‹</th><th>ç”¨é€”è¯´æ˜</th></tr></thead><tbody><tr><td>EC2 Instance Profile</td><td>é™„åŠ åœ¨ ECS æ‰€å± EC2 ä¸Šï¼Œç”¨äºè®¿é—® ECS APIã€CloudWatch ç­‰æœåŠ¡</td></tr><tr><td>Task IAM Role</td><td>é™„åŠ åœ¨å…·ä½“ä»»åŠ¡ä¸Šï¼Œç”¨äºè®¿é—® S3ã€DynamoDB ç­‰ AWS æœåŠ¡ï¼Œå®ç°ä»»åŠ¡çº§æƒé™éš”ç¦»</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img517221.png"></p><ul><li>Amazon ECS â€“ ALB Integrationï¼ˆåŠ¨æ€ç«¯å£æ˜ å°„ï¼‰<ul><li>Amazon ECS å¯é€šè¿‡ ALBï¼ˆApplication Load Balancerï¼‰ å®ç°å®¹å™¨çš„æ™ºèƒ½è·¯ç”±ï¼Œæ”¯æŒ åŠ¨æ€ç«¯å£æ˜ å°„ï¼ˆDynamic Port Mappingï¼‰</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Users</span><br><span class="line">  â†“</span><br><span class="line">Application Load Balancer</span><br><span class="line">  â”œâ”€â”€â†’ EC2 Instance: Task A (port 36789)</span><br><span class="line">  â””â”€â”€â†’ EC2 Instance: Task B (port 39586)</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522822.png"></p><ul><li>Amazon ECS â€“ å®‰å…¨ä¸ç½‘ç»œé…ç½®<ul><li>ECS æä¾›å¼ºå¤§çš„é…ç½®æ³¨å…¥ä¸çµæ´»çš„ç½‘ç»œé€‰é¡¹ï¼Œæ”¯æŒä¸åŒä»»åŠ¡éš”ç¦»çº§åˆ«ä¸å®‰å…¨éœ€æ±‚</li><li>å¯å°† å‚æ•°å’Œå¯†é’¥ ä½œä¸ºç¯å¢ƒå˜é‡æ³¨å…¥å®¹å™¨</li><li>æ”¯æŒé›†æˆä»¥ä¸‹æœåŠ¡: SSM Parameter Store, Secrets Manager</li></ul></li></ul><table><thead><tr><th>ç½‘ç»œæ¨¡å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>none</code></td><td>æ— ç½‘ç»œè¿æ¥ï¼Œæ— æ³•ä¸å¤–éƒ¨é€šä¿¡ï¼Œé€šå¸¸ç”¨äºå®Œå…¨ç¦»çº¿çš„è®¡ç®—ä»»åŠ¡</td></tr><tr><td><code>bridge</code></td><td>Docker é»˜è®¤æ¡¥æ¥ç½‘ç»œæ¨¡å¼ï¼Œå®¹å™¨é—´é€šè¿‡è™šæ‹Ÿç½‘æ¡¥é€šä¿¡ï¼Œæ”¯æŒç«¯å£æ˜ å°„</td></tr><tr><td><code>host</code></td><td>å®¹å™¨ç›´æ¥ä½¿ç”¨ä¸»æœºç½‘ç»œæ¥å£ï¼Œç«¯å£å†²çªé£é™©é«˜ï¼Œä½†æ€§èƒ½æ›´å¥½</td></tr><tr><td><code>awsvpc</code></td><td>æ¯ä¸ªä»»åŠ¡è·å¾—ç‹¬ç«‹ ENI + ç§æœ‰ IPï¼Œæ”¯æŒ Security Groupsã€VPC Flow Logs ç­‰</td></tr><tr><td></td><td>â¤ Fargate çš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¹Ÿæ˜¯æœ€æ¨èçš„ç”Ÿäº§éƒ¨ç½²æ¨¡å¼</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522829.png"></p><ul><li>Amazon ECS â€“ Service Auto Scaling<ul><li>ECS æ”¯æŒåœ¨ æœåŠ¡å±‚çº§è‡ªåŠ¨æ‰©ç¼©å®¹ä»»åŠ¡ï¼ˆTasksï¼‰ï¼Œæ— éœ€äººå·¥å¹²é¢„</li></ul></li></ul><table><thead><tr><th>ç­–ç•¥ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ¯ Target Tracking</td><td>è®¾ç½®ç›®æ ‡å€¼ï¼Œè‡ªåŠ¨è¿½è¸ªï¼ˆæœ€å¸¸ç”¨ï¼Œæ¨èï¼‰</td><td>ç»´æŒ CPU åˆ©ç”¨ç‡åœ¨ 50%</td></tr><tr><td>ğŸ“‰ Step Scaling</td><td>ç»‘å®š CloudWatch Alarmï¼Œè®¾ç½®è§¦å‘é˜ˆå€¼ + è°ƒæ•´æ­¥è¿›</td><td>CPU &gt; 70% â æ‰©å®¹ 2 ä¸ªä»»åŠ¡</td></tr><tr><td>â° Scheduled Scaling</td><td>é¢„è®¾æŸä¸ªæ—¶é—´è‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œé€‚åˆé¢„æµ‹æ€§å˜åŒ–</td><td>æ¯å¤© 9:00 è®¾ç½®æœ€å°ä»»åŠ¡ä¸º 5</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522831.png"></p><ul><li>Amazon ECS â€“ Spot Instances æ”¯æŒ<ul><li>ECS æ”¯æŒä½¿ç”¨ Spot å®ä¾‹æ¥é™ä½æˆæœ¬ï¼Œå…·ä½“å–å†³äº å¯åŠ¨æ–¹å¼ï¼ˆEC2 vs Fargateï¼‰</li></ul></li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>ğŸ–¥ï¸ ECSï¼ˆEC2 Launch Typeï¼‰</th><th>âš™ï¸ Fargateï¼ˆå« FARGATE_SPOTï¼‰</th></tr></thead><tbody><tr><td>Spot æ§åˆ¶æ–¹å¼</td><td>é€šè¿‡ Auto Scaling Group ç®¡ç† Spot å®ä¾‹</td><td>æ¯ä¸ªä»»åŠ¡å¯æŒ‡å®šè¿è¡Œåœ¨ FARGATE æˆ– FARGATE_SPOT</td></tr><tr><td>ä¸­æ–­æœºåˆ¶</td><td>å®ä¾‹å›æ”¶å‰è¿›å…¥ Draining Modeï¼Œä»»åŠ¡è‡ªåŠ¨è¿ç§»æˆ–ç»ˆæ­¢</td><td>Spot ä»»åŠ¡å¯éšæ—¶è¢« AWS å›æ”¶ï¼ˆæ— é¢„è­¦ï¼‰ï¼Œéœ€å®¹é”™è®¾è®¡</td></tr><tr><td>æˆæœ¬ä¸ç¨³å®šæ€§å¹³è¡¡</td><td>æˆæœ¬ä½ä½†ä¸­æ–­å½±å“è¾ƒå¤§ï¼Œéœ€æ­é… ASG å’Œå¤š AZ ç­–ç•¥åº”å¯¹</td><td>æ”¯æŒæ··åˆéƒ¨ç½²ï¼ŒOn-Demand ä¿åº• + Spot å¼¹æ€§</td></tr><tr><td>é…ç½®ä¸è¿ç»´å¤æ‚åº¦</td><td>éœ€è¦é…ç½® EC2ã€ASGã€Capacity Provider ç­‰</td><td>æ›´åŠ ç®€å•ï¼ŒServerlessï¼Œä»»åŠ¡çº§åˆ«æŒ‡å®šè¿è¡Œæ–¹å¼</td></tr><tr><td>æ‰©å±•å¼¹æ€§</td><td>ä¾èµ– EC2 å®¹é‡ï¼Œæ‰©å®¹å—é™äºåº•å±‚èµ„æºå¯ç”¨æ€§</td><td>å¼¹æ€§å¼ºï¼Œæ— éœ€ EC2ï¼Œç›´æ¥æ ¹æ®è´Ÿè½½æ°´å¹³æ‰©ç¼©ä»»åŠ¡</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522833.png"></p><hr><h4 id="AWS-Fargate"><a href="#AWS-Fargate" class="headerlink" title="AWS Fargate"></a>AWS Fargate</h4><ul><li>AWS Fargate æ˜¯ä¸€ç§ æ— æœåŠ¡å™¨ï¼ˆServerlessï¼‰å®¹å™¨è¿è¡Œå¹³å°ï¼Œå¯æ­é… ECS æˆ– EKS ä½¿ç”¨ï¼Œæ— éœ€ç®¡ç†åº•å±‚ EC2 å®ä¾‹</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ— éœ€ç®¡ç† EC2</td><td>æ— éœ€é¢„é… &#x2F; ç®¡ç†ä»»ä½•è™šæ‹Ÿæœºï¼ŒçœŸæ­£ Serverless</td></tr><tr><td>æŒ‰éœ€åˆ†é…èµ„æº</td><td>ä½ åªéœ€å®šä¹‰ä»»åŠ¡æ‰€éœ€çš„ CPU &#x2F; å†…å­˜ï¼ŒFargate è‡ªåŠ¨è°ƒåº¦è¿è¡Œ</td></tr><tr><td>ç®€åŒ–æ‰©å±•</td><td>åªéœ€å¢åŠ ä»»åŠ¡æ•°é‡å³å¯å®ç°æ‰©å®¹ï¼Œæ— éœ€è€ƒè™‘å®ä¾‹å®¹é‡æˆ– Auto Scaling</td></tr><tr><td>ä¸ ECS &#x2F; EKS é›†æˆ</td><td>å¯ä½œä¸ºä¸¤è€…çš„è¿è¡Œæ¨¡å¼ï¼Œé€‚é…ä¸åŒå®¹å™¨ç¼–æ’ç³»ç»Ÿ</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522826.png"></p><hr><h4 id="AWS-ECR-Elastic-Container-Registry"><a href="#AWS-ECR-Elastic-Container-Registry" class="headerlink" title="AWS ECR (Elastic Container Registry)"></a>AWS ECR (Elastic Container Registry)</h4><ul><li>Amazon ECR æ˜¯ AWS æä¾›çš„æ‰˜ç®¡å¼ Docker é•œåƒä»“åº“ï¼Œå¯å®‰å…¨å­˜å‚¨ã€ç®¡ç†å’Œéƒ¨ç½²å®¹å™¨é•œåƒ<ul><li>ECR â‰  DockerHubï¼šé»˜è®¤ç§æœ‰ï¼Œæ›´é€‚åˆç”Ÿäº§éƒ¨ç½²ï¼Œæƒé™å¯æ§</li><li>è‹¥ä½¿ç”¨ CodePipelineã€ECSã€Fargateï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨ ECR ç®¡ç†é•œåƒ</li><li>æ¨é€é•œåƒå‰éœ€æ‰§è¡Œ aws ecr get-login-password ç™»å½•å‘½ä»¤</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img522834.png"></p><ul><li>Amazon ECR â€“ Cross Region Replication<ul><li>Amazon ECR æ”¯æŒ<strong>è·¨åŒºåŸŸï¼ˆCross-Regionï¼‰ä¸è·¨è´¦æˆ·ï¼ˆCross-Accountï¼‰</strong>é•œåƒå¤åˆ¶ï¼Œç”¨äºæå‡å¤šåŒºåŸŸå¯ç”¨æ€§ä¸éƒ¨ç½²æ•ˆç‡</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523114.png"></p><ul><li>Amazon ECR é•œåƒæ‰«æï¼ˆImage Scanningï¼‰<ul><li>ECR æ”¯æŒä¸¤ç§é•œåƒæ‰«ææ–¹å¼ï¼Œç”¨äºå‘ç°æ½œåœ¨çš„å®‰å…¨æ¼æ´</li><li>æ‰‹åŠ¨æ‰«æï¼ˆManual Scanï¼‰ï¼šç”¨æˆ·åœ¨æ§åˆ¶å°æˆ– CLI ä¸­æ‰‹åŠ¨è§¦å‘æ‰«æ</li><li>æ¨é€å³æ‰«ï¼ˆScan on Pushï¼‰ï¼šé•œåƒæ¨é€åˆ° ECR æ—¶è‡ªåŠ¨è§¦å‘æ‰«æ</li><li>æ‰«æç±»å‹: åŸºç¡€æ‰«æï¼ˆBasic Scanningï¼‰,å¢å¼ºæ‰«æï¼ˆEnhanced Scanning, ç»“åˆ Amazon Inspectorï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523117.png"></p><hr><h4 id="AWS-EKS-Elastic-Kubernetes-Service"><a href="#AWS-EKS-Elastic-Kubernetes-Service" class="headerlink" title="AWS EKS (Elastic Kubernetes Service)"></a>AWS EKS (Elastic Kubernetes Service)</h4><ul><li>Amazon EKSï¼šå…¨æ‰˜ç®¡çš„ Kubernetes æœåŠ¡ï¼Œåœ¨ AWS ä¸Šè¿è¡Œå®¹å™¨åŒ–åº”ç”¨</li><li>Kubernetesï¼šå¼€æºç³»ç»Ÿï¼Œç”¨äº è‡ªåŠ¨éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ï¼ˆå¦‚ Docker åº”ç”¨ï¼‰</li><li>EKS æ˜¯ ECS çš„æ›¿ä»£æ–¹æ¡ˆï¼šç›®æ ‡ç±»ä¼¼ï¼ˆè¿è¡Œå®¹å™¨ï¼‰ï¼Œä½† API å’Œç”Ÿæ€ä¸åŒï¼ˆECS æ˜¯ AWS ä¸“æœ‰ï¼ŒEKS æ˜¯å¼€æºæ ‡å‡†ï¼‰</li><li>æ”¯æŒä¸¤ç§è¿è¡Œç¯å¢ƒ: EC2, Fargate</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523158.png"></p><ul><li>Amazon EKS â€“ Node Typesï¼ˆèŠ‚ç‚¹ç±»å‹ï¼‰<ul><li>åœ¨ EKS ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸‰ç§æ–¹å¼æ¥è¿è¡Œ Kubernetes Podï¼šæ‰˜ç®¡èŠ‚ç‚¹ã€è‡ªæ‰˜ç®¡èŠ‚ç‚¹ã€æˆ– Fargate æ¨¡å¼</li></ul></li></ul><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ‰˜ç®¡èŠ‚ç‚¹ç»„ï¼ˆManaged Node Groupsï¼‰</td><td>ç”± EKS è‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†çš„ EC2 å®ä¾‹ï¼Œè‡ªåŠ¨åŠ å…¥é›†ç¾¤ï¼›å±äº ASGï¼Œæ”¯æŒ On-Demand &#x2F; Spot</td></tr><tr><td>è‡ªæ‰˜ç®¡èŠ‚ç‚¹ï¼ˆSelf-Managed Nodesï¼‰</td><td>ä½ è‡ªå·±åˆ›å»ºå’Œç®¡ç†çš„ EC2 å®ä¾‹ï¼Œæ‰‹åŠ¨æ³¨å†Œè‡³é›†ç¾¤ï¼›æ›´çµæ´»ä½†éœ€è‡ªè¡Œç»´æŠ¤</td></tr><tr><td>AWS Fargate</td><td>å®Œå…¨ Serverlessï¼›æ— éœ€ç®¡ç†ä»»ä½•èŠ‚ç‚¹ï¼Œé€‚åˆæŒ‰éœ€ã€è‡ªåŠ¨åŒ–çš„å®¹å™¨éƒ¨ç½²</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523200.png"></p><ul><li>Amazon EKS â€“ Data Volumesï¼ˆæ•°æ®å·ï¼‰<ul><li>åœ¨ EKS ä¸­ï¼ŒæŒä¹…åŒ–æ•°æ®éœ€è¦é€šè¿‡å­˜å‚¨æ’ä»¶ï¼ˆCSI é©±åŠ¨ï¼‰å¹¶é…åˆ Kubernetes çš„ StorageClass æ¥å®šä¹‰å·çš„ç”Ÿå‘½å‘¨æœŸå’Œç±»å‹</li><li>ä½¿ç”¨ Fargate æ—¶ï¼Œä»…æ”¯æŒ EFSï¼ˆå½“å‰ä¸æ”¯æŒ EBSï¼‰</li></ul></li></ul><table><thead><tr><th>å­˜å‚¨ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Amazon EBS</td><td>å—å­˜å‚¨ï¼Œé€‚ç”¨äº EC2 èŠ‚ç‚¹ï¼›ä¸èƒ½è·¨ AZ</td></tr><tr><td>Amazon EFS</td><td>ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼›æ”¯æŒå¤šä¸ª Pod å¹¶å‘è®¿é—®ï¼›æ”¯æŒ Fargate</td></tr><tr><td>Amazon FSx for Lustre</td><td>é«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿï¼Œé€‚åˆæœºå™¨å­¦ä¹ ã€å¤§æ•°æ®åˆ†æç­‰é«˜ååé‡åœºæ™¯</td></tr><tr><td>Amazon FSx for NetApp ONTAP</td><td>æ”¯æŒä¼ä¸šçº§æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½ï¼Œå¦‚å¿«ç…§ã€å¤åˆ¶ã€æ•°æ®å‹ç¼©</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523202.png"></p><hr><h4 id="AWS-App-Runner"><a href="#AWS-App-Runner" class="headerlink" title="AWS App Runner"></a>AWS App Runner</h4><ul><li>AWS App Runner æ˜¯ä¸€ç§å…¨æ‰˜ç®¡æœåŠ¡ï¼Œç”¨äºè½»æ¾éƒ¨ç½² Web åº”ç”¨å’Œ APIï¼Œæ— éœ€ç®¡ç†åº•å±‚åŸºç¡€è®¾æ–½</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ— éœ€åŸºç¡€è®¾æ–½ç»éªŒ</td><td>å®Œå…¨æ‰˜ç®¡ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ã€æ‰©å±•æˆ–è´Ÿè½½å‡è¡¡</td></tr><tr><td>æºç  &#x2F; é•œåƒéƒ¨ç½²</td><td>æ”¯æŒä» GitHub æˆ– ECR å®¹å™¨é•œåƒç›´æ¥éƒ¨ç½²</td></tr><tr><td>è‡ªåŠ¨æ‰©ç¼©å®¹</td><td>æ ¹æ®æµé‡è‡ªåŠ¨è°ƒæ•´èµ„æºï¼Œæ— éœ€æ‰‹åŠ¨é…ç½® Auto Scaling</td></tr><tr><td>é«˜å¯ç”¨ &amp; åŠ å¯†</td><td>é»˜è®¤æä¾›è´Ÿè½½å‡è¡¡ä¸ TLS åŠ å¯†</td></tr><tr><td>VPC æ”¯æŒ</td><td>å¯è®¿é—® RDSã€ElastiCache ç­‰ VPC å†…éƒ¨èµ„æº</td></tr><tr><td>URL ç›´æ¥è®¿é—®</td><td>éƒ¨ç½²åè‡ªåŠ¨åˆ†é…å…¬å¼€è®¿é—®åœ°å€</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ï¸âƒ£ Source Code / Container Image (ECR)</span><br><span class="line">        â†“</span><br><span class="line">2ï¸âƒ£ é…ç½®ï¼švCPUã€RAMã€Auto Scalingã€Health Check</span><br><span class="line">        â†“</span><br><span class="line">3ï¸âƒ£ åˆ›å»ºå¹¶éƒ¨ç½²ï¼ˆCreate &amp; Deployï¼‰</span><br><span class="line">        â†“</span><br><span class="line">4ï¸âƒ£ è·å¾—è®¿é—® URLï¼Œç«‹å³å¯ç”¨</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523204.png"></p><hr><h4 id="ECS-Anywhere-amp-EKS-Anywhere"><a href="#ECS-Anywhere-amp-EKS-Anywhere" class="headerlink" title="ECS Anywhere &amp; EKS Anywhere"></a>ECS Anywhere &amp; EKS Anywhere</h4><ul><li>Amazon ECS Anywhere<ul><li>è®©ä½ èƒ½åœ¨æœ¬åœ°æ•°æ®ä¸­å¿ƒã€è™šæ‹Ÿæœºæˆ–å…¶ä»–è‡ªç®¡åŸºç¡€è®¾æ–½ä¸Šè¿è¡ŒåŸç”Ÿ ECS ä»»åŠ¡ï¼Œç»“åˆäº‘ç«¯æ§åˆ¶é¢æ¿ä¸æœ¬åœ°æ‰§è¡Œèƒ½åŠ›</li><li>æ»¡è¶³ åˆè§„æ€§ &#x2F; æ•°æ®æœ¬åœ°åŒ– &#x2F; ä½å»¶è¿Ÿ è¦æ±‚, è¿è¡Œåœ¨ æ—  AWS åŒºåŸŸè¦†ç›–çš„åœ°æ–¹</li><li>æœ¬åœ°æœºå™¨å­¦ä¹ ã€è§†é¢‘å¤„ç†ã€å¤§æ•°æ®åˆ†æ ç­‰è¾¹ç¼˜è®¡ç®—éœ€æ±‚</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523209.png"></p><ul><li>Amazon EKS Anywhere<ul><li>EKS Anywhere å…è®¸ä½ åœ¨ æœ¬åœ°æˆ–å…¶ä»–äº‘ç¯å¢ƒä¸­åˆ›å»ºå¹¶è¿è¡Œ Kubernetes é›†ç¾¤</li><li>æƒ³ä¿ç•™ æœ¬åœ°è¿è¡Œç¯å¢ƒï¼Œä½†åˆæƒ³ç”¨ä¸Š EKS ç®¡ç†ä½“éªŒ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523210.png"></p><hr><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>AWS Lambda æ˜¯ä¸€ç§ æ— æœåŠ¡å™¨è®¡ç®—æœåŠ¡ï¼Œè®©ä½ åªéœ€å†™ä»£ç ï¼Œä¸ç”¨ç®¡æœåŠ¡å™¨ã€‚ä½ ä¸Šä¼ å‡½æ•°ï¼Œè®¾ç½®è§¦å‘æ¡ä»¶ï¼ŒAWS è‡ªåŠ¨è¿è¡Œå®ƒ</li><li>AWS Lambda å¯æ— æœåŠ¡å™¨æ‰§è¡Œå‡½æ•°ï¼Œå¸¸è¢«ä»¥ä¸‹æœåŠ¡è§¦å‘æˆ–ä¸ä¹‹é›†æˆ</li></ul><table><thead><tr><th>æœåŠ¡åç§°</th><th>è§¦å‘ &#x2F; é›†æˆæ–¹å¼è¯´æ˜</th></tr></thead><tbody><tr><td>API Gateway</td><td>é€šè¿‡ HTTP è¯·æ±‚è§¦å‘ Lambdaï¼Œå¸¸ç”¨äºæ„å»ºæ— æœåŠ¡å™¨ API</td></tr><tr><td>Amazon S3</td><td>å¯¹è±¡åˆ›å»º &#x2F; åˆ é™¤è§¦å‘ï¼ˆå¦‚ä¸Šä¼ å›¾ç‰‡è‡ªåŠ¨å¤„ç†ï¼‰</td></tr><tr><td>Amazon DynamoDB</td><td>è¡¨æ›´æ–°äº‹ä»¶è§¦å‘ï¼ˆä½¿ç”¨ DynamoDB Streamsï¼‰</td></tr><tr><td>Amazon Kinesis</td><td>æµå¼æ•°æ®å¤„ç†ï¼Œå¦‚æ—¥å¿—åˆ†æã€å®æ—¶è®¡ç®—</td></tr><tr><td>Amazon EventBridge</td><td>åŸºäºäº‹ä»¶æ€»çº¿å®ç°å¤æ‚äº‹ä»¶é©±åŠ¨æ¶æ„ (CRON JOB)</td></tr><tr><td>Amazon SQS</td><td>ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ‹‰å–æ¶ˆæ¯å¤„ç†</td></tr><tr><td>AWS IoT Core</td><td>è®¾å¤‡æ¶ˆæ¯è§¦å‘ Lambda</td></tr><tr><td>AWS Cognito</td><td>ç”¨æˆ·æ³¨å†Œã€ç™»å½•ç­‰äº‹ä»¶è§¦å‘ Lambdaï¼ˆå¦‚éªŒè¯é€»è¾‘ï¼‰</td></tr><tr><td>CloudWatch Logs</td><td>å¯é…åˆæ—¥å¿—å¤„ç† &#x2F; å‘Šè­¦</td></tr><tr><td>AWS SNS</td><td>è®¢é˜… SNS ä¸»é¢˜ï¼Œå¤„ç†å‘å¸ƒæ¶ˆæ¯</td></tr></tbody></table><ul><li>AWS Lambda é™åˆ¶<ul><li>å†…å­˜ï¼ˆRAMï¼‰ï¼šæœ€å° 128MBï¼Œæœ€å¤§ 10GB</li><li>CPUï¼šä¸èƒ½æ‰‹åŠ¨è®¾ç½®ï¼Œè·Ÿå†…å­˜æŒ‚é’©</li><li>æœ€é•¿è¿è¡Œæ—¶é—´ï¼š15 åˆ†é’Ÿ</li><li>éƒ¨ç½²åŒ…é™åˆ¶ï¼šZIP æ ¼å¼æœ€å¤§ 50MBï¼Œè§£å‹å + Layer æ€»å…±ä¸èƒ½è¶…è¿‡ 250MB</li><li>å¹¶å‘æ‰§è¡Œæ•°ï¼šé»˜è®¤ 1000ï¼ˆå¯ä»¥ç”³è¯·æé«˜ï¼‰</li><li>å®¹å™¨é•œåƒå¤§å°ï¼šæœ€å¤§ 10GB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523230.png"></p><ul><li>Lambda å¹¶å‘ä¸é™æµï¼ˆConcurrency &amp; Throttlingï¼‰<ul><li>é»˜è®¤å¹¶å‘é™åˆ¶æ˜¯ 1000 ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤šåŒæ—¶è·‘ 1000 ä¸ªå‡½æ•°å®ä¾‹</li><li>å¯ä»¥ç»™æŸä¸ªå‡½æ•°è®¾ç½® Reserved Concurrencyï¼Œæ„æ€æ˜¯ç»™å®ƒä¸“é—¨ç•™å‡ ä¸ªåé¢</li><li>ä¸€æ—¦è¯·æ±‚è¶…å‡ºè¿™ä¸ªå¹¶å‘é™åˆ¶ï¼Œå°±ä¼šè§¦å‘ Throttleï¼ˆè¢«é™æµï¼‰ï¼Œå¯¼è‡´è°ƒç”¨å¤±è´¥æˆ–å»¶è¿Ÿ</li><li>å¦‚æœä¸å¤Ÿç”¨ï¼Œå¯ä»¥å» Service Quotas é¡µé¢ç”³è¯·æé«˜å¹¶å‘ä¸Šé™</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523248.png"></p><ul><li>Lambda å¹¶å‘é—®é¢˜ï¼ˆConcurrency Issueï¼‰<ul><li>å¦‚æœä½ ä¸è®¾ç½® Reserved Concurrencyï¼Œå°±é»˜è®¤å¤§å®¶ä¸€èµ·æŠ¢é‚£ 1000 ä¸ªå¹¶å‘åé¢</li><li>ç”¨æˆ·å¤šçš„æ—¶å€™ï¼Œåƒ API Gatewayã€ALBï¼ˆè´Ÿè½½å‡è¡¡å™¨ï¼‰ éƒ½å¯èƒ½å› ä¸ºæ²¡æŠ¢åˆ°èµ„æºè€Œ è¢«é™æµï¼ˆThrottleï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img523313.png"></p><ul><li>Lambda &amp; CodeDeploy ç®€ä»‹<ul><li>AWS CodeDeploy å¯ä»¥å¸®ä½ è‡ªåŠ¨ç®¡ç† Lambda çš„æµé‡åˆ‡æ¢ï¼Œå®ç°å¹³æ»‘éƒ¨ç½²ï¼ˆæ¸è¿›å¼å‘å¸ƒï¼‰ï¼Œé˜²æ­¢ç›´æ¥ä¸Šçº¿å‡ºé—®é¢˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img225541.png"></p><hr><h4 id=""><a href="#" class="headerlink" title=""></a></h4>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼Šåˆ©è¯ºä¼Šå·äº¤è§„</title>
      <link href="/posts/80b8adf.html"/>
      <url>/posts/80b8adf.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.ilsos.gov/publications/pdf_publications/dsd_a112.pdf">ILLINOIS RULES OF THE ROAD 2025 é“¾æ¥</a></p><h3 id="1-äº¤é€šæ³•è§„"><a href="#1-äº¤é€šæ³•è§„" class="headerlink" title="1. äº¤é€šæ³•è§„"></a>1. äº¤é€šæ³•è§„</h3><h4 id="è¢«è­¦å¯Ÿæ‹¦ä¸‹æ—¶è¯¥æ€ä¹ˆåš"><a href="#è¢«è­¦å¯Ÿæ‹¦ä¸‹æ—¶è¯¥æ€ä¹ˆåš" class="headerlink" title="è¢«è­¦å¯Ÿæ‹¦ä¸‹æ—¶è¯¥æ€ä¹ˆåš"></a>è¢«è­¦å¯Ÿæ‹¦ä¸‹æ—¶è¯¥æ€ä¹ˆåš</h4><ul><li><p>æ…¢æ…¢å‡é€Ÿï¼Œæ‰“è½¬å‘ç¯ï¼Œå®‰å…¨åœ°<ins>é å³</ins>åœè½¦</p><ul><li>å¦‚æœè·¯è‚©å¤ªçª„æˆ–æ²¡æœ‰è·¯è‚©ï¼Œå°±ç»§ç»­æ…¢æ…¢å¼€ï¼Œ<ins>æ‰¾åˆ°å®‰å…¨çš„ä½ç½®å†åœè½¦</ins></li><li>ä¸è¦çªç„¶æ€¥åˆ¹è½¦æˆ–åœåœ¨è½¦é“ä¸­é—´</li></ul></li><li><p>åœè½¦åï¼ŒåŒæ‰‹æ”¾åœ¨æ–¹å‘ç›˜ä¸Šï¼Œä¿æŒå¯è§</p></li><li><p>æœªç»å…è®¸ï¼Œä¸è¦ä¸‹è½¦</p></li><li><p>é…åˆè­¦å¯Ÿæ£€æŸ¥é©¾é©¶è¯å’Œä¿é™©è¯æ˜</p><ul><li>å¦‚æœè¯ä»¶åœ¨æ‰‹å¥—ç®±ã€åº§ä½ä¸‹ï¼Œæˆ–æ‰‹æœºé‡Œï¼Œ<ins>æå‰å‘Šè¯‰è­¦å¯Ÿ</ins>ï¼Œç­‰ä»–åŒæ„åå†å»æ‹¿</li></ul></li><li><p>å¦‚æœä¸ç¡®å®šæ˜¯è­¦è½¦æˆ–è­¦å¯Ÿ</p><ul><li>ä¿æŒä½é€Ÿã€å®‰å…¨è¡Œé©¶</li><li><ins>å¼€åˆ°ç¯å…‰æ˜äº®ã€äººå¤šçš„åœ°æ–¹å†åœè½¦</ins></li><li>æ…¢æ…¢å¼€åˆ°æœ€è¿‘çš„è­¦å¯Ÿå±€ï¼Œå¯»æ±‚ç©¿åˆ¶æœè­¦å¯Ÿå¸®åŠ©</li><li><ins>æ‹¨æ‰“911ç¡®è®¤</ins></li></ul></li><li><p>å¦‚æœæ˜¯æ™šä¸Šè¢«æ‹¦</p><ul><li>å¯ä»¥æ‰“å¼€è½¦å†…ç¯ï¼Œè®©è­¦å¯Ÿçœ‹åˆ°è½¦å†…æƒ…å†µï¼Œå¢åŠ å®‰å…¨æ„Ÿ</li></ul></li></ul><hr><h4 id="äº¤é€šæ‹¦æˆªå¯¼è‡´å¼€ç½šå•æˆ–è¢«é€®æ•"><a href="#äº¤é€šæ‹¦æˆªå¯¼è‡´å¼€ç½šå•æˆ–è¢«é€®æ•" class="headerlink" title="äº¤é€šæ‹¦æˆªå¯¼è‡´å¼€ç½šå•æˆ–è¢«é€®æ•"></a>äº¤é€šæ‹¦æˆªå¯¼è‡´å¼€ç½šå•æˆ–è¢«é€®æ•</h4><ul><li><p>ä¸è¦å½“åœºå’Œè­¦å¯Ÿäº‰è®ºæˆ–è¾©è§£</p><ul><li><ins>æ— è®ºä½ è§‰å¾—è‡ªå·±æœ‰æ²¡æœ‰é”™ï¼Œä¸è¦åœ¨ç°åœºäº‰æ‰§ï¼Œå¯ä»¥åç»­å»æ³•åº­ç”³è¯‰</ins></li></ul></li><li><p>å¦‚æœæ”¶åˆ°ç½šå•ï¼Œä¸è¦æ‹’ç»ç­¾å­—</p><ul><li><ins>ç­¾å­—åªæ˜¯ç¡®è®¤æ”¶åˆ°ç½šå•ï¼Œä¸æ˜¯æ‰¿è®¤ä½ æœ‰ç½ª</ins></li></ul></li><li><p>ä¿æŒé…åˆï¼Œç¤¼è²Œå¯¹å¾…è­¦å¯Ÿ</p></li><li><p>å¦‚æœè¢«é€®æ•ï¼Œä¸è¦åæŠ—</p><ul><li>åæŠ—é€®æ•ï¼ˆæ¯”å¦‚æŒ£è„±ã€æ¨æ¡ï¼‰ä¼šè®©ä½ é¢ä¸´æ›´å¤šç½ªåï¼Œåæœä¸¥é‡</li></ul></li><li><p>è­¦å¯Ÿå¿…é¡»å°Šé‡ä½ çš„å°Šä¸¥ï¼Œä¸å¾—æ— ç¤¼æˆ–æ»¥ç”¨æƒåŠ›</p></li><li><p>å¦‚æœä½ è§‰å¾—è­¦å¯Ÿè¡Œä¸ºä¸å½“ï¼ˆæ¯”å¦‚æ€åº¦æ¶åŠ£ã€æ»¥æƒï¼‰ï¼Œåº”è¯¥</p><ul><li>å°½å¿«å‘è­¦æ–¹ä¸Šçº§ä¸¾æŠ¥</li><li><ins>è­¦å¯Ÿå¿…é¡»æä¾›å§“åå’Œè­¦å·ï¼Œå¦‚æœä½ è¦æ±‚</ins></li><li>å¯ä»¥å‘<strong>å†…éƒ¨äº‹åŠ¡éƒ¨é—¨ï¼ˆInternal Affairsï¼‰æˆ–æ°‘ä¼—æŠ•è¯‰å§”å‘˜ä¼šï¼ˆCivilian Complaint Boardï¼‰</strong>æå‡ºä¹¦é¢æŠ•è¯‰</li></ul></li></ul><hr><h4 id="åˆ†å¿ƒé©¾é©¶"><a href="#åˆ†å¿ƒé©¾é©¶" class="headerlink" title="åˆ†å¿ƒé©¾é©¶"></a>åˆ†å¿ƒé©¾é©¶</h4><ul><li><p>ç¦æ­¢å¼€è½¦æ—¶æ‰‹æŒæ‰‹æœºï¼Œå³ä½¿å¼€æ‰¬å£°å™¨</p></li><li><p>ç¦æ­¢å‘çŸ­ä¿¡æˆ–ä½¿ç”¨å…¶ä»–ç”µå­é€šè®¯è®¾å¤‡ï¼ˆå¦‚å¹³æ¿ã€ç¬”è®°æœ¬ç­‰ï¼‰</p></li><li><p>ç¦æ­¢ä½©æˆ´è€³æœºï¼ˆåªå…è®¸å•è¾¹ä½¿ç”¨ï¼‰</p></li><li><p>å…è®¸çš„è¡Œä¸ºï¼ˆæœ‰é™åˆ¶ï¼‰</p><ul><li>19å²åŠä»¥ä¸Šé©¾é©¶å‘˜å¯ä»¥ä½¿ç”¨ å…æè®¾å¤‡ï¼ˆhands-freeï¼‰ï¼Œå¦‚è“ç‰™ã€è¯­éŸ³åŠ©æ‰‹</li></ul></li><li><p>å”¯ä¸€å…è®¸æ‰‹æŒæ‰‹æœºçš„æƒ…å†µï¼ˆä¾‹å¤–ï¼‰</p><ul><li><ins>æŠ¥å‘Šç´§æ€¥æƒ…å†µï¼ˆå¦‚æŠ¥è­¦ã€æ±‚æ•‘ï¼‰</ins></li><li>è½¦è¾†åœåœ¨è·¯è‚©ä¸Šï¼Œå®‰å…¨çŠ¶æ€</li><li>å› æ­£å¸¸äº¤é€šé˜»å¡å¯¼è‡´åœè½¦ï¼Œä¸”æŒ‚ç©ºæŒ¡æˆ–åœè½¦æŒ¡ï¼ˆå¦‚é‡çº¢ç¯æ—¶ï¼Œä¸å…è®¸æ‹¿æ‰‹æœºï¼Œåªæœ‰çœŸæ­£å®Œå…¨åœä½ä¸”æŒ‚Pæˆ–NæŒ¡æ‰è¡Œï¼‰</li></ul></li></ul><hr><h4 id="å®‰å…¨å¸¦æ³•è§„"><a href="#å®‰å…¨å¸¦æ³•è§„" class="headerlink" title="å®‰å…¨å¸¦æ³•è§„"></a>å®‰å…¨å¸¦æ³•è§„</h4><ul><li>æ‰€æœ‰8å²åŠä»¥ä¸Šçš„å¸æœºå’Œä¹˜å®¢ï¼ˆä¸è®ºå‰æ’è¿˜æ˜¯åæ’ï¼‰ï¼Œéƒ½å¿…é¡»ç³»å®‰å…¨å¸¦</li><li>8å²ä»¥ä¸‹çš„å„¿ç«¥ å¿…é¡»ä½¿ç”¨ç¬¦åˆè§„å®šçš„ å„¿ç«¥å®‰å…¨åº§æ¤…</li></ul><hr><h4 id="ä¼Šåˆ©è¯ºä¼Šå·é™é€Ÿè§„å®š"><a href="#ä¼Šåˆ©è¯ºä¼Šå·é™é€Ÿè§„å®š" class="headerlink" title="ä¼Šåˆ©è¯ºä¼Šå·é™é€Ÿè§„å®š"></a>ä¼Šåˆ©è¯ºä¼Šå·é™é€Ÿè§„å®š</h4><p>é“è·¯é™é€Ÿè§„å®šï¼ˆé™¤éå¦æœ‰æ ‡ç¤ºï¼‰</p><ul><li>å·é™…å…¬è·¯å’Œæ”¶è´¹å…¬è·¯ï¼ˆInterstates and Tollwaysï¼‰ï¼šæœ€é«˜é™é€Ÿ 70 mph</li><li>å››è½¦é“å…¬è·¯ï¼ˆHighways with Four Lanesï¼‰ï¼šæœ€é«˜é™é€Ÿ 65 mph</li><li>å…¶ä»–å…¬è·¯å’Œä¹¡æ‘é“è·¯ï¼ˆOther Highways and Rural Areasï¼‰ï¼šæœ€é«˜é™é€Ÿ 55 mph</li><li>åŸå¸‚&#x2F;åŸé•‡åœ°åŒºï¼ˆCity&#x2F;Town Areasï¼‰ï¼šæœ€é«˜é™é€Ÿ 30 mph</li><li>å°å··ï¼ˆAlleysï¼‰ï¼šæœ€é«˜é™é€Ÿ 15 mph</li><li>å­¦æ ¡åŒºåŸŸï¼ˆSchool Zonesï¼‰ï¼šæœ€é«˜é™é€Ÿ 20 mphï¼ˆä»…åœ¨ä¸Šå­¦æ—¥ 6:30 a.m. è‡³ 4 p.m.ï¼Œä¸”å­©å­åœ¨åœºä¸”æœ‰æ ‡å¿—çš„æƒ…å†µä¸‹ï¼‰</li></ul><p>ä»¥ä¸‹æƒ…å½¢å¿…é¡»å‡é€Ÿ</p><ul><li>æ¥è¿‘æˆ–ç©¿è¶Šè·¯å£ï¼šä¸ºäº†é¿å…ä¸å…¶ä»–è½¦è¾†æˆ–è¡Œäººç›¸æ’</li><li>è½¬å¼¯æˆ–ç»•å¼¯ï¼šæ§åˆ¶è½¦é€Ÿï¼Œé˜²æ­¢è½¬å¼¯æ—¶å¤±æ§</li><li>ä¸Šå¡æˆ–æ¥è¿‘å¡é¡¶ï¼šé˜²æ­¢çªç„¶é‡åˆ°çœ‹ä¸è§çš„å¯¹å‘è½¦è¾†æˆ–éšœç¢ç‰©</li><li>è¡Œé©¶åœ¨ç‹­çª„æˆ–æ›²æŠ˜çš„é“è·¯ä¸Šï¼šä¿éšœè¡Œè½¦å®‰å…¨å’Œå¯æ§æ€§</li><li>é‡åˆ°è¡Œäººã€è‡ªè¡Œè½¦ã€æ¶åŠ£å¤©æ°”ã€æœºæ¢°æ•…éšœæˆ–ç³Ÿç³•è·¯å†µæ—¶ï¼šå‡å°‘äº‹æ•…é£é™©ï¼Œé˜²æ­¢å‘ç”Ÿæ„å¤–</li></ul><hr><h4 id="å·¥åœ°åŒºåŸŸé©¾é©¶è§„å®š"><a href="#å·¥åœ°åŒºåŸŸé©¾é©¶è§„å®š" class="headerlink" title="å·¥åœ°åŒºåŸŸé©¾é©¶è§„å®š"></a>å·¥åœ°åŒºåŸŸé©¾é©¶è§„å®š</h4><ul><li>å‡é€Ÿæ…¢è¡Œ: è¿›å…¥æˆ–é è¿‘æ–½å·¥&#x2F;å…»æŠ¤åŒºåŸŸæ—¶å¿…é¡»å‡é€Ÿï¼Œç¡®ä¿å®‰å…¨</li><li>ç¦æ­¢ä½¿ç”¨æ‰‹æœº</li><li>ä¸ºæ–½å·¥è½¦è¾†å’Œå·¥äººè®©è¡Œ</li><li>å˜é“é¿å¼€æ–½å·¥äººå‘˜: å¦‚æœæ¡ä»¶å…è®¸ï¼Œåº”è¯¥å˜é“è¿œç¦»æ–½å·¥äººå‘˜æ‰€åœ¨çš„è½¦é“</li><li>å·¥åœ°é™é€Ÿå…¨å¤©æœ‰æ•ˆï¼Œä¸ç®¡æœ‰æ²¡æœ‰å·¥äººåœ¨ç°åœº</li></ul><hr><h4 id="åº”æ€¥è½¦è¾†"><a href="#åº”æ€¥è½¦è¾†" class="headerlink" title="åº”æ€¥è½¦è¾†"></a>åº”æ€¥è½¦è¾†</h4><p>é‡åˆ°åœåœ¨è·¯è¾¹çš„åº”æ€¥è½¦è¾†ï¼ˆå¼€å¯è­¦ç¤ºç¯ï¼‰</p><ul><li>å¦‚æœçœ‹åˆ°<ins>åœé è·¯è¾¹</ins>ä¸”å¼€å¯é—ªçƒè­¦ç¤ºç¯ï¼ˆè“è‰²ã€çº¢è‰²ã€æ©™è‰²ã€ç™½è‰²ã€ç»¿è‰²ï¼Œæ—‹è½¬æˆ–é—ªçƒç¯ï¼‰çš„è½¦è¾†ï¼Œæˆ–ç°åœºå‡ºç°è¿™äº›ç¯å…‰çš„ç´§æ€¥åœºæ™¯ï¼Œé©¾é©¶äººå¿…é¡»<ul><li>å‡é€Ÿæ…¢è¡Œæˆ–è®©è¡Œ</li><li>å˜é“è¿œç¦»ï¼Œå¦‚æœæ— æ³•å˜é“ï¼Œå¿…é¡»å‡é€Ÿå¹¶ç‰¹åˆ«å°å¿ƒé€šè¿‡</li><li>ä¿æŒå‡é€ŸçŠ¶æ€ï¼Œç›´åˆ°å®Œå…¨é€šè¿‡è¯¥åŒºåŸŸ</li><li>ç¦æ­¢åœ¨è·ç¦»500è‹±å°ºï¼ˆçº¦152ç±³ï¼‰å†… æ‹ç…§æˆ–ä½¿ç”¨æ‰‹æœºï¼Œé™¤éç‰¹æ®Šæƒ…å†µï¼ˆå¦‚æŠ¥è­¦ï¼‰</li></ul></li></ul><p>é‡åˆ°è¡Œé©¶ä¸­çš„åº”æ€¥è½¦è¾†ï¼ˆé¸£ç¬›+é—ªç¯ï¼‰</p><ul><li><p>å½“åº”æ€¥è½¦è¾†ï¼ˆå¦‚æ•‘æŠ¤è½¦ã€æ¶ˆé˜²è½¦ã€è­¦è½¦ç­‰ï¼‰é¸£å“è­¦ç¬›å¹¶é—ªç¯æ¥è¿‘æ—¶</p><ul><li><ins>ç«‹åˆ»é å³åœè½¦</ins>ï¼Œä¸ºå…¶è®©è·¯</li><li>è§†æƒ…å†µå®Œå…¨åœè½¦ï¼Œç¡®ä¿åº”æ€¥è½¦è¾†å¯ä»¥å®‰å…¨é€šè¿‡</li><li>å¦‚æœåœ¨åå­—è·¯å£ç­‰çº¢ç¯ï¼Œä¿æŒåœè½¦çŠ¶æ€ï¼Œç›´åˆ°åº”æ€¥è½¦è¾†å®Œå…¨é€šè¿‡è·¯å£</li></ul></li><li><p>å…¶ä»–ç‰¹æ®Šè§„å®š</p><ul><li>ç¦æ­¢å‹è¿‡æ¶ˆé˜²æ°´ç®¡ï¼Œé™¤éå¾—åˆ°ç°åœºæ¶ˆé˜²æŒ‡æŒ¥å®˜çš„è®¸å¯</li></ul></li></ul><hr><h4 id="å­¦æ ¡åŒºåŸŸé©¾é©¶è§„"><a href="#å­¦æ ¡åŒºåŸŸé©¾é©¶è§„" class="headerlink" title="å­¦æ ¡åŒºåŸŸé©¾é©¶è§„"></a>å­¦æ ¡åŒºåŸŸé©¾é©¶è§„</h4><ul><li>åœ¨ä¸Šå­¦æ—¥ 6:30 a.m. - 4:00 p.m.ï¼Œå¦‚æœæœ‰å­©å­åœ¨åœºï¼Œå¿…é¡»å‡é€Ÿåˆ° 20 mphã€ç¦æ­¢æ‰‹æŒæ‰‹æœºã€åœè½¦è®©äººå…ˆè¡Œï¼Œç¡®ä¿å„¿ç«¥å®‰å…¨<ul><li>é™é€Ÿ 20 mph</li><li>åœè½¦è®©è¡Œ: å¿…é¡»åœè½¦è®©è¡Œç»™æ‰€æœ‰åœ¨æ–‘é©¬çº¿ä¸Šçš„å„¿ç«¥æˆ–æˆå¹´äºº</li></ul></li></ul><hr><h4 id="é€è‘¬é˜Ÿä¼é©¾é©¶è§„å®š"><a href="#é€è‘¬é˜Ÿä¼é©¾é©¶è§„å®š" class="headerlink" title="é€è‘¬é˜Ÿä¼é©¾é©¶è§„å®š"></a>é€è‘¬é˜Ÿä¼é©¾é©¶è§„å®š</h4><ul><li><p>æ‰€æœ‰å‚ä¸é€è‘¬é˜Ÿä¼çš„è½¦è¾†åº”æ‰“å¼€å¤§ç¯å’Œå±é™©è­¦ç¤ºç¯ï¼ˆåŒé—ªç¯ï¼‰ï¼Œä»¥ç¤ºè¯†åˆ«</p><ul><li>æœ‰ä¸€è¾†é¢†å¤´è½¦è¾†ï¼ˆé€šå¸¸æ˜¯ä¸€è¾†æŒ‚ç€é—ªå…‰ç¯å’Œè‘¬ç¤¼æ——å¸œçš„é»‘è‰²è½¿è½¦ï¼‰ï¼Œåé¢è·Ÿç€çµè½¦ï¼Œç„¶åæ˜¯è½½æœ‰äº²æœ‹å¥½å‹çš„è½¦è¾†ï¼Œæ‰€æœ‰è½¦è¾†éƒ½æ‰“å¼€äº†å‰ç¯å’Œå¯èƒ½çš„å±é™©è­¦å‘Šç¯</li></ul></li><li><p>å¿…é¡»è®©è¡Œï¼Œä¸å¾—æ’é˜Ÿè¿›å…¥é€è‘¬è½¦é˜Ÿä¸­é—´ï¼Œé å³åœè½¦</p></li><li><p>ä¸å¾—ç©¿æ’é˜Ÿä¼ï¼Œä¸å¾—å°¾éšæˆ–å€Ÿé€è‘¬é˜Ÿä¼å é“</p></li></ul><hr><h4 id="è®©è·¯è§„å®š"><a href="#è®©è·¯è§„å®š" class="headerlink" title="è®©è·¯è§„å®š"></a>è®©è·¯è§„å®š</h4><ul><li><p>é©¾é©¶å‘˜å¿…é¡»è®©è·¯çš„æƒ…å†µ</p></li><li><ol><li><ins>çº¢ç¯å³è½¬æ—¶ï¼Œåœ¨å®Œå…¨åœè½¦åå¿…é¡»è®©è¡Œ</ins></li></ol></li><li><ol start="2"><li>åœ¨<code>STOP</code>æ ‡å¿—æˆ–çº¢ç¯é—ªçƒä¿¡å·å¤„ (é—ªçƒçš„çº¢ç¯) å®Œå…¨åœè½¦å</li></ol><ul><li>è‹¥æ— åœæ­¢çº¿ï¼Œåœåœ¨äººè¡Œæ¨ªé“å‰</li><li>æ— äººè¡Œæ¨ªé“æˆ–åœæ­¢çº¿æ—¶ï¼Œåœåœ¨èƒ½çœ‹åˆ°æ¥è½¦çš„ä½ç½®</li></ul></li><li><ol start="3"><li><ins>çº¢ç¯ä¸‹ï¼Œä»å•è¡Œé“å·¦è½¬åˆ°å¦ä¸€æ¡å•è¡Œé“ï¼Œä¸”æœ‰è½¦è¾†å‘å·¦è¡Œé©¶æ—¶</ins>ï¼Œè®©è¡Œ (Figure A)</li></ol></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img035426.png"></p><ul><li><ol start="4"><li>å››è·¯åœè½¦ï¼ˆå››æ–¹åœï¼Œå››å‘ STOPï¼‰è·¯å£</li></ol><ul><li>è°å…ˆåœï¼Œè°å…ˆèµ°</li><li><ins>å¦‚æœåŒæ—¶åˆ°è¾¾ï¼Œå·¦ä¾§è½¦è¾†è®©å³ä¾§è½¦è¾†å…ˆè¡Œ</ins> (Figure B)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img035426.png"></p><ul><li><ol start="5"><li>å½“è¿›å…¥<ins>æœ‰é—ªçƒé»„è‰²ç®­å¤´</ins>çš„è·¯å£æ—¶</li></ol></li><li><ol start="6"><li>æ— äººç®¡æ§çš„æ™®é€šè·¯å£ï¼Œ<ins>å·¦ä¾§è½¦è¾†è®©å³ä¾§è½¦è¾†å…ˆè¡Œ</ins></li></ol></li><li><ol start="7"><li>å·¦è½¬æ—¶é‡å¯¹é¢æ¥è½¦ï¼Œå¿…é¡»ç­‰æ¥è½¦é€šè¿‡æˆ–è®©è¡Œ</li></ol><ul><li><ins>å¦‚æœåœ¨ç»¿ç¯äº®æ—¶è¿›å…¥è·¯å£ï¼Œå³ä½¿ç¯å˜æˆçº¢ç¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®Œæˆè½¬å¼¯</ins></li></ul></li><li><ol start="8"><li>é‡åˆ°<code>MERGE</code>åˆæµæ ‡å¿—æ—¶ï¼Œè°ƒæ•´è½¦é€Ÿé¿è®©ä¸»è·¯è½¦è¾†ï¼Œé¿å…ç¢°æ’</li></ol></li><li><ol start="9"><li>é‡åˆ°<code>YIELD</code>è®©è¡Œæ ‡å¿—æ—¶ï¼Œå‡é€Ÿæˆ–åœè½¦é¿è®©ï¼Œç¡®ä¿å®‰å…¨</li></ol></li><li><ol start="10"><li>ç»¿ç¯æ—¶ï¼Œå¦‚æœè·¯å£å†…æœ‰è½¦æœªæ¸…ç©ºï¼Œå¿…é¡»ç­‰å¾… (é’ˆå¯¹ç¬¬7ç‚¹)</li></ol></li><li><ol start="11"><li>ä» å··å­ã€å»ºç­‘ç‰©ã€ç§äººé“è·¯æˆ–è½¦é“å‡ºæ¥æ—¶ï¼Œå…ˆåœè½¦ï¼Œåè®©è¡Œ (Figure C)</li></ol></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img035426.png"></p><ul><li><ol start="12"><li>åœ¨â€œTå­—è·¯å£â€å‡†å¤‡è¿›å…¥ä¸»è·¯æ—¶ï¼ˆä¸»è·¯æ— ä»»ä½•äº¤é€šæ ‡å¿—æˆ–ä¿¡å·ç¯ï¼‰ï¼Œè®©è¡Œä¸»è·¯æ‰€æœ‰è½¦è¾† (Figure D)</li></ol></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img035426.png"></p><ul><li><ol start="13"><li>é‡åˆ°é¸£ç¬›+é—ªç¯çš„åº”æ€¥è½¦è¾† (æ•‘æŠ¤è½¦)ï¼Œå¿…é¡»è®©è¡Œ</li></ol></li></ul><p>ç¦æ­¢è¡Œä¸º</p><ul><li>å¦‚æœå‰æ–¹æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è®©è½¦é¡ºåˆ©é€šè¿‡æ•´ä¸ªè·¯å£ï¼Œå°±ä¸å¯ä»¥å¼€è¿›è·¯å£<ul><li>å‰é¢å µè½¦æˆ–è€…è¡Œäººè¿‡é©¬è·¯ï¼Œè¢«å µä½ï¼ŒæŒ¡ä½å…¶ä»–æ–¹å‘æ¥è½¦æˆ–è€…è¡Œäººé“ä¸Šçš„è¡Œäºº</li></ul></li><li>ä¸å¾—é©¶å…¥é“è·¯é“å£ï¼ˆç«è½¦é“ï¼‰ï¼Œé™¤éå‰æ–¹æœ‰ç©ºé—´å®‰å…¨é€šè¿‡<ul><li>å¼€è½¦æ¥åˆ°é“è·¯é“å£ï¼Œå‰é¢æ’äº†å¾ˆå¤šè½¦ï¼Œè½¦é˜Ÿç§»åŠ¨å¾—å¾ˆæ…¢</li></ul></li></ul><hr><h4 id="è¡Œäººä¼˜å…ˆæƒè§„å®š"><a href="#è¡Œäººä¼˜å…ˆæƒè§„å®š" class="headerlink" title="è¡Œäººä¼˜å…ˆæƒè§„å®š"></a>è¡Œäººä¼˜å…ˆæƒè§„å®š</h4><ul><li><p>å¿…é¡»åœè½¦è®©è¡Œçš„æƒ…å†µï¼ˆå®Œå…¨åœè½¦ å¹¶ è®©è¡Œäººå…ˆè¿‡ï¼‰</p><ul><li>è¡Œäººåœ¨æœ‰æ ‡çº¿çš„äººè¡Œæ¨ªé“å†…æ—¶ï¼ˆMarked Crosswalkï¼‰</li><li>å­¦æ ¡åŒºåŸŸå†…çš„æ–‘é©¬çº¿é™„è¿‘æœ‰å„¿ç«¥æ—¶ï¼Œå°¤å…¶åœ¨ä¸Šå­¦æ—¥</li><li>æœ‰æ®‹ç–¾äººå£«ï¼ˆåŒ…æ‹¬è‚¢ä½“ã€å¬åŠ›æˆ–è§†åŠ›éšœç¢ï¼‰è¿‡é©¬è·¯æ—¶</li></ul></li><li><p>å¿…é¡»å‡é€Ÿæˆ–åœè½¦è®©è¡Œçš„å…¶ä»–æƒ…å†µ</p><ul><li>æ²¡æœ‰çº¢ç»¿ç¯ç®¡æ§çš„æ— æ ‡çº¿äººè¡Œæ¨ªé“</li><li>åœ¨ä»»ä½•è·¯å£è½¬å¼¯æ—¶</li><li>çº¢ç¯å…è®¸å³è½¬æ—¶ï¼Œè½¬å¼¯å‰å¿…é¡»å…ˆåœè½¦ï¼Œå¹¶è®©è¡Œäººå…ˆè¿‡</li><li>åœ¨<code>STOP</code>åœæ­¢æ ‡å¿—æˆ–çº¢ç¯é—ªçƒå¤„åœè½¦åï¼Œå¦‚æœæœ‰è¡Œäººï¼Œå¿…é¡»è®©è¡Œäººå…ˆèµ°</li><li>è¡Œäººåœ¨äº¤é€šç¯å˜ç¯å‰å·²è¿›å…¥äººè¡Œæ¨ªé“æ—¶ï¼Œå¿…é¡»ç­‰è¡Œäººå…ˆè¿‡å®Œ</li><li>åœ¨é—ªçƒé»„è‰²ç®­å¤´çš„è·¯å£è½¬å¼¯æ—¶ï¼Œè®©è¡Œäººå…ˆè¿‡</li></ul></li></ul><hr><h4 id="è¶…è½¦è§„å®š"><a href="#è¶…è½¦è§„å®š" class="headerlink" title="è¶…è½¦è§„å®š"></a>è¶…è½¦è§„å®š</h4><p>ä¸¤è½¦é“å…¬è·¯ä¸Šè¶…è½¦</p><ul><li><p>å·¦ä¾§è½¦é“å¿…é¡»æ¸…æ™°å¯è§ï¼Œä¸”æ²¡æœ‰è¿é¢æ¥è½¦ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿè·ç¦»å®Œæˆè¶…è½¦</p></li><li><p><ins>è¶…è½¦å®Œæˆåï¼Œå¿…é¡»ç­‰åˆ°è¢«è¶…è½¦è¾†åœ¨ä½ çš„åè§†é•œé‡Œå®Œå…¨å¯è§ï¼Œæ‰å¯ä»¥å®‰å…¨è¿”å›åŸè½¦é“</ins> (æ„æ€å°±æ˜¯è¶…è½¦è¿‡åä¸èƒ½é©¬ä¸Šæ”¹å˜è½¦é“å›å»)</p></li><li><p>åœ¨ä¸è¿é¢è½¦è¾†ç›¸è· 200 è‹±å°ºå†…ï¼Œå¿…é¡»å›åˆ°è‡ªå·±çš„è½¦é“ï¼Œä¸å¾—ç»§ç»­å ç”¨å¯¹é¢è½¦é“è¶…è½¦</p></li><li><p>è¢«è¶…è½¦è¾†ä¸å¾—åŠ é€Ÿï¼Œå¿…é¡»é…åˆä½ å®Œæˆè¶…è½¦åŠ¨ä½œ</p></li><li><p>ç¦æ­¢é€šè¿‡é—ªç¯æˆ–æ‰“è½¬å‘ç¯æé†’å¯¹æ–¹â€œå¯ä»¥è¶…è½¦â€ï¼Œè¿™ç§åšæ³•è¿æ³•</p></li><li><p>ç¦æ­¢å¼€è½¦å‹è·¯è‚©æˆ–é©¶ç¦»ä¸»é“è¿›è¡Œè¶…è½¦ï¼Œä¸è®ºæ˜¯å·¦è¾¹è¿˜æ˜¯å³è¾¹</p></li></ul><p>å“ªäº›æƒ…å†µä¸‹å¯ä»¥ä»å³ä¾§è¶…è½¦</p><ul><li>å‰è½¦å‡†å¤‡å·¦è½¬æˆ–æ­£åœ¨å·¦è½¬ï¼Œä½ å³ä¾§æœ‰è¶³å¤Ÿç©ºé—´</li><li>å•è¡Œé“ï¼Œæˆ–æ¯ä¸ªæ–¹å‘æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šè½¦é“çš„é“è·¯</li><li>ä¸ºè¶…è½¦è€Œæ‹“å®½çš„è·¯å£åŒºåŸŸ</li></ul><p>ç¦æ­¢è¶…è½¦çš„æƒ…å†µ</p><ul><li>åœ¨é“è·¯ä¸­é—´æ˜¯é»„è‰²å®çº¿æˆ–æœ‰â€œç¦æ­¢è¶…è½¦â€(<code>DO NOT PASS</code>)æ ‡å¿—çš„åŒºåŸŸ</li><li>åœ¨ä¸Šå¡æˆ–å¼¯é“ï¼Œæ— æ³•æ¸…æ¥šçœ‹åˆ°å¯¹å‘æ¥è½¦çš„åœ°æ–¹</li><li>åœ¨è·ç¦»äº¤å‰è·¯å£æˆ–é“è·¯é“å£100è‹±å°ºä»¥å†…</li><li>åœ¨æ¡¥æ¢ã€å¤©æ¡¥æˆ–éš§é“ä¸­ï¼Œå¦‚æœè§†çº¿å—é˜»ï¼Œä¸”è·ç¦»éšœç¢ç‰©ä¸è¶³100è‹±å°º</li><li>å½“å‰æ–¹è½¦è¾†å› è®©è¡Œäººè€Œåœåœ¨æ–‘é©¬çº¿æˆ–è·¯å£æ—¶</li><li>åœ¨æ–½å·¥åŒºåŸŸï¼Œæ— è®ºæœ‰æ— æ ‡å¿—ï¼Œä¸€å¾‹ç¦æ­¢è¶…è½¦</li><li>åœ¨éƒŠåŒºï¼ˆéå¸‚åŒºï¼‰çš„å­¦æ ¡åŒºåŸŸå†…</li><li>åœ¨å¸‚åŒºå†…æœ‰æ ‡ç¤ºçš„å­¦æ ¡åŒºåŸŸ</li><li>å½“æ ¡è½¦åœé ä¸Šä¸‹å­¦ç”Ÿï¼Œä¸”åœè½¦æ ‡å¿—è‡‚ä¼¸å‡ºã€çº¢ç¯é—ªçƒæ—¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img316518.png"></p><hr><h4 id="è½¦é“ä½¿ç”¨"><a href="#è½¦é“ä½¿ç”¨" class="headerlink" title="è½¦é“ä½¿ç”¨"></a>è½¦é“ä½¿ç”¨</h4><ul><li><p><ins>é€šå¸¸æƒ…å†µä¸‹: å¿…é¡»é å³ä¾§è¡Œé©¶</ins>ï¼Œé™¤éç¬¦åˆä»¥ä¸‹ä¾‹å¤–æƒ…å†µ</p></li><li><p>å…è®¸ä¸é å³ä¾§è¡Œé©¶çš„æƒ…å†µ</p><ul><li>è¶…è½¦æ—¶: åœ¨ä¸¤è½¦é“æˆ–é«˜é€Ÿå…¬è·¯&#x2F;å—æ§é«˜é€Ÿå…¬è·¯ä¸Šï¼Œè¶…è½¦æ—¶å¯ä»¥å ç”¨å·¦è½¦é“</li><li>å³ä¾§è¢«é˜»æŒ¡: é‡åˆ°éšœç¢ï¼ˆå¦‚åœç€çš„è½¦ã€è·¯éšœï¼‰ï¼Œå¿…é¡»è®©è¡Œå¯¹å‘è½¦è¾†åï¼Œç»•é“å·¦ä¾§è¡Œé©¶</li><li>é“è·¯åˆ’åˆ†ä¸ºä¸‰æ¡è½¦é“: æŒ‰ç…§è½¦é“æ ‡çº¿åˆ†æµï¼Œä¸ä¸€å®šéè¦é å³</li><li>å•è¡Œé“: æœ‰ä¸¤æ¡åŠä»¥ä¸Šè½¦é“æ—¶ï¼Œå¯åœ¨ä»»ä¸€è½¦é“è¡Œé©¶</li><li>äº¤é€šæ ‡å¿—æŒ‡ç¤º: å¤šè½¦é“åŒå‘å…¬è·¯ä¸Šï¼Œå¦‚æœæœ‰äº¤é€šæ ‡å¿—æŒ‡ç¤ºéœ€ä½¿ç”¨å·¦è½¦é“ï¼ŒæŒ‰è§„å®šè¡Œé©¶</li><li>å·¦è½¬æ—¶: ä»å··å­ã€ç§äººé“è·¯ã€è½¦é“å·¦è½¬è¿›å…¥é©¬è·¯ï¼Œæˆ–å‡†å¤‡å·¦è½¬æ—¶</li><li>é¿è®©ç´§æ€¥æˆ–æ•…éšœè½¦è¾†: é‡åˆ°åœåœ¨è·¯è¾¹çš„åº”æ€¥è½¦è¾†æˆ–æ•…éšœè½¦è¾†ï¼Œé¡»å˜æ›´è‡³å·¦è½¦é“é¿è®©</li><li>å³ä¾§æ–½å·¥: é“è·¯å³ä¾§æ–½å·¥æˆ–å°é—­æ—¶ï¼Œé¡»è¿›å…¥å·¦è½¦é“</li></ul></li><li><p><ins>é«˜é€Ÿå…¬è·¯&#x2F;å—æ§é«˜é€Ÿå…¬è·¯ç‰¹åˆ«è§„å®š: å·¦è½¦é“ä»…ç”¨äºè¶…è½¦</ins>ï¼Œé™¤éä»¥ä¸‹æƒ…å†µ</p><ul><li>äº¤é€šçŠ¶å†µ&#x2F;æ‹¥å µä½¿å³è½¦é“è¡Œé©¶ä¸åˆ‡å®é™…</li><li>å¤©æ°”çŠ¶å†µä½¿æ‚¨å¿…é¡»ä½¿ç”¨å·¦è½¦é“</li><li>å³è½¦é“æœ‰éšœç¢ç‰©æˆ–å±é™©</li><li>æ‚¨æ­£åœ¨å˜é“ä»¥è®©è·¯ç»™ç´§æ€¥è½¦è¾†æˆ–æ–½å·¥è½¦è¾†</li></ul></li></ul><hr><h4 id="è½¬å‘ç¯è§„å®š"><a href="#è½¬å‘ç¯è§„å®š" class="headerlink" title="è½¬å‘ç¯è§„å®š"></a>è½¬å‘ç¯è§„å®š</h4><ul><li><p>æ‰“ç¯çš„ä¸¤ç§æ–¹æ³•</p></li><li><p>ç”µå­è½¬å‘ç¯: å³è½¬ â¡ï¸ æ‰“å³è½¬ç¯ï¼Œå·¦è½¬ â¬…ï¸ æ‰“å·¦è½¬ç¯</p></li><li><p>æ‰‹åŠ¿ä¿¡å·ï¼ˆHand and Arm Signalsï¼‰ï¼ˆå¦‚ç”µå­ç¯åäº†æ—¶å¿…é¡»ä½¿ç”¨ï¼‰</p><ul><li>å³è½¬: å·¦æ‰‹å‘ä¸Šä¸¾ï¼Œæ‰‹æŒå¹³ä¼¸ï¼Œå‘ˆ90åº¦ç›´è§’å‘ä¸Š</li><li>å·¦è½¬: å·¦æ‰‹å¹³ç›´ä¼¸å‘å·¦ä¾§</li><li>å‡é€Ÿæˆ–åœè½¦: å·¦æ‰‹å‘ä¸‹ä¼¸ï¼Œæ‰‹æŒæœåï¼Œå‚ç›´å‘ä¸‹</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img316515.png"></p><hr><h4 id="è½¬å¼¯ã€å˜é“ã€æ‰å¤´"><a href="#è½¬å¼¯ã€å˜é“ã€æ‰å¤´" class="headerlink" title="è½¬å¼¯ã€å˜é“ã€æ‰å¤´"></a>è½¬å¼¯ã€å˜é“ã€æ‰å¤´</h4><p>å³è½¬è§„å®š</p><ul><li>ä»æ­£ç¡®çš„å³è½¬è½¦é“æ‰“å³è½¬ç¯</li><li>è§‚å¯Ÿå·¦ä¾§æ¥è½¦ï¼Œç¡®ä¿å®‰å…¨</li><li><ins>è½¬å…¥æ‚¨è¦è¿›å…¥çš„é“è·¯çš„å³ä¾§è½¦é“</ins></li></ul><p>å·¦è½¬è§„å®š</p><ul><li>ä»æ­£ç¡®çš„å·¦è½¬è½¦é“æ‰“å·¦è½¬ç¯</li><li>è§‚å¯Ÿæ‰€æœ‰æ–¹å‘çš„æ¥è½¦ï¼Œç¡®è®¤å®‰å…¨</li><li><ins>å®Œæˆè½¬å¼¯ï¼Œè¿›å…¥æœ€æ¥è¿‘é¢„å®šæ–¹å‘çš„è½¦é“</ins></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img316624.png"></p><p>å˜é“è§„å®š</p><ul><li>ä»å³å‘å·¦å˜é“æ—¶<ul><li>å›å¤´æŸ¥çœ‹å·¦åæ–¹ç›²åŒºï¼Œç¡®è®¤æ²¡æœ‰æ¥è½¦</li><li>æ‰“å·¦è½¬ç¯ç¤ºæ„å˜é“æ„å›¾</li><li>åœ¨ç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œç¼“æ…¢è€Œå¹³ç¨³åœ°å˜é“</li></ul></li><li>ä»å·¦å‘å³å˜é“æ—¶<ul><li>å›å¤´æŸ¥çœ‹å³åæ–¹ç›²åŒºï¼Œç¡®è®¤æ²¡æœ‰æ¥è½¦</li><li>æ‰“å³è½¬ç¯ç¤ºæ„å˜é“æ„å›¾</li><li>åœ¨ç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œç¼“æ…¢è€Œå¹³ç¨³åœ°å˜é“</li></ul></li></ul><p>æ‰å¤´è§„å®š</p><ul><li>é™¤éæ‚¨èƒ½çœ‹åˆ°è‡³å°‘ 500 è‹±å°ºçš„å„ä¸ªæ–¹å‘ï¼Œå¦åˆ™æ‚¨ä¸å¾—åœ¨å¼¯â€‹â€‹é“å’Œå±±ä¸˜ä¸Šæ‰å¤´ã€‚å¸‚æ”¿å½“å±€å¯èƒ½ç¦æ­¢åœ¨æŸäº›é“è·¯ä¸Šæ‰å¤´</li></ul><p>å±é™©ä¿¡å·</p><ul><li>åŒæ—¶æ‰“å¼€å·¦å³è½¬å‘ç¯ï¼ˆåŒé—ªç¯ï¼‰ï¼Œè¡¨ç¤ºæ•…éšœè½¦è¾†æˆ–ä¸´æ—¶åœé è½¦è¾†ï¼Œç”¨äºè­¦ç¤ºå…¶ä»–å¸æœºæ³¨æ„é¿è®©</li></ul><p>åŒå‘å·¦è½¬è½¦é“</p><ul><li>è·¯ä¸­é—´åˆ’æœ‰å·¦å³åŒå‘ç®­å¤´çš„ä¸“ç”¨å·¦è½¬åŒºï¼Œä¸“ä¾›ç­‰å€™å·¦è½¬è¿›&#x2F;å‡ºé“è·¯ã€å··å­ã€è½¦é“</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/imgimage002.jpg"></p><hr><h4 id="ç¯å½¢äº¤å‰å£"><a href="#ç¯å½¢äº¤å‰å£" class="headerlink" title="ç¯å½¢äº¤å‰å£"></a>ç¯å½¢äº¤å‰å£</h4><ul><li><p>ç¯å½¢äº¤å‰å£: ä¸€ç§ç»•ä¸­å¿ƒå²›ä»¥é€†æ—¶é’ˆæ–¹å‘ï¼ˆCounter-clockwiseï¼‰è¡Œé©¶çš„äº¤å‰è·¯å£</p><ul><li><ins>è¿›å…¥å’Œç¦»å¼€ç¯å²›æ—¶ï¼Œå¿…é¡»è®©è¡Œæ‰€æœ‰è½¦è¾†ã€è¡Œäººå’Œè‡ªè¡Œè½¦</ins></li></ul></li><li><p>é€šè¿‡ç¯å½¢äº¤å‰å£æ­¥éª¤</p><ul><li>å‡é€Ÿæ…¢è¡Œï¼Œå‡†å¤‡è¿›å…¥ç¯å²›</li><li>è§‚å¯Ÿäº¤é€šæ ‡å¿—å’Œåœ°é¢æ ‡çº¿ï¼Œæ³¨æ„æ˜¯å¦æœ‰ç¦æ­¢æŸäº›æ–¹å‘çš„æç¤º</li><li>å½“å®‰å…¨æ—¶ï¼Œå‘å³è¿›å…¥ç¯å²›</li><li>ä¿æŒåœ¨è‡ªå·±çš„è½¦é“ï¼Œä¸éšæ„æ¢é“</li><li>å‡†å¤‡ç¦»å¼€ç¯å²›æ—¶æ‰“å³è½¬ç¯ï¼Œå‘ŠçŸ¥å…¶ä»–è½¦è¾†ä½ å°†å‡ºå£</li></ul></li></ul><hr><h4 id="ç‰¹æ®Šåœè½¦è§„å®š"><a href="#ç‰¹æ®Šåœè½¦è§„å®š" class="headerlink" title="ç‰¹æ®Šåœè½¦è§„å®š"></a>ç‰¹æ®Šåœè½¦è§„å®š</h4><ul><li><p>æ ¡è½¦ï¼ˆSchool Busesï¼‰åœè½¦è§„å®š</p><ul><li><ins>å½“æ ¡è½¦åœé ä¸Šä¸‹ä¹˜å®¢ã€å¼€å¯é—ªå…‰ç¯ã€ä¼¸å‡ºåœè½¦æ ‡å¿—ç‰Œæ—¶ï¼ŒåŒå‘æ¥è½¦å’ŒåŒå‘è·Ÿè½¦éƒ½å¿…é¡»åœè½¦ï¼Œç›´åˆ°åœè½¦æ ‡å¿—æ”¶å›ã€é—ªå…‰ç¯ç†„ç­ã€æˆ–å¸æœºç¤ºæ„å¯ä»¥é€šè¡Œ</ins></li></ul></li><li><p>é“è·¯é“å£ï¼ˆRailroad Crossingsï¼‰åœè½¦è§„å®š</p><ul><li>è·ç¦»é“è½¨ 15-50è‹±å°º å†…åœè½¦ï¼Œä»¥ä¸‹æƒ…å†µ: æœ‰åœè½¦æ ‡å¿—ã€é—ªå…‰ç”µç¯å¼€å¯ã€æ æ†æ”¾ä¸‹ã€ç«è½¦ä¸´è¿‘&#x2F;å‘å‡ºè­¦å‘Š</li><li>æ— æç¤ºè®¾å¤‡ï¼ˆä»…æœ‰é“è·¯äº¤å‰æ ‡å¿—ï¼‰çš„å¤„ç†: å‡é€Ÿï¼Œè§‚å¯Ÿä¸¤ä¾§è½¨é“ï¼Œå¬å£°éŸ³ï¼Œç¡®è®¤æ— ç«è½¦ï¼Œå†é€šè¿‡</li><li>å¦‚æœè½¦è¢«å¡åœ¨è½¨é“: ç«‹åˆ»ä¸‹è½¦ï¼Œä»¥ä¸ç«è½¦æˆ 45 åº¦è§’çš„æ–¹å‘é€ƒç¦»ï¼Œæ‹¨æ‰“ 911</li></ul></li><li><p>å··é“&#x2F;è½¦é“å‡ºå£ï¼ˆAlleys&#x2F;Drivewaysï¼‰åœè½¦è§„å®š</p><ul><li>å®Œå…¨åœè½¦ï¼Œè®©è¡Œäººã€è½¦è¾†ä¼˜å…ˆ</li></ul></li></ul><hr><h4 id="åœè½¦è§„åˆ™"><a href="#åœè½¦è§„åˆ™" class="headerlink" title="åœè½¦è§„åˆ™"></a>åœè½¦è§„åˆ™</h4><p>å¡é“åœè½¦</p><ul><li>åœ¨å¡é“åœè½¦æ—¶ï¼Œå¿…é¡»æ­£ç¡®è°ƒæ•´è½¦è½®æ–¹å‘ï¼Œä»¥é˜²è½¦è¾†æ»‘åŠ¨<ul><li><ins>ä¸‹å¡æ—¶ï¼ˆæœ‰è·¯ç¼˜ï¼‰ï¼šå°†å‰è½®æœå‘è·¯ç¼˜ï¼Œè¿™æ ·å¦‚æœè½¦è¾†æ»‘åŠ¨ï¼Œä¼šè¢«è·¯ç¼˜æŒ¡ä½</ins></li><li><ins>ä¸Šå¡æ—¶ï¼ˆæœ‰è·¯ç¼˜ï¼‰ï¼šå°†å‰è½®è¿œç¦»è·¯ç¼˜ï¼Œè®©è½¦è½®é ä½è·¯ç¼˜ï¼Œé˜²æ­¢è½¦è¾†åæ»‘</ins></li><li><ins>ä¸Šå¡æˆ–ä¸‹å¡æ—¶ï¼ˆæ— è·¯ç¼˜ï¼‰ï¼šå°†å‰è½®æœå‘è·¯è¾¹ï¼Œä»¥ç¡®ä¿æ»‘åŠ¨æ—¶ä¸ä¼šå†²å…¥è½¦é“</ins></li></ul></li><li>åœè½¦åï¼ŒåŠ¡å¿…æŒ‚Pæ¡£ï¼ˆè‡ªåŠ¨æŒ¡ï¼‰æˆ–æ‰‹åˆ¹ï¼ˆæ‰‹åŠ¨æŒ¡ï¼‰ï¼Œå¹¶æ‹‰èµ·æ‰‹åˆ¹ï¼Œç¡®ä¿è½¦è¾†å›ºå®šã€‚åœ¨å¯åŠ¨è½¦è¾†ç¦»å¼€æ—¶ï¼Œæ£€æŸ¥æ¥è½¦ï¼Œé‡Šæ”¾æ‰‹åˆ¹ï¼Œæ‰“å¼€è½¬å‘ç¯åå®‰å…¨é©¶ç¦»</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img224340.png"></p><p>å¹³è¡Œåœè½¦</p><ul><li>åœ¨åŒå‘è½¦é“åœè½¦æ—¶ï¼Œè½¦è¾†çš„å³ä¾§è½¦è½®å¿…é¡»è·ç¦»è·¯ç¼˜ä¸è¶…è¿‡12è‹±å¯¸ã€‚åœ¨å•è¡Œé“ä¸Šåœè½¦æ—¶ï¼Œå¯ä»¥åœåœ¨é“è·¯çš„ä»»æ„ä¸€ä¾§ï¼Œä½†å¿…é¡»ä¸è½¦è¾†è¡Œé©¶æ–¹å‘ä¸€è‡´</li></ul><p>æ®‹ç–¾äººåœè½¦ä½</p><ul><li>æ®‹ç–¾äººä¸“ç”¨åœè½¦ä½ä»…é™æŒæœ‰æœ‰æ•ˆæ®‹ç–¾äººåœè½¦è¯æˆ–æ®‹ç–¾äººè½¦ç‰Œçš„è½¦è¾†ä½¿ç”¨ã€‚</li></ul><p>ç”µåŠ¨è½¦åœè½¦ä½</p><ul><li>ä¸€äº›åœè½¦åœºè®¾æœ‰ç”µåŠ¨è½¦ä¸“ç”¨åœè½¦ä½ï¼Œé€šå¸¸é…å¤‡å……ç”µæ¡©ã€‚è¿™äº›è½¦ä½ä»…ä¾›ç”µåŠ¨è½¦ä½¿ç”¨ï¼Œæ™®é€šç‡ƒæ²¹è½¦ä¸å¾—å ç”¨ï¼Œå¦åˆ™å¯èƒ½ä¼šé¢ä¸´ç½šæ¬¾æˆ–æ‹–è½¦å¤„ç†</li></ul><hr><h4 id="ç¦æ­¢åœè½¦ã€åœç•™æˆ–ä¸´æ—¶åœè½¦çš„è§„å®š"><a href="#ç¦æ­¢åœè½¦ã€åœç•™æˆ–ä¸´æ—¶åœè½¦çš„è§„å®š" class="headerlink" title="ç¦æ­¢åœè½¦ã€åœç•™æˆ–ä¸´æ—¶åœè½¦çš„è§„å®š"></a>ç¦æ­¢åœè½¦ã€åœç•™æˆ–ä¸´æ—¶åœè½¦çš„è§„å®š</h4><p>åœ¨æŸäº›åœ°ç‚¹ç¦æ­¢åœè½¦ã€åœç•™ï¼ˆçŸ­æš‚åœé ï¼‰æˆ–ä¸´æ—¶åœè½¦ï¼Œå³ä½¿æ²¡æœ‰æ ‡å¿—ï¼Œä¹Ÿå¿…é¡»éµå®ˆç›¸å…³è§„å®šã€‚æ­¤å¤–ï¼Œå„åœ°æ”¿åºœå¯èƒ½ä¼šè®¾ç«‹é¢å¤–çš„åœè½¦é™åˆ¶ï¼Œéœ€è¦æ³¨æ„äº¤é€šæ ‡å¿—æŒ‡ç¤º</p><ul><li>åœåœ¨å·²åœæ”¾è½¦è¾†æ— (å°±æ˜¯åœåœ¨å·²ç»åœç€çš„è½¦çš„æ—è¾¹)</li><li>äººè¡Œé“ã€æ–‘é©¬çº¿æˆ–äº¤å‰è·¯å£å†…</li><li>å®‰å…¨åŒºåŸŸï¼ˆå¦‚å…¬äº¤ç«™å°ï¼‰ä¸è·¯ç¼˜ä¹‹é—´</li><li>è‡ªè¡Œè½¦é“å†…ï¼ˆåŒ…æ‹¬åˆ’çº¿ã€è‡ªè¡Œè½¦ç¼“å†²åŒºæˆ–ç”¨æŠ¤æ éš”å¼€çš„è½¦é“ï¼‰</li><li>é è¿‘æ–½å·¥åŒºåŸŸæˆ–ä»»ä½•å¯èƒ½é˜»ç¢äº¤é€šçš„ä½ç½®</li><li>æ¡¥æ¢ã€å¤©æ¡¥ã€é“è·¯è½¨é“æˆ–å…¬è·¯éš§é“å†…</li><li>é«˜é€Ÿå…¬è·¯æˆ–å—æ§å…¬è·¯ï¼ˆåªèƒ½åœ¨æŒ‡å®šå…¥å£æˆ–å‡ºå£ä¸Šä¸‹ï¼‰</li><li>åˆ†éš”å…¬è·¯çš„ä¸­å¤®éš”ç¦»å¸¦ï¼ˆåŒ…æ‹¬ç”¨äºç´§æ€¥æ‰å¤´çš„åŒºåŸŸï¼‰</li></ul><p>ç¦æ­¢åœè½¦æˆ–ä¸´æ—¶åœç•™ï¼ˆå³ä½¿è½¦ä¸Šæœ‰äººï¼‰çš„åœ°ç‚¹</p><ul><li>å…¬å…±æˆ–ç§äººè½¦é“å‰ï¼ˆä¸èƒ½æŒ¡ä½è¿›å‡ºï¼‰</li><li>æ¶ˆé˜²æ “ 15 è‹±å°ºèŒƒå›´å†…</li><li>æ¶ˆé˜²ç«™å‡ºå…¥å£ 20 è‹±å°ºèŒƒå›´å†…ï¼Œä»¥åŠäº¤å‰è·¯å£çš„æ–‘é©¬çº¿ 20 è‹±å°ºå†…</li><li>STOP æ ‡å¿—ã€YIELD æ ‡å¿—æˆ–çº¢ç»¿ç¯ 30 è‹±å°ºèŒƒå›´å†…</li><li>é“è·¯é“å£ 50 è‹±å°ºèŒƒå›´å†…</li></ul><hr><h4 id="é¢å¤–äº¤é€šæ³•è§„"><a href="#é¢å¤–äº¤é€šæ³•è§„" class="headerlink" title="é¢å¤–äº¤é€šæ³•è§„"></a>é¢å¤–äº¤é€šæ³•è§„</h4><ul><li>ä¸å¾—å‘è¡Œé©¶è½¦è¾†æŠ•æ·ç‰©å“</li><li>ç¦æ­¢é©¶ä¸Šäººè¡Œé“ï¼Œé™¤éè¯¥äººè¡Œé“æ˜¯è½¦é“çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ç§äººè½¦é“çš„å‡ºå…¥å£</li><li>ä¸å¾—è¶…è½½</li><li>ä¸å¾—åˆ¶é€ å™ªéŸ³æ±¡æŸ“</li></ul><hr><h3 id="2-é“è·¯å…±ç”¨"><a href="#2-é“è·¯å…±ç”¨" class="headerlink" title="2. é“è·¯å…±ç”¨"></a>2. é“è·¯å…±ç”¨</h3><h4 id="ä¸è¡Œäººå…±ç”¨é“è·¯"><a href="#ä¸è¡Œäººå…±ç”¨é“è·¯" class="headerlink" title="ä¸è¡Œäººå…±ç”¨é“è·¯"></a>ä¸è¡Œäººå…±ç”¨é“è·¯</h4><p>åœ¨æ³•å¾‹ä¸­ï¼Œâ€œè¡Œäººâ€ä¸ä»…æŒ‡èµ°è·¯çš„äººï¼Œè¿˜åŒ…æ‹¬</p><ul><li>ä½¿ç”¨æ»‘æ¿ã€<strong>è½®æ»‘ï¼ˆin-line speed skatesï¼‰</strong>çš„äºº</li><li>ä½¿ç”¨è½®æ¤…ã€å¯¼ç›²çŠ¬ã€ç™½æ‰‹æ–ç­‰è¾…åŠ©å·¥å…·çš„æ®‹éšœäººå£«</li><li>è¡ŒåŠ¨ä¸ä¾¿ã€è§†åŠ›æˆ–å¬åŠ›å—é™è€…ä¹Ÿéƒ½å±äºè¡Œäºº</li></ul><p>è¡Œäººä¸é©¾é©¶å‘˜çš„å…±åŒè´£ä»»</p><ul><li>è¡Œäººä¸é©¾é©¶å‘˜éƒ½åº”ä¸ºäº¤é€šå®‰å…¨è´Ÿè´£</li><li>é©¾é©¶å‘˜åº”å§‹ç»ˆå‡†å¤‡è®©è¡Œäººä¼˜å…ˆé€šè¡Œï¼Œå°¤å…¶ä¸è¦è´´å¤ªè¿‘</li></ul><hr><h4 id="å„¿ç«¥ä¸äº¤é€šå®‰å…¨"><a href="#å„¿ç«¥ä¸äº¤é€šå®‰å…¨" class="headerlink" title="å„¿ç«¥ä¸äº¤é€šå®‰å…¨"></a>å„¿ç«¥ä¸äº¤é€šå®‰å…¨</h4><p>é©¾é©¶å‘˜é¡»æ³¨æ„</p><ul><li>ç‰¹åˆ«æ³¨æ„å±é™©åŒºåŸŸæ ‡å¿—ï¼šå¦‚å­¦æ ¡åŒºåŸŸã€æ ¡è½¦ä¸Šä¸‹å®¢ç‚¹ã€æ¸¸ä¹åœºã€å…¬å›­ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å„¿ç«¥é«˜é¢‘å‡ºæ²¡åŒºåŸŸ</li><li>åœ¨å±…æ°‘åŒºã€å­¦æ ¡å‘¨è¾¹æˆ–æœ‰å­©å­å¯èƒ½å‡ºç°çš„åœ°æ–¹ï¼ŒåŠ¡å¿…æå‰å‡é€Ÿã€ä¿æŒè­¦è§‰</li><li>å€’è½¦è¿›å‡ºè½¦é“æ—¶ï¼Œå°¤å…¶è¦å°å¿ƒï¼Œå„¿ç«¥ä¸ªå­çŸ®å°ï¼Œå®¹æ˜“å‡ºç°åœ¨ç›²åŒº</li><li>ç•™æ„çªç„¶è·‘å‡ºé©¬è·¯çš„å­©å­ï¼Œä¸è¦æŒ‡æœ›å­©å­çŸ¥é“äº¤é€šè§„åˆ™ï¼Œè¦é ä½ é˜²èŒƒ</li></ul><hr><h4 id="ä¸æ‘©æ‰˜è½¦å…±ç”¨é“è·¯"><a href="#ä¸æ‘©æ‰˜è½¦å…±ç”¨é“è·¯" class="headerlink" title="ä¸æ‘©æ‰˜è½¦å…±ç”¨é“è·¯"></a>ä¸æ‘©æ‰˜è½¦å…±ç”¨é“è·¯</h4><p>æ‘©æ‰˜è½¦å’Œå…¶ä»–æœºåŠ¨è½¦äº«æœ‰ç›¸åŒçš„é€šè¡Œæƒåˆ©ä¸è´£ä»»ï¼Œä½†ç”±äºæ‘©æ‰˜è½¦ä½“ç§¯å°ã€ç¼ºä¹ä¿æŠ¤ã€å®¹æ˜“å—ä¼¤ï¼Œé©¾é©¶å‘˜åº”ç»™äºˆç‰¹åˆ«æ³¨æ„</p><ul><li>å¾ˆå¤šæ‘©æ‰˜è½¦äº‹æ•…å‘ç”Ÿçš„åŸå› æ˜¯ï¼šé©¾é©¶å‘˜æ²¡æœ‰çœ‹åˆ°æ‘©æ‰˜è½¦ï¼Œæˆ–ä½ä¼°äº†æ‘©æ‰˜è½¦çš„é€Ÿåº¦</li><li>è¶…è¿‡50%çš„æ‘©æ‰˜è½¦äº‹æ•…å‘ç”Ÿåœ¨äº¤å‰è·¯å£, æœ€å¸¸è§æƒ…å½¢æ˜¯ï¼šæ±½è½¦å·¦è½¬æ—¶ï¼Œæ’ä¸Šå¯¹å‘ç›´è¡Œçš„æ‘©æ‰˜è½¦</li><li>å½“æ‘©æ‰˜è½¦ä»ä½ èº«è¾¹è¶…è½¦æ—¶ï¼Œä½ åº”<ul><li>ä¿æŒåŸè½¦é“ï¼Œä¸è¦å‘ä¸€ä¾§æŒªåŠ¨</li><li>ä¿æŒå½“å‰è½¦é€Ÿ</li><li>ç­‰æ‘©æ‰˜è½¦å®Œæˆå˜é“ï¼Œç•™å‡ºç©ºé—´</li></ul></li></ul><hr><h4 id="æ•…éšœè½¦è¾†å¤„ç†è§„å®š"><a href="#æ•…éšœè½¦è¾†å¤„ç†è§„å®š" class="headerlink" title="æ•…éšœè½¦è¾†å¤„ç†è§„å®š"></a>æ•…éšœè½¦è¾†å¤„ç†è§„å®š</h4><p>é è¿‘æ•…éšœè½¦è¾†æ—¶è¯¥æ€ä¹ˆåš</p><ul><li>å½“ä½ åœ¨å››è½¦é“é«˜é€Ÿå…¬è·¯ä¸Šé‡åˆ°ä¸€è¾†å¼€å¯åŒé—ªç¯çš„æŠ›é”šè½¦è¾†æ—¶<ul><li>å¦‚æœå®‰å…¨å¯ä»¥å˜é“ï¼šå¿…é¡»å˜é“è¿œç¦»æ•…éšœè½¦</li><li>å¦‚æœä¸èƒ½å˜é“ï¼šåº”å‡é€Ÿé€šè¿‡ï¼Œä¸è¦é«˜é€Ÿä»æ—è¾¹é©¶è¿‡</li><li>ç›´åˆ°å®Œå…¨è¶…è¿‡è¯¥è½¦è¾†åï¼Œæ‰å¯ä»¥æ¢å¤åŸæœ¬è½¦é€Ÿ</li></ul></li></ul><p>ç¦æ­¢çš„è¡Œä¸º</p><ul><li>ä¸å¾—åœ¨ä¹¡æ‘å…¬è·¯ä¸Šæ¨è½¦ï¼Œé™¤éæ˜¯ç´§æ€¥æƒ…å†µï¼Œä¸”å¿…é¡»å°½å¿«å°†å…¶ç§»é™¤ä»¥é¿å…é€ æˆå±é™©</li><li>ä¸å¾—ç§»èµ°äº‹æ•…è½¦è¾†æ—¶ç•™ä¸‹ç¢ç»ç’ƒæˆ–æ®‹éª¸ã€‚å¿…é¡»å°†æ‰€æœ‰ç¢ç‰‡æ¸…ç†å¹²å‡€</li><li>è½¦è¾†ä¹‹é—´æ‹–è½¦å¿…é¡»ä½¿ç”¨è¿æ¥æ†ï¼ˆdrawbarï¼‰ã€‚åœ¨å¤šæ•°æƒ…å†µä¸‹<ul><li>æ‹–è½¦è·ç¦»ä¸å¾—è¶…è¿‡ 15 è‹±å°º</li><li>å¿…é¡»ä½¿ç”¨ ä¸¤æ ¹é“¾æ¡æˆ–ç¼†ç»³å°†æ‹–è½¦å›ºå®šè¿æ¥</li></ul></li></ul><hr><h3 id="3-é…’åé©¾é©¶-DUI"><a href="#3-é…’åé©¾é©¶-DUI" class="headerlink" title="3. é…’åé©¾é©¶ (DUI)"></a>3. é…’åé©¾é©¶ (DUI)</h3><h4 id="è¡€æ¶²é…’ç²¾æµ“åº¦"><a href="#è¡€æ¶²é…’ç²¾æµ“åº¦" class="headerlink" title="è¡€æ¶²é…’ç²¾æµ“åº¦"></a>è¡€æ¶²é…’ç²¾æµ“åº¦</h4><p>ä»€ä¹ˆæ˜¯ BAC</p><ul><li>BACï¼ˆBlood-Alcohol Concentrationï¼‰æ˜¯æŒ‡è¡€æ¶²ä¸­çš„é…’ç²¾æµ“åº¦ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æµ‹é‡<ul><li>å‘¼æ°”æµ‹è¯•, è¡€æ¶²æ£€æµ‹, å°¿æ¶²æ£€æµ‹</li></ul></li></ul><p>BAC ä¸ DUI çš„æ³•å¾‹åº•çº¿</p><ul><li>å¦‚æœä½ çš„ BAC â‰¥ 0.08%ï¼Œé©¾é©¶å³è¿æ³•</li><li>å³ä½¿ BAC &lt; 0.08%ï¼Œåªè¦é…’ç²¾å½±å“äº†ä½ çš„é©¾é©¶èƒ½åŠ›ï¼Œä¹Ÿå¯èƒ½è¢«è®¤å®šä¸ºé…’é©¾ï¼ˆDUIï¼‰</li></ul><hr><h4 id="DUI-æ³•å¾‹è¯¦è§£"><a href="#DUI-æ³•å¾‹è¯¦è§£" class="headerlink" title="DUI æ³•å¾‹è¯¦è§£"></a>DUI æ³•å¾‹è¯¦è§£</h4><p>åœ¨ä¼Šåˆ©è¯ºä¼Šå·ï¼Œé…’é©¾ï¼ˆDUIï¼‰è¢«è®¤å®šä¸ºæš´åŠ›çŠ¯ç½ª<br>ä¸€æ—¦è¢«åˆ¤å®šä¸º DUIï¼Œè®°å½•å°†æ°¸ä¹…ä¿ç•™åœ¨ä½ çš„é©¾é©¶è®°å½•ä¸Š</p><p>é»˜ç¤ºåŒæ„æ³•ï¼ˆImplied Consent Lawï¼‰</p><ul><li>ä½ åªè¦åœ¨ä¼Šå·å¼€è½¦ï¼Œå°±è‡ªåŠ¨åŒæ„æ¥å—ä¸‹åˆ—æ£€æµ‹<ul><li>å‘¼æ°”æµ‹è¯•, è¡€æ¶²æµ‹è¯•, å°¿æ¶²æˆ–å…¶ä»–ä½“æ¶²æµ‹è¯•</li></ul></li></ul><p>æ³•å®šæ‘˜è¦æ€§åŠé”€</p><ul><li>æ£€æµ‹ç»“æœè¾¾åˆ°ä»¥ä¸‹æ ‡å‡†å°†è¢«åŠé”€é©¾ç…§<ul><li>BAC â‰¥ 0.08%</li><li>THC â‰¥ 5 ng&#x2F;mLï¼ˆè¡€æ¶²ï¼‰æˆ– â‰¥ 10 ng&#x2F;mLï¼ˆå…¶ä»–ä½“æ¶²ï¼‰</li><li>æ£€æµ‹å‡ºä»»ä½•å—æ§è¯ç‰©&#x2F;è‡´å¹»åŒ–åˆç‰©&#x2F;å†°æ¯’</li></ul></li></ul><hr><h4 id="DUI-ç›¸å…³è¿æ³•è¡Œä¸º"><a href="#DUI-ç›¸å…³è¿æ³•è¡Œä¸º" class="headerlink" title="DUI ç›¸å…³è¿æ³•è¡Œä¸º"></a>DUI ç›¸å…³è¿æ³•è¡Œä¸º</h4><p>åŠ é‡é…’é©¾ï¼ˆAggravated DUIï¼‰</p><ul><li>ä½ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å°†è¢«èµ·è¯‰ä¸ºåŠ é‡é…’é©¾ï¼ˆAggravated DUIï¼‰ï¼Œå¤„ç½šè¿œé‡äºæ™®é€š DUI<ul><li>é…’é©¾æ—¶å‘ç”Ÿè‡´äººæ­»äº¡æˆ–äººèº«ä¼¤å®³</li><li>æ˜¯ç¬¬ä¸‰æ¬¡æˆ–ä»¥ä¸Š DUI çŠ¯ç½ª</li><li>é…’é©¾æ—¶æ²¡æœ‰æœ‰æ•ˆé©¾ç…§ã€è®¸å¯è¯æˆ–ä¿é™©</li></ul></li></ul><p>é…’ç²¾é¥®å“çš„éæ³•è¿è¾“ &#x2F; å¼€æ”¾å®¹å™¨æ³•ï¼ˆOpen Container Lawï¼‰</p><ul><li>ä»»ä½•äººåœ¨è½¦å†…é¥®é…’éƒ½æ˜¯è¿æ³•è¡Œä¸ºï¼ŒåŒ…æ‹¬å¸æœºä¸ä¹˜å®¢</li><li>å¼€å°çš„é…’ç²¾é¥®æ–™ä¸å¾—æ”¾åœ¨ä¹˜å®¢åŒºï¼Œå³ä½¿ä¸å–ä¹Ÿè¿æ³•</li></ul><p>çˆ¶æ¯æˆ–ç›‘æŠ¤äººè´£ä»»ï¼ˆParental Responsibilityï¼‰</p><ul><li>ç¦æ­¢è®©æœªæ»¡21å²è€…é¥®é…’ï¼›</li><li>ä¸å¾—çºµå®¹æˆ–æœªæ§åˆ¶å­©å­åœ¨è‡ªå®¶æˆ–è‡ªå·±ç®¡ç†çš„åœºæ‰€é¥®é…’ï¼ˆåŒ…æ‹¬è½¦è¾†æˆ–èˆ¹ä¸Šï¼‰</li></ul><p>ååŠ©é…’é©¾ä¹Ÿè¿æ³•ï¼ˆContributing to a DUIï¼‰</p><ul><li>ä½ ä¸å¾—æŠŠè½¦å€Ÿç»™å·²çŸ¥æ­£åœ¨é…’é©¾çš„äºº</li><li>è‹¥ä½ å‘æœªæ»¡21å²è€…æä¾›é…’ç²¾ï¼Œä½ å¯èƒ½ä¼šè¢«åˆ¤åˆ‘å…¥ç‹±</li></ul><hr><h3 id="4-äº¤é€šè¿è§„-x2F-äº‹æ•…å¤„ç†"><a href="#4-äº¤é€šè¿è§„-x2F-äº‹æ•…å¤„ç†" class="headerlink" title="4. äº¤é€šè¿è§„ &#x2F; äº‹æ•…å¤„ç†"></a>4. äº¤é€šè¿è§„ &#x2F; äº‹æ•…å¤„ç†</h3><h4 id="å‘ç”Ÿæˆ–é‡åˆ°äº¤é€šäº‹æ•…æ—¶æ€ä¹ˆåŠ"><a href="#å‘ç”Ÿæˆ–é‡åˆ°äº¤é€šäº‹æ•…æ—¶æ€ä¹ˆåŠ" class="headerlink" title="å‘ç”Ÿæˆ–é‡åˆ°äº¤é€šäº‹æ•…æ—¶æ€ä¹ˆåŠ"></a>å‘ç”Ÿæˆ–é‡åˆ°äº¤é€šäº‹æ•…æ—¶æ€ä¹ˆåŠ</h4><p>è‹¥ä½ å·å…¥æˆ–ç›®ç¹äº¤é€šäº‹æ•…ï¼Œåº”ç«‹å³æŒ‰ä»¥ä¸‹æ­¥éª¤å¤„ç†</p><ul><li><ol><li>åœè½¦</li></ol><ul><li>ç«‹å³å°†è½¦è¾†åœåœ¨å®‰å…¨ã€æ˜äº®ã€ä¸ä¼šé˜»ç¢äº¤é€šçš„å…¬å…±åŒºåŸŸ</li><li>è‹¥è½¦è¾†è¿˜èƒ½ç§»åŠ¨ï¼Œåº”å°½é‡æŠŠè½¦ç§»åˆ°ä¸å½±å“é“è·¯çš„ä½ç½®</li></ul></li><li><ol start="2"><li>å¸®åŠ©ä¼¤è€…</li></ol><ul><li>å¦‚æœæœ‰äººå‘˜å—ä¼¤ï¼Œåº”åœ¨èƒ½åŠ›èŒƒå›´å†…æä¾›å¸®åŠ©ï¼Œæˆ–è€…åœ¨å¯¹æ–¹è¯·æ±‚æ—¶æä¾›ååŠ©</li></ul></li><li><ol start="3"><li>ç«‹å³æ‹¨æ‰“ 911</li></ol><ul><li>æŠ¥è­¦å¹¶å‘ŠçŸ¥æ˜¯å¦æœ‰äººä¼¤äº¡</li></ul></li><li><ol start="4"><li>è­¦ç¤ºå…¶ä»–è½¦è¾†</li></ol><ul><li>å¼€å¯åŒé—ªè­¦ç¤ºç¯</li><li>å¦‚æœ‰æ¡ä»¶ï¼Œå¯æ‘†æ”¾ä¸‰è§’è­¦ç¤ºç‰Œæˆ–ç…§æ˜è­¦ç¤ºç¯ï¼Œé˜²æ­¢äºŒæ¬¡äº‹æ•…</li></ul></li><li><ol start="5"><li>ä¿¡æ¯äº¤æ¢</li></ol><ul><li>å‘æ‰€æœ‰æ¶‰äº‹äººå‘˜æ”¶é›†å¹¶æä¾›ä»¥ä¸‹ä¿¡æ¯</li><li>å§“åï¼Œåœ°å€ï¼Œç”µè¯å·ç ï¼Œé©¾ç…§å·ç ï¼Œè½¦ç‰Œå·ç </li></ul></li></ul><hr><h4 id="å‡ºåº­ç›¸å…³è§„å®š"><a href="#å‡ºåº­ç›¸å…³è§„å®š" class="headerlink" title="å‡ºåº­ç›¸å…³è§„å®š"></a>å‡ºåº­ç›¸å…³è§„å®š</h4><ul><li>å¦‚æœä½ å› ä¸ºè½»å¾®äº¤é€šè¿è§„è€Œæ”¶åˆ°ç½šå•ï¼Œç½šå•ä¸Šä¼šå†™æ˜ä½ å¿…é¡»å‡ºåº­çš„æ—¥æœŸ</li><li>ä¸ä»˜æ¬¾ä¹Ÿä¸å‡ºåº­ä¼šå¯¼è‡´<ul><li>å®‰æ’ç¬¬äºŒæ¬¡å‡ºåº­æ—¥æœŸï¼ˆè‡³å°‘æå‰30å¤©é€šçŸ¥ï¼‰</li><li>æ³•é™¢ä¹¦è®°å‘˜ä¼šé€šè¿‡ä½ æä¾›çš„åœ°å€ã€æ‰‹æœºã€é‚®ç®±æˆ–çŸ­ä¿¡ç³»ç»Ÿé€šçŸ¥ä½ </li><li>è‹¥ä½ ç¬¬äºŒæ¬¡ä»æœªå‡ºåº­ï¼Œå°†ä¼šè¢«è§†ä¸ºé»˜è®¤æœ‰ç½ªï¼ˆEx-Parte Convictionï¼‰ï¼Œè®°å½•ä¼šè¢«ä¸ŠæŠ¥åˆ°ä¼Šåˆ©è¯ºä¼Šå·åŠ¡å¿ï¼ˆSecretary of Stateï¼‰</li><li>æœ€ç»ˆç»“æœï¼šç­‰åŒäºä¸€æ¬¡æ­£å¼äº¤é€šè¿æ³•å®šç½ª</li></ul></li></ul><p>åœ¨å¤–å·è¢«å¼€ç½šå•æ€ä¹ˆåŠï¼Ÿï¼ˆéå±…æ°‘è¿è§„è€…åè®®ï¼‰</p><ul><li>å¦‚æœä½ åœ¨å…¶ä»–å·ï¼ˆè¯¥å·ä¸ºâ€œéå±…æ°‘è¿è§„è€…åè®®æˆå‘˜å·â€ï¼‰è¢«å¼€ç½šå•ï¼Œä½ æœ‰ä¸‰ä¸ªé€‰æ‹©<ul><li>å½“åœºç•™åœ¨è¯¥å·æ‰“å®˜å¸</li><li>ç›´æ¥ç¼´çº³ç½šæ¬¾</li><li>ç­¾å­—æ‰¿è¯ºåå›å®¶å¤„ç†ï¼ˆPromise to Complyï¼‰</li></ul></li></ul><hr><h4 id="äº¤é€šäº‹æ•…æŠ¥å‘Š"><a href="#äº¤é€šäº‹æ•…æŠ¥å‘Š" class="headerlink" title="äº¤é€šäº‹æ•…æŠ¥å‘Š"></a>äº¤é€šäº‹æ•…æŠ¥å‘Š</h4><p>å“ªäº›æƒ…å†µå¿…é¡»æäº¤äº‹æ•…æŠ¥å‘Š</p><ul><li>æ— è®ºæ˜¯å¦ä¸ºäº‹æ•…è´£ä»»æ–¹ï¼Œåªè¦æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æƒ…å†µï¼Œå°±å¿…é¡»æäº¤äº‹æ•…æŠ¥å‘Š<ul><li>äº‹æ•…å¯¼è‡´äººå‘˜æ­»äº¡</li><li>äº‹æ•…å¯¼è‡´äººå‘˜å—ä¼¤</li><li>è´¢äº§æŸå¤±è¶…è¿‡ 1500 ç¾å…ƒ</li><li>å¦‚æœå…¶ä¸­ä»»ä¸€è¾†è½¦æ²¡æœ‰ä¿é™©ï¼Œåªè¦è´¢äº§æŸå¤±è¶…è¿‡ 500 ç¾å…ƒï¼Œä¹Ÿå¿…é¡»ä¸ŠæŠ¥</li><li>æ¶‰åŠæ ¡è½¦å¹¶é€ æˆä»»ä½•è´¢äº§æŸå¤±æˆ–äººå‘˜å—ä¼¤</li><li>äº‹æ•…å‘ç”Ÿåœ¨è·ç¦»æ ¡è½¦ 50 è‹±å°ºå†…ï¼Œå¹¶å¯¼è‡´ä¸Šä¸‹è½¦äººå‘˜å—ä¼¤æˆ–æ­»äº¡</li></ul></li></ul><p>æŠ¥å‘Šæ—¶é™åŠæ–¹å¼</p><ul><li>äº‹æ•…å‘ç”Ÿåï¼Œå¿…é¡»åœ¨ 30 åˆ†é’Ÿå†…æŠ¥å‘Š</li><li>å¦‚æœè­¦å¯Ÿå·²åœ¨ç°åœºï¼Œä¼šå½“åœºè®°å½•</li><li>å¦‚æœç°åœºæ— è­¦å¯Ÿï¼Œåº”å°½å¿«å‰å¾€æœ€è¿‘çš„è­¦å¯Ÿå±€æŠ¥æ¡ˆ</li><li>åœ¨å†œæ‘åœ°åŒºï¼Œéœ€è”ç³»éƒ¡æ²»å®‰å®˜æˆ–ä¼Šåˆ©è¯ºä¼Šå·å·è­¦</li><li>å¦‚æœå¸æœºå› ä¼¤æ— æ³•æŠ¥æ¡ˆï¼Œä¹˜å®¢æœ‰è´£ä»»ä»£ä¸ºæŠ¥å‘Š</li></ul><p>æœªæŒ‰è§„å®šæŠ¥å‘Šçš„åæœ</p><ul><li>æœ€ä¸¥é‡å¯è¢«ç½šæ¬¾ 2500 ç¾å…ƒï¼Œè¿˜å¯èƒ½é¢ä¸´æœ€é•¿ 1 å¹´ç›‘ç¦</li></ul><hr><h4 id="è‚‡äº‹é€ƒé€¸ã€æ— äººè½¦è¾†äº‹æ•…ã€å®‰å…¨è´£ä»»æ³•"><a href="#è‚‡äº‹é€ƒé€¸ã€æ— äººè½¦è¾†äº‹æ•…ã€å®‰å…¨è´£ä»»æ³•" class="headerlink" title="è‚‡äº‹é€ƒé€¸ã€æ— äººè½¦è¾†äº‹æ•…ã€å®‰å…¨è´£ä»»æ³•"></a>è‚‡äº‹é€ƒé€¸ã€æ— äººè½¦è¾†äº‹æ•…ã€å®‰å…¨è´£ä»»æ³•</h4><p>ç¦»å¼€äº‹æ•…ç°åœºï¼ˆLeaving the Scene of a Crashï¼‰</p><ul><li>å¦‚æœåœ¨äº¤é€šäº‹æ•…ä¸­ï¼Œå¸æœºæ“…è‡ªç¦»å¼€ç°åœºï¼Œå°¤å…¶æ˜¯åœ¨æœ‰äººå‘˜ä¼¤äº¡çš„æƒ…å†µä¸‹<ul><li>å°†ä¼šè¢«ä¾æ³•è¿½ç©¶åˆ‘äº‹è´£ä»»</li><li>è‹¥äº‹æ•…é€ æˆäººå‘˜å—ä¼¤æˆ–æ­»äº¡: ä¼Šåˆ©è¯ºä¼Šå·åŠ¡å¿ï¼ˆSecretary of Stateï¼‰å¿…é¡»åŠé”€è¯¥é©¾é©¶å‘˜çš„é©¾ç…§</li><li>è‹¥äº‹æ•…é€ æˆè´¢äº§æŸå¤±è¶…è¿‡ 1000 ç¾å…ƒ: é©¾é©¶å‘˜çš„é©¾é©¶èµ„æ ¼å°†è¢«æš‚</li></ul></li></ul><p>æ— äººè½¦è¾†äº‹æ•…å¤„ç†ï¼ˆUnattended Vehiclesï¼‰</p><ul><li>å¦‚æœä½ å‘ç”Ÿäº†æ’åˆ°æ— äººè½¦è¾†æˆ–è´¢äº§çš„äº‹æ•…ï¼ˆå³å¯¹æ–¹ä¸åœ¨ç°åœºï¼‰<ul><li>åœè½¦å¹¶å°†è½¦è¾†ç§»è‡³ä¸å¦¨ç¢äº¤é€šçš„ä½ç½®</li><li>å¦‚æœæ‰¾ä¸åˆ°è½¦ä¸»ï¼Œå¿…é¡»åœ¨å¯¹æ–¹è½¦æˆ–è´¢äº§ä¸Šç•™ä¸‹ä»¥ä¸‹ä¿¡æ¯<ul><li>å§“åã€åœ°å€ã€ç”µè¯å·ç ã€è½¦ç‰Œå·</li></ul></li><li>å‘è­¦æ–¹æŠ¥å‘Š</li><li>å®Œæˆæ‰€æœ‰è§„å®šçš„äº‹æ•…æŠ¥å‘Š</li></ul></li></ul><p>å®‰å…¨è´£ä»»æ³•ï¼ˆSafety Responsibility Lawï¼‰</p><ul><li>å¦‚æœä½ åœ¨äº‹æ•…ä¸­è´Ÿä¸»è¦è´£ä»»ï¼Œä¸”<strong>æ²¡æœ‰æŠ•ä¿è´£ä»»é™©</strong>ï¼Œè¿˜éœ€è¦éµå®ˆä¸‹åˆ—é¢å¤–è§„å®š<ul><li>ä½ å¿…é¡»å‘ä¼Šåˆ©è¯ºä¼Šå·äº¤é€šéƒ¨ï¼ˆIDOTï¼‰ç¼´çº³<strong>ä¿è¯é‡‘ï¼ˆsecurityï¼‰</strong>æ¥èµ”å¿å—å®³æ–¹æŸå¤±</li><li>é‡‘é¢ç”±äº¤é€šéƒ¨å†³å®š</li></ul></li></ul><hr><h3 id="5-é“è·¯æ ‡å¿—"><a href="#5-é“è·¯æ ‡å¿—" class="headerlink" title="5. é“è·¯æ ‡å¿—"></a>5. é“è·¯æ ‡å¿—</h3><h4 id="æ ‡å¿—çš„å½¢çŠ¶ä¸é¢œè‰²"><a href="#æ ‡å¿—çš„å½¢çŠ¶ä¸é¢œè‰²" class="headerlink" title="æ ‡å¿—çš„å½¢çŠ¶ä¸é¢œè‰²"></a>æ ‡å¿—çš„å½¢çŠ¶ä¸é¢œè‰²</h4><p>ä¼Šåˆ©è¯ºä¼Šå·å°†é“è·¯æ ‡å¿—åˆ†ä¸ºä¸‰ç±»ï¼Œæ¯ç±»æ ‡å¿—éƒ½æœ‰ç‰¹å®šçš„å½¢çŠ¶å’Œé¢œè‰²ï¼Œç”¨äºä¼ è¾¾ä¸åŒçš„é“è·¯ä¿¡æ¯</p><p>æ ‡å¿—çš„å½¢çŠ¶åŠç”¨é€”</p><ol><li><p>å…«è§’å½¢: ä¸“ç”¨äºâ€œåœè½¦ï¼ˆSTOPï¼‰â€æ ‡å¿—<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322133.png"></p></li><li><p>å€’ä¸‰è§’å½¢: è¡¨ç¤ºâ€œè®©è¡Œï¼ˆYIELDï¼‰â€ï¼Œè½¦è¾†éœ€å‡é€Ÿæˆ–åœä¸‹è®©å…¶ä»–è½¦è¾†æˆ–è¡Œäººå…ˆè¡Œ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322135.png"></p></li><li><p>åœ†å½¢: ä¸“ç”¨äºé“è·¯é“å£è­¦ç¤º<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322136.png"></p></li><li><p>äº”è¾¹å½¢ï¼ˆé¡¶éƒ¨å°–ã€åº•éƒ¨å¹³ï¼‰: ç”¨äºå­¦æ ¡åŒºåŸŸæˆ–å­¦ç”Ÿç©¿è¶Šæ ‡å¿—ï¼Œæç¤ºå‰æ–¹æœ‰å­¦æ ¡æˆ–å­¦ç”Ÿæ­£åœ¨ç©¿è¶Šé©¬è·¯<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322137.png"></p></li><li><p>è±å½¢: è¡¨ç¤ºè­¦å‘Šæ ‡å¿—ï¼Œç”¨æ¥æç¤ºå‰æ–¹é“è·¯å¯èƒ½å­˜åœ¨å±é™©æˆ–å˜åŒ–ï¼ˆå¦‚å¼¯é“ã€æ»‘è·¯ã€æ–½å·¥ç­‰ï¼‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322138.png"></p></li><li><p>æœå³çš„ç­‰è…°ä¸‰è§’å½¢ï¼ˆç«‹åœ¨è·¯å·¦ä¾§ï¼‰: è¡¨ç¤ºâ€œç¦æ­¢è¶…è½¦åŒºåŸŸï¼ˆNO PASSING ZONEï¼‰â€å¼€å§‹<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322139.png"></p></li><li><p>æ­£æ–¹å½¢æˆ–çŸ©å½¢: å¯ç”¨äºè§„ç« æ ‡å¿—ï¼ˆå¦‚é™é€Ÿï¼‰æˆ–æŒ‡ç¤ºæ ‡å¿—ï¼ˆå¦‚è·¯åã€æ–¹å‘ã€è·ç¦»ç­‰ï¼‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322140.png"></p></li></ol><p>äº¤é€šæ ‡å¿—é¢œè‰²åŠå…¶æ„ä¹‰</p><ol><li><p>çº¢è‰²ï¼ˆREDï¼‰: ç”¨äºè§„ç« æ ‡å¿—ï¼Œå¿…é¡»éµå®ˆ<br>å¸¸è§äº: åœè½¦ï¼ˆSTOPï¼‰ã€è®©è¡Œï¼ˆYIELDï¼‰ã€ç¦æ­¢è¿›å…¥ï¼ˆDO NOT ENTERï¼‰ã€é€†è¡Œï¼ˆWRONG WAYï¼‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322142.png"></p></li><li><p>é»‘è‰²å’Œç™½è‰²ï¼ˆBLACK and WHITEï¼‰: å¤§å¤šæ•°æ˜¯è§„ç« æ ‡å¿—ï¼Œä¹Ÿå¿…é¡»éµå®ˆ<br>éƒ¨åˆ†é»‘ç™½æ ‡å¿—ä¹Ÿç”¨äºè·¯çº¿ç¼–å·æˆ–æ–¹å‘æŒ‡ç¤º<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322143.png"></p></li><li><p>é»„è‰²ï¼ˆYELLOWï¼‰: ç”¨äºå¸¸è§„è­¦å‘Šæ ‡å¿—ï¼Œæé†’å‰æ–¹é“è·¯çŠ¶å†µæˆ–å±é™©<br>ä¾‹å¦‚ï¼šå¼¯é“ã€æ»‘è·¯ã€äº¤å‰å£ç­‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322144.png"></p></li><li><p>é»„ç»¿è‰²ï¼ˆYELLOW-GREENï¼‰: ç”¨äºä¸“é—¨è­¦å‘Šè¡Œäººã€è‡ªè¡Œè½¦å’Œå­¦æ ¡ç›¸å…³åŒºåŸŸ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322145.png"></p></li><li><p>æ©™è‰²ï¼ˆORANGEï¼‰: ç”¨äºæ–½å·¥æˆ–å…»æŠ¤åŒºåŸŸçš„è­¦å‘Šæ ‡å¿—ï¼Œæç¤ºå‰æ–¹å¯èƒ½å­˜åœ¨é“è·¯æ–½å·¥æˆ–è®¾å¤‡<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322146.png"></p></li><li><p>ç»¿è‰²ï¼ˆGREENï¼‰: ç”¨äºå¼•å¯¼æ ‡å¿—ï¼Œæä¾›æ–¹å‘ã€è·¯åã€å‡ºå£ã€è·ç¦»ç­‰ä¿¡æ¯<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322147.png"></p></li><li><p>è“è‰²ï¼ˆBLUEï¼‰: ç”¨äºæœåŠ¡ç±»å¼•å¯¼æ ‡å¿—ï¼Œæä¾›ä¸äº¤é€šç›¸å…³çš„æœåŠ¡ä¿¡æ¯<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322148.png"></p></li><li><p>æ£•è‰²ï¼ˆBROWNï¼‰: ç”¨äºå…¬å›­ã€æ–‡åŒ–å’Œä¼‘é—²åœ°ç‚¹çš„æŒ‡ç¤ºæ ‡å¿—<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322149.png"></p></li><li><p>ç²‰è‰²ï¼ˆPINKï¼‰: ç”¨äºçªå‘äº‹ä»¶ç›¸å…³æ ‡å¿—ï¼Œè­¦å‘Šå¯èƒ½ç”±äºäº‹æ•…æˆ–è‡ªç„¶ç¾å®³è€Œäº§ç”Ÿçš„äº¤é€šé£é™©<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322150.png"></p></li></ol><hr><h4 id="è§„ç« æ ‡å¿—"><a href="#è§„ç« æ ‡å¿—" class="headerlink" title="è§„ç« æ ‡å¿—"></a>è§„ç« æ ‡å¿—</h4><p>è¿™ç±»æ ‡å¿—ç”¨æ¥æ˜ç¡®è§„å®šä½ â€œå¿…é¡»åšä»€ä¹ˆâ€æˆ–â€œä¸èƒ½åšä»€ä¹ˆâ€ï¼Œå…·æœ‰æ³•å¾‹æ•ˆåŠ›ï¼Œå¿…é¡»éµå®ˆ</p><ol><li><p>åœè½¦ï¼ˆStopï¼‰: å…«è§’å½¢æ ‡å¿—ï¼Œåœ¨åœè½¦çº¿å‰å®Œå…¨åœè½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322205.png"></p></li><li><p>å››å‘åœè½¦ï¼ˆAll-Way Stopï¼‰: æ‰€æœ‰æ–¹å‘éƒ½è®¾æœ‰åœè½¦æ ‡å¿—<br>è°å…ˆåœï¼Œè°å…ˆèµ°ï¼›å…¶ä»–è½¦è¾†æŒ‰é¡ºåºç­‰å¾…<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322207.png"></p></li><li><p>è®©è¡Œï¼ˆYieldï¼‰: å€’ä¸‰è§’å½¢æ ‡å¿—ï¼Œè¡¨ç¤ºä½ å¿…é¡»è®©è¡Œï¼Œè®©æ‰€æœ‰è½¦è¾†æˆ–è¡Œäººä¼˜å…ˆé€šè¡Œ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322208.png"></p></li><li><p>ç¦æ­¢è¿›å…¥ï¼ˆDo Not Enterï¼‰: é€šå¸¸ç”¨äºå•è¡Œé“åæ–¹å‘å…¥å£æˆ–é«˜é€Ÿå…¬è·¯é”™è¯¯æ–¹å‘çš„åŒé“ï¼Œè¡¨ç¤ºæ­¤æ–¹å‘ç¦æ­¢è¿›å…¥<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322209.png"></p></li><li><p>å‰æ–¹é™é€ŸåŒºåŸŸï¼ˆSpeed Zone Aheadï¼‰: æé†’ä½ å³å°†è¿›å…¥ä¸€ä¸ªæ–°çš„é™é€ŸåŒºåŸŸï¼Œå‡†å¤‡å‡é€Ÿ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322210.png"></p></li><li><p>é™é€Ÿï¼ˆSpeed Limitï¼‰: æ˜¾ç¤ºæœ€å¤§å’Œæœ€å°è½¦é€Ÿé™åˆ¶<br>å¦‚æœä½ æ…¢åˆ°å½±å“æ­£å¸¸äº¤é€šï¼Œæ˜¯è¿æ³•çš„ï¼ˆé™¤éå‡ºäºå®‰å…¨è€ƒè™‘ï¼‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322214.png"></p></li><li><p>æ–¹å‘é”™è¯¯ï¼ˆWrong Wayï¼‰: è¡¨ç¤ºä½ æ­£åœ¨é€†å‘è¡Œé©¶ï¼Œå¿…é¡»ç«‹å³è°ƒæ•´æ–¹å‘<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322215.png"></p></li><li><p>ç¦æ­¢è¡Œä¸ºï¼ˆNo ___ï¼‰: çº¢åœˆ+å¯¹è§’æ–œæ çš„æ ‡å¿—è¡¨ç¤ºæŸç§è¡Œä¸ºä¸è¢«å…è®¸<br>æ¯”å¦‚ï¼šNo U-turnï¼šç¦æ­¢æ‰å¤´ï¼ŒNo Right Turn &#x2F; No Left Turnï¼šç¦æ­¢å³è½¬æˆ–å·¦è½¬<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322216.png"></p></li><li><p>å•è¡Œé“ï¼ˆOne-Wayï¼‰: åªèƒ½æŒ‰ç…§ç®­å¤´æŒ‡ç¤ºæ–¹å‘è¡Œé©¶ï¼Œå¸¸è§äºå¸‚åŒºå•è¡Œé“<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322217.png"></p></li><li><p>ä¸­å¤®å·¦è½¬è½¦é“ï¼ˆTwo-Way Left Turn Lanesï¼‰: è¡¨ç¤ºä¸­é—´ä¸ºåŒå‘å…±ç”¨å·¦è½¬é“<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322221.png"></p></li><li><p>çº¢ç¯ç¦æ­¢è½¬å¼¯ï¼ˆNo Turn on Redï¼‰: æŒ‡å®šäº¤å‰å£ç¦æ­¢çº¢ç¯æ—¶å³è½¬æˆ–å·¦è½¬<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322222.png"></p></li><li><p>æ¥è¿‘åˆ†éš”å…¬è·¯ï¼ˆApproaching a Divided Highwayï¼‰: è¡¨ç¤ºå‰æ–¹é“è·¯æœ‰ä¸­å¤®éš”ç¦»å¸¦ï¼Œä¸¤è¾¹æ˜¯ç›¸åæ–¹å‘çš„è½¦é“<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322223.png"></p></li><li><p>é å³è¡Œé©¶ï¼ˆKeep Rightï¼‰: å½“ä½ é‡åˆ°ä¸­å¤®å²›ã€éš”ç¦»å¸¦æˆ–éšœç¢ç‰©æ—¶ï¼Œå¿…é¡»é å³é€šè¡Œ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322224.png"></p></li><li><p>æ…¢è½¦é å³ï¼ˆSlower Traffic Keep Rightï¼‰: é€šå¸¸ç”¨äºé«˜é€Ÿå…¬è·¯ï¼Œæ…¢é€Ÿè½¦è¾†å¿…é¡»è¡Œé©¶åœ¨å³ä¾§è½¦é“<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322225.png"></p></li><li><p>çº¢ç¯åœè½¦ä½ç½®ï¼ˆStop Here on Redï¼‰: æŒ‡æ˜åœ¨çº¢ç¯æ—¶ä½ å¿…é¡»åœ¨å“ªé‡Œåœè½¦ï¼Œå¸¸ç”¨äºè§†çº¿ä¸æ¸…çš„è·¯å£<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322226.png"></p></li><li><p>ç¦æ­¢è¶…è½¦ï¼ˆDo Not Passï¼‰+ å¯å®‰å…¨è¶…è½¦ï¼ˆPass With Careï¼‰<br>è¡¨ç¤ºåœ¨è¯¥è·¯æ®µç¦æ­¢è¶…è½¦ + è¡¨ç¤ºç¦æ­¢è¶…è½¦åŒºåŸŸç»“æŸ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322227.png"></p></li><li><p>é“è·¯å°é—­ï¼ˆRoad Closedï¼‰: é“è·¯å¯¹æ‰€æœ‰è½¦è¾†å°é—­ï¼Œç¦æ­¢é€šè¡Œ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322228.png"></p></li><li><p>è‡ªè¡Œè½¦é“ï¼ˆBike Laneï¼‰: æ ‡è®°äº†ä¸“ç”¨çš„è‡ªè¡Œè½¦è½¦é“ï¼Œä¸å¯åœæ”¾æˆ–è¡Œé©¶<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322229.png"></p></li></ol><hr><h4 id="è­¦å‘Šæ ‡å¿—"><a href="#è­¦å‘Šæ ‡å¿—" class="headerlink" title="è­¦å‘Šæ ‡å¿—"></a>è­¦å‘Šæ ‡å¿—</h4><p>è­¦å‘Šæ ‡å¿—é€šå¸¸ä¸ºè±å½¢ï¼Œé¢œè‰²å¤šä¸ºé»„è‰²æˆ–æ©™è‰²ï¼ˆæ–½å·¥åŒºåŸŸï¼‰ï¼Œéƒ¨åˆ†åœ°åŒºå¯¹è¡Œäººã€è‡ªè¡Œè½¦ã€å­¦æ ¡ç›¸å…³æ ‡å¿—ä½¿ç”¨è§å…‰é»„ç»¿è‰²ã€‚è¿™äº›æ ‡å¿—æé†’ä½ å‰æ–¹æœ‰ç‰¹æ®Šè·¯å†µæˆ–å±é™©æƒ…å†µï¼Œéœ€æ ¼å¤–å°å¿ƒ</p><ol><li><p>è¡Œäººæ¨ªé“ï¼ˆPedestrian Crosswalkï¼‰: æé†’å‰æ–¹æœ‰è¡Œäººå¯èƒ½æ¨ªç©¿é©¬è·¯ï¼Œæ¨ªé“ä¸ä¸€å®šåœ¨è·¯å£ï¼Œéœ€æ³¨æ„å·¦å³ä¸¤ä¾§ï¼Œéƒ¨åˆ†æ ‡å¿—é…æœ‰é—ªçƒç¯<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322248.png"></p></li><li><p>ç‰¹æ®Šé€šè¡ŒåŒºåŸŸ: è¡Œäºº&#x2F;ç‰²ç•œç©¿è¶ŠåŒºã€è½®æ¤…é€šè¡ŒåŒºã€è‡ªè¡Œè½¦é“äº¤æ±‡ç‚¹ç­‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322249.png"></p></li><li><p>å­¦æ ¡åŒºåŸŸä¸å­¦æ ¡æ¨ªé“: æé†’é è¿‘å­¦æ ¡æˆ–å­¦ç”Ÿç©¿è¶ŠåŒºåŸŸ<br>ä¸Šå­¦æ—¥ 6:30 a.m. - 4 p.m. æ—¶æ®µå‡é€Ÿè‡³æ ‡æ˜é™é€Ÿï¼ˆé€šå¸¸ä¸º 20mphï¼‰ï¼Œæ³¨æ„å­¦æ ¡å·¡é€»å‘˜ã€äº¤è­¦ç­‰æŒ‡æŒ¥äº¤é€š<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322250.png"></p></li><li><p>çº¢ç¯&#x2F;è®©è¡Œ&#x2F;ä¿¡å·ç¯é¢„å‘Šï¼ˆStop Ahead &#x2F; Yield Ahead &#x2F; Signal Aheadï¼‰: æé†’å‰æ–¹å³å°†è¿›å…¥æœ‰äº¤é€šä¿¡å·æ§åˆ¶çš„åŒºåŸŸï¼Œå³ä½¿ä¿¡å·ç¯è¿˜çœ‹ä¸è§ï¼Œä¹Ÿåº”å‡é€Ÿå‡†å¤‡åœè½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322251.png"></p></li><li><p>è·¯å£é¢„å‘Šï¼ˆIntersections Aheadï¼‰: å¸¸è§çš„å››ç§è·¯å£ï¼Œåå­—è·¯å£ã€Tå­—å‹è·¯å£ã€Yå­—å‹è·¯å£ã€ä¾§è·¯æ¥å…¥<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322252.png"></p></li><li><p>è½¬å¼¯ä¸å¼¯é“ï¼ˆTurns and Curvesï¼‰: æ ‡å¿—ä¸Šä¼šç”¨ç®­å¤´è¡¨ç¤ºï¼Œå³è½¬&#x2F;å·¦è½¬ã€Så½¢å¼¯é“ã€å•ä¾§å¼¯é“ã€æŒ‡å®šçš„è½¬å¼¯é€Ÿåº¦ï¼ˆæ ‡å¿—ä¸‹æ–¹å¯èƒ½ä¼šæœ‰é™„åŠ é™é€Ÿï¼‰<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322253.png"></p></li><li><p>é«˜é€Ÿå‡ºå£é™é€Ÿï¼ˆExit Ramp Speedï¼‰: é«˜é€Ÿå…¬è·¯å‡ºå£æˆ–åŒé“ä¸Šæ ‡æ³¨çš„â€œå®‰å…¨æœ€å¤§è½¦é€Ÿâ€<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322254.png"></p></li><li><p>æ¹¿æ»‘è·¯é¢ï¼ˆSlippery Pavementï¼‰: æç¤ºé›¨å¤©æˆ–æ½®æ¹¿è·¯æ®µæ˜“æ‰“æ»‘ï¼Œéœ€å‡é€Ÿæ…¢è¡Œã€ä¿æŒè½¦è·<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322255.png"></p></li><li><p>é™¡å¡ï¼ˆDowngradeï¼‰: å‰æ–¹ä¸ºé•¿æˆ–é™¡å³­ä¸‹å¡ï¼Œå¯èƒ½è¿˜æœ‰æ€¥å¼¯ï¼Œåº”æå‰å‡é€Ÿ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322256.png"></p></li><li><p>æ¡¥é¢å˜çª„ï¼ˆNarrow Bridgeï¼‰: æ¡¥é¢æ¯”åŸé“è·¯ç‹­çª„ï¼Œé€šå¸¸æ¯”è·¯é¢çª„ 2 è‹±å°ºï¼Œå°å¿ƒä¼šè½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322257.png"></p></li><li><p>è½¦é“å‡å°‘ï¼ˆReduction in Lanesï¼‰: åŸå¤šè½¦é“å°†å˜æˆå°‘è½¦é“ï¼ˆå¯èƒ½æ˜¯æ–½å·¥å¯¼è‡´ï¼‰ï¼Œéœ€æå‰å˜é“æˆ–åˆæµ<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322258.png"></p></li><li><p>é“è·¯å˜çª„ï¼ˆRoad Narrowsï¼‰: åŒè½¦é“å³å°†å˜çª„ï¼Œå°å¿ƒä¼šè½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322259.png"></p></li><li><p>ç¦æ­¢è¶…è½¦åŒºå¼€å§‹ï¼ˆNo Passing Zoneï¼‰: è®¾ç½®åœ¨åŒå‘ä¸¤è½¦é“ï¼Œæ ‡å¿—é€šå¸¸æ”¾åœ¨è·¯å·¦ä¾§ï¼Œé…åˆé»„è‰²å®çº¿<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322300.png"></p></li><li><p>åˆæµï¼ˆMerging Lanesï¼‰: æç¤ºä½ å³å°†è¿›å…¥åˆå¹¶åŒºåŸŸï¼ˆå¦‚åŒé“åˆæµï¼‰ï¼Œåº”å‡é€Ÿæˆ–å…è®¸ä»–è½¦å¹¶å…¥<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322301.png"></p></li><li><p>æ–¹å‘å˜åŒ–æˆ–è·¯é¢æ”¶çª„ï¼ˆChange in Directionï¼‰: å¸¸è§äºæ€¥è½¬å¼¯å¤–ä¾§ã€çª„æ¡¥å…¥å£ï¼Œæç¤ºæ–¹å‘æ€¥å˜<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322302.png"></p></li><li><p>åˆ†éš”å…¬è·¯å¼€å§‹&#x2F;ç»“æŸï¼ˆDivided Highway Begins&#x2F;Endsï¼‰: å¼€å§‹ï¼šå³å°†è¿›å…¥æœ‰ä¸­å¤®éš”ç¦»å¸¦çš„åŒå‘é“è·¯ï¼Œç»“æŸï¼šå³å°†ç¦»å¼€åˆ†éš”å…¬è·¯ï¼Œæ³¨æ„è¿é¢æ¥è½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322304.png"></p></li><li><p>åŒå‘é“è·¯ï¼ˆTwo-Way Roadwayï¼‰: æé†’ä½ æ­£åœ¨è¿›å…¥ä¸€æ¡åŒå‘è¡Œé©¶çš„é“è·¯ï¼Œè¦é å³ä¾§è¡Œé©¶å¹¶æ³¨æ„æ¥è½¦<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322325.png"></p></li></ol><hr><h4 id="æ–½å·¥ä¸å…»æŠ¤æ ‡å¿—"><a href="#æ–½å·¥ä¸å…»æŠ¤æ ‡å¿—" class="headerlink" title="æ–½å·¥ä¸å…»æŠ¤æ ‡å¿—"></a>æ–½å·¥ä¸å…»æŠ¤æ ‡å¿—</h4><p>è¿™ç±»æ ‡å¿—æé†’é©¾é©¶è€…æ³¨æ„é“è·¯çŠ¶å†µçš„æ”¹å˜ï¼ŒåŒæ—¶ä¿éšœé“è·¯å·¥ä½œäººå‘˜çš„å®‰å…¨</p><ol><li><p>å·¥äººå‰æ–¹ï¼ˆWorkers Aheadï¼‰: æ ‡å¿—é€šå¸¸è®¾ç½®åœ¨è·ç¦»æ–½å·¥åŒºåŸŸè¾ƒè¿œçš„ä½ç½®ï¼Œä¸ºä½ æä¾›æå‰å‡é€Ÿçš„æ—¶é—´<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322306.png"></p></li><li><p>è­¦ç¤ºé”¥ç­’ã€è·¯éšœæ¡¶ä¸è·¯éšœï¼ˆWarning Cones, Drums, and Barricadesï¼‰: ç”¨äºæ ‡ç¤ºè¡Œè½¦è·¯çº¿ï¼Œå¼•å¯¼è½¦è¾†å®‰å…¨é€šè¿‡æ–½å·¥åŒºåŸŸï¼Œä¹Ÿç”¨äºæé†’ç°æœ‰çš„å±é™©åŒºåŸŸï¼Œä¾‹å¦‚å‘æ´ã€éšœç¢ç‰©æˆ–è½¦é“å˜åŒ–<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322307.png"></p></li><li><p>è­¦ç¤ºç¯ä¸æ–¹å‘ç®­æ¿ï¼ˆWarning Lights and Arrow Boardsï¼‰: è­¦ç¤ºç¯ï¼šåœ¨å¤œé—´å¸®åŠ©ä½ å‘ç°è·¯éšœã€é”¥æ¡¶ã€æ–½å·¥è¾¹ç•Œç­‰éšœç¢ï¼Œæ–¹å‘ç®­æ¿ï¼šç”¨äºæé†’ä½ å³å°†è½¦é“å…³é—­æˆ–å˜é“åˆæµï¼Œå¹¶æŒ‡ç¤ºå®‰å…¨çš„è¡Œé©¶æ–¹å‘<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322308.png"></p></li><li><p>æ——æ‰‹æ ‡å¿—ï¼ˆFlaggerï¼‰: è¡¨ç¤ºå‰æ–¹æœ‰äº¤é€šæŒ‡æŒ¥å‘˜ï¼ˆæ——æ‰‹ï¼‰ååŠ©äº¤é€šæ§åˆ¶ï¼Œé©¶è¿‘æ—¶è¦å‡é€Ÿï¼Œæ³¨æ„å…¶å‘å‡ºçš„æ‰‹åŠ¿æˆ–æ——è¯­æŒ‡ä»¤ï¼Œå¦‚è¢«ç¤ºæ„åœè½¦ï¼Œå¿…é¡»åœä¸‹<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322309.png"></p></li></ol><hr><h4 id="å¯å˜ä¿¡æ¯æ ‡å¿—"><a href="#å¯å˜ä¿¡æ¯æ ‡å¿—" class="headerlink" title="å¯å˜ä¿¡æ¯æ ‡å¿—"></a>å¯å˜ä¿¡æ¯æ ‡å¿—</h4><p>è¿™äº›æ˜¯é“è·¯ä¸Šå¸¸è§çš„ç”µå­æ˜¾ç¤ºå±ï¼Œé€šå¸¸æ¶è®¾åœ¨ä¸‰è„šæ¶æˆ–å¤§å‹æ‹–è½¦ä¸Šï¼Œèƒ½å®æ—¶æ›´æ–°å†…å®¹</p><ul><li>æé†’äº¤é€šæ‹¥å µã€å‰æ–¹äº‹æ•…ã€æ…¢è½¦é“æ®µè½</li><li>é€šçŸ¥è½¦é“&#x2F;é“è·¯å…³é—­</li><li>æç¤ºè·¯çº¿å˜æ›´æˆ–è¡Œè½¦æ–¹å¼å˜åŒ–</li><li>æä¾›å»¶è¯¯æ—¶é—´æˆ–ç»•è¡Œå»ºè®®</li><li>å‘ŠçŸ¥ä½ éœ€è¦åˆæµï¼ˆä½¿ç”¨â€œæ‹‰é“¾å¼åˆæµâ€ï¼‰</li></ul><p>å…¶ä»–ç‰¹æ®Šæ ‡å¿—ï¼ˆOther Special Signsï¼‰</p><ol><li><p>æ…¢é€Ÿè½¦è¾†æ ‡å¿—ï¼ˆSlow-Moving Vehicleï¼‰: è¿™ä¸ªæ©™è‰²ä¸‰è§’æ ‡å¿—å‡ºç°åœ¨å†œç”¨è½¦ã€å»ºç­‘è®¾å¤‡ã€åŠ¨ç‰©ç‰µå¼•è½¦ç­‰æ…¢é€Ÿç§»åŠ¨çš„è½¦è¾†åæ–¹<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322310.png"></p></li><li><p>æ®‹éšœäººå£«ä¸“ç”¨åœè½¦æ ‡å¿—: æ ‡ç¤ºåœè½¦ä½ä¸“ä¸ºä»¥ä¸‹è½¦è¾†ä¿ç•™ï¼ŒæŒæœ‰æ®‹éšœäººå£«ä¸“ç”¨è½¦ç‰Œã€æŒæœ‰åˆæ³•åœè½¦é€šè¡Œè¯ï¼ˆPlacardï¼‰ã€é€€ä¼æ®‹éšœå†›äººç‰Œç…§<br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322311.png"></p></li></ol><hr><h4 id="æŒ‡å¼•æ ‡å¿—"><a href="#æŒ‡å¼•æ ‡å¿—" class="headerlink" title="æŒ‡å¼•æ ‡å¿—"></a>æŒ‡å¼•æ ‡å¿—</h4><p>æŒ‡å¼•æ ‡å¿—ç”¨äºå‘Šè¯‰ä½ : ä½ åœ¨å“ªé‡Œã€ä½ æ­£åœ¨è¡Œé©¶çš„æ˜¯å“ªæ¡é“è·¯ã€å¦‚ä½•åˆ°è¾¾æŸä¸ªç‰¹å®šåœ°ç‚¹</p><p>è¿™äº›æ ‡å¿—å•ç‹¬ä½¿ç”¨æˆ–æ­é…å°æ ‡å¿—ï¼Œç”¨äºå¼•å¯¼ä½ å‰å¾€ç‰¹å®šè·¯çº¿æˆ–é“è·¯ï¼Œå¸¸è§çš„ç±»å‹åŒ…æ‹¬</p><ul><li>å·é™…å…¬è·¯ï¼ˆInterstateï¼‰</li><li>ç¾å›½å›½é“ï¼ˆU.S. Routeï¼‰</li><li>å·é“ï¼ˆState Routeï¼‰</li><li>å¿é“ï¼ˆCounty Roadï¼‰</li><li>å‡ºå£ç¼–å·ï¼ˆExit Numbersï¼‰</li><li>æ–¹å‘ç‰Œï¼ˆå¦‚â€œNorth 55â€æˆ–â€œEast 90â€ï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322312.png"></p><hr><h4 id="å±é™©å“æ ‡å¿—"><a href="#å±é™©å“æ ‡å¿—" class="headerlink" title="å±é™©å“æ ‡å¿—"></a>å±é™©å“æ ‡å¿—</h4><p>å±é™©å“æ ‡å¿—æ˜¯ä¸€ç§å¼ è´´åœ¨è¿è¾“è½¦è¾†ã€å®¹å™¨æˆ–åŒ…è£…å¤–éƒ¨çš„æ ‡è¯†ï¼Œç”¨äºè¯´æ˜æ‰€è¿è¾“çš„å±é™©ç‰©å“çš„ç§ç±»å’Œå±é™©ç¨‹åº¦</p><p>å¦‚æœä½ é è¿‘ä¸€è¾†å¼ è´´æœ‰å±é™©å“æ ‡å¿—çš„äº‹æ•…è½¦è¾†</p><ul><li>ç«‹å³è¿œç¦»äº‹æ•…ç°åœºï¼Œå°¤å…¶æ˜¯å½“ä½ çœ‹åˆ°çƒŸé›¾ã€æœ‰æ¯’æ ‡å¿—ã€æˆ–å¬åˆ°çˆ†ç‚¸å£°</li><li>æœä»ç´§æ€¥æ•‘æ´äººå‘˜æŒ‡ç¤ºï¼Œä»–ä»¬å—è¿‡ä¸“ä¸šè®­ç»ƒ</li><li>å¦‚æœç°åœºæ²¡æœ‰åº”æ€¥è½¦è¾†ï¼Œåº”å°½å¿«è¿œç¦»äº‹æ•…åŒºåŸŸï¼Œå¹¶åœ¨å®‰å…¨åœ°ç‚¹æŠ¥è­¦</li><li>å³ä½¿çŸ­æ—¶é—´å†…æ²¡æ„Ÿè§‰ä¸é€‚ï¼Œä¹Ÿæœ‰å¯èƒ½å­˜åœ¨å»¶è¿Ÿæ€§ä¸­æ¯’ååº”ï¼Œå¦‚æœ‰ä¸é€‚ï¼Œè¯·ç«‹å³å°±åŒ»</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322313.png"></p><hr><h3 id="6-äº¤é€šä¿¡å·ç¯ä¸è·¯é¢æ ‡è®°"><a href="#6-äº¤é€šä¿¡å·ç¯ä¸è·¯é¢æ ‡è®°" class="headerlink" title="6. äº¤é€šä¿¡å·ç¯ä¸è·¯é¢æ ‡è®°"></a>6. äº¤é€šä¿¡å·ç¯ä¸è·¯é¢æ ‡è®°</h3><h4 id="äº¤é€šä¿¡å·ç¯"><a href="#äº¤é€šä¿¡å·ç¯" class="headerlink" title="äº¤é€šä¿¡å·ç¯"></a>äº¤é€šä¿¡å·ç¯</h4><ol><li>çº¢ç¯</li></ol><ul><li>å¿…é¡»åœè½¦</li><li>å¯ä»¥å³è½¬ï¼ˆé™¤éæœ‰æ ‡å¿—ç¦æ­¢ï¼‰ï¼Œä½†éœ€å…ˆåœå¹¶è®©è¡Œäººå’Œæ¥è½¦å…ˆè¡Œ</li><li>ä»å•è¡Œé“å·¦è½¬åˆ°å¦ä¸€æ¡å·¦å‘å•è¡Œé“ä¹Ÿå¯ä»¥åœ¨çº¢ç¯æ—¶å·¦è½¬ï¼Œå‰æåŒä¸Š</li></ul><ol start="2"><li>é»„ç¯</li></ol><ul><li>ç¯å³å°†å˜çº¢ï¼Œä¸è¦è¿›å…¥è·¯å£</li></ul><ol start="3"><li>ç»¿ç¯</li></ol><ul><li>å¯ä»¥é€šè¡Œï¼Œä½†è¦ç¤¼è®©è·¯å£ä¸­è¡Œäººå’Œè½¦è¾†</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322428.png"></p><p>é—ªçƒç¯ï¼ˆFlashing Lightsï¼‰</p><ol><li>é—ªçƒçº¢ç¯ï¼šåƒâ€œStopâ€æ ‡å¿—ï¼Œåœè½¦ï¼Œè®©è¡Œåå†é€šè¡Œ</li><li>é—ªçƒé»„ç¯ï¼šå‡é€Ÿï¼Œå°å¿ƒé€šè¡Œ</li></ol><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322429.png"></p><p>ç®­å¤´ç¯ï¼ˆArrowsï¼‰</p><ol><li>çº¢ç®­å¤´ï¼šç¦æ­¢å¯¹åº”æ–¹å‘çš„è½¬å¼¯ã€‚ä½†å¯ä»¥å³è½¬æˆ–ä»å•è¡Œé“å·¦è½¬å…¥å¦ä¸€æ¡å·¦å‘å•è¡Œé“ï¼Œæ¡ä»¶å’Œçº¢ç¯ç›¸åŒ</li><li>å¸¸äº®é»„ç®­å¤´ï¼šç»¿ç®­å¤´å³å°†ç»“æŸï¼Œå‡†å¤‡å˜çº¢</li><li>é—ªçƒé»„ç®­å¤´ï¼šåœ¨è®©è¡Œåå¯ä»¥è½¬å¼¯</li><li>ç»¿ç®­å¤´: å‘ä¸Šï¼šç›´è¡Œï¼Œå‘å·¦ï¼šå·¦è½¬ï¼Œå‘å³ï¼šå³è½¬</li></ol><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322431.png"></p><p>è½¦é“ç¯ï¼ˆLane Signalsï¼‰</p><ol><li>çº¢ Xï¼šç¦æ­¢é©¶å…¥æ­¤è½¦é“</li><li>é»„ Xï¼šè¯¥è½¦é“å°†å…³é—­ï¼Œå°½å¿«æ¢é“</li><li>é—ªçƒé»„ç®­å¤´ï¼šè¯¥è½¦é“å¯å·¦è½¬</li><li>ç»¿ç®­å¤´ï¼šå¯ä»¥ä½¿ç”¨è¯¥è½¦é“</li></ol><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322432.png"></p><hr><h4 id="é“è·¯æ ‡çº¿"><a href="#é“è·¯æ ‡çº¿" class="headerlink" title="é“è·¯æ ‡çº¿"></a>é“è·¯æ ‡çº¿</h4><p>ç™½è‰²è½¦é“çº¿ï¼ˆWhite Lane Linesï¼‰: ç”¨äº<ins>åŒå‘è¡Œé©¶</ins>çš„è½¦é“ä¹‹é—´</p><ul><li>ç™½è‰²è™šçº¿ï¼šå¯å˜é“æˆ–è½¬å¼¯</li><li>ç™½è‰²å®çº¿ï¼šå°½é‡ä¸è¦å˜é“ï¼Œåªæœ‰åœ¨éå¸¸å¿…è¦æ—¶å¯å°å¿ƒè¶Šè¿‡</li><li>åŒç™½è‰²å®çº¿ï¼šç¦æ­¢å˜é“</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322436.png"></p><p>é»„è‰²ä¸­å¿ƒçº¿ï¼ˆYellow Center Linesï¼‰: ç”¨äº<ins>ç›¸åæ–¹å‘è¡Œé©¶</ins>çš„è½¦é“ä¹‹é—´</p><ul><li>é»„è‰²è™šçº¿ï¼šå¯è¶Šçº¿è¶…è½¦</li><li>åŒé»„å®çº¿ï¼šç¦æ­¢ç©¿è¶Šï¼Œä»…å¯å·¦è½¬è¿›&#x2F;å‡ºå°è·¯æˆ–è½¦é“</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322437.png"></p><p>é»„è‰²ç¦æ­¢è¶…è½¦çº¿ï¼ˆNo Passing Linesï¼‰</p><ul><li>å•ä¾§é»„è‰²å®çº¿åœ¨ä½ è¿™è¾¹ï¼šä¸èƒ½èµ·å§‹è¶…è½¦ï¼Œåªèƒ½å®Œæˆè¶…è½¦æˆ–å·¦è½¬</li><li>ä¸€è™šä¸€å®é»„çº¿ï¼šåªæœ‰é è™šçº¿ä¸€ä¾§çš„è½¦é“å¯ä»¥è¶…è½¦</li><li>åŒé»„å®çº¿ï¼šä¸èƒ½è¶…è½¦ï¼Œä½†å…è®¸å·¦è½¬è¿›å‡ºå°è·¯</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322439.png"></p><p>åŒå‘å·¦è½¬è½¦é“ï¼ˆTwo-Way Left Turn Lanesï¼‰</p><ul><li>ä¸­é—´ä¸“ç”¨å·¦è½¬è½¦é“ï¼Œä¸¤ä¾§ç”¨é»„è‰²çº¿å’Œç™½è‰²ç®­å¤´æ ‡è¯†</li><li>ä»…å¯ç”¨æ¥å·¦è½¬æˆ–è°ƒå¤´ï¼Œä¸èƒ½åœ¨æ­¤è½¦é“ä¸Šé•¿æ—¶é—´è¡Œé©¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322440.png"></p><hr><h4 id="é“è·¯é“å£"><a href="#é“è·¯é“å£" class="headerlink" title="é“è·¯é“å£"></a>é“è·¯é“å£</h4><p>é“è·¯é“å£è­¦ç¤ºæ ‡å¿—</p><ol><li>åœ†å½¢é»„è‰²é¢„è­¦æ ‡å¿—ï¼ˆAdvance Warning Signï¼‰: æ ‡æœ‰é»‘è‰²â€œXâ€å’Œâ€œRRâ€ï¼Œæ„å‘³ç€ä½ å³å°†åˆ°è¾¾é“è·¯é“å£ï¼Œé€šå¸¸è®¾ç½®åœ¨é“å£å‰750è‹±å°ºä»¥å†…</li><li>é“è·¯äº¤å‰æ ‡å¿—ï¼ˆRailroad Crossbuck Signï¼‰: ç±»ä¼¼äºâ€œè®©è¡Œâ€æ ‡å¿—ï¼Œå¦‚æœæ˜¯å¤šè½¨é“äº¤å‰ï¼Œä¼šæ˜¾ç¤ºæœ‰å¤šå°‘æ¡è½¨é“</li><li>é—ªçƒç¯å…‰ä¿¡å·ï¼ˆFlashing Light Signalsï¼‰: ç¯å…‰å¼€å§‹é—ªçƒæ—¶å¿…é¡»åœè½¦ï¼Œç›´åˆ°ç«è½¦å®Œå…¨é€šè¿‡ä¸”ç¯å…‰åœæ­¢é—ªçƒ</li><li>é“é—¸ï¼ˆGatesï¼‰: ä¸èƒ½è¯•å›¾åœ¨é“é—¸ä¸‹é™æ—¶æŠ¢è¡Œï¼Œä¹Ÿä¸èƒ½ç»•è¿‡é“é—¸ï¼Œå¿…é¡»ç­‰åˆ°é—¸æ†å®Œå…¨æŠ¬èµ·ã€ç¯å…‰ç†„ç­åå†ç»§ç»­å‰è¿›</li></ol><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322457.png"></p><p>ç´§æ€¥è”ç³»ä¿¡æ¯ï¼ˆENSï¼‰</p><ul><li>ENSï¼ˆEmergency Notification Systemï¼‰ æ˜¯é“è·¯é“å£ä¸Šæä¾›çš„è“è‰²ç´§æ€¥è”ç³»æ ‡è¯†</li><li>å¦‚æœå‘ç”Ÿç´§æ€¥æƒ…å†µï¼ˆæ¯”å¦‚è½¦è¾†å¡åœ¨è½¨é“ä¸Šï¼‰ï¼Œä½ å¯ä»¥ç«‹åˆ»æ‹¨æ‰“è¿™ä¸ªç”µè¯è”ç³»é“è·¯å…¬å¸å¹¶æŠ¥å‘Šå‡†ç¡®ä½ç½®</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img322458.png"></p><hr><h3 id="7-å®‰å…¨é©¾é©¶å°è´´å£«"><a href="#7-å®‰å…¨é©¾é©¶å°è´´å£«" class="headerlink" title="7. å®‰å…¨é©¾é©¶å°è´´å£«"></a>7. å®‰å…¨é©¾é©¶å°è´´å£«</h3><h4 id="é˜²å¾¡æ€§é©¾é©¶"><a href="#é˜²å¾¡æ€§é©¾é©¶" class="headerlink" title="é˜²å¾¡æ€§é©¾é©¶"></a>é˜²å¾¡æ€§é©¾é©¶</h4><ul><li>ä¿æŒè­¦è§‰ï¼Œé¢„åˆ¤ä»–äººè¡Œä¸º: ä¸è¦å‡è®¾å…¶ä»–é©¾é©¶è€…ä¸€å®šä¼šéµå®ˆäº¤é€šè§„åˆ™æˆ–è®©ä½ </li><li>ä¿æŒå®‰å…¨è·ç¦»: ç»™è‡ªå·±ç•™å‡ºè¶³å¤Ÿçš„ååº”ç©ºé—´ï¼Œæ¯”å¦‚å’Œå‰è½¦ä¿æŒ 3 ç§’æˆ–ä»¥ä¸Šçš„è·Ÿè½¦è·ç¦»</li><li>æ§åˆ¶è½¦é€Ÿ: æ ¹æ®è·¯å†µã€å¤©æ°”å’Œäº¤é€šçŠ¶å†µé€‚å½“å‡é€Ÿ</li><li>éšæ—¶åšå¥½åº”å¯¹çªå‘æƒ…å†µçš„å‡†å¤‡: æ¯”å¦‚çªç„¶æœ‰äººå˜é“ã€æ€¥åˆ¹è½¦ã€æ¨ªç©¿é©¬è·¯çš„è¡Œäººæˆ–åŠ¨ç‰©ç­‰</li><li>ä¿æŒå†·é™ï¼Œé€‰æ‹©æœ€å®‰å…¨çš„å¤„ç†æ–¹å¼: ä¸‡ä¸€æ— æ³•é¿å…ç¢°æ’ï¼Œå°½å¯èƒ½é€‰æ‹©â€œæœ€å°ä¼¤å®³â€çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚æ§åˆ¶æ–¹å‘ï¼Œé¿è®©äººç¾¤ã€ç¯æŸ±ç­‰ç¡¬ç‰©</li></ul><hr><h4 id="è·Ÿè½¦è·ç¦»"><a href="#è·Ÿè½¦è·ç¦»" class="headerlink" title="è·Ÿè½¦è·ç¦»"></a>è·Ÿè½¦è·ç¦»</h4><p>ä¸ºä»€ä¹ˆä¿æŒè·Ÿè½¦è·ç¦»å¾ˆé‡è¦</p><ul><li>å°¾éšè¿‡è¿‘ï¼ˆTailgatingï¼‰ æ˜¯å¯¼è‡´è¿½å°¾äº‹æ•…çš„æœ€å¸¸è§åŸå› </li><li>åœ¨ç´§æ€¥æƒ…å†µï¼ˆæ¯”å¦‚å‰è½¦çªç„¶åˆ¹è½¦ï¼‰æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„ååº”ç©ºé—´å®¹æ˜“å‡ºäº‹æ•…</li></ul><p>ä¸‰ç§’è§„åˆ™ï¼ˆThree-Second Ruleï¼‰æ€ä¹ˆç”¨</p><ul><li>é€‰ä¸€ä¸ªå›ºå®šç‰©ä½“ï¼šæ¯”å¦‚è·¯è¾¹çš„æ ‡å¿—ç‰Œã€æ ‘ã€å¤©æ¡¥ç­‰</li><li>å½“å‰è½¦ç»è¿‡è¯¥ç‰©ä½“æ—¶å¼€å§‹è®¡æ•°</li><li>å¦‚æœä½ æ•°åˆ°ä¸‰ä¹‹å‰å·²ç»åˆ°è¾¾é‚£ä¸ªç‰©ä½“ï¼Œè¯´æ˜ä½ è·Ÿå¤ªè¿‘äº†ï¼Œåº”è¯¥æ”¾æ…¢é€Ÿåº¦ã€æ‹‰å¼€è·ç¦»</li></ul><p>ç‰¹æ®Šæƒ…å†µéœ€å¢åŠ è·ç¦»</p><ul><li>é›¨ã€é›ªã€é›¾ã€å†°æ»‘è·¯é¢ï¼šå»¶é•¿ä¸º 4-6 ç§’ç”šè‡³æ›´å¤š</li><li>é«˜é€Ÿè¡Œé©¶æ—¶ï¼šååº”è·ç¦»æ›´é•¿ï¼Œå»ºè®®è¶…è¿‡ 3 ç§’</li><li>è·Ÿå¤§å‹è½¦è¾†ï¼ˆå¦‚å¡è½¦ã€å…¬äº¤ï¼‰ï¼šå› è§†çº¿å—é˜»ä¹Ÿåº”æ‹‰å¤§è·ç¦»</li></ul><p>å¦‚æœè¢«åˆ«äººå°¾éšå¤ªç´§æ€ä¹ˆåŠ</p><ul><li>åˆ‡æ¢è½¦é“ï¼šè®©ä»–å…ˆè¿‡å»</li><li>é€æ¸å‡é€Ÿé è¾¹ï¼šæ‰¾å®‰å…¨çš„åœ°æ–¹è®©å¯¹æ–¹è¶…è½¦ï¼Œä¸è¦æ€¥åˆ¹è½¦æŒ‘è¡…</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img223047.png"></p><hr><h4 id="è½¦é€Ÿ"><a href="#è½¦é€Ÿ" class="headerlink" title="è½¦é€Ÿ"></a>è½¦é€Ÿ</h4><p>ä¸ºä»€ä¹ˆæ§åˆ¶è½¦é€Ÿå¾ˆé‡è¦</p><ul><li>å¼€å¤ªå¿«æˆ–å¤ªæ…¢ éƒ½å¯èƒ½é€ æˆå±é™©</li><li>å®‰å…¨è½¦é€Ÿ â‰  é™é€Ÿæ ‡å¿—ï¼Œè€Œæ˜¯è¦ç»“åˆå¤©æ°”ã€é“è·¯ã€äº¤é€šçŠ¶å†µè°ƒæ•´</li><li>å°±ç®—é™é€Ÿæ˜¯ 55mphï¼Œå¦‚æœå¤§é›¾å¤§é›¨ï¼Œå¯èƒ½åªèƒ½å¼€ 35mph æ‰å®‰å…¨</li><li><ins>é€Ÿåº¦ç¿»å€ï¼Œåˆ¹è½¦è·ç¦»æ˜¯å››å€ï¼ˆä¸æ˜¯ä¸¤å€ï¼‰</ins></li></ul><p>å†³å®šè½¦é€Ÿæ—¶è¦è€ƒè™‘ä»€ä¹ˆ</p><ul><li>ä½ è‡ªå·±çš„ååº”èƒ½åŠ›ï¼šç²¾ç¥çŠ¶æ€å¥½ä¸å¥½ï¼Ÿæ˜¯å¦ç–²åŠ³</li><li>é“è·¯çŠ¶å†µï¼šå‘æ´¼ã€æ‰“æ»‘ã€ä¸‹å¡ã€æ–½å·¥ç­‰éƒ½å¾—å‡é€Ÿ</li><li>è½®èƒå¤§å°å’ŒèŠ±çº¹æ·±åº¦ï¼šè¶Šå¤§çš„è½®èƒã€èŠ±çº¹è¶Šæ·±ï¼Œè¶Šå®¹æ˜“åˆ¹ä½</li><li>é£å‘å’Œé£é€Ÿï¼šé€†é£èƒ½å¸®åŠ©ä½ åˆ¹è½¦ï¼Œé¡ºé£ï¼ˆtailwindï¼‰åè€Œä¼šå»¶é•¿åˆ¹è½¦è·ç¦»</li></ul><hr><h4 id="ç–²åŠ³é©¾é©¶"><a href="#ç–²åŠ³é©¾é©¶" class="headerlink" title="ç–²åŠ³é©¾é©¶"></a>ç–²åŠ³é©¾é©¶</h4><p>å³ä½¿ä½ æ²¡æœ‰çœŸçš„ç¡ç€ï¼Œç–²åŠ³ä¹Ÿä¼šä¸¥é‡å½±å“ä½ å¼€è½¦çš„ååº”æ—¶é—´å’Œåˆ¤æ–­åŠ›</p><ul><li>å¾ˆå¤šç–²åŠ³é©¾é©¶è€…åœ¨å…³é”®æ—¶åˆ»æ— æ³•åŠæ—¶åˆ¹è½¦æˆ–è½¬å‘é¿é™©</li><li>ä¸€ç¬é—´çš„æ‰“çŒç¡ï¼Œå¯èƒ½å°±é€ æˆè½¦ç¥¸ï¼Œå°¤å…¶åœ¨é«˜é€Ÿä¸Š</li></ul><p>å¦‚ä½•é¿å…ç–²åŠ³é©¾é©¶</p><ul><li>ä¿è¯å……è¶³ç¡çœ ï¼Œå°¤å…¶æ˜¯é•¿é€”å‡ºå‘å‰</li><li>ç»å¸¸åœè½¦ä¼‘æ¯ï¼Œå»ºè®®æ¯2å°æ—¶æˆ–100è‹±é‡Œåœä¸€æ¬¡</li><li>ä¸è¦ç¡¬æ’‘ï¼ å¦‚æœå›°äº†ï¼Œå°±æ‰¾å®‰å…¨çš„åœ°æ–¹ä¼‘æ¯</li></ul><hr><h4 id="ä¸åŒå¤©æ°”æ¡ä»¶ä¸‹çš„å®‰å…¨é©¾é©¶å»ºè®®"><a href="#ä¸åŒå¤©æ°”æ¡ä»¶ä¸‹çš„å®‰å…¨é©¾é©¶å»ºè®®" class="headerlink" title="ä¸åŒå¤©æ°”æ¡ä»¶ä¸‹çš„å®‰å…¨é©¾é©¶å»ºè®®"></a>ä¸åŒå¤©æ°”æ¡ä»¶ä¸‹çš„å®‰å…¨é©¾é©¶å»ºè®®</h4><p>é›¾å¤©é©¾é©¶ï¼ˆFogï¼‰</p><ul><li>å»ºè®®é¿å…åœ¨æµ“é›¾ä¸­é©¾é©¶ï¼Œå¦‚å¿…é¡»å¼€è½¦ï¼Œè¯·æ³¨æ„<ul><li>å…³é—­å·¡èˆªæ§åˆ¶ï¼ŒåŠ å¤§è·Ÿè½¦è·ç¦»</li><li>å‡é€Ÿè¡Œé©¶ï¼Œè‹¥çœ‹åˆ°å‰æ–¹è½¦ç¯ï¼Œæ›´è¦å‡é€Ÿï¼Œé˜²æ­¢å¯¹æ–¹åœ¨ä¸­çº¿è¡Œé©¶æˆ–åœç€ä¸åŠ¨</li><li>å¼€å¯è¿‘å…‰ç¯æˆ–é›¾ç¯ï¼Œåˆ‡å‹¿å¼€è¿œå…‰ç¯</li><li>ä¸è¦â€œç›²ç›®å¼€è½¦â€ï¼Œåˆ‡è®°ä¸èƒ½è¶…å‡ºè§†é‡èŒƒå›´é©¾é©¶ï¼Œå¦‚æœé›¾å¤ªæµ“ï¼Œåº”å°½å¿«é©¶å‡ºè·¯é¢ï¼Œå®‰å…¨åœè½¦</li><li>æå‰æ‰“è½¬å‘ç¯ï¼Œå¢åŠ ä»–äººååº”æ—¶é—´</li><li>æå‰åˆ¹è½¦æé†’åè½¦ï¼Œé¿å…è¿½å°¾</li></ul></li></ul><p>é›¨å¤©é©¾é©¶ï¼ˆRainï¼‰</p><ul><li>é›¨å¤©åœ°é¢æ¹¿æ»‘ã€èƒ½è§åº¦ä½<ul><li>æ ¹æ®ä¼Šåˆ©è¯ºä¼Šå·æ³•å¾‹ï¼šé›¨åˆ·ä¸€å¼€ï¼Œè½¦ç¯ä¹Ÿå¿…é¡»å¼€å¯</li><li>å…³é—­å·¡èˆªæ§åˆ¶ï¼Œå‡é€Ÿæ…¢è¡Œï¼Œæ³¨æ„å¼¯é“ã€åˆ¹è½¦æ—¶æ‰“æ»‘é£é™©</li><li>é¿å…æ°´æ»‘ç°è±¡ï¼ˆHydroplaningï¼‰ï¼šè‹¥è½¦è½®å¤±æ§æ‰“æ»‘ï¼Œæ¾æ²¹é—¨ï¼Œä¸è¦æ€¥åˆ¹è½¦ï¼Œå°½é‡æŒæ§æ–¹å‘</li><li>è‹¥é‡ç§¯æ°´è·¯æ®µæˆ–æ¡¥ä¸‹ç§¯æ°´ï¼Œä¸å¯å†’é™©é€šè¿‡ï¼Œåº”æ‰å¤´å¯»æ‰¾æ›¿ä»£è·¯çº¿</li></ul></li></ul><p>å¤§é£å¤©æ°”ï¼ˆHigh Windsï¼‰</p><ul><li>é™ä½è½¦é€Ÿï¼Œç‰¹åˆ«æ˜¯ä»é®æŒ¡åŒºé©¶å…¥å¼€é˜”åŒºåŸŸæˆ–ä¸å¤§è½¦äº¤ä¼šæ—¶</li><li>æ³¨æ„è·¯é¢æ¹¿æ»‘ã€å†°é›ªæˆ–å¤§é›¨ä¼´éšçš„å¤§é£</li><li>åœ¨ä¼Šåˆ©è¯ºä¼Šæ”¶è´¹å…¬è·¯ä¸Šï¼Œå¤§é£å¤©æ°”ç¦æ­¢æ‹–æŒ‚æˆ¿è½¦é€šè¡Œ</li></ul><p>å†¬å­£é©¾é©¶ï¼ˆWinter Drivingï¼‰</p><ul><li>å†¬å­£å¸¸è§å†°é›ªä½æ¸©ã€è§†çº¿å·®ï¼Œæ˜¯ä¸€å¹´ä¸­æœ€éš¾é©¾é©¶çš„å­£èŠ‚<ul><li>å‡é€Ÿï¼Œæ‹‰å¼€è½¦è·ï¼Œå†°é›ªé˜´å½±åŒºåŸŸå°¤å…¶æ»‘</li><li>æ¸…é™¤è½¦èº«æ‰€æœ‰å†°é›ªï¼Œç¡®ä¿å‰åç¯ã€æŒ¡é£ç»ç’ƒå’Œçª—æˆ·éƒ½å¹²å‡€</li><li>è½»è¸©åˆ¹è½¦ï¼Œä»¥æµ‹è¯•å½“å‰è·¯å†µæŠ“åœ°åŠ›</li><li>æ¡¥æ¢ã€é˜´å½±ã€åŒé“ã€å¼¯é“å¯èƒ½æ¯”é“è·¯æ›´æ—©ç»“å†°ï¼Œéœ€æå‰å‡é€Ÿ</li><li>è½¦å†…å‡†å¤‡å¥½æ¯›æ¯¯ã€é£Ÿç‰©ã€å°é“²å­ç­‰åº”æ€¥è£…å¤‡ï¼Œå¦‚æœæŠ›é”šï¼Œåº”å¾…åœ¨è½¦å†…ï¼ŒçŸ­æ—¶é—´å¯åŠ¨å‘åŠ¨æœºä¿æš–ï¼Œå¹¶æ‰“å¼€çª—æˆ·é˜²æ­¢ä¸€æ°§åŒ–ç¢³ä¸­æ¯’ï¼Œç¡®ä¿æ’æ°”ç®¡æ— ç§¯é›ª</li></ul></li></ul><hr><h4 id="ç‰¹æ®Šé©¾é©¶æƒ…å†µä¸æ½œåœ¨å±é™©çš„åº”å¯¹æ–¹æ³•"><a href="#ç‰¹æ®Šé©¾é©¶æƒ…å†µä¸æ½œåœ¨å±é™©çš„åº”å¯¹æ–¹æ³•" class="headerlink" title="ç‰¹æ®Šé©¾é©¶æƒ…å†µä¸æ½œåœ¨å±é™©çš„åº”å¯¹æ–¹æ³•"></a>ç‰¹æ®Šé©¾é©¶æƒ…å†µä¸æ½œåœ¨å±é™©çš„åº”å¯¹æ–¹æ³•</h4><p>é«˜é€Ÿå…¬è·¯ï¼ˆExpresswayï¼‰é©¾é©¶å®‰å…¨æç¤º</p><ul><li>åŠ é€ŸåˆæµåŒºï¼šä¸Šé«˜é€Ÿæ—¶åˆ©ç”¨åŠ é€Ÿè½¦é“æé€Ÿï¼Œä¸ä¸»è·¯è½¦é€Ÿä¸€è‡´å†åˆæµ</li><li>ä½¿ç”¨è½¬å‘ç¯ï¼Œå˜é“å‰å…ˆè§‚å¯Ÿåè§†é•œä¸ç›²åŒº</li><li>ä¿æŒå®‰å…¨è½¦è·ï¼Œé¿å…è¿½å°¾</li><li>å³è½¦é“è¡Œé©¶ï¼Œå·¦è½¦é“è¶…è½¦ç”¨ï¼Œä¸è¦é•¿æ—¶é—´å ç”¨å·¦è½¦é“</li><li>å¦‚é‡æ•…éšœä¸å¯åœ¨é«˜é€Ÿä¸Šåœè½¦è¡Œèµ°ï¼Œåº”å°½å¿«é è¾¹å¼€å¯åŒé—ªã€æ‰“å¼€å¼•æ“ç›–ç­‰å¾…æ•‘æ´</li><li>é”™è¿‡å‡ºå£ä¸å¯å€’è½¦ï¼Œåº”ç»§ç»­å‰è¡Œåˆ°ä¸‹ä¸€ä¸ªå‡ºå£</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img223857.png"></p><p>å¤œé—´é©¾é©¶ï¼ˆNight Drivingï¼‰</p><ul><li>ä¸è¦è¶…å‡ºè½¦ç¯ç…§å°„èŒƒå›´è¡Œé©¶ï¼ˆé¿å…â€œç›²é©¾â€</li><li>å¼€è¿œå…‰ç¯æ—¶<ul><li>é‡å¯¹å‘æ¥è½¦æå‰500è‹±å°ºæ”¹ä¸ºè¿‘å…‰</li><li>å‡†å¤‡è¶…è½¦å‰300è‹±å°ºä¹Ÿè¦åˆ‡æ¢ä¸ºè¿‘å…‰</li></ul></li></ul><p>å¼¯é“ï¼ˆCurvesï¼‰</p><ul><li>å¼¯å‰å‡é€Ÿï¼Œä¸è¦æ€¥åˆ¹æˆ–è¿‡å¼¯æ—¶è¸©åˆ¹è½¦ï¼Œå¦åˆ™æ˜“æ‰“æ»‘æˆ–ç¿»è½¦</li><li>åˆ‡å‹¿è¶Šè¿‡é“è·¯ä¸­å¿ƒçº¿</li></ul><p>æ­£é¢æ¥è½¦é©¶å…¥ä½ çš„è½¦é“ï¼ˆHead-on Approachesï¼‰</p><ul><li>ç«‹åˆ»å‡é€Ÿï¼Œå‘å³ä¾§é¿è®©ï¼Œå¹¶é¸£å–‡å­æé†’</li></ul><p>æ‰“æ»‘ï¼ˆSkiddingï¼‰</p><ul><li>è‹¥è½¦è¾†æ‰“æ»‘ï¼šæ¾å¼€æ²¹é—¨æˆ–åˆ¹è½¦ï¼Œ<ins>é¡ºç€æ‰“æ»‘æ–¹å‘è½»æ‰“æ–¹å‘ç›˜</ins>æ¢å¤æ§åˆ¶ï¼Œç„¶åé‡æ–°è°ƒæ•´æ–¹å‘</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img224051.png"></p><p>é©¶å‡ºè·¯é¢ï¼ˆDriving Off the Pavementï¼‰</p><ul><li>è½¦è¾†é©¶å‡ºè·¯ç¼˜ï¼Œç´§æ¡æ–¹å‘ç›˜ï¼Œæ…¢æ¾æ²¹é—¨å¹¶è½»åˆ¹è½¦</li><li>ç­‰å®‰å…¨åï¼Œç¡®è®¤åæ–¹æ— è½¦å†ç¼“æ…¢é©¶å›è·¯é¢</li><li>åˆ‡å‹¿çŒ›æ‰“æ–¹å‘ç›˜ï¼Œä»¥é˜²ååˆ°å¯¹å‘è½¦é“</li></ul><p>è½¦è¾†èµ·ç«ï¼ˆFireï¼‰</p><ul><li>ç«‹åˆ»åœè½¦ï¼Œå…³é—­å‘åŠ¨æœºï¼Œè¿œç¦»è½¦è¾†ï¼Œæ‹¨æ‰“911</li></ul><p>æ‰å…¥æ°´ä¸­ï¼ˆWater Crashesï¼‰</p><ul><li>è‹¥è½¦è¾†æš‚æœªæ²‰æ²¡ï¼Œè¿…é€Ÿé€šè¿‡çª—æˆ·é€ƒç”Ÿï¼ˆè½¦é—¨é€šå¸¸æ‰“ä¸å¼€ï¼‰</li><li>è‹¥è½¦è¾†å·²æ²‰å…¥æ°´ä¸­ï¼Œç§»è‡³åæ’ç©ºæ°”å£è¢‹åŒºï¼Œæ·±å‘¼å¸åä»åçª—é€ƒç”Ÿ</li></ul><p>ä¸€æ°§åŒ–ç¢³ä¸­æ¯’ï¼ˆCarbon Monoxide Poisoningï¼‰</p><ul><li>ä¸€æ°§åŒ–ç¢³æ— è‰²æ— å‘³ï¼Œç—‡çŠ¶åƒæ„Ÿå†’ï¼šå¤´ç—›ã€æ¶å¿ƒã€çœ©æ™•</li><li>ä¸è¦åœ¨å°é—­è½¦åº“ä¸­å¯åŠ¨æ±½è½¦</li></ul><p>é«˜å‹ç”µï¼ˆPower Lineï¼‰</p><ul><li>å¦‚æœæœ‰ç”µçº¿è½åœ¨è½¦ä¸Šï¼Œç•™åœ¨è½¦å†…ç­‰æ•‘æ´</li><li>è‹¥æœ‰ç«ç¾é£é™©éœ€é€ƒç”Ÿï¼šåŒè„šè·³è½¦ï¼Œä¿æŒèº«ä½“ä¸æ¥è§¦è½¦å’Œåœ°é¢åŒæ—¶ï¼Œä¹‹åç”¨åŒè„šè·³æˆ–å°æ­¥æ»‘è¡Œ50è‹±å°ºè¿œç¦»è½¦ä½“</li></ul><p>åŠ æ²¹å®‰å…¨ï¼ˆExplosive Fire Hazardï¼‰</p><ul><li>ç†„ç«åŠ æ²¹ï¼Œç¦æ­¢å¸çƒŸ</li><li>åŠ æ²¹æ—¶è¯·å‹¿ç¦»å¼€æ²¹æª</li></ul><hr><h4 id="è®¾å¤‡æ•…éšœæ—¶çš„åº”å¯¹æªæ–½"><a href="#è®¾å¤‡æ•…éšœæ—¶çš„åº”å¯¹æªæ–½" class="headerlink" title="è®¾å¤‡æ•…éšœæ—¶çš„åº”å¯¹æªæ–½"></a>è®¾å¤‡æ•…éšœæ—¶çš„åº”å¯¹æªæ–½</h4><p>è½®èƒçˆ†èƒï¼ˆBlowoutsï¼‰</p><ul><li>çˆ†èƒå‰ä¼šå¬åˆ°â€œç °ç °â€çš„å£°éŸ³</li><li>ä¸è¦çŒ›è¸©åˆ¹è½¦</li><li>åšæ³•<ul><li>æ…¢æ…¢æ¾å¼€æ²¹é—¨</li><li>åŒæ‰‹ç´§æ¡æ–¹å‘ç›˜ï¼Œä¿æŒæ§åˆ¶</li><li>ç¨³å®šæ–¹å‘åæ…¢æ…¢é è¾¹åœè½¦</li><li>æ‰“å¼€åŒé—ªç¯</li><li>ä¸‹è½¦æ£€æŸ¥è½®èƒ</li></ul></li></ul><p>è½®èƒæˆ–è½¦è½®è„±è½ï¼ˆLoss of Wheel or Tireï¼‰</p><ul><li>åº”å¯¹æ–¹å¼ä¸çˆ†èƒä¸€è‡´ï¼šæ¾æ²¹é—¨ã€ä¿æŒæ–¹å‘ã€æ…¢æ…¢åœè½¦</li></ul><p>è½¬å‘å¤±çµï¼ˆSteering Failureï¼‰</p><ul><li>æ²¡æ³•æ§åˆ¶æ–¹å‘ç›˜æ—¶<ul><li>æ¾å¼€æ²¹é—¨</li><li>æ‰“å¼€åŒé—ªç¯</li><li>è½»è¸©åˆ¹è½¦ï¼ˆä¸èƒ½çŒ›è¸©ï¼Œé¿å…æ‰“æ»‘æˆ–åŸåœ°æ—‹è½¬</li><li>ä¸è¦å…³é—­ç‚¹ç«å¼€å…³</li></ul></li></ul><p>åˆ¹è½¦å¤±çµï¼ˆBrake Failureï¼‰</p><ul><li>è¸©åˆ¹è½¦å‘ç°åˆ¹è½¦è¸æ¿ç›´æ¥è¸©åˆ°åº•<ul><li>è¿ç»­å¿«é€Ÿè¸©å‡ ä¸‹ï¼Œè¯•å›¾é‡æ–°å»ºç«‹åˆ¹è½¦å‹åŠ›</li><li>å¦‚æœæ— æ•ˆï¼Œ<strong>æ‹‰æ‰‹åˆ¹ï¼ˆç´§æ€¥&#x2F;é©»è½¦åˆ¹è½¦ï¼‰</strong>å‡é€Ÿ</li><li>åŒæ—¶ï¼Œå°†æŒ¡ä½æ¢åˆ°ä½é€Ÿæ¡£è¾…åŠ©å‡é€Ÿ</li><li>å°å¿ƒæ§åˆ¶æ–¹å‘ï¼Œé è¾¹åœè½¦</li></ul></li></ul><p>å¤§ç¯å¤±æ•ˆï¼ˆHeadlight Failureï¼‰</p><ul><li>å¦‚æœç¯çªç„¶å…¨ç­<ul><li>å°è¯•æ‰“å¼€: åŒé—ªç¯ã€è½¬å‘ç¯ã€åœè½¦ç¯</li><li>æ…¢æ…¢é è¾¹åœè½¦</li><li>ä¸è¦å†è¡Œé©¶ï¼Œç­‰å¾…ä¿®ç†æˆ–æ•‘æ´</li></ul></li></ul><p>æ²¹é—¨å¡ä½ï¼ˆStuck Gas Pedalï¼‰</p><ul><li>æ²¹é—¨æ— æ³•æ¾å¼€æ—¶<ul><li>ç”¨è„šå‹¾ä½æ²¹é—¨è¯•å›¾æ‹‰å›æ¥</li><li>å¦‚æœæ²¡æ³•è§£å¡: ç«‹å³æŒ‚å…¥ç©ºæŒ¡ï¼ˆNï¼‰ã€è½»è¸©åˆ¹è½¦å‡é€Ÿã€æ‰“åŒé—ªï¼Œé è¾¹å®‰å…¨åœè½¦</li></ul></li></ul><p>è§†çº¿å—é˜»ï¼ˆBlocked Visionï¼‰</p><ul><li>å¦‚æœçªç„¶è§†çº¿æ¨¡ç³Šæˆ–å®Œå…¨é®æŒ¡<ul><li>æ‘‡ä¸‹ä¾§çª—æ¥è§‚å¯Ÿå¤–é¢</li><li>æ‰“å¼€åŒé—ªï¼Œæ…¢æ…¢é è¾¹åœè½¦</li><li>ç­‰è§†çº¿æ¢å¤æˆ–é—®é¢˜æ’é™¤å†ç»§ç»­å¼€è½¦</li></ul></li></ul><hr><h4 id="æ”»å‡»æ€§é©¾é©¶"><a href="#æ”»å‡»æ€§é©¾é©¶" class="headerlink" title="æ”»å‡»æ€§é©¾é©¶"></a>æ”»å‡»æ€§é©¾é©¶</h4><p>æ”»å‡»æ€§é©¾é©¶æ˜¯æŒ‡ä¸€ç§å¯èƒ½å±åŠä»–äººæˆ–è´¢äº§å®‰å…¨çš„é©¾é©¶æ–¹å¼ï¼Œå¸¸è§çš„è¡Œä¸ºåŒ…æ‹¬</p><ul><li>è¶…é€Ÿé©¾é©¶</li><li>é—¯çº¢ç¯ã€é—¯åœè½¦æ ‡å¿—</li><li>è´´è½¦å°¾ï¼ˆå°¾éšè·ç¦»è¿‡è¿‘ï¼‰</li><li>ä»è·¯è‚©å¼ºè¡Œè¶…è½¦</li><li>å¼ºè¡Œæ’é˜Ÿã€çªç„¶å˜é“åˆ‡å…¥ä»–äººè½¦é“</li><li>æ•…æ„æ€¥åˆ¹è½¦æŠ¥å¤åè½¦</li><li>å¯¹å…¶ä»–å¸æœºåšå‡ºä¾®è¾±æ€§æ‰‹åŠ¿æˆ–é¢éƒ¨è¡¨æƒ…</li><li>å¤§å£°å’†å“®æˆ–è¾±éª‚</li><li>åå¤æŒ‰å–‡å­</li><li>ä¸åœé—ªè¿œå…‰ç¯éªšæ‰°å‰è½¦</li></ul><p>é‡åˆ°æ”»å‡»æ€§é©¾é©¶è€…æ€ä¹ˆåŠ</p><ul><li>ä¿æŒå†·é™ï¼Œä¸è¦è¿˜å‡»æˆ–å›åº”å¯¹æ–¹è¡Œä¸º</li><li>é¿å…çœ¼ç¥æ¥è§¦ï¼Œä¸è¦æ¿€æ€’å¯¹æ–¹</li><li>é”å¥½è½¦é—¨çª—</li><li>ä¿æŒè½¦è·ï¼Œé¿å…è¢«å›°åœ¨å‰è½¦å’Œæ”»å‡»è€…ä¹‹é—´</li><li>å¦‚æœå¯¹æ–¹è¯•å›¾é€¼åœä½ ï¼Œå°½é‡å¼€å¾€äººå¤šæˆ–å®‰å…¨çš„åœ°æ–¹ï¼ˆå¦‚è­¦å¯Ÿå±€ã€åŠ æ²¹ç«™ï¼‰</li><li>ä¸è¦ä½ä¼°å¯¹æ–¹çš„æ½œåœ¨å¨èƒæ€§ï¼Œé¿å…å†²çªå‡çº§</li></ul><hr><h4 id="ä¸åŒç±»å‹é“ä¸Šé‡åˆ°è½¦è¾†æŠ›é”šæˆ–ç´§æ€¥çŠ¶å†µæ—¶è¯¥å¦‚ä½•è‡ªä¿"><a href="#ä¸åŒç±»å‹é“ä¸Šé‡åˆ°è½¦è¾†æŠ›é”šæˆ–ç´§æ€¥çŠ¶å†µæ—¶è¯¥å¦‚ä½•è‡ªä¿" class="headerlink" title="ä¸åŒç±»å‹é“ä¸Šé‡åˆ°è½¦è¾†æŠ›é”šæˆ–ç´§æ€¥çŠ¶å†µæ—¶è¯¥å¦‚ä½•è‡ªä¿"></a>ä¸åŒç±»å‹é“ä¸Šé‡åˆ°è½¦è¾†æŠ›é”šæˆ–ç´§æ€¥çŠ¶å†µæ—¶è¯¥å¦‚ä½•è‡ªä¿</h4><p>åœ¨é«˜å®¹é‡é“è·¯ï¼ˆå¦‚é«˜é€Ÿã€é«˜æ¶ã€ä¸»è¦å¹²é“ï¼‰</p><ul><li>å°½é‡é©¶å…¥æœ€å³ä¾§çš„åº”æ€¥è½¦é“æˆ–å®‰å…¨åŒºåŸŸï¼Œè¿œç¦»æ­£å¸¸è½¦æµ</li><li>ç•™åœ¨è½¦å†…ï¼Œå¹¶ç³»å¥½å®‰å…¨å¸¦</li><li>æ‰“å¼€åŒé—ªç¯ï¼ˆHazard Lightsï¼‰</li><li>æ‹¨æ‰“ 911 æ±‚åŠ©</li><li>ç­‰å¾…æ•‘æ´äººå‘˜åˆ°æ¥ï¼Œä¸è¦è´¸ç„¶ä¸‹è½¦</li></ul><p>åœ¨ä½å®¹é‡é“è·¯ï¼ˆå¦‚ä¹¡æ‘å…¬è·¯ã€ä½å®…åŒºã€æ¬¡è¦é“è·¯ï¼‰</p><ul><li>å°½å¯èƒ½é è¾¹åœè½¦ï¼Œé¿å¼€è½¦æµ</li><li>å¦‚æœå®‰å…¨ï¼Œä»è¿œç¦»æ¥è½¦æ–¹å‘ä¸€ä¾§ä¸‹è½¦</li><li>ç¦»è½¦åï¼Œç«™åœ¨äººè¡Œé“ã€æŠ¤æ åæ–¹æˆ–ç”°è¾¹å®‰å…¨å¤„</li><li>å¦‚æœæ— æ³•å®‰å…¨ä¸‹è½¦ï¼Œç»§ç»­ç•™åœ¨è½¦å†…å¹¶ç³»å¥½å®‰å…¨å¸¦</li><li>æ‰“å¼€åŒé—ªç¯</li><li>æ‹¨æ‰“ 911</li></ul><p>åœ¨ Illinois Tollwayï¼ˆæ”¶è´¹å…¬è·¯ï¼‰</p><ul><li>å°½å¯èƒ½é©¶å…¥æœ€å³ä¾§è·¯è‚©</li><li>ç•™åœ¨è½¦å†…ï¼Œç³»å¥½å®‰å…¨å¸¦</li><li>æ‰“å¼€åŒé—ªç¯</li><li>æ‹¨æ‰“ *999 æˆ– 911</li><li>å€™ Tollway ç»´æŠ¤äººå‘˜æˆ–ç´§æ€¥å“åº”äººå‘˜æ•‘æ´</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>TAG å·¥ä½œæ€»ç»“</title>
      <link href="/posts/d1eea1ad.html"/>
      <url>/posts/d1eea1ad.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="78574d1df27a3b398e97025b2f9f837b6c1d14e1569f23018f1ac7281e69b12e">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f46d4edc41bf8a6c07bf99d5237d754ba8fef694fa8061ed5abd56befd5b172bf7aa9e02dbabf20b1ff75bdca3f4be84a954b0f8ef003469d7a6900a563b68009d2c34866a6a5935d4d1c036cd734ade8db7dcefba458b565085db502003ffecfffaabf2393c212ad061cb06b159743394d3617b881c8fdee5fddc5df985537a8a3e819156486926a158d55a31abfacb60e378384d53ed9e45cc5102b9cd419c113a35cf95362735a8c817967425eba16ac5e55f72c044a595aeccd332025c1561ec7fdecf8cc1b1b5ba9233aca3716948a3f8d98c4914a05fc3596708ed0e83aaf0916023a7b38d9182e9b59f129726f0c363e59de7ebb75d99131056cefd199294f67b7cfc02e51950d5e3e6b2d4903c549b622649e825d6707d47f89679209693afdf35fbd51aa21ff0329d452ebb87f07f0696f99ffd885faf302ba7b26c19bf3cc4a30e6bf6b1dc93cd5b0a68f5b11f6e2914ba44deb00e22b0866677124a35b2665ca6e2cac6976ea0b201cf2551896aa9b57ce301e16e9b2fc6a7b367e3260f1946957d70d0d941045d804e77ce18eaa12f2a75782b6549232126497dabf371347cea7c50051c44dc642e819cb74d35346bf6666afb177b5bdaa45b646a4e23c99e32f698e13350cb422518ed1454b43097c45d7da58f5b43cb0ea2fdd3cc663d4ce0be03c10725c6f7e1832961a638d6f7a985bb6130d2ed629af1daa4951e538ffc78931731722825cc7e7beb15a5a891cedca61ef89ff82230446930ab2870a2e903ec3129a3be702afe18b230aa96358ecd5bfa4c53b6fb0bef7b6cf0ff974437635d8d496eadf8f17ad49fc176861e816f842722eac571c897f2f7d5ee8bacec5e51d8fa1170a3752df68c78e60403e3702a5c4523697ef148fa9a9fb65b3a7c248ceae07930c6b49cc923c102edb61089b8ae370b6b7257a923ecc69b74e32c2fd4398026bee9a45f08e1c988d367848bb5d92e43c1ceebecd3cb285736154900979061620c776d62c6ee8dc9aea7620c25d584f3c54cf31c79bdcdc5c19c22820edc1565eedb48a783df8afda340e2047bb30fcc28e26ecb4efa3eeffb549131e41ede27de7a4edb713d7b35d8313689eb224e48581fa9e260636d5abcc9ce04da0c6daf8c07edd64da1f44ae9d33e19066687aceeb71588f2f490c1519008b2c2d0b58f56899548296e59c9b4c289c9662084c03c1d1d6b087d390af586fd4e979ad4bf66db7c5ad00c9f2ec86b1045ceb3660e1097be4384618545c0c2700fa7809dadc125ec848ec7dc37e15c296dcc36b8806bf10f164a7a6697f9aac0d6458aa012d2a01f5559ed2cf9e2cfaffa76283d9d36f2f29cc7895cba5b17192e6a4db2d973429296b370b723893dafaaa6ab72c7f5668f90392865b2257957bea7cdbdc96df0a2fb8534c1e7bbca891ccb454310419265d7ef3a3309e4ab24162850ff2a53abc405e6ec216f2ccec02e7059b3583e75ef178293f6208d451e44b21ee86e8afcc6f40290cb3e949db3857fff99ec0c160169501650b2ce3f350d39574533ef2ffcaa374a07671fdaeec3be0496159e037dad56e6f275dced1fff10e4d53f66ee3001c41eabfec3d86cdb9bb601fdd376d29e1c3db67b3c85c874d3d00363c2cf4896574a427499b74954d12f7da3ca55a1d4967</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hireEZ å·¥ä½œæ€»ç»“</title>
      <link href="/posts/79e72cc1.html"/>
      <url>/posts/79e72cc1.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="62fb4248181382378ecf77221268a62beaaed1405152dc8bce9e5dc8f0e2d0ca">03c03690e5a2c7a44b2aa66e251c66b95173940c42de79c65734cf256d748a1f3c5f1ebb1b6e1ed78155da26973b1aeea8de5b916b35a11f47804a60fc3a26dadec394d226bcb265ffe40a3d42643dd4f382154869fe2dc2c64023f7d446dd58</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">å¯†ç </span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ 101</title>
      <link href="/posts/7c522c36.html"/>
      <url>/posts/7c522c36.html</url>
      
        <content type="html"><![CDATA[<hr><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><h4 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h4><iframe width="100%" height="400px" src="https://stackblitz.com/edit/stackblitz-starters-nurriis6?embed=1&file=script.js&hideExplorer=1&hideNavigation=1&theme=dark&view=preview" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="https://stackblitz.com/edit/stackblitz-starters-dudf15co?embed=1&file=script.js&hideExplorer=1&hideNavigation=1&theme=dark&view=preview" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹ï¼Œè°¢è°¢</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>WebGL å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/d58818f0.html"/>
      <url>/posts/d58818f0.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p><a href="https://webglfundamentals.org/">WebGL Fundamentals</a>: é€‚åˆåˆå­¦è€…ï¼ŒåŒ…å«è¯¦ç»†çš„æ•™ç¨‹å’Œç¤ºä¾‹ä»£ç </p></blockquote><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="ä»€ä¹ˆæ˜¯Shader"><a href="#ä»€ä¹ˆæ˜¯Shader" class="headerlink" title="ä»€ä¹ˆæ˜¯Shader"></a>ä»€ä¹ˆæ˜¯<code>Shader</code></h4><p><code>Shader</code>æ˜¯è¿è¡Œåœ¨<code>GPU</code>ä¸Šçš„ä¸€æ®µç¨‹åºï¼Œä¸»è¦è´Ÿè´£æ§åˆ¶å›¾å½¢æ¸²æŸ“ç®¡çº¿ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ä¸»è¦ç±»å‹</p><ul><li>é¡¶ç‚¹ç€è‰²å™¨ (<code>Vertex Shader</code>): ç¡®å®šå›¾å½¢çš„æ¯ä¸€ä¸ªé¡¶ç‚¹çš„ä½ç½®</li><li>ç‰‡å…ƒç€è‰²å™¨ (<code>Fragment Shader</code>): æ¸²æŸ“å›¾å½¢çš„æ¯ä¸€ä¸ªç‰‡å…ƒï¼ˆåƒç´ ï¼‰çš„é¢œè‰²</li></ul><h4 id="Shaderå’Œå…¶ä»–æŠ€æœ¯"><a href="#Shaderå’Œå…¶ä»–æŠ€æœ¯" class="headerlink" title="Shaderå’Œå…¶ä»–æŠ€æœ¯"></a><code>Shader</code>å’Œå…¶ä»–æŠ€æœ¯</h4><p><code>Shader</code>æ˜¯å‰ç«¯å›¾å½¢æŠ€æœ¯ä¸­çš„é‡è¦ä¸€ç¯ï¼Œå®ƒä¸å¸¸è§çš„å›¾å½¢æŠ€æœ¯å¦‚<code>CSS</code>ã€<code>SVG</code>ã€<code>Canvas2D</code>å’Œ<code>WebGL</code>éƒ½æœ‰ç€å¯†åˆ‡çš„å…³ç³»ï¼Œæ¯ä¸€ç§æŠ€æœ¯éƒ½åœ¨ä¸åŒå±‚é¢æä¾›äº†å›¾å½¢æ¸²æŸ“çš„èƒ½åŠ›ï¼Œä½†<code>Shader</code>çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒç›´æ¥æ“ä½œ<code>GPU</code>ï¼Œèƒ½å¤Ÿå®ç°é«˜åº¦å¤æ‚çš„è§†è§‰æ•ˆæœ</p><ul><li><p><code>CSS</code>: <code>CSS</code>çš„ä¸»è¦åŠŸèƒ½æ˜¯ç½‘é¡µå¸ƒå±€ï¼Œä½†å®ƒä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›å±æ€§ï¼ˆå¦‚<code>animation</code>å’Œ<code>transform</code>ï¼‰å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚å®ƒçš„å±€é™æ€§åœ¨äºæ— æ³•å¾ˆå¥½åœ°å¤„ç†å¤æ‚çš„åŠ¨æ€å˜åŒ–ï¼Œå°¤å…¶æ˜¯åƒç´ çº§çš„ç²¾ç»†æ“ä½œ</p></li><li><p><code>SVG</code>: <code>SVG</code>æä¾›äº†çŸ¢é‡å›¾å½¢çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡è·¯å¾„ï¼ˆ<code>path</code>æ ‡ç­¾ï¼‰å®šä¹‰ä»»æ„å½¢çŠ¶ï¼Œå¹¶ç»“åˆå±æ€§ï¼ˆå¦‚ <code>stroke-dasharray</code>å’Œ<code>stroke-dashoffset</code>ï¼‰å®ç°åŠ¨ç”»ã€‚ç›¸æ¯”<code>CSS</code>ï¼Œ<code>SVG</code>æ›´é€‚åˆå¤„ç†å¤æ‚çš„å‡ ä½•å›¾å½¢ã€‚ç„¶è€Œï¼Œå®ƒä»ç„¶éš¾ä»¥å®ç°åŠ¨æ€ç²’å­æ•ˆæœæˆ–åƒç´ çº§æ§åˆ¶</p></li><li><p><code>Canvas2D</code>: <code>Canvas2D</code>æä¾›äº†å¯¹æ¯ä¸ªåƒç´ çš„ç›´æ¥æ§åˆ¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡æ•°å­¦è¿ç®—å’Œéšæœºå‡½æ•°å®ç°åŠ¨æ€æ•ˆæœï¼Œä¾‹å¦‚ç²’å­æ‹–å°¾åŠ¨ç”»ã€‚ä½†å®ƒçš„è®¾è®¡åˆè¡·æ˜¯å¤„ç†<code>2D</code>å›¾å½¢ï¼Œå¯¹<code>3D</code>å›¾å½¢çš„æ”¯æŒç›¸å¯¹è¾ƒå¼±</p></li><li><p><code>WebGL</code>: <code>WebGL</code>æ˜¯åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“<code>3D</code>å›¾å½¢çš„æ ‡å‡†ï¼Œå®ƒé€šè¿‡â€œæ¸²æŸ“ç®¡çº¿â€å¤„ç†å›¾å½¢æ•°æ®ã€‚<code>WebGL</code>çš„å¼ºå¤§ä¹‹å¤„åœ¨äºæ—¢å¯ä»¥å¤„ç†<code>2D</code>å›¾å½¢ï¼Œä¹Ÿå¯ä»¥å®ç°<code>3D</code>åœºæ™¯ã€‚<code>Shader</code>æ˜¯<code>WebGL</code>çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œç”¨äºè‡ªå®šä¹‰æ¸²æŸ“ç®¡çº¿ä¸­çš„ç‰¹å®šéƒ¨åˆ†ï¼Œæä¾›å¼€å‘è€…å®Œå…¨çš„æ¸²æŸ“æ§åˆ¶èƒ½åŠ›</p></li></ul><hr><h3 id="ShaderåŸºç¡€çŸ¥è¯†"><a href="#ShaderåŸºç¡€çŸ¥è¯†" class="headerlink" title="ShaderåŸºç¡€çŸ¥è¯†"></a><code>Shader</code>åŸºç¡€çŸ¥è¯†</h3><h4 id="Shaderç¼–ç¨‹è¯­è¨€é€‰æ‹©"><a href="#Shaderç¼–ç¨‹è¯­è¨€é€‰æ‹©" class="headerlink" title="Shaderç¼–ç¨‹è¯­è¨€é€‰æ‹©"></a><code>Shader</code>ç¼–ç¨‹è¯­è¨€é€‰æ‹©</h4><p>ç›®å‰ä¸»è¦çš„<code>Shader</code>ç¼–ç¨‹è¯­è¨€æœ‰ä»¥ä¸‹å‡ ç§</p><ul><li><code>GLSL</code>: ä¸»è¦ç”¨äº<code>OpenGL</code>å¹³å°çš„å›¾å½¢<code>API</code></li><li><code>HLSL</code>: ç”±å¾®è½¯å¼€å‘ï¼Œä¸»è¦ç”¨äº<code>DirectX</code>å¹³å°çš„å›¾å½¢API</li><li><code>Cg</code>: ç”±<code>Nvidia</code>å¼€å‘ï¼Œå¯è¢«ç¼–è¯‘ä¸º<code>GLSL</code>å’Œ<code>HLSL</code>ï¼Œä¸»è¦è¢«ç”¨äº<code>Unity</code>å¹³å°</li><li><code>WGSL</code>: <code>WebGPU</code>çš„ä¸“ç”¨è¯­è¨€ï¼Œé€‚ç”¨äºæœªæ¥çš„æµè§ˆå™¨å›¾å½¢å¼€å‘</li></ul><p>æœ¬å­¦ä¹ ç¬”è®°é‡ç‚¹æ˜¯<code>Web</code>ç¯å¢ƒä¸­çš„<code>Shader</code>å¼€å‘ï¼Œå¹¶åŸºäº<code>WebGL</code>å¹³å°ï¼Œé€‰æ‹©<code>GLSL</code>ä½œä¸ºä¸»è¦çš„å­¦ä¹ è¯­è¨€</p><h4 id="WebGLæ¸²æŸ“ç®¡çº¿æµç¨‹"><a href="#WebGLæ¸²æŸ“ç®¡çº¿æµç¨‹" class="headerlink" title="WebGLæ¸²æŸ“ç®¡çº¿æµç¨‹"></a><code>WebGL</code>æ¸²æŸ“ç®¡çº¿æµç¨‹</h4><p><code>WebGL</code>çš„æ¸²æŸ“ç®¡çº¿çš„æ ¸å¿ƒæµç¨‹ï¼ˆä¸€ä¸ªç‰©ä½“æ˜¯å¦‚ä½•è¢«æ¸²æŸ“åˆ°å±å¹•ä¸Šçš„ï¼‰ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤</p><ul><li>é¡¶ç‚¹ç€è‰²å™¨: å¤„ç†é¡¶ç‚¹æ•°æ®ï¼ˆå¦‚ä½ç½®ã€é¢œè‰²ã€çº¹ç†åæ ‡ï¼‰</li><li>å›¾å…ƒè£…é…: å°†é¡¶ç‚¹æ•°æ®ç»„åˆæˆå›¾å…ƒï¼ˆå¦‚ç‚¹ã€çº¿ã€ä¸‰è§’å½¢ï¼‰</li><li>å…‰æ …åŒ–: å°†å›¾å…ƒè½¬æ¢ä¸ºå±å¹•ä¸Šçš„åƒç´ </li><li>ç‰‡å…ƒç€è‰²å™¨: è®¡ç®—æ¯ä¸ªåƒç´ çš„é¢œè‰²</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img0a729b8d1dae444c9799c7083aa84f65%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><blockquote><p>æ•´ä¸ªæµç¨‹æ˜¯: åœ¨<code>JS</code>ä¸­æä¾›é¡¶ç‚¹çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯<code>Float32Array</code>ç±»å‹çš„æ•°ç»„ï¼ŒåŒ…å«äº†é¡¶ç‚¹çš„ä½ç½®ç­‰ä¿¡æ¯ï¼‰ï¼Œå°†è¿™äº›æ•°æ®ä¼ é€’ç»™é¡¶ç‚¹ç€è‰²å™¨ï¼Œè®©å®ƒè®¡ç®—æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ï¼Œç„¶å<code>WebGL</code>å°†é¡¶ç‚¹è£…é…æˆå›¾å…ƒï¼ˆå¦‚ä¸‰è§’å½¢ï¼‰ï¼Œå›¾å…ƒå†è¢«è½¬æ¢æˆå±å¹•ä¸Šçš„ç©ºåƒç´ ï¼ˆå…‰æ …åŒ–ï¼‰ï¼Œè®©ç‰‡å…ƒç€è‰²å™¨æ¥è®¡ç®—æ¯ä¸ªåƒç´ çš„é¢œè‰²å¹¶å¡«å……ä¸Šå»ï¼Œæœ€ç»ˆå°†ç‰©ä½“æ¸²æŸ“åˆ°å±å¹•ä¸Š</p></blockquote><ul><li>å›¾å…ƒè£…é…å’Œå…‰æ …åŒ–æ˜¯<code>WebGL</code>è‡ªå¸¦çš„æ“ä½œï¼Œæ— æ³•è¿›è¡Œé¢å¤–çš„å®šåˆ¶ï¼Œä½†<strong>é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨åˆ™æ˜¯å®Œå…¨å¯é€šè¿‡ç¼–ç¨‹æ¥å®šåˆ¶åŒ–çš„</strong></li></ul><h4 id="Shaderå¼€å‘ç¯å¢ƒ"><a href="#Shaderå¼€å‘ç¯å¢ƒ" class="headerlink" title="Shaderå¼€å‘ç¯å¢ƒ"></a><code>Shader</code>å¼€å‘ç¯å¢ƒ</h4><p>åœ¨çº¿å¼€å‘å·¥å…·</p><ul><li><a href="https://www.shadertoy.com/">ShaderToy</a>: ä¸€ä¸ªå®æ—¶è¿è¡Œå’Œåˆ†äº«<code>Shader</code>çš„åœ¨çº¿å¹³å°</li><li><a href="https://codesandbox.io/s/kokomi-js-starter-tjh29w?file=/src/app.ts">codesandbox</a>: åå‘å·¥ç¨‹åŒ–çš„<code>Template</code></li><li><code>jsfiddle</code>: <code>Fork</code>ä¸‹é¢çš„<code>fiddle</code>ç„¶åç¼–è¾‘<code>JS</code> (å½“ç„¶ä¹Ÿå¯ä»¥åœ¨<code>codepen</code>é‡Œå†™)</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/ftos1vp6/15/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><!-- - `stackblitz`: `Fork`ä¸‹é¢çš„`blitz`ç„¶åç¼–è¾‘`JS`<iframe width="100%" height="400" src="https://stackblitz.com/edit/stackblitz-starters-7fggovzz?embed=1&file=script.js&hideExplorer=1&hideNavigation=1&theme=dark&view=preview" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe> --><p>ç¼–è¾‘å™¨å¼€å‘å·¥å…·</p><ul><li><code>VSCode</code>: å®‰è£…ä»¥ä¸‹æ’ä»¶ <code>Shader language support</code>, <code>Shader Toy</code>, <code>Live Preview</code>, <code>glsl-canvas</code></li></ul><h4 id="å®ç°ç¬¬ä¸€ä¸ªShader"><a href="#å®ç°ç¬¬ä¸€ä¸ªShader" class="headerlink" title="å®ç°ç¬¬ä¸€ä¸ªShader"></a>å®ç°ç¬¬ä¸€ä¸ª<code>Shader</code></h4><p><code>GLSL</code>è¯­è¨€çš„<code>Shader</code>æ–‡ä»¶åç¼€åæ˜¯<code>.glsl</code></p><ul><li>ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ª<code>mainImage</code>å‡½æ•°ï¼Œå®ƒä¸è¿”å›ä»»ä½•å€¼ï¼Œæ•…è¿”å›ç±»å‹ä¸º<code>void</code>ã€‚å®ƒæ¥å—<code>2</code>ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>4</code>ç»´çš„<code>fragColor</code>ï¼Œä»£è¡¨è¾“å‡ºçš„åƒç´ é¢œè‰²ã€‚å¦ä¸€ä¸ªæ˜¯<code>2</code>ç»´çš„<code>fragCoord</code>ï¼Œä»£è¡¨è¾“å…¥çš„åƒç´ åæ ‡</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor,<span class="keyword">in</span> <span class="type">vec2</span> fragCoord)&#123;</span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>); <span class="comment">// å®šä¹‰çº¢è‰²</span></span><br><span class="line">    fragColor = <span class="type">vec4</span>(color, <span class="number">1.0</span>);     <span class="comment">// è¾“å‡ºçº¢è‰²</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>color</code>çš„<code>3</code>ç»´å˜é‡ï¼Œå°†å®ƒçš„å€¼è®¾ç½®ä¸ºçº¢è‰²ï¼Œçº¢è‰²çš„<code>RGB</code>é¢œè‰²å€¼ä¸º<code>(255,0,0)</code>ï¼Œåœ¨<code>GLSL</code>ä¸­ï¼Œéœ€è¦å…ˆå°†é¢œè‰²åŸå…ˆçš„å€¼è¿›è¡Œå½’ä¸€åŒ–æ“ä½œï¼ˆé™¤ä»¥<code>255</code>ï¼‰åæ‰èƒ½å°†å®ƒæ­£ç¡®åœ°è¾“å‡ºï¼Œå› æ­¤å°†çº¢è‰²çš„å€¼å½’ä¸€åŒ–åå°±å¾—åˆ°äº†<code>(1,0,0)</code>è¿™ä¸ªå€¼ï¼Œå°†å®ƒè½¬æ¢ä¸º<code>3</code>ç»´å˜é‡<code>vec3(1.,0.,0.)</code>èµ‹ç»™<code>color</code>å˜é‡</p></li><li><p>æœ€åç»™è¾“å‡ºé¢œè‰²<code>fragColor</code>èµ‹å€¼ä¸€ä¸ª<code>4</code>ç»´å˜é‡ï¼Œå‰<code>3</code>ç»´å°±æ˜¯<code>color</code>è¿™ä¸ªé¢œè‰²å˜é‡ï¼Œæœ€åä¸€ç»´æ˜¯é€æ˜åº¦ï¼Œç”±äºçº¯çº¢è‰²å¹¶ä¸é€æ˜ï¼Œç›´æ¥å°†å…¶è®¾ä¸º<code>1</code>å³å¯</p></li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/8p2obeju/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li><p>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡åˆ¤æ–­åƒç´ åæ ‡èŒƒå›´ï¼Œç»™ä¸åŒåŒºåŸŸå¡«å……ä¸åŒçš„é¢œè‰²</p></li><li><p>è¿™é‡Œå°±è¦ç”¨åˆ°<code>fragCoord</code>å˜é‡ï¼Œå®ƒä»£è¡¨äº†è¾“å…¥çš„åƒç´ åæ ‡ï¼Œæœ‰<code>2</code>ä¸ªç»´åº¦<code>xy</code>ï¼Œå®ƒä»¬çš„å¤§å°å–å†³äºç”»é¢æœ¬èº«çš„å¤§å°ã€‚å‡è®¾ç”»é¢å½“å‰çš„å¤§å°ä¸º<code>1536x864</code>ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªåƒç´ çš„<code>fragCoord</code>çš„<code>x</code>åæ ‡å€¼å°†ä¼šåˆ†å¸ƒåœ¨<code>(0,1536)</code>ä¹‹é—´ï¼Œ<code>y</code>åæ ‡å€¼åˆ™åˆ†å¸ƒåœ¨<code>(0,864)</code>ä¹‹é—´</p></li><li><p>åœ¨å½“å‰çš„<code>Shader</code>å¼€å‘ç¯å¢ƒå†…ï¼Œè¿˜æœ‰ä¸ªå†…ç½®çš„å˜é‡<code>iResolution</code>ï¼Œä»£è¡¨äº†ç”»é¢æ•´ä½“çš„å¤§å°ï¼Œä½¿ç”¨å®ƒæ—¶ä¸€èˆ¬ä¼šå–å®ƒçš„<code>xy</code>ç»´åº¦</p></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec3</span> color1 = <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>); <span class="comment">// çº¢è‰²</span></span><br><span class="line">    <span class="type">vec3</span> color2 = <span class="type">vec3</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>); <span class="comment">// ç»¿è‰²</span></span><br><span class="line">    <span class="type">vec3</span> color3 = <span class="type">vec3</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// è“è‰²</span></span><br><span class="line">    <span class="type">vec3</span> color4 = <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>); <span class="comment">// é»„è‰²</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fragCoord.x &lt; iResolution.x * <span class="number">0.25</span>) &#123;</span><br><span class="line">        fragColor = <span class="type">vec4</span>(color1, <span class="number">1.0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fragCoord.x &lt; iResolution.x * <span class="number">0.5</span>) &#123;</span><br><span class="line">        fragColor = <span class="type">vec4</span>(color2, <span class="number">1.0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fragCoord.x &lt; iResolution.x * <span class="number">0.75</span>) &#123;</span><br><span class="line">        fragColor = <span class="type">vec4</span>(color3, <span class="number">1.0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fragColor = <span class="type">vec4</span>(color4, <span class="number">1.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ˜¾ç¤ºå‡ºå››ç§é¢œè‰²ï¼Œæ˜¯å› ä¸º<code>GPU</code>ä¼šå¯¹å±å¹•ä¸Šçš„æ¯ä¸€ä¸ªåƒç´ ç‚¹è¿›è¡Œç‹¬ç«‹çš„å¹¶è¡Œè®¡ç®—</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/qtzxg7dj/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="GLSLåŸºç¡€çŸ¥è¯†"><a href="#GLSLåŸºç¡€çŸ¥è¯†" class="headerlink" title="GLSLåŸºç¡€çŸ¥è¯†"></a><code>GLSL</code>åŸºç¡€çŸ¥è¯†</h3><p><code>GLSL</code>æ˜¯ä¸€ç§ç±»ä¼¼<code>C</code>çš„è¯­è¨€ï¼Œç”¨äºæ§åˆ¶<code>GPU</code>çš„æ¸²æŸ“é€»è¾‘ï¼Œå¦‚æœæœ‰<code>C/C++</code>çš„åŸºç¡€ä¼šæ›´å®¹æ˜“ç†è§£ï¼Œä»¥ä¸‹å†…å®¹å°†é€æ­¥ä»‹ç»<code>GLSL</code>çš„æ ¸å¿ƒçŸ¥è¯†</p><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><ul><li>ä¸€ç»´å˜é‡ï¼ˆæ ‡é‡ï¼‰: æ¯”å¦‚<code>int</code>ï¼Œ<code>float</code>ï¼Œ<code>bool</code>ã€‚æµ®ç‚¹å‹<code>float</code>å¯ä»¥è¯´æ˜¯<code>GLSL</code>é‡Œæœ€å¸¸ç”¨çš„ç±»å‹ï¼Œæµ®ç‚¹å‹å˜é‡å¿…é¡»è¦æœ‰å°æ•°ç‚¹ï¼Œä¸èƒ½çœç•¥ï¼Œè€Œä¸”è¯­å¥ç»“å°¾ä¸€å®šè¦åŠ ä¸€ä¸ªåˆ†å·<code>;</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> foo = <span class="number">1.0</span>; <span class="comment">// æµ®ç‚¹å‹</span></span><br><span class="line"><span class="type">int</span> bar = <span class="number">10</span>;    <span class="comment">// æ•´å‹</span></span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>; <span class="comment">// å¸ƒå°”å‹</span></span><br></pre></td></tr></table></figure><ul><li>å‘é‡å˜é‡: å‘é‡ç±»å‹æ”¯æŒ<code>3</code>ç§ç»´åº¦ï¼ŒäºŒç»´<code>vec2</code>ã€ä¸‰ç»´<code>vec3</code>å’Œå››ç»´<code>vec4</code>ï¼Œé€šè¿‡<code>.x</code>,<code>.y</code>,<code>.z</code>,<code>.w</code>ï¼ˆæˆ–<code>.r</code>,<code>.g</code>,<code>.b</code>,<code>.a</code>ï¼‰è®¿é—®ã€‚å¦‚æœæƒ³å¯¹å¤šç»´åº¦å˜é‡è¿›è¡Œå–å€¼æˆ–èµ‹å€¼æ“ä½œï¼Œå°±è¦ç”¨åˆ°<code>.</code>ç¬¦å·ï¼Œå¹¶ä¸”å››ä¸ªç»´åº¦å¯ä»¥ä»»æ„ç»„åˆï¼ˆç§°ä¸º<code>Swizzling</code>ï¼‰</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">vec2</span> a = <span class="type">vec2</span>(<span class="number">1.0</span>, <span class="number">0.0</span>);  <span class="comment">// äºŒç»´å‘é‡</span></span><br><span class="line"></span><br><span class="line"><span class="type">vec3</span> b = <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">0.0</span>);  <span class="comment">// ä¸‰ç»´å‘é‡</span></span><br><span class="line"><span class="type">vec2</span> d = b.xy; <span class="comment">// æå– b çš„ x å’Œ y åˆ†é‡ï¼Œæ„æˆäºŒç»´å‘é‡ d (1.0, 0.5)</span></span><br><span class="line">d.y = <span class="number">2.0</span>; <span class="comment">// ä¿®æ”¹ d çš„ y åˆ†é‡ä¸º 2.0</span></span><br><span class="line"></span><br><span class="line"><span class="type">vec4</span> c = <span class="type">vec4</span>(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// å››ç»´å‘é‡</span></span><br><span class="line"><span class="type">vec3</span> e = c.yxy; <span class="comment">// é‡ç»„ c çš„åˆ†é‡ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ä¸‰ç»´å‘é‡ (0.5, 1.0, 0.5)</span></span><br><span class="line">e.zx = <span class="type">vec2</span>(<span class="number">1.0</span>); <span class="comment">// ä¿®æ”¹ e çš„ z å’Œ x åˆ†é‡ä¸º 1.0</span></span><br></pre></td></tr></table></figure><ul><li>çŸ©é˜µå˜é‡: çŸ©é˜µç”¨äºçº¿æ€§å˜æ¢ï¼Œ<code>mat2</code>ç±»å‹ä»£è¡¨äº†ä¸€ä¸ªå¤§å°æ˜¯<code>2x2</code>çš„çŸ©é˜µï¼Œ<code>mat3</code>ç±»å‹åˆ™ä»£è¡¨äº†ä¸€ä¸ª<code>3x3</code>çš„çŸ©é˜µã€<code>mat4</code>ç±»å‹æ˜¯<code>4x4</code>çš„çŸ©é˜µ</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">mat2</span> m1 = <span class="type">mat2</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);  <span class="comment">// 2x2 çŸ©é˜µ</span></span><br><span class="line"><span class="type">mat3</span> m2 = <span class="type">mat3</span>(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">2.0</span>, <span class="number">1.0</span>); <span class="comment">// 3x3 çŸ©é˜µ</span></span><br></pre></td></tr></table></figure><ul><li>ç»“æ„ä½“: å¦‚æœæƒ³æŠŠå¤šä¸ªå˜é‡æ†ç»‘åˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ç»“æ„ä½“<code>struct</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line">struct Ray &#123;</span><br><span class="line">    <span class="type">vec3</span> ro;  <span class="comment">// èµ·ç‚¹</span></span><br><span class="line">    <span class="type">vec3</span> rd;  <span class="comment">// æ–¹å‘</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Ray ray = Ray(<span class="type">vec3</span>(<span class="number">0.0</span>), <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>));</span><br></pre></td></tr></table></figure><h4 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h4><ul><li><p><code>GLSL</code>æ”¯æŒå¸¸è§çš„ç®—æœ¯è¿ç®—ç¬¦å’Œèµ‹å€¼è¿ç®—ç¬¦</p></li><li><p>è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿ç®—ä¸€å®šè¦ä¿è¯ç»´åº¦çš„åŒ¹é…ï¼Œæ¯”å¦‚ä¸èƒ½å°†ä¸€ä¸ª<code>vec2</code>çš„å˜é‡ä¸ä¸€ä¸ª<code>vec3</code>çš„å˜é‡ç›¸åŠ ï¼Œè¦åŠ çš„è¯å¾—é€‰å–<code>vec3</code>å˜é‡çš„å…¶ä¸­<code>2</code>ä¸ªç»´åº¦ï¼Œè½¬æˆ<code>vec2</code>å˜é‡æ‰èƒ½ä¸å¦ä¸€ä¸ª<code>vec2</code>å˜é‡ç›¸åŠ </p></li><li><p>ä¹Ÿæœ‰ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œå½“<strong>ä¸€ä¸ªå‘é‡å’Œä¸€ä¸ªæ ‡é‡è¿›è¡Œè¿ç®—</strong>æ—¶ï¼Œ<code>GLSL</code>ä¼šå°†æ ‡é‡å¹¿æ’­ï¼ˆ<code>broadcast</code>ï¼‰åˆ°å‘é‡çš„æ¯ä¸€ä¸ªåˆ†é‡ä¸Š</p></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">vec2</span> v = <span class="type">vec2</span>(<span class="number">1.0</span>, <span class="number">2.0</span>);</span><br><span class="line">v += <span class="number">1.0</span>; <span class="comment">// v çš„å€¼ä¸º vec2(2.0, 3.0)</span></span><br></pre></td></tr></table></figure><h4 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h4><ul><li>å’Œå¸¸è§„çš„ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œ<code>GLSL</code>æœ‰åŸºæœ¬çš„æ§åˆ¶æµç»“æ„</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// æ¡ä»¶æ»¡è¶³æ—¶æ‰§è¡Œ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ¡ä»¶ä¸æ»¡è¶³æ—¶æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œ<code>Shader</code>æ˜¯é’ˆå¯¹æ•´ä¸ªå±å¹•çš„åƒç´ è¿›è¡Œå¤„ç†çš„ï¼Œå› æ­¤<code>if</code>çš„æ‰€æœ‰åˆ†æ”¯åªè¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œã€‚è¿™æ˜¯ç”±äº<code>GPU</code>çš„<strong>å¹¶è¡Œç‰¹æ€§</strong>å’Œ<strong>åƒç´ çº§ç‹¬ç«‹å¤„ç†</strong>çš„å·¥ä½œæ–¹å¼</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (fragCoord.x &lt; iResolution.x * <span class="number">0.25</span>)</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// çº¢è‰²</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (fragCoord.x &lt; iResolution.x * <span class="number">0.5</span>)</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// ç»¿è‰²</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); <span class="comment">// è“è‰²</span></span><br></pre></td></tr></table></figure><ul><li><code>GPU</code>ä¼šä¸ºå±å¹•ä¸Šçš„æ¯ä¸ªåƒç´ å•ç‹¬è¿è¡Œä¸€é<code>Fragment Shader</code>ä»£ç ï¼Œä»£ç ä¸­çš„<code>if</code>æ¡ä»¶æ ¹æ®æ¯ä¸ªåƒç´ çš„ä½ç½®ï¼ˆ<code>fragCoord.x</code>ï¼‰æ¥å†³å®šåº”è¯¥æ‰§è¡Œå“ªä¸€æ®µä»£ç </li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/0wrkqhm2/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><h4 id="å˜é‡é™å®šç¬¦"><a href="#å˜é‡é™å®šç¬¦" class="headerlink" title="å˜é‡é™å®šç¬¦"></a>å˜é‡é™å®šç¬¦</h4><p>å˜é‡é™å®šç¬¦æ˜¯ç”¨æ¥æè¿°å˜é‡çš„å­˜å‚¨å’Œä½¿ç”¨æ–¹å¼çš„å…³é”®è¯</p><ul><li><code>GLSL</code>ä¸­å¸¸ç”¨çš„å˜é‡é™å®šç¬¦æœ‰ä»¥ä¸‹å‡ ç§ï¼Œ<code>uniform</code>ã€<code>const</code>ã€<code>varying</code>ã€<code>attribute</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">uniform</span> <span class="type">vec3</span> uColor; <span class="comment">// å®šä¹‰ç»Ÿä¸€çš„é¢œè‰²å˜é‡</span></span><br><span class="line"><span class="keyword">varying</span> <span class="type">vec3</span> vColor; <span class="comment">// é¡¶ç‚¹ç€è‰²å™¨å‘ç‰‡å…ƒç€è‰²å™¨ä¼ é€’çš„é¢œè‰² (æ—§ç‰ˆ GLSL)</span></span><br><span class="line"><span class="keyword">attribute</span> <span class="type">vec3</span> aPosition; <span class="comment">// ä¼ é€’é¡¶ç‚¹ä½ç½® (æ—§ç‰ˆ GLSL)</span></span><br></pre></td></tr></table></figure><ul><li><code>uniform</code>: å…¨å±€å˜é‡ï¼Œä¸€æ—¦å®šä¹‰åä¼šåŒæ—¶å­˜åœ¨äºé¡¶ç‚¹ç€è‰²å™¨ä¸ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œå¹¶ä¸”å®ƒåœ¨æ¯ä¸€ä¸ªé¡¶ç‚¹å’Œç‰‡å…ƒä¸Šçš„å€¼éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ˜¯ä¸€ä¸ªâ€œç»Ÿä¸€â€çš„å€¼</li><li><code>const</code>: å®šä¹‰å¸¸é‡ï¼Œå®ƒæ˜¯æ— æ³•è¢«æ”¹å˜çš„ä¸€ä¸ªå€¼</li><li><code>iTime</code>: è¡¨ç¤º<code>Shader</code>ä»å¼€å§‹åˆ°ç°åœ¨æ‰§è¡Œæ‰€ç»è¿‡çš„æ—¶é—´ï¼Œç”¨äºåˆ›ä½œåŠ¨ç”»æ•ˆæœ</li><li><code>iResolution</code>: è¡¨ç¤º<code>Shader</code>æ‰€åœ¨ç”»å¸ƒçš„å¤§å°ï¼Œé»˜è®¤æ˜¯å æ»¡æ•´ä¸ªå±å¹•</li><li><code>iMouse</code>: è¡¨ç¤ºç”¨æˆ·é¼ æ ‡å½“å‰æ‰€åœ¨çš„ä½ç½®</li></ul><h4 id="å®å®šä¹‰"><a href="#å®å®šä¹‰" class="headerlink" title="å®å®šä¹‰"></a>å®å®šä¹‰</h4><p>å®ï¼ˆ<code>macros</code>ï¼‰æ˜¯ä¸€ç§é¢„å¤„ç†æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ–‡æœ¬çš„æ›¿æ¢ï¼Œå¸¸ç”¨äºå®šä¹‰å¸¸é‡ã€å‡½æ•°ã€æ¡ä»¶ç¼–è¯‘ç­‰</p><ul><li>å®å®šä¹‰çš„æ ¼å¼æ˜¯<code>#define å®çš„åç§° å®çš„å€¼</code>ï¼Œè¯­å¥ç»“å°¾æ²¡æœ‰åˆ†å·ã€‚ä¸‹é¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>PI</code>çš„å®ï¼Œ<code>Shader</code>ç¼–è¯‘æ—¶ä¼šå°†æ‰€æœ‰çš„<code>PI</code>æ›¿æ¢ä¸º<code>3.14159265359</code>è¿™ä¸ªå€¼</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#define PI 3.14159265359</span></span><br></pre></td></tr></table></figure><ul><li>å®ä¹Ÿå¯ä»¥å¸¦æœ‰å‚æ•°ã€‚ä¸‹é¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>add</code>çš„å®ï¼Œæ¥å—<code>2</code>ä¸ªå‚æ•°<code>a</code>å’Œ<code>b</code>ï¼Œå¯¹å®ƒä»¬åº”ç”¨ç›¸åŠ çš„è¿ç®—ï¼Œå¹¶ä¸”æ— éœ€æŒ‡å®šæ˜ç¡®çš„ç±»å‹ï¼Œè°ƒç”¨è¿™ä¸ªå®æ—¶åªè¦å‚æ•°çš„ç±»å‹ç›¸åŒ¹é…ï¼Œå°±èƒ½æ­£ç¡®æ‰§è¡Œå®å®šä¹‰çš„è¿ç®—</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#define add(a,b) a+b</span></span><br></pre></td></tr></table></figure><ul><li>å®ä¹Ÿå¯ä»¥æ¡ä»¶ç¼–è¯‘ã€‚ä¸‹é¢ä»£ç ä¼šåœ¨<strong>ç¼–è¯‘æ—¶</strong>é€šè¿‡<code>#if</code>åˆ¤æ–­å®<code>USE_COLOR</code>çš„å€¼æ˜¯å¦ä¸º<code>1</code>ï¼Œå¦‚æœ<code>USE_COLOR == 1</code>ï¼Œä»£ç ä¼šä¿ç•™çº¢è‰²çš„å®šä¹‰ï¼Œåä¹‹ï¼Œä»£ç ä¼šä¿ç•™é»‘è‰²çš„å®šä¹‰</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="meta">#define USE_COLOR 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#if USE_COLOR == 1</span></span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line"><span class="meta">#else</span></span><br><span class="line">    <span class="type">vec3</span> color = <span class="type">vec3</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><hr><h3 id="UVåŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ"><a href="#UVåŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="UVåŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ"></a><code>UV</code>åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="UVåæ ‡"><a href="#UVåæ ‡" class="headerlink" title="UVåæ ‡"></a><code>UV</code>åæ ‡</h4><ul><li><code>UV</code>åæ ‡æ˜¯ä¸€ç§å°†åƒç´ åæ ‡å½’ä¸€åŒ–åˆ°<code>[0.0, 1.0]</code>èŒƒå›´çš„åæ ‡ç³»ï¼Œå…¶ä¸­<code>U</code>ä»£è¡¨æ°´å¹³æ–¹å‘ï¼ˆ<code>x</code>åæ ‡ï¼‰ï¼Œ<code>V</code>ä»£è¡¨å‚ç›´æ–¹å‘ï¼ˆ<code>y</code>åæ ‡ï¼‰</li><li>åœ¨<code>Shader</code>ç¼–ç¨‹ä¸­ï¼Œ<code>UV</code>åæ ‡ç”¨äºæè¿°ç”»å¸ƒä¸Šçš„å½’ä¸€åŒ–åƒç´ ä½ç½®ï¼Œé€šå¸¸ç”±ç‰‡å…ƒç€è‰²å™¨ä¸­çš„<code>fragCoord</code>å’Œ<code>iResolution</code>è®¡ç®—å¾—å‡ºï¼Œä¸‹é¢æ˜¯<strong>å½’ä¸€åŒ–å…¬å¼</strong></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="UVåæ ‡çš„åˆ†å¸ƒç‰¹æ€§"><a href="#UVåæ ‡çš„åˆ†å¸ƒç‰¹æ€§" class="headerlink" title="UVåæ ‡çš„åˆ†å¸ƒç‰¹æ€§"></a><code>UV</code>åæ ‡çš„åˆ†å¸ƒç‰¹æ€§</h4><ul><li>å…ˆçœ‹ä¸‹<code>x</code>åæ ‡çš„åˆ†å¸ƒæƒ…å†µ</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(uv.x, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç°åœ¨é»˜è®¤é¢œè‰²çš„ç¬¬<code>3</code>ä¸ªå€¼æ˜¯<code>0</code>ï¼Œåªçœ‹å‰<code>2</code>ä¸ªå€¼ã€‚å¯ä»¥çœ‹åˆ°<code>x</code>åæ ‡ä»å·¦è¾¹å¼€å§‹æ˜¯é»‘è‰²ï¼Œå€¼æ˜¯<code>(0,0)</code>ï¼Œåˆ°æœ€å³è¾¹æ˜¯çº¯çº¢è‰²ï¼Œå€¼æ˜¯<code>(1,0)</code>ï¼Œè€Œä¸­é—´åˆ™æ˜¯åˆ†å¸ƒåœ¨<code>(0,1)</code>ä¹‹é—´çš„å€¼ã€‚ä»æ•´ä½“ä¸Šçœ‹ï¼Œå¾—åˆ°äº†ä¸€ä¸ªæ¨ªå‘çš„æ¸å˜å›¾æ¡ˆ</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/q0wxagrm/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>å†çœ‹ä¸‹<code>y</code>åæ ‡çš„åˆ†å¸ƒæƒ…å†µ</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="number">0.0</span>, uv.y, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥çœ‹åˆ°<code>y</code>åæ ‡ä»åº•ä¸‹å¼€å§‹æ˜¯é»‘è‰²ï¼Œå€¼æ˜¯<code>(0,0)</code>ï¼Œåˆ°æœ€ä¸Šé¢æ˜¯çº¯ç»¿è‰²ï¼Œå€¼æ˜¯<code>(0,1)</code>ï¼Œè€Œä¸­é—´åˆ™æ˜¯åˆ†å¸ƒåœ¨<code>(0,1)</code>ä¹‹é—´çš„å€¼ã€‚ä»æ•´ä½“ä¸Šçœ‹ï¼Œå¾—åˆ°äº†ä¸€ä¸ªçºµå‘çš„æ¸å˜å›¾æ¡ˆ</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/arktw6dy/14/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>æ¥ä¸‹æ¥åŒæ—¶è¾“å‡º<code>x</code>åæ ‡å’Œ<code>y</code>åæ ‡çš„åˆ†å¸ƒ</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(uv, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å·¦ä¸‹è§’åŸç‚¹æ˜¯é»‘è‰²ï¼Œå€¼æ˜¯<code>(0,0)</code>ï¼Œå³ä¸‹è§’æ˜¯çº¢è‰²ï¼Œå€¼æ˜¯<code>(1,0)</code>ï¼Œå·¦ä¸Šè§’æ˜¯ç»¿è‰²ï¼Œå€¼æ˜¯<code>(0,1)</code>ï¼Œå³ä¸Šè§’æ˜¯é»„è‰²ï¼Œå€¼æ˜¯<code>(1,1)</code>ï¼Œä¸­é—´çš„æ‰€æœ‰å€¼åœ¨<code>(0,0)</code>åˆ°<code>(1,1)</code>è¿™<code>2</code>ä¸ªåŒºé—´åˆ†å¸ƒã€‚ä»æ•´ä½“ä¸Šçœ‹ï¼Œå¾—åˆ°äº†ä¸€ä¸ªæœ‰å¤šç§é¢œè‰²çš„æ¸å˜å›¾æ¡ˆ</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/beun0ztc/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ä¸Šé¢å°±æ˜¯æ‰€è°“çš„<code>UV</code>åæ ‡ï¼Œå®ƒä»£è¡¨äº†å›¾åƒï¼ˆè¿™é‡ŒæŒ‡ç”»å¸ƒï¼‰ä¸Šæ‰€æœ‰åƒç´ çš„å½’ä¸€åŒ–åçš„åæ ‡ä½ç½®ï¼Œå…¶ä¸­<code>U</code>ä»£è¡¨æ°´å¹³æ–¹å‘ï¼Œ<code>V</code>ä»£è¡¨å‚ç›´æ–¹å‘</li></ul><h4 id="å›¾å½¢ç»˜åˆ¶-åœ†å½¢"><a href="#å›¾å½¢ç»˜åˆ¶-åœ†å½¢" class="headerlink" title="å›¾å½¢ç»˜åˆ¶ (åœ†å½¢)"></a>å›¾å½¢ç»˜åˆ¶ (åœ†å½¢)</h4><ul><li>å…ˆè®¡ç®—<code>UV</code>åæ ‡ä¸Šçš„ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œç„¶åæ ¹æ®è¿™äº›è·ç¦»çš„å€¼æ¥è®¾å®šå¯¹åº”ç‚¹çš„é¢œè‰²</li><li>ä¸ºäº†è®¡ç®—<code>UV</code>ä¸Šç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œå¯ä»¥ç”¨<code>GLSL</code>çš„å†…ç½®å‡½æ•°<code>length</code>å‡½æ•°æ¥å®ç°</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(d), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å·¦ä¸‹è§’åŸç‚¹æ˜¯é»‘è‰²ï¼Œå€¼æ˜¯<code>(0,0)</code>ï¼Œä»åŸç‚¹å‘å³ä¸Šæ–¹å‘è¾å°„çš„å¾„å‘æ¸å˜ï¼Œä¸Šé¢æ¯ä¸ªç‚¹çš„å€¼ä»£è¡¨çš„å°±æ˜¯è¯¥ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œè¶Šé è¿‘åŸç‚¹è·ç¦»è¶Šå°ï¼Œè¶Šæ¥è¿‘é»‘è‰²ï¼Œåä¹‹è¶Šè¿œç¦»åŸç‚¹è·ç¦»è¶Šå¤§ï¼Œè¶Šæ¥è¿‘ç™½è‰²</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/tphn4ge7/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç›®å‰å›¾å½¢çš„ä½ç½®åœ¨å·¦ä¸‹è§’ï¼ŒæŠŠå®ƒæŒªåˆ°ä¸­é—´ï¼Œå°†<code>UV</code>çš„åæ ‡å‡å»<code>0.5</code>ï¼Œå†æ•´ä½“ä¹˜ä¸Š<code>2</code>ï¼Œè¿™ä¸€æ­¥è¢«ç§°ä¸ºâ€œ<code>UV</code>çš„å±…ä¸­å¤„ç†â€</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(uv, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/kc9tjwpq/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>çœ‹ä¸‹æ“ä½œå‰åçš„å¯¹æ¯”å›¾</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgb29b63a75cb74fb9abe31376184db120%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li><p>ä¹‹å‰çš„åæ ‡ç³»åŸç‚¹æ˜¯ç¬¬ä¸€å¹…å›¾å·¦ä¸‹è§’çš„<code>(0,0)</code>ï¼Œé€šè¿‡æ•´ä½“å‡å»<code>0.5</code>ï¼Œå°†åŸç‚¹å˜æˆäº†<code>(-0.5,-0.5)</code>ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒå¹…å›¾å·¦ä¸‹è§’çš„é‚£ä¸ªç‚¹çš„ä½ç½®ï¼Œç¬¬ä¸€å¹…å›¾çš„ä¸­ç‚¹<code>(0.5,0.5)</code>å°±å˜æˆäº†ç¬¬äºŒå¹…å›¾çš„ä¸­ç‚¹<code>(0,0)</code>ï¼Œç„¶åï¼Œå°†åæ ‡æ•´ä½“ä¹˜ä¸Š<code>2</code>ï¼Œå°†<code>0.5</code>å˜æˆäº†<code>1</code>ï¼Œè¿™æ ·å½’ä¸€åŒ–åèƒ½æ–¹ä¾¿åç»­çš„è®¡ç®—</p></li><li><p>ç†è§£<code>UV</code>çš„å±…ä¸­å¤„ç†åï¼Œå°†<code>UV</code>åæ ‡è¾“å‡ºçš„ä»£ç æ³¨é‡Šæ‰ï¼Œæ¢å›ä¹‹å‰çš„è·ç¦»ä»£ç </p></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(d), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥çœ‹åˆ°å›¾å½¢ç¡®å®è¢«æŒªåˆ°äº†ä¸­é—´ã€‚ç„¶è€Œï¼Œå›¾å½¢ç›®å‰çš„å½¢çŠ¶æ˜¯ä¸€ä¸ªæ¤­åœ†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º<code>UV</code>åæ ‡çš„å€¼å¹¶ä¸ä¼šè‡ªåŠ¨åœ°é€‚åº”ç”»å¸ƒçš„æ¯”ä¾‹ï¼Œå¯¼è‡´äº†å›¾å½¢è¢«æ‹‰ä¼¸è¿™ä¸€ç°è±¡</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/rcogqxp6/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ä¸ºäº†ä¿®æ­£è¿™ä¸€ç‚¹ï¼Œéœ€è¦è®¡ç®—ç”»å¸ƒçš„æ¯”ä¾‹ï¼Œå°†ç”»å¸ƒé•¿é™¤ä»¥ç”»å¸ƒå®½å°±èƒ½ç®—å‡ºï¼Œå†å°†<code>UV</code>çš„<code>x</code>åæ ‡ä¸æ¯”ä¾‹ç›¸ä¹˜å³å¯</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(d), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸Šé¢ä»£ç å¾—åˆ°äº†ä¸€ä¸ªå®Œæ•´çš„åœ†å½¢å¾„å‘æ¸å˜ã€‚ä¸­ç‚¹çš„å€¼æ˜¯<code>(0,0)</code>ï¼Œé¢œè‰²æ˜¯çº¯é»‘è‰²ï¼Œç„¶è€Œä»ä¸­ç‚¹å¼€å§‹å‘å››å‘¨è¾å°„çš„é‚£äº›åŒºåŸŸï¼Œå®ƒä»¬çš„å€¼éƒ½å¤§äº<code>0</code>ï¼Œä¸æ˜¯çº¯é»‘è‰²ã€‚æˆ‘ä»¬çš„ç›®æ ‡ï¼Œæ˜¯è¦æŠŠå…¶ä¸­çš„ä¸€ç‰‡åŒºåŸŸä¹Ÿå˜æˆçº¯é»‘è‰²ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æŠŠåˆ†å¸ƒåœ¨è¿™ç‰‡åŒºåŸŸä¸Šé¢çš„ç‚¹çš„å€¼ä¹Ÿå˜æˆ<code>0</code></li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/hnfbt9a7/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>åœ¨<code>Shader</code>ä¸­ï¼Œå€¼çš„æ˜¾ç¤ºèŒƒå›´åªä¼šæ˜¯<code>[0,1]</code>ä¹‹é—´ï¼Œå°äº<code>0</code>çš„è´Ÿæ•°å®é™…æ˜¾ç¤ºçš„å€¼è¿˜æ˜¯<code>0</code>ï¼ˆé»‘è‰²ï¼‰ï¼Œå¤§äº<code>1</code>çš„æ•°å®é™…æ˜¾ç¤ºçš„å€¼è¿˜æ˜¯<code>1</code>ï¼ˆç™½è‰²ï¼‰ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œç»™è·ç¦»<code>d</code>å‡å»ä¸€ä¸ªå€¼ï¼ˆè¿™é‡Œå–<code>0.5</code>ï¼‰ï¼Œåˆ¶é€ å‡ºä¸€ç‰‡è´Ÿæ•°çš„åŒºåŸŸï¼Œè€Œè¿™ç‰‡åŒºåŸŸå°±æ˜¯é»‘è‰²</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    d -= <span class="number">0.5</span>;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(d), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸­é—´ç¡®å®å‡ºç°äº†çº¯é»‘è‰²çš„åœ†å½¢åŒºåŸŸï¼Œç„¶ååªéœ€æŠŠå‘¨å›´çš„æ¸å˜ç»™æ¶ˆé™¤ï¼Œå°±èƒ½å¾—åˆ°çœŸæ­£çš„åœ†å½¢</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/waL3k1b0/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>å…ˆå®šä¹‰ä¸€ä¸ªä¸­é—´å˜é‡<code>c</code>ï¼Œç”¨<code>if</code>è¯­å¥æ¥åˆ¤æ–­è·ç¦»<code>d</code>çš„å¤§å°ï¼Œå¦‚æœå¤§äº<code>0</code>ï¼Œä»£è¡¨çš„æ˜¯é™¤äº†ä¸­é—´çº¯é»‘åŒºåŸŸå¤–çš„æ¸å˜åŒºåŸŸï¼Œå°†å®ƒä»¬çš„å€¼è®¾ä¸º<code>1</code>ï¼ˆç™½è‰²ï¼‰ã€‚åä¹‹ï¼Œå°±ä»£è¡¨çš„æ˜¯ä¸­é—´çš„çº¯é»‘åŒºåŸŸï¼Œå°†å®ƒä»¬çš„å€¼è®¾ä¸º<code>0</code>ï¼ˆé»‘è‰²ï¼‰ï¼Œæœ€åå°†ä¸­é—´å˜é‡ç›´æ¥ä½œä¸ºç»“æœè¾“å‡ºå³å¯</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    d -= <span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> c = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">if</span> (d &gt; <span class="number">0.0</span>) &#123;</span><br><span class="line">        c = <span class="number">1.0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        c = <span class="number">0.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/1hgnwc0r/5/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>åœ¨<code>Shader</code>çš„ç¼–å†™ä¸­ï¼Œåº”å½“å°½é‡é¿å…ä½¿ç”¨<code>if</code>è¯­å¥ã€‚å› ä¸º<code>GPU</code>æ˜¯å¹¶è¡Œå¤„ç†ç»“æœçš„ï¼Œè€Œ<code>if</code>è¯­å¥ä¼šè®©å¤„ç†å™¨è¿›è¡Œåˆ†æ”¯åˆ‡æ¢è¿™ä¸€æ“ä½œï¼Œå¤„ç†å¤šä¸ªåˆ†æ”¯ä¼šé™ä½å¹¶è¡Œå¤„ç†çš„æ€§èƒ½ã€‚</li><li>å¯ä»¥ç”¨<code>GLSL</code>å…¶ä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°æ¥ä¼˜åŒ–æ‰<code>if</code>è¯­å¥ï¼Œè¿™ä¸ªå†…ç½®å‡½æ•°æ˜¯ <code>step</code>å‡½æ•°ï¼Œä¹Ÿè¢«ç§°ä½œâ€œé˜¶æ¢¯å‡½æ•°â€ï¼Œæ˜¯å› ä¸ºå®ƒçš„å›¾åƒæ˜¯é˜¶æ¢¯çš„å½¢çŠ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgc6098091ff504641b13f961d79233dd7%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li>å®ƒçš„ä»£ç è¡¨ç¤ºå½¢å¼æ˜¯è¿™æ ·çš„</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="built_in">step</span>(edge, x)</span><br></pre></td></tr></table></figure><ul><li>å®ƒæ¥å—<code>2</code>ä¸ªå‚æ•°ï¼Œè¾¹ç•Œå€¼<code>edge</code>å’Œç›®æ ‡å€¼<code>x</code>ï¼Œå¦‚æœç›®æ ‡å€¼<code>x</code>å¤§äºè¾¹ç•Œå€¼<code>edge</code>ï¼Œåˆ™è¿”å›<code>1</code>ï¼Œåä¹‹è¿”å›<code>0</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    d -= <span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">step</span>(<span class="number">0.0</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/2nz7p9bg/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>å°½ç®¡åœ†å½¢æ˜¯ç”»å‡ºæ¥äº†ï¼Œä½†ä»”ç»†ä¸€çœ‹ï¼Œå°±ä¼šå‘ç°å›¾å½¢çš„å‘¨å›´æœ‰é”¯é½¿ï¼Œæ¯”è¾ƒå½±å“ç¾è§‚ï¼Œè¦æ¶ˆé™¤å®ƒä»¬</li><li>å†æ¥è®¤è¯†ä¸€ä¸ª<code>GLSL</code>çš„å†…ç½®å‡½æ•°â€”â€”<code>smoothstep</code>å‡½æ•°ï¼Œå®ƒä¹Ÿè¢«ç§°ä½œâ€œå¹³æ»‘é˜¶æ¢¯å‡½æ•°â€ï¼Œæ˜¯å› ä¸ºå®ƒçš„å‡½æ•°å›¾åƒæ˜¯ä¸€ä¸ªå¹³æ»‘è¿‡çš„é˜¶æ¢¯çš„å½¢çŠ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img4553d587e19e41af8e44b5639e4b09df%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li>å®ƒçš„ä»£ç è¡¨ç¤ºå½¢å¼æ˜¯è¿™æ ·çš„</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="built_in">smoothstep</span>(edge1, edge2, x)</span><br></pre></td></tr></table></figure><ul><li>å®ƒçš„è¾¹ç•Œå€¼æ¯”<code>step</code>å‡½æ•°è¦å¤šä¸€ä¸ªï¼Œå¯ä»¥å°†å®ƒçš„è¾¹ç•Œå€¼å®šä¸º<code>edge1</code>å’Œ<code>edge2</code>ã€‚å¦‚æœç›®æ ‡å€¼<code>x</code>å°äºè¾¹ç•Œå€¼<code>edge1</code>ï¼Œåˆ™è¿”å›<code>0</code>ã€‚å¦‚æœç›®æ ‡å€¼<code>x</code>å¤§äºè¾¹ç•Œå€¼<code>edge2</code>ï¼Œåˆ™è¿”å›<code>1</code>ã€‚å¦‚æœç›®æ ‡å€¼<code>x</code>åœ¨<code>2</code>ä¸ªè¾¹ç•Œå€¼ä¹‹é—´ï¼Œåˆ™è¿”å›ä»<code>0</code>åˆ°<code>1</code>å¹³æ»‘è¿‡æ¸¡çš„å€¼</li><li>æŠŠä¹‹å‰ä»£ç é‡Œçš„<code>step</code>å‡½æ•°çš„è¯­å¥æ³¨é‡Šæ‰ï¼Œæ”¹æˆç”¨<code>smoothstep</code>å‡½æ•°æ¥å®ç°ï¼Œå†å°†ç¬¬<code>2</code>ä¸ªè¾¹ç•Œå€¼è®¾å®šä¸ºä¸€ä¸ªæ¯”<code>0</code>ç¨å¾®å¤§ä¸€ç‚¹çš„å€¼ã€‚è¿™é‡Œå–äº†<code>0.02</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    d -= <span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.02</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™æ ·ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªè¾¹ç¼˜æ˜¯å¹³æ»‘çš„ï¼Œæ²¡æœ‰é”¯é½¿çš„åœ†å½¢</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/q3vu9nb7/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><h4 id="å›¾å½¢æ•ˆæœ"><a href="#å›¾å½¢æ•ˆæœ" class="headerlink" title="å›¾å½¢æ•ˆæœ"></a>å›¾å½¢æ•ˆæœ</h4><ul><li>å°½ç®¡<code>Shader</code>çš„ç»˜å›¾æ­¥éª¤ç¡®å®è¦æ¯”ä¼ ç»Ÿçš„ç»˜å›¾æ–¹å¼è¦ç¹çä¸€ç‚¹ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„å¯èƒ½æ€§ï¼Œæ¯”æ–¹è¯´ï¼Œå®ƒèƒ½å®ç°ä¸€äº›ç‰¹æ®Šçš„å›¾å½¢æ•ˆæœ</li></ul><h5 id="æ¨¡ç³Šæ•ˆæœ"><a href="#æ¨¡ç³Šæ•ˆæœ" class="headerlink" title="æ¨¡ç³Šæ•ˆæœ"></a><p style='font-size: 14px'>æ¨¡ç³Šæ•ˆæœ</p></h5><ul><li>ä¸Šé¢ä»£ç ç”¨åˆ°äº†<code>smoothstep</code>å‡½æ•°æ¥ç»˜åˆ¶åœ†å½¢ï¼Œå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ç”¨çš„æ˜¯ä¸€ä¸ªå¾ˆå°çš„å€¼<code>0.02</code>ï¼Œå°è¯•æŠŠè¿™ä¸ªå€¼æ”¹å¤§ä¸€ç‚¹ï¼Œæ¯”å¦‚<code>0.2</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    d -= <span class="number">0.5</span>;</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.2</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éšç€æ¸å˜åŒºåŸŸçš„æ‰©å¤§ï¼Œåœ†å½¢çš„è¾¹ç¼˜å˜å¾—æ¨¡ç³Šäº†èµ·æ¥ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªè¾¹ç•Œå€¼çš„å·®å˜å¤§äº†ï¼Œæ¸å˜çš„åŒºåŸŸä¹Ÿå°±éšç€å˜å¤§äº†ï¼Œè¿™æ ·å°±è¥é€ å‡ºäº†ä¸€ç§æ¨¡ç³Šçš„æ•ˆæœ</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/298mf57z/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><h5 id="å‘å…‰æ•ˆæœ"><a href="#å‘å…‰æ•ˆæœ" class="headerlink" title="å‘å…‰æ•ˆæœ"></a><p style='font-size: 14px'>å‘å…‰æ•ˆæœ</p></h5><ul><li>è¿™é‡Œä¸ç”¨<code>smoothstep</code>å‡½æ•°æ¥ç»˜åˆ¶å›¾å½¢ï¼Œå–è·ç¦»<code>d</code>çš„å€’æ•°ï¼Œå¹¶ä¸”ä¹˜ä¸Šä¸€ä¸ªæ¯”è¾ƒå°çš„å€¼</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    <span class="type">float</span> c = <span class="number">0.25</span> / d;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/20jhyq9m/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç”»é¢ä¸Šå‡ºç°äº†ä¸€ä¸ªç¾ä¸½çš„å…‰çƒï¼Œå®ƒæ˜¯æ€ä¹ˆå½¢æˆçš„å‘¢</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img59b48526299f48f4b5e1b3adac92425b%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li><p>è¿™æ˜¯ä¸ªåæ¯”ä¾‹å‡½æ•°çš„å›¾åƒï¼Œç›®å‰è¾“å…¥å€¼èŒƒå›´æ˜¯<code>(0.,1.)</code>ï¼Œåœ¨è¿™æ®µèŒƒå›´å†…ï¼Œè¾“å…¥å€¼ä½äº<code>(0.,.25)</code>æ—¶ï¼Œè¾“å‡ºå€¼éƒ½å¤§äº<code>1</code>ï¼Œ<code>Shader</code>ä¸­æ¯”<code>1</code>å¤§çš„å€¼è¾“å‡ºçš„è¿˜æ˜¯ç™½è‰²ï¼Œå› æ­¤èƒ½çœ‹åˆ°ä¸­é—´çš„ç™½è‰²åœ†å½¢éƒ¨åˆ†ã€‚è¾“å…¥å€¼ä½äº<code>(.25,1.)</code>æ—¶ï¼Œè¾“å‡ºçš„å€¼å¼€å§‹å˜æˆäº†æ¯”<code>1</code>å°çš„å€¼ï¼Œè€Œä¸”æ˜¯é€æ¸å˜åŒ–çš„ï¼Œå› æ­¤ä¼šäº§ç”Ÿä¸€ç§æ¸å˜çš„æ•ˆæœ</p></li><li><p>ç›®å‰å…‰çš„è¾å°„èŒƒå›´å¤ªå¤§äº†ï¼Œè¦ç¨å¾®ç¼©å°ä¸€äº›</p></li><li><p>å†æ¥è®¤è¯†ä¸€ä¸ªæ–°çš„å†…ç½®å‡½æ•°â€”â€”<code>pow</code>å‡½æ•°ï¼Œå®ƒç”¨äºè®¡ç®—æ•°å­—çš„æŒ‡æ•°å¹‚ï¼Œæ¯”å¦‚<code>pow(4.,3.)</code>ï¼Œè¿”å›çš„å€¼å°±æ˜¯<code>4</code>çš„<code>3</code>æ¬¡æ–¹â€”â€”<code>64</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>pow</code>è¿™ä¸ªå‡½æ•°èƒ½è®©æ•°å€¼æŒ‡æ•°èˆ¬åœ°å¢é•¿</p></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="number">0.5</span>) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    <span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">    <span class="type">float</span> c = <span class="number">0.25</span> / d;</span><br><span class="line">    c = <span class="built_in">pow</span>(c, <span class="number">1.6</span>);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/yf4gt3L5/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ä¸ºäº†ç†è§£è¿™ä¸€æ­¥ï¼Œä¾æ—§æ¥çœ‹å›¾</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img88ddcf2cfc24418aa5c405b7e57b2110%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li>å‡½æ•°å›¾åƒæ¯”ä¹‹å‰è¦å¾€ä¸‹â€œèººâ€äº†ä¸€äº›ï¼Œè¾“å‡ºå€¼æ€»ä½“å˜å°äº†ï¼Œè¿™æ ·å…‰çš„è¾å°„ä¹Ÿç¨å¾®ç¼©å°äº†ä¸€ç‚¹</li></ul><h4 id="SDFå‡½æ•°"><a href="#SDFå‡½æ•°" class="headerlink" title="SDFå‡½æ•°"></a><code>SDF</code>å‡½æ•°</h4><ul><li>åœ†å½¢æ˜¯ä¼—å¤šå‡ ä½•å›¾å½¢ä¸­çš„å…¶ä¸­ä¸€ç§ï¼Œæ—¢ç„¶å·²ç»é€šè¿‡ä¸Šé¢çš„æ–¹å¼å°†å®ƒç”»äº†å‡ºæ¥ï¼Œé‚£è‚¯å®šä¹Ÿèƒ½ç”¨ç±»ä¼¼çš„æ‰‹æ®µæ¥æŠŠå…¶ä»–å›¾å½¢ç»™ç”»å‡ºæ¥</li><li>ç»˜åˆ¶åœ†å½¢æ—¶ï¼Œåœ¨è°ƒç”¨<code>smoothstep</code>å‡½æ•°ä¹‹å‰åšäº†å¦‚ä¸‹çš„æ“ä½œ</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> d = <span class="built_in">length</span>(uv);</span><br><span class="line">d -= <span class="number">0.5</span>;</span><br></pre></td></tr></table></figure><ul><li>å…¶å®ï¼Œå¯ä»¥æŠŠè¿™äº›æ“ä½œæŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå«<code>sdCircle</code></li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> sdCircle(<span class="type">vec2</span> p, <span class="type">float</span> r) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">length</span>(p) - r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord) &#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    <span class="type">float</span> d = sdCircle(uv, <span class="number">0.5</span>);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(d), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å°½ç®¡è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ç»“æœè·Ÿä¹‹å‰å†™çš„ä¸€æ¨¡ä¸€æ ·ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å«ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>SDF</code>å‡½æ•°</li><li><code>SDF</code>å‡½æ•°ï¼ˆ<code>Signed Distance Function</code>ï¼‰ï¼Œä¸­æ–‡è¯‘ä½œâ€œç¬¦å·è·ç¦»å‡½æ•°â€ï¼Œå®ƒç”¨äºæè¿°è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ç©ºé—´é‡Œçš„ä¸€ä¸ªä½ç½®ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›è¯¥ä½ç½®åˆ°ç»™å®šå½¢çŠ¶çš„è·ç¦»ï¼Œå®ƒçš„å‰é¢è¿˜æœ‰ä¸ªâ€œç¬¦å·â€ï¼Œæ˜¯å› ä¸ºåœ¨å½¢çŠ¶å¤–çš„è·ç¦»ä¸ºæ­£æ•°ï¼ˆâ€œ<code>+</code>â€å·ï¼‰ï¼Œåœ¨å½¢çŠ¶å†…çš„è·ç¦»ä¸ºè´Ÿæ•°ï¼ˆâ€œ<code>-</code>â€å·ï¼‰ï¼Œè¾¹ç•Œå¤„çš„å€¼æ°å¥½ä¸º<code>0</code></li><li>ä¸‹å›¾æ˜¯åœ†å½¢<code>SDF</code>å‡½æ•°çš„å¯è§†åŒ–å›¾ï¼Œå¯ä»¥æ›´å½¢è±¡åœ°ç†è§£å®ƒçš„æ„ä¹‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img302511b0a5124c039ddcc8b15bd2a764%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><blockquote><p>å›¾å½¢å­¦å¤§å’–<code>Inigo Quilez</code>ï¼ˆåæ–‡ç®€ç§°<code>iq</code>ï¼‰çš„åšå®¢ä¸Šæœ‰ç¯‡æ–‡ç« æŠŠå¸¸ç”¨çš„<code>2D</code>å›¾å½¢çš„<code>SDF</code>å‡½æ•°éƒ½åˆ—äº†å‡ºæ¥ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥<a href="https://iquilezles.org/articles/distfunctions2d/">éšæ—¶æŸ¥é˜…</a></p></blockquote><ul><li>çŸ¥é“<code>SDF</code>å‡½æ•°çš„æ¦‚å¿µåï¼Œç»˜åˆ¶å…¶ä»–å›¾å½¢å°†ä¼šå˜å¾—éå¸¸è½»æ¾ï¼Œæ¯”å¦‚æƒ³è¦ç”»ä¸€ä¸ªé•¿æ–¹å½¢ï¼Œé‚£ä¹ˆåªéœ€æ‰¾åˆ°é•¿æ–¹å½¢çš„<code>SDF</code>å‡½æ•°ï¼ˆ<code>sdBox</code>ï¼‰ï¼Œè°ƒç”¨å®ƒè·å–è·ç¦»ï¼Œå†ç”¨<code>step</code>æˆ–<code>smoothstep</code>å‡½æ•°å‹¾ç”»å‡ºå›¾å½¢å³å¯</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> sdBox(<span class="keyword">in</span> <span class="type">vec2</span> p, <span class="keyword">in</span> <span class="type">vec2</span> b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> d = <span class="built_in">abs</span>(p) - b;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">length</span>(<span class="built_in">max</span>(d, <span class="type">vec2</span>(<span class="number">0.</span>))) + <span class="built_in">min</span>(<span class="built_in">max</span>(d.x, d.y), <span class="number">0.</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="type">vec2</span>(<span class="number">0.5</span>)) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> d = sdBox(uv, <span class="type">vec2</span>(<span class="number">0.6</span>, <span class="number">0.3</span>));</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.02</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸Šé¢çš„ä»£ç ç”»å‡ºäº†ä¸€ä¸ªåŠå°ºå¯¸é•¿ä¸º<code>0.6</code>ã€å®½ä¸º<code>0.3</code>ï¼ˆå®é™…é•¿ä¸º<code>1.2</code>ã€å®½ä¸º<code>0.6</code>ï¼‰çš„é•¿æ–¹å½¢</li><li>åœ¨<code>SDF</code>ä¸­ï¼ŒçŸ©å½¢çš„<code>sdBox</code>å‡½æ•°å®šä¹‰çš„<code>b</code>å‚æ•°ï¼ˆå¦‚<code>vec2(0.6, 0.3)</code>ï¼‰è¡¨ç¤ºçš„æ˜¯çŸ©å½¢çš„åŠå°ºå¯¸ã€‚è¿™æ˜¯å› ä¸º<code>SDF</code>å‡½æ•°è®¾è®¡æ—¶ï¼Œé€šå¸¸ä½¿ç”¨åŠå°ºå¯¸æ¥è®¡ç®—æ–¹ä¾¿</li></ul><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/f6Lwb17t/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><h4 id="UVå˜æ¢"><a href="#UVå˜æ¢" class="headerlink" title="UVå˜æ¢"></a><code>UV</code>å˜æ¢</h4><ul><li>åŸºäºå·²ç»ç”»å¥½çš„è¿™ä¸ªé•¿æ–¹å½¢ï¼Œæ¥å­¦ä¹ ä¸€äº›åŸºæœ¬çš„<code>UV</code>å˜æ¢æ“ä½œ</li></ul><h5 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a><p style='font-size: 14px'>å¹³ç§»</p></h5><ul><li>å…ˆå°è¯•ç»™<code>UV</code>çš„<code>x</code>æˆ–<code>y</code>åæ ‡åŠ ä¸Šæƒ³ç§»åŠ¨çš„å€¼</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> sdBox(<span class="keyword">in</span> <span class="type">vec2</span> p, <span class="keyword">in</span> <span class="type">vec2</span> b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> d = <span class="built_in">abs</span>(p) - b;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">length</span>(<span class="built_in">max</span>(d, <span class="type">vec2</span>(<span class="number">0.0</span>))) + <span class="built_in">min</span>(<span class="built_in">max</span>(d.x, d.y), <span class="number">0.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="type">vec2</span>(<span class="number">0.5</span>)) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    uv.x += <span class="number">0.2</span>;</span><br><span class="line">    uv.y += <span class="number">0.4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> d = sdBox(uv, <span class="type">vec2</span>(<span class="number">0.6</span>, <span class="number">0.3</span>));</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.02</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/b2Lmw09n/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>æ˜æ˜æ˜¯ç»™åæ ‡åŠ ä¸Šäº†å€¼ï¼Œä¸ºä»€ä¹ˆå›¾å½¢çš„åæ ‡å¹¶æœªæœå³ä¸Šç§»åŠ¨ï¼Œè€Œæ˜¯æœç›¸åçš„å·¦ä¸‹æ–¹å‘ç§»åŠ¨äº†å‘¢</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="type">vec2</span>(<span class="number">0.5</span>)) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    uv.x += <span class="number">0.2</span>;</span><br><span class="line">    uv.y += <span class="number">0.4</span>;</span><br><span class="line">    fragColor = <span class="type">vec4</span>(uv, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img57f5a49e288c4afa9bbd2e9cf103fba6%7Etplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><ul><li>ä¹‹å‰ä½äºä¸­é—´çš„åŸç‚¹å€¼æ˜¯<code>(0,0)</code>ï¼Œç°åœ¨åˆ™å˜æˆäº†<code>(0.2,0.4)</code>ï¼Œä¸Šä¸€ä¸ª<code>(0,0)</code>ç§»åŠ¨åˆ°äº†å½“å‰ä¸­é—´ç‚¹çš„å·¦ä¸‹æ–¹ï¼Œ<code>SDF</code>å‡½æ•°è¾“å…¥çš„åæ ‡å€¼çš„åŸç‚¹å€¼æ˜¯<code>(0,0)</code>ï¼Œæ­£å¥½å¯¹åº”å·¦ä¸‹æ–¹çš„é‚£ä¸ªç‚¹ï¼Œå› æ­¤å›¾å½¢æ‰ä¼šæ•´ä½“å¾€å·¦ä¸‹æ–¹ç§»åŠ¨</li><li>ä¸ºäº†ç¡®å®š<code>SDF</code>å›¾å½¢ä½ç½®çš„å˜åŒ–ï¼Œè¦çœ‹ç›®å‰<code>(0,0)</code>è¿™ä¸ªç‚¹çš„ä½ç½®å˜åŒ–ã€‚å¦‚æœè¦å¹³ç§»ç¬¦åˆæ­£æ–¹å‘çš„ç§»åŠ¨ï¼ˆå³ä¸Šæ–¹ï¼‰ï¼ŒæŠŠä¹‹å‰çš„åŠ æ³•æ“ä½œæ”¹æˆä¸å…¶ç›¸åçš„å‡æ³•æ“ä½œå³å¯</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> sdBox(<span class="keyword">in</span> <span class="type">vec2</span> p, <span class="keyword">in</span> <span class="type">vec2</span> b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> d = <span class="built_in">abs</span>(p) - b;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">length</span>(<span class="built_in">max</span>(d, <span class="type">vec2</span>(<span class="number">0.0</span>))) + <span class="built_in">min</span>(<span class="built_in">max</span>(d.x, d.y), <span class="number">0.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="type">vec2</span>(<span class="number">0.5</span>)) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    uv -= <span class="type">vec2</span>(<span class="number">0.2</span>, <span class="number">0.4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> d = sdBox(uv, <span class="type">vec2</span>(<span class="number">0.6</span>, <span class="number">0.3</span>));</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.02</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/94f6p7zd/2/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><h5 id="ç¼©æ”¾"><a href="#ç¼©æ”¾" class="headerlink" title="ç¼©æ”¾"></a><p style='font-size: 14px'>ç¼©æ”¾</p></h5><ul><li>å…ˆå°è¯•ç»™<code>UV</code>çš„<code>x</code>æˆ–<code>y</code>åæ ‡ä¹˜ä¸Šæƒ³ç¼©æ”¾çš„å€¼</li></ul><figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> sdBox(<span class="keyword">in</span> <span class="type">vec2</span> p, <span class="keyword">in</span> <span class="type">vec2</span> b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> d = <span class="built_in">abs</span>(p) - b;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">length</span>(<span class="built_in">max</span>(d, <span class="type">vec2</span>(<span class="number">0.0</span>))) + <span class="built_in">min</span>(<span class="built_in">max</span>(d.x, d.y), <span class="number">0.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> mainImage(<span class="keyword">out</span> <span class="type">vec4</span> fragColor, <span class="keyword">in</span> <span class="type">vec2</span> fragCoord)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">vec2</span> uv = fragCoord / iResolution.xy;</span><br><span class="line">    uv = (uv - <span class="type">vec2</span>(<span class="number">0.5</span>)) * <span class="number">2.0</span>;</span><br><span class="line">    uv.x *= iResolution.x / iResolution.y;</span><br><span class="line">    uv *= <span class="type">vec2</span>(<span class="number">2.0</span>, <span class="number">2.0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> d = sdBox(uv, <span class="type">vec2</span>(<span class="number">0.6</span>, <span class="number">0.3</span>));</span><br><span class="line">    <span class="type">float</span> c = <span class="built_in">smoothstep</span>(<span class="number">0.0</span>, <span class="number">0.02</span>, d);</span><br><span class="line">    fragColor = <span class="type">vec4</span>(<span class="type">vec3</span>(c), <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><iframe width="100%" height="400" src="//jsfiddle.net/HDL52/3o56r9kp/1/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>æœä¸å…¶ç„¶ï¼Œå›¾å½¢å¹¶éæ‰©å¤§ï¼Œè€Œæ˜¯ç¼©å°äº†ç›¸åº”çš„å€æ•°</li><li>å½“åæ ‡èŒƒå›´ä»<code>[-1.0, 1.0]</code>æ‰©å¤§åˆ°<code>[-2.0, 2.0]</code>æ—¶ï¼ŒçŸ©å½¢çš„é¡¶ç‚¹åæ ‡è™½ç„¶å˜å¤§äº†ï¼ˆä¾‹å¦‚ä»<code>0.6</code>å˜æˆ<code>1.2</code>ï¼‰ï¼Œä½†ç”±äºç”»å¸ƒçš„æ•´ä½“èŒƒå›´ä¹Ÿå˜å¤§äº†ï¼ŒçŸ©å½¢åœ¨æ•´ä¸ªç”»å¸ƒä¸­çš„ç›¸å¯¹æ¯”ä¾‹ç¼©å°äº†ã€‚å› æ­¤ï¼ŒçŸ©å½¢çœ‹èµ·æ¥å˜å°äº†ã€‚ç®€å•æ¥è¯´ï¼ŒçŸ©å½¢çš„â€œç»å¯¹å¤§å°â€æ²¡æœ‰æ”¹å˜ï¼Œä½†å®ƒåœ¨ç”»å¸ƒä¸­çš„â€œç›¸å¯¹å¤§å°â€å˜å°äº†</li><li>åŒæ ·åœ°ï¼Œå¦‚æœè¦ç¬¦åˆæ­£æ–¹å‘çš„ç¼©æ”¾ï¼ˆæ‰©å¤§ï¼‰ï¼ŒæŠŠä¹‹å‰çš„ä¹˜æ³•æ“ä½œæ”¹æˆä¸å…¶ç›¸åçš„é™¤æ³•æ“ä½œå³å¯</li></ul><h5 id="ç¿»è½¬"><a href="#ç¿»è½¬" class="headerlink" title="ç¿»è½¬"></a><p style='font-size: 14px'>ç¿»è½¬</p></h5><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GO å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/558bc4fb.html"/>
      <url>/posts/558bc4fb.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å‚è€ƒç½‘ç«™: <a href="https://wiki.eryajf.net/go-learn/">https://wiki.eryajf.net/go-learn/</a></p></blockquote><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="ä»€ä¹ˆæ˜¯Goè¯­è¨€"><a href="#ä»€ä¹ˆæ˜¯Goè¯­è¨€" class="headerlink" title="ä»€ä¹ˆæ˜¯Goè¯­è¨€"></a>ä»€ä¹ˆæ˜¯<code>Go</code>è¯­è¨€</h4><p><code>Go</code>æ˜¯ç”±<code>Google</code>å¼€å‘çš„ä¸€ç§å¼€æºç¼–ç¨‹è¯­è¨€ï¼Œè®¾è®¡åˆè¡·æ˜¯è®©å¼€å‘è€…å¯ä»¥å¿«é€Ÿæ„å»ºé«˜æ•ˆçš„ç°ä»£åº”ç”¨ã€‚<code>Go</code>ç»“åˆäº†é™æ€è¯­è¨€çš„æ€§èƒ½å’ŒåŠ¨æ€è¯­è¨€çš„å¼€å‘æ•ˆç‡ï¼Œ<ins>ç‰¹åˆ«é€‚åˆå¼€å‘é«˜å¹¶å‘çš„åç«¯æœåŠ¡</ins></p><h4 id="Goå‘½ä»¤"><a href="#Goå‘½ä»¤" class="headerlink" title="Goå‘½ä»¤"></a><code>Go</code>å‘½ä»¤</h4><blockquote><p><a href="https://docs.kilvn.com/go_command_tutorial/0.0.html">https://docs.kilvn.com/go_command_tutorial/0.0.html</a> (è¿™ä¸€å—å¾—é å®è·µ)</p></blockquote><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td><code>build</code></td><td>ç¼–è¯‘ä»£ç ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</td></tr><tr><td><code>run</code></td><td>ç¼–è¯‘å¹¶ç«‹å³è¿è¡Œä»£ç </td></tr><tr><td><code>fmt</code></td><td>æ ¼å¼åŒ–ä»£ç ï¼Œç¡®ä¿ç»Ÿä¸€çš„ç¼–ç é£æ ¼</td></tr><tr><td><code>test</code></td><td>æ‰§è¡Œå•å…ƒæµ‹è¯•</td></tr><tr><td><code>get</code></td><td>ä¸‹è½½å’Œç®¡ç†ä¾èµ–åŒ…</td></tr><tr><td><code>version</code></td><td>æŸ¥çœ‹ Go çš„ç‰ˆæœ¬</td></tr></tbody></table><h4 id="åŒ…çš„æ¦‚å¿µ"><a href="#åŒ…çš„æ¦‚å¿µ" class="headerlink" title="åŒ…çš„æ¦‚å¿µ"></a>åŒ…çš„æ¦‚å¿µ</h4><p><code>Go</code>æ˜¯ä¸€ä¸ªä»¥<ins>åŒ…</ins>ä¸ºåŸºç¡€çš„è¯­è¨€</p><ul><li>æŠŠç›¸åŒåŠŸèƒ½çš„ä»£ç æ”¾åˆ°ä¸€ä¸ªç›®å½•ï¼Œç§°ä¹‹ä¸ºåŒ…</li><li>åŒ…å¯ä»¥è¢«å…¶ä»–åŒ…å¼•ç”¨</li><li><code>main</code>åŒ…æ˜¯ç”¨æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„ï¼Œæ¯ä¸ªç¨‹åºæœ‰ä¸”åªæœ‰ä¸€ä¸ª<code>main</code>åŒ…</li><li>åŒ…çš„ä¸»è¦ä½œç”¨æ˜¯æé«˜ä»£ç çš„å¯å¤ç”¨æ€§</li></ul><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1) Go è¯­è¨€ä»¥åŒ…ä½œä¸ºç®¡ç†å•ä½</span></span><br><span class="line"><span class="comment">// 2) æ¯ä¸ªæ–‡ä»¶å¿…é¡»å…ˆå£°æ˜åŒ…</span></span><br><span class="line"><span class="comment">// 3) ç¨‹åºå¿…é¡»æœ‰ä¸€ä¸ª main åŒ…ï¼ˆé‡è¦ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main <span class="comment">// å£°æ˜å½“å‰æ–‡ä»¶å±äº main åŒ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Go è¯­è¨€ä»¥åŒæ–œæ ä½œä¸ºå•è¡Œæ³¨é‡Šçš„æ ‡è¯†</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™æ˜¯å—æ³¨é‡Š</span></span><br><span class="line"><span class="comment">å¯ä»¥å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ fmt åŒ…ï¼Œç”¨äºæ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¥å£å‡½æ•°ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ª</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; <span class="comment">// å·¦æ‹¬å·å¿…é¡»ä¸å‡½æ•°ååŒè¡Œï¼Œå¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// æ‰“å° â€œhello goâ€ åˆ°å±å¹•ï¼ŒPrintln() ä¼šè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ Println å‡½æ•°æ—¶ï¼Œéœ€è¦å¯¼å…¥ fmt åŒ…</span></span><br><span class="line">fmt.Println(<span class="string">&quot;hello go&quot;</span>) <span class="comment">// æ³¨æ„ï¼šGo è¯­è¨€è¯­å¥ç»“å°¾æ²¡æœ‰åˆ†å·</span></span><br><span class="line">fmt.Println(<span class="string">&quot;hello haha&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å˜é‡çš„å£°æ˜"><a href="#å˜é‡çš„å£°æ˜" class="headerlink" title="å˜é‡çš„å£°æ˜"></a>å˜é‡çš„å£°æ˜</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">// å¯¼å…¥åŒ…ï¼Œæœªä½¿ç”¨ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 1. å£°æ˜å˜é‡ä½†ä¸èµ‹å€¼ï¼Œé»˜è®¤ä¸ºé›¶å€¼</span></span><br><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">fmt.Println(<span class="string">&quot;a =&quot;</span>, a) <span class="comment">// è¾“å‡ºï¼ša = 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å˜é‡èµ‹å€¼åå†ä½¿ç”¨</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">fmt.Println(<span class="string">&quot;a =&quot;</span>, a) <span class="comment">// è¾“å‡ºï¼ša = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">b = <span class="number">20</span> <span class="comment">// å¯é‡æ–°èµ‹å€¼</span></span><br><span class="line">fmt.Println(<span class="string">&quot;b =&quot;</span>, b) <span class="comment">// è¾“å‡ºï¼šb = 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. åŒæ—¶å£°æ˜å¤šä¸ªå˜é‡ï¼ˆç”¨é€—å·éš”å¼€ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> x, y <span class="type">int</span></span><br><span class="line">x, y = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">fmt.Println(<span class="string">&quot;x =&quot;</span>, x, <span class="string">&quot;, y =&quot;</span>, y) <span class="comment">// è¾“å‡ºï¼šx = 1, y = 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. è‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼ˆæ¨èï¼‰</span></span><br><span class="line">c := <span class="number">30</span> <span class="comment">// æ ¹æ®èµ‹å€¼çš„ç±»å‹æ¨å¯¼å˜é‡ç±»å‹</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;c type is %T\n&quot;</span>, c) <span class="comment">// è¾“å‡ºï¼šc type is int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Printlnå’ŒPrintf"><a href="#Printlnå’ŒPrintf" class="headerlink" title="Printlnå’ŒPrintf"></a><code>Println</code>å’Œ<code>Printf</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Println</span><br><span class="line">  æŒ‰æ®µè¾“å‡ºå†…å®¹ï¼Œæ¯æ®µç”¨ç©ºæ ¼åˆ†éš”</span><br><span class="line">  è‡ªåŠ¨åœ¨å†…å®¹åæ·»åŠ æ¢è¡Œç¬¦</span><br><span class="line"></span><br><span class="line">Printf</span><br><span class="line">  æ ¼å¼åŒ–è¾“å‡ºå†…å®¹ï¼Œé€šè¿‡æ ¼å¼å ä½ç¬¦æ’å…¥å˜é‡å€¼</span><br><span class="line">  ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œéœ€è¦æ˜¾å¼æ·»åŠ  \n</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ Println è¾“å‡º</span></span><br><span class="line">a := <span class="number">10</span></span><br><span class="line">fmt.Println(<span class="string">&quot;a =&quot;</span>, a) <span class="comment">// è¾“å‡ºï¼ša = 10ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Printf æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;a = %d\n&quot;</span>, a) <span class="comment">// è¾“å‡ºï¼ša = 10\nï¼ˆç²¾ç¡®æ§åˆ¶æ ¼å¼ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šä¸ªå˜é‡è¾“å‡º</span></span><br><span class="line">b := <span class="number">20</span></span><br><span class="line">c := <span class="number">30</span></span><br><span class="line">fmt.Println(<span class="string">&quot;a =&quot;</span>, a, <span class="string">&quot;, b =&quot;</span>, b, <span class="string">&quot;, c =&quot;</span>, c) <span class="comment">// è¾“å‡ºï¼ša = 10 , b = 20 , c = 30ï¼ˆæ¯æ®µç”¨ç©ºæ ¼åˆ†éš”ï¼‰</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;a = %d, b = %d, c = %d\n&quot;</span>, a, b, c) <span class="comment">// è¾“å‡ºï¼ša = 10, b = 20, c = 30\n</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤šé‡èµ‹å€¼ä¸åŒ¿åå˜é‡"><a href="#å¤šé‡èµ‹å€¼ä¸åŒ¿åå˜é‡" class="headerlink" title="å¤šé‡èµ‹å€¼ä¸åŒ¿åå˜é‡"></a>å¤šé‡èµ‹å€¼ä¸åŒ¿åå˜é‡</h4><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>å‚è€ƒç½‘ç«™: <a href="https://wiki.eryajf.net/go-learn/">https://wiki.eryajf.net/go-learn/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS åŸå‹é“¾</title>
      <link href="/posts/13fe9182.html"/>
      <url>/posts/13fe9182.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://juejin.cn/post/7007416743215759373">https://juejin.cn/post/7007416743215759373</a></p></blockquote><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="prototypeå’Œ-proto"><a href="#prototypeå’Œ-proto" class="headerlink" title="prototypeå’Œ__proto__"></a><code>prototype</code>å’Œ<code>__proto__</code></h4><h5 id="ä¸¤è€…æ˜¯ä»€ä¹ˆ"><a href="#ä¸¤è€…æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸¤è€…æ˜¯ä»€ä¹ˆ"></a><p style='font-size: 14px'>ä¸¤è€…æ˜¯ä»€ä¹ˆ</p></h5><ul><li><code>prototype</code>: æ˜¾å¼åŸå‹<ul><li>æ˜¯æ„é€ å‡½æ•°çš„ä¸€ä¸ªå±æ€§, ç”¨äºå®šä¹‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§</li><li>å®ƒæŒ‡å‘åŸå‹å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¼šè¢«å®ä¾‹ç»§æ‰¿</li></ul></li><li><code>__proto__</code>: éšå¼åŸå‹<ul><li>æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„å†…éƒ¨å±æ€§</li><li>å®ƒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„<code>prototype</code>ï¼Œç”¨äºå»ºç«‹åŸå‹é“¾</li></ul></li></ul><h5 id="ä¸¤è€…çš„å…³ç³»"><a href="#ä¸¤è€…çš„å…³ç³»" class="headerlink" title="ä¸¤è€…çš„å…³ç³»"></a><p style='font-size: 14px'>ä¸¤è€…çš„å…³ç³»</p></h5><ul><li>æ„é€ å‡½æ•°çš„<code>prototype</code>å’Œå…¶å®ä¾‹çš„<code>__proto__</code>æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å«åšåŸå‹å¯¹è±¡</li><li>åŸå‹å¯¹è±¡æ˜¯å®ç°ç»§æ‰¿çš„æ ¸å¿ƒ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123; <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°æ˜&#x27;</span>, <span class="number">20</span>); <span class="comment">// æ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°çº¢&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> === person1.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> === person2.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h5 id="ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°"></a><p style='font-size: 14px'>ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°</p></h5><ul><li>å¯æ„é€ å‡½æ•°æ˜¯å¯ä»¥ç”¨<code>new</code>æ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡</li><li>ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123; <span class="comment">// è¿™ä¸ªå°±æ˜¯æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°æ˜&#x27;</span>, <span class="number">20</span>) <span class="comment">// è¿™ä¸ªæ˜¯Personæ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°çº¢&#x27;</span>, <span class="number">30</span>) <span class="comment">// è¿™ä¸ªä¹Ÿæ˜¯Personæ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br></pre></td></tr></table></figure><h5 id="éªŒè¯prototypeå’Œ-proto-çš„å…³ç³»"><a href="#éªŒè¯prototypeå’Œ-proto-çš„å…³ç³»" class="headerlink" title="éªŒè¯prototypeå’Œ__proto__çš„å…³ç³»"></a><p style='font-size: 14px'>éªŒè¯<code>prototype</code>å’Œ<code>__proto__</code>çš„å…³ç³»</p></h5><ul><li>æ„é€ å‡½æ•°çš„<code>prototype</code>å®šä¹‰å®ä¾‹å¯ä»¥ç»§æ‰¿çš„æ–¹æ³•</li><li>å®ä¾‹çš„<code>__proto__</code>æŒ‡å‘æ„é€ å‡½æ•°çš„<code>prototype</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// åœ¨åŸå‹å¯¹è±¡ä¸Šå®šä¹‰æ–¹æ³•</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°æ˜&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">const</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;å°çº¢&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯ prototype å’Œ __proto__</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// &#123; sayName: [Function] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">__proto__</span>); <span class="comment">// &#123; sayName: [Function] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> === person1.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> === person2.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨åŸå‹æ–¹æ³•</span></span><br><span class="line">person1.<span class="title function_">sayName</span>(); <span class="comment">// å°æ˜</span></span><br><span class="line">person2.<span class="title function_">sayName</span>(); <span class="comment">// å°çº¢</span></span><br></pre></td></tr></table></figure><h4 id="æ„é€ å‡½æ•°ä¸å¯¹è±¡çš„å…³ç³»"><a href="#æ„é€ å‡½æ•°ä¸å¯¹è±¡çš„å…³ç³»" class="headerlink" title="æ„é€ å‡½æ•°ä¸å¯¹è±¡çš„å…³ç³»"></a>æ„é€ å‡½æ•°ä¸å¯¹è±¡çš„å…³ç³»</h4><h5 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a><p style='font-size: 14px'>æ„é€ å‡½æ•°</p></h5><ul><li>æ„é€ å‡½æ•°æœ¬è´¨ä¸Šæ˜¯å‡½æ•°ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡ã€‚å®šä¹‰æ„é€ å‡½æ•°æœ‰ä»¥ä¸‹å‡ ç§å¸¸è§æ–¹å¼</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="number">10</span>); <span class="comment">// è¾“å‡ºï¼šæˆ‘æ˜¯abc, æˆ‘ä»Šå¹´10å²</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="keyword">function</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">fn2</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="number">10</span>); <span class="comment">// è¾“å‡ºï¼šæˆ‘æ˜¯abc, æˆ‘ä»Šå¹´10å²</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">arrowFn</span> = (<span class="params">name, age</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">arrowFn</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="number">10</span>); <span class="comment">// è¾“å‡ºï¼šæˆ‘æ˜¯abc, æˆ‘ä»Šå¹´10å²</span></span><br></pre></td></tr></table></figure><h5 id="æ„é€ å‡½æ•°çš„æœ¬è´¨"><a href="#æ„é€ å‡½æ•°çš„æœ¬è´¨" class="headerlink" title="æ„é€ å‡½æ•°çš„æœ¬è´¨"></a><p style='font-size: 14px'>æ„é€ å‡½æ•°çš„æœ¬è´¨</p></h5><ul><li>æ‰€æœ‰å‡½æ•°çš„æœ¬è´¨éƒ½æ˜¯ç”±<code>Function</code>æ„é€ å‡½æ•°åˆ›å»ºçš„</li><li>ä¸Šè¿°ä¸‰ç§å†™æ³•ç­‰åŒäºä»¥ä¸‹ä»£ç </li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn1 = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;console.log(`æˆ‘æ˜¯$&#123;name&#125;, æˆ‘ä»Šå¹´$&#123;age&#125;å²`)&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;console.log(`æˆ‘æ˜¯$&#123;name&#125;, æˆ‘ä»Šå¹´$&#123;age&#125;å²`)&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> arrowFn = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;console.log(`æˆ‘æ˜¯$&#123;name&#125;, æˆ‘ä»Šå¹´$&#123;age&#125;å²`)&#x27;</span>);</span><br></pre></td></tr></table></figure><h5 id="æ„é€ å‡½æ•°ä¸åŸå‹çš„å…³ç³»"><a href="#æ„é€ å‡½æ•°ä¸åŸå‹çš„å…³ç³»" class="headerlink" title="æ„é€ å‡½æ•°ä¸åŸå‹çš„å…³ç³»"></a><p style='font-size: 14px'>æ„é€ å‡½æ•°ä¸åŸå‹çš„å…³ç³»</p></h5><ul><li>æ¯ä¸ªæ„é€ å‡½æ•°çš„<code>prototype</code>å’Œå…¶å®ä¾‹çš„<code>__proto__</code>éƒ½æŒ‡å‘åŒä¸€ä¸ªåŸå‹å¯¹è±¡</li><li>åŒæ—¶ï¼Œæ‰€æœ‰å‡½æ•°æœ¬èº«éƒ½æ˜¯<code>Function</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="keyword">function</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">arrowFn</span> = (<span class="params">name, age</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>, æˆ‘ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === fn1.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === fn2.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === arrowFn.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h5 id="åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#åˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a><p style='font-size: 14px'>åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</p></h5><p>åœ¨å¼€å‘ä¸­ï¼Œåˆ›å»ºå¯¹è±¡æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼</p><ul><li>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡: ä½¿ç”¨<code>new</code>è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1); <span class="comment">// è¾“å‡ºï¼šPerson &#123; name: &#x27;abc&#x27;, age: 10 &#125;</span></span><br></pre></td></tr></table></figure><ul><li>å­—é¢é‡åˆ›å»ºå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person2 = &#123; <span class="attr">name</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2); <span class="comment">// è¾“å‡ºï¼š&#123; name: &#x27;abc&#x27;, age: 10 &#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>new Object</code>åˆ›å»ºå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person3 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">person3.<span class="property">name</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">person3.<span class="property">age</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person3); <span class="comment">// è¾“å‡ºï¼š&#123; name: &#x27;abc&#x27;, age: 10 &#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>Object.create</code>åˆ›å»ºå¯¹è±¡: åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šåŸå‹çš„ç©ºå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person4 = <span class="title class_">Object</span>.<span class="title function_">create</span>(&#123;&#125;);</span><br><span class="line">person4.<span class="property">name</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">person4.<span class="property">age</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person4); <span class="comment">// è¾“å‡ºï¼š&#123; name: &#x27;abc&#x27;, age: 10 &#125;</span></span><br></pre></td></tr></table></figure><h5 id="å­—é¢é‡ä¸new-Objectçš„å…³ç³»"><a href="#å­—é¢é‡ä¸new-Objectçš„å…³ç³»" class="headerlink" title="å­—é¢é‡ä¸new Objectçš„å…³ç³»"></a><p style='font-size: 14px'>å­—é¢é‡ä¸<code>new Object</code>çš„å…³ç³»</p></h5><ul><li>å­—é¢é‡å’Œ<code>new Object</code>åˆ›å»ºçš„å¯¹è±¡æœ¬è´¨ä¸Šéƒ½æ˜¯<code>Object</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person2 = &#123; <span class="attr">name</span>: <span class="string">&#x27;abc&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> person3 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">person3.<span class="property">name</span> = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">person3.<span class="property">age</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> === person2.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> === person3.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h5 id="Functionå’ŒObjectçš„å…³ç³»"><a href="#Functionå’ŒObjectçš„å…³ç³»" class="headerlink" title="Functionå’ŒObjectçš„å…³ç³»"></a><p style='font-size: 14px'><code>Function</code>å’Œ<code>Object</code>çš„å…³ç³»</p></h5><ul><li>å‡½æ•°æ˜¯<code>Function</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === fn.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡æ˜¯<code>Object</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> === obj.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>ç‰¹æ®Šå…³ç³»<ul><li><code>Object</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤å®ƒæ˜¯<code>Function</code>çš„å®ä¾‹</li><li><code>Function</code>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤å®ƒæ˜¯è‡ªå·±çš„å®ä¾‹</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === <span class="title class_">Object</span>.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> === <span class="title class_">Function</span>.<span class="property">__proto__</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ·±å…¥è§£æ"><a href="#æ·±å…¥è§£æ" class="headerlink" title="æ·±å…¥è§£æ"></a>æ·±å…¥è§£æ</h3><h4 id="åŸå‹é“¾çš„èµ·ç‚¹ä¸ç»ˆç‚¹"><a href="#åŸå‹é“¾çš„èµ·ç‚¹ä¸ç»ˆç‚¹" class="headerlink" title="åŸå‹é“¾çš„èµ·ç‚¹ä¸ç»ˆç‚¹"></a>åŸå‹é“¾çš„èµ·ç‚¹ä¸ç»ˆç‚¹</h4><h5 id="åŸå‹çš„æœ¬è´¨"><a href="#åŸå‹çš„æœ¬è´¨" class="headerlink" title="åŸå‹çš„æœ¬è´¨"></a><p style='font-size: 14px'>åŸå‹çš„æœ¬è´¨</p></h5><ul><li><code>Person.prototype</code>æ˜¯æ„é€ å‡½æ•°<code>Person</code>çš„åŸå‹å¯¹è±¡</li><li><code>Function.prototype</code>æ˜¯æ„é€ å‡½æ•°<code>Function</code>çš„åŸå‹å¯¹è±¡</li><li>æ‰€æœ‰çš„åŸå‹å¯¹è±¡éƒ½æ˜¯å¯¹è±¡ï¼Œå› æ­¤æœ¬è´¨ä¸Šå®ƒä»¬æ˜¯é€šè¿‡<code>new Object()</code>åˆ›å»ºçš„</li></ul><h5 id="åŸå‹é“¾ä¸Šçš„å…³ç³»"><a href="#åŸå‹é“¾ä¸Šçš„å…³ç³»" class="headerlink" title="åŸå‹é“¾ä¸Šçš„å…³ç³»"></a><p style='font-size: 14px'>åŸå‹é“¾ä¸Šçš„å…³ç³»</p></h5><ul><li><code>Person.prototype</code>å’Œ<code>Function.prototype</code>éƒ½æ˜¯<code>Object</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li><li>å› æ­¤ï¼Œå®ƒä»¬çš„<code>__proto__</code>éƒ½æŒ‡å‘<code>Object.prototype</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h5 id="ä»€ä¹ˆæ˜¯åŸå‹é“¾"><a href="#ä»€ä¹ˆæ˜¯åŸå‹é“¾" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå‹é“¾"></a><p style='font-size: 14px'>ä»€ä¹ˆæ˜¯åŸå‹é“¾</p></h5><ul><li>åŸå‹é“¾æ˜¯é€šè¿‡<code>__proto__</code>å±æ€§è¿æ¥èµ·æ¥çš„å¯¹è±¡é“¾</li><li>å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œä¼šé€šè¿‡<code>__proto__</code>å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°<code>null</code>ä¸ºæ­¢</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img0a4b669cc49c4fd39905b0e22113d66e%7Etplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp"></p><h5 id="åŸå‹é“¾çš„ç»ˆç‚¹"><a href="#åŸå‹é“¾çš„ç»ˆç‚¹" class="headerlink" title="åŸå‹é“¾çš„ç»ˆç‚¹"></a><p style='font-size: 14px'>åŸå‹é“¾çš„ç»ˆç‚¹</p></h5><ul><li>åŸå‹é“¾çš„ç»ˆç‚¹æ˜¯<code>null</code>ï¼Œè¿™æ˜¯<code>JavaScript</code>ä¸­çš„å¯¹è±¡é“¾çš„ç»ˆæ­¢ç‚¹</li><li>ä»»ä½•å¯¹è±¡çš„<code>__proto__</code>æœ€ç»ˆéƒ½ä¼šæŒ‡å‘<code>Object.prototype</code>ï¼Œè€Œ<code>Object.prototype.__proto__ === null</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img61a5a0bce57948988f29fc1bedb75382%7Etplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp"></p><h4 id="åŸå‹é“¾çš„å®é™…åº”ç”¨ï¼ˆç»§æ‰¿ä¸æŸ¥æ‰¾ï¼‰"><a href="#åŸå‹é“¾çš„å®é™…åº”ç”¨ï¼ˆç»§æ‰¿ä¸æŸ¥æ‰¾ï¼‰" class="headerlink" title="åŸå‹é“¾çš„å®é™…åº”ç”¨ï¼ˆç»§æ‰¿ä¸æŸ¥æ‰¾ï¼‰"></a>åŸå‹é“¾çš„å®é™…åº”ç”¨ï¼ˆç»§æ‰¿ä¸æŸ¥æ‰¾ï¼‰</h4><h5 id="åŸå‹ç»§æ‰¿çš„æœºåˆ¶"><a href="#åŸå‹ç»§æ‰¿çš„æœºåˆ¶" class="headerlink" title="åŸå‹ç»§æ‰¿çš„æœºåˆ¶"></a><p style='font-size: 14px'>åŸå‹ç»§æ‰¿çš„æœºåˆ¶</p></h5><ul><li>åŸå‹ç»§æ‰¿å…è®¸å®ä¾‹å¯¹è±¡ä½¿ç”¨æ„é€ å‡½æ•°åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•æˆ–å±æ€§</li><li>å®ä¾‹å¯¹è±¡ä¼šé€šè¿‡<code>__proto__</code>é“¾æ¥åˆ°æ„é€ å‡½æ•°çš„<code>prototype</code>ï¼Œå®ç°å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123; <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name; <span class="comment">// å®ä¾‹å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;abc&#x27;</span>); <span class="comment">// å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">person.<span class="title function_">sayName</span>(); <span class="comment">// è¾“å‡ºï¼šabc</span></span><br></pre></td></tr></table></figure><ul><li><code>person</code>å®ä¾‹å¯¹è±¡çš„<code>__proto__</code>æŒ‡å‘<code>Person.prototype</code></li><li>è°ƒç”¨<code>person.sayName()</code>æ—¶ï¼Œ<code>JavaScript</code>å¼•æ“ä¼šé€šè¿‡<code>__proto__</code>æŸ¥æ‰¾åˆ°åŸå‹å¯¹è±¡ä¸Šçš„<code>sayName</code>æ–¹æ³•</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img6888b0f41bd047938f1f7f287b3e3f34%7Etplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.webp"></p><h5 id="å±æ€§æŸ¥æ‰¾è§„åˆ™"><a href="#å±æ€§æŸ¥æ‰¾è§„åˆ™" class="headerlink" title="å±æ€§æŸ¥æ‰¾è§„åˆ™"></a><p style='font-size: 14px'>å±æ€§æŸ¥æ‰¾è§„åˆ™</p></h5><ul><li>ä¼˜å…ˆæŸ¥æ‰¾å®ä¾‹å¯¹è±¡æœ¬èº«çš„å±æ€§</li><li>å¦‚æœå®ä¾‹å¯¹è±¡ä¸­æ²¡æœ‰è¯¥å±æ€§ï¼Œä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°<code>null</code></li><li>å¦‚æœåœ¨åŸå‹é“¾ä¸­ä¹Ÿæœªæ‰¾åˆ°ï¼Œè¿”å›<code>undefined</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Animal</span>(<span class="params">type</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">type</span> = type;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayType</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">type</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Animal</span>(<span class="string">&#x27;dog&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog.<span class="property">type</span>); <span class="comment">// è¾“å‡ºï¼šdog</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;type&#x27;</span>)); <span class="comment">// trueï¼ˆå®ä¾‹è‡ªèº«å±æ€§ï¼‰</span></span><br><span class="line">dog.<span class="title function_">sayType</span>(); <span class="comment">// è¾“å‡ºï¼šdog</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog.<span class="property">__proto__</span>.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;sayType&#x27;</span>)); <span class="comment">// trueï¼ˆåŸå‹ä¸Šçš„æ–¹æ³•ï¼‰</span></span><br></pre></td></tr></table></figure><hr><h3 id="é«˜çº§ç‰¹æ€§"><a href="#é«˜çº§ç‰¹æ€§" class="headerlink" title="é«˜çº§ç‰¹æ€§"></a>é«˜çº§ç‰¹æ€§</h3><h4 id="instanceofçš„æœºåˆ¶"><a href="#instanceofçš„æœºåˆ¶" class="headerlink" title="instanceofçš„æœºåˆ¶"></a><code>instanceof</code>çš„æœºåˆ¶</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A <span class="keyword">instanceof</span> B</span><br></pre></td></tr></table></figure><ul><li>åˆ¤æ–­<code>B.prototype</code>æ˜¯å¦åœ¨å¯¹è±¡<code>A</code>çš„åŸå‹é“¾ä¸Š</li><li><code>instanceof</code>é€šè¿‡æ£€æŸ¥<code>A.__proto__</code>æ˜¯å¦ç­‰äº<code>B.prototype</code>æˆ–è€…æ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ç›´åˆ°<code>null</code>ï¼Œæ¥åˆ¤æ–­ç»“æœ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123; <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;abc&#x27;</span>); <span class="comment">// å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span> <span class="keyword">instanceof</span> <span class="title class_">Function</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span> <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person <span class="keyword">instanceof</span> <span class="title class_">Person</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person <span class="keyword">instanceof</span> <span class="title class_">Object</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>Person instanceof Function</code></p><ul><li>æ„é€ å‡½æ•°<code>Person</code>æ˜¯å‡½æ•°ï¼Œå‡½æ•°æ˜¯<code>Function</code>çš„å®ä¾‹</li><li><code>Function.prototype === Person.__proto__</code></li></ul></li><li><p><code>Person instanceof Object</code></p><ul><li>æ‰€æœ‰å¯¹è±¡æœ€ç»ˆç»§æ‰¿è‡ª<code>Object</code>ï¼ŒåŒ…æ‹¬å‡½æ•°</li><li><code>Object.prototype === Function.prototype.__proto__</code></li></ul></li><li><p><code>person instanceof Person</code></p><ul><li><code>person.__proto__ === Person.prototype</code>ï¼Œå› æ­¤è¿”å›<code>true</code></li></ul></li><li><p><code>person instanceof Object</code></p><ul><li><code>person</code>çš„åŸå‹é“¾æœ€ç»ˆæŒ‡å‘<code>Object.prototype</code>ï¼Œå› æ­¤è¿”å›<code>true</code></li></ul></li></ul><p>è‡ªå®šä¹‰å®ç°<code>instanceof</code></p><ul><li>ä»¥ä¸‹æ˜¯<code>instanceof</code>çš„æ ¸å¿ƒé€»è¾‘ï¼Œç”¨é€’å½’å®ç°</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myInstanceof</span>(<span class="params">A, B</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> proto = A.<span class="property">__proto__</span>;</span><br><span class="line">  <span class="keyword">while</span> (proto) &#123;</span><br><span class="line">    <span class="keyword">if</span> (proto === B.<span class="property"><span class="keyword">prototype</span></span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    proto = proto.<span class="property">__proto__</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">myInstanceof</span>(person, <span class="title class_">Person</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">myInstanceof</span>(person, <span class="title class_">Object</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">myInstanceof</span>(person, <span class="title class_">Function</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="constructorçš„ä½œç”¨"><a href="#constructorçš„ä½œç”¨" class="headerlink" title="constructorçš„ä½œç”¨"></a><code>constructor</code>çš„ä½œç”¨</h4><p><code>constructor</code>æ˜¯æ¯ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°</p><ul><li><code>prototype</code>ä¸<code>constructor</code>çš„äº’æŒ‡å…³ç³»<ul><li>æ„é€ å‡½æ•°çš„<code>prototype</code>ä¸Šæœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼ŒæŒ‡å‘è¯¥æ„é€ å‡½æ•°æœ¬èº«</li><li><code>Fn.prototype.constructor === Fn</code></li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Fn</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Fn</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>å®ä¾‹çš„<code>constructor</code>å±æ€§<ul><li>å®ä¾‹å¯¹è±¡é€šè¿‡<code>__proto__</code>ç»§æ‰¿<code>prototype</code>ï¼Œå› æ­¤å¯ä»¥è®¿é—®<code>constructor</code></li><li><code>instance.constructor === Fn</code></li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">Fn</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance.<span class="property">constructor</span> === <span class="title class_">Fn</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><hr><h3 id="åŸå‹é“¾ç»ƒä¹ "><a href="#åŸå‹é“¾ç»ƒä¹ " class="headerlink" title="åŸå‹é“¾ç»ƒä¹ "></a>åŸå‹é“¾ç»ƒä¹ </h3><h4 id="åŸå‹é“¾ç»ƒä¹ -1"><a href="#åŸå‹é“¾ç»ƒä¹ -1" class="headerlink" title="åŸå‹é“¾ç»ƒä¹ #1"></a>åŸå‹é“¾ç»ƒä¹ <code>#1</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> F = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">b</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line"></span><br><span class="line">f.<span class="title function_">a</span>(); <span class="comment">// ?</span></span><br><span class="line">f.<span class="title function_">b</span>(); <span class="comment">// ?</span></span><br><span class="line"></span><br><span class="line">F.<span class="title function_">a</span>(); <span class="comment">// ?</span></span><br><span class="line">F.<span class="title function_">b</span>(); <span class="comment">// ?</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">f.<span class="title function_">a</span>(); <span class="comment">// è¾“å‡º &#x27;a&#x27;</span></span><br><span class="line">f.<span class="title function_">b</span>(); <span class="comment">// æŠ¥é”™ï¼šf.b is not a function</span></span><br><span class="line"></span><br><span class="line">F.<span class="title function_">a</span>(); <span class="comment">// è¾“å‡º &#x27;a&#x27;</span></span><br><span class="line">F.<span class="title function_">b</span>(); <span class="comment">// è¾“å‡º &#x27;b&#x27;</span></span><br></pre></td></tr></table></figure><h5 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a><p style='font-size: 14px'>è§£æ</p></h5><p><code>f.a()</code></p><ul><li><code>f</code>æ˜¯<code>F</code>çš„å®ä¾‹ï¼Œè€Œ<code>F</code>æ˜¯é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„</li><li><code>f</code>çš„åŸå‹é“¾å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">f.<span class="property">__proto__</span> === F.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">a</span>() å®šä¹‰äº†æ–¹æ³•</span><br></pre></td></tr></table></figure><ul><li>å› æ­¤ï¼Œ<code>f</code>å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®<code>Object.prototype.a</code>ï¼Œè¾“å‡º<code>&#39;a&#39;</code></li></ul><p><code>f.b()</code></p><ul><li><code>f</code>çš„åŸå‹é“¾ä¸­æ²¡æœ‰å®šä¹‰<code>b</code>æ–¹æ³•</li><li><code>b</code>æ˜¯å®šä¹‰åœ¨<code>Function.prototype</code>ä¸Šçš„ï¼Œè€Œ<code>f</code>å¹¶ä¸æ˜¯å‡½æ•°ï¼Œå› æ­¤æ— æ³•è®¿é—®<code>Function.prototype.b</code></li><li>ç»“æœ: æŠ¥é”™<code>f.b is not a function</code></li></ul><p><code>F.a()</code></p><ul><li><code>F</code>æ˜¯å‡½æ•°ï¼Œå‡½æ•°æ˜¯<code>Function</code>æ„é€ å‡½æ•°çš„å®ä¾‹</li><li><code>F</code>çš„åŸå‹é“¾å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span></span><br></pre></td></tr></table></figure><ul><li>å› æ­¤ï¼Œ<code>F</code>å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®åˆ°<code>Object.prototype.a</code>ï¼Œè¾“å‡º<code>&#39;a&#39;</code></li></ul><p><code>F.b()</code></p><ul><li><code>F</code>æ˜¯å‡½æ•°ï¼Œ<code>b</code>æ–¹æ³•å®šä¹‰åœ¨<code>Function.prototype</code>ä¸Š</li><li>å› ä¸º<code>F.__proto__ === Function.prototype</code>ï¼Œæ‰€ä»¥<code>F</code>å¯ä»¥ç›´æ¥è®¿é—®åˆ°<code>b</code>æ–¹æ³•</li><li>ç»“æœ: è¾“å‡º<code>&#39;b&#39;</code></li></ul><h5 id="åŸå‹é“¾ç¤ºæ„å›¾"><a href="#åŸå‹é“¾ç¤ºæ„å›¾" class="headerlink" title="åŸå‹é“¾ç¤ºæ„å›¾"></a><p style='font-size: 14px'>åŸå‹é“¾ç¤ºæ„å›¾</p></h5><ul><li><code>f</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">f.<span class="property">__proto__</span> â†’ F.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><ul><li><code>F</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F.<span class="property">__proto__</span> â†’ <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><hr><h4 id="åŸå‹é“¾ç»ƒä¹ -2"><a href="#åŸå‹é“¾ç»ƒä¹ -2" class="headerlink" title="åŸå‹é“¾ç»ƒä¹ #2"></a>åŸå‹é“¾ç»ƒä¹ <code>#2</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line">A.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">n</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line">A.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">  <span class="attr">n</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">m</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">n</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">m</span>); <span class="comment">// ?</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">n</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">m</span>); <span class="comment">// ?</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">n</span>); <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">m</span>); <span class="comment">// è¾“å‡º undefined</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">n</span>); <span class="comment">// è¾“å‡º 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">m</span>); <span class="comment">// è¾“å‡º 3</span></span><br></pre></td></tr></table></figure><h5 id="è§£æ-1"><a href="#è§£æ-1" class="headerlink" title="è§£æ"></a><p style='font-size: 14px'>è§£æ</p></h5><p><code>A.prototype.n = 1</code></p><ul><li><code>A.prototype</code>åˆå§‹åŒ–æ—¶ï¼ŒåŒ…å«å±æ€§<code>n</code>ï¼Œå€¼ä¸º<code>1</code></li></ul><p><code>var b = new A()</code>, åˆ›å»ºå®ä¾‹<code>b</code></p><ul><li><code>b.__proto__</code>æŒ‡å‘å½“å‰çš„<code>A.prototype</code>ï¼Œå³<code>&#123; n: 1 &#125;</code></li><li>é€šè¿‡<code>b.n</code>å¯ä»¥è®¿é—®<code>A.prototype.n</code>ï¼Œå€¼ä¸º<code>1</code></li><li><code>b</code>çš„åŸå‹é“¾ä¸º</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">b.<span class="property">__proto__</span> === A.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">A.<span class="property"><span class="keyword">prototype</span></span> === &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°èµ‹å€¼<code>A.prototype</code></p><ul><li><code>A.prototype</code>è¢«é‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡<code>&#123; n: 2, m: 3 &#125;</code></li><li>æ³¨æ„: è¿™ä¸ä¼šå½±å“å·²ç»åˆ›å»ºçš„å®ä¾‹<code>b</code>ï¼Œå› ä¸º<code>b.__proto__</code>æŒ‡å‘çš„æ˜¯æ—§çš„<code>A.prototype</code></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A.<span class="property"><span class="keyword">prototype</span></span> === &#123; <span class="attr">n</span>: <span class="number">2</span>, <span class="attr">m</span>: <span class="number">3</span> &#125;</span><br></pre></td></tr></table></figure><p><code>var c = new A()</code>, åˆ›å»ºå®ä¾‹<code>c</code></p><ul><li><code>c.__proto__</code>æŒ‡å‘å½“å‰çš„<code>A.prototype</code>ï¼Œå³<code>&#123; n: 2, m: 3 &#125;</code></li><li>é€šè¿‡<code>c.n</code>å’Œ<code>c.m</code>å¯ä»¥è®¿é—®æ–°<code>A.prototype</code>ä¸Šçš„<code>n</code>å’Œ<code>m</code></li></ul><h5 id="åŸå‹é“¾ç¤ºæ„å›¾-1"><a href="#åŸå‹é“¾ç¤ºæ„å›¾-1" class="headerlink" title="åŸå‹é“¾ç¤ºæ„å›¾"></a><p style='font-size: 14px'>åŸå‹é“¾ç¤ºæ„å›¾</p></h5><ul><li>åˆ›å»º<code>b</code>å</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">b.<span class="property">__proto__</span> â†’ &#123; <span class="attr">n</span>: <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure><ul><li>é‡æ–°èµ‹å€¼<code>A.prototype</code>å</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A.<span class="property"><span class="keyword">prototype</span></span> â†’ &#123; <span class="attr">n</span>: <span class="number">2</span>, <span class="attr">m</span>: <span class="number">3</span> &#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»º<code>c</code>å</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">c.<span class="property">__proto__</span> â†’ &#123; <span class="attr">n</span>: <span class="number">2</span>, <span class="attr">m</span>: <span class="number">3</span> &#125;</span><br></pre></td></tr></table></figure><hr><h4 id="åŸå‹é“¾ç»ƒä¹ -3"><a href="#åŸå‹é“¾ç»ƒä¹ -3" class="headerlink" title="åŸå‹é“¾ç»ƒä¹ #3"></a>åŸå‹é“¾ç»ƒä¹ <code>#3</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;&#125;,</span><br><span class="line">    F = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="string">&#x27;value a&#x27;</span>;</span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">b</span> = <span class="string">&#x27;value b&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">a</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">b</span>); <span class="comment">// ?</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property">a</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property">b</span>); <span class="comment">// ?</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">a</span>); <span class="comment">// è¾“å‡º &#x27;value a&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">b</span>); <span class="comment">// è¾“å‡º undefined</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property">a</span>); <span class="comment">// è¾“å‡º &#x27;value a&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(F.<span class="property">b</span>); <span class="comment">// è¾“å‡º &#x27;value b&#x27;</span></span><br></pre></td></tr></table></figure><h5 id="è§£æ-2"><a href="#è§£æ-2" class="headerlink" title="è§£æ"></a><p style='font-size: 14px'>è§£æ</p></h5><p><code>foo.a</code></p><ul><li><code>foo</code>æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå…¶åŸå‹é“¾å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="string">&#x27;value a&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>å› æ­¤ï¼Œ<code>foo.a</code>å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®åˆ°<code>Object.prototype.a</code>ï¼Œç»“æœä¸º<code>&#39;value a&#39;</code></li></ul><p><code>foo.b</code></p><ul><li><code>foo</code>çš„åŸå‹é“¾ä¸­æ²¡æœ‰å®šä¹‰<code>b</code>æ–¹æ³•æˆ–å±æ€§</li><li><code>foo.__proto__ === Object.prototype</code>ä¸­æ²¡æœ‰<code>b</code>å±æ€§</li><li>å› æ­¤ï¼Œ<code>foo.b</code>è¿”å›<code>undefined</code></li></ul><p><code>F.a</code></p><ul><li><code>F</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å®ƒçš„åŸå‹é“¾å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="string">&#x27;value a&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>F</code>å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®åˆ°<code>Object.prototype.a</code>ï¼Œç»“æœä¸º<code>&#39;value a&#39;</code></li></ul><p><code>F.b</code></p><ul><li><code>F</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œ<code>b</code>æ˜¯å®šä¹‰åœ¨<code>Function.prototype</code>ä¸Š</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">b</span> = <span class="string">&#x27;value b&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>å› æ­¤ï¼Œ<code>F.b</code>å¯ä»¥ç›´æ¥è®¿é—®åˆ°<code>Function.prototype.b</code>ï¼Œç»“æœä¸º<code>&#39;value b&#39;</code></li></ul><h5 id="åŸå‹é“¾ç¤ºæ„å›¾-2"><a href="#åŸå‹é“¾ç¤ºæ„å›¾-2" class="headerlink" title="åŸå‹é“¾ç¤ºæ„å›¾"></a><p style='font-size: 14px'>åŸå‹é“¾ç¤ºæ„å›¾</p></h5><ul><li><code>foo</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">foo.<span class="property">__proto__</span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><ul><li><code>F</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">F.<span class="property">__proto__</span> â†’ <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><hr><h4 id="åŸå‹é“¾ç»ƒä¹ -4"><a href="#åŸå‹é“¾ç»ƒä¹ -4" class="headerlink" title="åŸå‹é“¾ç»ƒä¹ #4"></a>åŸå‹é“¾ç»ƒä¹ <code>#4</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">a</span> = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">A.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">C.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">A</span>().<span class="property">a</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">B</span>().<span class="property">a</span>); <span class="comment">// ?</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">C</span>(<span class="number">2</span>).<span class="property">a</span>); <span class="comment">// ?</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">A</span>().<span class="property">a</span>); <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">B</span>().<span class="property">a</span>); <span class="comment">// è¾“å‡º undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">C</span>(<span class="number">2</span>).<span class="property">a</span>); <span class="comment">// è¾“å‡º 2</span></span><br></pre></td></tr></table></figure><h5 id="è§£æ-3"><a href="#è§£æ-3" class="headerlink" title="è§£æ"></a><p style='font-size: 14px'>è§£æ</p></h5><p><code>new A().a</code></p><ul><li>ä½¿ç”¨<code>new A()</code>åˆ›å»ºå®ä¾‹</li><li><code>A</code>çš„æ„é€ å‡½æ•°ä¸­æ²¡æœ‰å®šä¹‰<code>a</code>å±æ€§</li><li>æŸ¥æ‰¾<code>a</code>æ—¶ï¼Œæ²¿åŸå‹é“¾è®¿é—®<code>A.prototype.a</code>ï¼Œå€¼ä¸º<code>1</code></li><li>è¾“å‡º: <code>1</code></li></ul><p><code>new B().a</code></p><ul><li>ä½¿ç”¨<code>new B()</code>åˆ›å»ºå®ä¾‹</li><li><code>B</code>çš„æ„é€ å‡½æ•°æœ‰<code>this.a = a;</code>ï¼Œæ­¤æ—¶<code>a</code>çš„å€¼ä¸º<code>undefined</code>ï¼ˆæ²¡æœ‰ä¼ å…¥å‚æ•°ï¼‰</li><li>å› æ­¤ï¼Œ<code>this.a</code>è¢«èµ‹å€¼ä¸º<code>undefined</code></li><li>å› ä¸ºå®ä¾‹è‡ªèº«çš„<code>a</code>å±æ€§å·²ç»å®šä¹‰äº†ï¼Œä¼˜å…ˆäºåŸå‹é“¾ä¸Šçš„å±æ€§</li><li>è¾“å‡º: <code>undefined</code></li></ul><p><code>new C(2).a</code></p><ul><li>ä½¿ç”¨<code>new C(2)</code>åˆ›å»ºå®ä¾‹</li><li><code>C</code>çš„æ„é€ å‡½æ•°ä¸­æœ‰<code>if (a) &#123; this.a = a; &#125;</code>ï¼Œä¼ å…¥å‚æ•°<code>a = 2</code>ï¼Œæ¡ä»¶ä¸º<code>true</code></li><li>å› æ­¤ï¼Œ<code>this.a</code>è¢«èµ‹å€¼ä¸º<code>2</code></li><li>å®ä¾‹è‡ªèº«çš„<code>a</code>å±æ€§è¦†ç›–äº†åŸå‹é“¾ä¸Šçš„<code>C.prototype.a</code></li><li>è¾“å‡º: <code>2</code></li></ul><h5 id="åŸå‹é“¾ç¤ºæ„å›¾-3"><a href="#åŸå‹é“¾ç¤ºæ„å›¾-3" class="headerlink" title="åŸå‹é“¾ç¤ºæ„å›¾"></a><p style='font-size: 14px'>åŸå‹é“¾ç¤ºæ„å›¾</p></h5><ul><li><code>new A()</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">instance â†’ A.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><ul><li><code>new B()</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">instance â†’ B.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><ul><li><code>new C(2)</code>çš„åŸå‹é“¾</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">instance â†’ C.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> â†’ <span class="literal">null</span></span><br></pre></td></tr></table></figure><hr><h4 id="åŸå‹é“¾ç»ƒä¹ -5"><a href="#åŸå‹é“¾ç»ƒä¹ -5" class="headerlink" title="åŸå‹é“¾ç»ƒä¹ #5"></a>åŸå‹é“¾ç»ƒä¹ <code>#5</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>[<span class="string">&#x27;toString&#x27;</span>].<span class="property">length</span> + <span class="number">123</span>)</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆ: <code>123</code>æ˜¯æ•°å­—ï¼Œæ•°å­—æœ¬è´¨æ˜¯<code>new Number()</code>ï¼Œæ•°å­—æœ¬èº«æ²¡æœ‰<code>toString</code>æ–¹æ³•ï¼Œåˆ™æ²¿ç€<code>__proto__</code>å»<code>function Number()</code>çš„<code>prototype</code>ä¸Šæ‰¾ï¼Œæ‰¾åˆ°<code>toString</code>æ–¹æ³•ï¼Œ<code>toString</code>æ–¹æ³•çš„<code>length</code>æ˜¯<code>1</code>ï¼Œ<code>1 + 123 = 124</code>ï¼Œè‡³äºä¸ºä»€ä¹ˆ<code>length</code>æ˜¯<code>1</code>ï¼Œå‚è€ƒä¸‹é¢æ–‡ç« </p><blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://juejin.cn/post/7003369591967596552">https://juejin.cn/post/7003369591967596552</a></p></blockquote><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>[<span class="string">&#x27;toString&#x27;</span>].<span class="property">length</span> + <span class="number">123</span>) <span class="comment">// 124</span></span><br></pre></td></tr></table></figure><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://juejin.cn/post/7007416743215759373">https://juejin.cn/post/7007416743215759373</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQL å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/29dadae9.html"/>
      <url>/posts/29dadae9.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>ç®€ä»‹é‡Œçš„äº‹çœŸå®å‘ç”Ÿ, ç¬¬ä¸€æ¬¡è®©æˆ‘æ„Ÿå—åˆ°äº†äººç”Ÿçš„å¤§èµ·å¤§è½ (åŸæ¥æ„Ÿè§‰<code>70%</code>èƒ½<code>pass</code>çš„ä¸€ä¸‹äººè’™äº†, è€Œä¸”è¿˜æ˜¯å…¬å¸é¢ ğŸ˜­) ä¸è¿‡è¿˜æ˜¯æœ‰æƒŠæ— é™©çš„è¿‡äº† ğŸ˜¤ï¼Œå—? <a href="https://www.rockdata.net/zh-cn/tutorial/toc/">å‚è€ƒ</a></p></blockquote><hr><h3 id="1-ç®€å•æŸ¥è¯¢-SELECT"><a href="#1-ç®€å•æŸ¥è¯¢-SELECT" class="headerlink" title="1. ç®€å•æŸ¥è¯¢ SELECT"></a>1. ç®€å•æŸ¥è¯¢ SELECT</h3><p>åœ¨<code>PostgreSQL</code>ä¸­ï¼Œ<code>SELECT</code>è¯­å¥ç”¨äºä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®ã€‚å®ƒæ˜¯<code>SQL</code>æŸ¥è¯¢è¯­è¨€çš„ä¸€ä¸ªåŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå…è®¸ä½ ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­é€‰æ‹©æ•°æ®ï¼Œå¹¶æ ¹æ®éœ€è¦ç­›é€‰ã€æ’åºå’Œæ“ä½œè¿™äº›æ•°æ®ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><ul><li><code>SELECT</code>è¯­å¥æœ‰ä»¥ä¸‹å­å¥<ul><li>ä½¿ç”¨<code>DISTINCT</code>è¿ç®—ç¬¦é€‰æ‹©ä¸åŒçš„è¡Œã€‚</li><li>ä½¿ç”¨<code>ORDER BY</code>å­å¥å¯¹è¡Œè¿›è¡Œæ’åºã€‚</li><li>ä½¿ç”¨<code>WHERE</code>å­å¥è¿‡æ»¤è¡Œã€‚</li><li>ä½¿ç”¨<code>LIMIT</code>æˆ–<code>FETCH</code>å­å¥ä»è¡¨ä¸­é€‰æ‹©è¡Œçš„å­é›†ã€‚</li><li>ä½¿ç”¨<code>GROUP BY</code>å­å¥å°†è¡Œåˆ†ç»„ã€‚</li><li>ä½¿ç”¨<code>HAVING</code>å­å¥è¿‡æ»¤åˆ†ç»„ã€‚</li><li>ä½¿ç”¨<code>INNER JOIN</code>, <code>LEFT JOIN</code>, <code>FULL OUTER JOIN</code>, <code>CROSS JOIN</code>ç­‰è¿æ¥å­å¥ä¸å…¶ä»–è¡¨è¿æ¥ã€‚</li><li>ä½¿ç”¨<code>UNION</code>ã€<code>INTERSECT</code>å’Œ<code>EXCEPT</code>æ‰§è¡Œé›†åˆè¿ç®—ã€‚</li></ul></li></ul><p>ä¸åŒçš„å­å¥å’Œå‡½æ•°ï¼ˆå¦‚<code>WHERE</code>ã€<code>ORDER BY</code>ã€<code>LIMIT</code>å’Œèšåˆå‡½æ•°ï¼‰ä½¿å¾—<code>SELECT</code>è¯­å¥åœ¨å¤„ç†å’Œåˆ†ææ•°æ®æ—¶éå¸¸å¼ºå¤§ã€‚</p><hr><h3 id="2-åˆ—åˆ«å"><a href="#2-åˆ—åˆ«å" class="headerlink" title="2. åˆ—åˆ«å"></a>2. åˆ—åˆ«å</h3><p>åˆ—åˆ«å<code>Column Alias</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§åŠŸèƒ½ï¼Œç”¨äºä¸ºæŸ¥è¯¢ç»“æœä¸­çš„åˆ—æŒ‡å®šä¸´æ—¶åç§°ã€‚åˆ—åˆ«ååœ¨<code>SELECT</code>è¯­å¥ä¸­ä½¿ç”¨ï¼Œé€šå¸¸ç”¨äºä½¿è¾“å‡ºç»“æœæ›´åŠ æ¸…æ™°æ˜“æ‡‚ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ—åè¾ƒé•¿æˆ–ä¸ç›´è§‚çš„æƒ…å†µä¸‹ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name <span class="keyword">AS</span> alias_name</span><br><span class="line"><span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure><blockquote><p>å…³é”®å­—<code>AS</code>æ˜¯å¯é€‰çš„ã€‚</p></blockquote><hr><h3 id="3-æ’åº-ORDER-BY"><a href="#3-æ’åº-ORDER-BY" class="headerlink" title="3. æ’åº ORDER BY"></a>3. æ’åº ORDER BY</h3><p><code>ORDER BY</code>æ˜¯<code>SQL</code>è¯­å¥ä¸­çš„ä¸€ä¸ªå­å¥ï¼Œç”¨äºå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºã€‚é€šè¿‡<code>ORDER BY</code>ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œæ ¹æ®å®ƒä»¬çš„å€¼ä»¥å‡åºï¼ˆé»˜è®¤ï¼‰æˆ–é™åºæ’åˆ—ç»“æœé›†ã€‚<code>ORDER BY</code>å­å¥å¯ä»¥ä¸<code>SELECT</code>è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®å®šæŸ¥è¯¢ç»“æœçš„æ˜¾ç¤ºé¡ºåºã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>], column2 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>], ...;</span><br></pre></td></tr></table></figure><hr><h3 id="4-å»é‡æŸ¥è¯¢-DISTINCT"><a href="#4-å»é‡æŸ¥è¯¢-DISTINCT" class="headerlink" title="4. å»é‡æŸ¥è¯¢ DISTINCT"></a>4. å»é‡æŸ¥è¯¢ DISTINCT</h3><p><code>SELECT DISTINCT</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§ç”¨æ³•ï¼Œç”¨äºä»æŸ¥è¯¢ç»“æœä¸­å»é™¤é‡å¤çš„è®°å½•ï¼Œä»…è¿”å›å”¯ä¸€çš„ç»“æœè¡Œã€‚å®ƒé€‚ç”¨äºå¸Œæœ›ä»æ•°æ®åº“è¡¨ä¸­è·å–ä¸é‡å¤çš„å€¼æˆ–ç»„åˆçš„åœºæ™¯ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„äº‹é¡¹<ul><li>æ€§èƒ½è€ƒè™‘: <code>SELECT DISTINCT</code>éœ€è¦å¯¹ç»“æœè¿›è¡Œå»é‡å¤„ç†ï¼Œè¿™åœ¨å¤§æ•°æ®é›†ä¸Šå¯èƒ½ä¼šå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚ä½¿ç”¨æ—¶åº”æ³¨æ„æŸ¥è¯¢æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§è¡¨æ—¶ã€‚</li></ul></li></ul><hr><h3 id="5-åˆ†é¡µæŸ¥è¯¢"><a href="#5-åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="5. åˆ†é¡µæŸ¥è¯¢"></a>5. åˆ†é¡µæŸ¥è¯¢</h3><p>åˆ†é¡µæŸ¥è¯¢ æ˜¯æ•°æ®åº“æŸ¥è¯¢çš„ä¸€ç§æŠ€æœ¯ï¼Œç”¨äºå°†æŸ¥è¯¢ç»“æœåˆ†å‰²æˆæ›´å°çš„éƒ¨åˆ†ï¼ˆé¡µï¼‰ï¼Œä»¥æ–¹ä¾¿æ•°æ®çš„æ˜¾ç¤ºå’Œç®¡ç†ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»“æœé›†éå¸¸å¤§çš„æƒ…å†µä¸‹ã€‚åˆ†é¡µèƒ½å¤Ÿæé«˜åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘ä¸€æ¬¡æ€§åŠ è½½çš„æ•°æ®é‡ï¼Œå¹¶æä¾›æ›´å¿«çš„å“åº”æ—¶é—´ã€‚</p><ul><li>åˆ†é¡µæŸ¥è¯¢é€šå¸¸æ¶‰åŠä¸¤ä¸ªå‚æ•°<ul><li>åç§»é‡ <code>Offset</code>: ä»ç»“æœé›†ä¸­è·³è¿‡çš„è®°å½•æ•°ã€‚</li><li>é™åˆ¶ <code>Limit</code>: æ¯æ¬¡æŸ¥è¯¢è¿”å›çš„æœ€å¤§è®°å½•æ•°ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name</span><br><span class="line">LIMIT limit_value <span class="keyword">OFFSET</span> offset_value;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä¸€ä¸ªåä¸º<code>employees</code>çš„è¡¨ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ†é¡µæŸ¥è¯¢å‘˜å·¥æ•°æ®ï¼Œæ¯é¡µæ˜¾ç¤º<code>10</code>æ¡è®°å½•</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> ç¬¬ä¸€é¡µæ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id</span><br><span class="line">LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> ç¬¬äºŒé¡µæ•°æ®</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id</span><br><span class="line">LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><ul><li><p><code>LIMIT 10</code>æŒ‡å®šæ¯é¡µæœ€å¤šæ˜¾ç¤º<code>10</code>æ¡è®°å½•ã€‚</p></li><li><p><code>OFFSET 0</code>æŒ‡å®šä»ç»“æœé›†çš„ç¬¬<code>0</code>æ¡è®°å½•å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€é¡µçš„æ•°æ®ã€‚</p></li><li><p>æ³¨æ„äº‹é¡¹</p><ul><li>æ€§èƒ½é—®é¢˜: å½“<code>OFFSET</code>å¾ˆå¤§æ—¶ï¼Œåˆ†é¡µæŸ¥è¯¢å¯èƒ½ä¼šå˜æ…¢ï¼Œå› ä¸ºæ•°æ®åº“ä»ç„¶éœ€è¦æ‰«æè·³è¿‡çš„è®°å½•ã€‚å¯¹äºå¤§æ•°æ®é›†ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ›´ä¼˜åŒ–çš„åˆ†é¡µæŠ€æœ¯ï¼Œå¦‚åŸºäºä¸»é”®æˆ–ç´¢å¼•çš„åˆ†é¡µã€‚</li><li><code>ORDER BY</code>å­å¥çš„é‡è¦æ€§: ä¸ºäº†ç¡®ä¿åˆ†é¡µç»“æœçš„ç¨³å®šæ€§å’Œä¸€è‡´æ€§ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨<code>ORDER BY</code>å­å¥æ¥æ˜ç¡®æŒ‡å®šæ’åºé¡ºåºã€‚è¿™å¯¹äºå¤šæ¬¡åˆ†é¡µè¯·æ±‚è·å–ä¸€è‡´çš„ç»“æœéå¸¸é‡è¦ã€‚</li><li><code>COUNT</code>å’Œåˆ†é¡µ: é€šå¸¸åœ¨åˆ†é¡µæŸ¥è¯¢å‰ï¼Œä¼šå…ˆè¿›è¡Œ<code>COUNT</code>æŸ¥è¯¢æ¥ç¡®å®šæ€»è®°å½•æ•°ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯è®¡ç®—æ€»é¡µæ•°ã€‚</li></ul></li></ul><hr><h3 id="6-WHERE-å­å¥"><a href="#6-WHERE-å­å¥" class="headerlink" title="6. WHERE å­å¥"></a>6. WHERE å­å¥</h3><p><code>WHERE</code>å­å¥æ˜¯<code>SQL</code>ä¸­ç”¨äºæŒ‡å®šç­›é€‰æ¡ä»¶çš„éƒ¨åˆ†ã€‚å®ƒç”¨äºä»æ•°æ®åº“è¡¨ä¸­ç­›é€‰å‡ºç¬¦åˆç‰¹å®šæ¡ä»¶çš„è¡Œã€‚<code>WHERE</code>å­å¥å¯ä»¥ç”¨åœ¨<code>SELECT</code>ã€<code>UPDATE</code>ã€<code>DELETE</code>ç­‰<code>SQL</code>è¯­å¥ä¸­ï¼Œé™åˆ¶è¿™äº›æ“ä½œåªåº”ç”¨äºç¬¦åˆæ¡ä»¶çš„è¡Œã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><ul><li>å¸¸è§çš„è¿ç®—ç¬¦<ul><li>æ¯”è¾ƒè¿ç®—ç¬¦: <code>=</code>ï¼Œ<code>&lt;&gt;</code> (è¿™ä¸ªæ˜¯ <code>!=</code>)ï¼Œ<code>&gt;</code>ï¼Œ<code>&lt;</code>ï¼Œ<code>&gt;=</code>ï¼Œ<code>&lt;=</code></li><li>é€»è¾‘è¿ç®—ç¬¦: <code>AND</code>ï¼Œ<code>OR</code>ï¼Œ<code>NOT</code></li><li>å…¶ä»–è¿ç®—ç¬¦: <code>BETWEEN ... AND ...</code>ï¼Œ<code>IN (value1, value2, ...)</code>ï¼Œ<code>LIKE</code> (è¿™ä¸ªæ˜¯åŒ¹é…)ï¼Œ<code>IS NULL</code></li></ul></li></ul><hr><h3 id="7-LIMIT-å­å¥"><a href="#7-LIMIT-å­å¥" class="headerlink" title="7. LIMIT å­å¥"></a>7. LIMIT å­å¥</h3><p><code>LIMIT</code>å­å¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºé™åˆ¶æŸ¥è¯¢ç»“æœä¸­è¿”å›çš„è¡Œæ•°ã€‚å®ƒé€šå¸¸ä¸<code>SELECT</code>è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ§åˆ¶ä»æ•°æ®åº“ä¸­æå–çš„è¡Œæ•°ã€‚<code>LIMIT</code>å­å¥å¯¹äºåˆ†é¡µã€æ€§èƒ½ä¼˜åŒ–å’Œæ§åˆ¶æ•°æ®è¾“å‡ºé‡éå¸¸æœ‰ç”¨ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name</span><br><span class="line">LIMIT number_of_rows;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ employees è¡¨ä¸­æŒ‰å·¥èµ„ä»é«˜åˆ°ä½æ’åˆ—çš„å‰ 3 åå‘˜å·¥</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">3</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="8-FETCH-å­å¥"><a href="#8-FETCH-å­å¥" class="headerlink" title="8. FETCH å­å¥"></a>8. FETCH å­å¥</h3><p><code>FETCH</code>å­å¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºä»æŸ¥è¯¢ç»“æœä¸­è¿”å›ç‰¹å®šæ•°é‡çš„è¡Œã€‚å®ƒé€šå¸¸ä¸<code>OFFSET</code>å­å¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°æ›´åŠ çµæ´»å’Œæ¸…æ™°çš„åˆ†é¡µæ“ä½œã€‚åœ¨ä¸åŒçš„æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œ<code>FETCH</code>å­å¥çš„æ”¯æŒå’Œè¯­æ³•å¯èƒ½ç•¥æœ‰ä¸åŒã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name</span><br><span class="line"><span class="keyword">OFFSET</span> number_of_rows <span class="keyword">OFFSET</span> </span><br><span class="line"><span class="keyword">FETCH</span> &#123;<span class="keyword">FIRST</span> <span class="operator">|</span> NEXT&#125; number_of_rows &#123;<span class="type">ROW</span> <span class="operator">|</span> <span class="keyword">ROWS</span>&#125; <span class="keyword">ONLY</span>;</span><br></pre></td></tr></table></figure><ul><li><code>FIRST</code>: è¡¨ç¤ºä»ç»“æœé›†çš„å¼€å¤´è¿”å›è¡Œæ•°ã€‚</li><li><code>NEXT</code>: è¡¨ç¤ºä»å½“å‰åç§»é‡ä½ç½®ç»§ç»­è¿”å›è¡Œæ•°ã€‚</li><li><code>ROW / ROWS</code>: ç”¨äºæŒ‡å®šè¿”å›è¡Œçš„å•æ•°æˆ–å¤æ•°å½¢å¼ã€‚ä¸¤è€…åœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰å·®åˆ«ã€‚</li></ul><hr><h3 id="9-IN-è¿ç®—ç¬¦è¯­æ³•"><a href="#9-IN-è¿ç®—ç¬¦è¯­æ³•" class="headerlink" title="9. IN è¿ç®—ç¬¦è¯­æ³•"></a>9. IN è¿ç®—ç¬¦è¯­æ³•</h3><p><code>IN</code>è¿ç®—ç¬¦æ˜¯<code>SQL</code>ä¸­ç”¨äºæŒ‡å®šå¤šä¸ªå¯èƒ½å€¼çš„ä¸€ç§æ¡ä»¶æ“ä½œç¬¦ã€‚å®ƒé€šå¸¸ç”¨äº<code>WHERE</code>å­å¥ä¸­ï¼Œç”¨æ¥è¿‡æ»¤é‚£äº›åˆ—å€¼åœ¨æŒ‡å®šé›†åˆä¸­çš„è¡Œã€‚<code>IN</code>è¿ç®—ç¬¦å…è®¸ä½ ç®€æ´åœ°æµ‹è¯•æŸä¸ªåˆ—çš„å€¼æ˜¯å¦åŒ¹é…ä¸€ç»„å€¼ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œè€Œæ— éœ€ä½¿ç”¨å¤šä¸ª <code>OR</code>æ¡ä»¶ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">IN</span> (value1, value2, ...);</span><br></pre></td></tr></table></figure><ul><li><code>IN</code>è¿ç®—ç¬¦å¯ä»¥ä¸<code>NOT</code>ç»“åˆä½¿ç”¨ï¼Œè¡¨ç¤ºä¸åœ¨æŒ‡å®šé›†åˆä¸­çš„å€¼ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">&#x27;HR&#x27;</span>, <span class="string">&#x27;Engineering&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="10-BETWEEN-è¿ç®—ç¬¦"><a href="#10-BETWEEN-è¿ç®—ç¬¦" class="headerlink" title="10. BETWEEN è¿ç®—ç¬¦"></a>10. BETWEEN è¿ç®—ç¬¦</h3><p><code>BETWEEN</code>è¿ç®—ç¬¦æ˜¯<code>SQL</code>ä¸­ç”¨äºç­›é€‰èŒƒå›´å†…çš„å€¼çš„ä¸€ç§æ¡ä»¶æ“ä½œç¬¦ã€‚å®ƒé€šå¸¸ç”¨äº<code>WHERE</code>å­å¥ä¸­ï¼Œä»¥æµ‹è¯•æŸä¸ªåˆ—çš„å€¼æ˜¯å¦åœ¨æŒ‡å®šçš„ä¸Šä¸‹é™ä¹‹é—´ã€‚<code>BETWEEN</code>è¿ç®—ç¬¦åŒ…æ‹¬æŒ‡å®šçš„è¾¹ç•Œå€¼ï¼ˆå³åŒ…å«ä¸Šä¸‹é™ï¼‰ï¼Œå®ƒå¯ä»¥ç”¨äºæ•°å­—ã€æ—¥æœŸã€æ—¶é—´ç­‰ç±»å‹çš„æ•°æ®ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">BETWEEN</span> value1 <span class="keyword">AND</span> value2;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æ•°å€¼èŒƒå›´</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">30000</span> <span class="keyword">AND</span> <span class="number">60000</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æ—¥æœŸå’Œæ—¶é—´èŒƒå›´</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders</span><br><span class="line"><span class="keyword">WHERE</span> order_date <span class="keyword">BETWEEN</span> <span class="string">&#x27;2023-01-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;2023-12-31&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> å­—æ¯èŒƒå›´</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">BETWEEN</span> <span class="string">&#x27;A&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;M&#x27;</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="11-LIKE-è¿ç®—ç¬¦"><a href="#11-LIKE-è¿ç®—ç¬¦" class="headerlink" title="11. LIKE è¿ç®—ç¬¦"></a>11. LIKE è¿ç®—ç¬¦</h3><p><code>LIKE</code>è¿ç®—ç¬¦æ˜¯<code>SQL</code>ä¸­ç”¨äºè¿›è¡Œæ¨¡å¼åŒ¹é…çš„è¿ç®—ç¬¦ã€‚å®ƒé€šå¸¸ç”¨äº<code>WHERE</code>å­å¥ä¸­ï¼Œä»¥æ ¹æ®æŒ‡å®šçš„æ¨¡å¼ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„è¡Œã€‚<code>LIKE</code>è¿ç®—ç¬¦å¯ä»¥åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œå› æ­¤ç‰¹åˆ«é€‚åˆç”¨äºæŸ¥æ‰¾ç±»ä¼¼çš„å­—ç¬¦ä¸²æ•°æ®ã€‚<code>LIKE</code>è¿ç®—ç¬¦å¸¸ä¸é€šé…ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®šä¹‰è¦åŒ¹é…çš„æ¨¡å¼ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">LIKE</span> <span class="keyword">pattern</span>;</span><br></pre></td></tr></table></figure><ul><li><code>LIKE</code>è¿ç®—ç¬¦æ”¯æŒä¸¤ç§ä¸»è¦çš„é€šé…ç¬¦<ul><li>ç™¾åˆ†å·<code>%</code>: åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬é›¶ä¸ªå­—ç¬¦ã€‚</li><li>ä¸‹åˆ’çº¿<code>_</code>: åŒ¹é…å•ä¸ªå­—ç¬¦ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ employees è¡¨ä¸­æ‰€æœ‰åå­—ä»¥ &quot;A&quot; å¼€å¤´çš„å‘˜å·¥</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;A%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ employees è¡¨ä¸­æ‰€æœ‰åå­—ä»¥ &quot;son&quot; ç»“å°¾çš„å‘˜å·¥</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%son&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ employees è¡¨ä¸­æ‰€æœ‰åå­—ä¸­åŒ…å« &quot;li&quot; çš„å‘˜å·¥</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%li%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> æŸ¥è¯¢ employees è¡¨ä¸­æ‰€æœ‰åå­—ä¸­ç¬¬äºŒä¸ªå­—æ¯æ˜¯ &quot;a&quot; çš„å‘˜å·¥</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;_a%&#x27;</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="12-NULL-å’Œ-IS-NULL-è¿ç®—ç¬¦"><a href="#12-NULL-å’Œ-IS-NULL-è¿ç®—ç¬¦" class="headerlink" title="12. NULL å’Œ IS NULL è¿ç®—ç¬¦"></a>12. NULL å’Œ IS NULL è¿ç®—ç¬¦</h3><p><code>NULL</code>æ˜¯<code>SQL</code>ä¸­ç”¨äºè¡¨ç¤ºæ•°æ®çš„ç¼ºå¤±æˆ–æœªçŸ¥å€¼çš„ç‰¹æ®Šæ ‡è¯†ç¬¦ã€‚å®ƒä¸åŒäºé›¶ã€ç©ºå­—ç¬¦ä¸²æˆ–ä»»ä½•å…¶ä»–å€¼ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºæ²¡æœ‰æ•°æ®æˆ–æ•°æ®ä¸å¯ç”¨ã€‚ç”±äº<code>NULL</code>ä»£è¡¨æœªçŸ¥å€¼ï¼Œå› æ­¤å®ƒåœ¨é€»è¾‘è¿ç®—å’Œæ¯”è¾ƒä¸­æœ‰ç‰¹æ®Šçš„å¤„ç†æ–¹å¼ã€‚</p><ul><li><p><code>NULL</code>çš„ç‰¹æ€§</p><ul><li>æ²¡æœ‰ç‰¹å®šç±»å‹: <code>NULL</code>å¯ä»¥å‡ºç°åœ¨ä»»ä½•æ•°æ®ç±»å‹çš„åˆ—ä¸­ã€‚</li><li>ä¸å¯æ¯”è¾ƒ: <code>NULL</code>ä¸ç­‰äºä»»ä½•å€¼ï¼ŒåŒ…æ‹¬å®ƒè‡ªå·±ã€‚å› æ­¤ï¼Œ<code>NULL = NULL</code>çš„è¡¨è¾¾å¼ç»“æœä¸º<code>FALSE</code>ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨<code>IS NULL</code>æ¥æ£€æŸ¥<code>NULL</code>å€¼ã€‚</li></ul></li><li><p><code>IS NULL</code>è¿ç®—ç¬¦</p><ul><li><code>IS NULL</code>è¿ç®—ç¬¦ç”¨äºæ£€æŸ¥ä¸€ä¸ªåˆ—çš„å€¼æ˜¯å¦ä¸º<code>NULL</code>ã€‚ç”±äº<code>NULL</code>ä¸èƒ½é€šè¿‡å¸¸è§„çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆå¦‚<code>=</code>ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤<code>IS NULL</code>æ˜¯åˆ¤æ–­<code>NULL</code>å€¼çš„å”¯ä¸€åˆæ³•æ–¹å¼ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="13-è¡¨åˆ«å"><a href="#13-è¡¨åˆ«å" class="headerlink" title="13. è¡¨åˆ«å"></a>13. è¡¨åˆ«å</h3><p>è¡¨åˆ«å<code>Table Alias</code>æ˜¯<code>SQL</code>ä¸­ç”¨äºä¸ºè¡¨æŒ‡å®šä¸´æ—¶åç§°çš„åŠŸèƒ½ã€‚è¡¨åˆ«åé€šå¸¸ç”¨äºç®€åŒ–æŸ¥è¯¢è¯­å¥ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šè¡¨è”æ¥<code>JOIN</code>æˆ–å­æŸ¥è¯¢ä¸­ï¼Œä½¿å¾—æŸ¥è¯¢æ›´åŠ ç®€æ´å’Œæ˜“è¯»ã€‚è¡¨åˆ«åä»…åœ¨æŸ¥è¯¢çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆï¼Œä¸ä¼šå½±å“æ•°æ®åº“ä¸­è¡¨çš„å®é™…åç§°ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name <span class="keyword">AS</span> alias_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨<code>SQL</code>ä¸­ï¼Œ<code>AS</code>æ˜¯å¯é€‰çš„ã€‚</p></blockquote><hr><h3 id="14-INNER-JOIN-å†…è¿æ¥"><a href="#14-INNER-JOIN-å†…è¿æ¥" class="headerlink" title="14. INNER JOIN å†…è¿æ¥"></a>14. INNER JOIN å†…è¿æ¥</h3><p><code>INNER JOIN</code>å†…è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œç”¨äºä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢ç›¸å…³è”çš„æ•°æ®ã€‚<code>INNER JOIN</code>åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ»¡è¶³è”æ¥æ¡ä»¶çš„è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåªè¿”å›åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½æœ‰åŒ¹é…å…³ç³»çš„è®°å½•ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œç»“æœä¸­ä¸ä¼šåŒ…å«è¯¥è¡Œã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.common_column <span class="operator">=</span> table2.common_column;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th><th align="right">department_id</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td><td align="right">1</td></tr><tr><td align="left">2</td><td align="center">Bob</td><td align="right">2</td></tr><tr><td align="left">3</td><td align="center">Charlie</td><td align="right">NULL</td></tr></tbody></table><ul><li><code>departments</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">HR</td></tr><tr><td align="left">2</td><td align="center">Engineering</td></tr><tr><td align="left">3</td><td align="center">Marketing</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>INNER JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.name, departments.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments <span class="keyword">ON</span> employees.department_id <span class="operator">=</span> departments.id;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">name</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">HR</td></tr><tr><td align="left">Bob</td><td align="center">Engineering</td></tr></tbody></table><hr><h3 id="15-LEFT-JOIN-å·¦è¿æ¥"><a href="#15-LEFT-JOIN-å·¦è¿æ¥" class="headerlink" title="15. LEFT JOIN å·¦è¿æ¥"></a>15. LEFT JOIN å·¦è¿æ¥</h3><p><code>LEFT JOIN</code>å·¦è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œç”¨äºä»ä¸¤ä¸ªè¡¨ä¸­æŸ¥è¯¢ç›¸å…³çš„æ•°æ®ã€‚ä¸<code>INNER JOIN</code>ä¸åŒï¼Œ<code>LEFT JOIN</code>ä¼šè¿”å›å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ã€‚å¯¹äºé‚£äº›åœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œç»“æœé›†ä¸­ç›¸åº”å³è¡¨çš„å­—æ®µä¼šæ˜¾ç¤ºä¸º<code>NULL</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.common_column <span class="operator">=</span> table2.common_column;</span><br></pre></td></tr></table></figure><ul><li><code>LEFT JOIN</code>çš„è¡Œä¸º<ul><li>æ‰€æœ‰å·¦è¡¨çš„è¡Œ: å³ä½¿å·¦è¡¨ä¸­çš„æŸä¸€è¡Œåœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…è®°å½•ï¼Œè¯¥è¡Œä¹Ÿä¼šåŒ…å«åœ¨ç»“æœé›†ä¸­ã€‚</li><li>å³è¡¨çš„åŒ¹é…è¡Œ: å¦‚æœæœ‰åŒ¹é…çš„å³è¡¨è®°å½•ï¼Œè¿™äº›è®°å½•ä¼šå‡ºç°åœ¨ç»“æœé›†ä¸­ã€‚</li><li><code>NULL</code>å€¼ï¼šå¯¹äºåœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„å·¦è¡¨è®°å½•ï¼Œç»“æœé›†ä¸­å³è¡¨çš„åˆ—ä¼šæ˜¾ç¤ºä¸º<code>NULL</code>ã€‚</li></ul></li></ul><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th><th align="right">department_id</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td><td align="right">1</td></tr><tr><td align="left">2</td><td align="center">Bob</td><td align="right">2</td></tr><tr><td align="left">3</td><td align="center">Charlie</td><td align="right">NULL</td></tr><tr><td align="left">4</td><td align="center">David</td><td align="right">3</td></tr></tbody></table><ul><li><code>departments</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">HR</td></tr><tr><td align="left">2</td><td align="center">Engineering</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>LEFT JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.name, departments.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments <span class="keyword">ON</span> employees.department_id <span class="operator">=</span> departments.id;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">name</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">HR</td></tr><tr><td align="left">Bob</td><td align="center">Engineering</td></tr><tr><td align="left">Charlie</td><td align="center">NULL</td></tr><tr><td align="left">David</td><td align="center">NULL</td></tr></tbody></table><hr><h3 id="16-SELF-JOIN-è‡ªè¿æ¥"><a href="#16-SELF-JOIN-è‡ªè¿æ¥" class="headerlink" title="16. SELF JOIN è‡ªè¿æ¥"></a>16. SELF JOIN è‡ªè¿æ¥</h3><p>è‡ªè¿æ¥<code>Self Join</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œå…¶ä¸­ä¸€ä¸ªè¡¨ä¸è‡ªèº«è¿›è¡Œè”æ¥ã€‚è‡ªè¿æ¥ç”¨äºå°†è¡¨ä¸­çš„ä¸€è¡Œä¸åŒä¸€è¡¨ä¸­çš„å¦ä¸€è¡Œè¿›è¡Œæ¯”è¾ƒæˆ–å…³è”ã€‚è¿™åœ¨å¤„ç†è¡¨ä¸­è¡Œä¸è¡Œä¹‹é—´çš„å…³ç³»æ—¶éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚å±‚æ¬¡ç»“æ„ï¼ˆå¦‚å‘˜å·¥ä¸ç»ç†çš„å…³ç³»ï¼‰æˆ–ç›¸é‚»è¡Œä¹‹é—´çš„æ¯”è¾ƒã€‚</p><ul><li>åŸºæœ¬æ¦‚å¿µ<ul><li>åŒä¸€å¼ è¡¨: è‡ªè¿æ¥æ¶‰åŠçš„è¡¨å®é™…ä¸Šæ˜¯åŒä¸€å¼ è¡¨ï¼Œåªæ˜¯åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨äº†ä¸åŒçš„åˆ«åï¼Œä½¿å¾—å®ƒä»¬åœ¨é€»è¾‘ä¸Šçœ‹èµ·æ¥åƒæ˜¯ä¸¤ä¸ªä¸åŒçš„è¡¨ã€‚</li><li>è¡¨åˆ«å: ä¸ºäº†åŒºåˆ†è¡¨çš„ä¸åŒå®ä¾‹ï¼Œé€šå¸¸ä½¿ç”¨è¡¨åˆ«åã€‚è¿™æ ·å¯ä»¥åœ¨åŒä¸€ä¸ªæŸ¥è¯¢ä¸­å¼•ç”¨è¡¨ä¸­çš„ä¸åŒè¡Œã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.column1, b.column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name a</span><br><span class="line"><span class="keyword">JOIN</span> table_name b</span><br><span class="line"><span class="keyword">ON</span> a.common_column <span class="operator">=</span> b.common_column;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th><th align="right">manager_id</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td><td align="right">NULL</td></tr><tr><td align="left">2</td><td align="center">Bob</td><td align="right">1</td></tr><tr><td align="left">3</td><td align="center">Charlie</td><td align="right">1</td></tr><tr><td align="left">4</td><td align="center">David</td><td align="right">2</td></tr></tbody></table><ul><li>ä½¿ç”¨è‡ªè¿æ¥æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.name <span class="keyword">AS</span> employee_name, m.name <span class="keyword">AS</span> manager_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">employee_name</th><th align="center">manager_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">NULL</td></tr><tr><td align="left">Bob</td><td align="center">Alice</td></tr><tr><td align="left">Charlie</td><td align="center">Alice</td></tr><tr><td align="left">David</td><td align="center">Bob</td></tr></tbody></table><hr><h3 id="17-FULL-OUTER-JOIN-å…¨å¤–è¿æ¥"><a href="#17-FULL-OUTER-JOIN-å…¨å¤–è¿æ¥" class="headerlink" title="17. FULL OUTER JOIN å…¨å¤–è¿æ¥"></a>17. FULL OUTER JOIN å…¨å¤–è¿æ¥</h3><p><code>FULL OUTER JOIN</code>å…¨å¤–è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œå®ƒè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰ç¬¦åˆè”æ¥æ¡ä»¶çš„è®°å½•ï¼Œä»¥åŠä¸ç¬¦åˆè”æ¥æ¡ä»¶çš„è®°å½•ã€‚ä¸<code>INNER JOIN</code>åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­æœ‰åŒ¹é…è®°å½•çš„è¡Œä¸åŒï¼Œ<code>FULL OUTER JOIN</code>ä¼šè¿”å›ä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œå¦‚æœåœ¨æŸä¸€è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™è¯¥è¡¨çš„åˆ—ä¼šè¿”å›<code>NULL</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.common_column <span class="operator">=</span> table2.common_column;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th><th align="right">department_id</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td><td align="right">1</td></tr><tr><td align="left">2</td><td align="center">Bob</td><td align="right">2</td></tr><tr><td align="left">3</td><td align="center">Charlie</td><td align="right">NULL</td></tr></tbody></table><ul><li><code>departments</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">HR</td></tr><tr><td align="left">2</td><td align="center">Engineering</td></tr><tr><td align="left">3</td><td align="center">Marketing</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>FULL OUTER JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.name, departments.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> departments <span class="keyword">ON</span> employees.department_id <span class="operator">=</span> departments.id;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">name</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">HR</td></tr><tr><td align="left">Bob</td><td align="center">Engineering</td></tr><tr><td align="left">Charlie</td><td align="center">NULL</td></tr><tr><td align="left">NULL</td><td align="center">Marketing</td></tr></tbody></table><hr><h3 id="18-CROSS-JOIN-äº¤å‰è¿æ¥"><a href="#18-CROSS-JOIN-äº¤å‰è¿æ¥" class="headerlink" title="18. CROSS JOIN äº¤å‰è¿æ¥"></a>18. CROSS JOIN äº¤å‰è¿æ¥</h3><p><code>CROSS JOIN</code>äº¤å‰è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œå®ƒè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰å¯èƒ½çš„è¡Œç»„åˆï¼Œç”Ÿæˆç¬›å¡å°”ç§¯<code>Cartesian Product</code>ã€‚<code>CROSS JOIN</code>ä¸ä½¿ç”¨ä»»ä½•è”æ¥æ¡ä»¶ï¼Œå› æ­¤ä¼šå°†å·¦è¡¨çš„æ¯ä¸€è¡Œä¸å³è¡¨çš„æ¯ä¸€è¡Œç»„åˆåœ¨ä¸€èµ·ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> table2;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>products</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">product_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Shirt</td></tr><tr><td align="left">2</td><td align="center">Pants</td></tr></tbody></table><ul><li><code>colors</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">color_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Red</td></tr><tr><td align="left">2</td><td align="center">Blue</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>CROSS JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> products.product_name, colors.color_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> colors;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">product_name</th><th align="center">color_name</th></tr></thead><tbody><tr><td align="left">Shirt</td><td align="center">Red</td></tr><tr><td align="left">Shirt</td><td align="center">Blue</td></tr><tr><td align="left">Pants</td><td align="center">Red</td></tr><tr><td align="left">Pants</td><td align="center">Blue</td></tr></tbody></table><hr><h3 id="19-NATURAL-JOIN-è‡ªç„¶è¿æ¥"><a href="#19-NATURAL-JOIN-è‡ªç„¶è¿æ¥" class="headerlink" title="19. NATURAL JOIN è‡ªç„¶è¿æ¥"></a>19. NATURAL JOIN è‡ªç„¶è¿æ¥</h3><p><code>NATURAL JOIN</code>è‡ªç„¶è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§è”æ¥æ“ä½œï¼Œå®ƒæ ¹æ®ä¸¤ä¸ªè¡¨ä¸­åŒåçš„åˆ—è‡ªåŠ¨è¿›è¡Œè”æ¥ã€‚è‡ªç„¶è¿æ¥ä¼šè‡ªåŠ¨æ¯”è¾ƒä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰åŒåçš„åˆ—ï¼Œå¹¶è¿”å›è¿™äº›åˆ—å€¼ç›¸ç­‰çš„è¡Œã€‚ä¸<code>INNER JOIN</code>ä¸åŒï¼Œ<code>NATURAL JOIN</code>ä¸éœ€è¦æ˜¾å¼æŒ‡å®šè”æ¥æ¡ä»¶ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶ä½¿ç”¨åŒååˆ—è¿›è¡Œè”æ¥ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> table2;</span><br></pre></td></tr></table></figure><ul><li><code>NATURAL JOIN</code>çš„è¡Œä¸º<ul><li>è‡ªåŠ¨è”æ¥: <code>NATURAL JOIN</code>è‡ªåŠ¨æŸ¥æ‰¾å¹¶ä½¿ç”¨ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰åŒåçš„åˆ—æ¥è¿›è¡Œè”æ¥ã€‚</li><li>åŒååˆ—å€¼ç›¸ç­‰: åªæœ‰å½“ä¸¤ä¸ªè¡¨ä¸­åŒååˆ—çš„å€¼ç›¸ç­‰æ—¶ï¼Œæ‰ä¼šåœ¨ç»“æœé›†ä¸­è¿”å›è¿™äº›è¡Œã€‚</li><li>ä¸è¿”å›é‡å¤åˆ—: ç»“æœé›†ä¸­ä¸ä¼šåŒ…å«é‡å¤çš„åŒååˆ—ï¼Œåªä¼šè¿”å›ä¸€æ¬¡ã€‚</li></ul></li></ul><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th><th align="right">department_id</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td><td align="right">1</td></tr><tr><td align="left">2</td><td align="center">Bob</td><td align="right">2</td></tr><tr><td align="left">3</td><td align="center">Charlie</td><td align="right">3</td></tr></tbody></table><ul><li><code>departments</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">HR</td></tr><tr><td align="left">2</td><td align="center">Engineering</td></tr><tr><td align="left">4</td><td align="center">Marketing</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>NATURAL JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.id, employees.name, departments.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> departments;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">name</th><th align="center">department_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">HR</td></tr><tr><td align="left">Bob</td><td align="center">Engineering</td></tr></tbody></table><hr><h3 id="20-LATERAL-JOIN-æ¨ªå‘è¿æ¥"><a href="#20-LATERAL-JOIN-æ¨ªå‘è¿æ¥" class="headerlink" title="20. LATERAL JOIN æ¨ªå‘è¿æ¥"></a>20. LATERAL JOIN æ¨ªå‘è¿æ¥</h3><p><code>LATERAL JOIN</code>æ¨ªå‘è¿æ¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§é«˜çº§è”æ¥æ“ä½œï¼Œå®ƒå…è®¸è”æ¥çš„å­æŸ¥è¯¢å¯ä»¥å¼•ç”¨æ¥è‡ªè¿æ¥å·¦ä¾§è¡¨çš„åˆ—ã€‚<code>LATERAL</code>å­å¥ä½¿å¾—æ¯ä¸€è¡Œéƒ½å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œå­æŸ¥è¯¢ï¼ŒåŸºäºå½“å‰è¡Œçš„å€¼è¿›è¡Œè®¡ç®—æˆ–è¿‡æ»¤ã€‚è¿™ä½¿å¾—<code>LATERAL JOIN</code>ç‰¹åˆ«é€‚ç”¨äºé‚£äº›éœ€è¦å¤„ç†ä¾èµ–äºå½“å‰è¡Œçš„å¤æ‚å­æŸ¥è¯¢çš„åœºæ™¯ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> ...</span><br><span class="line">) alias <span class="keyword">ON</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>employees</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">name</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Alice</td></tr><tr><td align="left">2</td><td align="center">Bob</td></tr></tbody></table><ul><li><code>projects</code>è¡¨</li></ul><table><thead><tr><th align="left">employee_id</th><th align="center">project_name</th><th align="right">start_date</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">Project X</td><td align="right">2023-01-01</td></tr><tr><td align="left">2</td><td align="center">Project Y</td><td align="right">2023-06-01</td></tr><tr><td align="left">3</td><td align="center">Project Z</td><td align="right">2022-09-01</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>LATERAL JOIN</code>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.name, p.project_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> project_name</span><br><span class="line">  <span class="keyword">FROM</span> projects p</span><br><span class="line">  <span class="keyword">WHERE</span> p.employee_id <span class="operator">=</span> e.id</span><br><span class="line">  <span class="keyword">ORDER</span> <span class="keyword">BY</span> start_date <span class="keyword">DESC</span></span><br><span class="line">  LIMIT <span class="number">1</span></span><br><span class="line">) p <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">name</th><th align="center">project_name</th></tr></thead><tbody><tr><td align="left">Alice</td><td align="center">Project Y</td></tr><tr><td align="left">Bob</td><td align="center">Project Z</td></tr></tbody></table><hr><h3 id="21-GROUP-BY-åˆ†ç»„"><a href="#21-GROUP-BY-åˆ†ç»„" class="headerlink" title="21. GROUP BY åˆ†ç»„"></a>21. GROUP BY åˆ†ç»„</h3><p><code>GROUP BY</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªå­å¥ï¼Œç”¨äºå°†æŸ¥è¯¢ç»“æœæŒ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è¿›è¡Œåˆ†ç»„ã€‚åˆ†ç»„æ“ä½œé€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆå¦‚<code>COUNT</code>ã€<code>SUM</code>ã€<code>AVG</code>ã€<code>MAX</code>ã€<code>MIN</code>ç­‰ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿å¯¹æ¯ä¸ªåˆ†ç»„è¿›è¡Œæ±‡æ€»è®¡ç®—ã€‚<code>GROUP BY</code>å…è®¸ä½ å°†æ•°æ®æŒ‰ç‰¹å®šçš„ç»´åº¦è¿›è¡Œèšåˆï¼Œè¿›è€Œå¯¹è¿™äº›èšåˆåçš„æ•°æ®è¿›è¡Œåˆ†æã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ..., aggregate_function(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1, column2, ...;</span><br></pre></td></tr></table></figure><ul><li>ä¸¾ä¸ªä¾‹å­ï¼ŒæŒ‰<code>product_id</code>å¯¹é”€å”®æ•°é‡è¿›è¡Œæ±‡æ€»ï¼Œè®¡ç®—æ¯ä¸ªäº§å“çš„æ€»é”€å”®é‡ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_id, <span class="built_in">SUM</span>(quantity) <span class="keyword">AS</span> total_quantity</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> product_id;</span><br></pre></td></tr></table></figure><hr><h3 id="22-HAVING-å­å¥"><a href="#22-HAVING-å­å¥" class="headerlink" title="22. HAVING å­å¥"></a>22. HAVING å­å¥</h3><p><code>HAVING</code>å­å¥æ˜¯<code>SQL</code>ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºåœ¨åˆ†ç»„åçš„ç»“æœé›†ä¸Šè¿›è¡Œè¿‡æ»¤ã€‚å®ƒé€šå¸¸ä¸<code>GROUP BY</code>å­å¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¾¿å¯¹èšåˆåçš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥çš„ç­›é€‰ã€‚ä¸<code>WHERE</code>å­å¥ä¸åŒï¼Œ<code>HAVING</code>å­å¥ç”¨äºè¿‡æ»¤åŸºäºèšåˆå‡½æ•°çš„ç»“æœï¼Œè€Œ<code>WHERE</code>å­å¥æ˜¯åœ¨æ•°æ®åˆ†ç»„ä¹‹å‰å¯¹è¡Œè¿›è¡Œè¿‡æ»¤ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, aggregate_function(column3)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1, column2</span><br><span class="line"><span class="keyword">HAVING</span> aggregate_condition;</span><br></pre></td></tr></table></figure><ul><li>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢é”€å”®æ€»é‡å¤§äº<code>100</code>çš„äº§å“</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_id, <span class="built_in">SUM</span>(quantity) <span class="keyword">AS</span> total_quantity</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> product_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">SUM</span>(quantity) <span class="operator">&gt;</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="23-PARTITION-BY-åˆ†åŒºè®¡ç®—"><a href="#23-PARTITION-BY-åˆ†åŒºè®¡ç®—" class="headerlink" title="23. PARTITION BY åˆ†åŒºè®¡ç®—"></a>23. PARTITION BY åˆ†åŒºè®¡ç®—</h3><p><code>PARTITION BY</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªå­å¥ï¼Œé€šå¸¸ä¸çª—å£å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†æŸ¥è¯¢ç»“æœé›†åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼Œç„¶ååœ¨æ¯ä¸ªåˆ†åŒºå†…æ‰§è¡Œç‰¹å®šçš„è®¡ç®—ã€‚å®ƒç±»ä¼¼äº<code>GROUP BY</code>ï¼Œä½†<code>PARTITION BY</code>ä¸ä¼šå°†æ•°æ®èšåˆåˆ°å•ä¸€è¡Œï¼Œè€Œæ˜¯ä¿ç•™æ‰€æœ‰è¡Œï¼Œå¹¶åœ¨æ¯ä¸ªåˆ†åŒºå†…æ‰§è¡Œè®¡ç®—ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, </span><br><span class="line">       window_function() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> column_name <span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name) <span class="keyword">AS</span> alias_name</span><br><span class="line"><span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>sales</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">employee_id</th><th align="center">sale_amount</th><th align="center">sale_date</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">101</td><td align="center">500</td><td align="center">2023-08-01</td></tr><tr><td align="left">2</td><td align="center">101</td><td align="center">700</td><td align="center">2023-08-02</td></tr><tr><td align="left">3</td><td align="center">102</td><td align="center">300</td><td align="center">2023-08-01</td></tr><tr><td align="left">4</td><td align="center">101</td><td align="center">400</td><td align="center">2023-08-03</td></tr><tr><td align="left">5</td><td align="center">102</td><td align="center">800</td><td align="center">2023-08-02</td></tr></tbody></table><ul><li>ä½¿ç”¨<code>PARTITION BY</code>è¿›è¡Œåˆ†åŒºè®¡ç®—</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, sale_date, sale_amount,</span><br><span class="line">       <span class="built_in">RANK</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> employee_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> sale_amount <span class="keyword">DESC</span>) <span class="keyword">AS</span> sales_rank</span><br><span class="line"><span class="keyword">FROM</span> sales;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">employee_id</th><th align="center">sale_date</th><th align="center">sale_amount</th><th align="center">sales_rank</th></tr></thead><tbody><tr><td align="left">101</td><td align="center">2023-08-02</td><td align="center">700</td><td align="center">1</td></tr><tr><td align="left">101</td><td align="center">2023-08-01</td><td align="center">500</td><td align="center">2</td></tr><tr><td align="left">101</td><td align="center">2023-08-03</td><td align="center">400</td><td align="center">3</td></tr><tr><td align="left">102</td><td align="center">2023-08-02</td><td align="center">800</td><td align="center">1</td></tr><tr><td align="left">102</td><td align="center">2023-08-01</td><td align="center">300</td><td align="center">2</td></tr></tbody></table><hr><h3 id="24-UNION-ç»„åˆ"><a href="#24-UNION-ç»„åˆ" class="headerlink" title="24. UNION ç»„åˆ"></a>24. UNION ç»„åˆ</h3><p><code>UNION</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºå°†ä¸¤ä¸ªæˆ–å¤šä¸ª<code>SELECT</code>è¯­å¥çš„ç»“æœç»„åˆæˆä¸€ä¸ªç»“æœé›†ã€‚<code>UNION</code>è¿ç®—ç¬¦å°†å¤šä¸ªæŸ¥è¯¢çš„ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªï¼Œä¸”é»˜è®¤æƒ…å†µä¸‹ä¼šå»é™¤é‡å¤çš„è¡Œã€‚å¦‚æœä½ å¸Œæœ›ä¿ç•™é‡å¤è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>UNION ALL</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ¡ä»¶</p><ul><li>åˆ—æ•°å’Œæ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´: å‚ä¸<code>UNION</code>çš„æ¯ä¸ª<code>SELECT</code>è¯­å¥ä¸­ï¼Œåˆ—æ•°å¿…é¡»ç›¸åŒï¼Œä¸”å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹åº”è¯¥å…¼å®¹æˆ–ç›¸åŒã€‚</li><li>åˆ—çš„é¡ºåºå’Œåç§°: åœ¨åˆå¹¶çš„ç»“æœé›†ä¸­ï¼Œåˆ—çš„é¡ºåºä»¥ç¬¬ä¸€ä¸ª<code>SELECT</code>è¯­å¥ä¸­çš„åˆ—ä¸ºå‡†ï¼Œåˆ—åä¹Ÿæ˜¯æ ¹æ®ç¬¬ä¸€ä¸ª<code>SELECT</code>è¯­å¥çš„åˆ—åã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢ä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰å‘˜å·¥ï¼Œå¹¶å°†ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªç»“æœé›†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2023</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2024;</span><br></pre></td></tr></table></figure><hr><h3 id="25-INTERSECT-äº¤é›†"><a href="#25-INTERSECT-äº¤é›†" class="headerlink" title="25. INTERSECT äº¤é›†"></a>25. INTERSECT äº¤é›†</h3><p><code>INTERSECT</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºè¿”å›ä¸¤ä¸ªæˆ–å¤šä¸ª<code>SELECT</code>è¯­å¥ç»“æœé›†çš„äº¤é›†ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒè¿”å›çš„æ˜¯åœ¨æ‰€æœ‰å‚ä¸æŸ¥è¯¢çš„ç»“æœé›†ä¸­éƒ½å­˜åœ¨çš„è¡Œã€‚<code>INTERSECT</code>è¿ç®—ç¬¦åœ¨å¤šä¸ªæŸ¥è¯¢ç»“æœé›†ä¸­æ‰¾å‡ºå…±æœ‰çš„è¡Œï¼Œè€Œè¿™äº›è¡Œå¿…é¡»åœ¨æ‰€æœ‰æŸ¥è¯¢ä¸­éƒ½å‡ºç°ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure><p><code>INTERSECT</code>çš„è¡Œä¸º</p><ul><li>è¿”å›å…±æœ‰è¡Œ: <code>INTERSECT</code>åªè¿”å›åœ¨æ‰€æœ‰<code>SELECT</code>è¯­å¥ç»“æœé›†ä¸­éƒ½å­˜åœ¨çš„è¡Œã€‚</li><li>è‡ªåŠ¨å»é‡: <code>INTERSECT</code>ä¼šè‡ªåŠ¨å»é™¤ç»“æœä¸­çš„é‡å¤è¡Œï¼Œç±»ä¼¼äº<code>DISTINCT</code>ã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢ä¸¤ä¸ªè¡¨ä¸­åœ¨<code>2023</code>å¹´å’Œ<code>2024</code>å¹´éƒ½å­˜åœ¨çš„å‘˜å·¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2023</span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2024;</span><br></pre></td></tr></table></figure><hr><h3 id="26-EXCEPT-å·®é›†"><a href="#26-EXCEPT-å·®é›†" class="headerlink" title="26. EXCEPT å·®é›†"></a>26. EXCEPT å·®é›†</h3><p><code>EXCEPT</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºè¿”å›ä¸¤ä¸ª<code>SELECT</code>è¯­å¥ç»“æœé›†çš„å·®é›†ï¼Œå³è¿”å›ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœé›†ä¸­æœ‰ä½†ç¬¬äºŒä¸ªæŸ¥è¯¢çš„ç»“æœé›†ä¸­æ²¡æœ‰çš„è¡Œã€‚<code>EXCEPT</code>é€šå¸¸ç”¨äºæ¯”è¾ƒä¸¤ä¸ªç»“æœé›†å¹¶æ‰¾å‡ºå…¶ä¸­ä¸€ä¸ªç»“æœé›†ä¸­ç‹¬æœ‰çš„è®°å½•ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure><p><code>EXCEPT</code>çš„è¡Œä¸º</p><ul><li>è¿”å›å·®é›†: <code>EXCEPT</code>è¿”å›ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç»“æœé›†ä¸­æœ‰ï¼Œä½†ç¬¬äºŒä¸ªæŸ¥è¯¢ç»“æœé›†ä¸­æ²¡æœ‰çš„è¡Œã€‚</li><li>è‡ªåŠ¨å»é‡: <code>EXCEPT</code>ä¼šè‡ªåŠ¨å»é™¤ç»“æœä¸­çš„é‡å¤è¡Œï¼Œç±»ä¼¼äº<code>DISTINCT</code>ã€‚</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢é‚£äº›åœ¨<code>2023</code>å¹´å­˜åœ¨ä½†åœ¨<code>2024</code>å¹´ä¸å­˜åœ¨çš„å‘˜å·¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2023</span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">SELECT</span> id, name, department</span><br><span class="line"><span class="keyword">FROM</span> employees_2024;</span><br></pre></td></tr></table></figure><hr><h3 id="27-GROUPING-SETS-åˆ†ç»„"><a href="#27-GROUPING-SETS-åˆ†ç»„" class="headerlink" title="27. GROUPING SETS åˆ†ç»„"></a>27. GROUPING SETS åˆ†ç»„</h3><p><code>GROUPING SETS</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ç§é«˜çº§åˆ†ç»„åŠŸèƒ½ï¼Œç”¨äºåœ¨å•ä¸ªæŸ¥è¯¢ä¸­å®ç°å¤šç§åˆ†ç»„æ–¹å¼ã€‚å®ƒå…è®¸ä½ åœ¨ä¸€æ¬¡æŸ¥è¯¢ä¸­æŒ‡å®šå¤šä¸ªåˆ†ç»„æ ‡å‡†ï¼Œå¹¶è¿”å›æ¯ä¸ªåˆ†ç»„æ ‡å‡†çš„èšåˆç»“æœã€‚<code>GROUPING SETS</code>æœ¬è´¨ä¸Šæ˜¯<code>GROUP BY</code>å­å¥çš„æ‰©å±•ï¼Œæä¾›äº†æ›´çµæ´»çš„åˆ†ç»„å’Œèšåˆæ“ä½œã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ..., aggregate_function(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">GROUPING</span> SETS ( (column1), (column2), ...);</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>sales</code>è¡¨</li></ul><table><thead><tr><th align="left">id</th><th align="center">employee_id</th><th align="center">product_id</th><th align="center">sale_amount</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">101</td><td align="center">1</td><td align="center">100</td></tr><tr><td align="left">2</td><td align="center">102</td><td align="center">1</td><td align="center">200</td></tr><tr><td align="left">3</td><td align="center">101</td><td align="center">2</td><td align="center">150</td></tr><tr><td align="left">4</td><td align="center">103</td><td align="center">2</td><td align="center">250</td></tr></tbody></table><ul><li>æˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­å¾—åˆ°ä»¥ä¸‹å‡ ç§åˆ†ç»„çš„èšåˆç»“æœ<ul><li>æŒ‰å‘˜å·¥<code>employee_id</code>åˆ†ç»„å¹¶è®¡ç®—é”€å”®æ€»é¢ã€‚</li><li>æŒ‰äº§å“<code>product_id</code>åˆ†ç»„å¹¶è®¡ç®—é”€å”®æ€»é¢ã€‚</li><li>å¯¹æ‰€æœ‰é”€å”®è®°å½•è®¡ç®—æ€»é¢ï¼ˆæ²¡æœ‰åˆ†ç»„ï¼‰ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, product_id, <span class="built_in">SUM</span>(sale_amount) <span class="keyword">AS</span> total_sales</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">GROUPING</span> SETS (</span><br><span class="line">    (employee_id),</span><br><span class="line">    (product_id),</span><br><span class="line">    ()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">employee_id</th><th align="center">product_id</th><th align="center">total_sales</th></tr></thead><tbody><tr><td align="left">101</td><td align="center">NULL</td><td align="center">250</td></tr><tr><td align="left">102</td><td align="center">NULL</td><td align="center">200</td></tr><tr><td align="left">103</td><td align="center">NULL</td><td align="center">250</td></tr><tr><td align="left">NULL</td><td align="center">1</td><td align="center">300</td></tr><tr><td align="left">NULL</td><td align="center">2</td><td align="center">400</td></tr><tr><td align="left">NULL</td><td align="center">NULL</td><td align="center">700</td></tr></tbody></table><hr><h3 id="28-CUBE-åˆ†ç»„"><a href="#28-CUBE-åˆ†ç»„" class="headerlink" title="28. CUBE åˆ†ç»„"></a>28. CUBE åˆ†ç»„</h3><p><code>CUBE</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªæ‰©å±•åˆ†ç»„åŠŸèƒ½ï¼Œç”¨äºåœ¨å•ä¸ªæŸ¥è¯¢ä¸­ç”Ÿæˆæ‰€æœ‰å¯èƒ½ç»„åˆçš„åˆ†ç»„å’Œèšåˆç»“æœã€‚<code>CUBE</code>æ˜¯<code>GROUP BY</code>å­å¥çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸€ç§å¤šç»´åˆ†æçš„æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆåœ¨éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤šç»´åº¦æ±‡æ€»çš„åœºæ™¯ä¸­ä½¿ç”¨ã€‚å®ƒé€šè¿‡è®¡ç®—æ‰€æœ‰å¯èƒ½çš„åˆ†ç»„ç»„åˆï¼Œå¸®åŠ©æˆ‘ä»¬å…¨é¢åœ°äº†è§£æ•°æ®çš„åˆ†å¸ƒã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ..., aggregate_function(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">CUBE</span> (column1, column2, ...);</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>sales</code>è¡¨</li></ul><table><thead><tr><th align="left">region</th><th align="center">product</th><th align="center">sale_amount</th></tr></thead><tbody><tr><td align="left">North</td><td align="center">A</td><td align="center">100</td></tr><tr><td align="left">North</td><td align="center">B</td><td align="center">150</td></tr><tr><td align="left">South</td><td align="center">A</td><td align="center">200</td></tr><tr><td align="left">South</td><td align="center">B</td><td align="center">250</td></tr></tbody></table><ul><li>æŒ‰åŒºåŸŸå’Œäº§å“ç”Ÿæˆé”€å”®é‡‘é¢çš„æ‰€æœ‰å¯èƒ½ç»„åˆçš„èšåˆç»“æœ</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> region, product, <span class="built_in">SUM</span>(sale_amount) <span class="keyword">AS</span> total_sales</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">CUBE</span> (region, product);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">region</th><th align="center">product</th><th align="right">total_sales</th></tr></thead><tbody><tr><td align="left">North</td><td align="center">A</td><td align="right">100</td></tr><tr><td align="left">North</td><td align="center">B</td><td align="right">150</td></tr><tr><td align="left">North</td><td align="center">NULL</td><td align="right">250</td></tr><tr><td align="left">South</td><td align="center">A</td><td align="right">200</td></tr><tr><td align="left">South</td><td align="center">B</td><td align="right">250</td></tr><tr><td align="left">South</td><td align="center">NULL</td><td align="right">450</td></tr><tr><td align="left">NULL</td><td align="center">A</td><td align="right">300</td></tr><tr><td align="left">NULL</td><td align="center">B</td><td align="right">400</td></tr><tr><td align="left">NULL</td><td align="center">NULL</td><td align="right">700</td></tr></tbody></table><hr><h3 id="29-ROLLUP-åˆ†ç»„"><a href="#29-ROLLUP-åˆ†ç»„" class="headerlink" title="29. ROLLUP åˆ†ç»„"></a>29. ROLLUP åˆ†ç»„</h3><p><code>ROLLUP</code>æ˜¯<code>SQL</code>ä¸­çš„ä¸€ä¸ªæ‰©å±•åˆ†ç»„åŠŸèƒ½ï¼Œç”¨äºç”ŸæˆåŸºäºå±‚æ¬¡ç»“æ„çš„åˆ†ç»„å’Œèšåˆç»“æœã€‚å®ƒæ˜¯<code>GROUP BY</code>å­å¥çš„æ‰©å±•ï¼Œç”¨äºåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­ç”Ÿæˆä»è¯¦ç»†åˆ°æ±‡æ€»çš„å¤šä¸ªçº§åˆ«çš„èšåˆç»“æœã€‚<code>ROLLUP</code>å¸¸ç”¨äºéœ€è¦å¯¹æ•°æ®è¿›è¡Œå±‚æ¬¡åˆ†æçš„åœºæ™¯ï¼Œä¾‹å¦‚é”€å”®æ•°æ®æŒ‰åŒºåŸŸå’Œæ—¶é—´è¿›è¡Œæ±‡æ€»æ—¶ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ..., aggregate_function(<span class="keyword">column</span>)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span> (column1, column2, ...);</span><br></pre></td></tr></table></figure><p>å‡è®¾æœ‰ä»¥ä¸‹æ•°æ®</p><ul><li><code>sales</code>è¡¨</li></ul><table><thead><tr><th align="left">region</th><th align="center">product</th><th align="right">sale_amount</th></tr></thead><tbody><tr><td align="left">North</td><td align="center">A</td><td align="right">100</td></tr><tr><td align="left">North</td><td align="center">B</td><td align="right">150</td></tr><tr><td align="left">South</td><td align="center">A</td><td align="right">200</td></tr><tr><td align="left">South</td><td align="center">B</td><td align="right">250</td></tr></tbody></table><ul><li>æŒ‰åŒºåŸŸå’Œäº§å“ç”Ÿæˆä»è¯¦ç»†åˆ°æ±‡æ€»çš„é”€å”®é‡‘é¢æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> region, product, <span class="built_in">SUM</span>(sale_amount) <span class="keyword">AS</span> total_sales</span><br><span class="line"><span class="keyword">FROM</span> sales</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">CUBE</span> (region, product);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç»“æœå¯èƒ½æ˜¯</li></ul><table><thead><tr><th align="left">region</th><th align="center">product</th><th align="right">total_sales</th></tr></thead><tbody><tr><td align="left">North</td><td align="center">A</td><td align="right">100</td></tr><tr><td align="left">North</td><td align="center">B</td><td align="right">150</td></tr><tr><td align="left">North</td><td align="center">NULL</td><td align="right">250</td></tr><tr><td align="left">South</td><td align="center">A</td><td align="right">200</td></tr><tr><td align="left">South</td><td align="center">B</td><td align="right">250</td></tr><tr><td align="left">South</td><td align="center">NULL</td><td align="right">450</td></tr><tr><td align="left">NULL</td><td align="center">NULL</td><td align="right">700</td></tr></tbody></table><hr><h3 id="30"><a href="#30" class="headerlink" title="30."></a>30.</h3><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>æ–‡ä»¶è¿˜æœªä¸Šä¼  Github</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GraphQL å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/69cd31bf.html"/>
      <url>/posts/69cd31bf.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://chenyitian.gitbooks.io/graphql/content/introduction.html">https://chenyitian.gitbooks.io/graphql/content/introduction.html</a><br>å‚è€ƒç½‘ç«™: <a href="https://www.howtographql.com/basics/0-introduction/">https://www.howtographql.com/basics/0-introduction/</a></p></blockquote><hr><h3 id="GraphQLåŸºç¡€"><a href="#GraphQLåŸºç¡€" class="headerlink" title="GraphQLåŸºç¡€"></a><code>GraphQL</code>åŸºç¡€</h3><h4 id="1-ä»€ä¹ˆæ˜¯GraphQL"><a href="#1-ä»€ä¹ˆæ˜¯GraphQL" class="headerlink" title="1. ä»€ä¹ˆæ˜¯GraphQL"></a>1. ä»€ä¹ˆæ˜¯<code>GraphQL</code></h4><p><code>GraphQL</code>æ˜¯ä¸€ç§ç”¨äº<code>API</code>çš„æŸ¥è¯¢è¯­è¨€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§è¿è¡Œåœ¨æœåŠ¡ç«¯çš„æ‰§è¡Œå¼•æ“ã€‚å®ƒä½¿ç”¨åŸºäºç±»å‹ç³»ç»Ÿçš„æ¨¡å¼å®šä¹‰å’ŒéªŒè¯æŸ¥è¯¢ç»“æ„ï¼ˆç±»å‹ç³»ç»Ÿç”±ä½ çš„æ•°æ®å®šä¹‰ï¼‰ã€‚<code>GraphQL</code>ä¸ä¾èµ–ä»»ä½•ç‰¹å®šæ•°æ®åº“æˆ–å­˜å‚¨å¼•æ“ï¼Œè€Œæ˜¯é€šè¿‡ç°æœ‰ä»£ç å’Œæ•°æ®æ¥æ”¯æŒæŸ¥è¯¢</p><h5 id="ä¸ºä»€ä¹ˆä½¿ç”¨GraphQL"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨GraphQL" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨GraphQL"></a><p style='font-size: 14px'>ä¸ºä»€ä¹ˆä½¿ç”¨<code>GraphQL</code></p></h5><ul><li>çµæ´»çš„æ•°æ®è·å–: å®¢æˆ·ç«¯å¯ä»¥è¯·æ±‚ç¡®åˆ‡çš„æ•°æ®ç»“æ„ï¼Œé¿å…æ•°æ®è¿‡å¤šæˆ–ä¸è¶³çš„é—®é¢˜</li><li>å•ä¸€ç«¯ç‚¹: æ‰€æœ‰æŸ¥è¯¢é€šè¿‡ä¸€ä¸ªç«¯ç‚¹å®Œæˆï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„äº¤äº’</li><li>å¼ºç±»å‹ç³»ç»Ÿ: å®šä¹‰<code>API</code>æ—¶ä½¿ç”¨å¼ºç±»å‹ï¼Œå¯ä»¥æ•è·å¼€å‘é”™è¯¯ï¼Œå¢å¼ºå·¥å…·æ”¯æŒï¼ˆå¦‚è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å’Œä»£ç ï¼‰</li><li>å®æ—¶æ›´æ–°: é€šè¿‡è®¢é˜…ï¼ˆ<code>subscriptions</code>ï¼‰ï¼Œæ”¯æŒå®æ—¶æ•°æ®æ›´æ–°ï¼Œå®¢æˆ·ç«¯åœ¨æ•°æ®å˜åŒ–æ—¶èƒ½è‡ªåŠ¨æ¥æ”¶æ›´æ–°</li></ul><h5 id="ä¸RESTçš„å¯¹æ¯”"><a href="#ä¸RESTçš„å¯¹æ¯”" class="headerlink" title="ä¸RESTçš„å¯¹æ¯”"></a><p style='font-size: 14px'>ä¸<code>REST</code>çš„å¯¹æ¯”</p></h5><ul><li><p>ä¸<code>REST</code>çš„å¯¹æ¯” (ä¼˜ç‚¹)</p><ul><li>é¿å…å¤šæ¬¡è¯·æ±‚: <code>REST</code>ä¸­å¯èƒ½éœ€è¦å¤šæ¬¡è¯·æ±‚ä¸åŒèµ„æºæ‰èƒ½è·å–æ‰€éœ€æ•°æ®ï¼Œè€Œ<code>GraphQL</code>èƒ½é€šè¿‡å•ä¸€æŸ¥è¯¢è·å–æ‰€æœ‰ç›¸å…³æ•°æ®</li><li>ç²¾ç¡®çš„æ•°æ®è·å–: å®¢æˆ·ç«¯æ˜ç¡®æŒ‡å®šéœ€è¦çš„å­—æ®µï¼Œé¿å…å¤šä½™æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºå¸¦å®½æœ‰é™æˆ–ç½‘ç»œä¸ç¨³å®šçš„ç¯å¢ƒ</li></ul></li><li><p>ä¸<code>REST</code>çš„å¯¹æ¯” (ç¼ºç‚¹)</p><ul><li>æŸ¥è¯¢è§£æå¤æ‚: ç”±äº<code>GraphQL</code>æŸ¥è¯¢çš„çµæ´»æ€§ï¼Œè§£æå’Œæ‰§è¡ŒæŸ¥è¯¢å¯èƒ½æ¯”<code>REST</code>æ›´å¤æ‚ï¼Œå°¤å…¶åœ¨å¤§è§„æ¨¡æ•°æ®é›†æˆ–å¤æ‚ä¸šåŠ¡é€»è¾‘ä¸­</li><li>ç¼“å­˜å›°éš¾: ä¸<code>REST</code>å›ºå®š<code>URL</code>ä¸åŒï¼Œ<code>GraphQL</code>æŸ¥è¯¢ä¸æ˜¯é™æ€çš„ï¼Œå› æ­¤æ ‡å‡†<code>HTTP</code>ç¼“å­˜æœºåˆ¶éš¾ä»¥ç›´æ¥åº”ç”¨ï¼Œéœ€è¦é¢å¤–è®¾è®¡ç¼“å­˜ç­–ç•¥</li><li>å­¦ä¹ æ›²çº¿: ğŸ˜…</li></ul></li></ul><hr><h4 id="2-å­—æ®µFields"><a href="#2-å­—æ®µFields" class="headerlink" title="2. å­—æ®µFields"></a>2. å­—æ®µ<code>Fields</code></h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œå­—æ®µ (<code>fields</code>) æ˜¯å®šä¹‰åœ¨ç±»å‹ (<code>type</code>) ä¸Šçš„å±æ€§ï¼Œè¡¨ç¤ºç±»å‹åŒ…å«çš„æ•°æ®å†…å®¹ã€‚å­—æ®µæœ‰ä»¥ä¸‹ç‰¹ç‚¹</p><ul><li>æ¯ä¸ªå­—æ®µéƒ½æœ‰åç§°å’Œè¿”å›ç±»å‹ï¼Œç±»å‹å¯ä»¥æ˜¯æ ‡é‡ï¼ˆå¦‚<code>String</code>ã€<code>Int</code>ï¼‰ã€å¯¹è±¡ã€æšä¸¾ã€åˆ—è¡¨ç­‰</li><li>å­—æ®µå¯ä»¥æ¥å—å‚æ•°ï¼Œç”¨äºä¼ é€’é™„åŠ ä¿¡æ¯æˆ–è¿‡æ»¤æ•°æ®</li></ul><h5 id="å­—æ®µçš„åŸºæœ¬å®šä¹‰"><a href="#å­—æ®µçš„åŸºæœ¬å®šä¹‰" class="headerlink" title="å­—æ®µçš„åŸºæœ¬å®šä¹‰"></a><p style='font-size: 14px'>å­—æ®µçš„åŸºæœ¬å®šä¹‰</p></h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">  user(id: ID!): User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>User</code>ç±»å‹</p><ul><li>åŒ…å«<code>id</code>ã€<code>name</code>å’Œ<code>age</code>ä¸‰ä¸ªå­—æ®µ</li><li>æ¯ä¸ªå­—æ®µå®šä¹‰äº†<code>User</code>ç±»å‹çš„æ•°æ®ç»“æ„</li></ul></li><li><p><code>Query</code>ç±»å‹</p><ul><li>å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢å­—æ®µ<code>user</code>ï¼Œå¯ä»¥æ ¹æ®<code>id</code>è·å–ä¸€ä¸ª<code>User</code></li></ul></li></ul><h5 id="ä»€ä¹ˆæ˜¯Schema"><a href="#ä»€ä¹ˆæ˜¯Schema" class="headerlink" title="ä»€ä¹ˆæ˜¯Schema"></a><p style='font-size: 14px'>ä»€ä¹ˆæ˜¯<code>Schema</code></p></h5><ul><li><code>Schema</code>æ˜¯<code>GraphQL</code>çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç”¨äºæè¿°<code>API</code>çš„ç»“æ„ï¼ŒåŒ…æ‹¬<ul><li>ç±»å‹å®šä¹‰<code>Type</code>: å®šä¹‰<code>API</code>ä¸­çš„ç±»å‹ï¼Œä¾‹å¦‚æ ‡é‡ç±»å‹ (<code>String</code>ã€<code>Int</code>)ã€å¯¹è±¡ç±»å‹ (<code>User</code>)ã€æšä¸¾ç±»å‹ç­‰</li><li>æ ¹ç±»å‹<code>Root Types</code>: åŒ…æ‹¬<code>Query</code>ã€<code>Mutation</code>å’Œ<code>Subscription</code>ï¼Œåˆ†åˆ«å®šä¹‰äº†æŸ¥è¯¢ã€å˜æ›´å’Œè®¢é˜…æ“ä½œ</li></ul></li></ul><h5 id="è§£æå™¨Resolver"><a href="#è§£æå™¨Resolver" class="headerlink" title="è§£æå™¨Resolver"></a><p style='font-size: 14px'>è§£æå™¨<code>Resolver</code></p></h5><ul><li>å­—æ®µé€šå¸¸éœ€è¦è§£æå™¨æ¥å‘Šè¯‰<code>GraphQL</code>å¦‚ä½•è·å–å­—æ®µçš„å€¼ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚æŸä¸ªå­—æ®µæ—¶ï¼Œ<code>GraphQL</code>ä¼šè°ƒç”¨å¯¹åº”çš„è§£æå™¨æ¥è·å–æ•°æ®</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Query</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> userId = args.<span class="property">id</span>; <span class="comment">// ä» args è·å–ç”¨æˆ· ID</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">getUserById</span>(userId); <span class="comment">// è°ƒç”¨æ•°æ®æºå‡½æ•°è·å–ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="å®Œæ•´æŸ¥è¯¢ç¤ºä¾‹"><a href="#å®Œæ•´æŸ¥è¯¢ç¤ºä¾‹" class="headerlink" title="å®Œæ•´æŸ¥è¯¢ç¤ºä¾‹"></a><p style='font-size: 14px'>å®Œæ•´æŸ¥è¯¢ç¤ºä¾‹</p></h5><ul><li>å®¢æˆ·ç«¯å¯ä»¥å‘é€å¦‚ä¸‹æŸ¥è¯¢è¯·æ±‚</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  <span class="title function_">user</span>(<span class="params">id: <span class="string">&quot;1&quot;</span></span>) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰<code>Schema</code>: æè¿°æ•°æ®ç±»å‹å’Œæ“ä½œ</li><li>ç¼–å†™<code>Resolver</code>: å®ç°å…·ä½“çš„æ•°æ®è·å–é€»è¾‘</li><li>å®¢æˆ·ç«¯æŸ¥è¯¢: é€šè¿‡<code>Query</code>è¯·æ±‚æ•°æ®ï¼Œ<code>GraphQL</code>è°ƒç”¨è§£æå™¨è¿”å›ç»“æœ</li></ul><h5 id="Mutationç¤ºä¾‹"><a href="#Mutationç¤ºä¾‹" class="headerlink" title="Mutationç¤ºä¾‹"></a><p style='font-size: 14px'><code>Mutation</code>ç¤ºä¾‹</p></h5><ul><li>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å˜æ›´æ“ä½œ (<code>Mutation</code>) åˆ›å»ºç”¨æˆ·çš„ç¤ºä¾‹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mutation &#123;</span><br><span class="line">  createUser(name: String!, age: Int): User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯¹åº”çš„è§£æå™¨</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Mutation</span>: &#123;</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="title function_">generateUniqueId</span>(),</span><br><span class="line">        <span class="attr">name</span>: args.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">age</span>: args.<span class="property">age</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="title function_">saveUserToDatabase</span>(newUser); <span class="comment">// ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">      <span class="keyword">return</span> newUser;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯è¯·æ±‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  createUser(name: &quot;Alice&quot;, age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="3-å‚æ•°Arguments"><a href="#3-å‚æ•°Arguments" class="headerlink" title="3. å‚æ•°Arguments"></a>3. å‚æ•°<code>Arguments</code></h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œå‚æ•° (<code>Arguments</code>) ç”¨äºå‘å­—æ®µæˆ–æ“ä½œï¼ˆå¦‚æŸ¥è¯¢<code>Query</code>å’Œå˜æ›´<code>Mutation</code>ï¼‰ä¼ é€’è¾“å…¥æ•°æ®ã€‚å‚æ•°å…è®¸å®¢æˆ·ç«¯åœ¨è¯·æ±‚ä¸­æä¾›é¢å¤–ä¿¡æ¯ï¼Œç”¨äºç­›é€‰ã€è¿‡æ»¤æˆ–æŒ‡å®šè¦æ“ä½œçš„æ•°æ®</p><h5 id="å‚æ•°çš„å®šä¹‰"><a href="#å‚æ•°çš„å®šä¹‰" class="headerlink" title="å‚æ•°çš„å®šä¹‰"></a><p style='font-size: 14px'>å‚æ•°çš„å®šä¹‰</p></h5><ul><li>å‚æ•°å¯ä»¥å®šä¹‰åœ¨<code>GraphQL schema</code>ä¸­çš„å­—æ®µä¸Šã€‚å‚æ•°å¯ä»¥æ˜¯<ul><li>å¿…éœ€å‚æ•°: ä½¿ç”¨<code>!</code>ç¬¦å·è¡¨ç¤ºï¼Œå¿…é¡»æä¾›</li><li>å¯é€‰å‚æ•°: æ²¡æœ‰<code>!</code>ç¬¦å·çš„å‚æ•°ï¼Œå¯ä»¥çœç•¥</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">  user(id: ID!): User</span><br><span class="line">  users(age: Int): [User]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>user</code>å­—æ®µæœ‰ä¸€ä¸ªå¿…éœ€çš„<code>id</code>å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æŸ¥è¯¢çš„ç”¨æˆ·</li><li><code>users</code>å­—æ®µæœ‰ä¸€ä¸ªå¯é€‰çš„<code>age</code>å‚æ•°ï¼Œç”¨äºç­›é€‰ç‰¹å®šå¹´é¾„çš„ç”¨æˆ·</li><li>æ–¹æ‹¬å·<code>[ ]</code>è¡¨ç¤ºè¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹</li></ul><h5 id="è§£æå™¨ä¸­çš„å‚æ•°"><a href="#è§£æå™¨ä¸­çš„å‚æ•°" class="headerlink" title="è§£æå™¨ä¸­çš„å‚æ•°"></a><p style='font-size: 14px'>è§£æå™¨ä¸­çš„å‚æ•°</p></h5><ul><li>åœ¨è§£æå™¨ (<code>Resolver</code>) ä¸­ï¼Œå‚æ•°é€šè¿‡<code>args</code>å¯¹è±¡ä¼ é€’ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›å‚æ•°æ¥ç­›é€‰æˆ–æ“ä½œæ•°æ®</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Query</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ ¹æ® args.id æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">getUserById</span>(args.<span class="property">id</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">users</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæä¾›äº† age å‚æ•°ï¼Œè¿‡æ»¤ç”¨æˆ·</span></span><br><span class="line">      <span class="keyword">if</span> (args.<span class="property">age</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">getUsersByAge</span>(args.<span class="property">age</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">getAllUsers</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>args.id</code>å’Œ<code>args.age</code>æ˜¯å®¢æˆ·ç«¯è¯·æ±‚ä¸­ä¼ é€’çš„å‚æ•°</li><li>åœ¨<code>user</code>æŸ¥è¯¢ä¸­ï¼Œé€šè¿‡<code>id</code>è·å–å•ä¸ªç”¨æˆ·</li><li>åœ¨<code>users</code>æŸ¥è¯¢ä¸­ï¼Œæ ¹æ®<code>age</code>ç­›é€‰ç”¨æˆ·åˆ—è¡¨ï¼Œå¦‚æœæœªæä¾›<code>age</code>å‚æ•°ï¼Œåˆ™è¿”å›æ‰€æœ‰ç”¨æˆ·</li></ul><h5 id="å®¢æˆ·ç«¯æŸ¥è¯¢"><a href="#å®¢æˆ·ç«¯æŸ¥è¯¢" class="headerlink" title="å®¢æˆ·ç«¯æŸ¥è¯¢"></a><p style='font-size: 14px'>å®¢æˆ·ç«¯æŸ¥è¯¢</p></h5><ul><li>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡æŸ¥è¯¢è¯·æ±‚ä¼ é€’å‚æ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  users(age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€éƒ¨åˆ†è¯·æ±‚<code>id</code>ä¸º<code>&quot;1&quot;</code>çš„ç”¨æˆ·</li><li>ç¬¬äºŒéƒ¨åˆ†è¯·æ±‚æ‰€æœ‰<code>age</code>ä¸º<code>30</code>çš„ç”¨æˆ·</li></ul><h5 id="å˜æ›´ä¸­çš„å‚æ•°"><a href="#å˜æ›´ä¸­çš„å‚æ•°" class="headerlink" title="å˜æ›´ä¸­çš„å‚æ•°"></a><p style='font-size: 14px'>å˜æ›´ä¸­çš„å‚æ•°</p></h5><p>å‚æ•°åœ¨å˜æ›´æ“ä½œï¼ˆ<code>Mutation</code>ï¼‰ä¸­ç”¨äºæä¾›æ“ä½œæ‰€éœ€çš„è¾“å…¥æ•°æ®ï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·</p><ul><li><code>Schema</code>å®šä¹‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Mutation &#123;</span><br><span class="line">  createUser(name: String!, age: Int): User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è§£æå™¨</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Mutation</span>: &#123;</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="title function_">generateUniqueId</span>(),</span><br><span class="line">        <span class="attr">name</span>: args.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">age</span>: args.<span class="property">age</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="title function_">saveUserToDatabase</span>(newUser); <span class="comment">// å°†ç”¨æˆ·æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">      <span class="keyword">return</span> newUser;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯è¯·æ±‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  createUser(name: &quot;Alice&quot;, age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯ä¼ é€’å‚æ•°<code>name</code>å’Œ<code>age</code>ï¼ŒæœåŠ¡å™¨æ ¹æ®å‚æ•°åˆ›å»ºç”¨æˆ·å¹¶è¿”å›æ–°å¢ç”¨æˆ·çš„æ•°æ®</li></ul><hr><h3 id="GraphQLæ ¸å¿ƒåŠŸèƒ½"><a href="#GraphQLæ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="GraphQLæ ¸å¿ƒåŠŸèƒ½"></a><code>GraphQL</code>æ ¸å¿ƒåŠŸèƒ½</h3><h4 id="4-åˆ«åAliases"><a href="#4-åˆ«åAliases" class="headerlink" title="4. åˆ«åAliases"></a>4. åˆ«å<code>Aliases</code></h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œåˆ«å (<code>Aliases</code>) æ˜¯ä¸€ç§ç”¨äºé‡å‘½åæŸ¥è¯¢ç»“æœä¸­å­—æ®µåç§°çš„åŠŸèƒ½ã€‚å®ƒå…è®¸å®¢æˆ·ç«¯</p><ul><li>é¿å…å‘½åå†²çª: å½“æŸ¥è¯¢ç»“æœåŒ…å«å¤šä¸ªåŒåå­—æ®µæ—¶ï¼Œä½¿ç”¨åˆ«ååŒºåˆ†ä¸åŒçš„å­—æ®µè°ƒç”¨</li><li>è‡ªå®šä¹‰å“åº”æ ¼å¼: é€šè¿‡åˆ«åä¿®æ”¹è¿”å›æ•°æ®ä¸­çš„å­—æ®µåç§°ï¼Œä½¿å…¶æ›´ç¬¦åˆå®¢æˆ·ç«¯çš„éœ€æ±‚</li></ul><h5 id="é¿å…å‘½åå†²çª"><a href="#é¿å…å‘½åå†²çª" class="headerlink" title="é¿å…å‘½åå†²çª"></a><p style='font-size: 14px'>é¿å…å‘½åå†²çª</p></h5><ul><li>å½“éœ€è¦å¤šæ¬¡æŸ¥è¯¢åŒä¸€ä¸ªå­—æ®µçš„ä¸åŒå®ä¾‹æ—¶ï¼Œåˆ«åå¯ä»¥ä¸ºæ¯ä¸ªå­—æ®µè°ƒç”¨æä¾›ä¸åŒçš„åç§°ã€‚ä¾‹å¦‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user1: user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">  user2: user(id: &quot;2&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>user1</code>å’Œ<code>user2</code>æ˜¯åˆ«åï¼Œç”¨äºåŒºåˆ†<code>user</code>å­—æ®µçš„ä¸¤æ¬¡è°ƒç”¨, è¿™é¿å…äº†å› å­—æ®µåç§°é‡å¤è€Œå¯¼è‡´çš„å‘½åå†²çª</li></ul><h5 id="å®šä¹‰å“åº”æ ¼å¼"><a href="#å®šä¹‰å“åº”æ ¼å¼" class="headerlink" title="å®šä¹‰å“åº”æ ¼å¼"></a><p style='font-size: 14px'>å®šä¹‰å“åº”æ ¼å¼</p></h5><ul><li>åˆ«åå¯ä»¥æ”¹å˜è¿”å›æ•°æ®ä¸­çš„å­—æ®µåç§°ï¼Œä½¿å…¶æ›´ç¬¦åˆä¸šåŠ¡éœ€æ±‚æˆ–æé«˜å¯è¯»æ€§</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;user2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">25</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>user1</code>å’Œ<code>user2</code>æˆä¸ºå“åº”æ•°æ®ä¸­çš„å­—æ®µåç§°ï¼Œåˆ†åˆ«åŒ…å«ä¸¤ä¸ªä¸åŒç”¨æˆ·çš„ä¿¡æ¯</li></ul><hr><h4 id="5-ç‰‡æ®µFragments"><a href="#5-ç‰‡æ®µFragments" class="headerlink" title="5. ç‰‡æ®µFragments"></a>5. ç‰‡æ®µ<code>Fragments</code></h4><p>ç‰‡æ®µ (<code>Fragments</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåœ¨å¤šä¸ªæŸ¥è¯¢æˆ–æ“ä½œä¸­é‡ç”¨ä¸€ç»„å­—æ®µé€‰æ‹©ã€‚é€šè¿‡å®šä¹‰ç‰‡æ®µï¼Œå¯ä»¥å‡å°‘å­—æ®µçš„é‡å¤å®šä¹‰ï¼Œæé«˜æŸ¥è¯¢çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</p><h5 id="ç‰‡æ®µçš„è¯­æ³•"><a href="#ç‰‡æ®µçš„è¯­æ³•" class="headerlink" title="ç‰‡æ®µçš„è¯­æ³•"></a><p style='font-size: 14px'>ç‰‡æ®µçš„è¯­æ³•</p></h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fragment FragmentName on TypeName &#123;</span><br><span class="line">  field1</span><br><span class="line">  field2</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>FragmentName</code>: ç‰‡æ®µçš„åç§°ï¼Œç”¨äºåœ¨æŸ¥è¯¢ä¸­å¼•ç”¨ç‰‡æ®µ</li><li><code>TypeName</code>: ç‰‡æ®µé€‚ç”¨çš„ç±»å‹ï¼ŒæŒ‡å®šå­—æ®µæ‰€å±çš„å¯¹è±¡ç±»å‹</li><li><code>field1, field2, ...</code>: ç‰‡æ®µä¸­åŒ…å«çš„å­—æ®µé›†åˆ</li></ul><h5 id="ç‰‡æ®µçš„ä½¿ç”¨ç¤ºä¾‹"><a href="#ç‰‡æ®µçš„ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ç‰‡æ®µçš„ä½¿ç”¨ç¤ºä¾‹"></a><p style='font-size: 14px'>ç‰‡æ®µçš„ä½¿ç”¨ç¤ºä¾‹</p></h5><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª<code>User</code>ç±»å‹ï¼ŒåŒ…å«<code>id</code>ã€<code>name</code>å’Œ<code>age</code>å­—æ®µï¼Œä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å®šä¹‰å’Œä½¿ç”¨ç‰‡æ®µ</p><ul><li>ç‰‡æ®µå®šä¹‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fragment UserFields on User &#123;</span><br><span class="line">  id</span><br><span class="line">  name</span><br><span class="line">  age</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ä¸­ä½¿ç”¨ç‰‡æ®µ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user1: user(id: &quot;1&quot;) &#123;</span><br><span class="line">    ...UserFields</span><br><span class="line">  &#125;</span><br><span class="line">  user2: user(id: &quot;2&quot;) &#123;</span><br><span class="line">    ...UserFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿”å›ç»“æœ</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;user2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">25</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="åµŒå¥—ç‰‡æ®µ"><a href="#åµŒå¥—ç‰‡æ®µ" class="headerlink" title="åµŒå¥—ç‰‡æ®µ"></a><p style='font-size: 14px'>åµŒå¥—ç‰‡æ®µ</p></h5><p>ç‰‡æ®µå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œåœ¨ä¸€ä¸ªç‰‡æ®µä¸­å¼•ç”¨å¦ä¸€ä¸ªç‰‡æ®µï¼Œä»è€Œçµæ´»åœ°ç»„ç»‡å­—æ®µ</p><ul><li>å®šä¹‰åµŒå¥—ç‰‡æ®µ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fragment AddressFields on Address &#123;</span><br><span class="line">  street</span><br><span class="line">  city</span><br><span class="line">  country</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment UserFields on User &#123;</span><br><span class="line">  id</span><br><span class="line">  name</span><br><span class="line">  age</span><br><span class="line">  address &#123;</span><br><span class="line">    ...AddressFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ä¸­ä½¿ç”¨åµŒå¥—ç‰‡æ®µ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    ...UserFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿”å›ç»“æœ</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;street&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123 Main St&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;country&quot;</span><span class="punctuation">:</span> <span class="string">&quot;USA&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="å†…è”ç‰‡æ®µ"><a href="#å†…è”ç‰‡æ®µ" class="headerlink" title="å†…è”ç‰‡æ®µ"></a><p style='font-size: 14px'>å†…è”ç‰‡æ®µ</p></h5><p>å†…è”ç‰‡æ®µ (<code>Inline Fragments</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåœ¨æŸ¥è¯¢ä¸­æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹åŠ¨æ€é€‰æ‹©å­—æ®µã€‚å®ƒä»¬ä¸»è¦ç”¨äºå¤„ç†æ¥å£ (<code>Interface</code>) æˆ–è”åˆç±»å‹ (<code>Union Type</code>)ï¼Œå½“è¿”å›çš„æ•°æ®ç±»å‹ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥æ ¹æ®å…·ä½“ç±»å‹é€‰æ‹©ä¸åŒçš„å­—æ®µ</p><ul><li><p>ä½¿ç”¨åœºæ™¯</p><ul><li>æ¥å£å’Œè”åˆç±»å‹: å¦‚æœæŸ¥è¯¢çš„å­—æ®µè¿”å›çš„æ˜¯æ¥å£æˆ–è”åˆç±»å‹ï¼Œå†…è”ç‰‡æ®µå…è®¸æ ¹æ®æ¯ç§å¯èƒ½çš„ç±»å‹æŒ‡å®šä¸åŒçš„å­—æ®µé€‰æ‹©</li><li>ç±»å‹æ£€æŸ¥: å¯ç”¨äºåœ¨æŸ¥è¯¢ä¸­æ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œæ ¹æ®å®é™…ç±»å‹åŠ¨æ€è¿”å›å­—æ®µ</li></ul></li><li><p>è¯­æ³•: å†…è”ç‰‡æ®µä½¿ç”¨<code>...</code>åè·Ÿéš<code>on TypeName</code>ï¼Œç„¶ååœ¨<code>&#123;&#125;</code>ä¸­æŒ‡å®šè¯¥ç±»å‹çš„å­—æ®µ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">... on TypeName &#123;</span><br><span class="line">  field1</span><br><span class="line">  field2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Schema</code>ç¤ºä¾‹: å‡è®¾æœ‰ä¸€ä¸ª<code>Person</code>æ¥å£ï¼Œä¸¤ä¸ªå®ç°ç±»å‹<code>Employee</code>å’Œ<code>Customer</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Employee implements Person &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  salary: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Customer implements Person &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  purchaseHistory: [String]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">  persons: [Person]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢ç¤ºä¾‹: æ ¹æ®<code>Person</code>çš„å…·ä½“ç±»å‹é€‰æ‹©ä¸åŒçš„å­—æ®µ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  persons &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    ... on Employee &#123;</span><br><span class="line">      salary</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Customer &#123;</span><br><span class="line">      purchaseHistory</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;persons&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;salary&quot;</span><span class="punctuation">:</span> <span class="number">50000</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;purchaseHistory&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;item1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;item2&quot;</span><span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="6-æ“ä½œåç§°"><a href="#6-æ“ä½œåç§°" class="headerlink" title="6. æ“ä½œåç§°"></a>6. æ“ä½œåç§°</h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œæ“ä½œåç§° (<code>Operation Name</code>) æ˜¯ä¸€ä¸ªå¯é€‰çš„æ ‡è¯†ï¼Œç”¨äºæ˜ç¡®æ ‡æ³¨ç‰¹å®šçš„æŸ¥è¯¢ (<code>Query</code>)ã€å˜æ›´ (<code>Mutation</code>) æˆ–è®¢é˜… (<code>Subscription</code>) æ“ä½œçš„åç§°ã€‚å®ƒæœ‰åŠ©äºæé«˜å¯è¯»æ€§ã€è°ƒè¯•æ•ˆç‡ï¼Œä»¥åŠåœ¨æŸäº›å·¥å…·ä¸­å®ç°ç‰¹å®šåŠŸèƒ½</p><h5 id="æ“ä½œåç§°ç‰¹ç‚¹"><a href="#æ“ä½œåç§°ç‰¹ç‚¹" class="headerlink" title="æ“ä½œåç§°ç‰¹ç‚¹"></a><p style='font-size: 14px'>æ“ä½œåç§°ç‰¹ç‚¹</p></h5><ul><li>æ“ä½œåç§°çš„ä½ç½®<ul><li>ç´§è·Ÿåœ¨æ“ä½œç±»å‹ï¼ˆå¦‚<code>query</code>ã€<code>mutation</code>æˆ–<code>subscription</code>ï¼‰ä¹‹å</li></ul></li><li>å‘½åè§„åˆ™<ul><li>åç§°åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿<code>(_)</code></li><li>åç§°ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</li></ul></li><li>ç”¨é€”<ul><li>æä¾›æŸ¥è¯¢çš„ä¸Šä¸‹æ–‡ï¼Œæ˜ç¡®æŸ¥è¯¢æ„å›¾</li><li>åœ¨è°ƒè¯•ã€æ—¥å¿—è®°å½•å’Œå·¥å…·ï¼ˆå¦‚<code>Apollo Client</code>ï¼‰ä¸­ï¼Œç”¨äºè¯†åˆ«ç‰¹å®šçš„æ“ä½œ</li><li>å½“ä¸€ä¸ªè¯·æ±‚ä¸­åŒ…å«å¤šä¸ªæ“ä½œæ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ“ä½œåç§°</li></ul></li></ul><h5 id="æ“ä½œåç§°ç¤ºä¾‹"><a href="#æ“ä½œåç§°ç¤ºä¾‹" class="headerlink" title="æ“ä½œåç§°ç¤ºä¾‹"></a><p style='font-size: 14px'>æ“ä½œåç§°ç¤ºä¾‹</p></h5><ul><li>æŸ¥è¯¢ç¤ºä¾‹: <code>GetUser</code>æ˜¯æ“ä½œåç§°ï¼Œç”¨äºæ ‡è¯†æ­¤æŸ¥è¯¢æ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query GetUser &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å˜æ›´ç¤ºä¾‹: <code>CreateUser</code>æ˜¯æ“ä½œåç§°ï¼Œè¡¨æ˜æ­¤å˜æ›´çš„ç›®çš„ä¸ºåˆ›å»ºç”¨æˆ·</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation CreateUser &#123;</span><br><span class="line">  createUser(name: &quot;Alice&quot;, age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¤šæ“ä½œç¤ºä¾‹: å½“ä¸€ä¸ªè¯·æ±‚ä¸­åŒ…å«å¤šä¸ªæ“ä½œæ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ“ä½œåç§°è¿›è¡ŒåŒºåˆ†</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query GetUser &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mutation UpdateUser &#123;</span><br><span class="line">  updateUser(id: &quot;1&quot;, name: &quot;Alice&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŒ¿åæ“ä½œ: å¦‚æœæ“ä½œåç§°è¢«çœç•¥ï¼Œè¯¥æ“ä½œç§°ä¸ºåŒ¿åæ“ä½œ, ä½†åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ä¸èƒ½åŒ…å«å¤šä¸ªåŒ¿åæ“ä½œï¼Œå› ä¸ºæ²¡æœ‰æ“ä½œåç§°ç”¨äºåŒºåˆ†</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="7-æ“ä½œç±»å‹"><a href="#7-æ“ä½œç±»å‹" class="headerlink" title="7. æ“ä½œç±»å‹"></a>7. æ“ä½œç±»å‹</h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œæ“ä½œç±»å‹ (<code>Operation Type</code>) æ˜¯æŒ‡å®¢æˆ·ç«¯å¯ä»¥åœ¨<code>API</code>è¯·æ±‚ä¸­æ‰§è¡Œçš„ä¸‰ç§æ“ä½œ: æŸ¥è¯¢ (<code>Query</code>)ã€å˜æ›´ (<code>Mutation</code>) å’Œ è®¢é˜… (<code>Subscription</code>)ã€‚æ¯ç§æ“ä½œç±»å‹å¯¹åº”ä¸åŒçš„ç”¨é€”ï¼Œåˆ†åˆ«ç”¨äºè¯»å–æ•°æ®ã€ä¿®æ”¹æ•°æ®å’Œç›‘å¬å®æ—¶æ•°æ®æ›´æ–°</p><h5 id="æ“ä½œç±»å‹ä»‹ç»"><a href="#æ“ä½œç±»å‹ä»‹ç»" class="headerlink" title="æ“ä½œç±»å‹ä»‹ç»"></a><p style='font-size: 14px'>æ“ä½œç±»å‹ä»‹ç»</p></h5><ul><li>æŸ¥è¯¢ <code>Query</code><ul><li>ç”¨é€”: ç”¨äºè¯»å–å’Œè·å–æ•°æ®</li><li>ç‰¹ç‚¹: ä¸ä¼šå¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿä»»ä½•ä¿®æ”¹ï¼Œä»…è¿”å›è¯·æ±‚çš„æ•°æ® (ç±»ä¼¼äº<code>REST API</code>çš„<code>GET</code>è¯·æ±‚)</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- æŸ¥è¯¢ user æ•°æ®ï¼Œæ ¹æ®å‚æ•° id: &quot;1&quot; è·å–ç‰¹å®šç”¨æˆ·çš„ä¿¡æ¯ --&gt;</span><br><span class="line">&lt;!-- è¿”å›çš„å­—æ®µåŒ…æ‹¬ idã€name å’Œ age --&gt;</span><br></pre></td></tr></table></figure><ul><li>å˜æ›´ <code>Mutation</code><ul><li>ç”¨é€”: ç”¨äºä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒåŒ…æ‹¬åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œ</li><li>ç‰¹ç‚¹: ä¸æŸ¥è¯¢ä¸åŒï¼Œå˜æ›´æ“ä½œä¼šæ”¹å˜æœåŠ¡å™¨çš„æ•°æ®çŠ¶æ€ (ç±»ä¼¼äº<code>REST API</code>çš„<code>POST</code>ã€<code>PUT</code>ã€<code>PATCH</code>å’Œ <code>DELETE</code>è¯·æ±‚)</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  createUser(name: &quot;Alice&quot;, age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- è°ƒç”¨ createUser å˜æ›´æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ· --&gt;</span><br><span class="line">&lt;!-- å‚æ•° name å’Œ age æä¾›æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ --&gt;</span><br><span class="line">&lt;!-- è¿”å›ç»“æœåŒ…æ‹¬æ–°ç”¨æˆ·çš„ id å’Œ name --&gt;</span><br></pre></td></tr></table></figure><ul><li>è®¢é˜… <code>Subscription</code><ul><li>ç”¨é€”: ç”¨äºç›‘å¬æœåŠ¡å™¨ä¸Šçš„äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å‘ç”Ÿæ—¶å®æ—¶æ¥æ”¶æ›´æ–°</li><li>ç‰¹ç‚¹: ç”¨äºå®æ—¶æ•°æ®æ›´æ–°åœºæ™¯ï¼Œå¦‚å®æ—¶èŠå¤©ã€è‚¡ç¥¨è¡Œæƒ…ç­‰ã€‚è®¢é˜…æ“ä½œä¼šä¿æŒä¸€ä¸ªæŒä¹…çš„è¿æ¥ï¼ˆé€šå¸¸ä½¿ç”¨<code>WebSocket</code>ï¼‰ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸»åŠ¨æ¨é€æ›´æ–°ç»™å®¢æˆ·ç«¯</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">subscription &#123;</span><br><span class="line">  userAdded &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- è®¢é˜… userAdded äº‹ä»¶ï¼Œå½“æœ‰æ–°ç”¨æˆ·è¢«æ·»åŠ æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ¨é€æ›´æ–°æ•°æ® --&gt;</span><br><span class="line">&lt;!-- è¿”å›ç»“æœåŒ…å«æ–°ç”¨æˆ·çš„ idã€name å’Œ age --&gt;</span><br></pre></td></tr></table></figure><h5 id="ä¸‰ç§æ“ä½œç±»å‹çš„æ¯”è¾ƒ"><a href="#ä¸‰ç§æ“ä½œç±»å‹çš„æ¯”è¾ƒ" class="headerlink" title="ä¸‰ç§æ“ä½œç±»å‹çš„æ¯”è¾ƒ"></a><p style='font-size: 14px'>ä¸‰ç§æ“ä½œç±»å‹çš„æ¯”è¾ƒ</p></h5><table><thead><tr><th><strong>æ“ä½œç±»å‹</strong></th><th><strong>ç”¨é€”</strong></th><th><strong>æ˜¯å¦ä¿®æ”¹æ•°æ®</strong></th><th><strong>ä½¿ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td><strong>æŸ¥è¯¢</strong></td><td>è¯»å–å’Œè·å–æ•°æ®</td><td>å¦</td><td>è·å–ç”¨æˆ·ã€äº§å“åˆ—è¡¨ã€è¯¦æƒ…é¡µæ•°æ®</td></tr><tr><td><strong>å˜æ›´</strong></td><td>ä¿®æ”¹æœåŠ¡å™¨æ•°æ®</td><td>æ˜¯</td><td>åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤èµ„æº</td></tr><tr><td><strong>è®¢é˜…</strong></td><td>ç›‘å¬äº‹ä»¶å¹¶å®æ—¶æ¥æ”¶æ•°æ®æ›´æ–°</td><td>å¦</td><td>å®æ—¶èŠå¤©ã€é€šçŸ¥ã€æ•°æ®æµ</td></tr></tbody></table><hr><h4 id="8-æŸ¥è¯¢Query"><a href="#8-æŸ¥è¯¢Query" class="headerlink" title="8. æŸ¥è¯¢Query"></a>8. æŸ¥è¯¢<code>Query</code></h4><p>æŸ¥è¯¢ (<code>Query</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§æ“ä½œç±»å‹ï¼Œç”¨äºä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚å®ƒä¸ä¼ ç»Ÿ<code>REST API</code>çš„<code>GET</code>è¯·æ±‚ç±»ä¼¼ï¼Œä½†åœ¨çµæ´»æ€§å’Œå¼ºå¤§æ€§æ–¹é¢è¶…è¶Šäº†åè€…</p><h5 id="æŸ¥è¯¢çš„å®šä¹‰"><a href="#æŸ¥è¯¢çš„å®šä¹‰" class="headerlink" title="æŸ¥è¯¢çš„å®šä¹‰"></a><p style='font-size: 14px'>æŸ¥è¯¢çš„å®šä¹‰</p></h5><ul><li>åœ¨<code>GraphQL</code>ä¸­ï¼ŒæŸ¥è¯¢ç±»å‹é€šå¸¸åœ¨<code>schema</code>ä¸­å®šä¹‰ä¸º<code>Query</code>ç±»å‹ã€‚<code>Query</code>ç±»å‹æè¿°äº†æ‰€æœ‰å¯æ‰§è¡Œçš„æŸ¥è¯¢æ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  user(id: ID!): User</span><br><span class="line">  users: [User]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢è§£æå™¨Resolver"><a href="#æŸ¥è¯¢è§£æå™¨Resolver" class="headerlink" title="æŸ¥è¯¢è§£æå™¨Resolver"></a><p style='font-size: 14px'>æŸ¥è¯¢è§£æå™¨<code>Resolver</code></p></h5><ul><li>è§£æå™¨è´Ÿè´£å®ç°å­—æ®µçš„å…·ä½“é€»è¾‘ï¼Œå®šä¹‰å¦‚ä½•è·å–æ•°æ®ã€‚ä»¥ä¸‹æ˜¯æŸ¥è¯¢è§£æå™¨çš„ç¤ºä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Query</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> users.<span class="title function_">find</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">id</span> === args.<span class="property">id</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">users</span>: <span class="function">() =&gt;</span> users,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>user</code>: æ ¹æ®ä¼ å…¥çš„<code>id</code>å‚æ•°ï¼Œä»<code>users</code>åˆ—è¡¨ä¸­æŸ¥æ‰¾å¹¶è¿”å›å¯¹åº”ç”¨æˆ·</li><li><code>users</code>: ç›´æ¥è¿”å›æ‰€æœ‰ç”¨æˆ·</li></ul><h5 id="æŸ¥è¯¢çš„ç‰¹ç‚¹"><a href="#æŸ¥è¯¢çš„ç‰¹ç‚¹" class="headerlink" title="æŸ¥è¯¢çš„ç‰¹ç‚¹"></a><p style='font-size: 14px'>æŸ¥è¯¢çš„ç‰¹ç‚¹</p></h5><ul><li>ç²¾ç¡®çš„æ•°æ®è·å–: å®¢æˆ·ç«¯å¯ä»¥æŒ‡å®šæ‰€éœ€å­—æ®µï¼Œé¿å…ä¼ è¾“å¤šä½™æ•°æ®</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>å•ä¸€è¯·æ±‚: åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­è·å–å¤šä¸ªèµ„æºçš„æ•°æ®</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  users &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;users&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="9-å˜æ›´Mutations"><a href="#9-å˜æ›´Mutations" class="headerlink" title="9. å˜æ›´Mutations"></a>9. å˜æ›´<code>Mutations</code></h4><p>å˜æ›´ (<code>Mutations</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§æ“ä½œç±»å‹ï¼Œä¸“é—¨ç”¨äºå¯¹æœåŠ¡å™¨ç«¯çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œã€‚ä¸æŸ¥è¯¢ (<code>Query</code>) ä»…ç”¨äºè¯»å–æ•°æ®ä¸åŒï¼Œå˜æ›´æ”¯æŒåˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®ã€‚æ¯ä¸ªå˜æ›´æ“ä½œéƒ½å¯ä»¥å®šä¹‰æ‰€éœ€çš„è¾“å…¥å‚æ•°å’Œè¿”å›ç»“æœçš„ç»“æ„</p><h5 id="å˜æ›´çš„å®šä¹‰"><a href="#å˜æ›´çš„å®šä¹‰" class="headerlink" title="å˜æ›´çš„å®šä¹‰"></a><p style='font-size: 14px'>å˜æ›´çš„å®šä¹‰</p></h5><ul><li>åœ¨<code>GraphQL</code>çš„<code>schema</code>ä¸­ï¼Œå˜æ›´ç±»å‹é€šå¸¸å®šä¹‰åœ¨<code>Mutation</code>ç±»å‹ä¸­ï¼Œç”¨æ¥æè¿°æ‰€æœ‰æ”¯æŒçš„æ•°æ®ä¿®æ”¹æ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Mutation &#123;</span><br><span class="line">  createUser(name: String!, age: Int!): User</span><br><span class="line">  updateUser(id: ID!, name: String, age: Int): User</span><br><span class="line">  deleteUser(id: ID!): Boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>createUser</code>: æ¥æ”¶<code>name</code>å’Œ<code>age</code>å‚æ•°ï¼Œè¿”å›æ–°åˆ›å»ºçš„<code>User</code>å¯¹è±¡</li><li><code>updateUser</code>: æ¥æ”¶<code>id</code>ï¼ˆå¿…éœ€ï¼‰ã€<code>name</code>å’Œ<code>age</code>å‚æ•°ï¼Œç”¨äºæ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œè¿”å›æ›´æ–°åçš„<code>User</code></li><li><code>deleteUser</code>: æ¥æ”¶<code>id</code>å‚æ•°ï¼Œç”¨äºåˆ é™¤æŒ‡å®šç”¨æˆ·ï¼Œè¿”å›å¸ƒå°”å€¼è¡¨ç¤ºæ“ä½œæ˜¯å¦æˆåŠŸ</li></ul><h5 id="å˜æ›´çš„è§£æå™¨"><a href="#å˜æ›´çš„è§£æå™¨" class="headerlink" title="å˜æ›´çš„è§£æå™¨"></a><p style='font-size: 14px'>å˜æ›´çš„è§£æå™¨</p></h5><ul><li>è§£æå™¨å®šä¹‰äº†å¦‚ä½•æ‰§è¡Œå˜æ›´æ“ä½œï¼Œé€šå¸¸ä¸æ•°æ®åº“æˆ–å…¶ä»–æ•°æ®å­˜å‚¨äº¤äº’</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="attr">v4</span>: uuidv4 &#125; = <span class="built_in">require</span>(<span class="string">&#x27;uuid&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Mutation</span>: &#123;</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="title function_">uuidv4</span>(), <span class="comment">// ç”Ÿæˆå”¯ä¸€ ID</span></span><br><span class="line">        <span class="attr">name</span>: args.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">age</span>: args.<span class="property">age</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      users.<span class="title function_">push</span>(newUser); <span class="comment">// æ·»åŠ åˆ°ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line">      <span class="keyword">return</span> newUser;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">updateUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> user = users.<span class="title function_">find</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">id</span> === args.<span class="property">id</span>);</span><br><span class="line">      <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;User not found&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (args.<span class="property">name</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        user.<span class="property">name</span> = args.<span class="property">name</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (args.<span class="property">age</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">        user.<span class="property">age</span> = args.<span class="property">age</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> user;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">deleteUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> userIndex = users.<span class="title function_">findIndex</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">id</span> === args.<span class="property">id</span>);</span><br><span class="line">      <span class="keyword">if</span> (userIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;User not found&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      users.<span class="title function_">splice</span>(userIndex, <span class="number">1</span>); <span class="comment">// ä»åˆ—è¡¨ä¸­ç§»é™¤ç”¨æˆ·</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="å˜æ›´çš„ä½¿ç”¨"><a href="#å˜æ›´çš„ä½¿ç”¨" class="headerlink" title="å˜æ›´çš„ä½¿ç”¨"></a><p style='font-size: 14px'>å˜æ›´çš„ä½¿ç”¨</p></h5><p>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æŸ¥è¯¢å‘é€å˜æ›´è¯·æ±‚</p><ul><li>åˆ›å»ºç”¨æˆ·</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  createUser(name: &quot;Alice&quot;, age: 30) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;createUser&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c81e728d-59f2-4d16-9f02-fcad84756789&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>æ›´æ–°ç”¨æˆ·</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  updateUser(id: &quot;1&quot;, name: &quot;Alice Updated&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;updateUser&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alice Updated&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ç”¨æˆ·</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">  deleteUser(id: &quot;2&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;deleteUser&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="10-è®¢é˜…Subscription"><a href="#10-è®¢é˜…Subscription" class="headerlink" title="10. è®¢é˜…Subscription"></a>10. è®¢é˜…<code>Subscription</code></h4><p>è®¢é˜… (<code>Subscription</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§æ“ä½œç±»å‹ï¼Œå…è®¸å®¢æˆ·ç«¯è®¢é˜…æœåŠ¡å™¨ä¸Šçš„äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å‘ç”Ÿæ—¶å®æ—¶æ¥æ”¶æ›´æ–°æ•°æ®ã€‚è¿™ç§æœºåˆ¶ç‰¹åˆ«é€‚åˆå®æ—¶æ›´æ–°åœºæ™¯ï¼Œå¦‚èŠå¤©æ¶ˆæ¯ã€é€šçŸ¥ã€è‚¡ç¥¨ä»·æ ¼ç­‰</p><h5 id="è®¢é˜…çš„å·¥ä½œåŸç†"><a href="#è®¢é˜…çš„å·¥ä½œåŸç†" class="headerlink" title="è®¢é˜…çš„å·¥ä½œåŸç†"></a><p style='font-size: 14px'>è®¢é˜…çš„å·¥ä½œåŸç†</p></h5><ul><li>å»ºç«‹è®¢é˜…è¿æ¥: å®¢æˆ·ç«¯å‘é€è®¢é˜…è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæŒ‡å®šè¦è®¢é˜…çš„äº‹ä»¶æˆ–æ•°æ®</li><li>ä¿æŒè¿æ¥: æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡<code>WebSocket</code>æˆ–å…¶ä»–åŒå‘é€šä¿¡åè®®ç»´æŒæŒä¹…è¿æ¥</li><li>äº‹ä»¶è§¦å‘: å½“æœåŠ¡å™¨ç«¯çš„äº‹ä»¶å‘ç”Ÿå˜åŒ–ï¼ˆå¦‚æ–°å¢æˆ–æ›´æ–°æ•°æ®ï¼‰æ—¶ï¼Œè§¦å‘å¯¹åº”çš„è®¢é˜…é€»è¾‘</li><li>æ•°æ®æ¨é€: æœåŠ¡å™¨å°†æ›´æ–°çš„æ•°æ®é€šè¿‡è¿æ¥æ¨é€åˆ°è®¢é˜…çš„å®¢æˆ·ç«¯</li></ul><h5 id="è®¢é˜…ç¤ºä¾‹"><a href="#è®¢é˜…ç¤ºä¾‹" class="headerlink" title="è®¢é˜…ç¤ºä¾‹"></a><p style='font-size: 14px'>è®¢é˜…ç¤ºä¾‹</p></h5><ul><li><code>Schema</code>å®šä¹‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  age: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Subscription &#123;</span><br><span class="line">  userAdded: User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mutation &#123;</span><br><span class="line">  createUser(name: String!, age: Int!): User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Resolvers</code>å®ç°</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">PubSub</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;graphql-subscriptions&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> pubsub = <span class="keyword">new</span> <span class="title class_">PubSub</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Subscription</span>: &#123;</span><br><span class="line">    <span class="attr">userAdded</span>: &#123;</span><br><span class="line">      <span class="comment">// å®šä¹‰è®¢é˜…å™¨ï¼Œç›‘å¬ USER_ADDED äº‹ä»¶</span></span><br><span class="line">      <span class="attr">subscribe</span>: <span class="function">() =&gt;</span> pubsub.<span class="title function_">asyncIterator</span>([<span class="string">&#x27;USER_ADDED&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title class_">Mutation</span>: &#123;</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">(<span class="params">parent, args, context, info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="title function_">generateUniqueId</span>(),</span><br><span class="line">        <span class="attr">name</span>: args.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">age</span>: args.<span class="property">age</span>,</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¿å­˜ç”¨æˆ·æ•°æ®ï¼ˆæ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œï¼‰</span></span><br><span class="line">      <span class="title function_">saveUserToDatabase</span>(newUser);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è§¦å‘ USER_ADDED äº‹ä»¶</span></span><br><span class="line">      pubsub.<span class="title function_">publish</span>(<span class="string">&#x27;USER_ADDED&#x27;</span>, &#123; <span class="attr">userAdded</span>: newUser &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> newUser;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯è®¢é˜…ç¤ºä¾‹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">subscription &#123;</span><br><span class="line">  userAdded &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å½“æœ‰æ–°ç”¨æˆ·é€šè¿‡<code>createUser</code>å˜æ›´æ“ä½œæ·»åŠ æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè§¦å‘<code>userAdded</code>äº‹ä»¶ï¼Œå®¢æˆ·ç«¯å°†æ¥æ”¶åˆ°ç”¨æˆ·ä¿¡æ¯</li></ul><h5 id="Apollo-Clientè®¢é˜…"><a href="#Apollo-Clientè®¢é˜…" class="headerlink" title="Apollo Clientè®¢é˜…"></a><p style='font-size: 14px'><code>Apollo Client</code>è®¢é˜…</p></h5><ul><li>é…ç½®<code>Apollo Client</code>: åˆ›å»ºä¸€ä¸ªæ”¯æŒæŸ¥è¯¢ã€å˜æ›´å’Œè®¢é˜…çš„å®¢æˆ·ç«¯</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApolloClient</span>, <span class="title class_">InMemoryCache</span>, split &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">WebSocketLink</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client/link/ws&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpLink</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getMainDefinition &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client/utilities&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½® HTTP é“¾æ¥ç”¨äºæŸ¥è¯¢å’Œå˜æ›´</span></span><br><span class="line"><span class="keyword">const</span> httpLink = <span class="keyword">new</span> <span class="title class_">HttpLink</span>(&#123; <span class="attr">uri</span>: <span class="string">&#x27;http://localhost:4000/graphql&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½® WebSocket é“¾æ¥ç”¨äºè®¢é˜…</span></span><br><span class="line"><span class="keyword">const</span> wsLink = <span class="keyword">new</span> <span class="title class_">WebSocketLink</span>(&#123;</span><br><span class="line">  <span class="attr">uri</span>: <span class="string">&#x27;ws://localhost:4000/graphql&#x27;</span>,</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">reconnect</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ split æ ¹æ®æ“ä½œç±»å‹åˆ†åˆ«é€‰æ‹©é“¾æ¥</span></span><br><span class="line"><span class="keyword">const</span> splitLink = <span class="title function_">split</span>(</span><br><span class="line">  <span class="function">(<span class="params">&#123; query &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> definition = <span class="title function_">getMainDefinition</span>(query);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      definition.<span class="property">kind</span> === <span class="string">&#x27;OperationDefinition&#x27;</span> &amp;&amp;</span><br><span class="line">      definition.<span class="property">operation</span> === <span class="string">&#x27;subscription&#x27;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  wsLink,</span><br><span class="line">  httpLink,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Apollo å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> <span class="title class_">ApolloClient</span>(&#123;</span><br><span class="line">  <span class="attr">link</span>: splitLink,</span><br><span class="line">  <span class="attr">cache</span>: <span class="keyword">new</span> <span class="title class_">InMemoryCache</span>(),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>è®¢é˜…æ“ä½œ: ä½¿ç”¨<code>Apollo Client</code>çš„<code>useSubscription Hook</code>å®ç°è®¢é˜…</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; gql, useSubscription &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USER_ADDED_SUBSCRIPTION</span> = gql<span class="string">`</span></span><br><span class="line"><span class="string">  subscription OnUserAdded &#123;</span></span><br><span class="line"><span class="string">    userAdded &#123;</span></span><br><span class="line"><span class="string">      id</span></span><br><span class="line"><span class="string">      name</span></span><br><span class="line"><span class="string">      age</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data, loading, error &#125; = <span class="title function_">useSubscription</span>(<span class="variable constant_">USER_ADDED_SUBSCRIPTION</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (loading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Error: &#123;error.message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>New User Added:<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ID: &#123;data.userAdded.id&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: &#123;data.userAdded.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: &#123;data.userAdded.age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserList</span>;</span><br></pre></td></tr></table></figure><ul><li>æ€»è€Œè¨€ä¹‹ï¼Œ<code>GraphQL</code>çš„<code>Subscription</code>ä¾èµ–äº<code>WebSocket</code>æ¥å®ç°ã€‚<code>WebSocket</code>æä¾›äº†åŒå‘æŒä¹…è¿æ¥çš„èƒ½åŠ›ï¼Œä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿåœ¨äº‹ä»¶å‘ç”Ÿæ—¶ç«‹å³å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œè€Œ<code>Subscription</code>åˆ™å®šä¹‰äº†è¿™äº›äº‹ä»¶å’Œæ•°æ®çš„ç»“æ„ã€‚å› æ­¤ï¼Œ<code>Subscription</code>ä¸æ˜¯æ›¿ä»£<code>WebSocket</code>ï¼Œè€Œæ˜¯åˆ©ç”¨<code>WebSocket</code>æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½å’Œéœ€æ±‚</li></ul><hr><h3 id="GraphQLè¿›é˜¶"><a href="#GraphQLè¿›é˜¶" class="headerlink" title="GraphQLè¿›é˜¶"></a><code>GraphQL</code>è¿›é˜¶</h3><h4 id="11-å˜é‡-Variables"><a href="#11-å˜é‡-Variables" class="headerlink" title="11. å˜é‡ Variables"></a>11. å˜é‡ Variables</h4><p>åœ¨<code>GraphQL</code>ä¸­ï¼Œå˜é‡ (<code>Variables</code>) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåŠ¨æ€ä¼ é€’å‚æ•°åˆ°æŸ¥è¯¢ (<code>Query</code>)ã€å˜æ›´ (<code>Mutation</code>) æˆ–è®¢é˜… (<code>Subscription</code>) ä¸­ã€‚é€šè¿‡ä½¿ç”¨å˜é‡ï¼Œå¯ä»¥ä½¿æŸ¥è¯¢æ›´åŠ çµæ´»ã€å¯é‡ç”¨ï¼Œå¹¶ä¸”é¿å…å°†ç”¨æˆ·è¾“å…¥ç›´æ¥åµŒå…¥åˆ°æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œä»è€Œæå‡å®‰å…¨æ€§å’Œå¯è¯»æ€§</p><h5 id="å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨"><a href="#å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨" class="headerlink" title="å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨"></a><p style='font-size: 14px'>å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨</p></h5><ul><li>æŸ¥è¯¢ä¸­çš„å˜é‡: å˜é‡éœ€è¦åœ¨æŸ¥è¯¢è¯­å¥ä¸­å®šä¹‰ï¼Œå¹¶åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ä¼ å…¥å®é™…çš„å€¼</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query GetUser($id: ID!) &#123;</span><br><span class="line">  user(id: $id) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- $id æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¡¨ç¤ºç”¨æˆ·çš„ ID --&gt;</span><br><span class="line">&lt;!-- å˜é‡çš„ç±»å‹ä¸º ID!ï¼Œ! è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¿…éœ€å­—æ®µ --&gt;</span><br></pre></td></tr></table></figure><ul><li>å˜é‡åœ¨<code>React</code>ä¸­çš„ä½¿ç”¨: ä½¿ç”¨<code>Apollo Client</code>çš„<code>useQuery Hook</code>åŠ¨æ€ä¼ é€’å˜é‡å€¼</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; gql, useQuery &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æŸ¥è¯¢å’Œå˜é‡</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GET_USER</span> = gql<span class="string">`</span></span><br><span class="line"><span class="string">  query GetUser($id: ID!) &#123;</span></span><br><span class="line"><span class="string">    user(id: $id) &#123;</span></span><br><span class="line"><span class="string">      id</span></span><br><span class="line"><span class="string">      name</span></span><br><span class="line"><span class="string">      age</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">User</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; loading, error, data &#125; = <span class="title function_">useQuery</span>(<span class="variable constant_">GET_USER</span>, &#123;</span><br><span class="line">    <span class="attr">variables</span>: &#123; <span class="attr">id</span>: userId &#125;, <span class="comment">// åŠ¨æ€ä¼ é€’å˜é‡å€¼</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (loading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Error: &#123;error.message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>User Details<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ID: &#123;data.user.id&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: &#123;data.user.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: &#123;data.user.age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">User</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜é‡`$id`çš„å€¼ç”±ç»„ä»¶çš„`props`åŠ¨æ€ä¼ é€’</span></span><br><span class="line"><span class="comment">// æŸ¥è¯¢ä½¿ç”¨`useQuery Hook`ï¼Œå¹¶é€šè¿‡`variables`é€‰é¡¹ä¼ é€’å®é™…çš„å˜é‡å€¼</span></span><br></pre></td></tr></table></figure><ul><li>å˜æ›´ä¸­çš„å˜é‡: åœ¨å˜æ›´æ“ä½œä¸­ï¼Œå˜é‡åŒæ ·å¯ä»¥åŠ¨æ€ä¼ é€’å‚æ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mutation CreateUser($name: String!, $age: Int!) &#123;</span><br><span class="line">  createUser(name: $name, age: $age) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Apollo Client</code>ç¤ºä¾‹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; gql, useMutation &#125; <span class="keyword">from</span> <span class="string">&#x27;@apollo/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CREATE_USER</span> = gql<span class="string">`</span></span><br><span class="line"><span class="string">  mutation CreateUser($name: String!, $age: Int!) &#123;</span></span><br><span class="line"><span class="string">    createUser(name: $name, age: $age) &#123;</span></span><br><span class="line"><span class="string">      id</span></span><br><span class="line"><span class="string">      name</span></span><br><span class="line"><span class="string">      age</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CreateUserForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [createUser, &#123; data, loading, error &#125;] = <span class="title function_">useMutation</span>(<span class="variable constant_">CREATE_USER</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleSubmit</span> = <span class="keyword">async</span> (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="keyword">const</span> name = e.<span class="property">target</span>.<span class="property">name</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">const</span> age = <span class="built_in">parseInt</span>(e.<span class="property">target</span>.<span class="property">age</span>.<span class="property">value</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">createUser</span>(&#123; <span class="attr">variables</span>: &#123; name, age &#125; &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (loading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Submitting...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Error: &#123;error.message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Name&quot;</span> <span class="attr">required</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Age&quot;</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">required</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Create User<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;data &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>Created User: &#123;data.createUser.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">CreateUserForm</span>;</span><br></pre></td></tr></table></figure><hr><h4 id="12-æŒ‡ä»¤-Directives"><a href="#12-æŒ‡ä»¤-Directives" class="headerlink" title="12. æŒ‡ä»¤ Directives"></a>12. æŒ‡ä»¤ Directives</h4><p>æŒ‡ä»¤ (<code>Directives</code>) æ˜¯<code>GraphQL</code>ä¸­çš„ä¸€ç§å¼ºå¤§åŠŸèƒ½ï¼Œç”¨äºåŠ¨æ€å½±å“æŸ¥è¯¢ã€å˜æ›´ (<code>Mutation</code>) æˆ–è®¢é˜… (<code>Subscription</code>) çš„æ‰§è¡Œè¡Œä¸ºã€‚æŒ‡ä»¤å¯ä»¥åº”ç”¨äºå­—æ®µã€ç‰‡æ®µç­‰ï¼Œå¸®åŠ©å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨çµæ´»è°ƒæ•´æŸ¥è¯¢ç»“æœçš„ç”Ÿæˆé€»è¾‘ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦åŒ…å«æŸå­—æ®µæˆ–åŠ¨æ€ä¿®æ”¹è¿”å›ç»“æœ</p><h5 id="å†…ç½®æŒ‡ä»¤"><a href="#å†…ç½®æŒ‡ä»¤" class="headerlink" title="å†…ç½®æŒ‡ä»¤"></a><p style='font-size: 14px'>å†…ç½®æŒ‡ä»¤</p></h5><p><code>GraphQL</code>è§„èŒƒä¸­å®šä¹‰äº†ä¸¤ä¸ªå¸¸ç”¨çš„å†…ç½®æŒ‡ä»¤: <code>@include</code>å’Œ<code>@skip</code></p><ul><li><code>@include</code>: æ¡ä»¶åŒ…å«<ul><li>ç”¨äºæ ¹æ®æ¡ä»¶åŠ¨æ€åŒ…å«å­—æ®µæˆ–ç‰‡æ®µ</li><li>æ¥å—ä¸€ä¸ªåä¸º<code>if</code>çš„å‚æ•°ï¼Œè¯¥å‚æ•°çš„å€¼ä¸ºå¸ƒå°”ç±»å‹</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query GetUser($withAge: Boolean!) &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age @include(if: $withAge)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¦‚æœå˜é‡ $withAge ä¸º trueï¼Œåˆ™è¿”å›ç»“æœä¸­åŒ…å« age å­—æ®µ --&gt;</span><br><span class="line">&lt;!-- å¦‚æœ $withAge ä¸º falseï¼Œåˆ™æ’é™¤ age å­—æ®µ --&gt;</span><br></pre></td></tr></table></figure><ul><li><code>@skip</code>: æ¡ä»¶è·³è¿‡<ul><li>ç”¨äºæ ¹æ®æ¡ä»¶è·³è¿‡å­—æ®µæˆ–ç‰‡æ®µ</li><li>åŒæ ·æ¥å—ä¸€ä¸ªåä¸º<code>if</code>çš„å¸ƒå°”å‚æ•°</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query GetUser($withoutAge: Boolean!) &#123;</span><br><span class="line">  user(id: &quot;1&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    age @skip(if: $withoutAge)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¦‚æœå˜é‡ $withoutAge ä¸º trueï¼Œåˆ™è·³è¿‡ age å­—æ®µ --&gt;</span><br><span class="line">&lt;!-- å¦‚æœ $withoutAge ä¸º falseï¼Œåˆ™åŒ…å« age å­—æ®µ --&gt;</span><br></pre></td></tr></table></figure><h5 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a><p style='font-size: 14px'>è‡ªå®šä¹‰æŒ‡ä»¤</p></h5><p>é™¤äº†å†…ç½®æŒ‡ä»¤ï¼Œ<code>GraphQL</code>è¿˜æ”¯æŒè‡ªå®šä¹‰æŒ‡ä»¤ã€‚è¿™äº›æŒ‡ä»¤å¯ä»¥ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®éªŒè¯ã€å­—æ®µæ ¼å¼åŒ–ç­‰ã€‚è‡ªå®šä¹‰æŒ‡ä»¤éœ€è¦åœ¨<code>schema</code>ä¸­å£°æ˜ï¼Œå¹¶æä¾›å¯¹åº”çš„å®ç°é€»è¾‘</p><ul><li>è‡ªå®šä¹‰æŒ‡ä»¤å£°æ˜</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">directive @upper on FIELD_DEFINITION</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">  greeting: String @upper</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- @upper æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œåº”ç”¨åœ¨å­—æ®µå®šä¹‰ä¸Š --&gt;</span><br><span class="line">&lt;!-- on FIELD_DEFINITION æŒ‡å®šäº†è¯¥æŒ‡ä»¤é€‚ç”¨äºå­—æ®µå®šä¹‰ --&gt;</span><br></pre></td></tr></table></figure><ul><li>è‡ªå®šä¹‰æŒ‡ä»¤çš„å®ç°: ä½¿ç”¨<code>graphql-tools</code>åˆ›å»ºä¸€ä¸ª<code>@upper</code>æŒ‡ä»¤ï¼Œå°†å­—ç¬¦ä¸²å­—æ®µçš„è¿”å›å€¼è½¬æ¢ä¸ºå¤§å†™</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">SchemaDirectiveVisitor</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;graphql-tools&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; defaultFieldResolver &#125; = <span class="built_in">require</span>(<span class="string">&#x27;graphql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UpperCaseDirective</span> <span class="keyword">extends</span> <span class="title class_ inherited__">SchemaDirectiveVisitor</span> &#123;</span><br><span class="line">  <span class="title function_">visitFieldDefinition</span>(<span class="params">field</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; resolve = defaultFieldResolver &#125; = field;</span><br><span class="line"></span><br><span class="line">    field.<span class="property">resolve</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> resolve.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> result === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result.<span class="title function_">toUpperCase</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">UpperCaseDirective</span>;</span><br></pre></td></tr></table></figure><ul><li>æ•´åˆæŒ‡ä»¤åˆ°<code>Schema</code>: è‡ªå®šä¹‰æŒ‡ä»¤<code>@upper</code>åº”ç”¨äº<code>greeting</code>å­—æ®µï¼Œè¿”å›çš„å€¼å°†è‡ªåŠ¨è½¬æ¢ä¸ºå¤§å†™</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; gql &#125; = <span class="built_in">require</span>(<span class="string">&#x27;apollo-server&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UpperCaseDirective</span> = <span class="built_in">require</span>(<span class="string">&#x27;./UpperCaseDirective&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> typeDefs = gql<span class="string">`</span></span><br><span class="line"><span class="string">  directive @upper on FIELD_DEFINITION</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  type Query &#123;</span></span><br><span class="line"><span class="string">    greeting: String @upper</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="title class_">Query</span>: &#123;</span><br><span class="line">    <span class="attr">greeting</span>: <span class="function">() =&gt;</span> <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; makeExecutableSchema &#125; = <span class="built_in">require</span>(<span class="string">&#x27;graphql-tools&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> schema = <span class="title function_">makeExecutableSchema</span>(&#123;</span><br><span class="line">  typeDefs,</span><br><span class="line">  resolvers,</span><br><span class="line">  <span class="attr">schemaDirectives</span>: &#123;</span><br><span class="line">    <span class="attr">upper</span>: <span class="title class_">UpperCaseDirective</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = schema;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯ä½¿ç”¨ç¤ºä¾‹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  greeting</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;greeting&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HELLO WORLD&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://chenyitian.gitbooks.io/graphql/content/introduction.html">https://chenyitian.gitbooks.io/graphql/content/introduction.html</a><br>å‚è€ƒç½‘ç«™: <a href="https://www.howtographql.com/basics/0-introduction/">https://www.howtographql.com/basics/0-introduction/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GraphQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GCP Cloud Digital Leader</title>
      <link href="/posts/88b435e5.html"/>
      <url>/posts/88b435e5.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://cloud.google.com/learn/certification/cloud-digital-leader">https://cloud.google.com/learn/certification/cloud-digital-leader</a></p></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h3 id="1-Regions-and-Zones"><a href="#1-Regions-and-Zones" class="headerlink" title="1. Regions and Zones"></a>1. Regions and Zones</h3><h4 id="Regions-and-Zones"><a href="#Regions-and-Zones" class="headerlink" title="Regions and Zones"></a>Regions and Zones</h4><ul><li>Google provide 20+ regions around the world</li><li>High Availability, Low Latency, Global Footprint, Government Regulation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234835.png"></p><ul><li>Each Region has three or more Zones</li><li>Advantage of Zones: Increase availability and fault tolerance</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235111.png"></p><hr><h3 id="2-Compute"><a href="#2-Compute" class="headerlink" title="2. Compute"></a>2. Compute</h3><h4 id="Compute-Engine"><a href="#Compute-Engine" class="headerlink" title="Compute Engine"></a>Compute Engine</h4><ul><li><code>Compute Engine (GCE)</code>: Provision &amp; Manage Virtual Machines</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160151.png"></p><ul><li>Create and manage lifecycle of VM instances</li><li>Load balancing and auto scaling for VM instances</li><li>Can attach storage, manage network connectivity and configuration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160329.png"></p><hr><h4 id="VM-Setup"><a href="#VM-Setup" class="headerlink" title="VM Setup"></a>VM Setup</h4><ul><li><code>Startup Script</code>: For boostrapping<ul><li>Install OS patches or software when an VM instance is launched</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img204439.png"></p><ul><li><code>Instance Templates</code>: Specify VM instance details<ul><li>Used to create VM instances and managed instance groups</li><li>Cannot be updated, need to be deleted and modified</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161137.png"></p><ul><li><code>Custom Image</code>: Prefered way than Startup Script (æ¨èçš„åšæ³•)<ul><li>Can have OS patches and software pre-installed</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161427.png"></p><hr><h4 id="Use-Discount"><a href="#Use-Discount" class="headerlink" title="Use Discount"></a>Use Discount</h4><ul><li><code>Sustained Use Discounts</code><ul><li>Automatic discounts for running VM instances for significant portion of the billing month (æ„æ€å°±æ˜¯åœ¨ä¸€ä¸ªæœˆå†…ä½¿ç”¨è¿™ä¸ª instance åˆ°ä¸€å®šç¨‹åº¦å°±å¯ä»¥è·å¾— discount)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161648.png"></p><ul><li><code>Committed Use Discounts</code><ul><li>1 year or 3 year reservations for workloads with predictable resource needs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img93550.png"></p><hr><h4 id="Preemptible-VM"><a href="#Preemptible-VM" class="headerlink" title="Preemptible VM"></a>Preemptible VM</h4><ul><li><code>Preemptible VM</code>: Short-lived cheaper (up to 80%) compute instances for non time-critical, fault-tolerant workloads (åªèƒ½å­˜åœ¨ 24 å°æ—¶)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img40072.png"></p><hr><h4 id="Spot-VM"><a href="#Spot-VM" class="headerlink" title="Spot VM"></a>Spot VM</h4><ul><li><code>Spot VM</code>: Latest version of preemptible VM (è¿™ä¸ªå°±æ˜¯ Spot Instance)</li><li>Does not have a maximum runtime, æ²¡æœ‰ 24 å°æ—¶é™åˆ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img29088.png"></p><hr><h4 id="Sole-Tenant-Nodes"><a href="#Sole-Tenant-Nodes" class="headerlink" title="Sole Tenant Nodes"></a>Sole Tenant Nodes</h4><ul><li><code>Sole Tenant Nodes</code>: ç±»ä¼¼ Dedicated Host æˆ–è€… Dedicated Instance</li><li>Virtualized instances on hardware dedicated to one customer</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img79164.png"></p><hr><h4 id="Custom-Machine-Types"><a href="#Custom-Machine-Types" class="headerlink" title="Custom Machine Types"></a>Custom Machine Types</h4><ul><li><code>Custom Machine Types</code>: å¯ä»¥è‡ªå®šä¹‰ CPU, memory, GPU</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img34118.png"></p><hr><h4 id="VM-costs"><a href="#VM-costs" class="headerlink" title="VM costs"></a>VM costs</h4><ul><li>2 primary costs in running VMs using GCE</li><li><code>Infrastructure</code> cost (VM) &amp; <code>Licensing</code> cost (OS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img96529.png"></p><hr><h4 id="Instance-Groups"><a href="#Instance-Groups" class="headerlink" title="Instance Groups"></a>Instance Groups</h4><ul><li><code>Instance Group</code>: Group of VM instances managed as a single entity</li><li>Two Types of Instance Groups<ul><li><code>Managed</code>: Identical VMs created using a template</li><li><code>Unmanaged</code>: Different configuration for VMs in same group</li></ul></li><li>Location can be Zonal or Regional (Regional gives higher availability)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img100636.png"></p><hr><h4 id="Managed-Instance-Groups"><a href="#Managed-Instance-Groups" class="headerlink" title="Managed Instance Groups"></a>Managed Instance Groups</h4><ul><li><code>Managed Instance Groups</code>: Maintain certain number of instances<ul><li>Detect application failures using health check (self healing)</li><li>Increase and decrease instances based on load (auto scaling)</li><li>Add load balancer to distribute load</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img101512.png"></p><hr><h4 id="Cloud-Load-balancing"><a href="#Cloud-Load-balancing" class="headerlink" title="Cloud Load balancing"></a>Cloud Load balancing</h4><ul><li><code>Cloud Load balancing</code>: Distribute traffic across VM instances in one or more regions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img211502.png"></p><hr><h4 id="Bare-Metal-Solution"><a href="#Bare-Metal-Solution" class="headerlink" title="Bare Metal Solution"></a>Bare Metal Solution</h4><ul><li><code>Bare Metal Solution</code> allows customers to run specialized workloads on dedicated hardware provided by Google Cloud. It enables <code>leverage of existing software licenses</code> and configurations without any modifications</li></ul><hr><h3 id="3-Managed-Services"><a href="#3-Managed-Services" class="headerlink" title="3. Managed Services"></a>3. Managed Services</h3><h4 id="IAAS-Infrastructure-as-a-Service"><a href="#IAAS-Infrastructure-as-a-Service" class="headerlink" title="IAAS (Infrastructure as a Service)"></a>IAAS (Infrastructure as a Service)</h4><ul><li>Use only infrastructure from cloud provider<ul><li>Using VM to deploy your applications or databases</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img214516.png"></p><hr><h4 id="PAAS-Platform-as-a-Service"><a href="#PAAS-Platform-as-a-Service" class="headerlink" title="PAAS (Platform as a Service)"></a>PAAS (Platform as a Service)</h4><ul><li>Use a platform provided by cloud<ul><li>You are responsible for Configuration and Application code</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img214802.png"></p><hr><h4 id="SAAS-Software-as-a-Service"><a href="#SAAS-Software-as-a-Service" class="headerlink" title="SAAS (Software as a Service)"></a>SAAS (Software as a Service)</h4><ul><li>Centrally hosted software (mostly on the cloyd), minimize the level of management<ul><li>Offered on a subscription basis (pay-as-you-go)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301129.png"></p><hr><h4 id="Containers"><a href="#Containers" class="headerlink" title="Containers"></a>Containers</h4><ul><li>Container ensure we have one way of deploying any microservices</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img228435PM.png"></p><ul><li>Create Docker images for each microservice, include<ul><li>Application Runtime</li><li>Application code and Dependencies</li></ul></li><li>Runs the same way on any infrastructure</li><li>Advantage: light weight (No Guest OS), isolation for containers, cloud neutral</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img228438.png"></p><ul><li>Container Orchestration (Many build upon Kubernetes)<ul><li>Feature: Auto Scaling, Load Balancing, Self Healing, Fast Deployment</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img228442.png"></p><hr><h4 id="Serverless"><a href="#Serverless" class="headerlink" title="Serverless"></a>Serverless</h4><ul><li>Focus on code and the cloud managed service take cares of other stuffs</li><li>Pay for use</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301125.png"></p><hr><h4 id="Shared-Responsibility-Model"><a href="#Shared-Responsibility-Model" class="headerlink" title="Shared Responsibility Model"></a>Shared Responsibility Model</h4><ul><li>Securiet in cloud is a Shared Responsibility</li><li><code>SaaS</code>: Content + Access Policies + Usage</li><li><code>PaaS</code>: SaaS + Deployment + Web Application Security</li><li><code>IaaS</code>: PaaS + Operations + Network Security + Guest OS</li><li>Google Cloud is always responsible for Hardware, Network, Audit Logging etc</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301149.png"></p><hr><h4 id="GCP-Service-Category"><a href="#GCP-Service-Category" class="headerlink" title="GCP Service Category"></a>GCP Service Category</h4><ul><li>Compute Engine: <code>IAAS</code> (provide customize OS)</li><li>Google Kubernetes Engine: <code>CAAS</code></li><li>App Engine: <code>PAAS</code></li><li>Cloud Functions: <code>FAAS</code></li><li>Cloud Run: <code>CAAS</code> (run one container quickly)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301158.png"></p><hr><h3 id="4-Managed-Compute-Service-in-GCP"><a href="#4-Managed-Compute-Service-in-GCP" class="headerlink" title="4. Managed Compute Service in GCP"></a>4. Managed Compute Service in GCP</h3><h4 id="App-Engine"><a href="#App-Engine" class="headerlink" title="App Engine"></a>App Engine</h4><ul><li><code>App Engine</code>: Simplest way to deploy and scale your applications in GCP<ul><li>Automatic load balancing &amp; auto scaling</li><li>Managed platform update &amp; health monitoring</li><li>Application versioning</li><li>Traffic splitting</li></ul></li><li>No usage charges -&gt; pay for resources provisioned</li><li><code>App Engine</code> does <code>not provide</code> the granular control over the virtual machine infrastructure</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301220.png"></p><ul><li><code>Compute Engine</code> vs. <code>App Engine</code><ul><li>Compute Engine is <code>IAAS</code>, App Engine is <code>PAAS</code></li><li>App Engine is <code>serverless</code></li><li>Compute Engine you have more Responsibility than App Engine</li><li>App Engine is lower flexibility</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301222.png"></p><hr><h4 id="App-Engine-Environments"><a href="#App-Engine-Environments" class="headerlink" title="App Engine Environments"></a>App Engine Environments</h4><ul><li><p><code>Standard</code>: Applications run in language specific sandboxes</p><ul><li>Run in language specific sandbox</li><li>Supports scale down to Zero instances</li></ul></li><li><p><code>Flexible</code>: Application instances run within Docker containers</p><ul><li>Support ANY runtime</li><li>CANNOT scale down to Zero instances</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301229.png"></p><hr><h4 id="Google-Kubernetes-Engine-GKE"><a href="#Google-Kubernetes-Engine-GKE" class="headerlink" title="Google Kubernetes Engine (GKE)"></a>Google Kubernetes Engine (GKE)</h4><ul><li><code>Google Kubernetes Engine</code>: Managed Kubernetes service</li><li>Minimize operations with <code>auto-repair</code> (repair failed nodes) and <code>auto-upgrade</code> (use latest version of K8S always) features</li><li>Provides Pod and Cluster Autoscaling</li><li>Two Modes: <code>Standard</code> (You manage) &amp; <code>Autopilot</code> (GKE manage)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301247.png"></p><hr><h4 id="Cloud-Functions-GCF"><a href="#Cloud-Functions-GCF" class="headerlink" title="Cloud Functions (GCF)"></a>Cloud Functions (GCF)</h4><ul><li><code>Cloud Functions</code>: Excute some code when an event happen</li><li>Donâ€™t worry about servers or scaling or availability (only worry about your code)</li><li>Pay only for what you use</li><li><code>Time Bound</code> - Default 1 min and MAX 60 minutes(3600 seconds)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301310.png"></p><hr><h4 id="Cloud-Run-amp-Anthos"><a href="#Cloud-Run-amp-Anthos" class="headerlink" title="Cloud Run &amp; Anthos"></a>Cloud Run &amp; Anthos</h4><ul><li><p><code>Cloud Run</code>: â€œContainer to Production in Secondsâ€</p><ul><li>Fully managed serverless platform for containerized applications</li></ul></li><li><p><code>Cloud Run for Anthos</code>: Deploy your workloads to <code>Anthos</code> clusters running on-premises or on Google Cloud</p></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301319.png"></p><hr><h4 id="Compute-Service-in-GCP"><a href="#Compute-Service-in-GCP" class="headerlink" title="Compute Service in GCP"></a>Compute Service in GCP</h4><ul><li>Create Virtual Machines: <code>Compute Engine</code></li><li>Create a group of similar VMs: <code>Managed Image Group</code></li><li>Distribute load among VMs: <code>Cloud Load Balancing</code></li><li>Simplify setting up web application: <code>App Engine</code></li><li>Easiest way to run one container: <code>Google Cloud Run</code></li><li>Orchestrate containers: <code>Google Kubernetes Engine</code></li><li>Build serverless event driven functions: <code>Cloud Functions</code></li><li>Manage multi-cloud and on-premise Kubernetes clusters: <code>Anthos</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img301324.png"></p><hr><h3 id="5-Storage"><a href="#5-Storage" class="headerlink" title="5. Storage"></a>5. Storage</h3><h4 id="Block-Storage-amp-File-Storage"><a href="#Block-Storage-amp-File-Storage" class="headerlink" title="Block Storage &amp; File Storage"></a>Block Storage &amp; File Storage</h4><p><code>Block Storage</code></p><ul><li>Persistent Disk: Network Block Storage (Zonal or Regional)</li><li>Local SSDs: Local Block Storage</li></ul><p><code>File Storage</code></p><ul><li>Filestore: High performance file storage</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/221039.png"></p><hr><h4 id="Cloud-Storage"><a href="#Cloud-Storage" class="headerlink" title="Cloud Storage"></a>Cloud Storage</h4><ul><li>Most popular, very flexible &amp; inexpensive storage service</li><li>Store large objects using a key-value approach (Object Storage)</li><li>Provides REST API to access and modify objects</li><li>Store all file types - text, binary, backup &amp; archives</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/221435.png"></p><hr><h4 id="Storage-Classes"><a href="#Storage-Classes" class="headerlink" title="Storage Classes"></a>Storage Classes</h4><ul><li>Different kinds of data can be stored in Cloud Storage<ul><li>Can I pay a cheaper price for objects I access less frequently</li></ul></li><li>Storage classes help to optimize your costs based on your access needs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302211.png"></p><ul><li><code>Standard</code>: Frequently used data&#x2F;Short period of time</li><li><code>Nearline storage</code>: Read or modify once a month on average (30 å¤©å†…è¯»å†™ä¸€æ¬¡)</li><li><code>Coldline storage</code>: Read or modify at most once a quarter (90 å¤©å†…è¯»å†™ä¸€æ¬¡)</li><li><code>Archive storage</code>: Less than once a year (365 å¤©å†…è¯»å†™ä¸€æ¬¡)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302214.png"></p><hr><h4 id="Object-Lifecycle-Management"><a href="#Object-Lifecycle-Management" class="headerlink" title="Object Lifecycle Management"></a>Object Lifecycle Management</h4><ul><li><p>How do you save costs by moving files automatically between storage classes</p><ul><li><code>Object Lifecycle Management</code></li></ul></li><li><p>Identify objects using conditions based on</p><ul><li>Age, CreatedBefore, IsLive, MatchesStorageClass, NumberOfNewerVersions</li><li>Set multiple conditions: all conditions must be satisfied for action to happen</li></ul></li><li><p>Two kinds of actions</p><ul><li><code>SetStorageClass actions</code> (change from one storage class to another)</li><li><code>Deletion actions</code> (delete objects)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302224.png"><br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img3022226.png"></p><hr><h4 id="Transferring-data-from-On-Premises-to-Cloud"><a href="#Transferring-data-from-On-Premises-to-Cloud" class="headerlink" title="Transferring data from On-Premises to Cloud"></a>Transferring data from On-Premises to Cloud</h4><ul><li>Most popular data destination is Google Cloud Storage<ul><li><code>Online Transfer</code>: Use gsutil or API to transfer data to Google Cloud Storage (data &lt; 1 TB or from on-premise)</li><li><code>Storage Transfer Service</code>: Recommended for large-scale (petabytes) online data transfers from your private data centers, AWS, Azure, and Google Cloud (data &gt; 1 TB or from another cloud)</li><li><code>Transfer Appliance</code>: Physical transfer using an appliance (data &gt; 20 TB or time &gt; 1 week)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302228.png"></p><hr><h4 id="Storage-in-GCP"><a href="#Storage-in-GCP" class="headerlink" title="Storage in GCP"></a>Storage in GCP</h4><ul><li>A shared space for collaborating on <code>media</code> projects that involve large files: <code>Filestore</code> (File Storage)</li><li>A cost-effective solution to store and serve a large amount of <code>unstructured data</code> (Videos, Music, Files) globally: <code>Cloud Storage</code> (Object Storage)</li><li>Data is automatically managed and transitioned between <code>storage classes</code> to reduce costs: <code>Object Lifecycle Management</code> in Cloud Storage</li><li>A massive, one-time migration of data to the cloud, where online transfer is not feasible: Using <code>Transfer Appliance</code> for large- scale, physical data migration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302235.png"></p><hr><h3 id="6-Database-Fundamentals"><a href="#6-Database-Fundamentals" class="headerlink" title="6. Database Fundamentals"></a>6. Database Fundamentals</h3><h4 id="Cloud-SQL-amp-Cloud-Spanner-OLTP"><a href="#Cloud-SQL-amp-Cloud-Spanner-OLTP" class="headerlink" title="Cloud SQL &amp; Cloud Spanner (OLTP)"></a><code>Cloud SQL</code> &amp; <code>Cloud Spanner</code> (OLTP)</h4><ul><li><p>Applications where large number of users make large number of small transactions</p><ul><li>Popular databases: MySQL, Oracle, SQL Server etc</li></ul></li><li><p>Recommended Google Managed Services</p><ul><li><code>Cloud SQL</code>: Supports PostgreSQL, MySQL, and SQL Server for regional relational databases</li><li><code>Cloud Spanner</code>: <code>Unlimited scale</code> (multiple PBs) and 99.999% availability for global applications with horizontal scaling</li><li>Cloud Spanner replicates data across regions in real time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img30224.png"></p><hr><h4 id="BigQuery-OLAP"><a href="#BigQuery-OLAP" class="headerlink" title="BigQuery (OLAP)"></a><code>BigQuery</code> (OLAP)</h4><ul><li><p>Applications allowing users to analyze petabytes of data</p><ul><li>Reporting applications, Data ware houses, Business intelligence applications, Analytics systems</li></ul></li><li><p>Recommended Google Managed Services</p><ul><li><code>BigQuery</code>: Petabyte-scale distributed data ware house</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302253.png"></p><hr><h4 id="OLAP-vs-OLTP"><a href="#OLAP-vs-OLTP" class="headerlink" title="OLAP vs OLTP"></a><code>OLAP</code> vs <code>OLTP</code></h4><ul><li>OLAP and OLTP use similar data structures, but different in how data is stored</li><li>OLTP databases use <code>row</code> storage<ul><li>Efficient for processing small transactions</li></ul></li><li>OLAP databases use <code>columnar</code> storage<ul><li>High compression, Distribute data, Execute single query across multiple nodes</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302258.png"></p><hr><h4 id="Cloud-Firestore-vs-BigTable-NOSQL"><a href="#Cloud-Firestore-vs-BigTable-NOSQL" class="headerlink" title="Cloud Firestore vs BigTable (NOSQL)"></a><code>Cloud Firestore</code> vs <code>BigTable</code> (NOSQL)</h4><ul><li>NoSQL databases trade-off â€œStrong consistency and SQL featuresâ€ to achieve â€œscalability and high-performanceâ€</li><li>NoSQL &#x3D; not only SQL</li><li>Google Managed Services: <code>Cloud Firestore (Datastore)</code> &amp; <code>BigTable</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302303.png"></p><ul><li><p><code>Cloud Datastore</code> - Managed serverless NoSQL document database</p><ul><li>Designed for <code>transactional</code> mobile and web applications</li></ul></li><li><p><code>BigTable</code> - Managed, scalable NoSQL wide column database</p><ul><li>Recommended for <code>large analytical</code> (&gt; 10 TB) and operational workloads (not serverless)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302305.png"></p><hr><h4 id="Memory-Store-In-memory-Databases"><a href="#Memory-Store-In-memory-Databases" class="headerlink" title="Memory Store (In-memory Databases)"></a><code>Memory Store</code> (In-memory Databases)</h4><ul><li>Retrieving data from memory is much faster than retrieving data from disk (Redis)</li><li>Recommended GCP Managed Service: <code>Memory Store</code></li><li>Use cases: Caching, session management, gaming leader boards, geospatial applications</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302315.png"></p><hr><h4 id="Database-in-GCP"><a href="#Database-in-GCP" class="headerlink" title="Database in GCP"></a>Database in GCP</h4><p>Relational OLTP databases: <code>Cloud SQL</code>, <code>Cloud Spanner</code></p><ul><li>Have <code>predefined schema</code> and very <code>strong transcational</code> capabilities (<code>Row storage</code>)</li></ul><p>Relational OLAP databases: <code>BigQuery</code></p><ul><li><code>Columnar storage</code> with predefined schema. <code>Datawarehouse</code> &amp; <code>BigData</code> workloads</li></ul><p>NoSQL Databases: <code>Cloud Firestore (Datastore)</code>, <code>BigTable</code></p><ul><li>Apps that need quickly evolving structure (<code>schema-less</code>)</li></ul><p>In memory databases&#x2F;caches: <code>Memory Store</code></p><ul><li>Applications needing microsecond responses</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img302320.png"></p><hr><h3 id="7-IAM"><a href="#7-IAM" class="headerlink" title="7. IAM"></a>7. IAM</h3><h4 id="Cloud-IAM"><a href="#Cloud-IAM" class="headerlink" title="Cloud IAM"></a>Cloud IAM</h4><ul><li>How do you identify users in GCP?<ul><li>Identity and Access Management (<code>Cloud IAM</code>) provides this service</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img214925.png"></p><hr><h4 id="IAM-Example"><a href="#IAM-Example" class="headerlink" title="IAM Example"></a>IAM Example</h4><ul><li>Provide access to manage a specific cloud storage bucket to a colleague<ul><li>Choose a Role with right permissions (Ex: Storage Object Admin)</li><li>Create Policy binding member (your friend) with role (permissions)</li></ul></li><li>Roles: A set of permissions (to perform specific actions on specific resources)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img225829.png"></p><hr><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li><code>Roles are Permissions</code>: Perform some set of actions on some set of resources<ul><li><code>Basic Roles</code> - Owner &#x2F; Editor &#x2F; Viewer</li><li><code>Predefined Roles</code> - Fine grained roles predefined and managed by Google</li><li><code>Custom Roles</code> - When predefined roles are NOT sufficient, you can create your own custom roles</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img223152.png"></p><hr><h4 id="IAM-Policy"><a href="#IAM-Policy" class="headerlink" title="IAM Policy"></a>IAM Policy</h4><ul><li>Roles are assigned to users through <code>IAM Policy documents</code></li><li>Represented by a policy object</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img192908.png"><br><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img193029.png"></p><hr><h3 id="8-Encryption"><a href="#8-Encryption" class="headerlink" title="8. Encryption"></a>8. Encryption</h3><h4 id="Data-Lifecycle-States"><a href="#Data-Lifecycle-States" class="headerlink" title="Data Lifecycle States"></a>Data Lifecycle States</h4><ul><li>Data at rest: Stored on a device or a backup</li><li>Data in motion: Being transferred across a network</li><li>Data in use: Active data processed in a non-persistent state</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img213355.png"></p><hr><h4 id="Encryption"><a href="#Encryption" class="headerlink" title="Encryption"></a>Encryption</h4><ul><li><code>Symmetric</code> Key Encryption</li><li>Use the same key for encryption and decryption</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img213908.png"></p><ul><li><code>Asymmetric</code> Key Encryption </li><li>Encrypt data with Public Key and decrypt with Private Key</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img213915.png"></p><hr><h4 id="Cloud-KMS"><a href="#Cloud-KMS" class="headerlink" title="Cloud KMS"></a>Cloud KMS</h4><ul><li><code>Cloud KMS</code>: Create and manage cryptographic keys (symmetric and asymmetric)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img214128.png"></p><hr><h3 id="9-Organizing-GCP-Resources"><a href="#9-Organizing-GCP-Resources" class="headerlink" title="9. Organizing GCP Resources"></a>9. Organizing GCP Resources</h3><h4 id="Resource-Hierarchy"><a href="#Resource-Hierarchy" class="headerlink" title="Resource Hierarchy"></a>Resource Hierarchy</h4><ul><li><code>Organization &gt; Folder &gt; Project &gt; Resources</code></li><li>Resources are created in projects</li><li>A Folder can contain multiple projects</li><li>Organization can contain multiple Folders</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/205244.png"></p><hr><h4 id="Billing-Accounts"><a href="#Billing-Accounts" class="headerlink" title="Billing Accounts"></a>Billing Accounts</h4><ul><li>Billing Account is mandatory for creating resources in a project</li><li>Setup a <code>Cloud Billing Budget</code> to avoid surprises - Alerts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img215548.png"></p><hr><h4 id="IAM-Best-Practices"><a href="#IAM-Best-Practices" class="headerlink" title="IAM Best Practices"></a>IAM Best Practices</h4><ul><li><code>Principle of Least Privilege</code>: Give least possible privilege needed for a role</li><li><code>Separation of Duties</code>: Involve atleast 2 people in sensitive tasks</li><li><code>Constant Monitoring</code>: Review Cloud Audit Logs to audit changes to IAM policies and access to Service Account keys</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img215956.png"></p><hr><h4 id="Public-Private-Hybrid-Cloud"><a href="#Public-Private-Hybrid-Cloud" class="headerlink" title="Public, Private, Hybrid Cloud"></a>Public, Private, Hybrid Cloud</h4><ul><li><code>Public Cloud</code>: You host everything in the cloud<ul><li>DO NOT need a data centerï¼ŒNO Capital Expenditure needed</li><li>Hardware resources are owned by Google Cloud</li></ul></li><li><code>Private Cloud</code>: You host everything in your own data center<ul><li>Needs Capital Expenditure</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img220218.png"></p><ul><li><code>Hybrid Cloud</code>: Combination of both (Public &amp; Private)<ul><li>Use Public Cloud for some workloads and Private cloud for others</li></ul></li><li><code>Multi Cloud</code>: Using Multiple Cloud Platforms with&#x2F;without onï¿¾premise infrastructure<ul><li>Reduces the likelihood of system failure during high-demand events by distributing the load and services across multiple cloud providers</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img220429.png"></p><hr><h4 id="Cloud-VPN"><a href="#Cloud-VPN" class="headerlink" title="Cloud VPN"></a>Cloud VPN</h4><ul><li><code>Cloud VPN</code>: Connect <code>on-premise network to the GCP</code> network<ul><li>Encrypted</li><li>For low bandwidth, Cloud VPN is recommended</li><li>æ³¨æ„, Cloud VPN è¿˜æ˜¯ä¼šç»è¿‡ Public Internet, å¦‚æœä¸æƒ³ç»è¿‡ Public Internet, é€‰æ‹©Partner Interconnect connection</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221047.png"></p><hr><h4 id="Cloud-Interconnect"><a href="#Cloud-Interconnect" class="headerlink" title="Cloud Interconnect"></a>Cloud Interconnect</h4><ul><li><code>Cloud Interconnect</code>: High speed physical connection between on-premise and VPC networks<ul><li>Highly available with high throughput</li><li>Use only for high bandwidth needs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221231.png"></p><hr><h4 id="Private-Google-Access"><a href="#Private-Google-Access" class="headerlink" title="Private Google Access"></a>Private Google Access</h4><ul><li><code>Private Google Access</code> allows instances in your VPC <code>without external IP addresses</code> to reach Google APIs and services using private IP addresses</li></ul><hr><h4 id="Network-Service-Tier"><a href="#Network-Service-Tier" class="headerlink" title="Network Service Tier"></a>Network Service Tier</h4><ul><li><p><code>Standard network service tier</code> can help reduce data traffic costs, designed to be a cost-effective solution for services where performance and latency are less critical</p></li><li><p><code>Premium network service tier</code> provides better performance, reliability, and lower latency by using Googleâ€™s private global network, is more expensive</p></li></ul><hr><h4 id="Organization-Policy-Service"><a href="#Organization-Policy-Service" class="headerlink" title="Organization Policy Service"></a>Organization Policy Service</h4><ul><li>How to enable centralized constraints on all resources created in an Organization?<ul><li>Configure Organization Policy</li></ul></li><li>Needs a Role - Organization Policy Administrator</li><li>IAM focuses on WHO, Organization Policy focuses on WHAT</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img222036.png"></p><hr><h4 id="Corporate-Directory-Federation"><a href="#Corporate-Directory-Federation" class="headerlink" title="Corporate Directory Federation"></a>Corporate Directory Federation</h4><ul><li>Federate Cloud Identity or Google Workspace with your external identity provider (IdP) such as Active Directory or Azure Active Directory</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img222636.png"></p><hr><h4 id="Identity-Aware-Proxy-IAP"><a href="#Identity-Aware-Proxy-IAP" class="headerlink" title="Identity Aware Proxy (IAP)"></a>Identity Aware Proxy (IAP)</h4><ul><li><p><code>Identity-Aware Proxy</code> (IAP) in your Google Cloud VPC network is primarily used for controlling access to your applications running on Google Cloud.</p></li><li><p>It provides secure, identity-based access to applications and VMs without needing to configure a VPN or manage firewall rules.</p></li></ul><hr><h4 id="Identity-Platform"><a href="#Identity-Platform" class="headerlink" title="Identity Platform"></a>Identity Platform</h4><ul><li><code>Identity Platform</code>: Customer identity and access management, handle user authentication, authorization, and user management</li><li>Difference between <code>Cloud IAM</code> and <code>Identity Platform</code><ul><li><code>Cloud IAM</code>: Employees and Partners Authorization</li><li><code>Identity Platform</code>: Customer identity and access management</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img222236.png"></p><hr><h3 id="10-DevOps"><a href="#10-DevOps" class="headerlink" title="10. DevOps"></a>10. DevOps</h3><h4 id="CI-CD-Tools"><a href="#CI-CD-Tools" class="headerlink" title="CI, CD Tools"></a>CI, CD Tools</h4><ul><li><code>Cloud Source Repositories</code>: Fully-featured, private Git repository</li><li><code>Container Registry</code>: Store your Docker images</li><li><code>Cloud Build</code>: Build deployable artifacts from your source code and configuration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/224404.png"></p><hr><h4 id="Cloud-Build"><a href="#Cloud-Build" class="headerlink" title="Cloud Build"></a>Cloud Build</h4><ul><li><p><code>Cloud Build</code> is a fully managed continuous integration and continuous delivery (CI&#x2F;CD) platform on Google Cloud</p></li><li><p>It automates the process of building, testing, and deploying applications</p></li></ul><hr><h4 id="Cloud-Deployment-Manager"><a href="#Cloud-Deployment-Manager" class="headerlink" title="Cloud Deployment Manager"></a>Cloud Deployment Manager</h4><ul><li><p><code>Cloud Deployment Manager</code> is an infrastructure management service that automates the deployment and management of Google Cloud resources using <code>templates</code></p></li><li><p>Cloud Deployment Manager is <code>not</code> designed to automate the build and test processes</p></li></ul><hr><h4 id="Container-Registry-and-Artifact-Registry"><a href="#Container-Registry-and-Artifact-Registry" class="headerlink" title="Container Registry and Artifact Registry"></a>Container Registry and Artifact Registry</h4><ul><li><code>Container Registry</code>: Uses GCS bucket to store images, supports Container images only</li><li><code>Artifact Registry</code>: Evolution of Container Registry, manage BOTH container images and non-container artifacts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/image/224539.png"></p><hr><h4 id="Infrastructure-as-code"><a href="#Infrastructure-as-code" class="headerlink" title="Infrastructure as code"></a>Infrastructure as code</h4><ul><li>Treat infrastructure the same way as application code</li><li>Bring repeatability into your infrastructure</li><li>GCP service: <code>Google Cloud Deployment Manager</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326721.png"></p><hr><h4 id="Cloud-Operations-amp-Insights"><a href="#Cloud-Operations-amp-Insights" class="headerlink" title="Cloud Operations &amp; Insights"></a>Cloud Operations &amp; Insights</h4><ul><li>Monitoring - Metrics and Alerts: <code>Cloud Monitoring</code></li><li>Centralized Logging: <code>Cloud Logging</code></li><li>Audit Logging: <code>Cloud Audit Logs</code></li><li>Real-time exception monitoring: <code>Error Reporting</code></li><li>Live Debugging: <code>Cloud Debugger</code></li><li>Distributed tracing: <code>Cloud Trace</code></li><li>Statistical, low-overhead profiler: <code>Cloud Profiler</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326823.png"></p><hr><h4 id="Site-Reliability-Engineering-SRE"><a href="#Site-Reliability-Engineering-SRE" class="headerlink" title="Site Reliability Engineering (SRE)"></a>Site Reliability Engineering (SRE)</h4><ul><li>SRE teams focus on every aspect of an application<ul><li>Manage by Service Level Objectives (SLOs)</li><li>Minimize Toil</li><li>Move Fast by Reducing Cost of Failure</li><li>Share Ownership with Developers</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326826.png"></p><hr><h4 id="SRE-Key-Metrics"><a href="#SRE-Key-Metrics" class="headerlink" title="SRE - Key Metrics"></a>SRE - Key Metrics</h4><ul><li>Service Level Indicator(SLI): Quantitative measure of an aspect of a service<ul><li>Categories: availability, latency, throughput, durability, correctness (error rate)</li></ul></li><li>Service Level Objective (SLO) - SLI + target<ul><li>99.99% Availability, 99.999999999% Durability</li></ul></li><li>Service Level Agreement (SLA): SLO + consequences (contract)<ul><li>What is the consequence of NOT meeting an SLO? (Defined in a contract)</li></ul></li><li>Error budgets: (100% â€“ SLO)<ul><li>How well is a team meeting their reliability objectives?</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326829.png"></p><hr><h4 id="SRE-Best-Practices"><a href="#SRE-Best-Practices" class="headerlink" title="SRE - Best Practices"></a>SRE - Best Practices</h4><ul><li><code>Handling Excess Loads</code>: Load Shedding, Reduced Quality of Service</li><li><code>Avoiding Cascading Failures</code>: Plan to avoid thrashing</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326832.png"></p><ul><li><code>Penetration Testing</code> (Ethical Hacking)</li><li><code>Load Testing</code> (JMeter, LoadRunner, Locust, Gatling etc)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326333.png"></p><ul><li><code>Resilience Testing</code> - â€œHow does an application behaves under stress?â€</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img326834.png"></p><hr><h4 id="Single-Sign-On-SSO"><a href="#Single-Sign-On-SSO" class="headerlink" title="Single Sign-On (SSO)"></a>Single Sign-On (SSO)</h4><ul><li>With SSO in place, when an employeeâ€™s Active Directory account is terminated, they will no longer be able to authenticate and, consequently, will lose access to Google Workspace tools automatically</li></ul><hr><h4 id="Google-Cloud-Directory-Sync"><a href="#Google-Cloud-Directory-Sync" class="headerlink" title="Google Cloud Directory Sync"></a>Google Cloud Directory Sync</h4><ul><li><code>Google Cloud Directory Sync</code> (GCDS) is specifically designed to synchronize your existing <code>LDAP</code> directory with Google Cloud</li></ul><hr><h3 id="11-Pub-x2F-Sub"><a href="#11-Pub-x2F-Sub" class="headerlink" title="11. Pub&#x2F;Sub"></a>11. Pub&#x2F;Sub</h3><ul><li><code>Synchronous</code> Communication: Applications makes synchronous calls to the logging service (What if the logging service goes down?)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329122.png"></p><ul><li><code>Asynchronous</code> Communication: Create a topic and have applications put log messages on the topic. Logging service picks them up for processing when ready</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329123.png"></p><hr><h4 id="Pub-x2F-Sub"><a href="#Pub-x2F-Sub" class="headerlink" title="Pub&#x2F;Sub"></a>Pub&#x2F;Sub</h4><ul><li><code>Pub/Sub</code>: Reliable, scalable, fully-managed <code>asynchronous messaging service</code></li><li>Backbone for Highly Available and Highly Scalable Solutions</li><li>Event ingestion and delivery for streaming analytics pipelines</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329125.png"></p><ul><li><code>Publisher</code> - Sender of a message</li><li><code>Subscriber</code> - Receiver of the message<ul><li><code>Pull</code> - Subscriber pulls messages when ready</li><li><code>Push</code> - Messages are sent to subscribers</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329127.png"></p><hr><h4 id="Cloud-Dataflow"><a href="#Cloud-Dataflow" class="headerlink" title="Cloud Dataflow"></a>Cloud Dataflow</h4><ul><li><code>Cloud Dataflow</code> is a difficult service to describe<ul><li>Pub&#x2F;Sub &gt; Dataflow &gt; BigQuery (Streaming)</li><li>Pub&#x2F;Sub &gt; Dataflow &gt; Cloud Storage (Streaming - files)</li><li>Cloud Storage &gt; Dataflow &gt; Bigtable&#x2F;CloudSpanner&#x2F;Datastore&#x2F;BigQuery (Batch - Load data into databases)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329132.png"></p><hr><h3 id="12-Data-Architectures-in-GCP"><a href="#12-Data-Architectures-in-GCP" class="headerlink" title="12. Data Architectures in GCP"></a>12. Data Architectures in GCP</h3><h4 id="Loose-Coupling-with-Pub-x2F-Sub"><a href="#Loose-Coupling-with-Pub-x2F-Sub" class="headerlink" title="Loose Coupling with Pub&#x2F;Sub"></a>Loose Coupling with Pub&#x2F;Sub</h4><ul><li>Whenever you want to decouple a publisher from a subscriber, consider <code>Pub/Sub</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329137.png"></p><hr><h4 id="Date-Formats"><a href="#Date-Formats" class="headerlink" title="Date Formats"></a>Date Formats</h4><ul><li>Structured: Tables, Rows and Columns (Relational)<ul><li><code>Cloud SQL</code>, <code>Cloud Spanner</code>, <code>BigQuery</code></li></ul></li><li>Semi Structured: Flexible Schema<ul><li><code>Cloud Firestore/Datastore</code></li></ul></li><li>Unstructured: Video, Audio, Image, Text, Binary files<ul><li><code>Cloud Storage</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329124.png"></p><hr><h4 id="Cloud-Dataproc"><a href="#Cloud-Dataproc" class="headerlink" title="Cloud Dataproc"></a>Cloud Dataproc</h4><ul><li><code>Cloud Dataproc</code>: Managed Spark and Hadoop service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329211.png"></p><hr><h4 id="Big-Data-Flow-Batch-Ingest"><a href="#Big-Data-Flow-Batch-Ingest" class="headerlink" title="Big Data Flow - Batch Ingest"></a>Big Data Flow - Batch Ingest</h4><ul><li>Use extract, transform, and load (ETL) to load data into BigQuery</li><li><code>Dataprep</code>: Clean and prepare data</li><li><code>Dataflow</code>: Create data pipelines (and ETL)</li><li><code>Dataproc</code>: Complex processing using Spark and Hadoop</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329213.png"></p><hr><h4 id="Steaming-Data"><a href="#Steaming-Data" class="headerlink" title="Steaming Data"></a>Steaming Data</h4><ul><li><code>Pub/Sub</code>: Receive messages</li><li><code>Dataflow</code>: Analyze, aggregate andfilter data</li><li>For pre-defined time series analytics, storing data in <code>Bigtable</code></li><li>For ad hoc complex analysis, prefer <code>BigQuery</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329215.png"></p><hr><h4 id="IOT"><a href="#IOT" class="headerlink" title="IOT"></a>IOT</h4><ul><li><code>IoT Core</code>: Manage IoT (registration, authentication, and authorization) devices</li><li><code>Pub/Sub</code>: Durable message ingestion service (allows buffering)</li><li><code>Dataflow</code>: Processing data (ETL &amp; more..)</li><li>Data Storage and Analytics:<ul><li>Make IOT data available to mobile or web apps &#x3D;&gt; <code>Datastore</code></li><li>Execute pre-defined time series queries &#x3D;&gt; <code>Bigtable</code></li><li>More complex or ad hoc analytics&#x2F;analysis &#x3D;&gt; <code>BigQuery</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329216.png"></p><hr><h4 id="Data-Lake"><a href="#Data-Lake" class="headerlink" title="Data Lake"></a>Data Lake</h4><ul><li>Single platform with combination of solutions for data storage, data management and data analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329228.png"></p><ul><li>Storage<ul><li><code>Cloud Storage</code> (low cost + durability + performance + flexible processing)</li></ul></li><li>Data Ingestion<ul><li>Streaming data - <code>Cloud Pub/Sub</code> + <code>Cloud Dataflow</code></li><li>Batch - Transfer Service + Transfer Appliance + gsutil</li></ul></li><li>Processing and analytics<ul><li>Run in-place querying using SQL queries using <code>BigQuery</code> or (Hive on Dataproc)</li></ul></li><li>Data Mining and Exploration<ul><li>Clean and transform raw data with <code>Dataprep</code></li><li>Use <code>Cloud Datalab</code> (data science libraries such as TensorFlow and NumPy) for exploring</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329220.png"></p><hr><h4 id="Data-Governance"><a href="#Data-Governance" class="headerlink" title="Data Governance"></a>Data Governance</h4><ul><li>Bad data: Bad data leads to poor business decisions</li><li>Data leaks: Data leaks can lead to a reputation loss</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329222.png"></p><hr><h4 id="Dataplex"><a href="#Dataplex" class="headerlink" title="Dataplex"></a>Dataplex</h4><ul><li><code>Dataplex</code> is a Data Mesh: Unified dashboard with visibility into all data assets (data lakes, data warehouses, ..)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329224.png"></p><hr><h3 id="13-API-Management-in-GCP"><a href="#13-API-Management-in-GCP" class="headerlink" title="13. API Management in GCP"></a>13. API Management in GCP</h3><h4 id="API-Management"><a href="#API-Management" class="headerlink" title="API Management"></a>API Management</h4><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329226.png"></p><ul><li><code>Apigee API Management</code>: Comprehensive API management platform</li><li><code>Cloud Endpoints</code>: Basic API Management for Google Cloud backends</li><li><code>API gateway</code>: Newer, Simpler API Management for Google Cloud backends</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329229.png"></p><hr><h3 id="14-Trust-and-Security-with-GCP"><a href="#14-Trust-and-Security-with-GCP" class="headerlink" title="14. Trust and Security with GCP"></a>14. Trust and Security with GCP</h3><h4 id="Cloud-Security"><a href="#Cloud-Security" class="headerlink" title="Cloud Security"></a>Cloud Security</h4><ul><li><code>Control</code>: Decide who gets access</li><li><code>Compliance</code>: Follows legal rules</li><li><code>Confidentiality</code>: Keeps information secret</li><li><code>Integrity</code>: Ensures data stays accurate</li><li><code>Availability</code>: Ensure apps &amp; data are available always</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329315.png"></p><hr><h4 id="Enhanced-Security-with-2SV"><a href="#Enhanced-Security-with-2SV" class="headerlink" title="Enhanced Security with 2SV"></a>Enhanced Security with 2SV</h4><ul><li>2 Step Verification (2SV): Add a 2nd step to verify user</li><li>Make 2SV Mandatory: For Google Cloud accounts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329317.png"></p><hr><h4 id="Security-Command-Center"><a href="#Security-Command-Center" class="headerlink" title="Security Command Center"></a>Security Command Center</h4><ul><li><p>Â·Security Command CenterÂ· (SCC) in Google Cloud Platform (GCP) is designed to provide a comprehensive view of the security state of your GCP resources, including virtual machines</p></li><li><p>It enables you to detect and respond to threats, ensures <code>compliance</code> by reporting on security findings, and offers insights into the security status of your resources across multiple projects</p></li></ul><hr><h4 id="Google-Cloud-Armor"><a href="#Google-Cloud-Armor" class="headerlink" title="Google Cloud Armor"></a>Google Cloud Armor</h4><ul><li><code>Google Cloud Armor</code> is a service designed to <code>protect web applications from DDoS</code> attacks and other web-based threats. It offers features like IP blacklisting&#x2F;whitelisting, rate limiting, and application-layer traffic monitoring</li></ul><hr><h4 id="Cloud-Data-Loss-Prevention"><a href="#Cloud-Data-Loss-Prevention" class="headerlink" title="Cloud Data Loss Prevention"></a>Cloud Data Loss Prevention</h4><ul><li><code>Cloud Data Loss Prevention</code> (DLP) is specifically designed to identify, classify, and help protect sensitive information, including <code>PII</code></li></ul><hr><h4 id="GCP-Security-Offerings"><a href="#GCP-Security-Offerings" class="headerlink" title="GCP Security Offerings"></a>GCP Security Offerings</h4><ul><li><code>KMS</code>: Create and manage cryptographic keys (symmetric and asymmetric). Control their use in your applications and GCP Services</li><li><code>Secret Manager</code>: Manage your database passwords, your API keys securely</li><li><code>Cloud Data Loss Prevention</code>: Discover, classify, &amp; mask sensitive data</li><li><code>Cloud Armor</code>: Protect your production apps (at run time) from denial of service and common web attacks</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329326.png"></p><ul><li><code>Web Security Scanner</code>: Identify vulnerabilities by running security tests</li><li><code>Binary Authorization</code>: Ensure that only trusted container images are deployed to Google Cloud</li><li><code>Container Threat Detection</code>: Detects container runtime attacks</li><li><code>Security Command Center</code>: Get a consolidated picture of security in Google Cloud</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329328.png"></p><hr><h4 id="Zero-Trust-Security-Model"><a href="#Zero-Trust-Security-Model" class="headerlink" title="Zero Trust Security Model"></a>Zero Trust Security Model</h4><ul><li>Zero Trust - â€œNo person or device should be trusted by default, even if they are already inside an organizationâ€™s networkâ€</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329329.png"></p><hr><h3 id="15-ML-in-GCP"><a href="#15-ML-in-GCP" class="headerlink" title="15. ML in GCP"></a>15. ML in GCP</h3><h4 id="ML-in-GCP-Pre-Trained"><a href="#ML-in-GCP-Pre-Trained" class="headerlink" title="ML in GCP - Pre-Trained"></a>ML in GCP - Pre-Trained</h4><ul><li><code>Speech-to-Text API</code>: convert speech into text</li><li><code>Text-to-Speech API</code>: convert text into speech</li><li><code>Translation API</code>: Translate texts into more than one hundred languages</li><li><code>Natural Language API</code>: Derive insights from unstructured text</li><li><code>Cloud Vision API</code>: Recommended for generic usecases</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329333.png"></p><hr><h4 id="ML-in-GCP-Custom-Models"><a href="#ML-in-GCP-Custom-Models" class="headerlink" title="ML in GCP - Custom Models"></a>ML in GCP - Custom Models</h4><ul><li><code>AutoML</code>: Build custom models with minimum ML expertise and effort<ul><li><code>AutoML Vision</code>: Build custom models based on Images</li><li><code>AutoML Video Intelligence</code>: Add labels to Video</li><li><code>AutoML Tables</code>: Automatically build models on structured data</li></ul></li><li><code>BigQuery ML</code>: Build ML models using Queries</li><li><code>Vertex AI</code>: Build &amp; deploy ML models faster</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329325.png"></p><ul><li>AutoML Vision is ideal for scenarios where there is a <code>need to create specialized image recognition models</code> tailored to specific use cases</li></ul><hr><h3 id="16-Cloud-Native"><a href="#16-Cloud-Native" class="headerlink" title="16. Cloud Native"></a>16. Cloud Native</h3><h4 id="Cloud-Native-Pillars"><a href="#Cloud-Native-Pillars" class="headerlink" title="Cloud Native Pillars"></a>Cloud Native Pillars</h4><ul><li><code>Microservices</code>: Fix issues and deliver new features quickly</li><li><code>Containers</code>: Portable &amp; Lightweight</li><li><code>Container Orchestration</code>: Kubernetes (GKE) - Auto Scaling, Load Balancing, Self Healing, Zero Downtime Deployment etc</li><li><code>DevOps</code> (Dev + Ops, CI&#x2F;CD, IaC): Increased automation of processes</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329342.png"></p><hr><h4 id="Container-Compute-Examples"><a href="#Container-Compute-Examples" class="headerlink" title="Container Compute Examples"></a>Container Compute Examples</h4><ul><li><code>Cloud Run</code>: Develop and deploy highly scalable containerized applications</li><li><code>Google Kubernetes Engine</code>: Orchestrate containerized microservices on Kubernetes</li><li><code>Anthos</code>: Manage Kubernetes Clusters in Multi-cloud and On-premises</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329344.png"></p><hr><h4 id="Serverless-Examples"><a href="#Serverless-Examples" class="headerlink" title="Serverless Examples"></a>Serverless Examples</h4><ul><li><code>Cloud Functions</code>: Serverless compute for event-driven apps</li><li><code>Cloud Run</code>: Run isolated containers, without orchestration (Serverless)</li><li><code>Cloud Firestore</code>: Apps needing quickly evolving structure (schema-less)</li><li><code>Cloud Dataflow</code>: Serverless Stream and Batch processing using Apache Beam </li><li><code>Cloud Pub/Sub</code>: Realtime Messaging in the cloud. Pay for number of messages</li><li><code>BigQuery</code>: Relational OLAP, Data warehousing &amp; BigData workloads</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329346.png"></p><hr><h3 id="17-Cost-Management-in-GCP"><a href="#17-Cost-Management-in-GCP" class="headerlink" title="17. Cost Management in GCP"></a>17. Cost Management in GCP</h3><h4 id="CapEx-vs-OpEx"><a href="#CapEx-vs-OpEx" class="headerlink" title="CapEx vs OpEx"></a>CapEx vs OpEx</h4><ul><li>Capital Expenditure (<code>CapEx</code>): Money spent to buy infrastructure</li><li>Operational Expenditure (<code>OpEx</code>): Money spent to use a service or a product</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329400.png"></p><hr><h4 id="Pricing-Calculator"><a href="#Pricing-Calculator" class="headerlink" title="Pricing Calculator"></a>Pricing Calculator</h4><ul><li><code>Pricing Calculator</code>: Estimating the cost of a Google Cloud solution</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329402.png"></p><hr><h4 id="GCP-Cost-Management"><a href="#GCP-Cost-Management" class="headerlink" title="GCP Cost Management"></a>GCP Cost Management</h4><ul><li><code>Cost Management</code>: Tools for monitoring, controlling, and optimizing your costs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img329404.png"></p><hr><h4 id="Billing-dashboards"><a href="#Billing-dashboards" class="headerlink" title="Billing dashboards"></a>Billing dashboards</h4><ul><li>Billing dashboards in Google Cloud provide a comprehensive overview of cloud spending</li></ul><hr><h4 id="Resource-labels"><a href="#Resource-labels" class="headerlink" title="Resource labels"></a>Resource labels</h4><ul><li>Resource labels enable users to tag cloud resources with key-value pairs, which can then be used to filter and organize cost data</li></ul><hr><h3 id="18-GCP-review"><a href="#18-GCP-review" class="headerlink" title="18. GCP review"></a>18. GCP review</h3><h4 id="Basic-Compute-Services"><a href="#Basic-Compute-Services" class="headerlink" title="Basic Compute Services"></a>Basic Compute Services</h4><ul><li><code>Compute Engine</code>: Use VMs when you need control over OS OR you want to run custom software</li><li><code>Preemptible VMs</code>: Short lived VMs for non time-critical workloads</li><li><code>Sole-tenant Nodes </code>: Dedicated physical servers</li><li><code>VMware Engine</code>: Run VMware workloads in Google Cloud</li><li><code>Managed Instance Groups</code>: Create multiple Compute Engine VMs</li><li><code>Cloud Load Balancing</code>: Balance load to multiple instances of an application or a service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img182332.png"></p><hr><h4 id="Firebase"><a href="#Firebase" class="headerlink" title="Firebase"></a>Firebase</h4><ul><li><code>Firebase</code> is a comprehensive cloud-based platform ideal for building web and mobile applications</li><li>Firebase is designed to handle dynamic content and user interactions seamlessly, providing an integrated backend-as-a-service (BaaS) solution that reduces the need for managing servers and infrastructure</li></ul><hr><h4 id="Managed-Compute-Services"><a href="#Managed-Compute-Services" class="headerlink" title="Managed Compute Services"></a>Managed Compute Services</h4><ul><li><code>App Engine</code>: PaaS. Deploy web apps and RESTful APIs quickly</li><li><code>Cloud Run</code>: Run isolated containers, without orchestration (Serverless)</li><li><code>Kubernetes Engine</code>: Managed Kubernetes Service. Provides container orchestration</li><li><code>Cloud Functions</code>: Serverless compute for event-driven apps</li><li><code>Anthos</code>: Manage Kubernetes Clusters in Multi-cloud and On-premises</li><li><code>Firebase</code>: Googleâ€™s mobile platform. Build Apps for iOS, Android, the web, C++, and Unity</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img182553.png"></p><hr><h4 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h4><ul><li><code>Persistent Disk</code>: Block Storage for your VMs</li><li><code>Local SSD</code>: Local ephemeral block storage for your VMs</li><li><code>Cloud Filestore</code>: File shares in the cloud</li><li><code>Cloud Storage</code>: Object storage in the cloud</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img182703.png"></p><hr><h4 id="Databases"><a href="#Databases" class="headerlink" title="Databases"></a>Databases</h4><ul><li><code>Cloud SQL</code>: Regional Relational OLTP database (MySQL, PostgreSQL, SQL server)</li><li><code>Cloud Spanner</code>: Global Relational OLTP database. Unlimited scale and 99.999% availability for global applications with horizontal scaling</li><li><code>Cloud Firestore</code>: Apps needing quickly evolving structure (schema-less)</li><li><code>Cloud BigTable</code>: Large databases(10 TB - PBs). Streaming (IOT), analytical &amp; operational workloads. NOT serverless</li><li><code>Cloud Memorystore</code>: In memory databases&#x2F;cache. Applications needing microsecond responses</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img182848.png"></p><hr><h4 id="Streams-Analytics-Big-Data"><a href="#Streams-Analytics-Big-Data" class="headerlink" title="Streams, Analytics, Big Data"></a>Streams, Analytics, Big Data</h4><ul><li><code>Cloud Pub/Sub</code>: Realtime Messaging in the cloud</li><li><code>BigQuery</code>: Relational OLAP databases. Datawarehousing &amp; BigData workloads</li><li><code>BigQuery ML</code>: Simplified Machine Learning using data in BigQuery</li><li><code>Cloud Dataflow</code>: Serverless Stream and Batch processing using Apache Beam (open-source)</li><li><code>Cloud Dataproc</code>: Managed Service for Spark and Hadoop. Not serverless</li><li><code>Cloud Data Fusion</code>: Visually manage your data pipelines</li><li><code>Data Studio</code>: Visualize data</li><li><code>Looker</code>: Enterprise Business Intelligence</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img185343.png"></p><hr><h4 id="Migration"><a href="#Migration" class="headerlink" title="Migration"></a>Migration</h4><ul><li><code>Database Migration Service</code>: Migrate to Cloud SQL</li><li><code>Storage Transfer Service</code>: Online Transfer to Cloud Storage</li><li><code>Transfer Appliance</code>: Physical transfer using an appliance</li><li><code>Migrate for Compute Engine</code>: Migrate VMs and VM storage to GCE</li><li><code>Migrate for Anthos</code>: Migrate VMs to GKE containers</li><li><code>BigQuery Data Transfer Service</code>: Migrate your analytics data</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img185525.png"></p>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS å­¦ä¹ ç¬”è®°</title>
      <link href="/posts/eb0c992c.html"/>
      <url>/posts/eb0c992c.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‚è€ƒæ–‡ç« : <a href="https://juejin.cn/post/6941206439624966152">https://juejin.cn/post/6941206439624966152</a></p></blockquote><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><h3 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a><code>CSS</code>é€‰æ‹©å™¨</h3><h4 id="åŸºç¡€é€‰æ‹©å™¨"><a href="#åŸºç¡€é€‰æ‹©å™¨" class="headerlink" title="åŸºç¡€é€‰æ‹©å™¨"></a>åŸºç¡€é€‰æ‹©å™¨</h4><ul><li>æ ‡ç­¾é€‰æ‹©å™¨: <code>h1</code></li><li>ç±»é€‰æ‹©å™¨: <code>.checked</code></li><li><code>ID</code>é€‰æ‹©å™¨: <code>#picker</code></li><li>é€šé…é€‰æ‹©å™¨: <code>*</code></li></ul><h4 id="å±æ€§é€‰æ‹©å™¨"><a href="#å±æ€§é€‰æ‹©å™¨" class="headerlink" title="å±æ€§é€‰æ‹©å™¨"></a>å±æ€§é€‰æ‹©å™¨</h4><blockquote><p>å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« : <a href="https://juejin.cn/post/6844903870171201549">https://juejin.cn/post/6844903870171201549</a></p></blockquote><ul><li><code>[attr]</code>: é€‰æ‹©åŒ…å«æŸä¸ªå±æ€§çš„æ‰€æœ‰å…ƒç´ ï¼Œè€Œä¸å…³å¿ƒå±æ€§å€¼</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-attr">[placeholder]</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid blue; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­æ‰€æœ‰å¸¦æœ‰ placeholder å±æ€§çš„ input å…ƒç´ ï¼ˆç¬¬ä¸€ä¸ª inputï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>[attr=val]</code>: é€‰æ‹©å±æ€§å€¼å®Œå…¨ç­‰äºæŒ‡å®šå€¼çš„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;password&quot;</span>]</span> &#123; <span class="attribute">background-color</span>: lightgray; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»…é€‰ä¸­ type=&quot;password&quot; çš„ input å…ƒç´  --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>[attr*=val]</code>: é€‰æ‹©å±æ€§å€¼ä¸­<ins>åŒ…å«</ins>æŒ‡å®šå€¼çš„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://google.com&quot;</span>&gt;</span>Google<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com&quot;</span>&gt;</span>GitHub<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:support@example.com&quot;</span>&gt;</span>Email Support<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-attr">[href*=<span class="string">&quot;google&quot;</span>]</span> &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­ href å±æ€§ä¸­åŒ…å« &quot;google&quot; çš„ &lt;a&gt; å…ƒç´  --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>[attr^=val]</code>: é€‰æ‹©å±æ€§å€¼ä»¥æŒ‡å®šå­—ç¬¦ä¸²<ins>å¼€å¤´</ins>çš„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://google.com&quot;</span>&gt;</span>Google<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com&quot;</span>&gt;</span>GitHub<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com&quot;</span>&gt;</span>Example<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">&quot;https&quot;</span>]</span> &#123; <span class="attribute">text-decoration</span>: underline; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­ href å±æ€§ä»¥ &quot;https&quot; å¼€å¤´çš„ &lt;a&gt; å…ƒç´ ï¼ˆGoogle å’Œ GitHubï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>[attr$=val]</code>: é€‰æ‹©å±æ€§å€¼ä»¥æŒ‡å®šå­—ç¬¦ä¸²<ins>ç»“å°¾</ins>çš„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;index.html&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;about.html&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span>Stylesheet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-attr">[href$=<span class="string">&quot;.html&quot;</span>]</span> &#123; <span class="attribute">color</span>: green; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­ href å±æ€§ä»¥ &quot;.html&quot; ç»“å°¾çš„ &lt;a&gt; å…ƒç´ ï¼ˆHome å’Œ Aboutï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç»„åˆé€‰æ‹©å™¨"><a href="#ç»„åˆé€‰æ‹©å™¨" class="headerlink" title="ç»„åˆé€‰æ‹©å™¨"></a>ç»„åˆé€‰æ‹©å™¨</h4><ul><li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨: <code>A + B</code>, é€‰æ‹©<code>A</code>å…ƒç´ åç´§è·Ÿçš„ç¬¬ä¸€ä¸ª<code>B</code>å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Text 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Text 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> + <span class="selector-class">.text</span> &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»…ä¼šé€‰ä¸­ç´§æŒ¨ç€ .box çš„ç¬¬ä¸€ä¸ª .textï¼ˆä¹Ÿå°±æ˜¯ Text 1ï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ™®é€šå…„å¼Ÿé€‰æ‹©å™¨: <code>A ~ B</code>, é€‰æ‹©<code>A</code>å…ƒç´ åæ‰€æœ‰çš„<code>B</code>å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Text 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Text 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>Text 3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.box</span> ~ <span class="selector-class">.text</span> &#123; <span class="attribute">color</span>: blue; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­ .box åæ‰€æœ‰åŒä¸€çˆ¶çº§ä¸‹çš„ .text å…ƒç´ ï¼ˆText 1 å’Œ Text 2ï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å­é€‰æ‹©å™¨: <code>A &gt; B</code>: é€‰æ‹©<code>A</code>çš„ç›´æ¥å­å…ƒç´ <code>B</code></li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.container</span> &gt; <span class="selector-class">.box</span> &#123; <span class="attribute">background-color</span>: yellow; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»…ä¼šé€‰ä¸­ .container çš„ç›´æ¥å­å…ƒç´  .boxï¼ˆBox 1ï¼‰ï¼Œä¸åŒ…æ‹¬åµŒå¥—çš„ Box 2 --&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åä»£é€‰æ‹©å™¨: <code>A B</code>: é€‰æ‹©<code>A</code>å…ƒç´ å†…çš„æ‰€æœ‰<code>B</code>å…ƒç´ , ä¸è®ºå±‚çº§æ·±åº¦</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.container</span> <span class="selector-class">.box</span> &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid black; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¼šé€‰ä¸­ .container å†…çš„æ‰€æœ‰ .box å…ƒç´ ï¼ŒåŒ…æ‹¬ Box 1 å’Œ Box 2 --&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ä¼ªç±»"><a href="#ä¼ªç±»" class="headerlink" title="ä¼ªç±»"></a>ä¼ªç±»</h4><h5 id="æ¡ä»¶ä¼ªç±»"><a href="#æ¡ä»¶ä¼ªç±»" class="headerlink" title="æ¡ä»¶ä¼ªç±»"></a><p style='font-size: 14px'>æ¡ä»¶ä¼ªç±»</p></h5><ul><li><code>:lang()</code>: åŸºäºå…ƒç´ è¯­è¨€æ¥åŒ¹é…é¡µé¢å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;fr&quot;</span>&gt;</span>Bonjour, le monde!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>ä½ å¥½ï¼Œä¸–ç•Œï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:lang</span>(en) &#123; <span class="attribute">color</span>: blue; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:lang</span>(zh) &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lang=&quot;en&quot; çš„æ®µè½æ–‡å­—å˜è“, lang=&quot;zh&quot; çš„æ®µè½æ–‡å­—å˜çº¢ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:dir()</code>: åŒ¹é…ç‰¹å®šæ–‡å­—ä¹¦å†™æ–¹å‘çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span>Left to Right text.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">dir</span>=<span class="string">&quot;rtl&quot;</span>&gt;</span>Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:dir</span>(ltr) &#123; <span class="attribute">background-color</span>: lightblue; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:dir</span>(rtl) &#123; <span class="attribute">background-color</span>: lightgreen; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»å·¦åˆ°å³ï¼ˆltrï¼‰çš„æ®µè½èƒŒæ™¯å˜è“, ä»å³åˆ°å·¦ï¼ˆrtlï¼‰çš„æ®µè½èƒŒæ™¯å˜ç»¿ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:has()</code>: é€‰æ‹©åŒ…å«æŸä¸ªç‰¹å®šå­å…ƒç´ çš„çˆ¶å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>This is a child paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>No child paragraph here.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.child</span>) &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŒ…å«ç±»åä¸º child çš„æ®µè½ &lt;p&gt; çš„ &lt;div&gt; ä¼šæœ‰çº¢è‰²è¾¹æ¡† --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:is()</code>: é€‰æ‹©ä¸åˆ—è¡¨ä¸­ä»»æ„é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Heading 1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Heading 2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Heading 3<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-pseudo">:is</span>(<span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>) &#123; <span class="attribute">font-style</span>: italic; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- h1 å’Œ h2 å…ƒç´ çš„æ–‡å­—å°†å˜ä¸ºæ–œä½“ï¼Œè€Œ h3 ä¸å—å½±å“ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:not()</code>: é€‰æ‹©ä¸ç¬¦åˆæŸäº›æ¡ä»¶çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span>Container<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>Box 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.box</span>) &#123; <span class="attribute">background-color</span>: lightgray; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç±»åä¸æ˜¯ box çš„ &lt;div&gt;ï¼ˆå³ Containerï¼‰èƒŒæ™¯å°†å˜ä¸ºæµ…ç°è‰² --&gt;</span></span><br></pre></td></tr></table></figure><h5 id="è¡Œä¸ºä¼ªç±»"><a href="#è¡Œä¸ºä¼ªç±»" class="headerlink" title="è¡Œä¸ºä¼ªç±»"></a><p style='font-size: 14px'>è¡Œä¸ºä¼ªç±»</p></h5><ul><li><code>:active</code>: å½“ç”¨æˆ·<ins>ç‚¹å‡»å¹¶æŒ‰ä½</ins>ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¯¥ä¼ªç±»ä¼šç”Ÿæ•ˆã€‚ä¸€èˆ¬ç”¨äºæŒ‰é’®æˆ–é“¾æ¥</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Active Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">button</span><span class="selector-pseudo">:active</span> &#123; <span class="attribute">background-color</span>: darkblue; <span class="attribute">color</span>: white;&#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æŒ‰ä½æŒ‰é’®æ—¶ï¼ŒèƒŒæ™¯é¢œè‰²å˜ä¸ºæ·±è“ï¼Œæ–‡å­—å˜ä¸ºç™½è‰² --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç‚¹å‡»å¹¶æŒ‰ä½é“¾æ¥æ—¶ï¼Œæ–‡å­—é¢œè‰²å˜ä¸ºçº¢è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:hover</code>: å½“ç”¨æˆ·å°†é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ä¸€ä¸ªå…ƒç´ ä¸Šæ—¶ï¼Œè¯¥ä¼ªç±»ä¼šç”Ÿæ•ˆ</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hover-box&quot;</span>&gt;</span>Hover over me!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Hover Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.hover-box</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">background-color</span>: lightgreen; <span class="attribute">cursor</span>: pointer; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">text-decoration</span>: underline; <span class="attribute">color</span>: orange; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é¼ æ ‡æ‚¬åœåœ¨ .hover-box ä¸Šæ—¶ï¼ŒèƒŒæ™¯å˜ä¸ºæµ…ç»¿è‰²ï¼Œé¼ æ ‡å˜ä¸ºæ‰‹å‹ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¸Šæ—¶ï¼Œæ–‡å­—åŠ ä¸‹åˆ’çº¿ï¼Œé¢œè‰²å˜ä¸ºæ©™è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>::selection</code>: å½“ç”¨æˆ·é€‰ä¸­<ins>æ–‡æœ¬</ins>æ—¶ï¼Œè¯¥ä¼ªç±»ä¼šç”Ÿæ•ˆã€‚å¯ä»¥ç”¨äºè‡ªå®šä¹‰æ–‡æœ¬é€‰æ‹©æ—¶çš„æ ·å¼ï¼ˆå¦‚èƒŒæ™¯é¢œè‰²ã€æ–‡å­—é¢œè‰²ï¼‰</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    This is a paragraph of text. Select some text to see the effect.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-pseudo">::selection</span> &#123; <span class="attribute">background-color</span>: yellow; <span class="attribute">color</span>: black; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­æ®µè½æ–‡æœ¬æ—¶ï¼ŒèƒŒæ™¯å˜ä¸ºé»„è‰²ï¼Œæ–‡å­—å˜ä¸ºé»‘è‰² --&gt;</span></span><br></pre></td></tr></table></figure><h5 id="çŠ¶æ€ä¼ªç±»"><a href="#çŠ¶æ€ä¼ªç±»" class="headerlink" title="çŠ¶æ€ä¼ªç±»"></a><p style='font-size: 14px'>çŠ¶æ€ä¼ªç±»</p></h5><ul><li><code>:target</code>: åŒ¹é…å½“å‰<code>URL</code>é”šç‚¹ï¼ˆ<code>#</code>ï¼‰å¯¹åº”çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section1&quot;</span>&gt;</span>Go to Section 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section2&quot;</span>&gt;</span>Go to Section 2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;section1&quot;</span>&gt;</span>Section 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;section2&quot;</span>&gt;</span>Section 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#section1</span><span class="selector-pseudo">:target</span> &#123; <span class="attribute">background-color</span>: lightblue; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#section2</span><span class="selector-pseudo">:target</span> &#123; <span class="attribute">background-color</span>: lightgreen; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç‚¹å‡»é“¾æ¥ Go to Section 1ï¼Œ#section1 èƒŒæ™¯å˜ä¸ºæµ…è“è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:link</code>: é€‰æ‹©æœªè®¿é—®çš„é“¾æ¥</li><li><code>:visited</code>: é€‰æ‹©å·²è®¿é—®çš„é“¾æ¥</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://example.com&quot;</span>&gt;</span>Unvisited Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://google.com&quot;</span>&gt;</span>Visited Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123; <span class="attribute">color</span>: blue; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123; <span class="attribute">color</span>: purple; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœªè®¿é—®çš„é“¾æ¥æ–‡å­—é¢œè‰²ä¸ºè“è‰², å·²è®¿é—®çš„é“¾æ¥æ–‡å­—é¢œè‰²ä¸ºç´«è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:focus</code>: åŒ¹é…å½“å‰èšç„¦çš„è¡¨å•å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your name&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid green; <span class="attribute">outline</span>: none; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¾“å…¥æ¡†èšç„¦æ—¶è¾¹æ¡†å˜ä¸ºç»¿è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:required</code>: åŒ¹é…è¡¨å•ä¸­è¢«æ ‡è®°ä¸ºå¿…å¡«çš„å…ƒç´ </li><li><code>:optional</code>: åŒ¹é…è¡¨å•ä¸­æœªæ ‡è®°ä¸ºå¿…å¡«çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">required</span> <span class="attr">placeholder</span>=<span class="string">&quot;Required Field&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Optional Field&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:required</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid red; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:optional</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid gray; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¿…å¡«å­—æ®µè¾¹æ¡†ä¸ºçº¢è‰², å¯é€‰å­—æ®µè¾¹æ¡†ä¸ºç°è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:valid</code>: åŒ¹é…è¾“å…¥å€¼åˆæ³•çš„è¡¨å•å…ƒç´ </li><li><code>:invalid</code>: åŒ¹é…è¾“å…¥å€¼ä¸åˆæ³•çš„è¡¨å•å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter your email&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:valid</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid green; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:invalid</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> solid red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¾“å…¥åˆæ³•é‚®ç®±æ—¶ï¼Œè¾¹æ¡†å˜ç»¿, è¾“å…¥ä¸åˆæ³•é‚®ç®±æ—¶ï¼Œè¾¹æ¡†å˜çº¢ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:in-range</code>: åŒ¹é…è¾“å…¥å€¼åœ¨è®¾å®šèŒƒå›´å†…çš„å…ƒç´ </li><li><code>:out-of-range</code>: åŒ¹é…è¾“å…¥å€¼åœ¨è®¾å®šèŒƒå›´å¤–çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">min</span>=<span class="string">&quot;10&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter a number&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:in-range</span> &#123; <span class="attribute">background-color</span>: lightgreen; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:out-of-range</span> &#123; <span class="attribute">background-color</span>: lightcoral; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¾“å…¥ 10 åˆ° 100 ä¹‹é—´çš„æ•°å­—ï¼ŒèƒŒæ™¯å˜ç»¿, è¾“å…¥èŒƒå›´å¤–çš„æ•°å­—ï¼ŒèƒŒæ™¯å˜çº¢ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:checked</code>: åŒ¹é…é€‰ä¸­çš„å¤é€‰æ¡†æˆ–å•é€‰æŒ‰é’®</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>&gt;</span> Checked<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span> Not Checked<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> &#123; <span class="attribute">outline</span>: <span class="number">2px</span> solid blue; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€‰ä¸­çš„å¤é€‰æ¡†æœ‰è“è‰²è¾¹æ¡† --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:enabled</code>: åŒ¹é…å¯ç”¨çš„è¡¨å•å…ƒç´ </li><li><code>:disabled</code>: åŒ¹é…ç¦ç”¨çš„è¡¨å•å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">disabled</span> <span class="attr">placeholder</span>=<span class="string">&quot;Disabled&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enabled&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:enabled</span> &#123; <span class="attribute">background-color</span>: white; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span> &#123; <span class="attribute">background-color</span>: lightgray; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¯ç”¨çš„è¾“å…¥æ¡†èƒŒæ™¯ä¸ºç™½è‰², ç¦ç”¨çš„è¾“å…¥æ¡†èƒŒæ™¯ä¸ºæµ…ç°è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:read-only</code>: åŒ¹é…åªè¯»è¡¨å•å…ƒç´ </li><li><code>:read-write</code>: åŒ¹é…å¯ç¼–è¾‘è¡¨å•å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">readonly</span> <span class="attr">value</span>=<span class="string">&quot;Read-only Field&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Editable Field&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:read-only</span> &#123; <span class="attribute">color</span>: gray; &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:read-write</span> &#123; <span class="attribute">color</span>: black; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åªè¯»è¾“å…¥æ¡†æ–‡å­—ä¸ºç°è‰², å¯ç¼–è¾‘è¾“å…¥æ¡†æ–‡å­—ä¸ºé»‘è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:blank</code>: åŒ¹é…æ²¡æœ‰è¾“å…¥å€¼çš„è¡¨å•å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Leave me blank&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">input</span><span class="selector-pseudo">:blank</span> &#123; <span class="attribute">border</span>: <span class="number">2px</span> dashed orange; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœªå¡«å†™çš„è¾“å…¥æ¡†è¾¹æ¡†ä¸ºæ©™è‰²è™šçº¿ --&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ç»“æ„ä¼ªç±»"><a href="#ç»“æ„ä¼ªç±»" class="headerlink" title="ç»“æ„ä¼ªç±»"></a><p style='font-size: 14px'>ç»“æ„ä¼ªç±»</p></h5><ul><li><code>:root</code>: é€‰æ‹©æ–‡æ¡£çš„æ ¹å…ƒç´ , åœ¨<code>HTML</code>ä¸­ä¸€èˆ¬æ˜¯<code>&lt;html&gt;</code>æ ‡ç­¾</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-pseudo">:root</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; <span class="attr">--main-color</span>: blue; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®æ ¹å…ƒç´ çš„å­—ä½“å¤§å°å’Œ CSS è‡ªå®šä¹‰å±æ€§ï¼ˆå˜é‡ï¼‰ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:empty</code>: åŒ¹é…æ²¡æœ‰å­å…ƒç´ ï¼ˆåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ï¼‰çš„å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>Content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">div</span><span class="selector-pseudo">:empty</span> &#123; <span class="attribute">background-color</span>: lightgray; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ²¡æœ‰å†…å®¹çš„ &lt;div class=&quot;box1&quot;&gt; èƒŒæ™¯å˜ä¸ºæµ…ç°è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:first-letter</code>: é€‰æ‹©å…ƒç´ çš„é¦–å­—æ¯ï¼Œç”¨äºæ–‡æœ¬æ ·å¼çš„ç‰¹æ®Šå¤„ç†</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-letter &#123; <span class="attribute">font-size</span>: <span class="number">2em</span>; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ®µè½é¦–å­—æ¯ â€œTâ€ å­—ä½“å˜å¤§ä¸”é¢œè‰²å˜çº¢ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:first-line</code>: é€‰æ‹©å…ƒç´ çš„é¦–è¡Œå†…å®¹ï¼Œå¸¸ç”¨äºæ®µè½æ ·å¼çš„ç‰¹æ®Šå¤„ç†</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a long paragraph to demonstrate first-line styling in CSS.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-line &#123; <span class="attribute">font-weight</span>: bold; <span class="attribute">color</span>: blue; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ®µè½çš„ç¬¬ä¸€è¡Œæ–‡å­—åŠ ç²—ä¸”å˜è“ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:nth-child(n)</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­ç¬¬<code>n</code>ä¸ªå­å…ƒç´ ï¼ˆä»ç¬¬ä¸€ä¸ªå¼€å§‹è®¡æ•°ï¼‰</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123; <span class="attribute">color</span>: red; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒä¸ª &lt;li&gt; çš„æ–‡å­—é¢œè‰²å˜ä¸ºçº¢è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:nth-last-child(n)</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­å€’æ•°ç¬¬<code>n</code>ä¸ªå­å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">li</span><span class="selector-pseudo">:nth-last-child</span>(<span class="number">1</span>) &#123; <span class="attribute">color</span>: green; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ€åä¸€ä¸ª &lt;li&gt; çš„æ–‡å­—é¢œè‰²å˜ä¸ºç»¿è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:first-child</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123; <span class="attribute">font-style</span>: italic; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ä¸ª &lt;li&gt; çš„æ–‡å­—å˜ä¸ºæ–œä½“ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:last-child</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå­å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123; <span class="attribute">font-weight</span>: bold; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ€åä¸€ä¸ª &lt;li&gt; çš„æ–‡å­—åŠ ç²— --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:only-child</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­ä»…æœ‰çš„å­å…ƒç´ </li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;single&quot;</span>&gt;</span>I am the only child!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:only-child</span> &#123; <span class="attribute">color</span>: purple; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»…æœ‰ä¸€ä¸ªå­å…ƒç´ çš„ &lt;p&gt;ï¼ˆI am the only child!ï¼‰æ–‡å­—é¢œè‰²å˜ä¸ºç´«è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:nth-of-type(n)</code>: åŒ¹é…åŒç±»å‹æ ‡ç­¾ä¸­çš„ç¬¬<code>n</code>ä¸ª</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>Span 1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123; <span class="attribute">color</span>: orange; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒä¸ª &lt;p&gt;ï¼ˆParagraph 2ï¼‰æ–‡å­—é¢œè‰²å˜ä¸ºæ©™è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:nth-last-of-type(n)</code>: åŒ¹é…åŒç±»å‹æ ‡ç­¾ä¸­çš„å€’æ•°ç¬¬<code>n</code>ä¸ª</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:nth-last-of-type</span>(<span class="number">1</span>) &#123; <span class="attribute">color</span>: brown; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å€’æ•°ç¬¬ä¸€ä¸ª &lt;p&gt;ï¼ˆParagraph 3ï¼‰æ–‡å­—é¢œè‰²å˜ä¸ºæ£•è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:first-of-type</code>: åŒ¹é…åŒç±»å‹æ ‡ç­¾ä¸­çš„ç¬¬ä¸€ä¸ª</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>First Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Second Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-of-type &#123; <span class="attribute">text-decoration</span>: underline; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ä¸ª &lt;p&gt; çš„æ–‡å­—åŠ ä¸‹åˆ’çº¿ --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:last-of-type</code>: åŒ¹é…åŒç±»å‹æ ‡ç­¾ä¸­çš„æœ€åä¸€ä¸ª</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>First Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Last Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:last-of-type</span> &#123; <span class="attribute">color</span>: teal; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ€åä¸€ä¸ª &lt;p&gt; çš„æ–‡å­—é¢œè‰²å˜ä¸ºé’è‰² --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>:only-of-type</code>: åŒ¹é…çˆ¶å…ƒç´ ä¸­ä»…æœ‰çš„æŸç§ç±»å‹çš„æ ‡ç­¾</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Unique Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>Not Unique<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Another Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span><span class="selector-pseudo">:only-of-type</span> &#123; <span class="attribute">background-color</span>: yellow; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- çˆ¶å…ƒç´ ä¸­ä»…æœ‰çš„ &lt;p&gt;ï¼ˆUnique Paragraphï¼‰èƒŒæ™¯å˜ä¸ºé»„è‰² --&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ä¼ªå…ƒç´ "><a href="#ä¼ªå…ƒç´ " class="headerlink" title="ä¼ªå…ƒç´ "></a><p style='font-size: 14px'>ä¼ªå…ƒç´ </p></h5><ul><li><code>::before</code>: åœ¨åœ¨å…ƒç´ å†…å®¹<ins>ä¹‹å‰</ins>æ’å…¥å†…å®¹<ul><li><code>::before</code>æ˜¯ä¸€ä¸ªä¼ªå…ƒç´ ï¼Œå¿…é¡»ä¸<code>content</code>å±æ€§ä¸€èµ·ä½¿ç”¨ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆ</li></ul></li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.example</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">content</span>: <span class="string">&quot;â˜… &quot;</span>; <span class="attribute">color</span>: gold; <span class="attribute">font-size</span>: <span class="number">1.5em</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åœ¨æ®µè½å†…å®¹ä¹‹å‰æ’å…¥ä¸€ä¸ªé‡‘è‰²çš„æ˜Ÿæ˜Ÿç¬¦å· --&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>::after</code>: åœ¨å…ƒç´ å†…å®¹<ins>ä¹‹å</ins>æ’å…¥å†…å®¹<ul><li>å’Œ<code>::before</code>ç±»ä¼¼ï¼Œå¿…é¡»ä¸<code>content</code>å±æ€§ä¸€èµ·ä½¿ç”¨</li></ul></li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.example</span><span class="selector-pseudo">::after</span> &#123; <span class="attribute">content</span>: <span class="string">&quot; âœ&quot;</span>; <span class="attribute">color</span>: gray; <span class="attribute">font-size</span>: <span class="number">1.2em</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åœ¨æ®µè½å†…å®¹ä¹‹åæ’å…¥ä¸€ä¸ªç°è‰²çš„é“…ç¬”ç¬¦å· --&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="CSSä¼˜å…ˆçº§"><a href="#CSSä¼˜å…ˆçº§" class="headerlink" title="CSSä¼˜å…ˆçº§"></a><code>CSS</code>ä¼˜å…ˆçº§</h3><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img4b226c55b87c426c840d2c70d51d3511%7Etplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.awebp"></p><p>ä¼˜å…ˆçº§å°±æ˜¯åˆ†é…ç»™æŒ‡å®šçš„<code>CSS</code>å£°æ˜çš„ä¸€ä¸ªæƒé‡, å®ƒç”±åŒ¹é…çš„é€‰æ‹©å™¨ä¸­çš„æ¯ä¸€ç§é€‰æ‹©å™¨ç±»å‹çš„æ•°å€¼å†³å®šã€‚å¯ä»¥æŠŠæƒé‡åˆ†æˆå¦‚ä¸‹å‡ ä¸ªç­‰çº§, æ•°å€¼è¶Šå¤§çš„æƒé‡è¶Šé«˜</p><ul><li><code>10000</code>: <code>!important</code></li><li><code>01000</code>: å†…è”æ ·å¼ (<code>inline style</code>)</li><li><code>00100</code>: <code>ID</code>é€‰æ‹©å™¨</li><li><code>00010</code>: ç±»é€‰æ‹©å™¨ã€ä¼ªç±»é€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨</li><li><code>00001</code>: å…ƒç´ é€‰æ‹©å™¨ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨</li><li><code>00000</code>: é€šé…é€‰æ‹©å™¨ã€åä»£é€‰æ‹©å™¨ã€å…„å¼Ÿé€‰æ‹©å™¨</li></ul><p>å¯ä»¥çœ‹åˆ°å†…è”æ ·å¼ï¼ˆé€šè¿‡å…ƒç´ ä¸­<code>style</code>å±æ€§å®šä¹‰çš„æ ·å¼ï¼‰çš„ä¼˜å…ˆçº§å¤§äºä»»ä½•é€‰æ‹©å™¨ã€‚è€Œç»™å±æ€§å€¼åŠ ä¸Š<code>!important</code>åˆå¯ä»¥æŠŠä¼˜å…ˆçº§æè‡³æœ€é«˜ï¼Œå°±æ˜¯å› ä¸ºå®ƒçš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…ä½¿ç”¨å®ƒ</p><hr><h3 id="CSSå±‚å æ€§"><a href="#CSSå±‚å æ€§" class="headerlink" title="CSSå±‚å æ€§"></a><code>CSS</code>å±‚å æ€§</h3><p>å±‚å æ ·å¼è¡¨ï¼ˆ<code>CSS</code>ï¼‰ä¸­çš„â€œå±‚å â€æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒæŒ‡çš„æ˜¯å½“å¤šä¸ª<code>CSS</code>å£°æ˜å¯ä»¥ä½œç”¨äºåŒä¸€ä¸ª<code>HTML</code>å…ƒç´ æ—¶ï¼Œå¦‚ä½•ç¡®å®šæœ€ç»ˆç”Ÿæ•ˆçš„æ ·å¼ã€‚è¿™æ˜¯é€šè¿‡ä¸€å¥—æ˜ç¡®çš„ç®—æ³•æ¥å®Œæˆçš„ï¼Œç”¨äºåˆå¹¶æ¥è‡ªå¤šä¸ªæ¥æºçš„å±æ€§å€¼</p><ul><li>é’ˆå¯¹ä¸åŒæºçš„æ ·å¼ï¼Œå°†æŒ‰ç…§å¦‚ä¸‹çš„é¡ºåºè¿›è¡Œå±‚å ï¼Œè¶Šå¾€ä¸‹ä¼˜å…ˆçº§è¶Šé«˜<ul><li>ç”¨æˆ·ä»£ç†æ ·å¼è¡¨: æµè§ˆå™¨è‡ªå¸¦çš„é»˜è®¤æ ·å¼ï¼Œå¦‚æœæˆ‘ä»¬ä¸è®¾ç½®ä»»ä½•æ ·å¼ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨è¿™äº›è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œé»˜è®¤çš„æ®µè½<code>&lt;p&gt;</code>æœ‰ä¸€äº›ä¸Šä¸‹è¾¹è·</li><li>ä½œè€…æ ·å¼è¡¨: å¼€å‘è€…å®šä¹‰çš„æ ·å¼ï¼Œé€šå¸¸æ˜¯æˆ‘ä»¬ç¼–å†™çš„<code>CSS</code>æ–‡ä»¶æˆ–å†…è”æ ·å¼ã€‚è¿™äº›æ ·å¼ä¼šè¦†ç›–æµè§ˆå™¨çš„é»˜è®¤æ ·å¼</li><li>ä½œè€…æ ·å¼è¡¨ä¸­çš„<code>!important</code>å£°æ˜: å¦‚æœå¼€å‘è€…åœ¨æ ·å¼ä¸­æ·»åŠ äº†<code>!important</code>ï¼Œé‚£ä¹ˆå®ƒçš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå“ªæ€•æœ‰å…¶ä»–è§„åˆ™è¦†ç›–ï¼Œå®ƒä¹Ÿä¼šç”Ÿæ•ˆ</li></ul></li></ul><p>ç†è§£å±‚å æ€§çš„æ—¶å€™éœ€è¦ç»“åˆ<code>CSS</code>é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ä»¥åŠç»§æ‰¿æ€§æ¥ç†è§£ã€‚æ¯”å¦‚é’ˆå¯¹åŒä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå®šä¹‰åœ¨åé¢çš„å£°æ˜ä¼šè¦†ç›–å‰é¢çš„, ä½œè€…å®šä¹‰çš„æ ·å¼ä¼šæ¯”é»˜è®¤ç»§æ‰¿çš„æ ·å¼ä¼˜å…ˆçº§æ›´é«˜</p><hr><h3 id="è§„åˆ™"><a href="#è§„åˆ™" class="headerlink" title="@è§„åˆ™"></a><code>@</code>è§„åˆ™</h3><p><code>@</code>è§„åˆ™æ˜¯ä¸€ç§ç‰¹æ®Šçš„<code>CSS</code>è¯­å¥ï¼Œç”¨äºåœ¨æ ·å¼è¡¨ä¸­å®šä¹‰ä¸€äº›å…¨å±€é…ç½®æˆ–æ¡ä»¶è§„åˆ™ï¼Œè€Œä¸ä»…ä»…æ˜¯å¸¸è§„çš„æ ·å¼è§„åˆ™ã€‚ä»¥ä¸‹æ˜¯<code>CSS</code>ä¸­å¸¸ç”¨çš„<code>@</code>è§„åˆ™</p><ul><li><code>@namespace</code>: ç”¨äºå®šä¹‰<code>XML</code>å‘½åç©ºé—´ï¼ˆé€‚ç”¨äºç‰¹å®šçš„<code>XML</code>æ–‡ä»¶æ ·å¼éœ€æ±‚ï¼‰</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@namespace</span> svg <span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»…å¯¹ SVG å…ƒç´ åº”ç”¨æ ·å¼ */</span></span><br><span class="line">svg|circle &#123;</span><br><span class="line">    fill: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½œç”¨ï¼šå®šä¹‰ svg å‘½åç©ºé—´ï¼Œå¹¶å¯¹ &lt;circle&gt; å…ƒç´ åº”ç”¨æ ·å¼ */</span></span><br></pre></td></tr></table></figure><ul><li><code>@media</code>: ç”¨äºä¸ºä¸åŒè®¾å¤‡æˆ–å±å¹•æ¡ä»¶è®¾ç½®æ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">color</span>: black;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¦‚æœå±å¹•å®½åº¦å°äºæˆ–ç­‰äº 600pxï¼ŒèƒŒæ™¯å˜ä¸ºæµ…è“è‰² */</span></span><br><span class="line"><span class="comment">/* æ‰“å°æ—¶ï¼Œå­—ä½“å˜å°å¹¶ä½¿ç”¨é»‘è‰² */</span></span><br></pre></td></tr></table></figure><ul><li><code>@page</code>: ç”¨äºè®¾ç½®æ‰“å°é¡µé¢çš„å¸ƒå±€ï¼ˆå¦‚é¡µè¾¹è·ï¼‰</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@page</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1in</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@page</span> :first &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">2in</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è®¾ç½®é»˜è®¤æ‰“å°é¡µé¢çš„é¡µè¾¹è·ä¸º 1 è‹±å¯¸ */</span></span><br><span class="line"><span class="comment">/* ç¬¬ä¸€é¡µçš„ä¸Šè¾¹è·å¢åŠ åˆ° 2 è‹±å¯¸ */</span></span><br></pre></td></tr></table></figure><ul><li><code>@font-face</code>: å®šä¹‰å’ŒåŠ è½½è‡ªå®šä¹‰å­—ä½“</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;CustomFont&quot;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;customfont.woff2&quot;</span>) <span class="built_in">format</span>(<span class="string">&quot;woff2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;CustomFont&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»å¤–éƒ¨åŠ è½½åä¸º CustomFont çš„å­—ä½“å¹¶åº”ç”¨åˆ°é¡µé¢ */</span></span><br></pre></td></tr></table></figure><ul><li><code>@keyframes</code>: å®šä¹‰åŠ¨ç”»çš„å…³é”®å¸§</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> slide-in &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: slide-in <span class="number">1s</span> ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®šä¹‰ä¸€ä¸ªä»å·¦ä¾§æ»‘å…¥çš„åŠ¨ç”»ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ° &lt;div&gt; å…ƒç´ ä¸Š */</span></span><br></pre></td></tr></table></figure><ul><li><code>@import</code>: ç”¨äºå¯¼å…¥å¤–éƒ¨<code>CSS</code>æ–‡ä»¶, ä¸<code>&lt;link&gt;</code>çš„åŒºåˆ«å¦‚ä¸‹<ul><li><code>&lt;link&gt;</code>æ˜¯<code>HTML</code>æ ‡ç­¾ï¼Œå¯å¯¼å…¥<code>CSS</code>ã€å›¾ç‰‡ã€è„šæœ¬ç­‰èµ„æºã€‚<code>@import</code>æ˜¯<code>CSS</code>è§„åˆ™ï¼Œä»…èƒ½å¯¼å…¥<code>CSS</code>æ–‡ä»¶</li><li><code>&lt;link&gt;</code>ä¼šåœ¨é¡µé¢åŠ è½½æ—¶åŒæ—¶åŠ è½½<code>CSS</code>ã€‚<code>@import</code>ä¼šç­‰é¡µé¢åŠ è½½å®Œæˆåå†åŠ è½½<code>CSS</code> (æ‰€ä»¥<code>@import</code>å­—ä½“ä¼šåœ¨ç½‘é¡µåŠ è½½ç»“æŸåæ‰ä¼šè¢«åº”ç”¨)</li></ul></li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;styles.css&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li><code>@supports</code>: ç”¨äºæ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸäº›<code>CSS</code>ç‰¹æ€§ï¼Œä»è€Œæœ‰æ¡ä»¶åœ°åº”ç”¨æ ·å¼ã€‚å¯ä»¥ä½¿ç”¨<code>not</code>ã€<code>and</code>ã€<code>or</code>é€»è¾‘æ“ä½œç¬¦</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* é»˜è®¤æ ·å¼ */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¦‚æœæ”¯æŒ color-schemeï¼Œåˆ™è®¾ç½®æ”¯æŒæ·±è‰²æ¨¡å¼ */</span></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>-scheme: dark;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background, black);</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--text, white);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¦‚æœç”¨æˆ·åå¥½å‡å°‘åŠ¨ç”» */</span></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">prefers-reduced-motion</span>: reduce) &#123;</span><br><span class="line">    * &#123;</span><br><span class="line">        <span class="attribute">transition</span>: none;</span><br><span class="line">        <span class="attribute">animation</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¦‚æœæµè§ˆå™¨æ”¯æŒ color-schemeï¼Œé¡µé¢ä¼šå¯ç”¨æ·±è‰²æ¨¡å¼çš„é»˜è®¤æ ·å¼æˆ–å®šä¹‰çš„å˜é‡ */</span></span><br><span class="line"><span class="comment">/* å¦‚æœç”¨æˆ·è®¾ç½®äº†å‡å°‘åŠ¨ç”»åå¥½ï¼ˆé€šè¿‡ç³»ç»Ÿè®¾ç½®ï¼‰ï¼Œé¡µé¢ä¼šç¦ç”¨æ‰€æœ‰è¿‡æ¸¡å’ŒåŠ¨ç”»æ•ˆæœ */</span></span><br><span class="line"><span class="comment">/* å¦‚æœä¸¤è€…éƒ½ä¸æ”¯æŒï¼Œåˆ™ä½¿ç”¨é»˜è®¤æ ·å¼ï¼ˆæµ…è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—ï¼Œå¸¦æœ‰è¿‡æ¸¡æ•ˆæœï¼‰ */</span></span><br></pre></td></tr></table></figure><hr><h3 id="CSSç»§æ‰¿æ€§"><a href="#CSSç»§æ‰¿æ€§" class="headerlink" title="CSSç»§æ‰¿æ€§"></a><code>CSS</code>ç»§æ‰¿æ€§</h3><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgf8bd1604b143463eb121c1f46d71c652%7Etplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.awebp"></p><p>ç»§æ‰¿æ€§æ˜¯<code>CSS</code>ä¸­çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼ŒæŒ‡çš„æ˜¯å­å…ƒç´ å¯ä»¥ç»§æ‰¿çˆ¶å…ƒç´ æŸäº› å±æ€§è®¡ç®—åçš„å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>html</code>å…ƒç´ çš„æ–‡æœ¬é¢œè‰²é»˜è®¤æ˜¯é»‘è‰²ï¼Œé¡µé¢ä¸­çš„æ‰€æœ‰å­å…ƒç´ ä¼šç»§æ‰¿è¿™ä¸ªé¢œè‰²å±æ€§ï¼Œé™¤éæ˜¾å¼æŒ‡å®šå…¶ä»–é¢œè‰²ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»§æ‰¿çš„ä½œç”¨"><a href="#ç»§æ‰¿çš„ä½œç”¨" class="headerlink" title="ç»§æ‰¿çš„ä½œç”¨"></a>ç»§æ‰¿çš„ä½œç”¨</h4><ul><li>ç»§æ‰¿æ€§å¯ä»¥å‡å°‘æ ·å¼ä»£ç çš„å†—ä½™ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§<ul><li>å¦‚æœ<code>CSS</code>ä¸æ”¯æŒç»§æ‰¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªæ–‡æœ¬æ ‡ç­¾éƒ½å•ç‹¬è®¾ç½®é¢œè‰²æˆ–å­—ä½“ï¼Œå¯¼è‡´æ ·å¼ä»£ç å†—é•¿ï¼Œæ–‡ä»¶ä½“ç§¯å˜å¤§ï¼Œç»´æŠ¤æˆæœ¬å¢åŠ </li></ul></li></ul><h4 id="ç»§æ‰¿çš„é»˜è®¤è¡Œä¸º"><a href="#ç»§æ‰¿çš„é»˜è®¤è¡Œä¸º" class="headerlink" title="ç»§æ‰¿çš„é»˜è®¤è¡Œä¸º"></a>ç»§æ‰¿çš„é»˜è®¤è¡Œä¸º</h4><p><code>CSS</code>å±æ€§å¾ˆå¤šï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„å±æ€§é»˜è®¤éƒ½æ˜¯èƒ½ç»§æ‰¿çˆ¶å…ƒç´ å¯¹åº”å±æ€§çš„ï¼Œé‚£å“ªäº›å±æ€§å­˜åœ¨é»˜è®¤ç»§æ‰¿çš„è¡Œä¸ºå‘¢ï¼Ÿä¸€å®šæ˜¯é‚£äº›ä¸ä¼šå½±å“åˆ°é¡µé¢å¸ƒå±€çš„å±æ€§ï¼Œå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»</p><ul><li>å­—ä½“ç›¸å…³: <code>font-family</code>ã€<code>font-style</code>ã€<code>font-size</code>ã€<code>font-weight</code>ç­‰</li><li>æ–‡æœ¬ç›¸å…³: <code>text-align</code>ã€<code>text-indent</code>ã€<code>text-decoration</code>ã€<code>text-shadow</code>ã€<code>letter-spacing</code>ã€<code>word-spacing</code>ã€<code>white-space</code>ã€<code>line-height</code>ã€<code>color</code>ç­‰</li><li>åˆ—è¡¨ç›¸å…³: <code>list-style</code>ã€<code>list-style-image</code>ã€<code>list-style-type</code>ã€<code>list-style-position</code>ç­‰</li><li>å…¶ä»–å±æ€§: <code>visibility</code>ã€<code>cursor</code>ç­‰</li></ul><h4 id="æ˜¾å¼æ§åˆ¶ç»§æ‰¿è¡Œä¸º"><a href="#æ˜¾å¼æ§åˆ¶ç»§æ‰¿è¡Œä¸º" class="headerlink" title="æ˜¾å¼æ§åˆ¶ç»§æ‰¿è¡Œä¸º"></a>æ˜¾å¼æ§åˆ¶ç»§æ‰¿è¡Œä¸º</h4><p>å¯¹äºå…¶ä»–é»˜è®¤ä¸ç»§æ‰¿çš„å±æ€§ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªå±æ€§å€¼æ¥æ§åˆ¶ç»§æ‰¿è¡Œä¸º</p><ul><li><code>inherit</code>: å¼ºåˆ¶ç»§æ‰¿çˆ¶å…ƒç´ å¯¹åº”å±æ€§çš„è®¡ç®—å€¼</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* p çš„è¾¹æ¡†æ ·å¼å°†ç»§æ‰¿è‡ªçˆ¶å…ƒç´  */</span></span><br></pre></td></tr></table></figure><ul><li><code>initial</code>: å°†å±æ€§æ¢å¤ä¸º<code>CSS</code>çš„é»˜è®¤å€¼</li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: initial;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* p çš„é¢œè‰²å°†æ¢å¤ä¸ºé»˜è®¤å€¼ï¼ˆå¦‚é»‘è‰² #000ï¼‰ */</span></span><br></pre></td></tr></table></figure><ul><li><code>unset</code><ul><li>å¦‚æœå±æ€§é»˜è®¤å¯ä»¥ç»§æ‰¿ï¼Œåˆ™æ•ˆæœç­‰åŒäº<code>inherit</code></li><li>å¦‚æœå±æ€§é»˜è®¤ä¸ç»§æ‰¿ï¼Œåˆ™æ•ˆæœç­‰åŒäº<code>initial</code></li></ul></li></ul><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: unset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="CSSæ–‡æ¡£æµ"><a href="#CSSæ–‡æ¡£æµ" class="headerlink" title="CSSæ–‡æ¡£æµ"></a><code>CSS</code>æ–‡æ¡£æµ</h3><p>åœ¨<code>CSS</code>çš„ä¸–ç•Œä¸­ï¼Œæ–‡æ¡£æµæ˜¯å†…å®¹æŒ‰ç…§ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ’åˆ—å’Œæ˜¾ç¤ºçš„ä¸€ç§é»˜è®¤å¸ƒå±€æ–¹å¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé¡µé¢ä¼šè¢«åˆ†å‰²æˆä¸€è¡Œä¸€è¡Œçš„æ˜¾ç¤ºï¼Œæ¯è¡Œå¯èƒ½åŒ…å«å¤šä¸ªå…ƒç´ ã€‚ä»è§†è§‰æ•ˆæœæ¥çœ‹ï¼Œæ–‡æ¡£æµå‘ˆç°ä¸ºä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„æ’åˆ—æ–¹å¼ã€‚è¿™ç§å¸ƒå±€ä¹Ÿè¢«ç§°ä¸º<ins>æµå¼å¸ƒå±€</ins>ï¼Œç±»ä¼¼æ°´æµèˆ¬çµæ´»ï¼Œå¯ä»¥è‡ªé€‚åº”æ‰€åœ¨çš„å®¹å™¨</p><h4 id="ä»€ä¹ˆæ˜¯æ–‡æ¡£æµ"><a href="#ä»€ä¹ˆæ˜¯æ–‡æ¡£æµ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ–‡æ¡£æµ"></a>ä»€ä¹ˆæ˜¯æ–‡æ¡£æµ</h4><ul><li>åœ¨æ²¡æœ‰é¢å¤–æ ·å¼ï¼ˆå¦‚<code>position</code>æˆ–<code>float</code>ï¼‰çš„æƒ…å†µä¸‹ï¼Œ<code>HTML</code>å…ƒç´ ä¼šæŒ‰ç…§æ–‡æ¡£æµçš„é»˜è®¤è§„åˆ™è¿›è¡Œæ’åˆ—</li><li>å—çº§å…ƒç´ : å æ®ä¸€æ•´è¡Œï¼Œä»ä¸Šåˆ°ä¸‹å‚ç›´æ’åˆ—ï¼Œä¾‹å¦‚ <code>&lt;div&gt;</code>ã€<code>&lt;p&gt;</code>ç­‰</li><li>è¡Œå†…å…ƒç´ : æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ°´å¹³æ’åˆ—ï¼Œä¾‹å¦‚ <code>&lt;span&gt;</code>ã€<code>&lt;a&gt;</code>ã€<code>&lt;strong&gt;</code>ç­‰</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>å—çº§å…ƒç´  1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>å—çº§å…ƒç´  2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>è¡Œå†…å…ƒç´  1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>è¡Œå†…å…ƒç´  2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å—çº§å…ƒç´  1</span><br><span class="line">å—çº§å…ƒç´  2</span><br><span class="line">è¡Œå†…å…ƒç´  1 è¡Œå†…å…ƒç´  2</span><br></pre></td></tr></table></figure><h4 id="è„±ç¦»æ–‡æ¡£æµ"><a href="#è„±ç¦»æ–‡æ¡£æµ" class="headerlink" title="è„±ç¦»æ–‡æ¡£æµ"></a>è„±ç¦»æ–‡æ¡£æµ</h4><p>è„±ç¦»æ–‡æ¡£æµæŒ‡çš„æ˜¯å°†æŸä¸ªå…ƒç´ ä»æ­£å¸¸æ–‡æ¡£æµä¸­ç§»é™¤åï¼Œå…¶ä»–å…ƒç´ å°†å¿½ç•¥è¯¥å…ƒç´ çš„å­˜åœ¨ï¼Œå¹¶å¡«è¡¥å…¶åŸå…ˆå æ®çš„ç©ºé—´ã€‚è„±æµçš„å…ƒç´ ä¸ä¼šå½±å“çˆ¶å®¹å™¨çš„é«˜åº¦è®¡ç®—ï¼Œå³<ins>è„±æµå…ƒç´ ä¸å æ®ç©ºé—´</ins></p><ul><li>æœ‰ä»¥ä¸‹ä¸¤ç§å¸¸è§æ–¹å¼å¯ä»¥ä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµ</li></ul><h5 id="æµ®åŠ¨float"><a href="#æµ®åŠ¨float" class="headerlink" title="æµ®åŠ¨float"></a><p style='font-size: 14px'>æµ®åŠ¨<code>float</code></p></h5><p>æµ®åŠ¨ï¼ˆ<code>float</code>ï¼‰å±æ€§æœ€åˆåœ¨<code>CSS</code>ä¸­è¢«å¼•å…¥æ˜¯ä¸ºäº†å®ç°æ–‡å­—ç¯ç»•å›¾ç‰‡çš„æ•ˆæœ</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img46494deb72014dedbcaa64689d28bada%7Etplv-73owjymdk6-jj-mark-v1_0_0_0_0_5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmL6YGT5YmN56uv_q75.webp"></p><p>å¦‚æœæ²¡æœ‰<code>float</code>ï¼Œ<code>img</code>é»˜è®¤æ˜¯<code>inline</code>å…ƒç´ ï¼Œé‚£ä¹ˆæ–‡å­—å›¾ç‰‡çš„æ˜¾ç¤ºå°±ä¼šåƒè¿™æ ·</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgbed297a2758f4cca969dce9630c17c53%7Etplv-73owjymdk6-jj-mark-v1_0_0_0_0_5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmL6YGT5YmN56uv_q75.webp"></p><ul><li>ä½¿ç”¨<code>float</code>ä¼šè®©å…ƒç´ è„±ç¦»æ­£å¸¸æ–‡æ¡£æµï¼Œç§»åŠ¨åˆ°çˆ¶å®¹å™¨çš„å·¦&#x2F;å³ä¾§</li><li>åç»­çš„å—çº§å…ƒç´ ä¸ä¼šå—åˆ°æµ®åŠ¨å…ƒç´ çš„å½±å“ï¼Œä½†å…¶ä»–æµ®åŠ¨æˆ–è¡Œå†…å…ƒç´ ä¼šå—å½±å“</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: left;&quot;</span>&gt;</span>æµ®åŠ¨å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æ™®é€šå…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æµ®åŠ¨å…ƒç´ åœ¨å·¦ä¾§ï¼Œæ™®é€šå…ƒç´ ä»æµ®åŠ¨å…ƒç´ çš„ä¸‹æ–¹å¼€å§‹æ’åˆ— --&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ç°ä»£çš„<code>CSS</code>å¸ƒå±€æŠ€æœ¯å¦‚<code>Flexbox</code>å’Œ<code>Grid</code>å·²ç»å‡ ä¹å®Œå…¨å–ä»£äº†æµ®åŠ¨å¸ƒå±€ï¼Œä½†åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œæµ®åŠ¨ä»ç„¶æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼Œæ¯”å¦‚æ–‡å­—ç¯ç»•å›¾ç‰‡å’Œç®€å•çš„å·¦å¯¹é½æˆ–å³å¯¹é½</p></blockquote><h5 id="å®šä½position"><a href="#å®šä½position" class="headerlink" title=" å®šä½position"></a><p style='font-size: 14px'> å®šä½<code>position</code></p></h5><p>ç»å¯¹å®šä½ (<code>absolute</code>)</p><ul><li>ä½¿ç”¨<code>position: absolute;</code>è„±ç¦»æ–‡æ¡£æµ</li><li>å…ƒç´ çš„ä½ç½®ç”±æœ€è¿‘çš„éé™æ€çˆ¶å®¹å™¨å†³å®šï¼Œç©ºå‡ºçš„ä½ç½®ä¼šè¢«åç»­èŠ‚ç‚¹å¡«è¡¥</li></ul><p>å›ºå®šå®šä½ (<code>fixed</code>)</p><ul><li>ä½¿ç”¨<code>position: fixed;</code>è„±ç¦»æ–‡æ¡£æµ</li><li>å…ƒç´ çš„ä½ç½®å›ºå®šåœ¨è§†å£çš„æŸå¤„ï¼Œä¸å—æ»šåŠ¨å½±å“</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 50px; left: 100px;&quot;</span>&gt;</span>ç»å¯¹å®šä½å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸€æ®µæ™®é€šæ–‡æœ¬ï¼Œå°†å¡«è¡¥ç»å¯¹å®šä½å…ƒç´ çš„ä½ç½®ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>æ–‡ä»¶è¿˜æœªä¸Šä¼  Github</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS DVA-C02</title>
      <link href="/posts/31e3742d.html"/>
      <url>/posts/31e3742d.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://aws.amazon.com/certification/certified-developer-associate/">https://aws.amazon.com/certification/certified-developer-associate/</a></p></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h3 id="1-AWS-Cloud-Overview"><a href="#1-AWS-Cloud-Overview" class="headerlink" title="1. AWS Cloud Overview"></a>1. AWS Cloud Overview</h3><h4 id="AWS-Regions"><a href="#AWS-Regions" class="headerlink" title="AWS Regions"></a>AWS Regions</h4><ul><li>A Region is a cluster of data centers</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231130.png"></p><ul><li>To reuse SSH keys in AWS Region<ul><li>Generate a public SSH key from the private SSH key. Import the key to each AWS Region</li></ul></li></ul><hr><h4 id="AWS-Availability-Zone"><a href="#AWS-Availability-Zone" class="headerlink" title="AWS Availability Zone"></a>AWS Availability Zone</h4><ul><li>ä¸€ä¸ª Region å¯ä»¥æœ‰ 3 - 6 ä¸ª AZ, æ¯ä¸ª AZ éƒ½æ˜¯åˆ†å¼€çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140727.png"></p><hr><h4 id="AWS-Edge-Locations"><a href="#AWS-Edge-Locations" class="headerlink" title="AWS Edge Locations"></a>AWS Edge Locations</h4><ul><li>Deliver content to user with low latency (ç¦»ç”¨æˆ·è¶Šè¿‘, deliver é€Ÿåº¦è¶Šå¿«)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140903.png"></p><hr><h3 id="2-IAM"><a href="#2-IAM" class="headerlink" title="2. IAM"></a>2. IAM</h3><h4 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h4><ul><li>Root Account: Created by default, donâ€™t share with others</li><li>Users: People within the organization</li><li>Groups: Only contain Users, not other Groups (User å¯ä»¥å±äºå¤šä¸ª Group)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145736.png"></p><ul><li>AWS éœ€è¦è‡³å°‘ 5 weeks æ¥ç”Ÿæˆ budget forecasts</li><li>æ³¨æ„, User é»˜è®¤æ— æ³• access AWS Billing and Cost Management console, å¿…é¡»è¦ grant access æ‰è¡Œ</li></ul><hr><h4 id="IAM-Permissions"><a href="#IAM-Permissions" class="headerlink" title="IAM Permissions"></a>IAM Permissions</h4><ul><li>å®šä¹‰äº† User æˆ–è€… Group çš„ Permissions<ul><li>è¦éµå®ˆ Least Privilege Principle</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160124.png"></p><blockquote><p>As an AWS security best practice, you should not create an IAM user and pass the userâ€™s credentials to the application or embed the credentials in the application</p></blockquote><hr><h4 id="IAM-Polices"><a href="#IAM-Polices" class="headerlink" title="IAM Polices"></a>IAM Polices</h4><ul><li>Statements é‡Œé¢å¿…é¡»åŒ…å«: Effect, Principal, Action, Resource<ul><li>Inline Policy æ˜¯ assign ç»™ä¸ªäººçš„</li></ul></li><li>æ³¨æ„, The only resource-based policy IAM support is Trust policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175653.png"></p><blockquote><p>IAM policies define permissions for an action regardless of the method that used to perform the operation.</p></blockquote><hr><h4 id="IAM-MFA"><a href="#IAM-MFA" class="headerlink" title="IAM MFA"></a>IAM MFA</h4><ul><li>Protect Root Accounts and IAM Users</li><li>MFA options: Virtual MFA Device, U2F Sercurity Key (USB)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180624.png"></p><hr><h4 id="IAM-CLI-amp-SDK"><a href="#IAM-CLI-amp-SDK" class="headerlink" title="IAM CLI &amp; SDK"></a>IAM CLI &amp; SDK</h4><ul><li>å¯ä»¥ç”¨ AWS Management Console, AWS CLI, AWS SDK æ¥è®¿é—® AWS<ul><li>Set the <code>DeleteOnTermination</code> attribute to False using the command line</li><li>å¦‚æœè€ƒè¯•é‡åˆ°ä¸ä¼šçš„å°±é€‰ CLI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193342.png"></p><hr><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li>æˆæƒ AWS æœåŠ¡å»åšæŸäº›äº‹</li><li>å¸¸è§çš„ Role: EC2 Instance Role, Lambda Function Role ç­‰ç­‰</li><li>IAM Instance Role: ä¸º EC2 å®ä¾‹åˆ†é… temporary credentialsï¼Œä»¥ä¾¿å®ä¾‹èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®å…¶ä»– AWS æœåŠ¡</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203306.png"></p><blockquote><p>An IAM entity that defines a set of permissions for making requests to AWS services, and will be used by an AWS service</p></blockquote><hr><h4 id="IAM-Security-Tools"><a href="#IAM-Security-Tools" class="headerlink" title="IAM Security Tools"></a>IAM Security Tools</h4><ul><li>IAM Credentials Report: è¿”å›ç”¨æˆ·æ•°æ®å’Œ credentials</li><li>IAM Access Advisor: æ˜¾ç¤ºå½“å‰ç”¨æˆ·è¢«æˆæƒçš„æœåŠ¡å’Œä½¿ç”¨æ—¶é—´</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203553.png"></p><hr><h3 id="3-EC2-Fundamentals"><a href="#3-EC2-Fundamentals" class="headerlink" title="3. EC2 Fundamentals"></a>3. EC2 Fundamentals</h3><h4 id="AWS-EC2"><a href="#AWS-EC2" class="headerlink" title="AWS EC2"></a>AWS EC2</h4><ul><li>EC2 &#x3D; Elastic Compute Cloud &#x3D; IaaS , ç»‘å®š AZ</li><li>SSH åˆ° EC2 Instance çš„ Public IP (è®°ä½ 169, meta-data)<ul><li><code>http://169.254.169.254/latest/meta-data/public-ipv4</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214749.png"></p><ul><li>User Data: EC2 å¯åŠ¨çš„æ—¶å€™è¿è¡Œçš„ä»£ç <ul><li>By default, user data runs only during boot cycle when first lauch instance</li><li>By default, scripts entered as user data are executed with root user privileges</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214956.png"></p><ul><li>å¦‚æœè¦ monitor ä¸€ä¸ª EC2 Instance, <code>aws ec2 monitor-instances --instance-ids &#123;id&#125;</code></li><li>å¦‚æœè¦è§£å†³ EC2 based web servers in high CPU utilization issue<ul><li>Configure an SSL&#x2F;TLS certificate on an Application Load Balancer via AWS Certificate Manager (ACM)</li><li>Create an HTTPS listener on the Application Load Balancer with SSL termination</li></ul></li></ul><hr><h4 id="EC2-Instance-Type"><a href="#EC2-Instance-Type" class="headerlink" title="EC2 Instance Type"></a>EC2 Instance Type</h4><ul><li>ä¸€å…± 7 ç§ EC2 Instance Type, ä½† 4 ç§ç”¨çš„æœ€å¤š<ul><li>General Purpose: Balanced (å¹³è¡¡çš„)</li><li>Compute Optimized: High performance (å¤„ç† Batch, è§†é¢‘å’Œ HPC)</li><li>Memory Optimized: Process data in memory (å¤„ç† cache)</li><li>Storage Optimized: Read and write data on local storage (OLTP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220941.png"></p><hr><h4 id="EC2-Security-Groups"><a href="#EC2-Security-Groups" class="headerlink" title="EC2 Security Groups"></a>EC2 Security Groups</h4><ul><li>Control how traffic is allowed in and out of EC2 instance<ul><li>Security groups only contain allow rules (EC2 å‡ºé—®é¢˜ä¼˜å…ˆæ£€æŸ¥ Security Group)</li></ul></li><li>å¯ä»¥ä½œä¸º Security Group çš„ Inbound Rule æœ‰ IP address, CIDR block, Security Group</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222531.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223020.png"></p><hr><h4 id="EC2-Instance-Purchasing-Options"><a href="#EC2-Instance-Purchasing-Options" class="headerlink" title="EC2 Instance Purchasing Options"></a>EC2 Instance Purchasing Options</h4><ul><li>On-Demand Intances: Short workload, pay by second (çŸ­æœŸå†…ç´§æ€¥ä½¿ç”¨)</li><li>Reserved: 1 - 3 years (72% discount, reserve capacity in an AZ)<ul><li>Reserved Instance: Long workload (1 - 3 å¹´, discount éšå¹´ä»½å¢åŠ )</li><li>Convertible Reserved Instances (RI): Long workload with flexible instance (66% discount, ä½†æ˜¯å¯ä»¥è‡ªç”±æ”¹å˜ Instance Type)</li></ul></li><li>Saving Plans: 1 - 3 years, commitment to an amount of usage (72% discount, è¦å®šä¸€ä¸ªä½¿ç”¨ä¸Šé™, è¶…è¿‡ä¸Šé™å°±å˜æˆ On-Demand)<ul><li>è¿˜æœ‰ Compute Saving Plan, 66% discount, work with Lambda and Fargate</li></ul></li><li>Spot Instance: Short workload, can lose instance (æœ€ä¾¿å®œ, 90% discount)</li><li>Dedicated Host: The physical server is yours (æœ€è´µ, å¯ä»¥æ§åˆ¶ how Instance placed)</li><li>Dedicated Instance: Run hardware, but not lockdown to you (æœåŠ¡å™¨å¤§éƒ¨åˆ†æ˜¯ä½ çš„)</li><li>Capacity Reservation: Reserve capacity in AZ (æ¯”å¦‚ä¸€å¤©ä¸­åªæœ‰å‡ ä¸ªå°æ—¶éœ€è¦ EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224149.png"></p><ul><li>Reserved Instance æœ‰ Regional å’Œ Zonal, Zonal æä¾› capacity reservation, Regional ä¸æä¾›</li></ul><hr><h3 id="4-EC2-Instance-Storage"><a href="#4-EC2-Instance-Storage" class="headerlink" title="4. EC2 Instance Storage"></a>4. EC2 Instance Storage</h3><h4 id="AWS-EBS"><a href="#AWS-EBS" class="headerlink" title="AWS EBS"></a>AWS EBS</h4><ul><li>Block-level storage, ç±»ä¼¼ network drive, ç»‘å®š AZ, provisioned capacity<ul><li>å¯ä»¥ä»ä¸€ä¸ª EC2 Instance å–ä¸‹æ¥è£…åˆ°å¦ä¸€ä¸ªä¸Š</li><li>è®°ä½ EBS æ˜¯ç»‘å®š AZ çš„, å¾ˆé‡è¦</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191440.png"></p><ul><li>EBS - Delete on Termination attribute<ul><li>By default, Root Volume will be deleted on termination (é‡è¦)</li><li>By default, other EBS volume will not be deleted on termination (é‡è¦)</li><li>Can be controled by AWS console &#x2F; AWS CLI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002840.png"></p><ul><li>å…³äº EBS Encryption æœ‰ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>Encryption by default is a Region-specific setting. If you enable it for a Region, you cannot disable it for individual volumes or snapshots in that Region</li><li>A volume restored from an encrypted snapshot, or a copy of an encrypted snapshot is always encrypted</li></ul></li></ul><hr><h4 id="EBS-Snapshots"><a href="#EBS-Snapshots" class="headerlink" title="EBS Snapshots"></a>EBS Snapshots</h4><ul><li>Make a backup of EBS volume (å¤‡ä»½ EBS)<ul><li>å¯ä»¥å°†è¿™ä¸ª snapshot ç”¨åœ¨å…¶ä»– AZ æˆ–è€… Region ä¸Š</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195715.png"></p><ul><li>EBS Snapchot Archive: ä¾¿å®œ 75%</li><li>Recycle Bin: Setup rules to retain deleted snapshots (å¯ä»¥ recover)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195833.png"></p><hr><h4 id="AWS-AMI"><a href="#AWS-AMI" class="headerlink" title="AWS AMI"></a>AWS AMI</h4><ul><li>AMI: Amazon Machine Image, customization of an EC2 Instance<ul><li>å¯ä»¥æ›´å¥½çš„ç®¡ç†å’Œå¯åŠ¨ EC2 Instance</li></ul></li><li>Built for a specific region and can copy across regions (AMI è·¨åŸŸå¤åˆ¶)<ul><li>æ³¨æ„, AMIs are built for a specific AWS Region</li></ul></li></ul><blockquote><p>When the new AMI is copied from Region A into Region B, it automatically creates a snapshot in Region B (æ³¨æ„, è·¨åŸŸ copy AMI ä¼šäº§ç”Ÿ snapshot)</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200249.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200341.png"></p><hr><h4 id="EC2-Instance-Store"><a href="#EC2-Instance-Store" class="headerlink" title="EC2 Instance Store"></a>EC2 Instance Store</h4><ul><li>Block-level storage, ç‰©ç†ç¡¬ç›˜ (Physical drive, temporary storage, å¯ä»¥å¤„ç†æ•°æ®åº“)</li><li>High random I&#x2F;O performance, good for cache at low cost (é‡è¦)</li><li>EC2 Instance Store lose when stopped (Ephemeral, æ•°æ®åœ¨ Instance Store å…³é—­æ—¶æ¶ˆå¤±)<ul><li>åæ­£è®°ä½, Instance Store ä¸èƒ½å¤ç”¨, Instance Store é‡Œçš„æ•°æ®ä¸ä¼š preserve</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203146.png"></p><hr><h4 id="EBS-Volume-Types"><a href="#EBS-Volume-Types" class="headerlink" title="EBS Volume Types"></a>EBS Volume Types</h4><ul><li>General Purpose (gp2 &#x2F; gp3): Balanced, cost-effective</li><li>Provisioned IOPS (io1 &#x2F; io2): High-performance, support Multi-Attach<ul><li>Low latency, high throughput</li><li>è®°ä½, io çš„æ¯” gp çš„è´µ, ä½†æ˜¯ io çš„ IOPS ä¹Ÿæ¯” gp é«˜</li><li>gp2 çš„ max IOPS æ˜¯ 5.3 TiB</li></ul></li><li>Hard Disk Drives (HDD): Data intensive (st1) æˆ–è€… less frequent access (sc1)<ul><li>HDD ä¸å¯ä»¥ç”¨æ¥åˆ›å»º EC2</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203437.png"></p><hr><h4 id="EBS-Multi-Attach"><a href="#EBS-Multi-Attach" class="headerlink" title="EBS Multi-Attach"></a>EBS Multi-Attach</h4><ul><li>Attach same EBS volume to multiple EC2 instance in same AZ (è®°ä½æ˜¯ç›¸åŒçš„ AZ)</li><li>Only for io1 &#x2F; io2 family (Provisioned IOPS SSD, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203956.png"></p><hr><h4 id="EBS-RAID"><a href="#EBS-RAID" class="headerlink" title="EBS RAID"></a>EBS RAID</h4><ul><li>RAID 0 (çœ‹é‡ I&#x2F;O performance)<ul><li>Use RAID 0 when I&#x2F;O performance is more important than fault tolerance</li><li>å¯ä»¥ç”¨æ¥æé«˜ EBS volume çš„ performance</li></ul></li><li>RAID 1 (çœ‹é‡ falut tolerance)<ul><li>Use RAID 1 when fault tolerance is more important than I&#x2F;O performance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q37-i1.jpg"></p><hr><h4 id="AWS-EFS"><a href="#AWS-EFS" class="headerlink" title="AWS EFS"></a>AWS EFS</h4><ul><li>NFS (network file system), å¯ä»¥ mount åˆ°å¤šä¸ª EC2 Instance<ul><li>Scale automatically, highly availiable, no capacity planning</li></ul></li><li>EC2 Instances can access files on an EFS file system across AZs, Regions and VPCs<ul><li>é‡è¦, å¯ä»¥ä»ä¸åŒçš„ AZ, Region, VPC æ¥ access</li><li>å¯ä»¥ç”¨ VPC Security Group æˆ–è€… IAM Policy æ¥ control access to EFS</li></ul></li><li>EFS Infrequent Access (å¦‚æœé‡åˆ° POSIX compliant file storage)<ul><li>å› ä¸º EFS åªèƒ½å’Œ Linux Instance (POSIX) ä¸€èµ·ç”¨, Windows ä¸è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233415.png"></p><ul><li>EFS æœ‰ 2 ç§ Performance Mode (set at EFS creation time)<ul><li>General Purpose: Default (web server)</li><li>Max I&#x2F;O: High latency, throughput, parallel (big data, media process)</li></ul></li><li>EFS æœ‰ 3 ç§ Throughput Mode (é‡è¦)<ul><li>Bursting: å¾ˆå¿«</li><li>Provisioned: è®¾ç½®ä¸Šé™ (high throughput, å¤„ç†å¤§é‡æ–‡ä»¶ migrate æ—¶å€™ä½¿ç”¨)</li><li>Elastic: æ ¹æ® workload æ¥ scale</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233732.png"></p><blockquote><p>EFS å¹¶ä¸æ˜¯æ°¸è¿œæœ€è´µçš„, ä½† S3 æ°¸è¿œæ˜¯æœ€ä¾¿å®œçš„ã€‚<br>åœ¨æ€§èƒ½æ–¹é¢ï¼ŒAWS EBS ç”±äºå¯ä»¥æä¾›é«˜ IOPSï¼Œé€Ÿåº¦æœ€å¿«ã€‚ä½†æ˜¯åœ¨å…±äº«å’Œå¯å¼¹æ€§ä¼¸ç¼©çš„æ–‡ä»¶ç³»ç»Ÿæ–¹é¢ï¼ŒAWS EFS æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p></blockquote><hr><h3 id="5-ELB-amp-ASG"><a href="#5-ELB-amp-ASG" class="headerlink" title="5. ELB &amp; ASG"></a>5. ELB &amp; ASG</h3><h4 id="Scalability-amp-High-Availability"><a href="#Scalability-amp-High-Availability" class="headerlink" title="Scalability &amp; High Availability"></a>Scalability &amp; High Availability</h4><ul><li>Vertical (ç«–ç›´) Scale: Increase the size of the Instance (å¢åŠ å¤§å°)</li><li>Horizontal (æ°´å¹³) Scale: Increase the number of the Instance (å¢åŠ æ•°é‡)</li><li>High Availability: Running application in at least 2 AZ (Disaster recovery, é‡è¦)</li></ul><blockquote><p>high availability + high scalability æ˜¯ <code>ALB + ECS</code> æˆ–è€… <code>API Gateway + Lambda</code></p></blockquote><hr><h4 id="AWS-ELB"><a href="#AWS-ELB" class="headerlink" title="AWS ELB"></a>AWS ELB</h4><ul><li>Foward traffic to multiple EC2 Instances (æµé‡æ§åˆ¶)<ul><li>High availability across AZs, handle failures of downstream instances</li></ul></li><li>Health Check: å¯ä»¥çŸ¥é“ EC2 Instance æ˜¯å¦æ˜¯ Healthy çš„<ul><li>ELB åœ¨ public subnet, ASG åœ¨ private subnet (é‡è¦)</li></ul></li><li>ELB cannot distribute traffic for targets deployed in different region</li><li>ä½¿ç”¨ ELB çš„åŸå› , æœ‰ 2 ç‚¹<ul><li>Separate public traffic from private traffic</li><li>Build a highly available system</li></ul></li><li>Elastic Load Balancing use ports <code>1024-65535</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img141400.png"></p><ul><li>Application Load Balancer (HTTP &#x2F; HTTPS, Layer 7)</li><li>Network Load Balancer (TCP &#x2F; UDP, Layer 4)<ul><li>NLB provide static DNS and static IP, ALB only provide static DNS</li></ul></li><li>Gateway Load Balancer (Security, Layer 3, è¦ç‰¹åˆ«æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090125.png"></p><ul><li>å¦‚æœé—®åˆ° ELB route traffic åˆ°ä¸€ä¸ª instance æˆ–è€… AZ æ›´å¤š, æœ‰ 2 ç§å¯èƒ½æ€§<ul><li>Instances of a specific capacity type arenâ€™t equally distributed across AZ</li><li>Sticky sessions are enabled for the load balancer</li></ul></li></ul><hr><h4 id="Application-Load-Balancer-ALB"><a href="#Application-Load-Balancer-ALB" class="headerlink" title="Application Load Balancer (ALB)"></a>Application Load Balancer (ALB)</h4><ul><li>Deal with Layer 7 (HTTP &#x2F; HTTPS, WebSocket)</li><li>Route base on Path <code>/Home</code> or Query <code>?Platform=Mobile</code></li><li>ALB adds an additional header called <code>X-Forwarded-For</code> contains the clientâ€™s IP</li><li>å¯ä»¥ configure ALB to redirect HTTP to HTTPS (é‡è¦)</li><li>ALB æ— æ³•è¢« assign Elstaic IP, NLB å¯ä»¥</li><li>å¦‚æœ ALB æ²¡æœ‰ register ä»»ä½• target, ä¼šé€ æˆ <code>HTTP 503: Service unavailable</code></li><li>å¯ä»¥ä½¿ç”¨ ALB access logs æ¥ analyze incoming requests for latencies and IP address</li><li>You cannot specify publicly routable IP addresses to an ALB</li><li>An ALB has three possible target types: Instance, IP, and Lambda</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192523.png"></p><ul><li>Routing tables to different target groups<ul><li>Route based on path in URL</li><li>Route based on hostname in URL</li><li>Route based on Query String, Headers, Client IP</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142631.png"></p><blockquote><p>To forward all requests to the website so that the requests will use HTTPS, a solutions architect can create a listener rule on the ALB that redirects HTTP traffic to HTTPS.</p></blockquote><hr><h4 id="Network-Load-Balancer-NLB"><a href="#Network-Load-Balancer-NLB" class="headerlink" title="Network Load Balancer (NLB)"></a>Network Load Balancer (NLB)</h4><ul><li>Deal with Layer 4 (TCP &#x2F; UDP), å¾ˆå¿«, å¤„ç†æœ‰å¤§é‡ request çš„æƒ…å†µ (æ¯”å¦‚é“¶è¡Œå’Œæ¸¸æˆ)<ul><li>NLB best suited for use-cases involving low latency and high throughput workloads</li></ul></li><li>One static IP per AZ or use Elastic IP</li><li>NLB supports HTTP health checks as well as TCP and HTTPS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144359.png"></p><blockquote><p>If you specify targets using an instance ID, traffic is routed to instances using the primary private IP address specified in the primary network interface for the instance.</p></blockquote><hr><h4 id="Gateway-Load-Balancer-GWLB"><a href="#Gateway-Load-Balancer-GWLB" class="headerlink" title="Gateway Load Balancer (GWLB)"></a>Gateway Load Balancer (GWLB)</h4><ul><li>Deal with Layer 3 (Security, 3rd Party)</li><li>GWLB allows perform inline inspection of traffic from multiple spoke VPCs in a simplified and scalable fashion</li><li>Use GENEVE protocol on port 6081</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223042.png"></p><hr><h4 id="Sticky-Sessions-Session-Affinity"><a href="#Sticky-Sessions-Session-Affinity" class="headerlink" title="Sticky Sessions (Session Affinity)"></a>Sticky Sessions (Session Affinity)</h4><ul><li>Same client is always redirect to the same instance behind a load balancer</li><li>Make sure user doesnâ€™t loss session data (æ¯”å¦‚ç”¨æˆ·ç™»å½•)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223425.png"></p><ul><li>Application-based Cookies: Donâ€™t use AWSALB, AWSALBAPP, AWSALBTG</li><li>Duration-based Cookies: AWSALB for ALB, AWSELB for CLB</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223604.png"></p><hr><h4 id="Cross-Zone-Load-Balancing"><a href="#Cross-Zone-Load-Balancing" class="headerlink" title="Cross Zone Load Balancing"></a>Cross Zone Load Balancing</h4><ul><li>ELB distributes traffic evenly across all registered EC2 instances in all AZs<ul><li>æ‰€æœ‰ Instance åˆ†åˆ°çš„ traffic ä¸€å®šæ˜¯ä¸€æ ·çš„</li><li>å¦‚æœæ²¡æœ‰ enable, é‚£ä¹ˆ AZ å†…éƒ¨å°±æ˜¯å¹³å‡åˆ†</li></ul></li><li>ALB enabled by default, NLB disabled by default (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230059.png"></p><hr><h4 id="SSL-Certificates"><a href="#SSL-Certificates" class="headerlink" title="SSL Certificates"></a>SSL Certificates</h4><ul><li>Allow traffic between client and load balancer encrypted in transit (HTTPS)<ul><li>Manage SSL certificates using ACM (AWS Certificate Manager)</li></ul></li><li>å¦‚æœé—®åˆ°éœ€è¦ç®¡ç†å¾ˆå¤šä¸ª SSL æˆ–è€… TSL, é€‰æ‹© SNI (é‡è¦)</li><li>ç”¨æ¥ deploy SSL&#x2F;TLS çš„ AWS æœåŠ¡æ˜¯ AWS Certificate Manger å’Œ IAM (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230614.png"></p><ul><li>Could be used in ALB &amp; NLB, use SNI to make it work</li><li>SNI: Load multiple SSL certificates onto one web server (Server Name Indication)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230910.png"></p><blockquote><p>Server Name Indication (SNI) allows you to expose multiple HTTPS applications each with its own SSL certificate on the same listener.</p></blockquote><hr><h4 id="Deregistration-Delay-Connection-Draining"><a href="#Deregistration-Delay-Connection-Draining" class="headerlink" title="Deregistration Delay (Connection Draining)"></a>Deregistration Delay (Connection Draining)</h4><ul><li>Waiting for existing connections to complete</li><li>Connection Draining enables the load balancer to complete in-flight requests made to instances that are de-registering or unhealthy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231418.png"></p><hr><h4 id="AWS-ASG"><a href="#AWS-ASG" class="headerlink" title="AWS ASG"></a>AWS ASG</h4><ul><li>ASG å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale in æˆ–è€… out åŸºäºæœåŠ¡å™¨å‹åŠ› (ASG æ˜¯å…è´¹çš„)</li><li>ASG å¯ä»¥ä¿è¯æœ€å°‘æˆ–æœ€å¤šæœ‰å¤šå°‘ EC2 Instance åœ¨å·¥ä½œ (min, max)<ul><li>ASG æ˜¯åœ¨ä¸€ä¸ª Region é‡Œé¢å»æ ¹æ® availiable çš„ AZ è¿›è¡Œ scale</li><li>ASG æ²¡æœ‰åŠæ³• span across multiple Regions</li></ul></li><li>å½“ä¸€ä¸ª Instance æ˜¯ unhealthy çš„æ—¶å€™, ASG ä¼š terminate è¿™ä¸ª Instance<ul><li>ASG åœ¨ä¸€ä¸ª AZ é‡Œæœ€æ—© terminate çš„æ˜¯é‚£ä¸ªæœ€æ—©è¢« launch çš„ Instance</li><li>é‡åˆ° unbalanced çš„æƒ…å†µ, ASG æ˜¯å…ˆ launch new instance ç„¶å terminate old instance</li><li>åœ¨ unhealthy çš„æƒ…å†µä¸‹æ˜¯å…ˆ terminate unhealth Instance ç„¶å create new instance</li></ul></li><li>å¦‚æœé—®åˆ°åœ¨æŸä¸ªèŠ‚æ—¥å‰å» scale, é‚£å°±æ˜¯ ASG Scheduled Action</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232350.png"></p><ul><li>å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale out æˆ–è€… in åŸºäºæœåŠ¡å™¨å‹åŠ›</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232615.png"></p><ul><li>Launch Template: å¯ä»¥ä½œä¸º template æ¥ç”Ÿæˆ EC2 Instance<ul><li>Launch Template æ˜¯ç®¡è¦ç”Ÿæˆä»€ä¹ˆ Instance çš„ (eg. Spot, On-Demand)</li><li>Launch Configuration æ˜¯ç®¡ç”Ÿæˆçš„ Instance çš„ä¿¡æ¯çš„ (eg. AMI, security group)</li></ul></li><li>å¦‚æœè¦æ›´æ–° Launch Template, éœ€è¦åˆ æ‰æ—§çš„ç„¶åä½¿ç”¨æ–°çš„ (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232823.png"></p><ul><li>å¯ä»¥å’Œ CloudWatch Alarm ä¸€èµ·æ ¹æ®æœåŠ¡å™¨å‹åŠ› scale out æˆ– scale in<ul><li>éœ€è¦ä¸€ä¸ª CloudWatch custom metric</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232959.png"></p><ul><li>ASG Scaling Cooldowns<ul><li>After a scaling activity, you are in the cooldown period (default 300 seconds)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025149.png"></p><ul><li>ASG ä¸ terminate Instance çš„æƒ…å†µ<ul><li>The health check grace period for the instance has not expired</li><li>The instance maybe in Impaired status</li><li>The instance has failed the Elastic Load Balancing (ELB) health check status</li></ul></li><li>å¦‚æœ ASG æ²¡æœ‰ replace unhealthy EC2 Instance, éœ€è¦ change health check type from EC2 to ELB using configuration file</li></ul><hr><h4 id="Scaling-Policies"><a href="#Scaling-Policies" class="headerlink" title="Scaling Policies"></a>Scaling Policies</h4><ul><li>Target Tracking Scaling: æ ¹æ® CPU ç”¨é‡æˆ–è€… SQS é•¿åº¦æ¥ scale</li><li>Simple &#x2F; Step Scaling: å’Œ CloudWatch Alarm å…³è”</li><li>Scheduled Actions: æ¯”å¦‚åœ¨æ„Ÿæ©èŠ‚é‚£å¤©è¿›è¡Œ scale</li><li>Predictive Scaling: Forecast load and schedule scaling ahead</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233532.png"></p><ul><li>æ³¨æ„, å¯¹äº EC2 Scaling Policy æ¥è¯´, ä¸€å®šä¸å¯èƒ½è¶…è¿‡ maximum capacity (é‡è¦)</li></ul><hr><h4 id="ASG-Instance-Refresh"><a href="#ASG-Instance-Refresh" class="headerlink" title="ASG Instance Refresh"></a>ASG Instance Refresh</h4><ul><li>Update launch template and then re-creating all EC2 Instance</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212220.png"></p><hr><h3 id="6-AWS-Fundamentals"><a href="#6-AWS-Fundamentals" class="headerlink" title="6. AWS Fundamentals"></a>6. AWS Fundamentals</h3><h4 id="AWS-RDS"><a href="#AWS-RDS" class="headerlink" title="AWS RDS"></a>AWS RDS</h4><ul><li>ä½¿ç”¨ RDS çš„å¥½å¤„ (å¯¹æ¯”å°†æ•°æ®åº“å­˜åœ¨ EC2 ä¸Š)<ul><li>Automated provisioning, auto-scaling, backup</li><li>Read Replicas (æœ€å¤š 15 ä¸ª) å’Œ Multi-AZ</li></ul></li><li>RDS Read Replica: If master database is encrypted, the replica is also encrypted<ul><li>æ³¨æ„, Read Replica æé«˜çš„æ˜¯ read, è€Œä¸æ˜¯ scale æ•°æ®åº“çš„ storage (è€Œä¸” Replica è´µ), å¤„ç†ç±»ä¼¼ report æˆ–è€… analytics çš„å°±æ˜¯ Read Replica</li><li>Read Replica ä¸æ˜¯æé«˜ High Availability, Multi-AZ æ‰æ˜¯</li><li>Cross-Region Read Replica: å¯ä»¥ä½œä¸º DB backup (Replica in different Region)</li></ul></li><li>RDS Multi-AZ: RDS create a primary DB Instance and synchronously replicates the data to a standby instance in a different AZ (High Availability)<ul><li>RDS Multi-AZ update æ˜¯ standby å’Œ primary ä¸€èµ· update (ä¼šæœ‰ downtime)</li></ul></li><li>Support MySQL, PostgreSQL, MariaDB, Oracle, MS SQL Server, and Amazon Aurora</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161720.png"></p><ul><li>RDS - Storage Auto Scaling (é‡è¦)<ul><li>For application with unpredictable workloads</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161952.png"></p><ul><li>RDS - Disaster Recovery<ul><li>Create a Read Replica in different region and enable Multi-AZ on Read Replica</li></ul></li><li>IAM Database Authentication: å¯ä»¥ç”¨æ¥è®¿é—® RDS</li><li>å¯ä»¥ä» RDS Read Replica è¿ç§»åˆ° Aurora Read Replica, è¿™ä¸ªåšæ³•å¯ä»¥ minimal change<ul><li>æ³¨æ„, è¿™åªé€‚ç”¨äº Read Replica çš„æƒ…å†µä¸‹, æ­£å¸¸æƒ…å†µå°±ç›´æ¥å¼€ auto scaling</li></ul></li><li>RDS OS update æ˜¯å…ˆ update standby, ç„¶åæŠŠ standby promote æˆ primary, ç„¶å update åŸæ¥çš„ primary, æœ€ååŸæ¥çš„ primary å˜æˆæ–°çš„ standby (é‡è¦)</li></ul><hr><h4 id="Read-Replicas-vs-Multi-AZ"><a href="#Read-Replicas-vs-Multi-AZ" class="headerlink" title="Read Replicas vs. Multi AZ"></a>Read Replicas vs. Multi AZ</h4><ul><li>Read Replicas: Scalability, Async Replication<ul><li>Within AZ, Cross AZ or Cross Region</li></ul></li><li>Read Replicas in Same Region is free (Replication in AZs), Cross Region is not free</li><li>You canâ€™t create encrypted Read Replicas from an unencrypted RDS DB instance.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173522.png"></p><ul><li>ç”¨ Production databse å¤„ç†æ—¥å¸¸, ç”¨ Read Replica æ¥å»ºä¸€ä¸ªå‰¯æœ¬å¤„ç†æ•°æ®åˆ†æ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173820.png"></p><ul><li>Multi AZ: High Availability, Disaster Recovery, Sync Replication<ul><li>åœ¨ Multi-AZ çš„æƒ…å†µä¸‹, å½“ RDS æ•°æ®åº“ goes down, CNAME ä¼šæ›´æ–°æŒ‡å‘ standby</li><li>Multi AZ ä¸éœ€è¦ä½ å»æ›´æ”¹ SQL connection string</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174148.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174357.png"></p><hr><h4 id="AWS-Aurora"><a href="#AWS-Aurora" class="headerlink" title="AWS Aurora"></a>AWS Aurora</h4><ul><li>Support PostgreSQL and MySQL (ä¸éœ€è¦ç®¡ç† storage)</li><li>Aurora æ²¡æœ‰ standby database, Aurora Replica å¯ä»¥ä½œä¸º failover target</li><li>ä¸€èˆ¬æ¥è¯´, Aurora æ¯” RDS å¿«</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img183915.png"></p><ul><li>High Availiability &amp; Read Scaling (Aurora Read Replica)<ul><li>One Master Write, Multiple Read Replicas (Up to 15 Replica), ä¸€å…± 16 ä¸ª</li><li>å¦‚æœé—®åˆ°å’Œ Aurora æœ‰å…³, ä¸”å…³äºå¤„ç†ç½‘ç»œè¯·æ±‚æ¿€å¢çš„é—®é¢˜, é€‰ Aurora Replica</li><li>Replica Tier è¶Šé«˜, failover æ—¶å°±ä¼šå…ˆè¢« promote</li></ul></li><li>å¦‚æœé—®åˆ°å…³äº Aurora çš„ Auto-Scaling, é‚£å°±æ˜¯ Aurora Serverless</li><li>å¦‚æœé—®åˆ° Aurora è€Œä¸”æ˜¯ test database, é€‰æ‹© Aurora Database Cloning</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184105.png"></p><hr><h4 id="RDS-Security"><a href="#RDS-Security" class="headerlink" title="RDS Security"></a>RDS Security</h4><ul><li>At-rest encryption: AWS KMS (Key Management Service)</li><li>In-flight encryption: AWS TLS Certificates</li><li>IAM Authentication: IAM roles to connect to database (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img133048.png"></p><hr><h4 id="RDS-Proxy"><a href="#RDS-Proxy" class="headerlink" title="RDS Proxy"></a>RDS Proxy</h4><ul><li>Have a proxy for access RDS or Aurora, ç¼“è§£æ•°æ®åº“å‹åŠ›, minimize open connections<ul><li>Allow apps to pool and share DB connections (æé«˜ DB efficiency)</li><li>Reduced RDS &amp; Aurora failover time by up 66% (é‡è¦)</li><li>Enforce IAM authentication for DB</li></ul></li><li>Serverless, auto scaling, highly avaliable (Multi-AZ)</li><li>Not publicly accessible (Need to use VPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184531.png"></p><hr><h4 id="AWS-ElastiCache"><a href="#AWS-ElastiCache" class="headerlink" title="AWS ElastiCache"></a>AWS ElastiCache</h4><ul><li>Manage Redis or Memcached (ElastiCache å¯ä»¥è§£å†³æ•°æ®åº“é«˜é¢‘è¯»å–çš„é—®é¢˜, é‡è¦)<ul><li>ElastiCache ä¸æ”¯æŒ relational database, ä¹Ÿä¸èƒ½ç”¨ SQL queries</li></ul></li><li>Cache are in-memory database with high performance and low latency (compute-intensive)</li><li>Cache helps reduce load off of database for read intensive workload (read heavy)</li><li>Help to make application stateless (AWS è´Ÿè´£å¤§éƒ¨åˆ†å·¥ä½œ)</li><li>å¤„ç† S3 çš„æ˜¯ CloudFront, è€Œä¸æ˜¯ ElastiCache (è®°ä½)</li><li>æ”¯æŒ multi-threading çš„æ˜¯ ElastiCache for Memcached</li><li>å…³äº ElastiCache for Redis cluster çš„ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>All the nodes in a Redis cluster must reside in the same region</li><li>While using Redis with cluster mode enabled, you cannot manually promote any of the replica nodes to primary</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184841.png"></p><ul><li>DB Cache: Get data from ElastiCache<ul><li>If not avaliable, get from RDS and store in ElastiCache</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185024.png"></p><ul><li>User Session: Write Session data into ElastiCache<ul><li>User in another instance could still be logged in</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185153.png"></p><ul><li>Redis vs Memcahed<ul><li>Redis: Read Replicas, High Availiablity, Backup and restore (éå¸¸é‡è¦)</li><li>Memcached: Not High Availiablity, No Backup, risk to lose data, Multi-threaded</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185310.png"></p><blockquote><p>The maximum number of Read Replicas you can add in an ElastiCache Redis Cluster with Cluster Mode Disabled is 5.</p></blockquote><hr><h4 id="ElastiCache-Strategies"><a href="#ElastiCache-Strategies" class="headerlink" title="ElastiCache Strategies"></a>ElastiCache Strategies</h4><ul><li>Lazy Loading &#x2F; Cache-Aside &#x2F; Lazy Population<ul><li>Pros: Only requested data is cached (é‡è¦, only requested data)</li><li>Cons: Cache miss penalty results in 3 round trips &amp; stale data (æ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200816.png"></p><ul><li>Write Through (write è€—æ—¶, ä½†æ˜¯ read çš„ latency å¾ˆä½)<ul><li>Pros: Data in cache is never stale, write penalty with 2 calls (æ•°æ®ä¸€å®šæ˜¯æœ€æ–°çš„)</li><li>Cons: Missing data until data is added &#x2F; updated in the DB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201308.png"></p><ul><li>Cache Evictions &amp; Time-to-live (TTL)<ul><li>Cache Evictions: è¿™é‡ŒæŒ‡çš„æ˜¯ç¼“å­˜è¾¾åˆ°ä¸Šé™çš„æƒ…å†µ, éœ€è¦ç”¨ TTL å»æŒ‰æ—¶æ¸…ç†ç¼“å­˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201512.png"></p><hr><h4 id="MemoryDB-for-Redis"><a href="#MemoryDB-for-Redis" class="headerlink" title="MemoryDB for Redis"></a>MemoryDB for Redis</h4><ul><li>Redis-compatible, durable, in-memory database service (ä¸º Redis æœåŠ¡)</li><li>Durable in-memory data storage with Multi-AZ transactional log</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201727.png"></p><hr><h3 id="7-Route-53"><a href="#7-Route-53" class="headerlink" title="7. Route 53"></a>7. Route 53</h3><h4 id="Whatâ€™s-DNS"><a href="#Whatâ€™s-DNS" class="headerlink" title="Whatâ€™s DNS"></a>Whatâ€™s DNS</h4><ul><li>Translate hostname into IP address: <code>www.google.com = 172.217.18.36</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213136.png"></p><hr><h4 id="AWS-Route-53"><a href="#AWS-Route-53" class="headerlink" title="AWS Route 53"></a>AWS Route 53</h4><ul><li>User can update the DNS records (High available, scalable)</li><li>Route 53 is a Domain Registrar</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213527.png"></p><ul><li>Route 53 Records:<ul><li>Domain Name, Record Type, Value, Routing Policy, TTL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213613.png"></p><ul><li>Route 53 Record Types<ul><li>A: IPv4</li><li>AAAA: IPv6</li><li>CNAME: Map hostname to another hostname</li><li>NS: Name Servers for the Hosted Zone</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213753.png"></p><ul><li>Route 53: Hosted Zones<ul><li>Public Hosted Zones: Public domain name</li><li>Private Hosted Zones: Private domain name (VPC)</li></ul></li></ul><blockquote><p>æ³¨æ„, DNS hostnames and DNS resolution are required settings for private hosted zones</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234126.png"></p><ul><li>GoDaddy + Route 53 (As DNS Service Provider)<ul><li>Create a Public Hosted Zone and update the 3rd party Registrar NS records</li></ul></li><li>Route 53 Health Check<ul><li>å¦‚æœ ELB å‡ºé—®é¢˜, å°±å»æ‰¾ Route 53 Health Check</li></ul></li></ul><hr><h4 id="Route-53-TTL"><a href="#Route-53-TTL" class="headerlink" title="Route 53 TTL"></a>Route 53 TTL</h4><ul><li>TTL: Time To Live (ç”Ÿå­˜æ—¶é—´)<ul><li>How long the value should be cached (åç«¯æ›´æ–°ä¸ä»£è¡¨ cache æ›´æ–°äº†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232659.png"></p><hr><h4 id="CNAME-vs-Alias"><a href="#CNAME-vs-Alias" class="headerlink" title="CNAME vs Alias"></a>CNAME vs Alias</h4><ul><li>CNAME: Point a hostname to another hostname<ul><li>ä» <code>acme.example.com</code> åˆ° <code>zenith.example.org</code> æˆ–è€… <code>example.com</code> åˆ° <code>example.net</code></li></ul></li><li>Alias: Point a hostname to an AWS resource (å¯¹è±¡æ˜¯ CloudFront, S3 è¿™äº›)<ul><li>ä» <code>covid19survey.com</code> åˆ° <code>www.covid19survey.com</code></li><li>ä» <code>app.mydomain.com</code> åˆ° <code>app.amazonaws.com</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233313.png"></p><hr><h4 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h4><ul><li>Health Checks are only for public resources</li><li>Health Check æ£€æµ‹: Endpoints, å…¶ä»– Health Checks, CloudWatch Alarms (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000106.png"></p><hr><h4 id="Routing-Policy-Simple"><a href="#Routing-Policy-Simple" class="headerlink" title="Routing Policy (Simple)"></a>Routing Policy (Simple)</h4><ul><li>Define how Route 53 responds to DNS queries (ä¸€å…± 7 ç§ Routing Policies)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234623.png"></p><ul><li>Simple: Route traffic to a single resource<ul><li>If multiple values returned, a random one is chosen by client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234350.png"></p><hr><h4 id="Routing-Policy-Weighted"><a href="#Routing-Policy-Weighted" class="headerlink" title="Routing Policy (Weighted)"></a>Routing Policy (Weighted)</h4><ul><li>Weighted: Control the % of the request go to each resource</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234856.png"></p><hr><h4 id="Routing-Policy-Latency"><a href="#Routing-Policy-Latency" class="headerlink" title="Routing Policy (Latency)"></a>Routing Policy (Latency)</h4><ul><li>Latency: Redirect to the resource that has the least latency close to us</li><li>Latency is based on traffic between users and AWS Regions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235654.png"></p><hr><h4 id="Routing-Policy-Failover"><a href="#Routing-Policy-Failover" class="headerlink" title="Routing Policy (Failover)"></a>Routing Policy (Failover)</h4><ul><li>Failover: Have a Primary Instance and a Secondary Instance (é‡è¦)<ul><li>When failover, switch to Secondary Instance</li></ul></li><li>æ³¨æ„, å½“é—®åˆ° failover çš„æ—¶å€™, é€‰æ‹©çš„æ˜¯ active-passive failover routing policy<ul><li>æ²¡æœ‰ä»€ä¹ˆ active-active, åªæœ‰ active-passive</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150940.png"></p><hr><h4 id="Routing-Policy-Geolocation"><a href="#Routing-Policy-Geolocation" class="headerlink" title="Routing Policy (Geolocation)"></a>Routing Policy (Geolocation)</h4><ul><li>Geolocation: Routing based on user location<ul><li>Need to create a â€œDefaultâ€ record</li><li>Use cases: website localization, restrict content distribution ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151650.png"></p><hr><h4 id="Routing-Policy-Geoproximity"><a href="#Routing-Policy-Geoproximity" class="headerlink" title="Routing Policy (Geoproximity)"></a>Routing Policy (Geoproximity)</h4><ul><li>Geoproximity: Route traffic to resource based on geolocation<ul><li>But have the ability to shift more traffic to resource based on bias (é‡è¦)</li><li>å¯ä»¥åšåˆ° route more traffic or less</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152310.png"></p><hr><h4 id="Routing-Policy-Traffic-Flow"><a href="#Routing-Policy-Traffic-Flow" class="headerlink" title="Routing Policy (Traffic Flow)"></a>Routing Policy (Traffic Flow)</h4><ul><li>Visual editor to manage complex routing decision trees<ul><li>Configuration can be saved as Traffic Flow Policy</li><li>Can be applied to different Route 53 Hosted Zone</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224018.png"></p><hr><h4 id="Routing-Policy-IP-Based"><a href="#Routing-Policy-IP-Based" class="headerlink" title="Routing Policy (IP-Based)"></a>Routing Policy (IP-Based)</h4><ul><li>IP-Based: Routing based on clientâ€™s IP address<ul><li>Provide a list of CIDRs for your client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153711.png"></p><hr><h4 id="Routing-Policy-Multi-Value"><a href="#Routing-Policy-Multi-Value" class="headerlink" title="Routing Policy (Multi-Value)"></a>Routing Policy (Multi-Value)</h4><ul><li>Multi-Value: Route traffic to multiple resources<ul><li>Not a subsitute for ELB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153842.png"></p><hr><h3 id="8-VPC-Fundamentals"><a href="#8-VPC-Fundamentals" class="headerlink" title="8. VPC Fundamentals"></a>8. VPC Fundamentals</h3><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><ul><li>VPC: Virtual Private Cloud, all AWS account have a default VPC</li><li>CIDR should not overlap, max CIDR size in AWS is &#x2F;16, min CIDR size in AWS is &#x2F;28</li><li>è¦è®© VPC ä½¿ç”¨ custom domain éœ€è¦ <code>enableDnsHostnames</code> å’Œ <code>enableDnsSupport</code></li><li>å¯ä»¥åˆ›å»º Shared Service VPC, è¿™æ ·æ¯ä¸ª VPC éƒ½å¯ä»¥ access åˆ°éœ€è¦çš„ services (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201530.png"></p><ul><li>Each Amazon EC2 instance that you launch into a VPC has a tenancy attribute (é‡è¦)<ul><li>å¯ä»¥åœ¨ dedicated å’Œ host ä¹‹é—´äº’ç›¸åˆ‡æ¢</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042420.png"></p><hr><h4 id="VPC-Subnet"><a href="#VPC-Subnet" class="headerlink" title="VPC Subnet"></a>VPC Subnet</h4><ul><li>Allow you to partition your network inside the VPC (VPC å†…åˆ’åˆ†ç½‘ç»œ)<ul><li>Can have Public Subnet and Private Subnet</li></ul></li><li>AWS reserves 5 IP addresses in each subnet (first 4 &amp; last 1, é‡è¦)</li><li>Subnet is always associated with Route Table (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013421.png"></p><hr><h4 id="Internet-Gateway-IGW-amp-Route-Table"><a href="#Internet-Gateway-IGW-amp-Route-Table" class="headerlink" title="Internet Gateway (IGW) &amp; Route Table"></a>Internet Gateway (IGW) &amp; Route Table</h4><ul><li>IGW allow resource (eg. EC2 Instance) in a VPC connect to internet (é‡è¦)<ul><li>ç›¸å½“äºè®© VPC é‡Œçš„ resource å¯ä»¥è¿ä¸Šç½‘</li><li>IGW éœ€è¦ Route Table (é‡è¦)</li></ul></li><li>å¦‚æœ IGW å‡ºé—®é¢˜<ul><li>Need to also have Route Table (é¦–å…ˆæ£€æŸ¥ Route Table, å› ä¸º IGW éœ€è¦)</li><li>æ£€æŸ¥ Security Group æ˜¯å¦å…è®¸é€šè¿‡</li></ul></li><li>å¤„ç† Network Address Translation çš„å°±æ˜¯ Internet Gateway</li><li>Internet Gateway æ— æ³•ç›´æ¥åœ¨ private subnet é‡Œé¢ä½¿ç”¨ (é‡è¦)</li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202043.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193121.png"></p><hr><h4 id="NAT-Gateway-NATGW"><a href="#NAT-Gateway-NATGW" class="headerlink" title="NAT Gateway (NATGW)"></a>NAT Gateway (NATGW)</h4><ul><li>AWS managed NAT, AZ specific, use Elastic IP (é’ˆå¯¹ IPv4, Egress æ˜¯ IPv6)<ul><li>Allow EC2 Instance in Private Subnet to connect to the Internet</li><li>Requires an IGW, NATGW æ˜¯å¤„äº public subnet çš„ (æ³¨æ„)</li></ul></li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233648.png"></p><ul><li>Resilient within single AZ, Multiple-AZ need multiple NATGW<ul><li>æ¯ä¸ª AZ éƒ½è¦ä¸€ä¸ª NATGW, ç”¨æ¥ fault-tolerance (å®¹é”™èƒ½åŠ›)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203654.png"></p><hr><h4 id="NACL-amp-Security-Groups"><a href="#NACL-amp-Security-Groups" class="headerlink" title="NACL &amp; Security Groups"></a>NACL &amp; Security Groups</h4><ul><li>The request has to go over NACL before go to Subnet (Subnet level)<ul><li>NACL is stateless (inbound outbound éƒ½è¦æ£€æµ‹)</li></ul></li><li>The request has to go over Security Group before go to EC2 Instance (Instance level)<ul><li>Security Group (SG) is stateful (inbound accepted &#x3D; outbound accepted)</li></ul></li><li>åæ­£è®°ä½ NACL æ˜¯ Subnet level (stateless), Security Group æ˜¯ Instance level (stateful)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204310.png"></p><ul><li>Network Access Control List (NACL)<ul><li>NACL control traffic from and to subnets (eg. block IP)</li><li>One NACL per subnet, each subnet have default NACL (æ³¨æ„)<ul><li>Default NACL accept every inbound and outbound</li><li>ä½†æ˜¯ custom NACL é»˜è®¤æ˜¯ deny inbound å’Œ outbound çš„ (æ³¨æ„)</li></ul></li><li>NACL Rules have number, higher precedence with lower number (è¶Šä¼˜å…ˆæ•°å­—è¶Šä½)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204553.png"></p><hr><h4 id="VPC-Flow-Logs"><a href="#VPC-Flow-Logs" class="headerlink" title="VPC Flow Logs"></a>VPC Flow Logs</h4><ul><li>Capture information about IP traffic going into interfaces (ç›‘è§† IP æµé‡çš„)<ul><li>Monitor &amp; troubleshoot connectivity issues (ç½‘ç»œè¿æ¥é—®é¢˜)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231819.png"></p><hr><h4 id="VPC-Peering"><a href="#VPC-Peering" class="headerlink" title="VPC Peering"></a>VPC Peering</h4><ul><li>VPC Peering: Privately connect two VPCs using AWS network (åªé€‚åˆå°‘é‡ VPC, é‡è¦)<ul><li>æ¯ä¸€å¯¹ VPC éƒ½è¦ VPC Peering, å’Œ S3 Replication ç±»ä¼¼</li></ul></li><li>Can create VPC Peering between VPCs in different AWS accounts &#x2F; regions</li><li>Need to update Route Table in each VPC subnet to make sure they can communicate<ul><li>å‡ºé—®é¢˜å°±æ£€æŸ¥ Route Table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205313.png"></p><hr><h4 id="VPC-Sharing"><a href="#VPC-Sharing" class="headerlink" title="VPC Sharing"></a>VPC Sharing</h4><ul><li>VPC Sharing: Allows multiple AWS accounts to create resources (eg. EC2, RDS) into shared and centrally-managed AWS VPC (é‡è¦)<ul><li>é‡åˆ° centrally managed çš„å°±æ˜¯ VPC Sharing</li><li>è€Œä¸”æ˜¯ owner éœ€è¦ share one or more subnet (æ³¨æ„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img824817.png"></p><hr><h4 id="VPC-Endpoints-AWS-PrivateLink"><a href="#VPC-Endpoints-AWS-PrivateLink" class="headerlink" title="VPC Endpoints (AWS PrivateLink)"></a>VPC Endpoints (AWS PrivateLink)</h4><ul><li>VPC Endpoints allow private access to AWS services within a VPC (é‡è¦)<ul><li>ç”¨ Private Network è¿æ¥ AWS æœåŠ¡, å’Œ On-Premise æ²¡æœ‰å…³ç³»</li><li>Interface Endpoint æ”¯æŒå¤§éƒ¨åˆ† AWS æœåŠ¡ (ä»˜è´¹)</li><li>Gateway Endpoint åªæ”¯æŒ S3 å’Œ DynamoDB (å¾ˆå®¹æ˜“è€ƒ, å…è´¹)</li></ul></li><li>æ³¨æ„, VPC Gateway Endpoint ä¸“é—¨å¤„ç† S3 å’Œ DynamoDB (ä¸è¦å»é€‰æ‹© NAT æˆ–è€… IGW)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205719.png"></p><ul><li>ä¸¤ç§ Types of Endpoints (Interface &#x2F; Gateway)<ul><li>Interface Endpoints: Supports most AWS services (ä»˜è´¹)</li><li>Gateway Endpoints: Must be used as a target in a route table (å…è´¹, é‡è¦)<ul><li>Only support S3 and DynamoDB (åªæ”¯æŒ S3 å’Œ DynamoDB)</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205939.png"></p><hr><h4 id="Site-to-Site-VPN-VPN-Connection"><a href="#Site-to-Site-VPN-VPN-Connection" class="headerlink" title="Site-to-Site VPN (VPN Connection)"></a>Site-to-Site VPN (VPN Connection)</h4><ul><li>Site-to-Site VPN: Connect AWS to Corporate Data Center over public internet (é‡ç‚¹, public internet, On-Premise to AWS)<ul><li>Need a Virtual Private Gateway (VGW) on VPC (AWS æ–¹)</li><li>Need a Customer Gateway (CGW) on DC (On-Premise æ–¹)</li></ul></li><li>å¯¹æ¯” DX, Site-to-Site VPN æ²¡æœ‰æä¾› low latency, and high throughput connection</li><li>Site-to-Site VPN æœ‰ encrypted network connectivity between On-Premise and VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232320.png"></p><ul><li>éœ€è¦ VPN Gateway å’Œ Customer Gateway æ¥è¿æ¥ VPC å’Œ On-Premise</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232649.png"></p><hr><h4 id="Direct-Connect-DX"><a href="#Direct-Connect-DX" class="headerlink" title="Direct Connect (DX)"></a>Direct Connect (DX)</h4><ul><li>Provide a dedicated private connection from a remote network to VPC (é‡ç‚¹, private internet, On-Premise to AWS)<ul><li>éœ€è¦è®¾ç½® VGW, å¦‚æœç»™ DX æ‰¾ backup, é‚£ä¹ˆå°±é€‰æ‹© Site-to-Site VPN (è¿™ä¸¤ä¸ªæœåŠ¡ç±»ä¼¼)</li><li>å¯¹æ¯” Site-to-Site VPN, DX provide low latency, and high throughput connection</li><li>DX ä¸æ”¯æŒ encrypted network connectivity, Site-to-Site VPN å¯ä»¥, ä½†æ˜¯å¦‚æœéœ€è¦ encrypt DX connection å¯ä»¥å’Œ AWS VPN ä¸€èµ·ç”¨ (æ³¨æ„)</li><li>DX çš„ set up æ—¶é—´å¾ˆé•¿ (æ‰€ä»¥ DX ä¸ç®—ä»€ä¹ˆ quick solution)</li></ul></li><li>All private, no public network involve (æ³¨æ„, å¦‚æœé—®åˆ° all Private å°±æ˜¯ DX)<ul><li>Direct Connect does not involve the Internet</li></ul></li><li>å¯ä»¥ access public resources (S3) å’Œ private resources (EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233024.png"></p><ul><li>ä¸¤ç§ Connection Type (å¸¦å®½é€‰é¡¹, Dedicated æœ€å¿«)<ul><li>Dedicated Connections: 1Gbps åˆ° 100Gbps</li><li>Hosted Connections: 50Mbps åˆ° 10 Gbps</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004140.png"></p><ul><li>Direct Connect Gateway (è¿æ¥è®¸å¤š VPC åœ¨ä¸åŒçš„ Region)<ul><li>Direct Connection to one or more VPC in many different regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233531.png"></p><ul><li><p>PrivateLink vs DX</p><ul><li><p>AWS PrivateLink provides a connection between VPCs (Virtual Private Clouds) and AWS services while bypassing the public Internet. It is a private network connection that securely transfers data without leaving the AWS network</p></li><li><p>AWS Direct Connect is a dedicated, private connection between the customerâ€™s on-premises infrastructure at a data center and an AWS location. The main features of the connection are ultra-fast data transfer rates, low latency, and improved security since it bypasses the public Internet</p></li></ul></li></ul><hr><h3 id="9-S3"><a href="#9-S3" class="headerlink" title="9. S3"></a>9. S3</h3><h4 id="AWS-S3"><a href="#AWS-S3" class="headerlink" title="AWS S3"></a>AWS S3</h4><ul><li>S3 Buckets (S3 æ˜¯ Global çš„, ä½†æ˜¯ Bucket æ˜¯ Regional çš„)<ul><li>Store objects (files) in â€œbucketsâ€</li><li>Buckets must have globally unique name (åå­—å¿…é¡»ç‹¬ç‰¹)</li><li>Buckets are defined at region level</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171839.png"></p><ul><li>Objects (files) have a key, max object size is 5TB</li><li>å¦‚æœä¸Šä¼ è¶…è¿‡ 5 GB, å°±è¦ç”¨ Multi-Part Upload (è¿˜æœ‰ S3 Transfer Acceleration)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172025.png"></p><ul><li>S3 sync command: Uses the <code>CopyObject</code> APIs to copy objects between S3 buckets</li><li>S3 always return the lastest version of the object (é‡è¦)</li><li>S3 æ²¡åŠæ³•åŠ å¯† metadata</li><li>S3 æ˜¯ serverless çš„</li><li>å¦‚æœé‡åˆ°éœ€è¦å¤„ç† static content çš„, å°±ä¸€å®šæ˜¯ S3 + CloudFront (é‡è¦)</li><li>å¦‚æœé—®åˆ° S3 è€Œä¸”æ˜¯å…³äºå›¾ç‰‡ä¸Šä¼ , é€‰æ‹© S3 Event Notification, ä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imglifecycle-transitions-v2.png"></p><ul><li>å¦‚æœå‘ç° S3 çš„ä¼ è¾“åŠŸèƒ½å‡ºé—®é¢˜, é‚£ä¹ˆå°±ç»™ S3 bucket åŠ ä¸Š prefix (é‡è¦)</li><li>æ³¨æ„, S3 å’Œ database æ˜¯ä¸æ²¾è¾¹çš„, S3 ä¸æ˜¯æ•°æ®åº“</li><li>å¦‚æœè¦ control access to data stored on AWS S3, å¯ä»¥ç”¨ä¸‹é¢ 2 ç‚¹<ul><li>Query String Authentication, Access Control List (ACLs)</li><li>Bucket policies, Identity and Access Management (IAM) policies</li></ul></li><li>In order to get object access log, the object owner also need to be bucket owner</li><li>S3 Object Ownership is a S3 bucket setting that control ownership of new objects that are uploaded to a bucket (é‡è¦)</li></ul><blockquote><p>By default, an Amazon S3 object is owned by the AWS account that uploaded it. This is true even when the bucket is owned by another account (é‡è¦)</p></blockquote><ul><li>å…³äº S3 data consistency model, æœ‰ 2 ç‚¹<ul><li>A process deletes an existing object and immediately tries to read it. Amazon S3 will not return any data as the object has been deleted</li><li>If you delete a bucket and immediately list all buckets, the deleted bucket might still appear in the list</li></ul></li></ul><hr><h4 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h4><ul><li>User-Based Security<ul><li>IAM Policies: Which API calls should be allowed for a user from IAM (é‡è¦)</li></ul></li><li>Resource-Based Security<ul><li>Bucket Policies: Bucket rules (æ¯”å¦‚è®© object public)</li></ul></li><li>æ³¨æ„, IAM Policy çš„ precedence æ˜¯æ¯” S3 Bucket Policy è¦ä¼˜å…ˆçš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173050.png"></p><ul><li>S3 Bucket Policies (JSON based policies)<ul><li>Resoruces: buckets and objects</li><li>Effect: Allow &#x2F; Deny</li><li>Actions: API to Allow or Deny</li><li>Principal: The account or user to apply the policy to</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173325.png"></p><hr><h4 id="S3-Website"><a href="#S3-Website" class="headerlink" title="S3 Website"></a>S3 Website</h4><ul><li>Host åœ¨ S3 ä¸Šé¢çš„ç½‘ç«™ä¸€èˆ¬æ˜¯ä»¥ä¸‹ä¸¤ç§åç¼€ (dash Region æˆ–è€… dot Region)<ul><li>s3-website-Region: <code>http://bucket-name.s3-website-Region.amazonaws.com</code></li><li>s3-website.Region: <code>http://bucket-name.s3-website.Region.amazonaws.com</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img043622.png"></p><hr><h4 id="S3-Versioning"><a href="#S3-Versioning" class="headerlink" title="S3 Versioning"></a>S3 Versioning</h4><ul><li>Enabled at the bucket level (Default is null)</li><li>Best pratice to version the buckets (å¯ä»¥ roll back, å¯ä»¥é˜²æ­¢è¯¯åˆ , é‡è¦)<ul><li>å¯ä»¥é˜²æ­¢ accidental deletion of objects</li></ul></li><li>Once version-enable a bucket, it can never return to an unversioned state (é‡è¦)</li><li>Versioning æ˜¯é’ˆå¯¹è¿™ä¸ª bucket é‡Œé¢çš„æ‰€æœ‰ object, æ‰€ä»¥ä¸èƒ½æŒ‡å®š folder æ¥ versioning</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174246.png"></p><hr><h4 id="S3-Replication-CRR-amp-SRR"><a href="#S3-Replication-CRR-amp-SRR" class="headerlink" title="S3 Replication (CRR &amp; SRR)"></a>S3 Replication (CRR &amp; SRR)</h4><ul><li>CRR: Cross Region Replication (compliance, lower latency access)</li><li>SRR: Same Region Replication (create test environment)<ul><li>Must enable Versioning</li><li>The Copying is asynchronous</li><li>Must give IAM permissions to S3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174840.png"></p><ul><li>Only new objects are replicated, existing objects need S3 Batch Replication<ul><li>ä¹Ÿå°±æ˜¯è¯´åªæœ‰æ–°çš„ object ä¼šè¢« Replicate, è€çš„ object è¦ S3 Batch Replication</li></ul></li><li>No â€œchainingâ€ in replication<ul><li>æ¯”å¦‚æŠŠ A å¤åˆ¶åˆ° B å’Œ C, éœ€è¦ A å¤åˆ¶åˆ° B å’Œ A å¤åˆ¶åˆ° C</li></ul></li><li>S3 lifecycle actions are not replicated with S3 Replication</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175004.png"></p><hr><h4 id="S3-Storage-Classes"><a href="#S3-Storage-Classes" class="headerlink" title="S3 Storage Classes"></a>S3 Storage Classes</h4><ul><li>ä¸€å…± 7 ç§ Storage Class: General + 2 IA + 3 Glacier + Intelligent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175742.png"></p><ul><li>S3 Standard - General Purpose<ul><li>Used for frequently accessed data (æœ€å¸¸è§)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175932.png"></p><ul><li>S3 Infrequent Access (Standard IA &amp; One Zone IA)<ul><li>For data is less frequent access but require rapid access when needed (é‡è¦)</li><li>Lower cost than Standard</li><li>ä» Standard è½¬åˆ° One Zone IA æœ€å°‘è¦ 30 å¤©</li><li>One Zone IA ä¸æ˜¯ High Availability çš„é€‰æ‹© (æ³¨æ„, å› ä¸º AZ ä¼š down)</li><li>å¦‚æœé‡åˆ° access is always required å°±ä¸èƒ½é€‰ One Zone IA, å› ä¸º AZ å¯èƒ½ä¼š down</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180147.png"></p><ul><li>S3 Glacier Storage Classes (Archive ä¸“ç”¨)<ul><li>Low-cost object storage for archiving &#x2F; backup</li><li>Price: storage + retrieval</li><li>S3 Glacier Instant Retrieval: Glacier é‡Œæœ€å¿«ä½†ä¹Ÿæœ€è´µ</li><li>S3 Glacier Flexible Retrieval: ä¸‰ç§æ¨¡å¼ (Expedited åŠ æ€¥, Standard, Bulk æ‰¹é‡)</li><li>S3 Glacier Deep Archive: å­˜çš„æ—¶é—´æœ€ä¹…, ä¸¤ç§æ¨¡å¼ (Standard, Bulk), 48 å°æ—¶ retrieval</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180642.png"></p><ul><li>S3 Intelligent Tiering<ul><li>Move objects automatically between Access Tiers based on usage</li><li>å°±æ˜¯è‡ªåŠ¨å¸®ä½ æŠŠ Object ç§»åˆ°ä¸åŒçš„ Storage Class é‡Œ</li><li>Intelligent Tier æ˜¯åœ¨ Standard å’Œ Standard IA ä¸‹é¢çš„, ä¸èƒ½ä»ä¸‹å¾€ä¸Šè½¬ç§»</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180806.png"></p><hr><h3 id="10-AWS-CLI-SDK-IAM-Roles-amp-Policies"><a href="#10-AWS-CLI-SDK-IAM-Roles-amp-Policies" class="headerlink" title="10. AWS CLI, SDK, IAM Roles &amp; Policies"></a>10. AWS CLI, SDK, IAM Roles &amp; Policies</h3><h4 id="EC2-Instance-Metadata-IMDS"><a href="#EC2-Instance-Metadata-IMDS" class="headerlink" title="EC2 Instance Metadata (IMDS)"></a>EC2 Instance Metadata (IMDS)</h4><ul><li>Allow EC2 Instance to â€œlearn about themselvesâ€ without using an IAM Role</li><li>AWS CLI ç”¨ Instance Metadata å»æ‹¿ temporary credentials (åœ¨ Python ç¯å¢ƒä¸‹)<ul><li>Metadata &#x3D; info about the EC2 Instance (æ²¡æ³•æ‹¿åˆ° IAM Policy)</li><li>Userdata &#x3D; launch script of the EC2 Instance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150522.png"></p><ul><li>IMDSv2 vs. IMDSv1<ul><li>IMDSv1 access <code>http://169.254.169.254/latest/meta-data</code> (ä¸æ¨è)</li><li>IMDSv2 is more secure and done in two steps</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150716.png"></p><hr><h4 id="MFA-with-CLI"><a href="#MFA-with-CLI" class="headerlink" title="MFA with CLI"></a>MFA with CLI</h4><ul><li>To use MFA with CLI, you must create a temporary session<ul><li>Run the <code>STS GetSession</code> API call</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151057.png"></p><ul><li>å¦‚æœæ˜¯ check IAM permission, ç”¨ <code>AWS CLI --dry-run</code></li></ul><hr><h4 id="AWS-SDK"><a href="#AWS-SDK" class="headerlink" title="AWS SDK"></a>AWS SDK</h4><ul><li>Perform actions on AWS directly from your application code</li><li>If not configure a default region, <code>us-east-1</code> will be chosen by default</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151356.png"></p><hr><h4 id="AWS-Limits-Quotas"><a href="#AWS-Limits-Quotas" class="headerlink" title="AWS Limits (Quotas)"></a>AWS Limits (Quotas)</h4><ul><li>API Rate Limits<ul><li>For Intermittent Errors: implement Exponential Backoff</li><li>For Consistent Errors: request an API throttling limit increase (é€šè¿‡ AWS ç”³è¯·)</li></ul></li><li>Service Quotas &#x2F; Limits<ul><li>Request a service limit increase by opening a ticket</li><li>Request a service quota increase by Service Quotas API</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151813.png"></p><ul><li>Exponential Backoff<ul><li>If get <code>ThrottlingException</code> intermittently, use exponential backoff</li><li>Itâ€™s a retry mechanism included in AWS SDK API calls</li><li>Only retry for 5XX errors</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152100.png"></p><hr><h4 id="AWS-CLI-Credentials-Provider-Chain"><a href="#AWS-CLI-Credentials-Provider-Chain" class="headerlink" title="AWS CLI Credentials Provider Chain"></a>AWS CLI Credentials Provider Chain</h4><ul><li>The CLI will look credentials in order<ul><li><code>Command Line Options -&gt; Environment Variables -&gt; EC2 Instance Profile</code></li></ul></li><li>The credentials chain could give priority to the environment variables</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152316.png"></p><hr><h4 id="AWS-Sigv4"><a href="#AWS-Sigv4" class="headerlink" title="AWS Sigv4"></a>AWS Sigv4</h4><ul><li>AWS SigV4 æ˜¯å¯¹ AWS è¯·æ±‚è¿›è¡Œç­¾åçš„èº«ä»½éªŒè¯æ–¹æ³•ï¼Œç¡®ä¿å®‰å…¨å’Œå®Œæ•´æ€§ (2 ç§é€‰æ‹©)<ul><li>HTTP Header: Signature in Authorization header</li><li>Query String: Signature in <code>X-Amz-Signature</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153415.png"></p><hr><h3 id="11-Advanced-S3"><a href="#11-Advanced-S3" class="headerlink" title="11. Advanced S3"></a>11. Advanced S3</h3><h4 id="S3-Lifecycle-Rules"><a href="#S3-Lifecycle-Rules" class="headerlink" title="S3 Lifecycle Rules"></a>S3 Lifecycle Rules</h4><ul><li>Transition objects between storage classes (æ¯”å¦‚ä» IA åˆ° Glacier)<ul><li>Transition éœ€è¦ Lifecycle Rules (é‡è¦)</li></ul></li><li>æ¯”å¦‚ä» Snowball åˆ° Glacier å°±éœ€è¦ Lifecycle Rule</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235516.png"></p><ul><li>Transition Actions: Configure objects to transition to another storage class (è½¬ç§»)</li><li>Expiration Actions: Configure objects to expire after some time (åˆ é™¤)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235639.png"></p><ul><li>S3 Analytics: Help decide when to transition objects to the right storage class</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000151.png"></p><hr><h4 id="S3-Event-Notifications"><a href="#S3-Event-Notifications" class="headerlink" title="S3 Event Notifications"></a>S3 Event Notifications</h4><ul><li>Automatically react to certain event happened in S3 (æ¯”å¦‚å›¾ç‰‡ä¸Šä¼ )<ul><li>Need to have IAM Permissions</li><li>S3 Event Notification çš„ destination æ˜¯ SQS, SNS, Lambda (è®°ä½)</li></ul></li><li>å¤§éƒ¨åˆ†å’Œ S3 äº‹ä»¶ç›¸å…³çš„éƒ½æ˜¯ S3 Event Notification, è€Œä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000725.png"></p><ul><li>If two writes are made to a single non-versioned object at the same time, it is possible that only a single event notification will be sent</li></ul><hr><h4 id="S3-Performance"><a href="#S3-Performance" class="headerlink" title="S3 Performance"></a>S3 Performance</h4><ul><li>For Upload ä¸Šä¼  (é‡è¦)<ul><li>Multi-Part Upload: å½“ä¸Šä¼ æ–‡ä»¶å¤§äº 5 GB, å¯ä»¥ parallelize uploads</li><li>S3 Transfer Acceleration: å°†æ–‡ä»¶ä¼ åˆ° AWS edge location, å¯ä»¥å’Œ Multi-Part ä¸€èµ·ç”¨</li><li>S3 Transfer Acceleration (S3TA) can speed up content transfers to and from S3</li><li>æ³¨æ„, S3 Transfer Acceleration æ²¡åŠæ³• copy object between buckets</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001645.png"></p><ul><li>For Download ä¸‹è½½<ul><li>S3 Byte-Range Fetches: Parallelize GETs, retrieve partial data (æ‹¿éƒ¨åˆ†æ•°æ®, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001828.png"></p><hr><h4 id="S3-Select-amp-Glacier-Select"><a href="#S3-Select-amp-Glacier-Select" class="headerlink" title="S3 Select &amp; Glacier Select"></a>S3 Select &amp; Glacier Select</h4><ul><li>S3 Select ä½¿ç”¨ SQL æ¥åš server-side filtering, è¿‡æ»¤ä»è€Œå‡å°‘æ•°æ®é‡</li><li>Less network transfer, less CPU cost client-side</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002050.png"></p><hr><h4 id="S3-Object-Tags-amp-Metadata"><a href="#S3-Object-Tags-amp-Metadata" class="headerlink" title="S3 Object Tags &amp; Metadata"></a>S3 Object Tags &amp; Metadata</h4><ul><li>S3 User-Defined Object Metadata: Must begin with <code>x-amz-meta-</code></li><li>S3 Object Tags: Useful for fine-grained permission or analytics purpose</li><li>You cannot search the object metadata or object tags (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194215.png"></p><hr><h3 id="12-S3-Security"><a href="#12-S3-Security" class="headerlink" title="12. S3 Security"></a>12. S3 Security</h3><h4 id="S3-Encryption"><a href="#S3-Encryption" class="headerlink" title="S3 Encryption"></a>S3 Encryption</h4><ul><li>Server-Side Encryption (SSE-S3 å…è´¹, SSE-KMS è¦é’±, SSE-C)</li><li>Client-Side Encryption (å¦‚æœç”¨æˆ·å·²ç»æœ‰ encryption method)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223133.png"></p><ul><li>Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3)<ul><li>Enabled by default for new buckets &amp; objects</li><li>SSE-S3 çš„ header æ˜¯ <code>x-amz-server-side-encryption:AES256</code></li><li>ä½¿ç”¨ SSE-S3, æ¯ä¸€ä¸ª Object éƒ½æ˜¯ç”± unique key æ¥ encrypt çš„</li><li>SSE-S3 ä½¿ç”¨ 256-bit Advanced Encryption Standard (AES-256)</li><li>SSE-S3 æ˜¯æ²¡æœ‰ automatic key rotation çš„, è¦ç”¨ SSE-KMS (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223242.png"></p><ul><li>Server-Side Encryption with KMS Keys stored in AWS KMS (SSE-KMS)<ul><li>User control + audit key usage in CloudTrail (å¯ä»¥ç®¡ç† key rotation)</li><li>SSE-KMS çš„ header æ˜¯ <code>x-amz-server-side-encryption:aws:kms</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223417.png"></p><ul><li>Server-Side Encryption with Customer-Provided Keys (SSE-C)<ul><li>ç”¨æˆ·è‡ªå·±æœ‰ keys, AWS will not store the key, HTTPS must be used (é‡è¦)</li><li>å½“é—®é¢˜ä¸­æåˆ°ç”¨æˆ·éœ€è¦ä½¿ç”¨è‡ªå·±çš„ key, ä½†æ˜¯æ‰“ç®—åœ¨ AWS ç«¯åš encryption</li><li>S3 will reject any requests made over <code>HTTP</code> when using SSE-C (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223602.png"></p><ul><li>Client-Side Encryption<ul><li>User fully manages the keys and encryption cycle</li><li>æ•°æ®åœ¨é€åˆ° AWS ä¹‹å‰å°±æ˜¯åŠ å¯†å¥½çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223715.png"></p><ul><li>Encryption in Transit (SSL&#x2F;TLS)<ul><li>å¯ä»¥ç”¨ <code>aws:SecureTransport</code> æ¥ enforce (ä¸è¿‡æœ‰ SSL åŸºæœ¬ä¸Šå°±æ˜¯ HTTPS)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223811.png"></p><hr><h4 id="S3-CORS"><a href="#S3-CORS" class="headerlink" title="S3 CORS"></a>S3 CORS</h4><ul><li>CORS: Cross-Origin Resource Sharing (è·¨åŸŸé—®é¢˜)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224630.png"></p><ul><li>S3 CORS (é‡è¦)<ul><li>A client makes a cross-origin request on S3 bucket, need the correct CORS headers</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224951.png"></p><hr><h4 id="S3-MFA-Delete"><a href="#S3-MFA-Delete" class="headerlink" title="S3 MFA Delete"></a>S3 MFA Delete</h4><ul><li>MFA Delete: é˜²æ­¢ä¸å°å¿ƒåˆ é™¤æ–‡ä»¶, ç”¨æˆ·éœ€è¦å…ˆéªŒè¯èº«ä»½ (é‡è¦)<ul><li>To use MFA Delete: Versioning must be enabled</li></ul></li><li>Only the bucket owner (root user) can enable&#x2F;disable MFA Delete (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225415.png"></p><hr><h4 id="S3-Access-Logs"><a href="#S3-Access-Logs" class="headerlink" title="S3 Access Logs"></a>S3 Access Logs</h4><ul><li>Any request made to S3 will be logged to another S3 bucket (æ•°æ®åˆ†æ)<ul><li>å¯ä»¥ä½œä¸º Data Analysis çš„å·¥å…·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230251.png"></p><hr><h4 id="S3-Pre-signed-URL"><a href="#S3-Pre-signed-URL" class="headerlink" title="S3 Pre-signed URL"></a>S3 Pre-signed URL</h4><ul><li>S3 Pre-signed URL å…è®¸ä¸´æ—¶è®¿é—®ç‰¹å®š S3 å¯¹è±¡çš„ URL</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230702.png"></p><hr><h4 id="S3-Access-Points"><a href="#S3-Access-Points" class="headerlink" title="S3 Access Points"></a>S3 Access Points</h4><ul><li>Access Points simplify security management for S3 Buckets (æ ¹æ®ç”¨æˆ·å±æ€§)</li><li>Each Access Point: DNS name + Access Point Policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231500.png"></p><hr><h4 id="S3-Object-Lambda"><a href="#S3-Object-Lambda" class="headerlink" title="S3 Object Lambda"></a>S3 Object Lambda</h4><ul><li>Use AWS Lambda to change object before retrieve by caller (åœ¨åˆ°è¾¾ caller ä¹‹å‰)<ul><li>ç”¨é€”: å¯ä»¥ç»™å›¾ç‰‡æ‰“æ°´å°, å¯ä»¥ç”¨æ¥ Invoke remove PII çš„ Lambda æ–¹æ³• (é‡è¦)</li></ul></li><li>éœ€è¦ S3 Access Point å’Œ S3 Object Lambda Access Points</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231810.png"></p><hr><h3 id="13-CloudFront"><a href="#13-CloudFront" class="headerlink" title="13. CloudFront"></a>13. CloudFront</h3><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><ul><li>Content Delivery Network (CDN), å¯ä»¥ serve static &amp; dynamic content<ul><li>Improve read performance, content is cached at the edge</li></ul></li><li>å¯ä»¥é˜²æ­¢ DDoS protection (æ­é… AWS Shield), å¯ä»¥æ ¹æ® content type æ¥ route, å¯ä»¥æŒ‡å®š primary &amp; secondary origins æ¥åš high availiability &amp; failover</li><li>CloudFront Origins: S3 Bucket (OAC) æˆ–è€… Custom Origin (HTTP)<ul><li>OAC: Origin Access Control (é‡è¦, å¦‚æœæ¶‰åŠåˆ° S3 çš„é—®é¢˜)</li></ul></li><li>å¦‚æœé—®åˆ° CloudFront è€Œä¸”éœ€è¦ encryption, é€‰æ‹© field level encryption (ä¸æ˜¯ KMS)<ul><li>Field-level encryption allows you to enable your users to securely upload sensitive information to your web servers.</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232701.png"></p><ul><li>CloudFront vs S3 Cross Region Replication<ul><li>CloudFront: ä½¿ç”¨ global edge network, æœ‰ TTL, ç”¨äº static content</li><li>S3 Cross Region Replication (CRR): æ¯ä¸ª Region éƒ½è¦è®¾ç½®, ä½†æ˜¯æ²¡æœ‰ TTL, ç”¨äº dynamic content (updated in near real-time, åªè¯»)</li><li>é—®åˆ° S3 å¹¶ä¸”æœ‰å…³ high available å’Œ low latency çš„å°±æ˜¯ S3 Cross Region Replication</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233016.png"></p><ul><li>CloudFront å…è®¸ Proxy methods å’Œ Dynamic content è·³è¿‡ regional edge cache</li><li>é™¤äº† WAF å¯ä»¥å» block IP, è¿˜å¯ä»¥ä½¿ç”¨ OAI (origin access identity, é‡è¦)<ul><li>OAI ä¹Ÿå¯ä»¥ç”¨æ¥ secure communication between CloudFront &amp; S3</li></ul></li><li>å¯ä»¥ç”¨ CloudFront signed URLs å’Œ CloudFront signed cookies æ¥ restrict access to documents (æ¯”å¦‚ subscription)</li><li>Can configure CloudFront to require HTTPS from clients (å¯ä»¥ç”¨ CloudFront è¦æ±‚ client å¿…é¡»ä½¿ç”¨ HTTPS)</li><li>å…³äº CloudFront with Origin Groups çš„ 2 ä¸ªç‚¹<ul><li>CloudFront routes all incoming requests to the primary origin, even when a previous request failed over to the secondary origin</li><li>CloudFront fails over to the secondary origin only when the HTTP method of the viewer request is GET, HEAD or OPTIONS</li></ul></li></ul><hr><h4 id="CloudFront-Caching"><a href="#CloudFront-Caching" class="headerlink" title="CloudFront Caching"></a>CloudFront Caching</h4><ul><li>The cache lives at each CloudFront Edge Location</li><li>CloudFront identifies each object in the cache using Cache Key</li><li>å¦‚æœé‡åˆ° CloudFront å¤„ç† language é…ç½®å‡ºé—®é¢˜, é‚£ä¹ˆå¯ä»¥ç”¨ <code>Query string forwarding and caching</code> (è¿™é“é¢˜å¾ˆé•¿)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144432.png"></p><ul><li>CloudFront Cache Key<ul><li>By default, consists of hostname + resource portion of the URL</li><li>Could add other elements to the Cache Key using CloudFront Cache Policies</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144654.png"></p><ul><li>Cache Policy: å¯ä»¥ä½¿ç”¨ HTTP Headers, Cookies, Query Strings (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img444857.png"></p><ul><li>Origin Request Policy<ul><li>Values that you want to include in origin requests without including in the Cache Key</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145256.png"></p><hr><h4 id="CloudFront-Cache-Invalidation"><a href="#CloudFront-Cache-Invalidation" class="headerlink" title="CloudFront Cache Invalidation"></a>CloudFront Cache Invalidation</h4><ul><li>è®© CloudFront è·³è¿‡ TTL ç«‹å³æ›´æ–°<ul><li>æ¯”å¦‚ä½ æ›´æ–°äº†åç«¯, ä½†æ˜¯ CloudFront ä¸ä¼šç«‹å³æ›´æ–°, éœ€è¦ CloudFront Invalidation æ¥è·³è¿‡ TTL æ¥ç«‹å³æ›´æ–°</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234007.png"></p><hr><h4 id="CloudFront-Cache-Behaviors"><a href="#CloudFront-Cache-Behaviors" class="headerlink" title="CloudFront Cache Behaviors"></a>CloudFront Cache Behaviors</h4><ul><li>æ ¹æ®ä¸åŒçš„ URL ç»“æ„åšä¸åŒçš„ Cache Behaviors</li><li>Maximize cache hits by separating staic and dynamic distributions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150007.png"></p><hr><h4 id="CloudFront-Geo-Restriction"><a href="#CloudFront-Geo-Restriction" class="headerlink" title="CloudFront Geo Restriction"></a>CloudFront Geo Restriction</h4><ul><li>Allowlist &amp; Blocklist (é’ˆå¯¹ IP, å›½å®¶è¿›è¡Œè®¿é—®é™åˆ¶)<ul><li>CloudFront Geo Restriction æ²¡åŠæ³•å’Œ VPC ä¸€èµ·ä½¿ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233638.png"></p><hr><h4 id="CloudFront-Signed-URL-x2F-Cookies"><a href="#CloudFront-Signed-URL-x2F-Cookies" class="headerlink" title="CloudFront Signed URL &#x2F; Cookies"></a>CloudFront Signed URL &#x2F; Cookies</h4><ul><li>ç±»ä¼¼ S3 Pre-Signed URL<ul><li>Signed URL: access to individual files (å•ä¸ªæ–‡ä»¶)</li><li>Signed Cookies: access to multiple files (å¤šä¸ªæ–‡ä»¶)</li></ul></li><li>Recommend to use Trusted Key Group than CloudFront Key Pair (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img484256.png"></p><ul><li>CloudFront Signed URL vs. S3 Pre-Signed URL<ul><li>Access CloudFront çš„å°±æ˜¯ CloudFront Signed URL</li><li>Access S3 çš„å°±æ˜¯ S3 Pre-Signed URL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184528.png"></p><ul><li>ä¸ CloudFront signer æœ‰å…³çš„ 2 ä¸ªçŸ¥è¯†ç‚¹<ul><li>When create a signer, the public key is CloudFront and private key is used to sign a portion of URL</li><li>When use the root user to manage CloudFront key pairs, you can only have up to two active CloudFront key pairs per AWS account</li></ul></li><li>CloudFront Key Pair åªèƒ½ç”± root user æ¥åˆ›å»º</li></ul><hr><h4 id="CloudFront-Advanced-Concepts"><a href="#CloudFront-Advanced-Concepts" class="headerlink" title="CloudFront Advanced Concepts"></a>CloudFront Advanced Concepts</h4><ul><li>Price Classes (ä¸€å…± 3 ç§)<ul><li>Price Class All: all regions - best performance</li><li>Price Class 200: most regions, but excludes the most expensive regions</li><li>Price Class 100: only the least expensive regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185111.png"></p><ul><li>CloudFront - Origin Groups<ul><li>Increase high-availability and do failover</li><li>Origin Group: one primary and one secondary origin</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185430.png"></p><ul><li>CloudFront - Field Level Encryption<ul><li>Protect user sensitive information through application stack (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185545.png"></p><hr><h4 id="CloudFront-Real-Time-Logs"><a href="#CloudFront-Real-Time-Logs" class="headerlink" title="CloudFront Real Time Logs"></a>CloudFront Real Time Logs</h4><ul><li>Get real-time requests received by CloudFront sent to Kinesis Data Stream</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195222.png"></p><hr><h4 id="AWS-Global-Accelerator"><a href="#AWS-Global-Accelerator" class="headerlink" title="AWS Global Accelerator"></a>AWS Global Accelerator</h4><ul><li>åˆ©ç”¨ AWS internal network to route application<ul><li>Provide 2 global static anycast IPs (é‡è¦)</li><li>Improve availability and performance of the applications (globally)</li></ul></li><li>Global Accelerator improves performance for applications over TCP or UDP</li><li>Global Accelerator has automatic failover</li><li>Global Accelerator is more expensive as it adds an extra layer of infrastructure (å¯¹æ¯” CloudFront ä¸æ˜¯ä¸€ä¸ª cost-effective çš„é€‰æ‹©)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234527.png"></p><ul><li>AWS Global Accelerator vs CloudFront<ul><li>CloudFront: Content is served at edge, æ¯”å¦‚å›¾ç‰‡å’Œè§†é¢‘ (cacheable), Dynamic content such as API acceleration &amp; dynamic site delivery</li><li>Global Accelerator: é€‚åˆ TCP æˆ–è€… UDP, æ¯”å¦‚æ¸¸æˆå’Œ IoT (static IP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000939.png"></p><blockquote><p>AWS Global Accelerator is a network service that can provide a global traffic management solution. By creating a standard accelerator in AWS Global Accelerator, you can guide user traffic to the endpoint closest to them, thereby improving the performance and availability of the application.</p></blockquote><hr><h3 id="14-ECS-ECR-amp-Fargate"><a href="#14-ECS-ECR-amp-Fargate" class="headerlink" title="14. ECS, ECR &amp; Fargate"></a>14. ECS, ECR &amp; Fargate</h3><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><ul><li>Elastic Container Service (Manage Docker containers on AWS)</li><li>ECS æœ‰ä¸¤ç§ Launch Type: EC2 å’Œ Fargate (Fargate æ˜¯ serverless çš„)</li><li>EC2 Launch Type: Need Provision, éœ€è¦ ECS Agent (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212508.png"></p><ul><li>Fargate Launch Type: Serverless, No Provision (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212546.png"></p><ul><li>IAM Roles for ECS (é‡è¦, æ˜¯ IAM)<ul><li>EC2 Instance Profile: åªé’ˆå¯¹ EC2 Launch Type, used by ECS agent</li><li>ECS Task Role: æ¯ä¸ª Task éƒ½æœ‰è‡ªå·±çš„ Role (è´Ÿè´£)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212709.png"></p><ul><li>ECS å¯ä»¥å’Œ Load Balancer ä¸€èµ·ç”¨ (ALB &#x2F; NLB)</li><li>ECS å¯ä»¥å’Œ EFS ä¸€èµ·ç”¨ (Fargate + EFS &#x3D; Serverless, ç®¡ç†æ–‡ä»¶)</li><li>å¦‚æœ terminate ECS å‡ºç° synchronization issue, é‚£ä¹ˆ ECS å½“å‰çš„çŠ¶æ€ä¸€å®šæ˜¯ <code>STOPPED</code></li><li>å¦‚æœ ECS cluster launch å‡ºé—®é¢˜, é‚£ä¹ˆå…ˆæ£€æŸ¥ <code>ecs.config</code> æœ‰æ²¡æœ‰é—®é¢˜</li><li>å¯ä»¥ç”¨ awslogs log driver æ¥é€ ECS çš„ log åˆ° CloudWatch, å¦‚æœ ECS æ˜¯ Fargate ç±»å‹çš„, è¿˜éœ€è¦ <code>logConfiguration</code> parameter åœ¨ task definition é‡Œ</li></ul><blockquote><p>Amazon ECS with EC2 launch type is charged based on EC2 instances and EBS volumes used. Amazon ECS with Fargate launch type is charged based on vCPU and memory resources that the containerized application requests</p></blockquote><hr><h4 id="ECS-Auto-Scaling"><a href="#ECS-Auto-Scaling" class="headerlink" title="ECS Auto Scaling"></a>ECS Auto Scaling</h4><ul><li>Automatically increase &#x2F; decrease the number of ECS tasks<ul><li>Target Scaling: Scale based on target value for CloudWatch metric</li><li>Step Scaling: Scale based on CloudWatch Alarm (é‡è¦)</li><li>Scheduled Scaling: Scale based on specific time (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222247.png"></p><ul><li>Auto Scaling EC2 Instances<ul><li>Accommodate ECS Service Scaling by adding underlying EC2 Instances</li><li>Auto Scaling Group Scaling &#x2F; ECS Cluster Capacity Provider</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205104.png"></p><hr><h4 id="ECS-Rolling-Updates"><a href="#ECS-Rolling-Updates" class="headerlink" title="ECS Rolling Updates"></a>ECS Rolling Updates</h4><ul><li>Control how many tasks can be started and stopped when update from v1 to v2</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205259.png"></p><hr><h4 id="ECS-Task-Definitions"><a href="#ECS-Task-Definitions" class="headerlink" title="ECS Task Definitions"></a>ECS Task Definitions</h4><ul><li>Task definitions are metadata in JSON form to tell ECS how to run Docker container</li><li>Environment Variable: Hardcoded, SSM Parameter Store, Secrets Manager, S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210902.png"></p><ul><li>ECS Load Balancing - EC2 Launch Type<ul><li>Get a Dynamic Host Port Mapping if define only the container port in task definiton</li><li>Must allow EC2 Instanceâ€™s Security Group any port from the ALBâ€™s Security Group (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211103.png"></p><ul><li>ECS Load Balancing - Fargate<ul><li>Each task has a unique private IP, only define the container port</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211211.png"></p><ul><li>ECS Data Volumes (Bind Mounts)<ul><li>Share data between multiple containers in the same Task Definition</li><li>Work for both EC2 and Fargate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img211542.png"></p><hr><h4 id="ECS-Task-Placements"><a href="#ECS-Task-Placements" class="headerlink" title="ECS Task Placements"></a>ECS Task Placements</h4><ul><li>For EC2 Launch Type, determine where to place the EC2, CPU, Memory ç­‰ç­‰</li><li>ECS Task Placement Strategies could mixed together (Binpack, Random å’Œ Spread)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212801.png"></p><ul><li>ECS Task Placement Strategies - Binpack<ul><li>Place tasks based on the least available amount of CPU or memory</li><li>This minimize the number of instances in use (cost saving, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213429.png"></p><ul><li>ECS Task Placement Strategies - Random<ul><li>Place the task randomly</li><li>To enable random host port, set host <code>port = 0</code> or empty, which allow multiple containers of same type to launch on the same EC2 container instance</li><li>å¦‚æœé—®åˆ°ç¬¬ä¸€ä¸ª container è¿è¡ŒæˆåŠŸ, ä½†ç¬¬äºŒä¸ªè¿è¡Œå¤±è´¥, é‚£å°±æ˜¯ host port çš„é—®é¢˜</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213517.png"></p><ul><li>ECS Task Placement Strategies - Spread<ul><li>Place the task evenly based on the specified value</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213603.png"></p><ul><li>ECS Task Placement Constraints<ul><li><code>distinctInstance</code>: Place each task on a different container instance</li><li><code>memberOf</code>: Place task on instances that satisfy an expression</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213754.png"></p><hr><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><ul><li>Elastic Container Registry (ECR, ç®¡ç† Docker Image, ä¸æ˜¯ Docker Container)<ul><li>Store and manage Docker images on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222836.png"></p><ul><li>How to use CLI to pull and push image to ECR<ul><li><code>$(aws ecr get-login --no-include-email)</code></li><li><code>docker pull 1234567890.dkr.ecr.eu-west-1.amazonaws.com/demo:latest</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214106.png"></p><hr><h4 id="AWS-CoPilot"><a href="#AWS-CoPilot" class="headerlink" title="AWS CoPilot"></a>AWS CoPilot</h4><ul><li>CLI tool to build, release, and operate production-ready containerized apps<ul><li>Run your apps on AppRunner, ECS, and Fargate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214226.png"></p><hr><h4 id="AWS-EKS"><a href="#AWS-EKS" class="headerlink" title="AWS EKS"></a>AWS EKS</h4><ul><li>Elastic Kubernetes Service (Manage Kubernetes clusters on AWS)<ul><li>Support 2 deployment mode: EC2 &amp; Fargate (å’Œ ECS ä¸€æ ·)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223132.png"></p><ul><li>EKS Data Volumes (éœ€è¦ StorageClass)<ul><li>Leverages a Container Storage Interface (CSI) compliant driver</li><li>æ”¯æŒ EBS, EFS, FSx</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223503.png"></p><hr><h3 id="15-Elastic-Beanstalk"><a href="#15-Elastic-Beanstalk" class="headerlink" title="15. Elastic Beanstalk"></a>15. Elastic Beanstalk</h3><h4 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h4><ul><li>Elastic Beanstalk is a developer centric view of deploying an application on AWS</li><li>Automatically handles capacity provisioning, load balancing, scaling ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150326.png"></p><ul><li>Web Server Tier vs. Worker Tier (é‡è¦)<ul><li>ä¸€ä¸ªç®¡ Web Server, å¦ä¸€ä¸ªå¤„ç† Process (SQS, SNS ç­‰ç­‰)</li></ul></li><li>å¯¹äº Worker æˆ–è€… Web environment æ¥è¯´, éœ€è¦ä¸€ä¸ª <code>cron.yaml</code> æ–‡ä»¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210711.png"></p><ul><li>å¦‚æœé€‰æ‹© deploy åˆ° Elastic Beanstalk ä¸Š, å¹¶ä¸”çœé’±, é€‰æ‹© Single Instance Mode</li><li>å¦‚æœéœ€è¦ç”¨ç±»ä¼¼ Rust è¿™ç§ä¸æ”¯æŒçš„ runtime, å¯ä»¥ç”¨ Docker image å»è·‘ Elastic Beanstalk</li><li>å¦‚æœ deploy å¤±è´¥, é‚£ä¹ˆ EB ä¼š replace the failed instances with instances running in the application version from the most recent successful deployment (é‡è¦)</li><li>å¦‚æœè¦ setup HTTPS on Beanstalk, è¦åœ¨ <code>.ebextensions</code> folder å¼„ä¸€ä¸ª config æ¥ç®¡ Load Balancer</li><li>å¦‚æœè¦ migrate Beanstalk environment across Accounts<ul><li>Create a saved configuration download it to your local machine. Make the account-specific parameter changes and upload to the S3 bucket in another account. From Elastic Beanstalk console, create an application from â€˜Saved Configurationsâ€™</li></ul></li></ul><hr><h4 id="Beanstalk-Deployment-Modes"><a href="#Beanstalk-Deployment-Modes" class="headerlink" title="Beanstalk Deployment Modes"></a>Beanstalk Deployment Modes</h4><ul><li>ä¸€å…± 6 ç§ Beanstalk Deployment Modes</li><li>è¿™é‡Œé¢ Immutable å’Œ Traffic Splitting å¯èƒ½ä¼šå¯¼è‡´ EC2 burst balance lost (é‡è¦)</li><li>æ³¨æ„, Rolling å’Œ Rolling with additional batches éƒ½ä¼šå¯¼è‡´ reduce availability</li><li>All at once (ç›´æ¥å…¨éƒ¨æ›´æ–°, ä½†ä¼šæœ‰ downtime)<ul><li>Fastest, but have downtime</li></ul></li><li>Beanstalk ç”¨æ¥ avoid downtime çš„é€‰æ‹© blue&#x2F;green deployment (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151200.png"></p><ul><li>Rolling (ä¸€æ‰¹ä¸€æ‰¹çš„æ›´æ–°)<ul><li>Update a few instances at a time (bucket), then move onto the next bucket</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151311.png"></p><ul><li>Rolling with additional batches (ç±»ä¼¼ Rolling, ä½†æ˜¯è€ç‰ˆæœ¬ä»ç„¶è¿è¡Œ, æœ‰éƒ¨åˆ†é¢å¤–è´¹ç”¨)<ul><li>Like rolling, but spins up new instances to move the batch, old application still available</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151443.png"></p><ul><li>Immutable (å’Œ quick roll back æœ‰å…³)<ul><li>Spin up new instances in a new ASG, deploys version to these instances, and then swaps all the instances when everything is healthy</li><li>å¦‚æœéœ€è¦ maintain at least the full capacity of the application and minimal impact of fail deployment, é€‰æ‹© Immutable</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151738.png"></p><ul><li>Blue Green (ä¼šå…ˆåˆ›é€ ä¸€ä¸ªæ–°çš„ environment)<ul><li>Create a new environment and switch over when ready</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151838.png"></p><ul><li>Traffic Splitting (åˆ†ä¸€éƒ¨åˆ† traffic åˆ°æ–°ç¯å¢ƒ)<ul><li>Canary testing, send a small % of traffic to new deployment</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151935.png"></p><hr><h4 id="Beanstalk-Lifecycle-Policy"><a href="#Beanstalk-Lifecycle-Policy" class="headerlink" title="Beanstalk Lifecycle Policy"></a>Beanstalk Lifecycle Policy</h4><ul><li>Elastic Beanstalk can store at most 1000 application versions</li><li>To phase out old application versions, use a lifecycle policy (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152423.png"></p><hr><h4 id="Beanstalk-Extensions"><a href="#Beanstalk-Extensions" class="headerlink" title="Beanstalk Extensions"></a>Beanstalk Extensions</h4><ul><li>A zip file containing code must be deployed to Elastic Beanstalk<ul><li>In the <code>.ebextensions/</code> in the root directory (å¿…é¡»å­˜åœ¨ <code>.ebextensions</code> çš„æ–‡ä»¶å¤¹ä¸‹)</li><li><code>.config</code> extensions (å¿…é¡»ä»¥ <code>.config</code> ä¸ºæ–‡ä»¶åç¼€)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155315.png"></p><hr><h4 id="Beanstalk-with-CloudFormation"><a href="#Beanstalk-with-CloudFormation" class="headerlink" title="Beanstalk with CloudFormation"></a>Beanstalk with CloudFormation</h4><ul><li>Under the hood, Elastic Beanstalk relies on CloudFormation</li><li>CloudFormation is used to provision other AWS services</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161346.png"></p><hr><h4 id="Beanstalk-Cloning"><a href="#Beanstalk-Cloning" class="headerlink" title="Beanstalk Cloning"></a>Beanstalk Cloning</h4><ul><li>Clone an environment with the exact same configuration</li><li>Useful for deploying a <code>test</code> version of your application</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161531.png"></p><hr><h3 id="16-AWS-CloudFormation"><a href="#16-AWS-CloudFormation" class="headerlink" title="16. AWS CloudFormation"></a>16. AWS CloudFormation</h3><h4 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h4><ul><li>A declarative way of outlining AWS Infrastructure (ç›¸å½“äºæœ‰ä¸€ä¸ªæ¨¡æ¿å¸®ä½ ç”Ÿæˆä½ æƒ³è¦çš„)<ul><li>éœ€è¦ä»€ä¹ˆ (eg. EC2 Instance, S3), CloudFormation ç»™ä½  create ä»€ä¹ˆ</li><li>CloudFormation æ˜¯ IaaS (Infrastructure as a Service)</li></ul></li><li>Can leverage existing templates on the web (å¯ä»¥ç”¨ç½‘ä¸Šå·²ç»æœ‰çš„ template)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003448.png"></p><ul><li>Templates must be uploaded in S3 and referenced in CloudFormation (é‡è¦)</li><li>To update a template, need to re-upload a new version of the template (é‡è¦)<ul><li>ä¸€èˆ¬æ¥è¯´, å…ˆåœ¨æœ¬åœ°æ›´æ–° CloudFormation template, ç„¶åä¸Šä¼ åˆ° S3 å¹¶åœ¨ CloudFormation console é‡Œé¢åº”ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193232.png"></p><ul><li>Deploying CloudFormation Templates (2 ç§æ–¹æ³•)<ul><li>Manual way: Edit templates in Applcation Composer or code editor</li><li>Automated way: Edit templates in a YAML file</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193404.png"></p><ul><li>æ³¨æ„, ä¾èµ– CloudFormation æ¥ provision resource çš„æ˜¯ Elastic Beanstalk å’Œ SAM</li><li>CloudFormation ç”¨æ¥ upload Lambda å’Œ CloudFormation template çš„æ˜¯ <code>cloudformation package and cloudformation deploy</code></li><li>å¦‚æœè¦ declare Lambda function in CloudFormation<ul><li>Write the AWS Lambda code inline in CloudFormation in the <code>AWS::Lambda::Function</code> block as long as there are no third-party dependencies</li><li>Upload all the code as a zip to S3 and refer the object in <code>AWS::Lambda::Function</code> block</li></ul></li></ul><hr><h4 id="CloudFormation-Resources"><a href="#CloudFormation-Resources" class="headerlink" title="CloudFormation Resources"></a>CloudFormation Resources</h4><ul><li>Resources represent different AWS Components that will be created and configured<ul><li>ä¸éœ€è¦å®šä¹‰ <code>Resource</code> ç”Ÿæˆçš„ order</li><li><code>Resource</code> æ˜¯ mandatory çš„ (é‡è¦)</li></ul></li><li>å½¢å¼ <code>service-provider::service-name::data-type-name</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194109.png"></p><hr><h4 id="CloudFormation-Parameters"><a href="#CloudFormation-Parameters" class="headerlink" title="CloudFormation Parameters"></a>CloudFormation Parameters</h4><ul><li>Parameters are a way to provide inputs to AWS CloudFormation Template<ul><li>Can reuse the templates, also donâ€™t need to re-upload the template</li><li>Parameter type æœ‰ <code>AWS::EC2::KeyPair::KeyName, CommaDelimitedList, String</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194424.png"></p><ul><li>Parameters Settings (è®°ä¸‹é¢ 2 ä¸ª)<ul><li><code>AllowedValues</code>: ç»™ç”¨æˆ·é€‰é¡¹, æ¯”å¦‚é€‰æ‹© <code>t2.micro</code>, <code>t2.small</code>, <code>t2.medium</code></li><li><code>NoEcho</code>: æŠŠ password è¿™ç§ secret çš„ä¸œè¥¿ä» log é‡Œé¢ç§»é™¤</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194757.png"></p><ul><li>Pseudo Parameters<ul><li>Can be used anytime and enabled by default</li><li><code>AccountId, Region, StackId, StackName, NotificationARNs, NoValue</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223040.png"></p><hr><h4 id="CloudFormation-Mappings"><a href="#CloudFormation-Mappings" class="headerlink" title="CloudFormation Mappings"></a>CloudFormation Mappings</h4><ul><li>Mappings are fixed variables within CloudFormation template<ul><li>Used to differentiate between environments (dev vs. prod), regions, AMI ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212000.png"></p><hr><h4 id="CloudFormation-Outputs-amp-Exports"><a href="#CloudFormation-Outputs-amp-Exports" class="headerlink" title="CloudFormation Outputs &amp; Exports"></a>CloudFormation Outputs &amp; Exports</h4><ul><li>Outputs declares optional ouputs values that can import into other stacks (é‡è¦)<ul><li>Outputs å¯ä»¥ç”³æ˜èµ„æºè®©æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»– Stack é‡Œé¢ç”¨ (å‰ææ˜¯å…ˆ export å®ƒä»¬)</li><li>Exported output name åœ¨ Region å†…å¿…é¡»æ˜¯ unique çš„ (é‡è¦)</li></ul></li><li>å¦‚æœæˆ‘ä»¬è¦åœ¨ç¬¬äºŒä¸ª template é‡Œé¢å» leverage å‰ä¸€ä¸ª template çš„èµ„æº, è¦ç”¨åˆ° <code>Fn::ImportValue</code> (é‡è¦)</li><li>æ³¨æ„, <code>ImportValue</code> æ˜¯ç”¨æ¥ reference value from other stack, <code>Export</code> æ‰æ˜¯ç”¨æ¥ export value to other stacks çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212344.png"></p><ul><li>æ³¨æ„, å¯¹äº CloudFormation æ¥è¯´, All of the imports must be removed before you can delete the exporting stack or modify the output value, æ‰€ä»¥å¦‚æœé‡åˆ° Stack B, C éœ€è¦ reference Stack A, é‚£ä¹ˆ Stack A ä¸€å®šæ˜¯æœ€åè¢«åˆ é™¤çš„</li></ul><hr><h4 id="CloudFormation-Conditions"><a href="#CloudFormation-Conditions" class="headerlink" title="CloudFormation Conditions"></a>CloudFormation Conditions</h4><ul><li>Conditions are used to control the creation of resources or outputs based on a condition<ul><li>å¸¸è§çš„æœ‰ Environment, AWS Region, Parameter value</li></ul></li><li>å¯ä»¥å’Œ <code>Conditions</code> associate æœ‰ <code>Resources, Conditions, Outputs</code></li><li>åœ¨ CloudFormation template é‡Œé¢ä»£è¡¨ invalid section çš„æ˜¯ <code>Dependencies</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212731.png"></p><hr><h4 id="CloudFormation-Intrinsic-Functions"><a href="#CloudFormation-Intrinsic-Functions" class="headerlink" title="CloudFormation Intrinsic Functions"></a>CloudFormation Intrinsic Functions</h4><ul><li><code>Fn::Ref</code>: Reference Rarameters or Resources (åªèƒ½åœ¨ Parameter æˆ–è€… Resource é‡Œç”¨)</li><li><code>Fn::GetAtt</code>: Returns the value of an attribute from a resource in the template</li><li><code>Fn::FindInMap</code>: Return a named value from a specific key (æ³¨æ„, å°± 3 å‚æ•°)</li><li><code>Fn::ImportValue</code>: Import values that are exported in other stacks</li><li><code>Fn::Base64</code>: Convert String to itâ€™s Base64 representation</li><li>Condition Functions: <code>Fn::And/Equals/If/Not/Or</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214211.png"></p><hr><h4 id="CloudFormation-Rollbacks"><a href="#CloudFormation-Rollbacks" class="headerlink" title="CloudFormation Rollbacks"></a>CloudFormation Rollbacks</h4><ul><li>Stack Creation Fails å’Œ Stack Update Fails éƒ½ä¼šå» rollback, ä½† rollback ä¹Ÿå¯èƒ½å¤±è´¥</li><li>Rollback ä¹‹åå¦‚æœéœ€è¦é‡æ–°æ›´æ–° Stack, è¦å…ˆåˆ é™¤ä¹‹å‰çš„ Stack, ç„¶å create æ–°çš„ Stack</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215108.png"></p><hr><h4 id="CloudFormation-Service-Role"><a href="#CloudFormation-Service-Role" class="headerlink" title="CloudFormation Service Role"></a>CloudFormation Service Role</h4><ul><li>IAM role that allow CloudFormation to <code>create/update/delete</code> stack resources<ul><li>å¯ä»¥ç”¨ Stack Servie Role å»ç»™ developer permission å»ç®¡ç† resources (é‡è¦)</li></ul></li><li>Achieve least privilege principle, must have <code>iam::PassRole</code> permission</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215347.png"></p><hr><h4 id="CloudFormation-DeletionPolicy"><a href="#CloudFormation-DeletionPolicy" class="headerlink" title="CloudFormation DeletionPolicy"></a>CloudFormation DeletionPolicy</h4><ul><li>DeletionPolicy &#x3D; Delete (é»˜è®¤)<ul><li>Control what happens when the CloudFormation template is deleted or when a resource is removed from a CloudFormation template</li></ul></li><li>Delete wonâ€™t work on S3 if bucket is not empty</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220014.png"></p><ul><li>DeletionPolicy &#x3D; Retain (ç›¸å½“äºç”³æ˜ä»€ä¹ˆè¦è¢«ä¿å­˜)<ul><li>Specify on resources to preserve in case of CloudFormation deletes</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220147.png"></p><ul><li>DeletionPolicy &#x3D; Snapshot (ä¼šåœ¨åˆ é™¤å‰ç”Ÿæˆä¸€ä¸ªå¤‡ä»½)<ul><li>Create one final snapshot before deleting the resource</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220302.png"></p><hr><h4 id="CloudFormation-Stack-Policy"><a href="#CloudFormation-Stack-Policy" class="headerlink" title="CloudFormation Stack Policy"></a>CloudFormation Stack Policy</h4><ul><li>A Stack Policy is a JSON document that defines the update actions that are allowed on specific resources during Stack updates</li><li>Protect resources from unintentional updates (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220535.png"></p><hr><h4 id="CloudFormation-Termination-Protection"><a href="#CloudFormation-Termination-Protection" class="headerlink" title="CloudFormation Termination Protection"></a>CloudFormation Termination Protection</h4><ul><li>To prevent accidental deletes of CloudFormation Stacks, use <code>TerminationProtection</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220655.png"></p><hr><h4 id="CloudFormation-Custom-Resources"><a href="#CloudFormation-Custom-Resources" class="headerlink" title="CloudFormation Custom Resources"></a>CloudFormation Custom Resources</h4><ul><li>Used to define resources that are not supported or outside CloudFormation</li><li>Defined in template with <code>Custom::MyCustomResourceTypeName</code></li><li>å¯ä»¥å¤„ç†ä¹‹å‰æåˆ°çš„ S3 bucket æ— æ³•åˆ é™¤çš„é—®é¢˜</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221103.png"></p><hr><h4 id="CloudFormation-StackSets"><a href="#CloudFormation-StackSets" class="headerlink" title="CloudFormation StackSets"></a>CloudFormation StackSets</h4><ul><li>Create, update, delete stacks across multiple accounts and regions<ul><li>æ³¨æ„, StackSets æ˜¯ç»™å¤šä¸ªè´¦æˆ·, æˆ–è€…å¤šä¸ª Region å»åˆ›é€  CloudFormation stack</li><li>åªæœ‰ Administrator æ‰å¯ä»¥åˆ›å»º StackSets</li></ul></li><li>When update a stack set, all associated stack instance will be updated (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221509.png"></p><hr><h3 id="17-SQS-SNS-Kinesis"><a href="#17-SQS-SNS-Kinesis" class="headerlink" title="17. SQS, SNS, Kinesis"></a>17. SQS, SNS, Kinesis</h3><h4 id="AWS-SQS"><a href="#AWS-SQS" class="headerlink" title="AWS SQS"></a>AWS SQS</h4><ul><li>ç”¨æ¥ decouple applications (æ¯”å¦‚å¤„ç†è§†é¢‘, å±äºå¤šå¯¹å¤šæ¨¡å‹)</li><li>SQS scale automatically (unlimited throughput, unlimited message, can retry)</li><li>SQS æœ€å¤šåªèƒ½ä¿å­˜ message 14 å¤©, SQS ä¸€ä¸ª message æœ€å¤§åªæœ‰ 256 KB (é‡è¦)</li><li>SQS ä¸€æ¬¡æœ€å¤šåªèƒ½ retrieve 10 ä¸ª message (é‡è¦)</li><li>Standard SQS å…è®¸å°† S3 ä½œä¸º event notification destination, SQS FIFO åˆ™ä¸è¡Œ</li><li>å¤„ç† parallel é€‰ SQS è€Œä¸æ˜¯ SNS</li><li>å¤„ç† decouple microservice (ä½†æ˜¯æ²¡æœ‰ 3rd party çš„) å°±æ˜¯ SQS</li><li>å¤„ç† high-throughput request-reponse message pattern çš„, é€‰æ‹© Temporary Queue</li><li>é‡åˆ°è¦å¤„ç† workflows that take a long time to complete, é€‰æ‹© Dedicated worker environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231916.png"></p><ul><li>SQS - Producing Messages<ul><li>Message is persisted in SQS until a consumer delete it (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232217.png"></p><ul><li>SQS - Consuming Messages<ul><li>å¯ä»¥æœ‰å¾ˆå¤š consumer æ¥åŒæ—¶ parallel å¤„ç† messages (é‡è¦)</li><li>Consumer delete messages after processing them (å¤„ç†å®Œå°±åˆ æ‰)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232414.png"></p><ul><li>å½“é‡åˆ° SQS è€Œä¸”éœ€è¦ priority çš„æ—¶å€™, Create two Amazon SQS standard queues, Set up Amazon EC2 instances to prioritize polling</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q32-i1.jpg"></p><ul><li>å…³äº SQS <code>CreateQueue</code> API çš„ 2 ä¸ªçŸ¥è¯†ç‚¹</li><li>The visibility timeout value of the queue is in seconds, default is 30 seconds</li><li>You canâ€™t change the queue type after create it</li><li>å¦‚æœé‡åˆ° <code>ApproximateNumberOfMessagesVisible</code> è¿™ä¸ªé—®é¢˜, å¯ä»¥ç”¨ backlog per instance metric with target tracking scaling policy æ¥è§£å†³</li></ul><hr><h4 id="SQS-Message-Visibility-Timeout"><a href="#SQS-Message-Visibility-Timeout" class="headerlink" title="SQS Message Visibility Timeout"></a>SQS Message Visibility Timeout</h4><ul><li>Visibility Timeout is high: Consumer crash, re-process take time</li><li>Visibility Timeout is low: Get duplicate (é˜²æ­¢ read duplicate, å¢åŠ  timeout, é‡è¦)</li><li>Use the <code>ChangeMessageVisibility</code> API call to increase the visibility timeout (é‡è¦)</li><li>é¢˜ç›®å¤§éƒ¨åˆ†é’ˆå¯¹çš„éƒ½æ˜¯ Visibility Timeout low çš„æƒ…å†µ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020440.png"></p><hr><h4 id="SQS-Dead-Letter-Queues-DLQ"><a href="#SQS-Dead-Letter-Queues-DLQ" class="headerlink" title="SQS Dead Letter Queues (DLQ)"></a>SQS Dead Letter Queues (DLQ)</h4><ul><li>Fail to process message within Visibility Timeout, message goes back to queue<ul><li>é—®é¢˜åœ¨äºè¿™ä¸ª message å¯èƒ½æœ¬èº«å°±æ˜¯æ— æ³•å¤„ç†çš„</li><li>é‡åˆ° SQS message process failure, é€‰æ‹© DLQ æ¥è§£å†³ (é‡è¦)</li></ul></li><li>Set a threshold of how many times a message can go back to queue<ul><li>After <code>MaximumReceives</code> threshold exceeded, message goes to DLQ</li><li>DLQ å¾ˆé€‚åˆç”¨æ¥åš Debug</li></ul></li><li>DLQ of a FIFO queue must also be a FIFO queue, same with Standard (å½¢å¼å¾—ç›¸åŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164418.png"></p><ul><li>DLQ - Redrive to Source (ç›¸å½“äºä» DLQ ä¿®å¤å®Œè¿”å›åŸæ¥çš„ Queue)<ul><li>Feature to help consume messages in DLQ to understand what is wrong</li><li>When the code is fixed, we can redrive the message from DLQ to source queue</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164607.png"></p><hr><h4 id="SQS-Delay-Queues"><a href="#SQS-Delay-Queues" class="headerlink" title="SQS Delay Queues"></a>SQS Delay Queues</h4><ul><li>Delay a message up to 15 minutes (ä½¿ç”¨ <code>DelaySeconds</code> å‚æ•°)</li><li>é‡åˆ°éœ€è¦ SQS å» postpone the delivery of new messages, é‚£ä¹ˆå°±æ˜¯ Delay Queue</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164931.png"></p><hr><h4 id="SQS-Long-Polling"><a href="#SQS-Long-Polling" class="headerlink" title="SQS Long Polling"></a>SQS Long Polling</h4><ul><li>Decrease latency &amp; decrease API call (å‡å°‘ API è¯·æ±‚, æ›´å¥½çš„ performance, é‡è¦)<ul><li>Minimize the cost of using SQS (çœé’±)</li><li>Long Polling ä¸èƒ½å¤„ç† SQS duplicate, è¿˜æ˜¯è¦ç”¨ Visibility Timeout</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003255.png"></p><hr><h4 id="SQS-Extended-Client"><a href="#SQS-Extended-Client" class="headerlink" title="SQS Extended Client"></a>SQS Extended Client</h4><ul><li>Handle send message greater than 256 KB (é‡è¦)<ul><li>è¿™è¯æ˜ SQS çš„ message ä¹Ÿæ˜¯æœ‰ size çš„é™åˆ¶</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165310.png"></p><hr><h4 id="SQS-FIFO-Queues"><a href="#SQS-FIFO-Queues" class="headerlink" title="SQS FIFO Queues"></a>SQS FIFO Queues</h4><ul><li>æŒ‰ order ä¼ é€’ message (SNS ä¹Ÿå¯ä»¥åšåˆ°)<ul><li>By default, FIFO queues support up to 300 messages per second (é‡è¦)</li></ul></li><li>å¦‚æœæ²¡æœ‰ GroupID, é‚£åªèƒ½æœ‰ 1 ä¸ª consumer, å¦‚æœæœ‰ GroupID, å¯ä»¥æœ‰å¤šä¸ª consumer (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003507.png"></p><ul><li>æŠŠ SQS è½¬æˆ FIFO queue<ul><li>Delete the existing SQS and recreate it as FIFO queue</li><li>Make sure the name of the FIFO queue ends with .fifo suffix</li><li>Make sure the throughput for the FIFO queue not exceed 3000 meesage &#x2F; second</li></ul></li></ul><hr><h4 id="SQS-FIFO-Queues-Advanced"><a href="#SQS-FIFO-Queues-Advanced" class="headerlink" title="SQS FIFO Queues Advanced"></a>SQS FIFO Queues Advanced</h4><ul><li>De-duplication: (ä½¿ç”¨ <code>MessageDeduplicationID</code>)<ul><li>Send 2 same message within 5 minutes interval, the second will be refused</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170023.png"></p><ul><li>Message Grouping (ä½¿ç”¨ <code>MessageGroupID</code>)<ul><li>Same <code>MessageGroupID</code> in the entire FIFO queue, then only have 1 consumer</li><li>Different MessageGroupID for a subset of message, have different consumers</li><li>å¯¹äº FIFO queues æ¥è¯´, <code>MessageGroupID</code> å¯ä»¥ä¿è¯ same message group æ˜¯æœ‰ order çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170254.png"></p><hr><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><ul><li>Send one message to many receivers (å¯ä»¥ç»™ç”¨æˆ·å‘ email)<ul><li>Publisher &amp; Subscriber æ¨¡å‹ (å±äºä¸€å¯¹å¤šæ¨¡å‹)</li><li>Subscriber: SQS, Lambda, Kinesis Data Firehose, HTTPS endpoints, Email</li></ul></li><li>SNS Message Filtering: Could filter message based on topic (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010634.png"></p><hr><h4 id="Fan-Out-Pattern"><a href="#Fan-Out-Pattern" class="headerlink" title="Fan Out Pattern"></a>Fan Out Pattern</h4><ul><li>Push once in SNS, receive in all SQS (ç”± SNS ä¼ é€’ message ç»™ SQS æ¥æ¥æ”¶, é‡è¦)<ul><li>Fully decoupled, no data loss (é‡è¦, å› ä¸ºå®ƒ decouple)</li><li>å¯ä»¥ç”¨äº message filtering (ä¿¡æ¯è¿‡æ»¤, æ ¹æ®ä¸åŒçš„ filter policy)</li></ul></li><li>Kinesis ä¹Ÿå¯ä»¥ä½¿ç”¨ Fan Out Pattern (ä½¿ç”¨ Shard)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011026.png"></p><hr><h4 id="AWS-Kinesis"><a href="#AWS-Kinesis" class="headerlink" title="AWS Kinesis"></a>AWS Kinesis</h4><ul><li>Process, ingest, buffer streaming data in real-time (å¤„ç†å®æ—¶æ•°æ®)</li><li>Kinesis Data Streams: Capture, process, store data streams</li><li>Kinesis Data Firehose: Load data streams into AWS data stores (S3, Redshift)</li><li>Kinesis Data Analytics: Analyze data streams with SQL or Apache Flink</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150053.png"></p><blockquote><p>Kinesis Agent cannot write to Amazon Kinesis Firehose for which the delivery stream source is already set as Amazon Kinesis Data Streams</p></blockquote><ul><li>Kinesis Agent is a stand-alone Java software application that offers an easy way to collect and send data to Kinesis Data Streams</li></ul><hr><h4 id="Kinesis-Data-Streams"><a href="#Kinesis-Data-Streams" class="headerlink" title="Kinesis Data Streams"></a>Kinesis Data Streams</h4><ul><li>Have the ability to reprocess &amp; replay stream data (å¤„ç†æ•°æ®, é‡è¦)<ul><li>å¯¹äº injest data æ¥è¯´, Kinesis Data Firehose æ¯” Kinesis Data Streams å¥½</li><li>å¤„ç† real-time data stream, æ¯”å¦‚ clickstreams, transactions, media (é‡‘èæ•°æ®)</li><li>Consumer æœ‰ Lambda, Kinesis Firehose, Kinesis Data Analytics</li><li>Kinesis Data Streams æœ‰åŠ©äºæ¯ç§’ä»å¤šä¸ªæ¥æºè¿ç»­æ”¶é›†æ•° GB çš„æ•°æ®</li><li>Kinesis Data Streams æœ€å¤šä¿å­˜æ•°æ® 1 å¹´</li></ul></li><li>Once data is inserted in Kinesis, it canâ€™t be deleted (æ²¡æ³•åˆ é™¤)</li><li>å¦‚æœé—®åˆ° Kinesis Data Stream åŠ ä¸Š SQL, é‚£ä¹ˆç­”æ¡ˆé‡Œä¸€å®šæœ‰ Kinesis Data Analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014850.png"></p><ul><li>Data share the same partition goes the same shard (æœ‰é¡ºåºçš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151123.png"></p><ul><li>Capacity Mode (ä¸€å…± 2 ç§)<ul><li>Provisioned mode: Choose a number of shards provisioned (è®¾ç½®ä¸Šé™)</li><li>On-demand mode: No need to provision or manage capacity (è‡ªåŠ¨ scale)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151507.png"></p><hr><h4 id="Kinesis-Producers"><a href="#Kinesis-Producers" class="headerlink" title="Kinesis Producers"></a>Kinesis Producers</h4><ul><li>Put data records into data streams</li><li>Producers: AWS SDK, Kinesis Producer Library (KPL), Kinesis Agent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172002.png"></p><ul><li>Use Hash function to determine which message should go to which Shard</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172126.png"></p><ul><li>å¦‚æœé‡åˆ° <code>ProvisionedThroughputExceededException</code> é—®é¢˜<ul><li>Over producing to a shard, get <code>ProvisionedThroughputExceededException</code></li><li>è§£å†³æ–¹æ¡ˆ 1: Use highly distributed partition key</li><li>è§£å†³æ–¹æ¡ˆ 2: Use error retry and exponential backoff mechanism</li><li>è§£å†³æ–¹æ¡ˆ 3: Increase shards</li><li>è§£å†³æ–¹æ¡ˆ 4: Decrease the frequency or size of the requests</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172335.png"></p><hr><h4 id="Kinesis-Consumers"><a href="#Kinesis-Consumers" class="headerlink" title="Kinesis Consumers"></a>Kinesis Consumers</h4><ul><li>Get data records from data streams and process them</li><li>Consumers: Lambda, Kinesis Data Analytics, Kinesis Data Firehose, KCL ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190504.png"></p><ul><li>Kinesis Consumers - Custom Consumer (é‡è¦)<ul><li>Shared Fan-out Consumer: pull, low number of consuming applications, çœé’±</li><li>Enhanced Fan-out Consumer: push, multiple consuming application, è´µ</li><li>Enhanced Fan-out Consumer å¯ä»¥ increase read throughput (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202712.png"></p><ul><li>Kinesis Consumers - AWS Lambda (é‡è¦)<ul><li>Supports Classic &amp; Enhanced fan-out consumers</li><li>Read records in batches, can configure batch size and window</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203145.png"></p><hr><h4 id="Kinesis-Client-Library-KCL"><a href="#Kinesis-Client-Library-KCL" class="headerlink" title="Kinesis Client Library (KCL)"></a>Kinesis Client Library (KCL)</h4><ul><li>A Java library that helps read record from a Kinesis Data Stream</li><li>When using Kinesis Client Library, each shard is to be read-only by one KCL instance</li><li>Progress is checkpointed into DynamoDB (need IAM access)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205645.png"></p><hr><h4 id="Kinesis-Operations"><a href="#Kinesis-Operations" class="headerlink" title="Kinesis Operations"></a>Kinesis Operations</h4><ul><li>Shard Splitting: Deal with <code>hot shard</code><ul><li>Used to increase the Stream capacity, divide a <code>hot shard</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205913.png"></p><ul><li>Merging Shards: Group two shards with low traffic<ul><li>Decrease the Stream capacity and save costs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210015.png"></p><hr><h4 id="Kinesis-Data-Firehose"><a href="#Kinesis-Data-Firehose" class="headerlink" title="Kinesis Data Firehose"></a>Kinesis Data Firehose</h4><ul><li>Kinesis Data Firehose load streaming data into data stores and analytics tools<ul><li>å¯¹äº injest data æ¥è¯´, Kinesis Data Firehose æ¯” Kinesis Data Streams å¥½</li><li>Managed service, auto scaling, serverless, support data transformation</li><li>Kinesis Data Firehose æä¾›å°†æ•°æ®æµä¼ è¿›æ•°æ®å­˜å‚¨æˆ–è€…æ•°æ®åˆ†æçš„åŠŸèƒ½</li></ul></li><li>Near Real Time, è€Œä¸” Firehose åªæ”¯æŒä¸€ä¸ª consumer (dump data in a single data repo)<ul><li>ä½†æ˜¯ä¸è¦è¢« Near Real Time å¿½æ‚ , è¦æ ¹æ®é¢˜ç›®é€‰æ‹© Data Stream æˆ–è€… Data Firehose</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015040.png"></p><ul><li>Firehose çš„å¯¹è±¡æ˜¯ S3, Redshift è¿™ç§ (Serverless, ä¸“é—¨å¤„ç† log æ•°æ®)<ul><li>Firehose ä¸æ”¯æŒ DynamoDB çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151812.png"></p><ul><li>Kinesis Data Streams vs Firehose<ul><li>Data Streams: Write custom code, real-time, have data storage, have replay</li><li>Firehose: Fully managed, near real-time, no data storage, no replay</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152247.png"></p><hr><h4 id="Kinesis-Data-Analytics"><a href="#Kinesis-Data-Analytics" class="headerlink" title="Kinesis Data Analytics"></a>Kinesis Data Analytics</h4><ul><li>Real-time analytics on Kinesis Data Streams &amp; Firehose using SQL (é‡è¦)<ul><li>Fully managed, auto-scaling, serverless</li><li>ä»¥ Kinesis Data Streams &amp; Firehose ä½œä¸ºç›®æ ‡ä½¿ç”¨ SQL è¿›è¡Œæ•°æ®åˆ†æ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225813.png"></p><ul><li>Amazon Managed Service for Apache Flink<ul><li>Use Flink to process and analyze streaming data</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225906.png"></p><hr><h4 id="Data-ordering-for-Kinesis"><a href="#Data-ordering-for-Kinesis" class="headerlink" title="Data ordering for Kinesis"></a>Data ordering for Kinesis</h4><ul><li>Ordering data into Kinesis<ul><li>Same key (Partition) will always go to the same shard (æœ‰é¡ºåº)</li><li>é€‚ç”¨äºéœ€è¦å¤„ç†å¤§é‡ data çš„æƒ…å†µ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154939.png"></p><ul><li>Ordering data into SQS<ul><li>ç›¸æ¯”ä¹‹ä¸‹ SQS åªæœ‰ FIFO (GroupID), ä¸ç„¶å°±æ²¡æœ‰ ordering</li><li>é€‚ç”¨äºéœ€è¦ dynamic number of consumers çš„æƒ…å†µ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210807.png"></p><hr><h3 id="18-AWS-Mointoring-amp-Audit"><a href="#18-AWS-Mointoring-amp-Audit" class="headerlink" title="18. AWS Mointoring &amp; Audit"></a>18. AWS Mointoring &amp; Audit</h3><h4 id="CloudWatch-Metrics"><a href="#CloudWatch-Metrics" class="headerlink" title="CloudWatch Metrics"></a>CloudWatch Metrics</h4><ul><li>CloudWatch Metrics ç”¨äºæ”¶é›†ã€å­˜å‚¨å’Œåˆ†æ AWS èµ„æºå’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½æŒ‡æ ‡</li><li>å¯ä»¥ç”¨ <code>PutMetricData</code> æ¥ push custom metric data åˆ° CloudWatch é‡Œ</li><li>è®°ä½, å¦‚æœæ˜¯å¤„ç†ç¬¬ä¸‰æ–¹çš„ API, ç”¨çš„ä¸€å®šæ˜¯ CloudWatch custom metrics (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010357.png"></p><ul><li>CloudWatch - EC2 Detailed Monitoring (é‡è¦)<ul><li>With detailed monitoring, you get data every 1 minute</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033959.png"></p><hr><h4 id="CloudWatch-Custom-Metrics"><a href="#CloudWatch-Custom-Metrics" class="headerlink" title="CloudWatch Custom Metrics"></a>CloudWatch Custom Metrics</h4><ul><li>Define your own custom metrics to CloudWatch</li><li>High-Resolution Custom Metrics can have a minimum resolution of 1 second (é‡è¦)</li><li>Accepts metric data points two weeks in the past and two hours in the future</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010630.png"></p><hr><h4 id="CloudWatch-Logs"><a href="#CloudWatch-Logs" class="headerlink" title="CloudWatch Logs"></a>CloudWatch Logs</h4><ul><li>A place to store application logs in AWS (S3, Kinesis, Lambda, OpenSearch)<ul><li>CloudWatch Logs å¯ä»¥è‡ªå·±å®šä¹‰ expire çš„æ—¶é—´, é»˜è®¤æ˜¯ never expire</li><li>Log Retention Policy defined at Log Groups level (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010815.png"></p><ul><li>CloudWatch Logs Insights (query engine)<ul><li>Search and analyze log data stored in CloudWatch Logs (æŸ¥è¯¢)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150531.png"></p><ul><li>CloudWatch Logs Subscriptions<ul><li>Get a real-time log events from CloudWatch Logs for processing and analysis</li><li>Subscription Filter: Filter which logs are events delivered to destination (é‡è¦)</li><li>Cross-Account Subscription: Send log events to resources in different AWS account</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150643.png"></p><hr><h4 id="CloudWatch-Agent"><a href="#CloudWatch-Agent" class="headerlink" title="CloudWatch Agent"></a>CloudWatch Agent</h4><ul><li>CloudWatch Logs Agent: Old version, only send to CloudWatch Logs</li><li>CloudWatch Unified Agent: å¯ä»¥ä¼ é€’æ›´å¤šä¿¡æ¯, æ¯”å¦‚ CPU, RAM ç­‰ç­‰<ul><li>CloudWatch Unified Agent å¯ä»¥æŠŠ EC2 çš„ log ä¼ é€’ç»™ CloudWatch (é‡è¦)</li></ul></li><li>å¯ä»¥æŠŠ CloudWatch Agent è£…åœ¨ on-premise ä¸Šæ¥æ”¶é›†ä¿¡æ¯</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151251.png"></p><hr><h4 id="CloudWatch-Logs-Metric-Filter"><a href="#CloudWatch-Logs-Metric-Filter" class="headerlink" title="CloudWatch Logs Metric Filter"></a>CloudWatch Logs Metric Filter</h4><ul><li>CloudWatch Logs Metric Filter ç”¨äºä»æ—¥å¿—æ•°æ®ä¸­æå–æŒ‡æ ‡ï¼Œä»¥ç›‘æ§ç‰¹å®šäº‹ä»¶å’Œæ¨¡å¼</li><li>Filters only publish the metric data points for events that happen after the filter was created (åªæœ‰ filter ç”Ÿæˆåçš„ event æ‰ä¼šè¢« filter)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011918.png"></p><hr><h4 id="CloudWatch-Alarms"><a href="#CloudWatch-Alarms" class="headerlink" title="CloudWatch Alarms"></a>CloudWatch Alarms</h4><ul><li>CloudWatch Alarms are used to trigger notifications for any metric</li><li>CloudWatch Alarms ä¸»è¦å¯¹è±¡æ˜¯ EC2, ASG, SNS (é‡è¦)</li><li>High resolution custom metrics çš„æƒ…å†µä¸‹ triggered æœ€å¿«æ˜¯ 10 ç§’ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012137.png"></p><ul><li>Composite Alarms (ç›‘è§†å½“å‰æ‰€æœ‰ Alarm çš„æƒ…å†µ)<ul><li>Composite Alarams are mointoring the states of multiple other alarms</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151615.png"></p><ul><li>å¯ä»¥ç”¨ <code>set-alarm-state</code> CLI æ¥æ§åˆ¶ CloudWatch Alarms, è¿™æ ·æ˜¯ cost-effective çš„</li></ul><hr><h4 id="CloudWatch-Syntheics"><a href="#CloudWatch-Syntheics" class="headerlink" title="CloudWatch Syntheics"></a>CloudWatch Syntheics</h4><ul><li>Configurable script that monitor your APIs, URLs, Websites<ul><li>Can run once or on a regular schedule</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012521.png"></p><hr><h4 id="AWS-EventBridge"><a href="#AWS-EventBridge" class="headerlink" title="AWS EventBridge"></a>AWS EventBridge</h4><ul><li>Schedule CRON jobs <code>CRON means jobs on a repeating schedule</code></li><li>React to events from SaaS application (AWS services)<ul><li>å¦‚æœæåˆ° 3rd party application, è€ƒè™‘ EventBridge</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185605.png"></p><ul><li>Event Bus<ul><li>å¯ä»¥ archive rvents å¹¶ä¸” replay archived events, good for debugging</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190403.png"></p><ul><li>Schema Registry: Generate code in advance for how data is structured in event bus<ul><li>Analyze events in Event Bus and infer schema</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190004.png"></p><ul><li>Resource-based Policy<ul><li>Manage permissions (allow &#x2F; deny) for a specific Event Bus</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190215.png"></p><hr><h4 id="AWS-X-Ray"><a href="#AWS-X-Ray" class="headerlink" title="AWS X-Ray"></a>AWS X-Ray</h4><ul><li>Automated Trace Analysis &amp; Central Service Map Visulization<ul><li>AWS X-Ray æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è·Ÿè¸ªç³»ç»Ÿï¼Œç”¨äºåˆ†æå’Œè°ƒè¯•ç”Ÿäº§å’Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„æ€§èƒ½é—®é¢˜</li><li>X-Ray å¯ä»¥ cross-account tracing and visualization (é‡è¦, tracing å’Œ visualization)</li></ul></li><li>å¦‚æœé—®åˆ°è¦æ£€æŸ¥ microservices <code>5XX</code> çš„æŠ¥é”™, é€‰æ‹© X-Ray service, è€Œä¸æ˜¯ CloudTrail service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020641.png"></p><ul><li>How to enable X-Ray (ä¸¤ç§æ–¹æ³•)<ul><li>Import the AWS X-Ray SDK in your code</li><li>Install the X-Ray daemon or enable X-Ray AWS Integration</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021009.png"></p><ul><li>X-Ray Troubleshooting (EC2 è¦åœ¨ Instance ä¸Šè·‘ X-Ray Daemon)<ul><li>EC2: IAM Role has proper permission å’Œ Instace running X-Ray Daemon (é‡è¦)</li><li>Lambda: IAM Role <code>RayWriteOnlyAccess</code> å’Œ Enable Lambda X-Ray Active Tracing</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021323.png"></p><ul><li>å¦‚æœè¦åœ¨ Farget deployed çš„ Docker ä¸Šè·‘ X-Ray daemon<ul><li>Deploy the X-Ray daemon agent as a sidecar container</li><li>Provide the correct IAM task role to the X-Ray container</li></ul></li><li>å¦‚æœè¦éªŒè¯ X-Ray daemon åœ¨ ECS ä¸Šè·‘, ç”¨ <code>AWS_XRAY_DAEMON_ADDRESS</code></li></ul><hr><h4 id="X-Ray-Advance"><a href="#X-Ray-Advance" class="headerlink" title="X-Ray Advance"></a>X-Ray Advance</h4><ul><li>Instrumentation: Measure of productâ€™s performance and write trace information<ul><li>æ£€æµ‹åº”ç”¨ç¨‹åºæ¶‰åŠå‘é€ä¼ å…¥å’Œä¼ å‡ºè¯·æ±‚ä»¥åŠåº”ç”¨ç¨‹åºå†…å…¶ä»–äº‹ä»¶çš„è·Ÿè¸ªæ•°æ®</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021538.png"></p><ul><li>X-Ray Concepts (è®°ä¸‹é¢ 2 ä¸ª)<ul><li><code>Sampling</code>: Decrease the amount of requests sent to X-Ray, reduce cost (çœé’±)</li><li><code>Annotations</code>: Index traces and use with filters (é‡è¦, æœ‰ filter)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021924.png"></p><ul><li>X-Ray Sampling Rules (å¯ä»¥æ§åˆ¶ record data çš„æ•°é‡, é‡è¦)<ul><li>With sampling rules, you control the amount of data that you record</li><li>X-Ray records first request each second, and five percent for additional requests</li><li>ä¸Šé¢é‡è¦çš„ç‚¹: first request <code>each second</code>, addition requests <code>5 percent</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022256.png"></p><hr><h4 id="X-Ray-APIs"><a href="#X-Ray-APIs" class="headerlink" title="X-Ray APIs"></a>X-Ray APIs</h4><ul><li>X-Ray Write APIs<ul><li><code>PutTraceSegments</code>: Upload segment documents to AWS X-Ray</li><li><code>PutTelemetryRecords</code>: Used by AWS X-Ray daemon to upload telemetry</li><li><code>GetSamplingRules</code>: Retrieve all sampling rules</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022650.png"></p><ul><li>X-Ray Read APIs: å…¨éƒ½éƒ½å¸¦æœ‰ <code>Get</code><ul><li><code>GetServiceGraph</code>: Main graph</li><li><code>BatchGetTrace</code>: Retrieve a list of traces specified by ID</li><li><code>GetTraceSummaries</code>: Retrieve IDs and annotations for trace in a time frame</li><li><code>GetTraceGraph</code>: Retrieve a service graph for one or more trace IDs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022934.png"></p><hr><h4 id="X-Ray-with-Beanstalk"><a href="#X-Ray-with-Beanstalk" class="headerlink" title="X-Ray with Beanstalk"></a>X-Ray with Beanstalk</h4><ul><li>å¯ä»¥åœ¨ Elastic Beanstalk ä½¿ç”¨ X-Ray daemon (ç”¨ console æˆ–è€… config file)<ul><li>éœ€è¦ <code>.ebextensions/xray-daemon.config</code> æ–‡ä»¶</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023148.png"></p><hr><h4 id="AWS-Distro-for-OpenTelemetry"><a href="#AWS-Distro-for-OpenTelemetry" class="headerlink" title="AWS Distro for OpenTelemetry"></a>AWS Distro for OpenTelemetry</h4><ul><li>AWS supported distribution of open-source project OpenTelemetry</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023636.png"></p><hr><h4 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h4><ul><li>AWS CloudTrail æ˜¯ä¸€é¡¹æ—¥å¿—è®°å½•æœåŠ¡ï¼Œè®°å½•å’Œç›‘æ§ AWS è´¦æˆ·ä¸­çš„ API è°ƒç”¨å’Œç›¸å…³æ´»åŠ¨</li><li>CloudTrail æ˜¯ Global Service, å¦‚æœä¸œè¥¿è¢«è¯¯åˆ , ç¬¬ä¸€æ—¶é—´çœ‹ CloudTrail</li><li>CloudTrail å¯ä»¥å’Œ EventBridge ä¸€èµ·ç”¨å» Intercept API Calls</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023929.png"></p><ul><li>CloudTrail Events (ä¸€å…± 3 ç§)<ul><li>Management Events: Performed on resources in AWS account</li><li>Data Events: S3 object-level activity</li><li>CloudTrail Insigths Events: Detect unusual activity (å®‰å…¨)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023847.png"></p><ul><li>CloudTrail Insights (é‡è¦, ç›‘æ§ unusual activity)<ul><li>CloudTrail Insights to detect unusual activity in account</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192157.png"></p><ul><li>CloudTrail Event Retention (é‡è¦, å’Œ S3, Athena æœ‰å…³)<ul><li>Keep events to S3 after they stored 90 days and use Athena to analyze</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163847.png"></p><hr><h3 id="19-Lambda"><a href="#19-Lambda" class="headerlink" title="19. Lambda"></a>19. Lambda</h3><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>Virtual functions, serverless, limited by time (short execution of 15 min)<ul><li>Run on-demand, scaling is automated</li></ul></li><li>Could be Event-Driven, could handle CRON job<ul><li>Use EventBridge to trigger Lambda every hour</li></ul></li><li>Lambda æ˜¯æœ‰ account quota (é…é¢é™åˆ¶) çš„, éœ€è¦è”ç³» AWS æ¥æé«˜ä¸Šé™</li><li>Lambda environment variable æœ€å¤§é™åˆ¶æ˜¯ 4KB, æ²¡æœ‰æ•°é‡çš„é™åˆ¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img162057.png"></p><ul><li>å¯ä»¥ç”¨ Lambda å» connect private subnets in a VPC in your account (é‡è¦)</li><li>å¤§éƒ¨åˆ†é¢˜ç›®éƒ½æ˜¯é€šè¿‡å¢åŠ  memory æ¥ improve CPU-bound Lambda function peformance (é‡è¦)</li><li>API caching æ˜¯ç”¨æ¥ reduce calls çš„, è¦ faster initialization é€‰æ‹© provisioned concurrency</li></ul><hr><h4 id="Lambda-Synchronous-Invocations"><a href="#Lambda-Synchronous-Invocations" class="headerlink" title="Lambda Synchronous Invocations"></a>Lambda Synchronous Invocations</h4><ul><li>Synchronous: CLI, SDK, API Gateway, Application Load Balancer<ul><li>Results is returned right away</li><li>Error handling must happen client side</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164039.png"></p><hr><h4 id="Lambda-with-ALB"><a href="#Lambda-with-ALB" class="headerlink" title="Lambda with ALB"></a>Lambda with ALB</h4><ul><li>Expose a Lambda function as an HTTPs endpoint, use ALB or API Gateway<ul><li>The Lambda function must be registered in a Target Group (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163555.png"></p><ul><li>ALB Multi-Header Values<ul><li>HTTP headers and query string parameters are shown as arrays</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img163757.png"></p><hr><h4 id="Lambda-Asynchronous-Invocations"><a href="#Lambda-Asynchronous-Invocations" class="headerlink" title="Lambda Asynchronous Invocations"></a>Lambda Asynchronous Invocations</h4><ul><li>Asynchronous: S3, SNS, CloudWatch, EventBridge<ul><li>The events are placed in a Event Queue</li><li>Lambda attemps to retry on errors (3 tries total)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164249.png"></p><hr><h4 id="Lambda-Event-Source-Mapping"><a href="#Lambda-Event-Source-Mapping" class="headerlink" title="Lambda Event Source Mapping"></a>Lambda Event Source Mapping</h4><ul><li>Work with Kinesis Data Streams, SQS (FIFO), DynamoDB Streams (é‡è¦)<ul><li>Lambda function is invoked synchronously, æ‰€ä»¥ SNS å°±ä¸èƒ½ç”¨ Event Source Mapping</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165403.png"></p><ul><li>Streasm &amp; Lambda (Kinesis &amp; DynamoDB)<ul><li>An event source mapping creates an iterator for each shard, process items in order</li><li>Low traffic: Use batch window</li><li>High traffic: Multiple batches in parallel</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165631.png"></p><ul><li>Streasm &amp; Lambda Error Handling<ul><li>By default, if function returns an error, the entire batch is reprocessed until the function succeeds, or the items in the batch expire</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165758.png"></p><ul><li>Queue &amp; Lambda (SQS &amp; FIFO)<ul><li>Event Source Mapping will poll SQS (Long Polling)</li><li>If use FIFO queues, Lambda will scale up to the number of active message groups</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165931.png"></p><hr><h4 id="Lambda-Event-and-Context-Objects"><a href="#Lambda-Event-and-Context-Objects" class="headerlink" title="Lambda Event and Context Objects"></a>Lambda Event and Context Objects</h4><ul><li>ç®€å•æ¥è¯´å°±æ˜¯ lambda_hander é‡Œé¢çš„å‚æ•° event å’Œ context</li><li><code>event</code>: JSON document contains data for the function to process</li><li><code>context</code>: Provides information about the invocation, function, runtime environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170535.png"></p><hr><h4 id="Lambda-Destinations"><a href="#Lambda-Destinations" class="headerlink" title="Lambda Destinations"></a>Lambda Destinations</h4><ul><li>Can configure to send result to a destination (é‡è¦)<ul><li>Asynchronous invocations: Define destinations for successful and failed event</li><li>Event Source Mapping: For discarded event batches</li></ul></li><li>æ³¨æ„, Lambda Destionation å¯ä»¥æ˜¯ DLQ, è¿™æ ·å¯ä»¥ç›´æ¥ç”¨ SQS (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170912.png"></p><hr><h4 id="Lambda-Permissions"><a href="#Lambda-Permissions" class="headerlink" title="Lambda Permissions"></a>Lambda Permissions</h4><ul><li>Lambda Execution Role (é‡è¦, å¤§éƒ¨åˆ† Lambda çš„é—®é¢˜éƒ½å’Œ Execution Role æœ‰å…³)<ul><li>Grant Lambda function permissions to AWS services (IAM Role)</li><li>Best practice: Create one Lambda Execution Role per function</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171158.png"></p><ul><li>Lambda Resource Based Policies<ul><li>Use resource-based policies to give other accounts and AWS services permission to use your Lambda resources (æ„Ÿè§‰ Resource Base Policy éƒ½æ˜¯ç»™è·¨è´¦å·æƒé™çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171329.png"></p><hr><h4 id="Lambda-Environment-Variables"><a href="#Lambda-Environment-Variables" class="headerlink" title="Lambda Environment Variables"></a>Lambda Environment Variables</h4><ul><li>å­˜ secrets å’Œ api keys çš„</li><li>å¯ä»¥ç”¨æ¥ inject dynamic variables into Lambda function (é‡è¦)</li><li>æ³¨æ„, åƒ token è¿™ç§å°±ä¸èƒ½æ”¾åœ¨ Environment Variable, è¦åœ¨ deployment package <code>.zip</code> é‡Œ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173203.png"></p><hr><h4 id="Lambda-Logging-amp-Monitoring"><a href="#Lambda-Logging-amp-Monitoring" class="headerlink" title="Lambda Logging &amp; Monitoring"></a>Lambda Logging &amp; Monitoring</h4><ul><li>Lambda execution logs are stored in AWS CloudWatch Logs</li><li>Lambda metrices are displayed in AWS CloudWatch Metrices</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173409.png"></p><ul><li>Lambda Tracing with X-Ray<ul><li>Enable in Lambda configuration (Active Tracing)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173520.png"></p><hr><h4 id="CloudFront-Functions-amp-Lambda-Edge"><a href="#CloudFront-Functions-amp-Lambda-Edge" class="headerlink" title="CloudFront Functions &amp; Lambda@Edge"></a>CloudFront Functions &amp; Lambda@Edge</h4><ul><li>Execute logic at the edge (Edge Function, serverless)</li><li>ä¸¤ç§æ–¹æ³•: CloudFront Functions, Lambda@Edge (å®ƒä»¬æ”¯æŒçš„è¯­è¨€ä¸åŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173715.png"></p><ul><li>CloudFront Functions<ul><li>For high-scale, latency-sensitive CDN customizations (millions çº§åˆ«çš„)</li><li>Used to change Viewer requestes and responses, short execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173900.png"></p><ul><li>Lambda@Edge<ul><li>Scales to 1000s of requests&#x2F;second (thousands çº§åˆ«çš„)</li><li>Used to change Viewer requestes and responses, longer execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214545.png"></p><hr><h4 id="Lambda-in-VPC"><a href="#Lambda-in-VPC" class="headerlink" title="Lambda in VPC"></a>Lambda in VPC</h4><ul><li>æ­£å¸¸æƒ…å†µä¸‹, Lambda æ— æ³•è®¿é—® VPC (æ‰€ä»¥è¦ Lambda in VPC)</li><li>éœ€è¦ VPC ID, Subnet å’Œ Security Groups, Lambda will create an ENI</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174359.png"></p><ul><li>Lambda in VPC - Internet Access (2 ç§æ–¹æ³•)<ul><li>Lambda function in your VPC does not have internet access</li><li>Deploying a Lambda function in public subnet does not give internet access</li></ul></li><li>Need to deploy Lambda function in private subnet and give a NAT Gateway &#x2F; Instance</li><li>Also can use VPC endpoints to privately access AWS services without NAT</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174704.png"></p><hr><h4 id="Lambda-Function-Performance"><a href="#Lambda-Function-Performance" class="headerlink" title="Lambda Function Performance"></a>Lambda Function Performance</h4><ul><li>Lambda Function Configuration<ul><li>RAM: If application is CPU-bound (computation heavy), increase RAM</li><li>Timeout: Default 3 seconds, maximum is 900 seconds (15 minutes)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174946.png"></p><ul><li>Lambda Execution Context<ul><li>The execution context is a temporary runtime environment that initializes any external dependencies of your lambda code</li><li>The execution context includes the <code>/tmp</code> directory (é‡è¦)</li><li><code>/tmp</code> directory çš„æœ€å¤§å®¹é‡æ˜¯ <code>10240</code> MB, default æ˜¯ <code>512</code> MB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175158.png"></p><ul><li>Initialize outside the handler (é‡è¦)<ul><li>é˜²æ­¢ DB connection è¢«å¤šæ¬¡å»ºç«‹</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175513.png"></p><hr><h4 id="Lambda-Layers"><a href="#Lambda-Layers" class="headerlink" title="Lambda Layers"></a>Lambda Layers</h4><ul><li>Create Custom Runtime &amp; Externalize Dependencies to re-use them</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192245.png"></p><hr><h4 id="Lambda-File-Systems-Mounting"><a href="#Lambda-File-Systems-Mounting" class="headerlink" title="Lambda File Systems Mounting"></a>Lambda File Systems Mounting</h4><ul><li>Lambda functions can access EFS file systems if they are running in a VPC<ul><li>Leaverage EFS Access Points</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192513.png"></p><hr><h4 id="Lambda-Concurrency"><a href="#Lambda-Concurrency" class="headerlink" title="Lambda Concurrency"></a>Lambda Concurrency</h4><ul><li>Can set a <code>reserved concurrency</code> to limit the number of concurrent execution</li><li>Each invocation over the concurrency limit will trigger a <code>Throttle</code><ul><li>If need a higher limit, open a support ticket</li></ul></li><li>å¯¹äºå¤„ç† Asynchronous çš„æƒ…å†µ, Lambda ä¼šæŠŠ event è¿”å›åˆ° queue é‡Œ</li><li>å¯ä»¥ configure Auto Scaling to manage Lambda provisioned concurrency on a schedule<ul><li>æ¯”å¦‚è¦åº”å¯¹åœ£è¯èŠ‚è¿™ç§æƒ…å†µ</li></ul></li><li>å¦‚æœæ˜¯è¦è§£å†³ Lambda exceed concurrency limits, é€‰æ‹© reserved concurrency</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193032.png"></p><ul><li>Cold Starts &amp; Provisioned Concurrency<ul><li>Cold Start: First request served by new instances has higher latency than rest</li><li>Provisioned Concurrency: Allocate concurrency before the function is invoked</li><li>Provisioned Concurrency è§£å†³äº† Cold Start çš„é—®é¢˜ (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224130.png"></p><hr><h4 id="Lambda-External-Dependencies"><a href="#Lambda-External-Dependencies" class="headerlink" title="Lambda External Dependencies"></a>Lambda External Dependencies</h4><ul><li>If Lambda function depends on external libraries<ul><li>You need to install the packages alongside your code and zip together</li></ul></li><li>æ³¨æ„, è¿™é‡Œæ˜¯æŠŠ functions å’Œ dependencies zip åœ¨ä¸€èµ·, è€Œä¸æ˜¯åˆ†å¼€ zip (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224459.png"></p><hr><h4 id="Lambda-Container-Image"><a href="#Lambda-Container-Image" class="headerlink" title="Lambda Container Image"></a>Lambda Container Image</h4><ul><li>Deploy Lambda function as container images (ä¹Ÿå°±æ˜¯è¯´ Lambda å’Œ Docker æ˜¯å¯ä»¥ä¸€èµ·ç”¨çš„)</li><li>Pack complex dependencies, large dependencies in a container</li><li>To deploy a container image to Lambda, the container image must implement Lambda Runtime API</li><li>AWS Lambda service does not support Lambda functions that use multi-architecture container image</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000324.png"></p><hr><h4 id="Lambda-Versions-and-Aliases"><a href="#Lambda-Versions-and-Aliases" class="headerlink" title="Lambda Versions and Aliases"></a>Lambda Versions and Aliases</h4><ul><li>Lambda Versions (é‡è¦)<ul><li>When work on a Lambda function, work on $LATEST</li><li>When publish a Lambda function, create a version</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000644.png"></p><ul><li>Lambda Aliases (é‡è¦)<ul><li>Aliases are <code>pointers</code> to Lambda function versions</li><li>Aliases enable Canary deployment by assigning weights to Lambda functions</li><li>Aliases cannot reference aliases</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000912.png"></p><hr><h4 id="Lambda-with-CodeDeploy"><a href="#Lambda-with-CodeDeploy" class="headerlink" title="Lambda with CodeDeploy"></a>Lambda with CodeDeploy</h4><ul><li>CodeDeploy can help automate traffic shift for Lambda aliases<ul><li>Linear: Grow traffic every <code>N minutes</code> until <code>100%</code></li><li>Canary: Try <code>X</code> percent then <code>100%</code></li><li>AllAtOnce: Immediate</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001338.png"></p><hr><h4 id="Lambda-Function-URL"><a href="#Lambda-Function-URL" class="headerlink" title="Lambda Function URL"></a>Lambda Function URL</h4><ul><li>Dedicated HTTPS endpoint for Lambda function (ä¸ç”¨ API Gateway çš„åšæ³•)<ul><li>å½¢å¼ <code>https://&lt;url-id&gt;.lambda-url.&lt;region&gt;.on.aws</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001532.png"></p><hr><h4 id="Lambda-with-CodeGuru"><a href="#Lambda-with-CodeGuru" class="headerlink" title="Lambda with CodeGuru"></a>Lambda with CodeGuru</h4><ul><li>Gain insights into runtime performance of your Lambda function</li><li>CodeGuru creates a Profiler Group for your Lambda function</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001843.png"></p><hr><h3 id="20-DynamoDB"><a href="#20-DynamoDB" class="headerlink" title="20. DynamoDB"></a>20. DynamoDB</h3><h4 id="AWS-DynamoDB"><a href="#AWS-DynamoDB" class="headerlink" title="AWS DynamoDB"></a>AWS DynamoDB</h4><ul><li>NoSQL database, with replication across multiple AZs, auto scaling, no provision</li><li>ä¸¤ç§ Class: Standard &amp; Infrequent Access (IA)</li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† Email çš„, å°±æ˜¯ DynamoDB Stream</li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† unpredictable æ•°æ®çš„æ—¶å€™, é€‰æ‹© On-Demand table</li><li>By default, DynamoDB tables are encrypted with AWS owned key (é‡è¦)</li><li>DynamoDB æ²¡åŠæ³•ç”¨ resource policy, æ‰€ä»¥å¿…é¡»è¦ç”¨ IAM role + AssumeRole (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012414.png"></p><ul><li>Each table has a Primary Key, must be decided at creation time (2 ç§é€‰æ‹©)<ul><li>Partition Key (HASH): Partition Key must be unique for each item</li><li>Partition Key + Sort Key (HASH + RANGE): The combination must be unique</li></ul></li><li>Item çš„æœ€å¤§å¤§å°æ˜¯ 400 KB</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012627.png"></p><ul><li>DynamoDB æœ‰ 2 ç§ backup æ–¹æ³•, On-demand å’Œ Point-in-time recovery, ä½†å®ƒä»¬åªèƒ½æŠŠæ•°æ®å†™åˆ° S3 é‡Œ, æ²¡åŠæ³•ä» backup é‡Œé¢å» access S3 buckets</li><li>ä¸è¦ç”¨ DynamoDB å»ä¿å­˜å›¾ç‰‡, å› ä¸º DynamoDB æœ€å¤§ item å¤§å°æ˜¯ 400 KB</li><li>å¦‚æœè¦ç»™ DynamoDB ready-only access, ç”¨ IAM Role <code>AmazonDynamoDBReadOnlyAccess</code></li><li>å¦‚æœè¦ reduce DynamoDB latency, å¯ä»¥ç”¨ä¸‹é¢ 2 ç‚¹<ul><li>Consider using Global tables if your application is accessed by globally distributed users</li><li>Use eventually consistent reads in place of strongly consistent reads whenever possible</li></ul></li></ul><hr><h4 id="DynamoDB-WCU-amp-RCU"><a href="#DynamoDB-WCU-amp-RCU" class="headerlink" title="DynamoDB WCU &amp; RCU"></a>DynamoDB WCU &amp; RCU</h4><ul><li>Read &#x2F; Write Capacity Mode (2 ç§ Mode)<ul><li>Provisioned Mode: è‡ªå·±å®šä¹‰éœ€è¦å¤šå°‘ RCU å’Œ WCU (é»˜è®¤)</li><li>On-Demand Mode: è‡ªåŠ¨ scale éœ€è¦çš„ RCU å’Œ WCU (è´µ)</li></ul></li><li>RCU å’Œ WCU æ²¡æœ‰å…³è”å—, å¯ä»¥åªåŠ  RCU ä¸åŠ  WCU</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014420.png"></p><ul><li>R&#x2F;W Capacity Modes - Provisioned<ul><li>Read Capacity Units (RCU): throughput for reads</li><li>Write Capacity Units (WCU): throughput for writes</li><li>Throughput can be exceeded temporarily using <code>Burst Capacity</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014716.png"></p><ul><li>Write Capacity Units (WCU)<ul><li>One Write Capacity Unit represents <code>one write per second</code> for an item up to <code>1KB</code></li><li>éå¸¸é‡è¦, è®°ä½ WCU æ˜¯ 1 æ¯” 1 çš„, size éœ€è¦ round up åˆ°æ•´æ•°</li><li>ä¾‹å­: 6 items with item size 4.5KB: <code>6 * 5 / 1 = 30 WCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014951.png"></p><ul><li>Strongly Consistent Read vs. Eventually Consistent Read (é‡è¦)<ul><li>Eventually Consistent Read: might get stale data because of duplication (é»˜è®¤)</li><li>Strongly Consistent Read: will always get the correct data (è´µ)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015146.png"></p><ul><li>Read Capacity Units (RCU)<ul><li>One Read Capacity Unit represents one Strongly Consistent Read per second, or two Eventually Consistent Read per second, for an item up to 4 KB in size (é‡è¦)</li><li>éå¸¸é‡è¦, å¯¹äº Strongly Consistent Read æ¥è¯´æ˜¯ 1 æ¯” 4 çš„, size è¦ round up åˆ° 4 çš„å€æ•°</li><li>éå¸¸é‡è¦, å¯¹äº Eventually Consistent Read æ¥è¯´æ˜¯ 2 æ¯” 4 çš„, size è¦ round up åˆ° 4 çš„å€æ•°</li><li>ä¾‹å­: 10 Strongly Consistent Reads with item size 4 KB: <code>10 * 4 / 4 = 10 RCU</code></li><li>ä¾‹å­: 16 Eventually Consistent Reads with item size 12 KB: <code>16 /2 * 12 / 4 = 24 RCU</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015532.png"></p><ul><li>DynamoDB - Partitions Internal<ul><li>Data is stored in partitions, use Partition Key to know which partition should go</li><li>WCUs and RCUs are spread evenly across partitions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015726.png"></p><ul><li>DynamoDB - Throttling (é‡è¦)<ul><li>Exceeded provisioned RCUs or WCUs, get <code>ProvisionedThroughputExceededException</code></li><li>åŸå› : Hot Keys, Hot Paritions, Very large items (é‡è¦)</li><li>è§£å†³æ–¹æ¡ˆ: Exponential backoff, Distribute partition keys, use DynamoDB DAX (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015936.png"></p><ul><li>R&#x2F;W Capacity Modes - On-Demand<ul><li>Read &#x2F; writes automatically scale up &#x2F; down with workloads</li><li>Read Request Units (RRU): throughput for reads (same as RCU)</li><li>Write Request Units (WRU): throughput for writes (same as WCU)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020318.png"></p><hr><h4 id="DynamoDB-Basic-Operations"><a href="#DynamoDB-Basic-Operations" class="headerlink" title="DynamoDB Basic Operations"></a>DynamoDB Basic Operations</h4><ul><li>æ³¨æ„, DynamoDB <code>UpdateItem</code> æ˜¯æ›´æ–° attribute æˆ–è€…æ–°åˆ›å»ºä¸€ä¸ª (å¦‚æœä¸å­˜åœ¨)</li><li>Writing Data<ul><li><code>PutItem</code>: Create a new item or fully replace an old item</li><li><code>UpdateItem</code>: Edit an existing itemâ€™s attributes or add new items if not exist (æ³¨æ„)</li><li><code>Conditional Writes:</code> Accept a <code>write/update/delete</code> only if condition met</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020700.png"></p><ul><li>Reading Data<ul><li><code>GetItem</code>: Read based on Primary key</li><li><code>Query</code>: Return items based on <code>KeyConditionExpression</code>, <code>FilterExpression</code></li><li><code>Scan</code>: Scan the entire table and then filter out data (å¯ä»¥ parallel, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020844.png"></p><ul><li>Deleting Data<ul><li><code>DeleteItem</code>: Delete an individual item</li><li><code>DeleteTable</code>: Delete the whole table and all its items</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021027.png"></p><ul><li>DynamoDB Batch Operations<ul><li>Allow yout to save in latency by reducing the number of API cals</li><li><code>BatchWriteItem</code> å’Œ <code>BatchGetItem</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021208.png"></p><ul><li>Table Cleanup (2 ç§æ–¹æ³•)<ul><li><code>Scan + DeleteItem</code> æˆ–è€… <code>Drop Table + Recreate Table</code></li></ul></li><li>Copying a DynamoDB Table (3 ç§æ–¹æ³•)<ul><li>AWS Data Pipeline æˆ–è€… Backup + Restore æˆ–è€… <code>Scan + PutItem or BatchWriteItem</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033405.png"></p><hr><h4 id="DynamoDB-Conditional-Writes"><a href="#DynamoDB-Conditional-Writes" class="headerlink" title="DynamoDB Conditional Writes"></a>DynamoDB Conditional Writes</h4><ul><li>For <code>PutItem, UpdateItem, DeleteItem, BatchWriteItem</code></li><li>Specify a conditional expression to determine which item should be modified</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022327.png"></p><hr><h4 id="DynamoDB-Indexes"><a href="#DynamoDB-Indexes" class="headerlink" title="DynamoDB Indexes"></a>DynamoDB Indexes</h4><ul><li>Local Secondary Index (LSI, é‡è¦)<ul><li>Alternative Sort Key for your table (æ³¨æ„è¿™é‡Œæ˜¯ Partition Key)</li><li>Must be defined at table creation time (é‡è¦)</li><li>Attribute Projections: Contain some or all attributes of the base table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025528.png"></p><ul><li>Global Secondary Index (GSI, é‡è¦)<ul><li>Alternative Primary Key from the base table (æ³¨æ„è¿™é‡Œæ˜¯ Primary Key)</li><li>Must provision RCUs &amp; WCUs for the index</li><li>Can be added or modified after table creation</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025824.png"></p><ul><li>Indexes and Throttling<ul><li>GSI: If writes are throttled on the GSI, then the main table will be throttled</li><li>LSI: Use WCUs and RCUs of the main table, no throttling consideration</li><li>é‡è¦, æ˜¯ GSI ä¼šé€ æˆ throttling, LSI ä¸ç”¨è€ƒè™‘ throttling</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025950.png"></p><hr><h4 id="DynamoDB-PartiQL"><a href="#DynamoDB-PartiQL" class="headerlink" title="DynamoDB PartiQL"></a>DynamoDB PartiQL</h4><ul><li>Use a SQL-like syntax to manipulate DynamoDB tables (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030113.png"></p><hr><h4 id="DynamoDB-Optimistic-Locking"><a href="#DynamoDB-Optimistic-Locking" class="headerlink" title="DynamoDB Optimistic Locking"></a>DynamoDB Optimistic Locking</h4><ul><li>A strategy to ensure an item hasnâ€™t changed before update or delete it (é‡è¦)</li><li>DynamoDB Optimistic Locking æ˜¯ Concurrency Model, è€Œä¸”å®ƒç”¨ Conditional Writes (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030304.png"></p><hr><h4 id="DynamoDB-DAX"><a href="#DynamoDB-DAX" class="headerlink" title="DynamoDB DAX"></a>DynamoDB DAX</h4><ul><li>DynamoDB Accelerator (DAX, å¯ä»¥å¤„ç† cache, ä½†æ˜¯ DAX ä¸æ˜¯ relational çš„)<ul><li>Help solve read congestion by caching (microseconds latency, ç¼“å­˜)</li><li>DAX ä¸æ”¯æŒ SQL query caching</li><li>å¯ä»¥æé«˜ DynamoDB çš„ performance (æé«˜çš„æ˜¯ read è€Œä¸æ˜¯ write, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233440.png"></p><hr><h4 id="DynamoDB-Stream"><a href="#DynamoDB-Stream" class="headerlink" title="DynamoDB Stream"></a>DynamoDB Stream</h4><ul><li>DynamoDB Stream: ç›®æ ‡æ˜¯ Lambda å’Œ Kinesis Data Streams, æ²¡æœ‰ SQS (æ³¨æ„)<ul><li>Ordered stream of item-level modifications in table (é‡è¦)</li><li>ç”¨æ¥å¤„ç† Stream çš„, å¯ä»¥ Invoke Lambda function (æ¯”å¦‚å‘é‚®ä»¶)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030626.png"></p><ul><li>DynamoDB Streams are made of shards, like Kinesis Data Streams</li><li>Records are not retroactively populated in a stream after enabling it</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030940.png"></p><hr><h4 id="DynamoDB-TTL"><a href="#DynamoDB-TTL" class="headerlink" title="DynamoDB TTL"></a>DynamoDB TTL</h4><ul><li>Automatic delete items after an expiry timestamp (å®šæ—¶åˆ é™¤ DynamoDB é‡Œçš„ item)</li><li>Expired items deleted within 48 hours of expiration</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031135.png"></p><hr><h4 id="DynamoDB-CLI"><a href="#DynamoDB-CLI" class="headerlink" title="DynamoDB CLI"></a>DynamoDB CLI</h4><ul><li><code>projection-expression</code>: Select a subset of attribute to retrieve (subset of attribute)</li><li><code>filter-expression</code>: Filter items to retrieve a subset of the items (subset of items)</li><li>Minimize the items returned in CLI: <code>max-items &amp; starting-token</code></li><li>æ³¨æ„, å¦‚æœé—®åˆ°å’Œ attribute æœ‰å…³çš„å°±æ˜¯ <code>projection-expression</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031324.png"></p><hr><h4 id="DynamoDB-Transcations"><a href="#DynamoDB-Transcations" class="headerlink" title="DynamoDB Transcations"></a>DynamoDB Transcations</h4><ul><li>Coordinated operations to multiple items across one or more tables (é‡‘è, æ¸¸æˆ)</li><li>Provides Atomcity, Consistency, Isolation, and Durability (ACID)</li><li>Consume 2 times of WCUs &amp; RCUs (æ³¨æ„, DynamoDB Transcation æ¶ˆè€— 2 å€ WCU å’Œ RCU)</li><li>Two operations: <code>TransactGetItems</code> å’Œ <code>TransactWriteItems</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031646.png"></p><ul><li>DynamoDB Transactions Capacity Computation<ul><li>3 Transcational writes with item size 5 KB: need 3 _ 5 &#x2F; 1 _ 2 &#x3D; 30 WCUs</li><li>5 Transcation reads with items size 5 KB: need 5 _ 8 &#x2F; 4 _ 2 &#x3D; 20 RCUs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032052.png"></p><hr><h4 id="DynamoDB-Session-State"><a href="#DynamoDB-Session-State" class="headerlink" title="DynamoDB Session State"></a>DynamoDB Session State</h4><ul><li>To use DynamoDB to store the session state</li><li>ElastiCache is in-memory, DynamoDB is serverless (both are key&#x2F;value pair)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032422.png"></p><hr><h4 id="DynamoDB-Write-Sharding"><a href="#DynamoDB-Write-Sharding" class="headerlink" title="DynamoDB Write Sharding"></a>DynamoDB Write Sharding</h4><ul><li>A strategy that allow better distribution of items evenly across partitions<ul><li>To solve the issue of <code>Hot Partition</code></li></ul></li><li>Add a suffix to Partition Key value</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032640.png"></p><hr><h4 id="DynamoDB-Other-Features"><a href="#DynamoDB-Other-Features" class="headerlink" title="DynamoDB Other Features"></a>DynamoDB Other Features</h4><ul><li>Backup and Restore: Point-in-time recovery (PITR) like RDS</li><li>Global Tables: Multi-region, fully replicated, high performance</li><li>DynamoDB Local: Develop and test app locally with out accessing internet</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033717.png"></p><ul><li>DynamoDB Fine-Grained Access Control<ul><li>Assign IAM Role to users with a Condition to limit their API access DynamoDB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img033855.png"></p><hr><h3 id="21-API-Gateway"><a href="#21-API-Gateway" class="headerlink" title="21. API Gateway"></a>21. API Gateway</h3><h4 id="AWS-API-Gateway"><a href="#AWS-API-Gateway" class="headerlink" title="AWS API Gateway"></a>AWS API Gateway</h4><ul><li>Invoke Lambda function, expose REST API (stateless client-server communication)</li><li>Lambda + API Gateway &#x3D; No infrastructure to manage</li><li>API Gateway å¯ä»¥é˜²æ­¢ API overwhelmed by too many requests (é˜²æŠ–)</li><li>API Gateway Caching (å¯ä»¥ improve latency, é‡è¦)<ul><li>With caching, you can reduce the number of calls made to your endpoint and also improve the latency of requests to your API</li></ul></li><li>æ³¨æ„, API Gateway ä¸ support STS, å¯ä»¥ç”¨ Congito User Pool, IAM permissions with sigv4 å’Œ Lambda Authorizer</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164125.png"></p><ul><li>API Gateway Endpoint Types<ul><li>Edge-Optimized (é»˜è®¤): For global clients, API Gateway live in one region</li><li>Regional: For client in same region</li><li>Private: Can only be accessed from VPC using ENI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164338.png"></p><ul><li>API Gateway å¯ä»¥ç”¨ Cognito User Pools, AWS IAM roles and policies å’Œ Lambda Authorizer æ¥è¿›è¡Œ authenticate</li></ul><hr><h4 id="API-Gateway-Stages"><a href="#API-Gateway-Stages" class="headerlink" title="API Gateway Stages"></a>API Gateway Stages</h4><ul><li>Making changes in the API Gateway does not mean theyâ€™re effective (é‡è¦)<ul><li>You need to make a â€œdeploymentâ€ for them to be in effect</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173311.png"></p><ul><li>API Gateway - Stage Variables<ul><li>Stage variables are like environment variables for API Gateway</li><li>Use case: Create a stage variable to indicate the Lambda alias (é‡è¦)</li><li>å¦‚æœè¦æŠŠ test promote æˆ prod, è€Œä¸”å½“å‰ prod å­˜åœ¨, ç›´æ¥ update stage variable å°±è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190149.png"></p><hr><h4 id="API-Gateway-Canary-Deployment"><a href="#API-Gateway-Canary-Deployment" class="headerlink" title="API Gateway Canary Deployment"></a>API Gateway Canary Deployment</h4><ul><li>Choose the <code>%</code> of traffic the canary channel receives<ul><li>Canary deployment: é€æ­¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå…ˆå°è§„æ¨¡æµ‹è¯•ï¼Œå†å…¨é¢æ¨å¹¿çš„ç­–ç•¥</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190857.png"></p><hr><h4 id="API-Gateway-Integration-Tyeps"><a href="#API-Gateway-Integration-Tyeps" class="headerlink" title="API Gateway Integration Tyeps"></a>API Gateway Integration Tyeps</h4><ul><li><code>MOCK</code><ul><li>API Gateway returns a response without sending the request to backend</li></ul></li><li><code>HTTP / AWS</code><ul><li>Configure both the integration request and integration response</li><li>Set up data mapping using mapping templates for request &amp; response</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191239.png"></p><ul><li><code>AWS_PROXY</code> (Lambda Proxy)<ul><li>Incoming request from the client is the input to Lambda</li><li>No mapping template, headers, query string parameters are passed as arguments</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191413.png"></p><ul><li><code>HTTP_PROXY</code><ul><li>No mapping template, the HTTP request is passed to the backend</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191520.png"></p><hr><h4 id="API-Gateway-Mapping-Templates"><a href="#API-Gateway-Mapping-Templates" class="headerlink" title="API Gateway Mapping Templates"></a>API Gateway Mapping Templates</h4><ul><li>Mapping templates can be used to modify request &#x2F; responses<ul><li>å¯ä»¥ç”¨æ¥å±è”½ output data ä¸­çš„æŸäº›å­—æ®µ</li></ul></li><li>Modify query string parameters, modify body content, add headers</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191718.png"></p><hr><h4 id="API-Gateway-OpenAPI"><a href="#API-Gateway-OpenAPI" class="headerlink" title="API Gateway OpenAPI"></a>API Gateway OpenAPI</h4><ul><li>Common way to define REST APIs, using API defintion as code</li><li>Request Validation: reduce unnecessary calls to the backend</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201259.png"></p><hr><h4 id="API-Gateway-Caching"><a href="#API-Gateway-Caching" class="headerlink" title="API Gateway Caching"></a>API Gateway Caching</h4><ul><li>Caching reduces the number of calls made to the backend</li><li>Caches are defined per <code>stage</code>, default TTL is <code>300</code> sec, max TTL is <code>3600</code> sec (é‡è¦)</li><li>Client can invalidate the cache with header: <code>Cache-Control:max-age=0</code> (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201709.png"></p><hr><h4 id="API-Gateway-Usage-Plans-amp-API-Keys"><a href="#API-Gateway-Usage-Plans-amp-API-Keys" class="headerlink" title="API Gateway Usage Plans &amp; API Keys"></a>API Gateway Usage Plans &amp; API Keys</h4><ul><li>Make an API availiable as an offering to your customers (é‡è¦)</li><li>Usage Plan: who can access, how much and how fast can access, use API keys to identify</li><li>API Keys: use with usage plans to control access</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202109.png"></p><ul><li>To configure a usage plan<ul><li>Create one or more APIs, configure methods to require API key, deploy API to stage</li><li>Generate or import API keys to distribute to application developer</li><li>Create the usage plan with desired throttle and quota limits</li><li>Associate API stages and API keys with the usage plan</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202324.png"></p><hr><h4 id="API-Gateway-Monitoring"><a href="#API-Gateway-Monitoring" class="headerlink" title="API Gateway Monitoring"></a>API Gateway Monitoring</h4><ul><li><code>CacheHitCount &amp; CacheMissCount</code>: efficiency of the cache</li><li><code>IntegrationLatency &amp; Latency</code>: ç”¨æ¥æµ‹ timeout issue</li><li><code>4XX</code> means Client errors, <code>5XX </code>means Server errors, <code>429</code> æ˜¯ too many requests</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202658.png"></p><hr><h4 id="API-Gateway-CORS"><a href="#API-Gateway-CORS" class="headerlink" title="API Gateway CORS"></a>API Gateway CORS</h4><ul><li>CORS must be enabled when you receive API calls from another domain</li><li>CORS ä¹Ÿå¯ä»¥ç”¨æ¥é™åˆ¶ä¸€äº› domain æ¥é˜²æ­¢å®ƒä»¬ access API</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202855.png"></p><hr><h4 id="API-Gateway-Security"><a href="#API-Gateway-Security" class="headerlink" title="API Gateway Security"></a>API Gateway Security</h4><ul><li>IAM Permissions (for within your AWS account)<ul><li>Authentication is IAM, Authorization is IAM Policy</li><li>Create an IAM policy authorization and attch to User or Role</li><li>If need Cross Account Access, use Resource Policies</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203055.png"></p><ul><li>Cognito User Pools (for your own user pool, é‡è¦)<ul><li>Authentication is Cognito User Pools, Authorization is API Gateway Methods</li><li>API Gateway verifies identity automatically from AWS Cognito</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203446.png"></p><ul><li>Lambda Authorizer (use 3rd party tokens, é‡è¦)<ul><li>Authentication is External, Authorization is Lambda function</li><li>Token-based authorizer, JWT or Oauth</li><li>Lambda Authorizer ä¹Ÿå¯ä»¥ç”¨æ¥ implement authorization scheme that uses request parameters to determine the callerâ€™s identity (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203612.png"></p><hr><h4 id="API-Gateway-WebSocket-API"><a href="#API-Gateway-WebSocket-API" class="headerlink" title="API Gateway WebSocket API"></a>API Gateway WebSocket API</h4><ul><li>WebSocket APIs are often used in real time applications such as chat or trading<ul><li>WebSocket is two ways commmunication</li></ul></li><li>å½¢å¼ <code>wss://[uniqueid].execute-api.[region].amazonaws.com/[stage-name]</code></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204056.png"></p><ul><li>WebSocket API - Routing<ul><li>Request a route selection expression to select the field on JSON to route from</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204735.png"></p><hr><h3 id="22-AWS-CICD"><a href="#22-AWS-CICD" class="headerlink" title="22. AWS CICD"></a>22. AWS CICD</h3><h4 id="AWS-CodeCommit"><a href="#AWS-CodeCommit" class="headerlink" title="AWS CodeCommit"></a>AWS CodeCommit</h4><ul><li>A version control tool that helps to understand the changes happened to the code</li><li>CodeCommit is a Private Git repository (å°±æ˜¯ä¸ª Github, ä½†æ˜¯ç§äººçš„)</li><li>å¦‚æœé—®åˆ° migrate repository åˆ° CodeCommit ä½¿ç”¨ HTTPS, é‚£ä¹ˆç”¨åˆ°çš„æ˜¯ Git credentials generated from IAM (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213239.png"></p><ul><li>CodeCommit å¯ä»¥ä½¿ç”¨ Git credentials, SSH Keys, AWS Access Keys</li><li>Data in AWS CodeCommit repositories is encrypted in transit and at rest</li></ul><hr><h4 id="AWS-CodePipeline"><a href="#AWS-CodePipeline" class="headerlink" title="AWS CodePipeline"></a>AWS CodePipeline</h4><ul><li>CodePipeline æ˜¯ä¸€ç§è‡ªåŠ¨åŒ– CICD æœåŠ¡, ç”¨äºæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºå’ŒåŸºç¡€è®¾æ–½<ul><li>å¦‚æœçœ‹åˆ° orchestrate CICD, å°±æ˜¯ CodePipeline</li></ul></li><li>å¯ä»¥ create one CodePipline for entire flow and add a manual approval step</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215659.png"></p><ul><li>Each pipeline stage can create artifacts</li><li>Artifaces stored in an S3 bucket and passed on to the next stage</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215817.png"></p><hr><h4 id="AWS-CodeBuild"><a href="#AWS-CodeBuild" class="headerlink" title="AWS CodeBuild"></a>AWS CodeBuild</h4><ul><li>CodeBuild æ˜¯ä¸€ç§å®Œå…¨æ‰˜ç®¡çš„æŒç»­é›†æˆæœåŠ¡, ç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œç”Ÿæˆè½¯ä»¶åŒ…</li><li>CodeBuild ç®—æ˜¯ Jenkins çš„æ›¿ä»£å“</li><li>Build instructions: Code file <code>buildspec.yml</code> (é‡è¦) or insert manually in Console</li><li>Automated tests on application before the deployment process (é‡åˆ°éœ€è¦ test çš„å°±æ˜¯ CodeBuild, é‡è¦)</li><li>CodeBuild scales automatically, æ‰€ä»¥é‡åˆ°ä»€ä¹ˆ scaling å’Œ run build parallel éƒ½ä¸ç”¨æ‹…å¿ƒ</li><li>å¦‚æœéœ€è¦ troubleshoot CodeBuild, å¯ä»¥ run CodeBuild locally using CodeBuild Agent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220508.png"></p><ul><li><code>buildspec.yml</code> file must be at the root of your code (é‡è¦)</li><li>è®°ä½, CodeBuild å¯ä»¥ç”¨ KMS key æ¥åŠ å¯† build artifacts (é‡è¦)</li><li>å¯ä»¥ä½¿ç”¨ CodeBuild timeouts å»é˜²æ­¢è¿‡é•¿çš„ building process</li><li>We bundle dependencies in the source code during the build stage of CodeBuild</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220651.png"></p><hr><h4 id="AWS-CodeDeploy"><a href="#AWS-CodeDeploy" class="headerlink" title="AWS CodeDeploy"></a>AWS CodeDeploy</h4><ul><li>CodeDeploy æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–éƒ¨ç½²æœåŠ¡, ç”¨äºåœ¨å„ç§è®¡ç®—ç¯å¢ƒä¸­éƒ¨ç½²åº”ç”¨ç¨‹åºä»£ç </li><li>Automated rollback in case failed deployment (å¯ä»¥è‡ªåŠ¨ roll back å¦‚æœéƒ¨ç½²å¤±è´¥)<ul><li>If a rollback happens, CodeDeploy redeploys the last good revision</li></ul></li><li>A file named <code>appspec.yml</code> defines how the deployment happens</li><li>å¦‚æœé—®åˆ° CodeDeploy å’Œ EC2, é‚£ä¹ˆå°±åªæœ‰ <code>in-place</code> å’Œ <code>blue/green</code><ul><li><code>blue/green</code> å¯ä»¥ re-route traffic from original environment to new environment</li></ul></li><li>å¦‚æœé‡åˆ°è¦ archive number of applicaiton revision, ç”¨ CodeDeploy Agent</li><li>å¦‚æœ CodeDeploy å¤±è´¥å¹¶ä¸” rollback, A new deployment of the last known working version of the application is deployed with a new deployment ID</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220850.png"></p><ul><li>CodeDeploy - EC2 &#x2F; On-premises Platform (éœ€è¦ Agent)<ul><li>Perform <code>in-place</code> deployment or <code>blue/green</code> deployments (éå¸¸é‡è¦)</li><li>Must run the CodeDeploy Agent on the target instances (é‡è¦)</li><li>Order of Lifecycle Events: <code>ApplicationStop, DownloadBundle, BeforeInstall, Install, AfterInstall, ApplicationStart, ValidateService</code></li><li>å››ç§ deployment speed: <code>AllAtOnce, HalfAtATime, OneAtATime, Custom</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221100.png"></p><ul><li>CodeDeploy - Lambda Platform<ul><li>Automate traffic shift for Lambda aliases</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221326.png"></p><ul><li>CodeDeploy - ECS Platform<ul><li>Automate the deployment of a new ECS Task Definition</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221501.png"></p><ul><li>å¦‚æœè¦ deploy application to different EC2 Instance at different time, ç”¨<br>CodeDeploy Deployment Groups</li></ul><hr><h4 id="AWS-CodeStar-CodeCatalyst"><a href="#AWS-CodeStar-CodeCatalyst" class="headerlink" title="AWS CodeStar (CodeCatalyst)"></a>AWS CodeStar (CodeCatalyst)</h4><ul><li>Quickly create <code>CICD-ready</code> projects for EC2, Lambda, Elastic Beanstalk</li><li>One dashboard to view all your componenets (é‡è¦, å’Œ dashboard æœ‰å…³)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224413.png"></p><hr><h4 id="AWS-CodeArtifact"><a href="#AWS-CodeArtifact" class="headerlink" title="AWS CodeArtifact"></a>AWS CodeArtifact</h4><ul><li>CodeArtifact is a secure and cost-effective artifact management for software development (ç±»ä¼¼ npm)</li><li>Developers and CodeBuild can retrieve dependencies straight from CodeArtifact</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221957.png"></p><ul><li>CodeArtifact Resource Policy (Resource Policy å°±æ˜¯å…è®¸åˆ«äººè®¿é—®)<ul><li>Authorize another account to access CodeArtifact</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222141.png"></p><hr><h4 id="AWS-CodeGuru"><a href="#AWS-CodeGuru" class="headerlink" title="AWS CodeGuru"></a>AWS CodeGuru</h4><ul><li>An ML-powered service for code reviews and performance recommendations (é‡è¦)</li><li>CodeGuru Reviewer: Automated code reviews for static code analysis (development)</li><li>CodeGuru Profiler: Recommendations about application performance (production)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222415.png"></p><hr><h4 id="AWS-Cloud9"><a href="#AWS-Cloud9" class="headerlink" title="AWS Cloud9"></a>AWS Cloud9</h4><ul><li>Cloud-based IDE, ç±»ä¼¼ VSCode</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222601.png"></p><hr><h3 id="23-AWS-Serverless-Application-Model-SAM"><a href="#23-AWS-Serverless-Application-Model-SAM" class="headerlink" title="23. AWS Serverless Application Model (SAM)"></a>23. AWS Serverless Application Model (SAM)</h3><h4 id="AWS-SAM"><a href="#AWS-SAM" class="headerlink" title="AWS SAM"></a>AWS SAM</h4><ul><li>SAM &#x3D; Serverless Application Model</li><li>A framework for developing and deploying serverless applications</li><li>å¯ä»¥å°† AWS SAM æ¨¡æ¿ç›´æ¥éƒ¨ç½²åˆ° AWS CloudFormation</li><li>ä½¿ç”¨ AWS Serverless Application Repository (SAR) æ¥å…±äº« SAM å’Œå…¶ä»– AWS è´¦æˆ· (é‡è¦)<ul><li>å¦‚æœæƒ³æ‰¾ pre-built serverless applications å°±ç”¨ SAR</li></ul></li><li>Develop the SAM template locally &#x3D;&gt; upload the template to S3 &#x3D;&gt; deploy your application to the cloud (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153636.png"></p><ul><li>SAM Recipe<ul><li><code>Transform</code> Header for SAM template: <code>AWS::Serverless-2016-10-31</code></li><li>æ³¨æ„, <code>Transform</code> å¯¹äº SAM æ¥è¯´æ˜¯ mandatory çš„</li><li>SAM supports the following resource types: <code>Function, Api, SimpleTable</code> (é‡è¦)</li><li>Upload SAM åˆ° AWS ç”¨åˆ°çš„æ˜¯ <code>sam deploy</code></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155435.png"></p><ul><li>SAM Accelerate <code>sam sync</code><ul><li>A set of features to reduce latency while deploying resources to AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154010.png"></p><hr><h4 id="SAM-Policy-Templates"><a href="#SAM-Policy-Templates" class="headerlink" title="SAM Policy Templates"></a>SAM Policy Templates</h4><ul><li>List of templates to apply permissions to Lambda Functions<ul><li><code>S3ReadPolicy</code>: Give read only permission to objects in S3</li><li><code>SQSPollerPolicy</code>: Allow to poll an SQS queue</li><li><code>DynamoDBCrudPolicy</code>: create, read, update, delete</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154539.png"></p><hr><h4 id="SAM-Local-Capabilities"><a href="#SAM-Local-Capabilities" class="headerlink" title="SAM Local Capabilities"></a>SAM Local Capabilities</h4><ul><li>SAM Local ç”¨äºæœ¬åœ°æ¨¡æ‹Ÿã€æµ‹è¯•å’Œè°ƒè¯•æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åº, æ”¯æŒ Lambda å’Œ API Gateway</li><li>Locally start AWS Lambda (è®°ä½è¿™é‡Œéƒ½æ˜¯ SAM CLI + AWS Toolkits)</li><li>Locally invoke Lambda Function</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154914.png"></p><ul><li>Locally start an API Gateway Endpoint</li><li>Generate AWS Events for Lambda Functions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155003.png"></p><hr><h3 id="24-Cloud-Deployment-Kit-CDK"><a href="#24-Cloud-Deployment-Kit-CDK" class="headerlink" title="24. Cloud Deployment Kit (CDK)"></a>24. Cloud Deployment Kit (CDK)</h3><h4 id="AWS-Cloud-Development-Kit"><a href="#AWS-Cloud-Development-Kit" class="headerlink" title="AWS Cloud Development Kit"></a>AWS Cloud Development Kit</h4><ul><li>Define your cloud infrastructure using a familiar language (Java, Python)</li><li>Can deploy infrastructure and application runtime code together</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160250.png"></p><ul><li>CDK å’Œ SAM çš„ä¸åŒ (è™½ç„¶å®ƒä»¬éƒ½ç”¨ CloudFormation)<ul><li>SAM ä¸»è¦å…³æ³¨çš„æ˜¯ Serverless å’Œ Lambda, è€Œä¸”åªèƒ½ç”¨ JSON æˆ–è€… YAML çš„å½¢å¼</li><li>CDK å¯ä»¥ç”¨åœ¨æ‰€æœ‰ AWS services ä¸Š, å¯ä»¥ç”¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160532.png"></p><ul><li>æ³¨æ„, CDK æ‰ä¼šæä¾› app template, è€Œä¸æ˜¯ CloudFormation (é‡è¦)</li></ul><hr><h3 id="25-Cognito"><a href="#25-Cognito" class="headerlink" title="25. Cognito"></a>25. Cognito</h3><h4 id="AWS-Cognito"><a href="#AWS-Cognito" class="headerlink" title="AWS Cognito"></a>AWS Cognito</h4><ul><li>AWS Cognito æ˜¯ä¸€ç§ç”¨æˆ·èº«ä»½ç®¡ç†æœåŠ¡, ç”¨äºå®‰å…¨åœ°æ·»åŠ ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œè®¿é—®æ§åˆ¶åŠŸèƒ½<ul><li>Cognito User Pools: Sign in for app, integraet with API Gateway &amp; ALB</li><li>Cognito Identity Pools: Integrate with Cognito User Pools as identity provider</li></ul></li><li>CUP + CIP &#x3D; authentication + authorization</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181012.png"></p><ul><li>Cognito Sync: Enable cross-device syncing of application related user data</li></ul><hr><h4 id="Cognito-User-Pools-CUP"><a href="#Cognito-User-Pools-CUP" class="headerlink" title="Cognito User Pools (CUP)"></a>Cognito User Pools (CUP)</h4><ul><li>ä¸ API Gateway å’Œ Application Load Balancer é›†æˆ (é‡è¦)<ul><li>æ³¨æ„, æ˜¯å’Œ ALB é›†æˆ, è€Œä¸æ˜¯ CloudFront (é‡è¦)</li></ul></li><li>After a successful login using Cognito User Pools, it sends a JWT token (é‡è¦)</li><li>Adaptive Authentication<ul><li>Block sign-ins or require MFA if the login appears suspicious (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181142.png"></p><hr><h4 id="Cognito-Identity-Pools-CIP"><a href="#Cognito-Identity-Pools-CIP" class="headerlink" title="Cognito Identity Pools (CIP)"></a>Cognito Identity Pools (CIP)</h4><ul><li>Get identities for <code>users</code> so they obtain temporary AWS credentials</li><li>å¦‚æœéœ€è¦ integrate user-specific file upload and download feature, ä½¿ç”¨ IAM policy with AWS Cognito identity prefix to restrict users to use their own folders in S3</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img20555%EF%BC%95.png"></p><hr><h3 id="26-Step-Functions-amp-AppSync"><a href="#26-Step-Functions-amp-AppSync" class="headerlink" title="26. Step Functions &amp; AppSync"></a>26. Step Functions &amp; AppSync</h3><h4 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h4><ul><li>AWS Step Functions æ˜¯ä¸€ç§å¯è§†åŒ–å·¥ä½œæµæœåŠ¡, ç”¨äºåè°ƒå’Œç®¡ç†åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡</li><li>æœ‰ä¸¤ç§ Workflows: Standard å’Œ Express (Express é‡Œæœ‰ Sync å’Œ Async)<ul><li>Standard é€‚åˆ long-running, durable, and auditable workflow</li><li>Express é€‚åˆ high event rates and short duration workflow</li></ul></li><li>Task States: Do some work in the state machine (æ¯”å¦‚ invoke Lambda function)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215042.png"></p><ul><li>Parallel State: Begin parallel branches of execution</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215355.png"></p><ul><li>A Task state <code>(&quot;Type&quot;: &quot;Task&quot;)</code> represents a single unit of work performed by a state machine (é‡è¦)</li></ul><hr><h4 id="Step-Functions-Error-Handling"><a href="#Step-Functions-Error-Handling" class="headerlink" title="Step Functions Error Handling"></a>Step Functions Error Handling</h4><ul><li>Any state can encounter runtime errors for various reasons</li><li>Use <code>Retry</code> and <code>Catch</code> in the State Machine to handle error instead of application code</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215654.png"></p><hr><h4 id="Step-Functions-Wait-for-Task-Token"><a href="#Step-Functions-Wait-for-Task-Token" class="headerlink" title="Step Functions Wait for Task Token"></a>Step Functions Wait for Task Token</h4><ul><li>Allow to pause Step Functions during a Task until a Task Token is returned</li><li>Append <code>.waitForTaskToken</code> to the Resource field</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220013.png"></p><hr><h4 id="Step-Functions-Activity-Tasks"><a href="#Step-Functions-Activity-Tasks" class="headerlink" title="Step Functions Activity Tasks"></a>Step Functions Activity Tasks</h4><ul><li>Task performed by an Activity Worker (Acitvity Worker å¯ä»¥åœ¨ EC2, Lambda ä¸Šè·‘)</li><li>After Activity Worker complete its work, it sends a response back to Step Functions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220441.png"></p><hr><h4 id="AWS-AppSync"><a href="#AWS-AppSync" class="headerlink" title="AWS AppSync"></a>AWS AppSync</h4><ul><li>AppSync is a managed service that use GraphQL (é‡è¦)</li><li>Retrieve data in real-time with WebSocket or MQTT on WebSocket (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221024.png"></p><hr><h4 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a>AWS Amplify</h4><ul><li>A set of tools to create mobile and web applications (å°±ç±»ä¼¼ firebase, é‡è¦)<ul><li>Authentication: leverage AWS Cognito</li><li>Datastore: leverage AWS AppSync and DynamoDB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img22%EF%BC%96024.png"></p><hr><h3 id="27-Advanced-Identity"><a href="#27-Advanced-Identity" class="headerlink" title="27. Advanced Identity"></a>27. Advanced Identity</h3><h4 id="AWS-STS"><a href="#AWS-STS" class="headerlink" title="AWS STS"></a>AWS STS</h4><ul><li>AWS STS (Security Token Service) æ˜¯ä¸€ç§ç”¨äºä¸´æ—¶ç”Ÿæˆè®¿é—®å¯†é’¥ä»¥è®¿é—® AWS èµ„æºçš„æœåŠ¡<ul><li>Allow to grant limited and temporary access to AWS up to 1 hour</li></ul></li><li>æ³¨æ„, é‡åˆ° <code>decode-authorization-message</code> çš„å°±æ˜¯ STS</li><li>STS çš„æœ‰æ•ˆæœŸä» 15 åˆ†é’Ÿåˆ° 1 å°æ—¶, æœ‰æ•ˆæœŸè¿‡åéœ€è¦ renew</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230636.png"></p><hr><h4 id="Advanced-IAM"><a href="#Advanced-IAM" class="headerlink" title="Advanced IAM"></a>Advanced IAM</h4><ul><li>Evaluation of Policies (é‡è¦)<ul><li>å…ˆæŸ¥æ˜¯ä¸æ˜¯ Deny, æ˜¯å°±ç›´æ¥ Deny,ä¸æ˜¯å°±æŸ¥æ˜¯ä¸æ˜¯ Allow, æ˜¯å°±ç›´æ¥ Allow, å¦åˆ™ç›´æ¥ Deny</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231838.png"></p><ul><li>IAM Policies &amp; S3 Bucket Policies<ul><li>éœ€è¦åŒæ—¶ evaluate IAM å’Œ S3 çš„ Polciy, åªè¦ä¸¤ä¸ªé‡Œé¢æ²¡æœ‰ Deny å°±è¡Œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232221.png"></p><ul><li>Dynamic Policies with IAM (é‡è¦)<ul><li>Give IAM policy to a specific user, using <code>$&#123;aws:username&#125; </code>(dynamic variable)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232539.png"></p><hr><h4 id="IAM-Access-Analyzer"><a href="#IAM-Access-Analyzer" class="headerlink" title="IAM Access Analyzer"></a>IAM Access Analyzer</h4><ul><li>IAM Access Analyzer simplifies inspecting unused access to guide you toward least privilege (é‡è¦, å¯ä»¥ remove ä¸€äº›ä¸éœ€è¦çš„ IAM Roles)</li><li>IAM Access Analyzer also lets you identify unintended access to your resources and data, which is a security risk (å‡å°‘ security issues)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012837.png"></p><hr><h4 id="AWS-Directory-Services-AD"><a href="#AWS-Directory-Services-AD" class="headerlink" title="AWS Directory Services (AD)"></a>AWS Directory Services (AD)</h4><ul><li>AWS Directory Services (AD) æ˜¯ä¸€ç§æ‰˜ç®¡æœåŠ¡, ç”¨äºåœ¨ AWS äº‘ä¸­è¿è¡Œ Microsoft Active Directory,ç®€åŒ–èº«ä»½éªŒè¯å’Œèµ„æºç®¡ç†<ul><li>AWS Managed Microsoft AD: AD in AWS, supports MFA (é‡è¦ï¼ŒAD åœ¨ AWS )</li><li>AD Connector: Redirect to on-premise AD, supports MFA (é‡è¦, AD åœ¨ on premise)</li><li>Simple AD: AD-compatible managed directory on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232910.png"></p><hr><h3 id="28-AWS-Security-amp-Encryption"><a href="#28-AWS-Security-amp-Encryption" class="headerlink" title="28. AWS Security &amp; Encryption"></a>28. AWS Security &amp; Encryption</h3><h4 id="Encryption-101"><a href="#Encryption-101" class="headerlink" title="Encryption 101"></a>Encryption 101</h4><ul><li>Encryption in flight<ul><li>Data is encrypted before sending and decrypted after receive (é‡è¦)</li></ul></li><li>Server-side encryption<ul><li>Both encryption and decryption happen on the server (é‡è¦)</li></ul></li><li>Client-side encryption<ul><li>Data is encrypted by client and never decrypted by the server (é‡è¦)</li></ul></li></ul><blockquote><p>IAM policy to enforce SSL request to objects stored in S3: <code>aws:SecureTransport</code></p></blockquote><hr><h4 id="AWS-KMS"><a href="#AWS-KMS" class="headerlink" title="AWS KMS"></a>AWS KMS</h4><ul><li>Anytime you hear <code>encryption</code> for an AWS service, itâ€™s most likely KMS</li><li>AWS managed encryption keys for us, æ¯”å¦‚ EBS, S3, RDS, SSM (ä¸éœ€è¦è‡ªå·±åˆ›å»º)</li><li>KMS Keys are scoped per Region, Automatic Key Rotation is 1 year</li><li>æ³¨æ„, KMS å¹¶ä¸é€‚åˆä¿å­˜ secret, åŠ å¯†çš„ä¸œè¥¿ä¸ä¸€å®šæ˜¯ secret</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175137.png"></p><ul><li>Types of KMS Keys (3 ç§): AWS Owned, AWS Managed, CMK (Custom Managed)<ul><li>KMS stores the CMK and receives data from client, which it encrypt and send back</li></ul></li><li>ä¸¤ç§ Key çš„å½¢å¼: Symmetric (Single) &amp; Asymmetric (Public &amp; Private)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171058.png"></p><ul><li>KMS Key Policies<ul><li>KMS Key Policy å¯ä»¥ç”¨æ¥ç®¡ç† KMS CMK (é‡è¦)</li><li>Custom KMS Key Policy: Define who can access the key (Cross Account Access)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175606.png"></p><blockquote><p>Deleting an AWS KMS key in AWS Key Management Service (AWS KMS) is destructive and potentially dangerous. Therefore, AWS KMS enforces a waiting period. (Pending state)</p></blockquote><hr><h4 id="KMS-Envelope-Encryption"><a href="#KMS-Envelope-Encryption" class="headerlink" title="KMS Envelope Encryption"></a>KMS Envelope Encryption</h4><ul><li>KMS <code>Encrypt</code> API call has a limit of 4 KB (é‡è¦)</li><li>If <code>encrypt &gt; 4 KM</code>, we need to use Envelope Encryption (<code>GenerateDataKey</code> API)</li><li>Envelope Encryption æ˜¯ reference data as file within the code</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175943.png"></p><ul><li>KMS Symmetric API Summary<ul><li><code>Encrypt</code>: encrypt up to 4KB of data through KMS</li><li><code>GenerateDataKey</code>: generates a unique symmetric data key (DEK)</li><li><code>GemerateDataKeyWithoutPlaintext</code>: generate a DEK to use later</li><li><code>Decrypt</code>: decrypt up to 4 KB of data</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180803.png"></p><hr><h4 id="KMS-Limits"><a href="#KMS-Limits" class="headerlink" title="KMS Limits"></a>KMS Limits</h4><ul><li>KMS Request Quotas: Exceed a request quota, get a <code>ThrottlingException</code></li><li>Request a Requst Quotas increase through API or AWS support</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184019.png"></p><hr><h4 id="AWS-CloudHSM"><a href="#AWS-CloudHSM" class="headerlink" title="AWS CloudHSM"></a>AWS CloudHSM</h4><ul><li>AWS CloudHSM æ˜¯ä¸€ç§æ‰˜ç®¡ç¡¬ä»¶å®‰å…¨æ¨¡å—æœåŠ¡, ç”¨äºå®‰å…¨å­˜å‚¨å’Œç®¡ç†åŠ å¯†å¯†é’¥<ul><li>We have to manage the encryption keys entirely</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184859.png"></p><hr><h4 id="SSM-Parameter-Store"><a href="#SSM-Parameter-Store" class="headerlink" title="SSM Parameter Store"></a>SSM Parameter Store</h4><ul><li>SSM Parameter Store æ˜¯ä¸€ç§å®‰å…¨çš„å­˜å‚¨æœåŠ¡, ç®¡ç†é…ç½®æ•°æ®å’Œå¯†é’¥, å¦‚å¯†ç å’Œæ•°æ®åº“å­—ç¬¦ä¸²<ul><li>æ¯”èµ· Secrets Manager æœ‰æ›´å¹¿çš„ç”¨é€”, æ¯”å¦‚ URLs, AMI IDs, License keys ç­‰ç­‰</li><li>SSM æ²¡æœ‰ Automatic key rotation (éå¸¸é‡è¦)</li></ul></li><li>Have built-in verion tracking (æ¯æ¬¡ edit secret éƒ½ä¼šè¢«è®°å½•, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173611.png"></p><ul><li>å¯ä»¥å°† secret å‚¨å­˜æˆ SecureString åœ¨ SSM Parameter Store é‡Œ (é‡è¦)</li></ul><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><ul><li>Store secrets, integrated with RDS &amp; Aurora (éå¸¸é‡è¦, å­˜æ•°æ®åº“ secrets çš„)<ul><li>æ˜¯ç»™ confidential information (like database credentials, API keys) ç”¨çš„</li><li>æ¯”èµ· SSM Parameter Store, Secrets Manager æ”¯æŒ Key çš„è½®æ¢ (90 å¤©)</li><li>æ³¨æ„, Secrets Manager çš„ Key Rotateion æ˜¯ 90 å¤©, KMS çš„ Key Rotateion æ˜¯ä¸€å¹´</li></ul></li><li>æ¯”èµ· KMS, Secrets Manager æ›´é€‚åˆå»ä¿å­˜ secret, æ¯”å¦‚ database credential, è€Œä¸” Secrets Manager ä¹Ÿæœ‰ Automatic key rotation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185726.png"></p><ul><li>Multi-Region Secrets (å’Œ Multi-Region Key ç±»ä¼¼)<ul><li>Replicate Secrets across multiple AWS Regions (disaster recovery)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174258.png"></p><hr><h4 id="CloudWatch-Logs-Encryption"><a href="#CloudWatch-Logs-Encryption" class="headerlink" title="CloudWatch Logs Encryption"></a>CloudWatch Logs Encryption</h4><ul><li>Encrypt CloudWatch Logs with KMS keys<ul><li>Encryption is enabled at the log group level, by associating a CMK</li></ul></li><li><code>associate-kms-key</code>: if log group already exists (é‡è¦, CloudWatch å­˜åœ¨çš„æƒ…å†µ)</li><li><code>create-log-group</code>: if the log group doesnâ€™t exist</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190545.png"></p><hr><h4 id="AWS-Nitro-Enclaves"><a href="#AWS-Nitro-Enclaves" class="headerlink" title="AWS Nitro Enclaves"></a>AWS Nitro Enclaves</h4><ul><li>Process highly sensitive data in an isolated compute environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190809.png"></p><hr><h3 id="29-Other-AWS-Services"><a href="#29-Other-AWS-Services" class="headerlink" title="29. Other AWS Services"></a>29. Other AWS Services</h3><h4 id="AWS-SES-Simple-Email-Service"><a href="#AWS-SES-Simple-Email-Service" class="headerlink" title="AWS SES (Simple Email Service)"></a>AWS SES (Simple Email Service)</h4><ul><li>Managed service to send email securely (å‘é‚®ä»¶çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004334.png"></p><hr><h4 id="AWS-OpenSearch"><a href="#AWS-OpenSearch" class="headerlink" title="AWS OpenSearch"></a>AWS OpenSearch</h4><ul><li>With OpenSearch, you can search any field, even partially matches<ul><li>åŸæ¥å«åš ElasticSearch (å°±æ˜¯åšæŸ¥è¯¢çš„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192053.png"></p><hr><h4 id="AWS-Athena"><a href="#AWS-Athena" class="headerlink" title="AWS Athena"></a>AWS Athena</h4><ul><li>Athena is an query service that analyze data in Amazon S3 using standard SQL<ul><li>Athena æ”¯æŒ SQL query å»å¤„ç† S3 æ•°æ®çš„</li><li>Athena cannot be used to analyze data in real time (æ²¡åŠæ³•å®æ—¶å¤„ç†æ•°æ®, é‡è¦)</li></ul></li><li>Use Athena to process logs, perform ad-hoc analysis, and run interactive queries (é‡è¦)</li><li>Use columnar data for cost-saving (çœé’±, less scan)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192218.png"></p><ul><li>Federated Query<ul><li>Allow to run SQL queries across data stored on AWS or On-Premise</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200427.png"></p><hr><h4 id="AWS-MSK"><a href="#AWS-MSK" class="headerlink" title="AWS MSK"></a>AWS MSK</h4><ul><li>Managed Apache Kafka on AWS (Have Serverless)<ul><li>Kinesis çš„ä»£æ›¿ (åŒæ ·å¤„ç† Stream data), ä½†æ˜¯é’ˆå¯¹ Apache Kafka</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230056.png"></p><hr><h4 id="AWS-Certificate-Manager-ACM"><a href="#AWS-Certificate-Manager-ACM" class="headerlink" title="AWS Certificate Manager (ACM)"></a>AWS Certificate Manager (ACM)</h4><ul><li>AWS Certificate Manager (ACM) æ˜¯ä¸€ç§ç®¡ç† SSL&#x2F;TLS è¯ä¹¦çš„æœåŠ¡, ç”¨äºå®‰å…¨åœ°ä¿æŠ¤å’Œç®¡ç†ç½‘ç«™å’Œåº”ç”¨ç¨‹åºçš„é€šä¿¡<ul><li>å¦‚æœæ˜¯ third party SSL å°±æ²¡åŠæ³•ä½¿ç”¨ automatic certificate rotation</li></ul></li><li>å¯ä»¥ç”¨ EventBridge æ¥æ£€æŸ¥ ACM Certificates æ˜¯å¦è¿‡æœŸ (è¿‡æœŸ Invoke SNS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174451.png"></p><hr><h4 id="AWS-Macie"><a href="#AWS-Macie" class="headerlink" title="AWS Macie"></a>AWS Macie</h4><ul><li>Use ML to protect sensitive data (PII) in AWS (ç”¨ ML ä¿æŠ¤æ•æ„Ÿä¿¡æ¯)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192617.png"></p><hr><h4 id="AWS-AppConfig"><a href="#AWS-AppConfig" class="headerlink" title="AWS AppConfig"></a>AWS AppConfig</h4><ul><li>Configurate, validate, and deploy dynamic configurations</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192722.png"></p><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹, è°¢è°¢</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS SAA-C03</title>
      <link href="/posts/fa4ed4d8.html"/>
      <url>/posts/fa4ed4d8.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å®˜ç½‘: <a href="https://aws.amazon.com/certification/certified-solutions-architect-associate/">https://aws.amazon.com/certification/certified-solutions-architect-associate/</a></p></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h3 id="1-AWS-Cloud-Overview"><a href="#1-AWS-Cloud-Overview" class="headerlink" title="1. AWS Cloud Overview"></a>1. AWS Cloud Overview</h3><ul><li>Global Services: IAM, Route53, CloudFront, WAF ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140948.png"></p><h4 id="AWS-Regions"><a href="#AWS-Regions" class="headerlink" title="AWS Regions"></a>AWS Regions</h4><ul><li>A Region is a cluster of data centers</li><li>è€ƒè™‘ Compliance (åˆè§„), Proximity (ä¸´è¿‘ç”¨æˆ·), Available Services å’Œ Pricing</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231130.png"></p><hr><h4 id="AWS-Availability-Zone-AZ"><a href="#AWS-Availability-Zone-AZ" class="headerlink" title="AWS Availability Zone (AZ)"></a>AWS Availability Zone (AZ)</h4><ul><li>ä¸€ä¸ª Region å¯ä»¥æœ‰ 3 - 6 ä¸ª AZ (æ¯ä¸ª AZ éƒ½æ˜¯åˆ†å¼€çš„)</li><li>To coordinate Availability Zones across accounts, you must use the AZ ID (æ³¨æ„)<ul><li>A åœ¨ us-west-2a å’Œ B åœ¨ us-west-2a æ˜¯ä¸ä¸€æ ·çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140727.png"></p><hr><h4 id="AWS-Edge-Locations"><a href="#AWS-Edge-Locations" class="headerlink" title="AWS Edge Locations"></a>AWS Edge Locations</h4><ul><li>Deliver content to user with low latency (ç¦»ç”¨æˆ·è¶Šè¿‘, deliver é€Ÿåº¦è¶Šå¿«)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140903.png"></p><hr><h3 id="2-IAM"><a href="#2-IAM" class="headerlink" title="2. IAM"></a>2. IAM</h3><h4 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h4><ul><li>Root Account: Created by default, ä¸è¦å’Œåˆ«äººåˆ†äº«</li><li>Users: People within the organization</li><li>Groups: Only contain Users, not other Groups (User å¯ä»¥å±äºå¤šä¸ª Group)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145736.png"></p><hr><h4 id="IAM-Permissions"><a href="#IAM-Permissions" class="headerlink" title="IAM Permissions"></a>IAM Permissions</h4><ul><li>å®šä¹‰äº† User æˆ–è€… Group çš„ Permission</li><li>è®°å¾—éµå®ˆ Least Privilege Principle</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img160124.png"></p><hr><h4 id="IAM-Polices"><a href="#IAM-Polices" class="headerlink" title="IAM Polices"></a>IAM Polices</h4><blockquote><p>IAM policies define permissions for an action regardless of the method that you use to perform the operation.</p></blockquote><ul><li>Statements é‡Œé¢å¿…é¡»åŒ…å«: Effect, Principal, Action, Resource<ul><li>Inline Policy æ˜¯ assign ç»™ä¸ªäººçš„</li></ul></li><li>æ³¨æ„, The only resource-based policy IAM support is Trust policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175653.png"></p><hr><h4 id="IAM-MFA"><a href="#IAM-MFA" class="headerlink" title="IAM MFA"></a>IAM MFA</h4><ul><li>Protect Root Accounts and IAM Users</li><li>MFA options: Virtual MFA Device, U2F Sercurity Key (USB)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180624.png"></p><hr><h4 id="IAM-CLI-amp-SDK"><a href="#IAM-CLI-amp-SDK" class="headerlink" title="IAM CLI &amp; SDK"></a>IAM CLI &amp; SDK</h4><ul><li>å¯ä»¥ç”¨ AWS Management Console, AWS CLI, AWS SDK æ¥è®¿é—® AWS</li><li>AWS CLI, AWS SDK ç”± Access Keys ä¿æŠ¤<ul><li>Set the DeleteOnTermination attribute to False using the command line</li><li>å¦‚æœè€ƒè¯•é‡åˆ°ä¸ä¼šçš„å°±é€‰ CLI</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193342.png"></p><hr><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li>æˆæƒ AWS æœåŠ¡å»åšæŸäº›äº‹ (æ¯”å¦‚ EB éœ€è¦ EC2 Role å’Œ Service Role)</li><li>å¸¸è§çš„ Role: EC2 Instance Role, Lambda Function Role ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203306.png"></p><hr><h4 id="IAM-Security-Tools"><a href="#IAM-Security-Tools" class="headerlink" title="IAM Security Tools"></a>IAM Security Tools</h4><ul><li>IAM Credentials Report: è¿”å›ç”¨æˆ·æ•°æ®å’Œä»–ä»¬çš„ credentials (å‡­æ®)</li><li>IAM Access Advisor: æ˜¾ç¤ºå½“å‰ç”¨æˆ·è¢«æˆæƒçš„æœåŠ¡å’Œä½¿ç”¨æ—¶é—´</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203553.png"></p><hr><h4 id="IAM-Extra"><a href="#IAM-Extra" class="headerlink" title="IAM Extra"></a>IAM Extra</h4><ul><li>Trust Policy (å”¯ä¸€çš„ resource-based policy)<ul><li>Trust policies define which principal entities can assume the role.</li></ul></li><li>AWS Organizations Service Control Policies (SCP, é’ˆå¯¹ Organization çš„)<ul><li>SCPs are JSON policies that specify the maximum permissions for an organization or organizational unit (OU)</li></ul></li><li>Access Control List (ACL, ç®¡ç†åˆ«äººçš„ account çš„)<ul><li>Access control lists (ACLs) are service policies that allow you to control which principals in another account can access a resource</li></ul></li><li>Permissions Boundary (ç®¡ç†ä¸€ä¸ª account æœ€å¤šæœ‰ä»€ä¹ˆæƒé™)<ul><li>A permissions boundary is an advanced feature for using a managed policy to set the maximum permissions that an identity-based policy can grant to an IAM entity.</li></ul></li></ul><hr><h3 id="3-EC2-Fundamentals"><a href="#3-EC2-Fundamentals" class="headerlink" title="3. EC2 Fundamentals"></a>3. EC2 Fundamentals</h3><h4 id="AWS-EC2"><a href="#AWS-EC2" class="headerlink" title="AWS EC2"></a>AWS EC2</h4><ul><li>å±äº Infrastructure as Service (IaaS) , ç»‘å®š AZ</li><li>User Data: EC2 å¯åŠ¨çš„æ—¶å€™è¿è¡Œçš„ä»£ç  (æ¯”å¦‚å¾€ EC2 Instance é‡Œé¢è£… Appache)<ul><li>By default, user data runs only during boot cycle when first lauch instance</li><li>By default, scripts entered as user data are executed with root user privileges</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214749.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214956.png"></p><ul><li>SSH åˆ° EC2 Instance çš„ public IP (è®°ä½, 169, meta-data)<ul><li><a href="http://169.254.169.254/latest/meta-data/public-ipv4">http://169.254.169.254/latest/meta-data/public-ipv4</a></li></ul></li></ul><hr><h4 id="EC2-Instance-Type"><a href="#EC2-Instance-Type" class="headerlink" title="EC2 Instance Type"></a>EC2 Instance Type</h4><ul><li>ä¸€å…± 7 ç§ EC2 Instance Type, ä½† 4 ç§ç”¨çš„æœ€å¤š<ul><li>General Purpose, Compute Optimized, Memory Optimized, Storage Optimized</li></ul></li><li>General Purpose: Balanced (å¹³è¡¡çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221846.png"></p><ul><li>Compute Optimized: High performance (å¤„ç† Batch, è§†é¢‘å’Œ HPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img221936.png"></p><ul><li>Memory Optimized: Process data in memory (å¤„ç† In memory database, cache)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222020.png"></p><ul><li>Storage Optimized: Read and write data on local storage (OLTP)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222129.png"></p><hr><h4 id="EC2-Security-Groups"><a href="#EC2-Security-Groups" class="headerlink" title="EC2 Security Groups"></a>EC2 Security Groups</h4><ul><li>Control how traffic is allowed into or out of EC2 instance (ç±»ä¼¼é˜²ç«å¢™)<ul><li>Can be attached to multiple instances (å¯ä»¥å¤ç”¨)</li><li>Locked down to Region &#x2F; VPC</li></ul></li><li>å¯ä»¥ä½œä¸º Security Group çš„ Inbound Rule æœ‰<ul><li>IP address, CIDR block, Security Group</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222531.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223020.png"></p><hr><h4 id="EC2-Instance-Purchasing-Options"><a href="#EC2-Instance-Purchasing-Options" class="headerlink" title="EC2 Instance Purchasing Options"></a>EC2 Instance Purchasing Options</h4><ul><li>On-Demand Intances: Short workload, pay by second (çŸ­æœŸå†…ç´§æ€¥ä½¿ç”¨)</li><li>Reserved: 1 - 3 years (72% discount, reserve capacity in an AZ)<ul><li>Reserved Instance: Long workload (1 - 3 å¹´, discount éšå¹´ä»½å¢åŠ )</li><li>Convertible Reserved Instances (RI): Long workload with flexible instance (66% discount, ä½†æ˜¯å¯ä»¥è‡ªç”±æ”¹å˜ Instance Type)</li></ul></li><li>Saving Plans: 1 - 3 years, commitment to an amount of usage (72% discount, è¦å®šä¸€ä¸ªä½¿ç”¨ä¸Šé™, è¶…è¿‡ä¸Šé™å°±å˜æˆ On-Demand)<ul><li>è¿˜æœ‰ Compute Saving Plan, 66% discount, work with Lambda and Fargate</li></ul></li><li>Spot Instance: Short workload, can lose instance (æœ€ä¾¿å®œ, 90% discount)</li><li>Dedicated Host: The physical server is yours (æœ€è´µ, å¯ä»¥æ§åˆ¶ how Instance placed)</li><li>Dedicated Instance: Run hardware, but not lockdown to you (æœåŠ¡å™¨å¤§éƒ¨åˆ†æ˜¯ä½ çš„)</li><li>Capacity Reservation: Reserve capacity in AZ (æ¯”å¦‚ä¸€å¤©ä¸­åªæœ‰å‡ ä¸ªå°æ—¶éœ€è¦ EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224149.png"></p><hr><h4 id="EC2-Spot-Instance"><a href="#EC2-Spot-Instance" class="headerlink" title="EC2 Spot Instance"></a>EC2 Spot Instance</h4><ul><li>åªèƒ½åœ¨ open, active æˆ–è€… disabled çš„çŠ¶æ€ä¸‹ cancel Spot Instance</li><li>éœ€è¦å…ˆ cancel Spot Instance, ç„¶åå† terminate (Cancel ä¸ä»£è¡¨ Terminate)</li><li>Spot Instance æœ‰ one-time å’Œ persistent ä¸¤ç§ request type</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225943.png"></p><ul><li>Spot Fleets: Automatically request Spot Instance with lowest price (Spot + On-Demand)<ul><li>æ‹¿åˆ°æœ€ä¾¿å®œçš„ Spot Instances</li></ul></li><li>Spot Fleets are set to maintain target capacity (å¯ä»¥ä¿è¯ä¸€å®šæ•°é‡çš„ Instance)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230258.png"></p><hr><h3 id="4-EC2-SAA-Level"><a href="#4-EC2-SAA-Level" class="headerlink" title="4. EC2 SAA Level"></a>4. EC2 SAA Level</h3><h4 id="Elastic-IP"><a href="#Elastic-IP" class="headerlink" title="Elastic IP"></a>Elastic IP</h4><ul><li>Public IP: Unique across the whole web</li><li>Private IP: Unique across the private network</li><li>Elastic IP: Fixed Public IP for EC2 instance (ä¸ä¼šæ”¹å˜)<ul><li>ä¸ºä»€ä¹ˆè¦ Elastic IP, å› ä¸º EC2 çš„ Public IP ä¼šåœ¨é‡å¯åæ”¹å˜</li><li>è€Œä¸” Elastic IP å¯ä»¥èŠ‚çœ EC2 çš„å¼€æ”¯, Private IP ä¹Ÿå¯ä»¥ (åœ¨ private internet æ¡ä»¶ä¸‹)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165706.png"></p><hr><h4 id="EC2-Placement-Groups"><a href="#EC2-Placement-Groups" class="headerlink" title="EC2 Placement Groups"></a>EC2 Placement Groups</h4><ul><li>Cluster: Low-latency, single AZ, ç½‘é€Ÿå¿«ä½† AZ å¯èƒ½ fail (å¤„ç† HPC)</li><li>Spread: High availability, critical application, é£é™©å°ä½†æœ‰é™åˆ¶, æ¯ä¸ª AZ æœ€å¤š 7 ä¸ªå®ä¾‹<ul><li>å¤„ç† small number of critical instances that need seperate from each other</li></ul></li><li>Partition: Partition instances across many partitions within an AZ, 7 partitions per AZ, up to 100 instances, span multiple region (Big Data, é£é™©å°, é™åˆ¶ä½)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170342.png"></p><ul><li>Cluster: Low-latency, single AZ, ç½‘é€Ÿå¿«ä½† AZ å¯èƒ½ fail (é€‚åˆ HPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170525.png"></p><ul><li>Spread: High availability, critical application, é£é™©å°ä½†æœ‰é™åˆ¶, æ¯ä¸ª AZ æœ€å¤š 7 ä¸ªå®ä¾‹</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170652.png"></p><ul><li>Partition: Spreads instances across many partitions within an AZ, 7 partitions per AZ, up to 100 instances, span multiple region (Big Data, é£é™©å°, é™åˆ¶ä½)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170936.png"></p><hr><h4 id="Elatic-Network-Interfaces-ENI"><a href="#Elatic-Network-Interfaces-ENI" class="headerlink" title="Elatic Network Interfaces (ENI)"></a>Elatic Network Interfaces (ENI)</h4><ul><li>Virtual network card in a VPC</li><li>å¤„ç† EC2 Instance failover (æ•…éšœè½¬ç§»), ç»‘å®š AZ (ä¸å¯ä»¥ attach åˆ°å…¶ä»– AZ ä¸Š)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img182407.png"></p><hr><h4 id="EC2-Hibernate"><a href="#EC2-Hibernate" class="headerlink" title="EC2 Hibernate"></a>EC2 Hibernate</h4><ul><li>EC2 Hibernate: Make EC2 instance boot faster (ä¸æ˜¯ stoped, è€Œæ˜¯ hibernated)</li><li>EC2 Instance Root Volume type must be an EBS volume</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img183846.png"></p><hr><h3 id="5-EC2-Instance-Storage"><a href="#5-EC2-Instance-Storage" class="headerlink" title="5. EC2 Instance Storage"></a>5. EC2 Instance Storage</h3><h4 id="AWS-EBS"><a href="#AWS-EBS" class="headerlink" title="AWS EBS"></a>AWS EBS</h4><ul><li>Block-level storage, ç±»ä¼¼ network drive, ç»‘å®š AZ, provisioned capacity<ul><li>By default, Root Volume will be deleted on termination (é‡è¦)</li><li>By default, other EBS volume will not be deleted on termination (é‡è¦)</li></ul></li><li>å¯ä»¥ä»ä¸€ä¸ª EC2 Instance å–ä¸‹æ¥è£…åˆ°å¦ä¸€ä¸ªä¸Š</li><li>EBS æ˜¯ç»‘å®š AZ çš„ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191440.png"></p><hr><h4 id="EBS-Snapshots"><a href="#EBS-Snapshots" class="headerlink" title="EBS Snapshots"></a>EBS Snapshots</h4><ul><li>Make a backup of EBS volume (å¤‡ä»½ EBS)</li><li>å¯ä»¥å°†è¿™ä¸ª snapshot ç”¨åœ¨å…¶ä»– AZ æˆ–è€… Region ä¸Š</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195715.png"></p><ul><li>EBS Snapchot Archive: ä¾¿å®œ 75%</li><li>Recycle Bin: Setup rules to retain deleted snapshots (å¯ä»¥ recover)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195833.png"></p><hr><h4 id="AWS-AMI"><a href="#AWS-AMI" class="headerlink" title="AWS AMI"></a>AWS AMI</h4><ul><li>AMI: Amazon Machine Image (Customization of an EC2 Instance)<ul><li>å¯ä»¥æ›´å¥½çš„ç®¡ç†å’Œå¯åŠ¨ EC2 Instance</li></ul></li><li>Built for a specific region and can copy across regions (AMI è·¨åŸŸå¤åˆ¶)</li></ul><blockquote><p>When the new AMI is copied from Region A into Region B, it automatically creates a snapshot in Region B (æ³¨æ„, è·¨åŸŸ copy AMI ä¼šäº§ç”Ÿ snapshot)</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200249.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200341.png"></p><hr><h4 id="EC2-Instance-Store"><a href="#EC2-Instance-Store" class="headerlink" title="EC2 Instance Store"></a>EC2 Instance Store</h4><ul><li>Block-level storage, ç‰©ç†ç¡¬ç›˜ (Physical drive, temporary storage)</li><li>High random I&#x2F;O performance, good for cache &amp; buffer at low cost (é‡è¦)</li><li>EC2 Instance Store lose when stopped (Ephemeral, æ•°æ®åœ¨ Instance Store å…³é—­æ—¶æ¶ˆå¤±)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203146.png"></p><ul><li>You canâ€™t detach an Instance Store volume from one instance and attach it to a different instance</li><li>If you create an Amazon Machine Image (AMI) from an instance, the data on its instance store volumes isnâ€™t preserved</li></ul><hr><h4 id="EBS-Volume-Types"><a href="#EBS-Volume-Types" class="headerlink" title="EBS Volume Types"></a>EBS Volume Types</h4><ul><li>General Purpose (gp2 &#x2F; gp3): Balanced, cost-effective</li><li>Provisioned IOPS (io1 &#x2F; io2): High-performance, support Multi-Attach<ul><li>è®°ä½, io çš„æ¯” gp çš„è´µ, ä½†æ˜¯ io çš„ IOPS ä¹Ÿæ¯” gp é«˜</li></ul></li><li>Hard Disk Drives (HDD): Data intensive (st1) æˆ–è€… less frequent access (sc1)<ul><li>HDD ä¸å¯ä»¥ç”¨æ¥åˆ›å»º EC2</li></ul></li><li>ä¸Šé¢è¿™äº›éƒ½æ²¡æœ‰è¶…è¿‡ 300,000 IOPS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203437.png"></p><hr><h4 id="EBS-Multi-Attach"><a href="#EBS-Multi-Attach" class="headerlink" title="EBS Multi-Attach"></a>EBS Multi-Attach</h4><ul><li>Attach same EBS volume to multiple EC2 instance in same AZ (è®°ä½æ˜¯ç›¸åŒçš„ AZ)</li><li>Only for io1 &#x2F; io2 family (Provisioned IOPS SSD, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203956.png"></p><hr><h4 id="EBS-Encryption"><a href="#EBS-Encryption" class="headerlink" title="EBS Encryption"></a>EBS Encryption</h4><ul><li>EBS Encryption (æ‰€æœ‰ç¯èŠ‚éƒ½æ˜¯ encrypted çš„)<ul><li>Data at rest is encrypted &amp; Data in flight is encrypted &amp; Snapshot is encrypted</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204137.png"></p><ul><li>é¦–å…ˆ create snapshot, ç„¶å encrypt snapshot, ç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„ EBS Volume (ä» encrypted snapshot), ç„¶åå°†è¿™ä¸ª volume åŠ å…¥åˆ°åŸæ¥çš„ Instance ä¸Š</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204208.png"></p><hr><h4 id="EBS-RAID"><a href="#EBS-RAID" class="headerlink" title="EBS RAID"></a>EBS RAID</h4><ul><li>RAID 0 (çœ‹é‡ I&#x2F;O performance)<ul><li>Use RAID 0 when I&#x2F;O performance is more important than fault tolerance</li></ul></li><li>RAID 1 (çœ‹é‡ falut tolerance)<ul><li>Use RAID 1 when fault tolerance is more important than I&#x2F;O performance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q37-i1.jpg"></p><hr><h4 id="AWS-EFS"><a href="#AWS-EFS" class="headerlink" title="AWS EFS"></a>AWS EFS</h4><ul><li>NFS (Network file system), å¯ä»¥ mount åˆ°å¤šä¸ª EC2 Instance<ul><li>Scale automatically, no capacity planning</li></ul></li><li>EC2 Instances can access files on an EFS file system across AZs, Regions and VPCs<ul><li>é‡è¦, å¯ä»¥ä»ä¸åŒçš„ AZ, Region, VPC æ¥ access</li></ul></li><li>å¯ä»¥ç”¨ VPC Security Group æˆ–è€… IAM Policy æ¥ control access to EFS</li><li>EFS Infrequent Access (å¦‚æœé‡åˆ° POSIX compliant file storage)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233415.png"></p><ul><li>NFS æœ‰ 2 ç§ Performance Mode<ul><li>General Purpose: Default (web server)</li><li>Max I&#x2F;O: High latency, throughput, parallel (Big Data, media process, é‡è¦)</li></ul></li><li>NFS æœ‰ 3 ç§ Throughput Mode (é‡è¦)<ul><li>Bursting: å¾ˆå¿«</li><li>Provisioned: è®¾ç½®ä¸Šé™ (high throughput, å¤„ç†å¤§é‡æ–‡ä»¶ migrate æ—¶å€™ä½¿ç”¨)</li><li>Elastic: æ ¹æ® workload æ¥ scale</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233732.png"></p><blockquote><p>EFS é€‚åˆå­˜å‚¨å¤§å‹æ–‡ä»¶, ä»ä»·æ ¼çš„è§’åº¦æ¥çœ‹, å­˜ 100 GB çš„æ–‡ä»¶, EBS &gt; EFS &gt; S3 (ä»·æ ¼)<br>EFS å¹¶ä¸æ˜¯æ°¸è¿œæœ€è´µçš„, ä½† S3 æ°¸è¿œæ˜¯æœ€ä¾¿å®œçš„</p></blockquote><hr><h3 id="6-ELB-amp-ASG"><a href="#6-ELB-amp-ASG" class="headerlink" title="6. ELB &amp; ASG"></a>6. ELB &amp; ASG</h3><h4 id="Scalability-amp-High-Availability"><a href="#Scalability-amp-High-Availability" class="headerlink" title="Scalability &amp; High Availability"></a>Scalability &amp; High Availability</h4><ul><li>Vertical (ç«–ç›´) Scale: Increase the size of the Instance (ä½†æ˜¯æœ‰ hardware limit)</li><li>Horizontal (æ°´å¹³) Scale: Increase the number of the Instance</li><li>High Availability: Rrunning application in at least 2 AZ (Disaster recovery, DR, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080120.png"></p><hr><h4 id="AWS-ELB"><a href="#AWS-ELB" class="headerlink" title="AWS ELB"></a>AWS ELB</h4><ul><li>Foward traffic to multiple EC2 Instances (æµé‡æ§åˆ¶)<ul><li>High Availability across AZs, handle failures of downstream instances</li></ul></li><li>Health Check: å¯ä»¥çŸ¥é“ EC2 Instance æ˜¯å¦æ˜¯ Healthy çš„<ul><li>ASG æ˜¯ç”¨ EC2 based health check, ALB ç”¨çš„æ˜¯ ALB based health check</li><li>ELB åº”è¯¥åœ¨ public subnet, ASG åº”è¯¥åœ¨ private subnet (é‡è¦)</li></ul></li><li>ELB cannot distribute traffic for targets deployed in different region</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img141400.png"></p><ul><li>Application Load Balancer (HTTP &#x2F; HTTPS, Layer 7)</li><li>Network Load Balancer (TCP &#x2F; UDP, Layer 4)<ul><li>NLB provide static DNS and static IP, ALB only provide static DNS</li></ul></li><li>Gateway Load Balancer (Security, Layer 3, è¦ç‰¹åˆ«æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090125.png"></p><hr><h4 id="Application-Load-Balancer-ALB"><a href="#Application-Load-Balancer-ALB" class="headerlink" title="Application Load Balancer (ALB)"></a>Application Load Balancer (ALB)</h4><ul><li>Deal with Layer 7 (HTTP &#x2F; HTTPS)</li><li>Route base on Path (&#x2F;Home) or Query (?Platform&#x3D;Mobile)</li><li>ALB adds an additional header called â€œX-Forwarded-Forâ€ contains the clientâ€™s IP</li><li>å¯ä»¥ configure ALB to redirect HTTP to HTTPS (é‡è¦)</li><li>ALB æ— æ³•è¢« assign Elstaic IP</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192523.png"></p><ul><li>Routing tables to different target groups<ul><li>Route based on path in URL</li><li>Route based on hostname in URL</li><li>Route based on Query String, Headers, Client IP</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142631.png"></p><ul><li>ALB Target Groups:<ul><li>EC2 Instance, ECS, Lambda, IP Address</li></ul></li></ul><blockquote><p>To forward all requests to the website so that the requests will use HTTPS, a solutions architect can create a listener rule on the ALB that redirects HTTP traffic to HTTPS.</p></blockquote><hr><h4 id="Network-Load-Balancer-NLB"><a href="#Network-Load-Balancer-NLB" class="headerlink" title="Network Load Balancer (NLB)"></a>Network Load Balancer (NLB)</h4><ul><li>Deal with Layer 4 (TCP &#x2F; UDP), å¾ˆå¿«, å¤„ç†æœ‰å¤§é‡ request çš„æƒ…å†µ</li><li>One static IP per AZ or use Elastic IP</li><li>NLB supports HTTP health checks as well as TCP and HTTPS</li><li>æ³¨æ„, NLB best suited for use-cases involving low latency and high throughput workloads, æ¯”å¦‚é“¶è¡Œ, æ¸¸æˆ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144359.png"></p><blockquote><p>If you specify targets using an instance ID, traffic is routed to instances using the primary private IP address specified in the primary network interface for the instance.</p></blockquote><hr><h4 id="Gateway-Load-Balancer-GWLB"><a href="#Gateway-Load-Balancer-GWLB" class="headerlink" title="Gateway Load Balancer (GWLB)"></a>Gateway Load Balancer (GWLB)</h4><ul><li>Deal with Layer 3 (Security, 3rd Party)</li><li>GWLB allows perform inline inspection of traffic from multiple spoke VPCs in a simplified and scalable fashion</li><li>Use GENEVE protocol on port 6081</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223042.png"></p><hr><h4 id="Sticky-Sessions-Session-Affinity"><a href="#Sticky-Sessions-Session-Affinity" class="headerlink" title="Sticky Sessions (Session Affinity)"></a>Sticky Sessions (Session Affinity)</h4><ul><li>Same client is always redirect to the same instance behind a load balancer</li><li>Make sure user doesnâ€™t loss session data (æ¯”å¦‚ç”¨æˆ·ç™»å½•)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223425.png"></p><ul><li>Application-based Cookies: Donâ€™t use AWSALB, AWSALBAPP, AWSALBTG</li><li>Duration-based Cookies: AWSALB for ALB, AWSELB for CLB</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223604.png"></p><hr><h4 id="Cross-Zone-Load-Balancing"><a href="#Cross-Zone-Load-Balancing" class="headerlink" title="Cross Zone Load Balancing"></a>Cross Zone Load Balancing</h4><ul><li>ELB distributes traffic evenly across all registered EC2 instances in all AZs<ul><li>æ‰€æœ‰ Instance åˆ†åˆ°çš„ traffic ä¸€å®šæ˜¯ä¸€æ ·çš„</li><li>å¦‚æœæ²¡æœ‰ enable, é‚£ä¹ˆ AZ å†…éƒ¨å°±æ˜¯å¹³å‡åˆ†</li></ul></li><li>ALB enabled by default, NLB disabled by default (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230059.png"></p><hr><h4 id="SSL-Certificates"><a href="#SSL-Certificates" class="headerlink" title="SSL Certificates"></a>SSL Certificates</h4><ul><li>Allow traffic between client and load balancer encrypted in transit (HTTPS)<ul><li>Manage SSL certificates using ACM (AWS Certificate Manager)</li></ul></li><li>å¦‚æœé—®åˆ°éœ€è¦ç®¡ç†å¾ˆå¤šä¸ª SSL æˆ–è€… TSL, é€‰æ‹© SNI (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230614.png"></p><ul><li>Could be used in ALB &amp; NLB, use SNI to make it work</li><li>SNI: Load multiple SSL certificates onto one web server (Server Name Indication)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230910.png"></p><hr><h4 id="Connection-Draining"><a href="#Connection-Draining" class="headerlink" title="Connection Draining"></a>Connection Draining</h4><ul><li>Waiting for existing connections to complete</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231418.png"></p><blockquote><p>Connection Draining enables the load balancer to complete in-flight requests made to instances that are de-registering or unhealthy</p></blockquote><hr><h4 id="AWS-ASG"><a href="#AWS-ASG" class="headerlink" title="AWS ASG"></a>AWS ASG</h4><ul><li>ASG å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale out æˆ–è€… in åŸºäºæœåŠ¡å™¨å‹åŠ› (å…è´¹)</li><li>ASG å¯ä»¥ä¿è¯æœ€å°‘æˆ–æœ€å¤šæœ‰å¤šå°‘ EC2 Instance åœ¨å·¥ä½œ (min, max)<ul><li>ASG æ˜¯åœ¨ä¸€ä¸ª Region é‡Œé¢å»æ ¹æ® availiable çš„ AZ è¿›è¡Œ scale</li></ul></li><li>å½“ä¸€ä¸ª Instance æ˜¯ unhealthy çš„æ—¶å€™, ASG ä¼š terminate è¿™ä¸ª Instance<ul><li>ASG åœ¨ä¸€ä¸ª AZ é‡Œæœ€æ—© terminate çš„æ˜¯é‚£ä¸ªæœ€æ—©è¢« launch çš„ Instance</li><li>é‡åˆ° unbalanced çš„æƒ…å†µ, ASG æ˜¯å…ˆ launch new instance ç„¶å terminate old instance</li><li>ä½†æ˜¯åœ¨ unhealthy çš„æƒ…å†µä¸‹æ˜¯å…ˆ terminate unhealth Instance ç„¶å create new</li></ul></li><li>å¦‚æœé—®åˆ°åœ¨æŸä¸ªèŠ‚æ—¥å‰å» scale, é‚£å°±æ˜¯ ASG scheduled action</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232350.png"></p><ul><li>å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨, æ¥ scale out æˆ–è€… in åŸºäºæœåŠ¡å™¨å‹åŠ›</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232615.png"></p><ul><li>Launch Template: å¯ä»¥ä½œä¸º template æ¥ç”Ÿæˆ EC2 Instance<ul><li>Launch Template æ˜¯ç®¡è¦ç”Ÿæˆä»€ä¹ˆ Instance çš„ (eg. Spot, On-Demand)</li><li>Launch Configuration æ˜¯ç®¡ç”Ÿæˆçš„ Instance çš„ä¿¡æ¯çš„ (eg. AMI, security group)</li></ul></li><li>å¦‚æœè¦æ›´æ–° Launch Template, éœ€è¦åˆ æ‰æ—§çš„ç„¶åä½¿ç”¨æ–°çš„ (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232823.png"></p><ul><li>å¯ä»¥å’Œ CloudWatch Alarm ä¸€èµ·æ ¹æ®æœåŠ¡å™¨å‹åŠ› scale out æˆ– scale in</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232959.png"></p><ul><li>ASG ä¸ terminate Instance çš„æƒ…å†µ<ul><li>The health check grace period for the instance has not expired</li><li>The instance maybe in Impaired status</li><li>The instance has failed the Elastic Load Balancing (ELB) health check status</li></ul></li></ul><hr><h4 id="Scaling-Policies"><a href="#Scaling-Policies" class="headerlink" title="Scaling Policies"></a>Scaling Policies</h4><ul><li>Dynamic Scaling<ul><li>Target Tracking Scaling: æ ¹æ® CPU ç”¨é‡æˆ–è€… SQS é•¿åº¦æ¥ scale</li><li>Simple &#x2F; Step Scaling: å’Œ CloudWatch Alarm å…³è”</li><li>Scheduled Actions: æ¯”å¦‚åœ¨æ„Ÿæ©èŠ‚é‚£å¤©è¿›è¡Œ scale</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233532.png"></p><ul><li>Predictive Scaling<ul><li>Forecast load and schedule scaling ahead</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233711.png"></p><hr><h3 id="7-AWS-Fundamentals"><a href="#7-AWS-Fundamentals" class="headerlink" title="7. AWS Fundamentals"></a>7. AWS Fundamentals</h3><h4 id="AWS-RDS"><a href="#AWS-RDS" class="headerlink" title="AWS RDS"></a>AWS RDS</h4><ul><li>ä½¿ç”¨ RDS çš„å¥½å¤„ (å¯¹æ¯”å°†æ•°æ®åº“å­˜åœ¨ EC2 ä¸Š)<ul><li>Automated provisioning, auto-scaling, backup</li><li>Read Replicas (æœ€å¤š 15 ä¸ª) å’Œ Multi-AZ</li></ul></li><li>RDS RIs: ç±»ä¼¼ EC2 RIs</li><li>RDS Read Replica: If master database is encrypted, the replica is also encrypted<ul><li>æ³¨æ„, Read Replica æé«˜çš„æ˜¯ read, è€Œä¸æ˜¯ scale æ•°æ®åº“çš„ storage (è€Œä¸” Replica è´µ), å¤„ç†ç±»ä¼¼ report æˆ–è€… analytics çš„å°±æ˜¯ Read Replica</li><li>Read Replica ä¸æ˜¯æé«˜ High Availability, Multi-AZ æ‰æ˜¯</li><li>Cross-Region Read Replica: å½“ disaster å‘ç”Ÿ, å¯ä»¥ä½œä¸º DB backup</li></ul></li><li>RDS Multi-AZ: RDS create a primary DB Instance and synchronously replicates the data to a standby instance in a different AZ (High Availability)<ul><li>RDS Multi-AZ update æ˜¯ standby å’Œ primary ä¸€èµ· update (ä¼šæœ‰ downtime)</li></ul></li><li>Support MySQL, PostgreSQL, MariaDB, Oracle, MS SQL Server, and Amazon Aurora</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161720.png"></p><ul><li>Storage Auto Scaling (è‡ªåŠ¨ scale)<ul><li>For application with unpredictable workloads</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161952.png"></p><ul><li>Disaster Recovery<ul><li>Create a Read Replica in different region and enable Multi-AZ on Read Replica</li></ul></li><li>IAM Database Authentication: å¯ä»¥ç”¨æ¥è®¿é—® RDS</li><li>å¯ä»¥ä» RDS Read Replica è¿ç§»åˆ° Aurora Read Replica, è¿™ä¸ªåšæ³•å¯ä»¥ minimal change</li></ul><hr><h4 id="Read-Replicas-vs-Multi-AZ"><a href="#Read-Replicas-vs-Multi-AZ" class="headerlink" title="Read Replicas vs. Multi AZ"></a>Read Replicas vs. Multi AZ</h4><ul><li>Read Replicas: Scalability, Async Replication<ul><li>Within AZ, Cross AZ or Cross Region</li></ul></li><li>Read Replicas in Same Region is free (Replication in AZs), Cross Region is not free</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173522.png"></p><ul><li>ç”¨ Production databse å¤„ç†æ—¥å¸¸, ç”¨ Read Replica æ¥å»ºä¸€ä¸ªå‰¯æœ¬å¤„ç†æ•°æ®åˆ†æ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173820.png"></p><ul><li>Multi AZ: High Availability, Disaster Recovery, Sync Replication<ul><li>åœ¨ Multi-AZ çš„æƒ…å†µä¸‹, å½“ RDS æ•°æ®åº“ goes down, CNAME ä¼šæ›´æ–°æŒ‡å‘ standby</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174148.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174357.png"></p><hr><h4 id="RDS-Custom"><a href="#RDS-Custom" class="headerlink" title="RDS Custom"></a>RDS Custom</h4><ul><li>Could access the underlying database and OS<ul><li>åªæœ‰ Oracle å’Œ Microsoft SQL Server å¯ä»¥</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174702.png"></p><hr><h4 id="AWS-Aurora"><a href="#AWS-Aurora" class="headerlink" title="AWS Aurora"></a>AWS Aurora</h4><ul><li>Support PostgreSQL and MySQL (ä¸éœ€è¦ç®¡ç† storage)</li><li>Aurora æ²¡æœ‰ standby database, Aurora Replica å¯ä»¥ä½œä¸º failover target</li><li>ä¸€èˆ¬æ¥è¯´, Aurora æ¯” RDS å¿«</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img183915.png"></p><ul><li>High Availiability &amp; Read Scaling (Aurora Read Replica)<ul><li>One Master Write, Multiple Read Replicas (Up to 15 Replica), ä¸€å…± 16 ä¸ª</li><li>å¦‚æœé—®åˆ°å’Œ Aurora æœ‰å…³, ä¸”å…³äºå¤„ç†ç½‘ç»œè¯·æ±‚æ¿€å¢çš„é—®é¢˜, é€‰ Aurora Replica</li><li>Replica Tier è¶Šé«˜, failover æ—¶è¢« promote</li></ul></li><li>å¦‚æœé—®åˆ°å…³äº Aurora çš„ Auto-Scaling, é‚£å°±æ˜¯ Aurora Serverless</li><li>å¦‚æœé—®åˆ° Aurora è€Œä¸”æ˜¯ test database, é€‰æ‹© Aurora Database Cloning</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184105.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184221.png"></p><hr><h4 id="Aurora-Advanced"><a href="#Aurora-Advanced" class="headerlink" title="Aurora Advanced"></a>Aurora Advanced</h4><ul><li>Aurora Replicas Auto Scaling: å’Œ EC2 çš„ Auto Scaling ç±»ä¼¼</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184516.png"></p><ul><li>Aurora Custom Endpoints: å¯ä»¥åœ¨ä¸Šé¢è·‘æ•°æ®åˆ†æ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184559.png"></p><ul><li>Aurora Serverless: Automated database instantiation and auto scaling (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184700.png"></p><ul><li>Aurora Global: Cross Region replication takes less than 1 second<ul><li>åŒæ—¶ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ª Replica å¯ä»¥ç”¨ (é‡è¦)</li><li>Designed for globally distributed application, with fast local reads with low latency</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184847.png"></p><ul><li>Aurora Machine Learning: ML prediction</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184942.png"></p><ul><li>Aurora Database Cloning<ul><li>å¯ä»¥å¿«é€Ÿ access Aurora DB, æ¯” snapshot &amp; retore å¿«</li><li>å½“éœ€è¦åˆ¶ä½œ test database çš„æ—¶å€™é€‰ Aurora Database Cloning</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185556.png"></p><hr><h4 id="Backup-amp-Monitoring"><a href="#Backup-amp-Monitoring" class="headerlink" title="Backup &amp; Monitoring"></a>Backup &amp; Monitoring</h4><ul><li>RDS Backups (æœ‰ä¸¤ç§)<ul><li>Automated backups: æ¯å¤©è‡ªåŠ¨ backup</li><li>Manual DB Snapshots: æ‰‹åŠ¨ backup</li></ul></li><li>æ³¨æ„, å¦‚æœæ˜¯ä¸ºäº†çœé’±, å¯ä»¥åœ¨ç”¨å®Œæ•°æ®åº“ååˆ¶ä½œæ•°æ®åº“ snapshot, ç„¶å terminate æ•°æ®åº“, åœ¨éœ€è¦çš„æ—¶å€™å†æŠŠæ•°æ®åº“ snapshot restore å›å»</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185223.png"></p><ul><li>Aurora Backups (å’Œä¸Šé¢ä¸€æ ·)<ul><li>Automated backups: æ¯å¤©è‡ªåŠ¨ backup</li><li>Manual DB Snapshots: æ‰‹åŠ¨ backup</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185353.png"></p><ul><li>RDS &amp; Aurora Restore options<ul><li>æœ€åŸºæœ¬çš„å°±æ˜¯ç”¨ snapshot æ¥ restore</li><li>å¦‚æœæ˜¯ä» On-Premise, å¯ä»¥åšä¸€ä¸ª backup ç„¶åå­˜åˆ° S3, å†ä» S3 æ¥ restore</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185459.png"></p><hr><h4 id="RDS-Security"><a href="#RDS-Security" class="headerlink" title="RDS Security"></a>RDS Security</h4><ul><li>At-rest encryption: AWS KMS (Key Management Service)</li><li>In-flight encryption: AWS TLS Certificates</li><li>IAM Authentication: IAM roles to connect to database</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img133048.png"></p><hr><h4 id="RDS-Proxy"><a href="#RDS-Proxy" class="headerlink" title="RDS Proxy"></a>RDS Proxy</h4><ul><li>Have a proxy for access RDS or Aurora, ç¼“è§£æ•°æ®åº“å‹åŠ›, minimize open connections<ul><li>Allow apps to pool and share DB connections (æé«˜ DB efficiency)</li><li>Reduced RDS &amp; Aurora failover time by up 66%</li><li>No code change (é‡è¦)</li></ul></li><li>Serverless, auto scaling, Highly Avaliable (Multi-AZ)</li><li>Not publicly accessible (Need to use VPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184531.png"></p><hr><h4 id="AWS-ElastiCache"><a href="#AWS-ElastiCache" class="headerlink" title="AWS ElastiCache"></a>AWS ElastiCache</h4><ul><li>Manage Redis or Memcached (ElastiCache è§£å†³çš„æ˜¯æ•°æ®åº“é«˜é¢‘è¯»å–çš„é—®é¢˜, é‡è¦)<ul><li>ElastiCache ä¹Ÿæ˜¯ in-memory data store, è€Œä¸”æ”¯æŒ SQL query caching</li></ul></li><li>Cache are in-memory database with high performance and low latency (compute-intensive)</li><li>Cache helps reduce load off of database for read intensive workload (read heavy)</li><li>Help to make application stateless (AWS è´Ÿè´£å¤§éƒ¨åˆ†å·¥ä½œ)</li><li>å¤„ç† S3 çš„æ˜¯ CloudFront, è€Œä¸æ˜¯ ElastiCache (è®°ä½)</li><li>æ”¯æŒ multi-threading çš„æ˜¯ ElastiCache for Memcached</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184841.png"></p><ul><li>DB Cache: Get data from ElastiCache<ul><li>If not avaliable, get from RDS and store in ElastiCache</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185024.png"></p><ul><li>User Session: Write Session data into ElastiCache<ul><li>User in another instance could still be logged in</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185153.png"></p><ul><li>Redis vs Memcahed<ul><li>Redis: Read Replicas, High Availiablity, Backup and restore (éå¸¸é‡è¦)</li><li>Memcached: Not High Availiablity, No Backup, Have Risk to Lose Data, Multi-threaded</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185310.png"></p><hr><h4 id="ElastiCache-SAA"><a href="#ElastiCache-SAA" class="headerlink" title="ElastiCache SAA"></a>ElastiCache SAA</h4><ul><li>ElastiCache supports IAM Authentication for Redis</li><li>Memcached supports SASL-based authentication</li><li>IAM Database Authentication does not support Oracle</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200638.png"></p><ul><li>Patterns for ElastiCache<ul><li>Lazy Loading, Write Through, Session Store</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200822.png"></p><ul><li>ElastiCache Use Case<ul><li>Gaming Leaderboards (ç”¨ Redis çš„ Sorted Sets, é‡è¦)</li><li>Manage and store session data</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200907.png"></p><hr><h3 id="8-Route-53"><a href="#8-Route-53" class="headerlink" title="8. Route 53"></a>8. Route 53</h3><h4 id="Whatâ€™s-DNS"><a href="#Whatâ€™s-DNS" class="headerlink" title="Whatâ€™s DNS"></a>Whatâ€™s DNS</h4><ul><li>Translate hostname into IP address<ul><li><a href="http://www.google.com/">www.google.com</a> &#x3D; 172.217.18.36</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213136.png"></p><hr><h4 id="AWS-Route-53"><a href="#AWS-Route-53" class="headerlink" title="AWS Route 53"></a>AWS Route 53</h4><ul><li>User can update the DNS records (High available, scalable)</li><li>Route 53 is a Domain Registrar</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213527.png"></p><ul><li>Route 53 Records:<ul><li>Domain Name, Record Type, Value, Routing Policy, TTL</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213613.png"></p><ul><li>Route 53 Record Types<ul><li>A: IPv4</li><li>AAAA: IPv6</li><li>CNAME: Map hostname to another hostname</li><li>NS: Name Servers for the Hosted Zone</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213753.png"></p><ul><li>Route 53: Hosted Zones<ul><li>Public Hosted Zones: Public domain name</li><li>Private Hosted Zones: Private domain name (VPC)</li></ul></li></ul><blockquote><p>æ³¨æ„, DNS hostnames and DNS resolution are required settings for private hosted zones</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234126.png"></p><ul><li>GoDaddy + Route 53 (As DNS Service Provider)<ul><li>Create a Public Hosted Zone and update the 3rd party Registrar NS records</li></ul></li><li>Route 53 Health Check<ul><li>å¦‚æœ ELB å‡ºé—®é¢˜, å°±å»æ‰¾ Route 53 Health Check</li></ul></li></ul><hr><h4 id="Route-53-TTL"><a href="#Route-53-TTL" class="headerlink" title="Route 53 TTL"></a>Route 53 TTL</h4><ul><li>TTL: Time To Live (ç”Ÿå­˜æ—¶é—´)<ul><li>How long the value should be cached (åç«¯æ›´æ–°ä¸ä»£è¡¨ cache æ›´æ–°äº†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232659.png"></p><hr><h4 id="CNAME-vs-Alias"><a href="#CNAME-vs-Alias" class="headerlink" title="CNAME vs Alias"></a>CNAME vs Alias</h4><ul><li>CNAME: Point a hostname to another hostname<ul><li>ä» acme.example.com åˆ° zenith.example.org æˆ–è€… example.com åˆ° example.net</li></ul></li><li>Alias: Point a hostname to an AWS Resource (å¯¹è±¡æ˜¯ CloudFront, S3 è¿™äº›)<ul><li>ä» covid19survey.com åˆ° <a href="http://www.covid19survey.com/">www.covid19survey.com</a></li><li>ä» app.mydomain.com åˆ° app.amazonaws.com</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233313.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233425.png"></p><hr><h4 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h4><ul><li>Health Checks are only for public resources</li><li>Health Check æ£€æµ‹: Endpoints, å…¶ä»– Health Checks, CloudWatch Alarms</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000106.png"></p><hr><h4 id="Routing-Policy-Simple"><a href="#Routing-Policy-Simple" class="headerlink" title="Routing Policy (Simple)"></a>Routing Policy (Simple)</h4><ul><li>Define how Route 53 responds to DNS queries</li><li>ä¸€å…± 7 ç§ Routing Policies</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234623.png"></p><ul><li>Simple: Route traffic to a single resource<ul><li>If multiple values returned, a random one is chosen by client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234350.png"></p><hr><h4 id="Routing-Policy-Weighted"><a href="#Routing-Policy-Weighted" class="headerlink" title="Routing Policy (Weighted)"></a>Routing Policy (Weighted)</h4><ul><li>Weighted: Control the % of the request go to each resource</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234856.png"></p><hr><h4 id="Routing-Policy-Latency"><a href="#Routing-Policy-Latency" class="headerlink" title="Routing Policy (Latency)"></a>Routing Policy (Latency)</h4><ul><li>Latency: Redirect to the resource that has the least latency close to us</li><li>Latency is based on traffic between users and AWS Regions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235654.png"></p><hr><h4 id="Routing-Policy-Failover"><a href="#Routing-Policy-Failover" class="headerlink" title="Routing Policy (Failover)"></a>Routing Policy (Failover)</h4><ul><li>Failover: Have a Primary Instance and a Secondary Instance (é‡è¦)<ul><li>When failover, switch to Secondary Instance</li></ul></li><li>æ³¨æ„, å½“é—®åˆ° failover çš„æ—¶å€™, é€‰æ‹©çš„æ˜¯ active-passive failover routing policy<ul><li>æ²¡æœ‰ä»€ä¹ˆ active-active, åªæœ‰ active-passive</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150940.png"></p><hr><h4 id="Routing-Policy-Geolocation"><a href="#Routing-Policy-Geolocation" class="headerlink" title="Routing Policy (Geolocation)"></a>Routing Policy (Geolocation)</h4><ul><li>Geolocation: Routing based on user location<ul><li>Need to create a â€œDefaultâ€ record</li><li>Use cases: website localization, restrict content distribution ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151650.png"></p><hr><h4 id="Routing-Policy-Geoproximity"><a href="#Routing-Policy-Geoproximity" class="headerlink" title="Routing Policy (Geoproximity)"></a>Routing Policy (Geoproximity)</h4><ul><li>Geoproximity: Route traffic to resource based on geolocation<ul><li>But have the ability to shift more traffic to resource based on bias (é‡è¦)</li><li>å¯ä»¥åšåˆ° route more traffic or less</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152310.png"></p><hr><h4 id="Routing-Policy-IP-Based"><a href="#Routing-Policy-IP-Based" class="headerlink" title="Routing Policy (IP-Based)"></a>Routing Policy (IP-Based)</h4><ul><li>IP-Based: Routing based on clientâ€™s IP address<ul><li>Provide a list of CIDRs for your client</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153711.png"></p><hr><h4 id="Routing-Policy-Multi-Value"><a href="#Routing-Policy-Multi-Value" class="headerlink" title="Routing Policy (Multi-Value)"></a>Routing Policy (Multi-Value)</h4><ul><li>Multi-Value: Route traffic to multiple resources<ul><li>Not a subsitute for ELB</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153842.png"></p><hr><h3 id="9-Beanstalk"><a href="#9-Beanstalk" class="headerlink" title="9. Beanstalk"></a>9. Beanstalk</h3><h4 id="Instantiate-App"><a href="#Instantiate-App" class="headerlink" title="Instantiate App"></a>Instantiate App</h4><ul><li>EC2 Instance<ul><li>Golden AMI: Install all applications beforehand and launch EC2 Instance</li><li>User Data: Dynamic configuration (è®°ä½æ˜¯ dynamic)</li></ul></li><li>RDS Database: Restore from a snapshot (Data &amp; Schema ready)</li><li>EBS Volume: Restore from a snapshot</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173401.png"></p><hr><h4 id="Elastic-Beanstalk"><a href="#Elastic-Beanstalk" class="headerlink" title="Elastic Beanstalk"></a>Elastic Beanstalk</h4><ul><li>åªéœ€è¦è´Ÿè´£ Code, å…¶ä»–éƒ½ç”± AWS è´Ÿè´£</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210323.png"></p><ul><li>Web Server Tier vs. Worker Tier<ul><li>ä¸€ä¸ªç®¡ Web Server, å¦ä¸€ä¸ªå¤„ç† Process (SQS, SNS ç­‰ç­‰)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img210711.png"></p><hr><h3 id="10-AWS-S3"><a href="#10-AWS-S3" class="headerlink" title="10. AWS S3"></a>10. AWS S3</h3><h4 id="AWS-S3"><a href="#AWS-S3" class="headerlink" title="AWS S3"></a>AWS S3</h4><ul><li>S3 Buckets (S3 æ˜¯ Global çš„, ä½†æ˜¯ Bucket æ˜¯ Regional çš„)<ul><li>Store objects (files) in â€œbucketsâ€</li><li>Buckets must have globally unique name (åå­—å¿…é¡»ç‹¬ç‰¹)</li><li>Buckets are defined at region level</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171839.png"></p><ul><li>Objects (files) have a key, max object size is 5TB</li><li>The key is the FULL path (prefix + object name)</li><li>å¦‚æœä¸Šä¼ è¶…è¿‡ 5 GB, å°±è¦ç”¨ Multi-Part Upload (è¿˜æœ‰ S3 Transfer Acceleration)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172025.png"></p><ul><li>S3 sync command: Uses the CopyObject APIs to copy objects between S3 buckets</li><li>S3 always return the lastest version of the object (é‡è¦)</li><li>S3 æ²¡åŠæ³•åŠ å¯† metadata</li><li>S3 æ˜¯ serverless çš„</li><li>å¦‚æœé‡åˆ°éœ€è¦å¤„ç† static content çš„, å°±ä¸€å®šæ˜¯ S3 + CloudFront (é‡è¦)</li><li>å¦‚æœé—®åˆ° S3 è€Œä¸”æ˜¯å…³äºå›¾ç‰‡ä¸Šä¼ , é€‰æ‹© S3 Event Notification, ä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imglifecycle-transitions-v2.png"></p><ul><li>å¦‚æœå‘ç° S3 çš„ä¼ è¾“åŠŸèƒ½å‡ºé—®é¢˜, é‚£ä¹ˆå°±ç»™ S3 bucket åŠ ä¸Š prefix</li><li>æ³¨æ„, S3 å’Œ Database æ˜¯ä¸æ²¾è¾¹çš„, S3 ä¸æ˜¯æ•°æ®åº“</li></ul><blockquote><p>By default, an Amazon S3 object is owned by the AWS account that uploaded it. This is true even when the bucket is owned by another account (é‡è¦)</p></blockquote><ul><li>Host åœ¨ S3 ä¸Šé¢çš„ç½‘ç«™ä¸€èˆ¬æ˜¯ä»¥ä¸‹ä¸¤ç§åç¼€ (dash Region æˆ–è€… dot Region)<ul><li>s3-website dash (-) Region â€ <a href="http://bucket-name.s3-website.region.amazonaws.com/">http://bucket-name.s3-website.Region.amazonaws.com</a></li><li>s3-website dot (.) Region â€ <a href="http://bucket-name.s3-website-region.amazonaws.com/">http://bucket-name.s3-website-Region.amazonaws.com</a></li></ul></li></ul><hr><h4 id="S3-Bucket-Policy"><a href="#S3-Bucket-Policy" class="headerlink" title="S3 Bucket Policy"></a>S3 Bucket Policy</h4><ul><li>User-Based Security<ul><li>IAM Policies: Which API calls should be allowed for a user from IAM (é‡è¦)</li></ul></li><li>Resource-Based Security<ul><li>Bucket Policies: Bucket rules (æ¯”å¦‚è®© Object public, é‡è¦)</li><li>Object Access Control List (ACL)</li><li>Bucket Access Control List (ACL)</li></ul></li><li>Encryption: Encrypt objects in S3 with encryption keys</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173050.png"></p><ul><li>S3 Bucket Policies (JSON based policies)<ul><li>Resoruces: buckets and objects</li><li>Effect: Allow &#x2F; Deny</li><li>Actions: API to Allow or Deny</li><li>Principal: The account or user to apply the policy to</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173325.png"></p><hr><h4 id="S3-Versioning"><a href="#S3-Versioning" class="headerlink" title="S3 Versioning"></a>S3 Versioning</h4><ul><li>Enabled at the bucket level (Default is null)</li><li>Best pratice to version the buckets (å¯ä»¥ roll back, å¯ä»¥é˜²æ­¢è¯¯åˆ , é‡è¦)<ul><li>å¯ä»¥é˜²æ­¢ accidental deletion of objects</li></ul></li><li>Once version-enable a bucket, it can never return to an unversioned state (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174246.png"></p><hr><h4 id="S3-Replication-CRR-amp-SRR"><a href="#S3-Replication-CRR-amp-SRR" class="headerlink" title="S3 Replication (CRR &amp; SRR)"></a>S3 Replication (CRR &amp; SRR)</h4><ul><li>CRR: Cross Region Replication (compliance, lower latency access)</li><li>SRR: Same Region Replication (create test environment)<ul><li>Must enable Versioning</li><li>The Copying is asynchronous</li><li>Must give IAM permissions to S3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174840.png"></p><ul><li>Only new objects are replicated, existing objects need S3 Batch Replication<ul><li>ä¹Ÿå°±æ˜¯è¯´åªæœ‰æ–°çš„ object ä¼šè¢« Replicate, è€çš„ object è¦ S3 Batch Replication</li></ul></li><li>No â€œchainingâ€ in replication<ul><li>æ¯”å¦‚æŠŠ A å¤åˆ¶åˆ° B å’Œ C, éœ€è¦ A å¤åˆ¶åˆ° B å’Œ A å¤åˆ¶åˆ° C</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175004.png"></p><hr><h4 id="S3-Storage-Classes"><a href="#S3-Storage-Classes" class="headerlink" title="S3 Storage Classes"></a>S3 Storage Classes</h4><ul><li>ä¸€å…± 7 ç§ Storage Class: General + 2 IA + 3 Glacier + Intelligent</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175742.png"></p><ul><li>S3 Standard - General Purpose<ul><li>Used for frequently accessed data (æœ€å¸¸è§)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175932.png"></p><ul><li>S3 Infrequent Access (Standard IA &amp; One Zone IA)<ul><li>For data is less frequent access but require rapid access when needed (é‡è¦)</li><li>Lower cost than Standard</li><li>ä» Standard è½¬åˆ° One Zone IA æœ€å°‘è¦ 30 å¤©</li><li>One Zone IA ä¸æ˜¯ High Availability çš„é€‰æ‹© (æ³¨æ„, å› ä¸º AZ ä¼š down)</li><li>å¦‚æœé‡åˆ° access is always required å°±ä¸èƒ½é€‰ One Zone IA, å› ä¸º AZ å¯èƒ½ä¼š down</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180147.png"></p><ul><li>S3 Glacier Storage Classes (Archive ä¸“ç”¨)<ul><li>Low-cost object storage for archiving &#x2F; backup</li><li>Price: storage + retrieval</li><li>S3 Glacier Instant Retrieval: Glacier é‡Œæœ€å¿«ä½†ä¹Ÿæœ€è´µ</li><li>S3 Glacier Flexible Retrieval: ä¸‰ç§æ¨¡å¼ (Expedited åŠ æ€¥, Standard, Bulk æ‰¹é‡)</li><li>S3 Glacier Deep Archive: å­˜çš„æ—¶é—´æœ€ä¹…, ä¸¤ç§æ¨¡å¼ (Standard, Bulk), 48 å°æ—¶ retrieval</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180642.png"></p><ul><li>S3 Intelligent Tiering<ul><li>Move objects automatically between Access Tiers based on usage</li><li>å°±æ˜¯è‡ªåŠ¨å¸®ä½ æŠŠ Object ç§»åˆ°ä¸åŒçš„ Storage Class é‡Œ</li><li>Intelligent Tier æ˜¯åœ¨ Standard å’Œ Standard IA ä¸‹é¢çš„, ä¸èƒ½ä»ä¸‹å¾€ä¸Šè½¬ç§»</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180806.png"></p><hr><h3 id="11-AWS-S3-Advance"><a href="#11-AWS-S3-Advance" class="headerlink" title="11. AWS S3 Advance"></a>11. AWS S3 Advance</h3><h4 id="S3-Lifecycle-Rules"><a href="#S3-Lifecycle-Rules" class="headerlink" title="S3 Lifecycle Rules"></a>S3 Lifecycle Rules</h4><ul><li>Transition objects between storage classes (æ¯”å¦‚ä» IA åˆ° Glacier)<ul><li>Transition éœ€è¦ Lifecycle Rules (é‡è¦)</li></ul></li><li>æ¯”å¦‚ä» Snowball åˆ° Glacier å°±éœ€è¦ Lifecycle Rule</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235516.png"></p><ul><li>Transition Actions: Configure objects to transition to another storage class (è½¬ç§»)</li><li>Expiration Actions: Configure objects to expire after some time (åˆ é™¤)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235639.png"></p><ul><li>S3 Analytics: Help decide when to transition objects to the right storage class</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000151.png"></p><hr><h4 id="S3-Requester-Pays"><a href="#S3-Requester-Pays" class="headerlink" title="S3 Requester Pays"></a>S3 Requester Pays</h4><ul><li>The requester pays the cost of the request intead of the bucket owner<ul><li>åè€Œæ˜¯ç”¨æˆ·ä»˜é’±, ä½†æ˜¯ç”¨æˆ·å¾—æ˜¯ AWS ç”¨æˆ·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000532.png"></p><hr><h4 id="S3-Event-Notifications"><a href="#S3-Event-Notifications" class="headerlink" title="S3 Event Notifications"></a>S3 Event Notifications</h4><ul><li>Automatically react to certain event happened in S3 (æ¯”å¦‚å›¾ç‰‡ä¸Šä¼ )<ul><li>Need to have IAM Permissions</li><li>S3 Event Notification çš„ destination æ˜¯ SQS, SNS, Lambda (è®°ä½)</li></ul></li><li>å¤§éƒ¨åˆ†å’Œ S3 äº‹ä»¶ç›¸å…³çš„éƒ½æ˜¯ S3 Event Notification, è€Œä¸æ˜¯ EventBridge (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000725.png"></p><hr><h4 id="S3-Performance"><a href="#S3-Performance" class="headerlink" title="S3 Performance"></a>S3 Performance</h4><ul><li>For Upload ä¸Šä¼  (é‡è¦)<ul><li>Multi-Part Upload: å½“ä¸Šä¼ æ–‡ä»¶å¤§äº 5 GB, å¯ä»¥ parallelize uploads</li><li>S3 Transfer Acceleration: å°†æ–‡ä»¶ä¼ åˆ° AWS edge location, å¯ä»¥å’Œ Multi-Part ä¸€èµ·ç”¨</li><li>S3 Transfer Acceleration (S3TA) can speed up content transfers to and from S3 (é’ˆå¯¹å…³äº S3 çš„ä¸Šä¼ å’Œä¸‹è½½)</li><li>æ³¨æ„, S3 Transfer Acceleration æ²¡åŠæ³• copy object between buckets</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001645.png"></p><ul><li>For Download ä¸‹è½½<ul><li>S3 Byte-Range Fetches: Parallelize GETs, retrieve partial data (æ‹¿éƒ¨åˆ†æ•°æ®, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001828.png"></p><hr><h4 id="S3-Select-amp-Glacier-Select"><a href="#S3-Select-amp-Glacier-Select" class="headerlink" title="S3 Select &amp; Glacier Select"></a>S3 Select &amp; Glacier Select</h4><ul><li>S3 Select ä½¿ç”¨ SQL æ¥åš server-side filtering, è¿‡æ»¤ä»è€Œå‡å°‘æ•°æ®é‡</li><li>400% Faster, 80% Cheaper (æ€§èƒ½ä¼˜åŒ–)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002050.png"></p><hr><h4 id="S3-Batch-Operations"><a href="#S3-Batch-Operations" class="headerlink" title="S3 Batch Operations"></a>S3 Batch Operations</h4><ul><li>Perform bulk operations (æ‰¹é‡æ“ä½œ) on existing S3 objects<ul><li>ä¾‹å¦‚ encrypt all un-encrypted objects (åŠ å¯†æ‰€æœ‰æ²¡æœ‰åŠ å¯†çš„æ–‡ä»¶)</li></ul></li><li>åœ¨å¤„ç† Batch ä¹‹å‰, ç”¨ S3 Inventory to get object list and use S3 Select to filter objects</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022334.png"></p><hr><h3 id="12-AWS-S3-Security"><a href="#12-AWS-S3-Security" class="headerlink" title="12. AWS S3 Security"></a>12. AWS S3 Security</h3><h4 id="S3-Encryption"><a href="#S3-Encryption" class="headerlink" title="S3 Encryption"></a>S3 Encryption</h4><ul><li>ä¸€å…±æœ‰ 4 ç§æ–¹æ³• (SSE-S3 å…è´¹, SSE-KMS è¦é’±)<ul><li>Server-Side Encryption (SSE-S3, SSE-KMS, SSE-C)</li><li>Client-Side Encryption (å¦‚æœç”¨æˆ·å·²ç»æœ‰ encryption method)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223133.png"></p><ul><li>Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3)<ul><li>Enabled by default for new buckets &amp; objects</li><li>SSE-S3 çš„ header æ˜¯ x-amz-server-side-encryption</li><li>ä½¿ç”¨ SSE-S3, æ¯ä¸€ä¸ª Object éƒ½æ˜¯ç”± unique key æ¥ encrypt çš„</li><li>SSE-S3 ä½¿ç”¨ 256-bit Advanced Encryption Standard (AES-256)</li><li>SSE-S3 æ˜¯æ²¡æœ‰ automatic key rotation çš„, è¦ç”¨ SSE-KMS (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223242.png"></p><ul><li>Server-Side Encryption with KMS Keys stored in AWS KMS (SSE-KMS)<ul><li>User control + audit key usage in CloudTrail (å¯ä»¥ç®¡ç† key rotation)</li><li>SSE-KMS çš„ header æ˜¯ x-amz-server-side-encryption + aws:kms</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223417.png"></p><ul><li>Server-Side Encryption with Customer-Provided Keys (SSE-C)<ul><li>ç”¨æˆ·è‡ªå·±æœ‰ keys, AWS will not store the key, HTTPS must be used</li><li>å½“é—®é¢˜ä¸­æåˆ°ç”¨æˆ·éœ€è¦ä½¿ç”¨è‡ªå·±çš„ key, ä½†æ˜¯æ‰“ç®—åœ¨ AWS ç«¯åš encryption</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223602.png"></p><ul><li>Client-Side Encryption<ul><li>User fully manages the keys and encryption cycle</li><li>æ•°æ®åœ¨é€åˆ° AWS ä¹‹å‰å°±æ˜¯åŠ å¯†å¥½çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223715.png"></p><ul><li>Encryption in Transit (SSL&#x2F;TLS)<ul><li>å¯ä»¥ç”¨ aws:SecureTransport æ¥ enforce (ä¸è¿‡æœ‰ SSL åŸºæœ¬ä¸Šå°±æ˜¯ HTTPS)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223811.png"></p><hr><h4 id="S3-CORS"><a href="#S3-CORS" class="headerlink" title="S3 CORS"></a>S3 CORS</h4><ul><li>CORS: Cross-Origin Resource Sharing (è·¨åŸŸé—®é¢˜)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224630.png"></p><ul><li>S3 CORS (é‡è¦)<ul><li>A client makes a cross-origin request on S3 bucket, need the correct CORS headers</li><li>Can allow specific origin or *</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224951.png"></p><hr><h4 id="S3-MFA-Delete"><a href="#S3-MFA-Delete" class="headerlink" title="S3 MFA Delete"></a>S3 MFA Delete</h4><ul><li>MFA Delete: é˜²æ­¢ä¸å°å¿ƒåˆ é™¤æ–‡ä»¶, ç”¨æˆ·éœ€è¦å…ˆéªŒè¯èº«ä»½ (é‡è¦)<ul><li>To use MFA Delete: Versioning must be enabled</li></ul></li><li>Only the bucket owner (root user) can enable&#x2F;disable MFA Delete (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225415.png"></p><hr><h4 id="S3-Access-Logs"><a href="#S3-Access-Logs" class="headerlink" title="S3 Access Logs"></a>S3 Access Logs</h4><ul><li>Any request made to S3 will be logged to another S3 bucket (æ•°æ®åˆ†æ)<ul><li>å¯ä»¥ä½œä¸º Data Analysis çš„å·¥å…·</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230251.png"></p><hr><h4 id="S3-Pre-signed-URLs"><a href="#S3-Pre-signed-URLs" class="headerlink" title="S3 Pre-signed URLs"></a>S3 Pre-signed URLs</h4><ul><li>Have URL expiration (è¿‡æœŸ)<ul><li>ç”¨åœ¨ Private Bucket ä¸Š, ä¸€æ®µæ—¶é—´å URL è¿‡æœŸ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230702.png"></p><hr><h4 id="Glacier-Vault-Lock-amp-S3-Object-Lock"><a href="#Glacier-Vault-Lock-amp-S3-Object-Lock" class="headerlink" title="Glacier Vault Lock &amp; S3 Object Lock"></a>Glacier Vault Lock &amp; S3 Object Lock</h4><ul><li>S3 Glacier Vault Lock<ul><li>Adopt a WORM (Write Once Read Many), ä¿¡æ¯ä¸€æ—¦å†™å…¥å°±æ— æ³•ä¿®æ”¹</li><li>The object canâ€™t be deleted (æ— æ³•ä¿®æ”¹)</li></ul></li><li>å¯ä»¥ç”¨ Glacier Vault Lock å‚¨å­˜ sensitive æ•°æ®, ç„¶åç”¨ Vault Lock Policy å»ç®¡ç†</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230941.png"></p><ul><li>S3 Object Lock (Must have Versioning, é‡è¦)<ul><li>Block an object version deletion for an amount of time (æœ‰æ—¶é™)</li><li>ä¸¤ä¸ª Retention mode (é‡è¦)<ul><li>Compliance: æ‰€æœ‰äººéƒ½æ²¡æ³•åˆ , Root user ä¹Ÿä¸è¡Œ</li><li>Governance: æœ‰äº›äººå¯ä»¥åˆ , æœ‰æƒé™çš„äººå¯ä»¥</li></ul></li><li>Legal Hold: é˜²æ­¢ Object Version è¢«æ”¹, é™¤éä½ è‡ªå·±æŠŠ Legal Hold ç§»é™¤ (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231203.png"></p><hr><h4 id="S3-Access-Points"><a href="#S3-Access-Points" class="headerlink" title="S3 Access Points"></a>S3 Access Points</h4><ul><li>Access Points simplify security management for S3 Buckets (æ ¹æ®ç”¨æˆ·å±æ€§)</li><li>Each Access Point: DNS name + Access Point Policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231500.png"></p><hr><h4 id="S3-Object-Lambda"><a href="#S3-Object-Lambda" class="headerlink" title="S3 Object Lambda"></a>S3 Object Lambda</h4><ul><li>Use AWS Lambda to change object before retrieve by caller (åœ¨åˆ°è¾¾ caller ä¹‹å‰)<ul><li>ç”¨é€”: å¯ä»¥ç»™å›¾ç‰‡æ‰“æ°´å°</li></ul></li><li>éœ€è¦ S3 Access Point å’Œ S3 Object Lambda Access Points</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231810.png"></p><hr><h3 id="13-CloudFront-amp-AWS-Global-Accelerator"><a href="#13-CloudFront-amp-AWS-Global-Accelerator" class="headerlink" title="13. CloudFront &amp; AWS Global Accelerator"></a>13. CloudFront &amp; AWS Global Accelerator</h3><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><ul><li>Content Delivery Network (CDN), å¯ä»¥ serve static &amp; dynamic content<ul><li>Improve read performance, content is cached at the edge</li></ul></li><li>å¯ä»¥é˜²æ­¢ DDoS protection (æ­é… AWS Shield), å¯ä»¥æ ¹æ® content type æ¥ route, å¯ä»¥æŒ‡å®š primary &amp; secondary origins æ¥åš High Availiability &amp; Failover</li><li>CloudFront Origins: S3 Bucket (OAC) æˆ–è€… Custom Origin (HTTP)<ul><li>OAC: Origin Access Control (é‡è¦, å¦‚æœæ¶‰åŠåˆ° S3 çš„é—®é¢˜)</li></ul></li><li>å¦‚æœé—®åˆ° CloudFront è€Œä¸”éœ€è¦ encryption, é€‰æ‹© field level encryption (ä¸æ˜¯ KMS)<ul><li>Field-level encryption allows you to enable your users to securely upload sensitive information to your web servers.</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232701.png"></p><ul><li>CloudFront vs S3 Cross Region Replication<ul><li>CloudFront: ä½¿ç”¨ global edge network, æœ‰ TTL, ç”¨äº static content</li><li>S3 Cross Region Replication (CRR): æ¯ä¸ª Region éƒ½è¦è®¾ç½®, ä½†æ˜¯æ²¡æœ‰ TTL, ç”¨äº dynamic content (updated in near real-time, åªè¯»)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233016.png"></p><ul><li>Price Classes: ä¸åŒåœ°åŒºçš„ä»·æ ¼ä¸ä¸€æ ·<ul><li>å¯ä»¥ç”¨æ¥ cost reduction (é™ä½ä»·æ ¼)</li></ul></li><li>CloudFront å…è®¸ Proxy methods å’Œ Dynamic content è·³è¿‡ regional edge cache</li><li>é™¤äº† WAF å¯ä»¥å» block IP, è¿˜å¯ä»¥ä½¿ç”¨ OAI (origin access identity, é‡è¦)<ul><li>OAI ä¹Ÿå¯ä»¥ç”¨æ¥ secure communication between CloudFront &amp; S3</li></ul></li><li>å¯ä»¥ç”¨ CloudFront signed URLs å’Œ CloudFront signed cookies æ¥ restrict access to documents (æ¯”å¦‚ subscription)</li><li>Can configure CloudFront to require HTTPS from clients (å¯ä»¥ç”¨ CloudFront è¦æ±‚ client å¿…é¡»ä½¿ç”¨ HTTPS)</li></ul><hr><h4 id="CloudFront-Geo-Restriction"><a href="#CloudFront-Geo-Restriction" class="headerlink" title="CloudFront Geo Restriction"></a>CloudFront Geo Restriction</h4><ul><li>Allowlist &amp; Blocklist (é’ˆå¯¹ IP, å›½å®¶è¿›è¡Œè®¿é—®é™åˆ¶)<ul><li>CloudFront Geo Restriction æ²¡åŠæ³•å’Œ VPC ä¸€èµ·ä½¿ç”¨</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233638.png"></p><hr><h4 id="CloudFront-Cache-Invalidation"><a href="#CloudFront-Cache-Invalidation" class="headerlink" title="CloudFront Cache Invalidation"></a>CloudFront Cache Invalidation</h4><ul><li>è®© CloudFront è·³è¿‡ TTL ç«‹å³æ›´æ–°<ul><li>æ¯”å¦‚ä½ æ›´æ–°äº†åç«¯, ä½†æ˜¯ CloudFront ä¸ä¼šç«‹å³æ›´æ–°, éœ€è¦ CloudFront Invalidation æ¥è·³è¿‡ TTL æ¥ç«‹å³æ›´æ–°</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234007.png"></p><hr><h4 id="AWS-Global-Accelerator"><a href="#AWS-Global-Accelerator" class="headerlink" title="AWS Global Accelerator"></a>AWS Global Accelerator</h4><ul><li>åˆ©ç”¨ AWS internal network to route application<ul><li>Provide 2 global static anycast IPs (é‡è¦)</li><li>Improve availability and performance of the applications (globally)</li></ul></li><li>Global Accelerator improves performance for applications over TCP or UDP</li><li>Global Accelerator has automatic failover</li><li>Global Accelerator is more expensive as it adds an extra layer of infrastructure (å¯¹æ¯” CloudFront ä¸æ˜¯ä¸€ä¸ª cost-effective çš„é€‰æ‹©)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234527.png"></p><ul><li>AWS Global Accelerator vs CloudFront<ul><li>CloudFront: Content is served at edge, æ¯”å¦‚å›¾ç‰‡å’Œè§†é¢‘ (cacheable), Dynamic content such as API acceleration &amp; dynamic site delivery</li><li>Global Accelerator: é€‚åˆ TCP æˆ–è€… UDP, æ¯”å¦‚æ¸¸æˆå’Œ IoT (static IP)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000939.png"></p><blockquote><p>AWS Global Accelerator is a network service that can provide a global traffic management solution. By creating a standard accelerator in AWS Global Accelerator, you can guide user traffic to the endpoint closest to them, thereby improving the performance and availability of the application.</p></blockquote><hr><h3 id="14-AWS-Storage-Extra"><a href="#14-AWS-Storage-Extra" class="headerlink" title="14. AWS Storage Extra"></a>14. AWS Storage Extra</h3><h4 id="AWS-Snow-Family"><a href="#AWS-Snow-Family" class="headerlink" title="AWS Snow Family"></a>AWS Snow Family</h4><ul><li>æ•´ä¸ª Snow Family éƒ½æ˜¯ç¡¬ä»¶å½¢å¼</li><li>Data migration (in &amp; out AWS) &amp; Edge Computing (process data at edge)<ul><li>Snowcone (ä½“ç§¯å°, é€‚åˆå¸¦åˆ°ç‰¹æ®Šç¯å¢ƒ, æ²¡æœ‰ Snowball å†…å­˜å¤§)</li><li>Snowball Edge (Storage Optimized å’Œ Compute Optimized, æ¨èå¤„ç† 10 - 100 TB)<ul><li>Compute Optimized æ˜¯æ”¯æŒ storage clustering çš„</li><li>Terabytes, low costs, limited time &#x3D; AWS Snowball devices</li></ul></li><li>Snowmobile (ä¸ç®—åœ¨ Edge Computing é‡Œ, æ•°æ®ä¼ è¾“æœ€å¤§, æ¨èå¤„ç† 10 PB ä»¥ä¸Š)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200544.png"></p><ul><li>Edge Location: æ¯”å¦‚æµ·ä¸Šæˆ–è€…çŸ¿æ´é‡Œ, æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹<ul><li>æ‰€ä»¥éœ€è¦ Edge Computing å’Œ Snow Family</li></ul></li><li>AWS OpsHub: ç”¨æ¥ç®¡ç† AWS Snow Family</li><li>Snowball to Glacier: Use S3 lifecycle policy (Snowball å…¼å®¹ S3 ä½†æ˜¯ Glacier ä¸è¡Œ, é‡è¦)<ul><li>æ³¨æ„, è¿™é‡Œçš„ Glacier æŒ‡çš„æ˜¯æ•´ä¸ª Glacier Family (eg. Glacier Deep Archive)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201918.png"></p><hr><h4 id="AWS-FSx"><a href="#AWS-FSx" class="headerlink" title="AWS FSx"></a>AWS FSx</h4><ul><li>Third party high-performance file systems on AWS (ç¬¬ä¸‰æ–¹æ–‡ä»¶ç³»ç»Ÿ)<ul><li>FSx for Windows: Window file system, support SMB &amp; Windows NTFS</li><li>FSx for Lustre (Linux): å¯ä»¥ maximize IOPS, é€‚åˆ HPC, å¯ä»¥å’Œ S3 Integrate</li><li>FSx for NetApp ONTAP: File system for NFS, SMB, iSCSI</li><li>FSx for OpenZFS: OpenZFS file system (å’Œå®ƒåå­—ä¸€æ ·)</li></ul></li></ul><blockquote><p>FSx for Lustre provides the ability to both process the â€˜hot dataâ€™ in a parallel and distributed fashion as well as easily store the â€˜cold dataâ€™ on Amazon S3.</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202205.png"></p><ul><li>ä¸¤ç§ Deployment Options<ul><li>Scratch File System: Temporary storage, data not replicated</li><li>Persistent File System: Long term storage, data replicated (Same AZ, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202555.png"></p><hr><h4 id="AWS-Storage-Gateway"><a href="#AWS-Storage-Gateway" class="headerlink" title="AWS Storage Gateway"></a>AWS Storage Gateway</h4><ul><li>Bridge between On-Premise data and cloud data (Hybrid cloud, é‡è¦)<ul><li>On-Premise å’Œ AWS Cloud ä¹‹é—´çš„æ¡¥æ¢ (ä¿ç•™ä» On-Premise å»è®¿é—® AWS æ•°æ®çš„èƒ½åŠ›)</li><li>é‡ç‚¹, Hybrid Cloud, give On-Premise ability to access cloud storage</li></ul></li><li>æåˆ° NFS çš„å°±æ˜¯ File Gateway, é—® S3 å¤§éƒ¨åˆ†éƒ½æ˜¯ File Gateway</li><li>DataSync æ˜¯ç”¨æ¥ç§»æ•°æ®çš„, File Gateway æ˜¯ç”¨æ¥ç»´æŒ access çš„ (é‡è¦)</li><li>File Gateway æ˜¯ file storage, Volume Gateway æ˜¯ block storage (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203211.png"></p><ul><li>ä¸€å…±æœ‰ 4 ç§ Gateway (æ³¨æ„, Storage Gateway æ³›æŒ‡ä¸‹é¢è¿™ 4 ä¸ª Gateway)<ul><li>S3 File Gateway: ä» On-Premise è®¿é—® S3 Buckets (NFS, SMB), file storage</li><li>FSx File Gateway: ä» On-Premise è®¿é—® FSx (SMB, NTFS)</li><li>Volume Gateway: ä» On-Premise è®¿é—® S3 å’Œ EBS (iSCSI), block storage<ul><li>Cached volumes: Access most recent data (eg. logs) å¦‚æœé—®åˆ° S3 çš„è¯</li><li>Stored volumes: Entire dataset is On-Premise, backup at S3</li></ul></li><li>Tap Gateway: ä» On-Premise è®¿é—® Archieved Taps stored in AWS Glacier<ul><li>å¦‚æœé—®é¢˜é‡Œé¢æœ‰ Tap å°±æ˜¯ Tap Gateway</li></ul></li></ul></li></ul><hr><h4 id="AWS-Transfer-Family"><a href="#AWS-Transfer-Family" class="headerlink" title="AWS Transfer Family"></a>AWS Transfer Family</h4><ul><li>Use FTP protocol to transfer files into or out S3 æˆ– EFS<ul><li>æœ‰ä¸‰ç§ Protocols: FTP, FTPS, SFTP (é‡è¦, å¦‚æœé—®åˆ°å…³äº FTP æˆ–è€… SFTP çš„é—®é¢˜)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203933.png"></p><hr><h4 id="AWS-DataSync"><a href="#AWS-DataSync" class="headerlink" title="AWS DataSync"></a>AWS DataSync</h4><ul><li>å¯ä»¥ä» On-Premise æˆ–è€… AWS è½¬ç§»å¤§é‡æ•°æ® (to &amp; from)<ul><li>On-Premise åˆ° AWS S3, EFS, FSx ç­‰ç­‰ (need agent)</li><li>AWS åˆ° AWS (no agent)</li></ul></li><li>Scheduled replication tasks (æ¯”å¦‚æ¯å‘¨äº”éƒ½ä¼š replicate ä¸€æ¬¡)</li><li>File permissions and metadata are perserved (é‡è¦)</li><li>DataSync æ˜¯ç”¨æ¥ç§»æ•°æ®çš„, File Gateway æ˜¯ç”¨æ¥ç»´æŒ access çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204155.png"></p><blockquote><p>AWS DataSync is an online data transfer service that simplifies, automates, and accelerates copying large amounts of data between on-premises storage systems and AWS Storage services, as well as between AWS Storage services.</p></blockquote><hr><h3 id="15-SQS-SNS-Kinesis-Active-MQ"><a href="#15-SQS-SNS-Kinesis-Active-MQ" class="headerlink" title="15. SQS, SNS, Kinesis, Active MQ"></a>15. SQS, SNS, Kinesis, Active MQ</h3><h4 id="AWS-SQS"><a href="#AWS-SQS" class="headerlink" title="AWS SQS"></a>AWS SQS</h4><ul><li>ç”¨æ¥ decouple applications (æ¯”å¦‚å¤„ç†è§†é¢‘, å±äºå¤šå¯¹å¤šæ¨¡å‹)</li><li>SQS scale automatically (Unlimited throughput, unlimited message, can retry)<ul><li>é‡åˆ°è¯´ decouple microservice (ä½†æ˜¯æ²¡æœ‰ 3rd party çš„) å°±æ˜¯ SQS</li></ul></li><li>Standard SQS å…è®¸å°† S3 ä½œä¸º event notification destination, SQS FIFO åˆ™ä¸è¡Œ</li><li>å¦‚æœé‡åˆ° SQS message process failure, é€‰æ‹© DLQ æ¥è§£å†³ (é‡è¦)</li><li>å¦‚æœé‡åˆ°éœ€è¦å¤„ç† high-throughput request-reponse message pattern çš„, é€‰æ‹© temporary queue (é‡è¦)</li><li>å¦‚æœé‡åˆ°éœ€è¦ SQS å» postpone the delivery of new messages, é‚£ä¹ˆå°±æ˜¯ delay queue</li><li>é‡åˆ° parallel é€‰ SQS è€Œä¸æ˜¯ SNS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235912.png"></p><ul><li>å¯ä»¥æœ‰å¾ˆå¤š consumer æ¥åŒæ—¶ parallel å¤„ç† messages<ul><li>Consumer delete messages after processing them (å¤„ç†å®Œå°±åˆ æ‰)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img000504.png"></p><ul><li>SQS Message Visibility Timeout (é‡è¦)<ul><li>Visibility Timeout is high: Consumer crash, re-process take time</li><li>Visibility Timeout is low: Get duplicate (é˜²æ­¢ read duplicate, å¢åŠ  Timeout, é‡è¦)</li><li>Use the ChangeMessageVisibility API call to increase the visibility timeout</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020440.png"></p><ul><li>å½“é‡åˆ° SQS è€Œä¸”éœ€è¦ priority çš„æ—¶å€™, Create two Amazon SQS standard queues, Set up Amazon EC2 instances to prioritize polling</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgpt6-q32-i1.jpg"></p><ul><li>æŠŠ SQS è½¬æˆ FIFO queue<ul><li>Delete the existing SQS and recreate it as FIFO queue</li><li>Make sure the name of the FIFO queue ends with .fifo suffix</li><li>Make sure the throughput for the FIFO queue not exceed 3000 meesage &#x2F; second</li></ul></li></ul><hr><h4 id="SQS-Long-Polling"><a href="#SQS-Long-Polling" class="headerlink" title="SQS Long Polling"></a>SQS Long Polling</h4><ul><li>Decrease latency &amp; decrease API call (å‡å°‘ API è¯·æ±‚, æ›´å¥½çš„ performance)<ul><li>Minimize the cost of using SQS (çœé’±)</li><li>Long Polling ä¸èƒ½å¤„ç† SQS duplicate, è¿˜æ˜¯è¦ç”¨ Visibility Timeout</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003255.png"></p><hr><h4 id="SQS-FIFO-Queue"><a href="#SQS-FIFO-Queue" class="headerlink" title="SQS FIFO Queue"></a>SQS FIFO Queue</h4><ul><li>æŒ‰é¡ºåºä¼ é€’ message (SNS ä¹Ÿå¯ä»¥åšåˆ°)<ul><li>By default, FIFO queues support up to 300 messages per second</li></ul></li><li>å¦‚æœæ²¡æœ‰ GroupID, é‚£åªèƒ½æœ‰ 1 ä¸ª consumer, å¦‚æœæœ‰ GroupID, å¯ä»¥æœ‰å¤šä¸ª consumer</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003507.png"></p><hr><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><ul><li>Send one message to many receivers (å¯ä»¥ç»™ç”¨æˆ·å‘ email)<ul><li>Publisher &amp; Subscriber æ¨¡å‹ (å±äºä¸€å¯¹å¤šæ¨¡å‹)</li><li>Subscriber: SQS, Lambda, Kinesis Data Firehose, HTTPS endpoints, Email</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010634.png"></p><hr><h4 id="Fan-Out-Pattern"><a href="#Fan-Out-Pattern" class="headerlink" title="Fan Out Pattern"></a>Fan Out Pattern</h4><ul><li>Push once in SNS, receive in all SQS (ç”± SNS ä¼ é€’ message ç»™ SQS æ¥æ¥æ”¶)<ul><li>Fully decoupled, no data loss</li><li>å¯ä»¥ç”¨äº message filtering (ä¿¡æ¯è¿‡æ»¤, æ ¹æ®ä¸åŒçš„ filter policy)</li></ul></li><li>Kinesis ä¹Ÿå¯ä»¥ä½¿ç”¨ Fan Out Pattern (ä½¿ç”¨ Shard)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img011026.png"></p><hr><h4 id="AWS-Kinesis"><a href="#AWS-Kinesis" class="headerlink" title="AWS Kinesis"></a>AWS Kinesis</h4><ul><li>Process, ingest, buffer streaming data in real-time (å¤„ç†å®æ—¶æ•°æ®)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150053.png"></p><ul><li>Kinesis Data Streams: Capture, process, store data streams</li><li>Kinesis Data Firehose: Load data streams into AWS data stores (S3, Redshift)</li><li>å½“ Kinesis Data Streams ä½œä¸ºæ•°æ®æºå†™æ•°æ®åˆ° Kinesis Data Firehose æ˜¯ä¸ç”¨ agent çš„</li></ul><blockquote><p>Kinesis Agent cannot write to Amazon Kinesis Firehose for which the delivery stream source is already set as Amazon Kinesis Data Streams</p></blockquote><hr><h4 id="Kinesis-Data-Streams"><a href="#Kinesis-Data-Streams" class="headerlink" title="Kinesis Data Streams"></a>Kinesis Data Streams</h4><ul><li>Have the ability to reprocess &amp; replay stream data (replay, å¤„ç†æ•°æ®, é‡è¦)<ul><li>å¤„ç† real-time data stream, æ¯”å¦‚ clickstreams, transactions, media (é‡‘èæ•°æ®)</li><li>Consumer æœ‰ Lambda, Kinesis Firehose, Kinesis Data Analytics</li><li>Kinesis Data Streams æœ‰åŠ©äºæ¯ç§’ä»å¤šä¸ªæ¥æºè¿ç»­æ”¶é›†æ•° GB çš„æ•°æ®</li></ul></li><li>Once data is inserted in Kinesis, it canâ€™t be deleted (immutability)</li><li>å¦‚æœé—®åˆ° Kinesis Data Stream åŠ ä¸Š SQL, é‚£ä¹ˆç­”æ¡ˆé‡Œä¸€å®šæœ‰ Kinesis Data Analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img014850.png"></p><ul><li>Data share the same partition goes the same shard (æœ‰é¡ºåºçš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151123.png"></p><ul><li>Capacity Mode (Provisioned è®¾ç½®ä¸Šé™, On-Demand è‡ªåŠ¨ scale)<ul><li>Provisioned mode: Choose a number of shards provisioned, scale manually</li><li>On-demand mode: No need to provision or manage capacity (è‡ªåŠ¨)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151507.png"></p><blockquote><p>å¦‚æœé‡åˆ° ProvisionedThroughputExceededException é—®é¢˜, é€‰æ‹© batch messages è§£å†³</p></blockquote><hr><h4 id="Kinesis-Data-Firehose"><a href="#Kinesis-Data-Firehose" class="headerlink" title="Kinesis Data Firehose"></a>Kinesis Data Firehose</h4><ul><li>Kinesis Data Firehose load streaming data into data stores and analytics tools<ul><li>Managed service, auto scaling, serverless, support data transformation</li><li>Kinesis Data Firehose æä¾›å°†æ•°æ®æµä¼ è¿›æ•°æ®å­˜å‚¨æˆ–è€…æ•°æ®åˆ†æçš„åŠŸèƒ½</li></ul></li><li>Firehose çš„å¯¹è±¡æ˜¯ S3, Redshift è¿™ç§ (Serverless, ä¸“é—¨å¤„ç† log æ•°æ®)<ul><li>Firehose ä¸æ”¯æŒ DynamoDB çš„</li></ul></li><li>Near Real Time, è€Œä¸” Firehose åªæ”¯æŒä¸€ä¸ª consumer (dump data in a single data repo)<ul><li>ä½†æ˜¯ä¸è¦è¢« Near Real Time å¿½æ‚ , è¦æ ¹æ®é¢˜ç›®é€‰æ‹© Data Stream æˆ–è€… Data Firehose</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015040.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151812.png"></p><ul><li>Kinesis Data Streams vs Firehose<ul><li>Data Streams: Write custom code, real-time, have data storage, have replay</li><li>Firehose: Fully managed, near real-time, no data storage, no replay</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152247.png"></p><hr><h4 id="Data-ordering-for-Kinesis"><a href="#Data-ordering-for-Kinesis" class="headerlink" title="Data ordering for Kinesis"></a>Data ordering for Kinesis</h4><ul><li>Same key (Partition) will always go to the same shard (æœ‰é¡ºåº)</li><li>ç›¸æ¯”ä¹‹ä¸‹ SQS åªæœ‰ FIFO (é’ˆå¯¹äºéœ€è¦å¤§é‡ consumer)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154939.png"></p><hr><h4 id="AWS-MQ"><a href="#AWS-MQ" class="headerlink" title="AWS MQ"></a>AWS MQ</h4><ul><li>ç®¡ç†ç¬¬ä¸‰æ–¹æ¶ˆæ¯ä»£ç† (Message Broker) è½¯ä»¶<ul><li>RabbitMQ and ActiveMQ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170638.png"></p><hr><h3 id="16-Containers-on-AWS"><a href="#16-Containers-on-AWS" class="headerlink" title="16. Containers on AWS"></a>16. Containers on AWS</h3><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><ul><li>Elastic Container Service (Manage Docker containers on AWS)</li><li>ECS æœ‰ä¸¤ç§ Launch Type: EC2 å’Œ Fargate (Fargate æ˜¯ serverless çš„)</li><li>EC2 Launch Type: Need Provision, éœ€è¦ ECS Agent (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212508.png"></p><ul><li>Fargate Launch Type: Serverless, No Provision (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212546.png"></p><ul><li>IAM Roles for ECS (é‡è¦, æ˜¯ IAM)<ul><li>EC2 Instance Profile: åªé’ˆå¯¹ EC2 Launch Type</li><li>ECS Task Role: æ¯ä¸ª Task éƒ½æœ‰è‡ªå·±çš„ Role (è´Ÿè´£)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212709.png"></p><ul><li>ECS å¯ä»¥å’Œ Load Balancer ä¸€èµ·ç”¨</li><li>ECS å¯ä»¥å’Œ EFS ä¸€èµ·ç”¨ (Fargate + EFS &#x3D; Serverless, ç®¡ç†æ–‡ä»¶)</li></ul><blockquote><p>Amazon ECS with EC2 launch type is charged based on EC2 instances and EBS volumes used. Amazon ECS with Fargate launch type is charged based on vCPU and memory resources that the containerized application requests</p></blockquote><hr><h4 id="ECS-Auto-Scaling"><a href="#ECS-Auto-Scaling" class="headerlink" title="ECS Auto Scaling"></a>ECS Auto Scaling</h4><ul><li>Automatically increase &#x2F; decrease the number of ECS tasks<ul><li>Target Scaling: Scale based on target value for CloudWatch metric</li><li>Step Scaling: Scale based on CloudWatch Alarm</li><li>Scheduled Scaling: Scale based on specific time (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222247.png"></p><hr><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><ul><li>Elastic Container Registry (ECR, ç®¡ç† Docker Image, ä¸æ˜¯ Docker Container)<ul><li>Store and manage Docker images on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img222836.png"></p><hr><h4 id="AWS-EKS"><a href="#AWS-EKS" class="headerlink" title="AWS EKS"></a>AWS EKS</h4><ul><li>Elastic Kubernetes Service (Manage Kubernetes clusters on AWS)<ul><li>Support 2 deployment mode: EC2 &amp; Fargate (å’Œ ECS ä¸€æ ·)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223132.png"></p><ul><li>EKS Data Volumes (éœ€è¦ StorageClass)<ul><li>Leverages a Container Storage Interface (CSI) compliant driver</li><li>æ”¯æŒ EBS, EFS, FSx</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223503.png"></p><ul><li>EKS Node Type (ä¸€å…±ä¸‰ç§)<ul><li>Managed Node Groups (é’ˆå¯¹ EC2 Instance)</li><li>Self-Managed Nodes (è‡ªå·±åˆ›å»º)</li><li>AWS Fargate (ä¸éœ€è¦ç®¡ç†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022321.png"></p><hr><h4 id="AWS-App-Runner"><a href="#AWS-App-Runner" class="headerlink" title="AWS App Runner"></a>AWS App Runner</h4><ul><li>Deploy web application and APIs (Build å’Œ Deploy)</li><li>No infrasture experience required (ä¸éœ€è¦ AWS ç»éªŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img223649.png"></p><hr><h3 id="17-Serverless"><a href="#17-Serverless" class="headerlink" title="17. Serverless"></a>17. Serverless</h3><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>Virtual functions, Serverless, limited by time (short executions, 15 mins)<ul><li>Run on-demand, scaling is automated</li></ul></li><li>Could be Event-Driven, could handle CRON job (Jobs on a repeating schedule)<ul><li>Use EventBridge to trigger Lambda every hour</li></ul></li><li>Lambda æ˜¯æœ‰ account quota (é…é¢é™åˆ¶) çš„, éœ€è¦è”ç³» AWS æ¥æé«˜ä¸Šé™</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img212846.png"></p><ul><li>Lambda Limits (é™åˆ¶)<ul><li>Execution: Memory, Execution Time</li><li>Deployment: Size</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213554.png"></p><blockquote><p>By default, AWS Lambda functions always operate from an AWS-owned VPC and hence have access to any public internet address or public AWS APIs. Once an AWS Lambda function is VPC-enabled, it will need a route through a Network Address Translation gateway (NAT gateway) in a public subnet to access public resources</p></blockquote><hr><h4 id="Lambda-SnapStart"><a href="#Lambda-SnapStart" class="headerlink" title="Lambda SnapStart"></a>Lambda SnapStart</h4><ul><li>å¯¹äº Java 11 ä»¥ä¸Š, Function is invoked from a pre-initialized state</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img213945.png"></p><hr><h4 id="CloudFront-Functions-amp-Lambda-Edge"><a href="#CloudFront-Functions-amp-Lambda-Edge" class="headerlink" title="CloudFront Functions &amp; Lambda@Edge"></a>CloudFront Functions &amp; Lambda@Edge</h4><ul><li>Execute logic at the edge (Edge Function, Serverless)</li><li>ä¸¤ç§æ–¹æ³•: CloudFront Functions, Lambda@Edge (å®ƒä»¬æ”¯æŒçš„è¯­è¨€ä¸åŒ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214215.png"></p><ul><li>CloudFront Functions (Javascript)<ul><li>Native feature of CloudFront, short execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214350.png"></p><ul><li>Lambda@Edge (NodeJS or Python)<ul><li>Longer execution time</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214545.png"></p><ul><li>CloudFront Functions vs Lambda@Edge</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214716.png"></p><hr><h4 id="Lambda-in-VPC"><a href="#Lambda-in-VPC" class="headerlink" title="Lambda in VPC"></a>Lambda in VPC</h4><ul><li>æ­£å¸¸æƒ…å†µä¸‹, Lambda æ— æ³•è®¿é—® VPC (æ‰€ä»¥è¦ Lambda in VPC)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img214940.png"></p><hr><h4 id="RDS-with-Lambda"><a href="#RDS-with-Lambda" class="headerlink" title="RDS with Lambda"></a>RDS with Lambda</h4><ul><li>Invoke Lambda functions from DB instance<ul><li>RDS for PostgreSQL, Aurora for MySQL, éœ€è¦ permission</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215442.png"></p><hr><h4 id="AWS-DynamoDB"><a href="#AWS-DynamoDB" class="headerlink" title="AWS DynamoDB"></a>AWS DynamoDB</h4><ul><li>NoSQL database, with replication across multiple AZs, auto-scaling, no provision</li><li>ä¸¤ç§ Class: Standard &amp; Infrequent Access (IA)</li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† Email çš„, å°±æ˜¯ DynamoDB Stream<ul><li>å¦‚æœé—®åˆ°å…³äº Stream çš„, ä¹Ÿè¦å»è€ƒè™‘ DynamoDB Stream</li></ul></li><li>å¦‚æœé—®åˆ° DynamoDB è€Œä¸”æ˜¯å¤„ç† unpredictable æ•°æ®çš„æ—¶å€™, é€‰æ‹© On-Demand table</li><li>By default, DynamoDB tables are encrypted with AWS owned key</li><li>ä¸è¦ç”¨ DB å»å­˜ Image (ä¸çŸ¥é“ä¸ºå•¥)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224558.png"></p><ul><li>Read &#x2F; Write Capacity Mode<ul><li>RCU å’Œ WCU æ²¡æœ‰å…³è” (å¯ä»¥åªåŠ  RCU ä¸åŠ  WCU)</li><li>Provisioned Mode: è‡ªå·±å®šä¹‰éœ€è¦å¤šå°‘ RCU å’Œ WCU</li><li>On-Demand Mode: è‡ªåŠ¨ Scale éœ€è¦çš„ RCU å’Œ WCU (è´µ)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225117.png"></p><ul><li>Point-In-Time Recovery (PITR, é‡è¦)<ul><li>When enable PITR, DynamoDB backs up table data automatically with per-second granularity so that you can restore to any given second in the preceding 35 days.</li></ul></li></ul><hr><h4 id="DynamoDB-Advance"><a href="#DynamoDB-Advance" class="headerlink" title="DynamoDB Advance"></a>DynamoDB Advance</h4><ul><li>DynamoDB Accelerator (DAX, å¯ä»¥å¤„ç† cache, ä½†æ˜¯ DAX ä¸æ˜¯ relational çš„)<ul><li>Help solve read congestion by caching (microseconds latency, ç¼“å­˜)</li><li>DAX ä¸æ”¯æŒ SQL query caching</li><li>å¯ä»¥æé«˜ DynamoDB çš„ performance (æé«˜çš„æ˜¯ read è€Œä¸æ˜¯ write, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233440.png"></p><ul><li>DynamoDB Stream Processing (å¤„ç† Stream)<ul><li>Ordered stream of item-level modifications in table</li><li>ç”¨æ¥å¤„ç† Stream çš„, å¯ä»¥ Invoke Lambda function (æ¯”å¦‚å‘é‚®ä»¶)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233610.png"></p><ul><li>DynamoDB Global Tables (é‡è¦)<ul><li>Make DynamoDB table accessible with low latency in multiple regions</li><li>éœ€è¦å…ˆæœ‰ DynamoDB Stream ä½œä¸ºå‰æ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233729.png"></p><ul><li>DynamoDB Time To Live (TTL, é‡è¦)<ul><li>Automatic delete items after an expiry timestamp (å®šæ—¶åˆ é™¤ DynamoDB é‡Œçš„ item)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233830.png"></p><hr><h4 id="AWS-API-Gateway"><a href="#AWS-API-Gateway" class="headerlink" title="AWS API Gateway"></a>AWS API Gateway</h4><ul><li>Invoke Lambda function, expose REST API (Stateless client-server communication)</li><li>Lambda + API Gateway &#x3D; No infrastructure to manage</li><li>API Gateway å¯ä»¥é˜²æ­¢ API overwhelmed by too many requests (é˜²æŠ–)</li><li>API Gateway Caching (å¯ä»¥ improve latency)<ul><li>With caching, you can reduce the number of calls made to your endpoint and also improve the latency of requests to your API</li><li>åæ­£è®°ä½, Read Replica æ˜¯è¦åŠ é’±çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234222.png"></p><ul><li>API Gateway Endpoint Types<ul><li>Edge-Optimized (default): For global clients, API Gateway live in one region</li><li>Regional: For client in same region</li><li>Private: é’ˆå¯¹ VPC</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174118.png"></p><hr><h4 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h4><ul><li>Build serverless visual workflow to orchestrate Lambda functions<ul><li>æ­å»º Serverless å¯è§†åŒ– Workflow (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234352.png"></p><hr><h4 id="AWS-Cognito"><a href="#AWS-Cognito" class="headerlink" title="AWS Cognito"></a>AWS Cognito</h4><ul><li>Give users identity to interact with web or mobile application<ul><li>Cognito User Pools: è´Ÿè´£ç”¨æˆ·ç™»å½•, have built-in user management</li><li>Cognito Identity Pools: ç»™ä¸´æ—¶ AWS credentials æ¥ access AWS æœåŠ¡</li></ul></li><li>æ³¨æ„, ALB + Cognito User Pool æ‰æ˜¯åš Auth çš„, è€Œä¸æ˜¯ CloudFront</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234512.png"></p><hr><h3 id="18-Database-Summary"><a href="#18-Database-Summary" class="headerlink" title="18. Database Summary"></a>18. Database Summary</h3><h4 id="AWS-RDS-SM"><a href="#AWS-RDS-SM" class="headerlink" title="AWS RDS (SM)"></a>AWS RDS (SM)</h4><ul><li>Manage PostgreSQL, MySQL, Oracle, SQL Server ç­‰ç­‰</li><li>Provisioned, Auto Scaling, Backup</li><li>Have Read Replica &amp; Multi-AZ (å›å»çœ‹ç¬¬ä¸ƒç« )</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151151.png"></p><hr><h4 id="AWS-Aurora-SM"><a href="#AWS-Aurora-SM" class="headerlink" title="AWS Aurora (SM)"></a>AWS Aurora (SM)</h4><ul><li>Manage PostgreSQL &amp; MySQL (åªæœ‰è¿™ä¸¤ä¸ª, å›å»çœ‹ç¬¬ä¸ƒç« )</li><li>Data stored in 6 replias, across 3 AZ, high available, auto-scaling</li><li>Aurora Serverless: For unpredictable workloads (Auto Scaling)</li><li>Aurora Global: Less than 1 second storage replication (ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ª Replica å¯ä»¥ç”¨)</li><li>Aurora Database Cloning: å¿«é€Ÿ access Aurora DB, é€‚åˆ test database ç”Ÿæˆ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151441.png"></p><hr><h4 id="AWS-ElastiCache-SM"><a href="#AWS-ElastiCache-SM" class="headerlink" title="AWS ElastiCache (SM)"></a>AWS ElastiCache (SM)</h4><ul><li>Manage Redis &#x2F; Memcached (In-memory data store, å›å»çœ‹ç¬¬ä¸ƒç« )</li><li>Support Clustering (Redis), Multi-AZ and Read Replicas (Shard)</li><li>Require some application code change to be leveraged (é‡ç‚¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151732.png"></p><hr><h4 id="AWS-DynamoDB-SM"><a href="#AWS-DynamoDB-SM" class="headerlink" title="AWS DynamoDB (SM)"></a>AWS DynamoDB (SM)</h4><ul><li>Severless, NoSQL database (For rapidly evolve schemas, å›å»çœ‹ç¬¬åä¸ƒç« )</li><li>Capacity modes: Provisioned capacity or On-Demand capacity</li><li>DAX cluster for read cache, microsecond read latency (ç¼“å­˜)</li><li>Event Processing: DynamoDB Stream with Lambda or Kinesis Data Streams</li><li>Export to S3 without using RCU, Import from S3 without WCU</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152140.png"></p><hr><h4 id="AWS-S3-SM"><a href="#AWS-S3-SM" class="headerlink" title="AWS S3 (SM)"></a>AWS S3 (SM)</h4><ul><li>S3 is a key &#x2F; value store for objects (é€‚åˆæ–‡ä»¶ä½“ç§¯å¤§çš„, å›å»çœ‹ç¬¬åç« )</li><li>Tiers: Standard, IA, Glacier ç­‰ç­‰</li><li>Features: Versioning, Encryption, Replication ç­‰ç­‰</li><li>Encryption: SSE-S3, SSE-KMS, SSE-C</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152526.png"></p><hr><h4 id="AWS-DocumentDB"><a href="#AWS-DocumentDB" class="headerlink" title="AWS DocumentDB"></a>AWS DocumentDB</h4><ul><li>DocumentDB is for MongoDB (Also a NoSQL database, ä½†æ˜¯åªè´Ÿè´£ MongoDB)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152629.png"></p><hr><h4 id="AWS-Neptune"><a href="#AWS-Neptune" class="headerlink" title="AWS Neptune"></a>AWS Neptune</h4><ul><li>Graph database (For social network, å›¾æ•°æ®åº“)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152726.png"></p><hr><h4 id="AWS-Keyspaces"><a href="#AWS-Keyspaces" class="headerlink" title="AWS Keyspaces"></a>AWS Keyspaces</h4><ul><li>Manage Apache Cassandra (also NoSQL) database (é˜¿å¸•å¥‡å¡æ¡‘å¾·æ‹‰)</li><li>Use cases: Store IoT devices info, time-series data</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153058.png"></p><hr><h4 id="AWS-QLDB"><a href="#AWS-QLDB" class="headerlink" title="AWS QLDB"></a>AWS QLDB</h4><ul><li>QLDB: Quantum Ledger Database (Immutable, æ— æ³•åˆ é™¤)<ul><li>For recording financial transactions (Serverless, åŠ å¯†èµ„äº§)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153301.png"></p><hr><h4 id="AWS-Timestream"><a href="#AWS-Timestream" class="headerlink" title="AWS Timestream"></a>AWS Timestream</h4><ul><li>Serverless Time series database (æ—¶é—´åºåˆ—æ•°æ®åº“)</li><li>Use cases: IoT apps, real-time analytics</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153436.png"></p><hr><h3 id="19-Data-amp-Analytics"><a href="#19-Data-amp-Analytics" class="headerlink" title="19. Data &amp; Analytics"></a>19. Data &amp; Analytics</h3><h4 id="AWS-Athena"><a href="#AWS-Athena" class="headerlink" title="AWS Athena"></a>AWS Athena</h4><ul><li>Athena is an interactive query service that makes it easy to analyze data directly in Amazon S3 using standard SQL (Athena is Serverless)<ul><li>Athena æ”¯æŒ SQL query å»å¤„ç† S3 æ•°æ®çš„</li><li>Athena cannot be used to analyze data in real time (æ²¡åŠæ³•å®æ—¶å¤„ç†æ•°æ®, é‡è¦)</li></ul></li><li>Use Athena to process logs, perform ad-hoc analysis, and run interactive queries (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200048.png"></p><ul><li>Performance Improvement<ul><li>Use columnar data for cost-saving (å¯ä»¥æœ‰æ›´å°‘çš„ scan)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200302.png"></p><ul><li>Federated Query<ul><li>Allow to run SQL queries across data stored on AWS or On-Premise</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200427.png"></p><hr><h4 id="AWS-Redshift"><a href="#AWS-Redshift" class="headerlink" title="AWS Redshift"></a>AWS Redshift</h4><ul><li>Based on PostgreSQL, but itâ€™s OLAP (Online analytical processing)</li><li>å¤„ç† BI æ•°æ®, å’Œ AWS Quicksight æˆ–è€… Tableau ä¸€èµ·ç”¨<ul><li>Petabyte scale - Redshift (é‡è¦)</li></ul></li><li>å¦‚æœé—®åˆ° Redshift ä¸”å’Œ S3 æœ‰å…³, å°±æ˜¯ Redshift Spectrum (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201036.png"></p><ul><li>Snapshots &amp; DR<ul><li>Redshift has â€œMulti-AZâ€ mode for clusters</li><li>Enable Automated Snapshots, copy the Redshift cluster to another AWS region</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201212.png"></p><ul><li>Load data into Redshift (å°†æ•°æ®å­˜åˆ° Redshift é‡Œ)<ul><li>Kinesis Data Firehose, S3 with Enhanced VPC Routing (æ³¨æ„), EC2 Instance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230656.png"></p><ul><li>Redshift Spectrum (å’Œ S3 æœ‰å…³)<ul><li>Query data that is already in S3 without loading it (é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201418.png"></p><hr><h4 id="AWS-OpenSearch"><a href="#AWS-OpenSearch" class="headerlink" title="AWS OpenSearch"></a>AWS OpenSearch</h4><ul><li>With OpenSearch, you can search any field, even partially matches<ul><li>åŸæ¥å«åš ElasticSearch (å°±æ˜¯åšæŸ¥è¯¢çš„)</li></ul></li><li>å¯ä»¥ç”¨ OpenSearch å®æ—¶å¤„ç†å’Œæœç´¢ Logs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203117.png"></p><hr><h4 id="AWS-EMR"><a href="#AWS-EMR" class="headerlink" title="AWS EMR"></a>AWS EMR</h4><ul><li>EMR: Elastic MapReduce (å¤„ç†å¤§æ•°æ®çš„)<ul><li>EMR helps to creating Hadoop clusters (Big Data, å¤§æ•°æ®)</li><li>æœ‰ Hadoop, Apache Spark å•¥çš„å°±æ˜¯ EMR</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203405.png"></p><ul><li>Node types &amp; purchasing<ul><li>Node: Master, Core, Task</li><li>Purchasing options: On-Demand, Reserved, Spot Instance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203545.png"></p><hr><h4 id="AWS-QuickSight"><a href="#AWS-QuickSight" class="headerlink" title="AWS QuickSight"></a>AWS QuickSight</h4><ul><li>Serverless machine learning business intelligence service to create dashboard<ul><li>ç®€å•æ¥è¯´å°±æ˜¯ç”¨ ML æ¥åˆ†æå•†ä¸šæ•°æ®å¹¶æ­å»º Dashboard</li></ul></li><li>In-memory computation using SPICE engine</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203724.png"></p><ul><li>Dashboard &amp; Analysis<ul><li>Share analysis or dashboard with Users or Groups (å¯ä»¥é€‰æ‹©æ€§çš„åˆ†äº«æ•°æ®)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203954.png"></p><hr><h4 id="AWS-Glue"><a href="#AWS-Glue" class="headerlink" title="AWS Glue"></a>AWS Glue</h4><ul><li>Managed extract, transform and load (ETL) service (Serverless)<ul><li>For customers to prepare and load their data for analytics</li><li>é‡åˆ°å¤„ç† ETL çš„å°±æ˜¯ Glue, ç”¨åˆ° Apache Spark</li><li>Use AWS Glue to process the raw data in Amazon S3 (é‡è¦)</li></ul></li></ul><blockquote><p>AWS Glue ETL jobs can use Amazon S3, data stores in a VPC, or on-premises JDBC data stores as a source. AWS Glue jobs extract data, transform it, and load the resulting data back to S3, data stores in a VPC, or on-premises JDBC data stores as a target.</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224509.png"></p><ul><li>Convert data into Apache Parquet format (è½¬æ•°æ®æ ¼å¼, å¾ˆå¥‡æ€ª, ä½†æ˜¯ä¼šè€ƒ)<ul><li>çœ‹åˆ°è¿™ä¸ª Apache Parquet å°±è¦æƒ³èµ· Glue</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224817.png"></p><ul><li>Glue Job Bookmarks: é˜²æ­¢ re-process æ—§æ•°æ® (é‡è¦)</li><li>Glue Elastic Views: Combine and replicate data accross multiple data stores with SQL</li><li>Glue DataBrew: Clean and normalize data</li></ul><hr><h4 id="AWS-Lake-Formation"><a href="#AWS-Lake-Formation" class="headerlink" title="AWS Lake Formation"></a>AWS Lake Formation</h4><ul><li>Managed services to setup Data Lake (æ•°æ®æ¹–)<ul><li>Central place to have all data for analytics purpose</li><li>æ³¨æ„, å¦‚æœé¢˜ç›®é‡Œæåˆ° Fine-grained Access Control for application, å°±è¦æƒ³èµ· Lake Foramtion</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img224948.png"></p><hr><h4 id="Kinesis-Data-Analytics"><a href="#Kinesis-Data-Analytics" class="headerlink" title="Kinesis Data Analytics"></a>Kinesis Data Analytics</h4><ul><li>Real-time analytics on Kinesis Data Streams &amp; Firehose using SQL (é‡è¦)<ul><li>Fully managed, auto-scaling, serverless</li><li>ä»¥ Kinesis Data Streams &amp; Firehose ä½œä¸ºç›®æ ‡ä½¿ç”¨ SQL è¿›è¡Œæ•°æ®åˆ†æ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225813.png"></p><ul><li>Amazon Managed Service for Apache Flink</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img225906.png"></p><hr><h4 id="AWS-MSK"><a href="#AWS-MSK" class="headerlink" title="AWS MSK"></a>AWS MSK</h4><ul><li>Managed Apache Kafka on AWS (Have Serverless)<ul><li>Kinesis çš„ä»£æ›¿ (åŒæ ·å¤„ç† Stream data), ä½†æ˜¯é’ˆå¯¹ Apache Kafka</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230056.png"></p><ul><li>Kinesis Data Streams (ç¬¬åäº”ç« ) vs AWS MSK</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230216.png"></p><hr><h3 id="20-Machine-Learning"><a href="#20-Machine-Learning" class="headerlink" title="20. Machine Learning"></a>20. Machine Learning</h3><h4 id="AWS-Rekognition"><a href="#AWS-Rekognition" class="headerlink" title="AWS Rekognition"></a>AWS Rekognition</h4><ul><li>Find object, people, text, scenes in images and videos using ML (è¯†åˆ«ç‰©å“)</li><li>Facial analysis and facial search</li><li>Content Moderation: Detect content that is inappropriate (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004131.png"></p><hr><h4 id="AWS-Transcribe"><a href="#AWS-Transcribe" class="headerlink" title="AWS Transcribe"></a>AWS Transcribe</h4><ul><li>Convert speech to text (è¯­éŸ³è½¬æ–‡å­—, Transcribe æ˜¯è½¬å½•çš„æ„æ€)</li><li>Automatically remove Personally Identifiable Information (PII, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004337.png"></p><hr><h4 id="AWS-Polly"><a href="#AWS-Polly" class="headerlink" title="AWS Polly"></a>AWS Polly</h4><ul><li>Convert text to speech (æ–‡å­—è½¬è¯­éŸ³)</li><li>Pronunciation Lexicons: Customize the pronunciation of words</li><li>Speech Synthesis Markup Language (SSML): Emphasize words (å°å£°)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004547.png"></p><hr><h4 id="AWS-Translate"><a href="#AWS-Translate" class="headerlink" title="AWS Translate"></a>AWS Translate</h4><ul><li>Language translation (ç¿»è¯‘)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004816.png"></p><hr><h4 id="AWS-Lex-amp-Connect"><a href="#AWS-Lex-amp-Connect" class="headerlink" title="AWS Lex &amp; Connect"></a>AWS Lex &amp; Connect</h4><ul><li>AWS Lex: Build chatbot (æ‰€æœ‰å’Œ chatbot æœ‰å…³çš„éƒ½æ˜¯ Lex)</li><li>AWS Connect: Build cloud contact center</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004954.png"></p><hr><h4 id="AWS-Comprehend"><a href="#AWS-Comprehend" class="headerlink" title="AWS Comprehend"></a>AWS Comprehend</h4><ul><li>Natural Language Processing (NLP)</li><li>Comprehend Medical: for clinical text (åŒ»ç–—æ–¹é¢, éå¸¸é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005107.png"></p><hr><h4 id="AWS-SageMaker"><a href="#AWS-SageMaker" class="headerlink" title="AWS SageMaker"></a>AWS SageMaker</h4><ul><li>Build ML models (å»º ML æ¨¡å‹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005342.png"></p><hr><h4 id="AWS-Forecast"><a href="#AWS-Forecast" class="headerlink" title="AWS Forecast"></a>AWS Forecast</h4><ul><li>Use ML to deliver highly accurate forecasts (åšé¢„æµ‹ç”¨çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012641.png"></p><hr><h4 id="AWS-Kendra"><a href="#AWS-Kendra" class="headerlink" title="AWS Kendra"></a>AWS Kendra</h4><ul><li>Managed document search service (æ–‡æ¡£æŸ¥æ‰¾)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012746.png"></p><hr><h4 id="AWS-Personalize"><a href="#AWS-Personalize" class="headerlink" title="AWS Personalize"></a>AWS Personalize</h4><ul><li>ML with real-time personalized recommendations (åšæ¨èç”¨çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img012921.png"></p><hr><h4 id="AWS-Textract"><a href="#AWS-Textract" class="headerlink" title="AWS Textract"></a>AWS Textract</h4><ul><li>ML to extract text (æå–æ–‡å­—ç”¨çš„, é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013008.png"></p><hr><h3 id="21-AWS-Mointoring-amp-Audit"><a href="#21-AWS-Mointoring-amp-Audit" class="headerlink" title="21. AWS Mointoring &amp; Audit"></a>21. AWS Mointoring &amp; Audit</h3><h4 id="CloudWatch-Metrics"><a href="#CloudWatch-Metrics" class="headerlink" title="CloudWatch Metrics"></a>CloudWatch Metrics</h4><ul><li>CloudWatch Metrics helps to monitor every services in AWS</li><li>å¯ä»¥ç”¨ CloudWatch Metrics å¤„ç† CloudTrail logs æ¥ç›‘è§†å¼‚å¸¸</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150021.png"></p><ul><li>CloudWatch Metric Streams<ul><li>Stream CloudWatch Metrics with near-real-time delivery (æ³¨æ„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150150.png"></p><hr><h4 id="CloudWatch-Logs"><a href="#CloudWatch-Logs" class="headerlink" title="CloudWatch Logs"></a>CloudWatch Logs</h4><ul><li>A place to store application logs in AWS (S3, Kinesis, Lambda)<ul><li>Logs are encrypted by default</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150343.png"></p><ul><li>CloudWatch Logs Insights<ul><li>Search and analyze log data stored in CloudWatch Logs</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150531.png"></p><ul><li>CloudWatch Logs Subscriptions (å¯ä»¥ Export ç»™ S3)<ul><li>Get a real-time log events from CloudWatch Logs for processing and analysis</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150643.png"></p><blockquote><p>You can configure a CloudWatch Logs log group to stream data it receives to your Amazon OpenSearch Service cluster in NEAR REAL-TIME through a CloudWatch Logs subscription</p></blockquote><hr><h4 id="CloudWatch-Agent"><a href="#CloudWatch-Agent" class="headerlink" title="CloudWatch Agent"></a>CloudWatch Agent</h4><ul><li>å¯ä»¥æŠŠ EC2 çš„ log ä¼ é€’ç»™ CloudWatch (By default, EC2 ä¸ä¼ é€’ log, é‡è¦)</li><li>CloudWatch Logs Agent: ä¼ é€’ç»™ CloudWatch</li><li>CloudWatch Unified Agent: å¯ä»¥ä¼ é€’æ›´å¤šä¿¡æ¯, æ¯”å¦‚ CPU, RAM ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151251.png"></p><hr><h4 id="CloudWatch-Alarms"><a href="#CloudWatch-Alarms" class="headerlink" title="CloudWatch Alarms"></a>CloudWatch Alarms</h4><ul><li>CloudWatch Alarms are used to trigger notifications for any metric (ç”¨ SNS å‘æ¶ˆæ¯)<ul><li>æ¯”å¦‚ EC2 çš„ Health å‡ºé—®é¢˜</li><li>Target: EC2, ASG, SNS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151423.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151514.png"></p><ul><li>Composite Alarams (ç›‘è§†å½“å‰æ‰€æœ‰ Alarm çš„æƒ…å†µ)<ul><li>Composite Alarams are mointoring the states of multiple other alarms</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151615.png"></p><hr><h4 id="AWS-EventBridge"><a href="#AWS-EventBridge" class="headerlink" title="AWS EventBridge"></a>AWS EventBridge</h4><ul><li>Schedule CRON jobs (Jobs on a repeating schedule, event-driven)</li><li>React to events from SaaS application (AWS services)<ul><li>å¦‚æœæåˆ° 3rd party application, è€ƒè™‘ EventBridge</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185605.png"></p><ul><li>åŸºæœ¬ä¸Šæ‰€æœ‰ event éƒ½è¦ç»è¿‡ EventBridge</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185712.png"></p><ul><li>Event Bus (Replay archived events, æ³¨æ„)<ul><li>æœ‰ Default Event Bus å’Œ Partner Event Bus (Datadog)</li><li>å¯ä»¥ Archive Events å¹¶ä¸” Replay (Good for debug)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190403.png"></p><ul><li>Schema Registry<ul><li>Analyze events in Event Bus and infer schema</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190004.png"></p><ul><li>Resource-based Policy<ul><li>Manage permissions (allow &#x2F; deny) for a specific Event Bus</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190215.png"></p><hr><h4 id="CloudWatch-Insights"><a href="#CloudWatch-Insights" class="headerlink" title="CloudWatch Insights"></a>CloudWatch Insights</h4><ul><li>è¿™é‡Œçš„ CloudWatch Insights æœ‰å¥½å‡ ç§ä¸åŒçš„ Insights (4 ç§)<ul><li>Container, Lambda, Contributor, Application</li></ul></li><li>CloudWatch Container Insights (å¤„ç† Container å®¹å™¨çš„)<ul><li>Collect, aggregate, summarize metrics and logs from container</li><li>ECS, EKS, Kubernetes, Fargate ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190651.png"></p><ul><li>CloudWatch Lambda Insights<ul><li>Monitoring solutions for serverless application running on Lambda</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190750.png"></p><ul><li>CloudWatch Contributor Insights (æ³¨æ„, å¯ä»¥æŸ¥ IP)<ul><li>Analyze log data and display contributor data (for system performance)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190854.png"></p><ul><li>CloudWatch Application Insights<ul><li>Provide dashboard to show the potential application issue related to AWS service</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191050.png"></p><hr><h4 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h4><ul><li>Provide governance, compliance and audit for AWS account (å®¡è®¡ events å’Œ API call)<ul><li>æ¯”å¦‚ History of events æˆ–è€… API calls</li></ul></li><li>CloudTrail æ˜¯ Global Service, å¦‚æœä¸œè¥¿è¢«è¯¯åˆ , ç¬¬ä¸€æ—¶é—´çœ‹ CloudTrail</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191802.png"></p><ul><li>CloudTrail Events<ul><li>Management Events: Performed on resources in AWS account</li><li>Data Events: S3 object-level activity (GetObject, DeleteObject)</li><li>CloudTrail Insigths Events: Detect unusual activity (å®‰å…¨)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192042.png"></p><ul><li>CloudTrail Insights (é‡è¦)<ul><li>CloudTaril Insights to detect unusual activity in account</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192157.png"></p><ul><li>CloudTrail Event Retention (ä¿å­˜ events)<ul><li>Keep events to S3 after they stored 90 days</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192301.png"></p><hr><h4 id="AWS-Config"><a href="#AWS-Config" class="headerlink" title="AWS Config"></a>AWS Config</h4><ul><li>AWS Config provides a detailed view of the configuration of AWS resources (é‡è¦)<ul><li>Record configurations and changes over time (è®°å½• config æ˜¯å¦è¢«ä¿®æ”¹)</li></ul></li><li>å¯ä»¥ç”¨ Config å»æ£€æŸ¥ ACM çš„ certificate æœ‰æ²¡æœ‰ä¸´è¿‘è¿‡æœŸ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192656.png"></p><ul><li>Config Rules: å¯ä»¥è‡ªå®šä¹‰ Rule æ¥æ£€æŸ¥ (ä¹Ÿæœ‰ AWS managed rules, æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ª)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img045705.png"></p><ul><li>Config Remediations<ul><li>Automate remediation (çº æ­£) of non-compliant resource using SSM Automation Documents (eg. unrestricted SSH access)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192951.png"></p><ul><li>Config Notifications<ul><li>Use EventBridge to trigger notifications when AWS resources are noncompliant</li><li>ç›¸å½“äºå½“æœ‰ä¸åˆè§„çš„ Resource å‡ºç°æ—¶, å¯ä»¥ Trigger Notifications</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193119.png"></p><hr><h3 id="22-IAM-Advanced"><a href="#22-IAM-Advanced" class="headerlink" title="22. IAM Advanced"></a>22. IAM Advanced</h3><h4 id="AWS-Organizations"><a href="#AWS-Organizations" class="headerlink" title="AWS Organizations"></a>AWS Organizations</h4><ul><li>Manage multiple AWS accounts, global service</li><li>Consolidated Billing across all accounts (åˆå¹¶è´¦å•, é‡è¦)<ul><li>å¦‚æœé—®åˆ°å’Œ Shield Advance æœ‰å…³çš„é’±çš„é—®é¢˜, é‚£å°±æ˜¯æ²¡æœ‰è®¾ç½® Consolidated Billing</li></ul></li><li>Shared reserved instance and Saving Plans discounts across accounts (é‡è¦)</li><li>å¦‚æœè¦æŠŠä¸€ä¸ª Account è½¬åˆ°å¦ä¸€ä¸ª Organization, è¦å…ˆæŠŠå®ƒä»åŸæ¥çš„ Organization ç§»é™¤</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235557.png"></p><ul><li>Service Control Policies (SCP, é™åˆ¶ç”¨æˆ·)<ul><li>IAM policies applied to OU (Organization Unit) or Accounts to restrict Users and Roles (Blocklist and Allowlist)</li><li>IAM Roles æ˜¯é’ˆå¯¹ Service, SCP é’ˆå¯¹ Organization</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013921.png"></p><ul><li><p>IAM Permission Boundary (å›å»çœ‹ç¬¬äºŒç« )</p><ul><li>A permissions boundary is an advanced feature for using a managed policy to set the maximum permissions that an identity-based policy can grant to an IAM entity.</li></ul></li><li><p>Service Control Policies (SCPs)</p><ul><li>If a user or role has an IAM permission policy that grants access to an action that is either not allowed or explicitly denied by the applicable service control policy (SCP), the user or role canâ€™t perform that action</li><li>Service control policy (SCP) affects all users and roles in the member accounts, including root user of the member accounts</li><li>Service control policy (SCP) does not affect service-linked role</li></ul></li></ul><hr><h4 id="IAM-Conditions"><a href="#IAM-Conditions" class="headerlink" title="IAM Conditions"></a>IAM Conditions</h4><ul><li>è¦åˆ†æ¸…æ¥š bucket level permissions å’Œ object level permissions (&#x2F;*)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022652.png"></p><hr><h4 id="IAM-Roles-vs-Resource-Based-Policies"><a href="#IAM-Roles-vs-Resource-Based-Policies" class="headerlink" title="IAM Roles vs Resource Based Policies"></a>IAM Roles vs Resource Based Policies</h4><ul><li>Role: Give up original permissions and take the permissions assigned to the Role</li><li>Resource Based Policy: The principal doesnâ€™t have to give up permissions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img015940.png"></p><ul><li>EventBridge ä¾‹å­<ul><li>Resource based policy: Lambda, SNS, SQS ç­‰ç­‰</li><li>IAM Roles: Kinesis stream, ECS ç­‰ç­‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img023321.png"></p><hr><h4 id="Policy-Evaluation-Logic"><a href="#Policy-Evaluation-Logic" class="headerlink" title="Policy Evaluation Logic"></a>Policy Evaluation Logic</h4><ul><li>IAM Permission Boundaries<ul><li>A feature to set the maximum permissions an IAM entity can get</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020209.png"></p><ul><li>ç­”æ¡ˆ No, No, No (Evaluate é€»è¾‘æ˜¯å…ˆæ¥ååˆ°, å…ˆ Deny å°±ç®—åé¢ Allow ä¹Ÿæ²¡æœ‰ç”¨)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img161535.png"></p><hr><h4 id="IAM-Identity-Center"><a href="#IAM-Identity-Center" class="headerlink" title="IAM Identity Center"></a>IAM Identity Center</h4><ul><li>One login for all (SSO)<ul><li>AWS accounts in AWS Organizations</li><li>Business cloud applications (Salesforce)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img020909.png"></p><ul><li>Fine-grained Permissions and Assignments<ul><li>Multi-Account Permissions: Manage access across AWS accounts</li><li>Application Assignments: SSO access to business applications</li><li>Attribute-Based Access Control (ABAC): Permission based on userâ€™s attribute (tags)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021246.png"></p><hr><h4 id="AWS-Directory-Services"><a href="#AWS-Directory-Services" class="headerlink" title="AWS Directory Services"></a>AWS Directory Services</h4><ul><li>Create Active Directory (AD, ç›®å½•æœåŠ¡) in AWS (é‡è¦)<ul><li>AWS Managed Microsoft AD: Create own AD in AWS</li><li>AD Connector: Proxy to redirect to On-Premise AD</li><li>Simple AD: AD-compatible managed directory on AWS</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021607.png"></p><hr><h4 id="AWS-Control-Tower"><a href="#AWS-Control-Tower" class="headerlink" title="AWS Control Tower"></a>AWS Control Tower</h4><ul><li>Set up and govern a secure and compliant multi-account AWS environment (é‡è¦)<ul><li>ç®¡ç† AWS å¤šè´¦æˆ·ç¯å¢ƒ, è€Œä¸”æ˜¯ Best Practice</li></ul></li><li>ControlTower use AWS Organizations to create accounts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img021857.png"></p><ul><li>ControlTower - Guardrails (ç®¡ç† ControlTower)<ul><li>Preventive Guardrail: Use SCPs (Restrict REgions across all accounts)</li><li>Detective Guardrail: Use AWS Config (identify untagged resources)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022019.png"></p><hr><h3 id="23-AWS-Security-amp-Encryption"><a href="#23-AWS-Security-amp-Encryption" class="headerlink" title="23. AWS Security &amp; Encryption"></a>23. AWS Security &amp; Encryption</h3><h4 id="AWS-KMS"><a href="#AWS-KMS" class="headerlink" title="AWS KMS"></a>AWS KMS</h4><ul><li>Anytime you hear â€œencryptionâ€ for an AWS service, itâ€™s most likely KMS</li><li>AWS managed encryption keys for us (Integrated with most AWS services)<ul><li>æ¯”å¦‚ EBS, S3, RDS, SSM (AWS managed keys),</li></ul></li><li>KMS Keys are scoped per Region</li><li>æ³¨æ„, KMS å¹¶ä¸é€‚åˆä¿å­˜ secret, åŠ å¯†çš„ä¸œè¥¿ä¸ä¸€å®šæ˜¯ secret</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170646.png"></p><ul><li>Types of KMS Keys (3 ç§): AWS Owned, AWS Managed, CMK (Custom Managed)</li><li>ä¸¤ç§ Key çš„å½¢å¼: Symmetric (Single) &amp; Asymmetric (Public &amp; Private)</li><li>Automatic Key Rotation: 1 year</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171058.png"></p><ul><li>KMS Key Policies (Control access to KMS keys)<ul><li>Default KMS Key Policy: Entire AWS account</li><li>Custom KMS Key Policy: Define who can access the key (Cross Account Access)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171356.png"></p><blockquote><p>Deleting an AWS KMS key in AWS Key Management Service (AWS KMS) is destructive and potentially dangerous. Therefore, AWS KMS enforces a waiting period. (Pending state)</p></blockquote><hr><h4 id="KMS-Multi-Region-Keys"><a href="#KMS-Multi-Region-Keys" class="headerlink" title="KMS Multi-Region Keys"></a>KMS Multi-Region Keys</h4><ul><li>Identical KMS keys in different AWS Regions (åœ¨å…¶ä»– Region ä¹Ÿèƒ½ç”¨åŒæ ·çš„ KMS Key)<ul><li>Encrypt in one Region and decrypt in other Regions</li></ul></li><li>Use cases: DynamoDB Global Tables &amp; Global Aurora</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172433.png"></p><hr><h4 id="S3-Replication-with-Encryption"><a href="#S3-Replication-with-Encryption" class="headerlink" title="S3 Replication with Encryption"></a>S3 Replication with Encryption</h4><ul><li>Unencrypted objects and objects encrypted with SSE-S3 are replicated by default</li><li>For objects encrypted with SSE-KMS, you need more options<ul><li>ä¹Ÿå°±æ˜¯è¯´ SSE-S3 åœ¨å¤åˆ¶çš„æ—¶å€™ä¼šä¿æŒ, ä½†æ˜¯ SSE-KMS éœ€è¦è®¾ç½®</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172816.png"></p><hr><h4 id="Encrypted-AMI-Sharing-Process"><a href="#Encrypted-AMI-Sharing-Process" class="headerlink" title="Encrypted AMI Sharing Process"></a>Encrypted AMI Sharing Process</h4><ul><li>éœ€è¦ Launch Permission, éœ€è¦ Share KMS Keys, éœ€è¦ Permission to decrypte<ul><li>åæ­£åªè¦çŸ¥é“ AMI ä¹Ÿæ˜¯å¯ä»¥ Encrypt å¹¶ Share çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173020.png"></p><hr><h4 id="SSM-Parameter-Store"><a href="#SSM-Parameter-Store" class="headerlink" title="SSM Parameter Store"></a>SSM Parameter Store</h4><ul><li>Secure storage for configuration and secrets<ul><li>æ¯”èµ· Secrets Manager æœ‰æ›´å¹¿çš„ç”¨é€”, æ¯”å¦‚ URLs, AMI IDs, License keys ç­‰ç­‰</li></ul></li><li>Have built-in verion tracking (æ¯æ¬¡ edit secret éƒ½ä¼šè¢«è®°å½•)</li><li>SSM æ²¡æœ‰ Automatic key rotation (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173611.png"></p><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><ul><li>Store secrets, integrated with RDS &amp; Aurora (éå¸¸é‡è¦, å­˜æ•°æ®åº“ secrets çš„)<ul><li>æ˜¯ç»™ confidential information (like database credentials, API keys) ç”¨çš„</li><li>æ¯”èµ· SSM Parameter Store, Secrets Manager æ”¯æŒ Key çš„è½®æ¢ (90 å¤©)</li><li>æ³¨æ„, Secret Manager çš„ Key Rotateion æ˜¯ 90 å¤©, KMS çš„ Key Rotateion æ˜¯ä¸€å¹´</li></ul></li><li>æ¯”èµ· KMS, Secrets Manager æ›´é€‚åˆå»ä¿å­˜ secret, æ¯”å¦‚ database credential, è€Œä¸” Secrets Manager ä¹Ÿæœ‰ Automatic key rotation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174132.png"></p><ul><li>Multi-Region Secrets (å’Œ Multi-Region Key ç±»ä¼¼)<ul><li>Replicate Secrets across multiple AWS Regions (disaster recovery)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174258.png"></p><hr><h4 id="AWS-Certificate-Manager-ACM"><a href="#AWS-Certificate-Manager-ACM" class="headerlink" title="AWS Certificate Manager (ACM)"></a>AWS Certificate Manager (ACM)</h4><ul><li>Easily provision, manage, and deploy TLS Certificates (HTTPS)<ul><li>å¦‚æœä½ è¦ç»™ EB ä¸Š HTTPS å°±è¦ç”¨åˆ° ACM</li><li>å¦‚æœæ˜¯ third party SSL å°±æ²¡åŠæ³•ä½¿ç”¨ automatic certificate rotation</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174451.png"></p><ul><li>å¯ä»¥ç”¨ EventBridge æ¥æ£€æŸ¥ ACM Certificates æ˜¯å¦è¿‡æœŸ (è¿‡æœŸ Invoke SNS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img172923.png"></p><hr><h4 id="AWS-WAF"><a href="#AWS-WAF" class="headerlink" title="AWS WAF"></a>AWS WAF</h4><ul><li>WAF: Web Application Firewall (é˜²ç«å¢™)</li><li>Protect web application in Layer 7 (HTTP &#x2F; HTTPS)<ul><li>Layer 4 æ˜¯ TCP &#x2F; UDP, Layer 3 å¤„ç† VPC ä¹‹ç±»çš„</li></ul></li><li>å¦‚æœè¦ block countries, å¯ä»¥ç”¨ WAF Geo Match æˆ–è€… WAF IP Set Statement (é‡è¦)</li><li>WAF å¯ä»¥è®¾ç½® rate-based rules, Shield ä¸å¯ä»¥</li><li>å¦‚æœéœ€è¦åœ¨ä¸åŒçš„ accout æˆ–è€… region ç”¨ WAF, è€ƒè™‘ Firewall Manager (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img174857.png"></p><ul><li>Web ACL: å¯ä»¥æ ¹æ® IP, HTTP Headers, Size æ¥å†³å®šè°å¯ä»¥ Access<ul><li>ä¹Ÿå°±æ˜¯è¯´, WAF å¯ä»¥ block access from certain countries</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175006.png"></p><blockquote><p>If you want to use AWS WAF across accounts, accelerate WAF configuration, automate the protection of new resources, use Firewall Manager with AWS WAF</p></blockquote><hr><h4 id="AWS-Shield"><a href="#AWS-Shield" class="headerlink" title="AWS Shield"></a>AWS Shield</h4><ul><li>Protect from DDoS attack (WAF ä¹Ÿå¯ä»¥, ä½†æ˜¯è€ƒè¯•é‡åˆ° DDoS çš„æ—¶å€™é€‰ Shield)</li><li>æœ‰ Shield Standard (å…è´¹) å’Œ Shield Advanced (ä»˜è´¹)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175302.png"></p><hr><h4 id="AWS-Firewall-Manager"><a href="#AWS-Firewall-Manager" class="headerlink" title="AWS Firewall Manager"></a>AWS Firewall Manager</h4><ul><li>Manage security rules in all accounts of an AWS Organization<ul><li>æ¯”å¦‚ WAF rules, AWS Shield Advanced, Security Group for EC2 &amp; VPC ç­‰ç­‰</li></ul></li><li>Rules are applied to new resources as they are created</li><li>å¦‚æœéœ€è¦åœ¨ä¸åŒçš„ accout æˆ–è€… region ç”¨ WAF, è€ƒè™‘ Firewall Manager (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175531.png"></p><ul><li>WAF vs Firewall Manager vs Shield<ul><li>å®ƒä»¬ä¸€èµ·ç”¨æ¥åšå¤§å‹å®‰å…¨ä¿æŠ¤ (WAF + Firewall Manager + Shield)</li><li>å¦‚æœåªæ˜¯æ—¥å¸¸ä¿æŠ¤, å°±ç”¨ WAF</li><li>å¦‚æœé‡åˆ° DDoS æ”»å‡», è€ƒè™‘ä½¿ç”¨ Shield</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175631.png"></p><hr><h4 id="AWS-GuardDuty"><a href="#AWS-GuardDuty" class="headerlink" title="AWS GuardDuty"></a>AWS GuardDuty</h4><ul><li>Intelligent threat discovery (ML) to protect AWS account (ç”¨ ML é˜²æ­¢åŠ å¯†æ”»å‡»)<ul><li>Input data: CloudTrail, VPC, DNS (é‡è¦)</li></ul></li><li>Use case: CryptoCurrency attacks</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175935.png"></p><hr><h4 id="AWS-Inspector"><a href="#AWS-Inspector" class="headerlink" title="AWS Inspector"></a>AWS Inspector</h4><ul><li>Automated Security Assessments (è‡ªåŠ¨å®‰å…¨è¯„ä¼°)<ul><li>EC2 Instance &amp; Container Images (ECR) &amp; Lambda Functions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180110.png"></p><hr><h4 id="AWS-Macie"><a href="#AWS-Macie" class="headerlink" title="AWS Macie"></a>AWS Macie</h4><ul><li>Use ML to protect sensitive data (PII) in AWS (ç”¨ ML ä¿æŠ¤æ•æ„Ÿä¿¡æ¯)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180224.png"></p><hr><h3 id="24-Networking-VPC"><a href="#24-Networking-VPC" class="headerlink" title="24. Networking VPC"></a>24. Networking VPC</h3><ul><li>CIDR &#x3D; Base IP + Subnet Mask<ul><li>ä¾‹å­: CIDR 10.0.4.0&#x2F;28, &#x2F;28 ä»£è¡¨ 16 IPs &#x3D; (2^(32-28) &#x3D; 2^4), 8 çš„å€æ•°å¤§è¿‡ 28 åªæœ‰ 32, æ‰€ä»¥ç­”æ¡ˆæ˜¯ 10.0.4.0 åˆ° 10.0.4.15 (0-15 ä¸€å…±æœ‰ 16 ä¸ª)</li></ul></li><li>CIDR should not overlap, max CIDR size in AWS is &#x2F;16, min CIDR size in AWS is &#x2F;28</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002822.png"></p><hr><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><ul><li>VPC: Virtual Private Cloud<ul><li>All new AWS account have a default VPC</li></ul></li><li>CIDR should not overlap, max CIDR size in AWS is &#x2F;16, min CIDR size in AWS is &#x2F;28</li><li>è¦è®© VPC ä½¿ç”¨ custom domain éœ€è¦ enableDnsHostnames å’Œ enableDnsSupport</li><li>å¯ä»¥åˆ›å»º Shared Service VPC, è¿™æ ·æ¯ä¸ª VPC éƒ½å¯ä»¥ access åˆ°éœ€è¦çš„ services (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201530.png"></p><ul><li>Each Amazon EC2 instance that you launch into a VPC has a tenancy attribute (é‡è¦)<ul><li>å¯ä»¥åœ¨ dedicated å’Œ host ä¹‹é—´äº’ç›¸åˆ‡æ¢</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042420.png"></p><hr><h4 id="VPC-Subnet"><a href="#VPC-Subnet" class="headerlink" title="VPC Subnet"></a>VPC Subnet</h4><ul><li>Can have Public Subnet and Private Subnet</li><li>AWS reserves 5 IP addresses in each subnet (first 4 &amp; last 1, é‡è¦)<ul><li>è®°å¾—å‰å››ä¸ªæ˜¯ä» 0 å¼€å§‹ç®—çš„, ä¹Ÿå°±æ˜¯ 0 - 3</li><li>æ¯”å¦‚æˆ‘è¦åšä¸€ä¸ªå¯ä»¥å¤„ç† 28 ä¸ªçš„, æˆ‘éœ€è¦ 28 + 5 + 26 + 5 &#x3D; 64</li></ul></li><li>Subnet is always associated with Route Table (é‡è¦)<ul><li>é—®å…³äº Subnet çš„é—®é¢˜å°±å’Œ Route Table æ²¡æœ‰å…³ç³»</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201819.png"></p><hr><h4 id="Internet-Gateway-IGW-amp-Route-Table"><a href="#Internet-Gateway-IGW-amp-Route-Table" class="headerlink" title="Internet Gateway (IGW) &amp; Route Table"></a>Internet Gateway (IGW) &amp; Route Table</h4><ul><li>IGW allow resource (eg. EC2 Instance) in a VPC connect to internet<ul><li>ç›¸å½“äºè®© VPC é‡Œçš„ resource å¯ä»¥è¿ä¸Šç½‘</li><li>IGW éœ€è¦ Route Table (é‡è¦)</li></ul></li><li>å¦‚æœ IGW å‡ºé—®é¢˜<ul><li>Need to also have Route Table (é¦–å…ˆæ£€æŸ¥ Route Table, å› ä¸º IGW éœ€è¦)</li><li>æ£€æŸ¥ Security Group æ˜¯å¦å…è®¸é€šè¿‡</li></ul></li><li>å¤„ç† Network Address Translation çš„å°±æ˜¯ Internet Gateway</li><li>Internet Gateway æ— æ³•ç›´æ¥åœ¨ private subnet é‡Œé¢ä½¿ç”¨ (é‡è¦)</li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢ (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202043.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193121.png"></p><hr><h4 id="Bastion-Hosts"><a href="#Bastion-Hosts" class="headerlink" title="Bastion Hosts"></a>Bastion Hosts</h4><ul><li>Use Bastion Host to SSH into private EC2 instance (SSH è¿›å…¥ EC2)</li><li>Bastion Host is in the public subnet and is connected to the private subnet<ul><li>ç®€å•æ¥è¯´å°±æ˜¯ Public Internet åˆ° Private Subnet</li></ul></li><li>Bastion Host security group must restrict internet access (port 22)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202553.png"></p><blockquote><p>Create a public Network Load Balancer that links to Amazon EC2 instances that are bastion hosts managed by an Auto Scaling Group</p></blockquote><hr><h4 id="NAT-Instances-Outdated"><a href="#NAT-Instances-Outdated" class="headerlink" title="NAT Instances (Outdated)"></a>NAT Instances (Outdated)</h4><ul><li>NAT: Network Address Translation</li><li>Allow EC2 Instance in Private Subnet to connect to the Internet<ul><li>ä½†ç°åœ¨éƒ½æ˜¯ç”¨ NAT Gateway (NAT Gateway is the prefered solution now)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202940.png"></p><ul><li>NAT instance can be used as a bastion server</li><li>Security Groups can be associated with a NAT instance</li><li>NAT instance supports port forwarding</li></ul><hr><h4 id="NAT-Gateway-NATGW"><a href="#NAT-Gateway-NATGW" class="headerlink" title="NAT Gateway (NATGW)"></a>NAT Gateway (NATGW)</h4><ul><li>AWS managed NAT, AZ specific, use Elastic IP (é’ˆå¯¹ IPv4, Egress æ˜¯ IPv6)<ul><li>Allow EC2 Instance in Private Subnet to connect to the Internet</li><li>Requires an IGW, NATGW æ˜¯å¤„äº public subnet çš„ (æ³¨æ„)</li></ul></li><li>NAT é’ˆå¯¹çš„æ˜¯ Subnet å±‚é¢, IGW é’ˆå¯¹çš„æ˜¯ VPC å±‚é¢</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203409.png"></p><ul><li>Resilient within single AZ, Multiple-AZ need multiple NATGW<ul><li>æ¯ä¸ª AZ éƒ½è¦ä¸€ä¸ª NATGW, ç”¨æ¥ fault-tolerance (å®¹é”™èƒ½åŠ›)</li></ul></li><li>Highly availiable within AZ (create in another AZ)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203654.png"></p><hr><h4 id="NACL-amp-Security-Groups"><a href="#NACL-amp-Security-Groups" class="headerlink" title="NACL &amp; Security Groups"></a>NACL &amp; Security Groups</h4><ul><li>The request has to go over NACL before go to Subnet (Subnet level)<ul><li>NACL is stateless (inbound outbound éƒ½è¦æ£€æµ‹)</li></ul></li><li>The request has to go over Security Group before go to EC2 Instance (Instance level)<ul><li>Security Group (SG) is stateful (inbound accepted &#x3D; outbound accepted)</li></ul></li><li>åæ­£è®°ä½ NACL æ˜¯ Subnet level (stateless), Security Group æ˜¯ Instance level (stateful)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204310.png"></p><ul><li>Network Access Control List (NACL)<ul><li>NACL control traffic from and to subnets (eg. block IP)</li><li>One NACL per subnet, each subnet have default NACL (æ³¨æ„)<ul><li>Default NACL accept every inbound and outbound</li></ul></li><li>NACL Rules have number, higher precedence with lower number (è¶Šä¼˜å…ˆæ•°å­—è¶Šä½)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img204553.png"></p><hr><h4 id="VPC-Peering-amp-Sharing"><a href="#VPC-Peering-amp-Sharing" class="headerlink" title="VPC Peering &amp; Sharing"></a>VPC Peering &amp; Sharing</h4><ul><li>VPC Peering: Privately connect two VPCs using AWS network (åªé€‚åˆå°‘é‡ VPC, é‡è¦)<ul><li>æ¯ä¸€å¯¹ VPC éƒ½è¦ VPC Peering, å’Œ S3 Replication ç±»ä¼¼</li></ul></li><li>Can create VPC Peering between VPCs in different AWS accounts &#x2F; regions</li><li>Need to update Route Table in each VPC subnet to make sure they can communicate<ul><li>å‡ºé—®é¢˜å°±æ£€æŸ¥ Route Table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205313.png"></p><ul><li>VPC Sharing: Allows multiple AWS accounts to create resources (eg. EC2, RDS) into shared and centrally-managed AWS VPC (é‡è¦)<ul><li>é‡åˆ° centrally managed çš„å°±æ˜¯ VPC Sharing</li><li>è€Œä¸”æ˜¯ owner éœ€è¦ share one or more subnet (æ³¨æ„)</li></ul></li></ul><hr><h4 id="VPC-Endpoints-AWS-PrivateLink"><a href="#VPC-Endpoints-AWS-PrivateLink" class="headerlink" title="VPC Endpoints (AWS PrivateLink)"></a>VPC Endpoints (AWS PrivateLink)</h4><ul><li>VPC Endpoints allow private access to AWS services within a VPC (é‡è¦)<ul><li>ç”¨ Private Network è¿æ¥ AWS æœåŠ¡, å’Œ On-Premise æ²¡æœ‰å…³ç³»</li><li>Interface Endpoint æ”¯æŒå¤§éƒ¨åˆ† AWS æœåŠ¡ (ä»˜è´¹)</li><li>Gateway Endpoint åªæ”¯æŒ S3 å’Œ DynamoDB (å¾ˆå®¹æ˜“è€ƒ, å…è´¹)</li></ul></li><li>æ³¨æ„, VPC Gateway Endpoint ä¸“é—¨å¤„ç† S3 å’Œ DynamoDB (ä¸è¦å»é€‰æ‹© NAT æˆ–è€… IGW)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205719.png"></p><ul><li>ä¸¤ç§ Types of Endpoints (Interface &#x2F; Gateway)<ul><li>Interface Endpoints: Supports most AWS services (ä»˜è´¹)</li><li>Gateway Endpoints: Must be used as a target in a route table (å…è´¹, é‡è¦)<ul><li>Only support S3 and DynamoDB (åªæ”¯æŒ S3 å’Œ DynamoDB)</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img205939.png"></p><hr><h4 id="VPC-Flow-Logs"><a href="#VPC-Flow-Logs" class="headerlink" title="VPC Flow Logs"></a>VPC Flow Logs</h4><ul><li>Capture information about IP traffic going into interfaces (ç›‘è§† IP æµé‡çš„)<ul><li>Monitor &amp; troubleshoot connectivity issues (ç½‘ç»œè¿æ¥é—®é¢˜)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231819.png"></p><hr><h4 id="Site-to-Site-VPN-VPN-Connection"><a href="#Site-to-Site-VPN-VPN-Connection" class="headerlink" title="Site-to-Site VPN (VPN Connection)"></a>Site-to-Site VPN (VPN Connection)</h4><ul><li>Site-to-Site VPN: Connect AWS to Corporate Data Center over public internet (é‡ç‚¹, public internet, On-Premise to AWS)<ul><li>Need a Virtual Private Gateway (VGW) on VPC (AWS æ–¹)</li><li>Need a Customer Gateway (CGW) on DC (On-Premise æ–¹)</li></ul></li><li>å¯¹æ¯” DX, Site-to-Site VPN æ²¡æœ‰æä¾› low latency, and high throughput connection</li><li>Site-to-Site VPN æœ‰ encrypted network connectivity between On-Premise and VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232320.png"></p><ul><li>éœ€è¦ VPN Gateway å’Œ Customer Gateway æ¥è¿æ¥ VPC å’Œ On-Premise</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232649.png"></p><hr><h4 id="VPN-CloudHub"><a href="#VPN-CloudHub" class="headerlink" title="VPN CloudHub"></a>VPN CloudHub</h4><ul><li>Provide secure communication for multiple VPN Connections (Site-to-Site VPN)<ul><li>åœ¨éœ€è¦ç®¡ç†å¤šä¸ª Site-to-Site VPN çš„æ—¶å€™</li><li>å¯ä»¥ä½œä¸º backup connection ä½¿ç”¨ public internet å»é˜²æ­¢ failover</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202141.png"></p><blockquote><p>If you have multiple AWS Site-to-Site VPN connections, you can provide secure communication between sites using the AWS VPN CloudHub.</p></blockquote><hr><h4 id="Direct-Connect-DX"><a href="#Direct-Connect-DX" class="headerlink" title="Direct Connect (DX)"></a>Direct Connect (DX)</h4><ul><li>Provide a dedicated private connection from a remote network to VPC (é‡ç‚¹, private internet, On-Premise to AWS)<ul><li>éœ€è¦è®¾ç½® VGW, å¦‚æœç»™ DX æ‰¾ backup, é‚£ä¹ˆå°±é€‰æ‹© Site-to-Site VPN (è¿™ä¸¤ä¸ªæœåŠ¡ç±»ä¼¼)</li><li>å¯¹æ¯” Site-to-Site VPN, DX provide low latency, and high throughput connection</li><li>DX ä¸æ”¯æŒ encrypted network connectivity, Site-to-Site VPN å¯ä»¥, ä½†æ˜¯å¦‚æœéœ€è¦ encrypt DX connection å¯ä»¥å’Œ AWS VPN ä¸€èµ·ç”¨ (æ³¨æ„)</li><li>DX çš„ set up æ—¶é—´å¾ˆé•¿ (æ‰€ä»¥ DX ä¸ç®—ä»€ä¹ˆ quick solution)</li></ul></li><li>All private, no public network involve (æ³¨æ„, å¦‚æœé—®åˆ° all Private å°±æ˜¯ DX)<ul><li>Direct Connect does not involve the Internet</li></ul></li><li>å¯ä»¥ access public resources (S3) å’Œ private resources (EC2)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233024.png"></p><ul><li>ä¸¤ç§ Connection Type (å¸¦å®½é€‰é¡¹, Dedicated æœ€å¿«)<ul><li>Dedicated Connections: 1Gbps åˆ° 100Gbps</li><li>Hosted Connections: 50Mbps åˆ° 10 Gbps</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004140.png"></p><ul><li>Direct Connect Gateway (è¿æ¥è®¸å¤š VPC åœ¨ä¸åŒçš„ Region)<ul><li>Direct Connection to one or more VPC in many different regions</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233531.png"></p><ul><li><p>PrivateLink vs DX</p><ul><li><p>AWS PrivateLink provides a connection between VPCs (Virtual Private Clouds) and AWS services while bypassing the public Internet. It is a private network connection that securely transfers data without leaving the AWS network</p></li><li><p>AWS Direct Connect is a dedicated, private connection between the customerâ€™s on-premises infrastructure at a data center and an AWS location. The main features of the connection are ultra-fast data transfer rates, low latency, and improved security since it bypasses the public Internet</p></li></ul></li></ul><hr><h4 id="Transite-Gateway"><a href="#Transite-Gateway" class="headerlink" title="Transite Gateway"></a>Transite Gateway</h4><ul><li>Have transitive peering between thousands of VPCs, On-Premise ç­‰ç­‰ (é‡è¦)<ul><li>Regional resource, å¯ä»¥ Cross-Region (Transite Gateway è¿æ¥äº†å¤§é‡çš„ VPC)</li><li>å¯ä»¥é€šè¿‡ ECMP å» maximize the VPN throughput (é‡è¦)</li></ul></li><li>Support IP Multicast, IP å¤šæ’­å¯ä»¥åœ¨å•æ¬¡ä¼ è¾“ä¸­å‘ä¸€ç»„æ„Ÿå…´è¶£çš„æ¥æ”¶è€…å‘é€äº’è”ç½‘åè®®</li><li>å¦‚æœé—®åˆ°å…³äº star network æˆ–è€… hub-and-spoke çš„å°±æ˜¯ Transite Gateway</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img334237.png"></p><ul><li>Site-to-Site VPN ECMP (é‡è¦)<ul><li>ECMP &#x3D; Equal-cost multi-path routing (increase bandwidth)</li><li>è·¯ç”±ç­–ç•¥, å°†æ•°æ®åŒ…è½¬å‘åˆ°å•ä¸ªç›®çš„åœ°å¯ä»¥é€šè¿‡å…·æœ‰ç›¸åŒè·¯ç”±ä¼˜å…ˆçº§çš„å¤šæ¡æœ€ä½³è·¯å¾„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234354.png"></p><hr><h4 id="VPC-Traffic-Mirroring"><a href="#VPC-Traffic-Mirroring" class="headerlink" title="VPC Traffic Mirroring"></a>VPC Traffic Mirroring</h4><ul><li>Capture and inspect network traffic in VPC (ç›‘æµ‹ VPC ç½‘ç»œæµé‡)</li><li>Use cases: content inspection, threat monitoring ç­‰ç­‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002627.png"></p><hr><h4 id="IPv6-in-VPC"><a href="#IPv6-in-VPC" class="headerlink" title="IPv6 in VPC"></a>IPv6 in VPC</h4><ul><li>IPv4 cannot be disabled for VPC and subnets</li><li>Eg. EC2 Instance get at least 1 private IPv4 and a public IPv6<ul><li>æ‰€ä»¥å¦‚æœæ— æ³•å¯åŠ¨ EC2 Instance, é‚£ä¹ˆ IPv4 ä¸€å®šæœ‰é—®é¢˜</li><li>Create a new IPv4 CIDR in subnet (æ³¨æ„)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001017.png"></p><hr><h4 id="Egress-only-Internet-Gateway"><a href="#Egress-only-Internet-Gateway" class="headerlink" title="Egress-only Internet Gateway"></a>Egress-only Internet Gateway</h4><ul><li>Use for IPv6 only (Similar to NAT Gateway, but NATGW only for IPv4)<ul><li>åªå…è®¸ outbound connection ä» VPC åˆ° Internet, ä¸å…è®¸ inbound ä» Internt åˆ° VPC</li><li>ä¹Ÿéœ€è¦ Update Route Table</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img001334.png"></p><hr><h4 id="AWS-Network-Firewall"><a href="#AWS-Network-Firewall" class="headerlink" title="AWS Network Firewall"></a>AWS Network Firewall</h4><ul><li>Protect entire AWS VPC (ç›¸å½“äº VPC çš„é˜²ç«å¢™, åƒä¸‡è¦è®°ä½)<ul><li>From Layer 3 to Layer 7 protection (å…¨æ–¹é¢, é‡è¦)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002037.png"></p><ul><li>Have traffic filtering: Allow, drop, or alert traffic that match the rules</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002200.png"></p><ul><li>AWS Network Firewall is a managed firewall service that provides filtering for both inbound and outbound network traffic. It allows you to create rules for traffic inspection and filtering, which can help protect your production VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234322.png"></p><hr><h3 id="25-Disaster-Recovery-amp-Migrations"><a href="#25-Disaster-Recovery-amp-Migrations" class="headerlink" title="25. Disaster Recovery &amp; Migrations"></a>25. Disaster Recovery &amp; Migrations</h3><h4 id="Disaster-Recovery"><a href="#Disaster-Recovery" class="headerlink" title="Disaster Recovery"></a>Disaster Recovery</h4><ul><li>RPO: Recovery Point Objective (è¿™æ®µæ—¶é—´çš„æ•°æ®ä¸¢å¤±)</li><li>RTO: Recovery Time Objective (è¿™æ®µæ—¶é—´ App åœæœº)</li><li>é‡åˆ° DR å°±åº”è¯¥å»æƒ³ Multi-Region çš„å¤„ç†æ–¹æ³• (æ³¨æ„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img002206.png"></p><ul><li>Disaster Recovery Startegies<ul><li>Backup and Restore: High RPO &amp; RTO, å°† On-Premise æ•°æ®å¤‡ä»½åœ¨ Cloud ä¸Š</li><li>Pilot Light: ä¸€éƒ¨åˆ† app åœ¨ Cloud ä¸Šè·‘ (Only the critical infrastructure)<ul><li>æ³¨æ„, é‡åˆ°æœ‰æåˆ° DR (Disaster Recovery) with minimum çš„å°±æ˜¯ Pilot Light</li></ul></li><li>Warm Standby: ä¸€éƒ¨åˆ† app åœ¨ Cloud ä¸Šè·‘ (Scale-down version, scale-up quickly)<ul><li>æ³¨æ„, é‡åˆ°æœ‰æåˆ° DR (Disaster Recovery) with scale-down çš„å°±æ˜¯ Warm Standby</li></ul></li><li>Multi-Site: Every Low RTO &amp; RPO, å…¨éƒ¨ app åœ¨ Cloud ä¸Šè·‘ (æœ€è´µ)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142543.png"></p><hr><h4 id="Database-Migration-Service-DMS"><a href="#Database-Migration-Service-DMS" class="headerlink" title="Database Migration Service (DMS)"></a>Database Migration Service (DMS)</h4><ul><li>Migrate database to AWS (å°†æ•°æ®åº“è¿ç§»åˆ° AWS, éå¸¸é‡è¦)</li><li>Support Homogeneous migration &amp; Heterogeneous migration<ul><li>Homogeneous å°±æ˜¯ç›¸åŒçš„æ•°æ®åº“ç±»å‹, Heterogeneous å°±æ˜¯ä¸åŒçš„æ•°æ®åº“ç±»å‹</li></ul></li><li>Need to have an EC2 Instance to perform DMS to make it work</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img143551.png"></p><ul><li>AWS Schema Conversion Tool (SCT, é‡è¦)<ul><li>Covert Database Schema from one engine to another (å¦‚æœè¦è¿ç§»çš„æ•°æ®åº“ç±»å‹ä¸åŒ)</li><li>If same DB engine, donâ€™t need SCT (æ¯”å¦‚ PostgreSQL åˆ° AWS RDS PostgreSQL)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img143914.png"></p><ul><li>DMS Multi-AZ Deployement<ul><li>DMS provisions and maintains a synchronously stand replica in different AZ</li><li>ç›¸å½“äºä½ åœ¨æ•°æ®åº“è¿ç§»çš„æ—¶å€™å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ª AZ æœ‰ä¸€ä¸ªå¤‡ä»½</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144109.png"></p><hr><h4 id="RDS-amp-Aurora-Migration"><a href="#RDS-amp-Aurora-Migration" class="headerlink" title="RDS &amp; Aurora Migration"></a>RDS &amp; Aurora Migration</h4><ul><li>RDS MySQL to Aurora MySQL (PostgreSQL ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†)<ul><li>Op1. DB Snapshots from RDS MySQL restored as Aurora MySQL</li><li>Op2. Create Aurora Read Replica from RDS MySQL</li></ul></li><li>External MySQL to Aurora MySQL<ul><li>Op1. Create backup file in S3, and create Aurora MySQL from S3</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144459.png"></p><hr><h4 id="On-Premise-Strategy-with-AWS"><a href="#On-Premise-Strategy-with-AWS" class="headerlink" title="On-Premise Strategy with AWS"></a>On-Premise Strategy with AWS</h4><ul><li>AWS Application Discovery Service (DS)</li><li>AWS Database Migration Service (DMS)</li><li>AWS Server Migration Service (SMS)</li><li>VM Import &amp; Export (ä»¥ä¸Šè¿™äº›éƒ½è¦ä¾èµ– On-Premise)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145118.png"></p><hr><h4 id="AWS-Backup"><a href="#AWS-Backup" class="headerlink" title="AWS Backup"></a>AWS Backup</h4><ul><li>Fully managed service to automate backups across AWS services (åšå¤‡ä»½çš„, é‡è¦)<ul><li>æ”¯æŒ EC2, EBS, S3, RDS, EFS ç­‰ç­‰</li></ul></li><li>Support Cross-Region backups and Cross-Account backups</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145310.png"></p><ul><li>AWS Backup Valut Lock (ç›¸å½“äºç»™ backup ä¸Šé”)<ul><li>Enforce a WORM state for all backups (æ„æ€å°±æ˜¯æ‰€æœ‰ backup éƒ½åˆ ä¸äº†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145549.png"></p><hr><h4 id="Application-Migration-Service-MGN"><a href="#Application-Migration-Service-MGN" class="headerlink" title="Application Migration Service (MGN)"></a>Application Migration Service (MGN)</h4><ul><li>AWS Application Discovery Service (ç›¸å½“äºåœ¨ MGN ä¹‹å‰è¦å…ˆåšè®¡åˆ’)<ul><li>Plan migration projects by gathering information about On-Premise data centers</li><li>æœ‰ Agentless Discovery å’Œ Agent-based Discovery</li></ul></li><li>Result is viewed in AWS Migration Hub</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145820.png"></p><ul><li>AWS Application Migration Service (MGN)<ul><li>Simplify migrating applications to AWS (å°† App è¿ç§»åˆ° AWS)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145954.png"></p><hr><h4 id="VMware-Cloud-on-AWS"><a href="#VMware-Cloud-on-AWS" class="headerlink" title="VMware Cloud on AWS"></a>VMware Cloud on AWS</h4><ul><li>Use VMware Cloud to manage and extend On-Premise Data Center</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150508.png"></p><hr><h3 id="26-More-SAA"><a href="#26-More-SAA" class="headerlink" title="26. More SAA"></a>26. More SAA</h3><h4 id="Event-Processing"><a href="#Event-Processing" class="headerlink" title="Event Processing"></a>Event Processing</h4><ul><li>Fan Out Pattern: Have SNS in the middle and subscribe to multiple SQS (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185229.png"></p><ul><li>S3 Event Notifications: Trigger Lambda or SNS when S3 event happen (åœ¨ç¬¬åä¸€ç« )<ul><li>å¦‚æœé‡åˆ°éœ€è¦ set up DLQ (Dead Letter Queue), é€‰æ‹© Lambda</li><li>DLQ æ˜¯å¤„ç†å½“ message æ²¡æœ‰åŠæ³•è¢« processed (consumed) successfully</li></ul></li><li>ä¹Ÿå¯ä»¥å’Œ EventBridge ä¸€èµ·ç”¨, æœ‰ advanced filtering<ul><li>EventBridge å¯ä»¥å’Œ CloudTrail ä¸€èµ·ç”¨æ¥ Intercept API call</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185348.png"></p><hr><h4 id="Caching-Strategies"><a href="#Caching-Strategies" class="headerlink" title="Caching Strategies"></a>Caching Strategies</h4><ul><li>Cache: ç¦»ç”¨æˆ·è¶Šè¿‘è¶Šå¿«, ä½†æ˜¯å¯èƒ½ outdated, æ‰€ä»¥éœ€è¦ TTL (Time to Live)</li><li>API Gateway: Regional Caching (å› ä¸º API Gateway æ˜¯ Regional çš„)</li><li>App Logic: é˜²æ­¢é¢‘ç¹è°ƒç”¨æ•°æ®åº“</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185932.png"></p><hr><h4 id="Block-IP-Address"><a href="#Block-IP-Address" class="headerlink" title="Block IP Address"></a>Block IP Address</h4><ul><li>NACL: Decline the client IP</li><li>WAF: IP address filtering</li><li>æ€»ä¹‹, å¯ä»¥ç”¨ NACL åœ¨å¤„ç†, ä¹Ÿå¯ä»¥ç”¨ WAF å¤„ç† (äºŒè€…é€‰ä¸€, ä½†æ˜¯ä¸€èˆ¬é€‰æ‹© WAF)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190513.png"></p><hr><h4 id="HPC-in-AWS"><a href="#HPC-in-AWS" class="headerlink" title="HPC in AWS"></a>HPC in AWS</h4><ul><li>Cloud is the perfect place to perform HPC (High Performance Computing)</li><li>Data Management &amp; Transfer (æ•°æ®å¤„ç†å’Œè¿ç§»)<ul><li>AWS Direct Connect, Snowball, AWS DataSync</li></ul></li><li>æåˆ° HPC å°±åº”è¯¥æƒ³åˆ° EFA, Cluster Placement, FSx Lustre</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190820.png"></p><ul><li>Compute &amp; Networking<ul><li>EC2 Instance + EC2 Placement Group (Cluster, å› ä¸º network å¿«)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190944.png"></p><ul><li>Compute &amp; Networking (Cont.)<ul><li>EC2 Enhanced Networking (SR-IOV): éœ€è¦ Elastic Network Adapter (ENA)</li><li>Elastic Fabric Adapter (EFA): Improved ENA for HPC, only work for Linux</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191112.png"></p><ul><li>Storage<ul><li>Instance-attached storage: EBS, Instance Store</li><li>Network storage: S3, EFS, FSx</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191328.png"></p><ul><li>Automation &amp; Orchestration<ul><li>AWS Batch: Run multi-node pararllel jobs in multiple EC2 instances</li><li>AWS ParallelCluster: Deploy HPC on AWS, can enable EFA on cluster</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191502.png"></p><hr><h4 id="EC2-Instance-High-Availability"><a href="#EC2-Instance-High-Availability" class="headerlink" title="EC2 Instance High Availability"></a>EC2 Instance High Availability</h4><ul><li>Elastic IP + Standby EC2 Instance + CloudWatch + Lambda<ul><li>å½“ failover, è½¬åˆ° standby EC2 Instance</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191841.png"></p><ul><li>Elastic IP + Auto Scaling Group (min, max)<ul><li>å½“ failover, æœ‰ replacement EC2 Instance (ä¸éœ€è¦ CloudWatch äº†)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192115.png"></p><hr><h3 id="27-Other-AWS-Services"><a href="#27-Other-AWS-Services" class="headerlink" title="27. Other AWS Services"></a>27. Other AWS Services</h3><h4 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h4><ul><li>A declarative way of outlining AWS Infrastructure (ç›¸å½“äºæœ‰ä¸€ä¸ªæ¨¡æ¿å¸®ä½ ç”Ÿæˆä½ æƒ³è¦çš„)<ul><li>éœ€è¦ä»€ä¹ˆ (eg. EC2 Instance, S3), CloudFormation ç»™ä½  create ä»€ä¹ˆ</li><li>CloudFormation æ˜¯ IaaS (Infrastructure as a Service)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003448.png"></p><ul><li>Infrastructure as a Service (IaaS, no need to manually create)</li><li>Good if we need to repeat architecture in different environment</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img003657.png"></p><hr><h4 id="CloudFormation-StackSets"><a href="#CloudFormation-StackSets" class="headerlink" title="CloudFormation StackSets"></a>CloudFormation StackSets</h4><ul><li>ä½¿ç”¨ StackSets, å¦‚æœéœ€è¦ cross account æˆ–è€… region å»ä½¿ç”¨ CloudFormation</li><li>AWS CloudFormation StackSet extends the functionality of stacks by enabling you to create, update, or delete stacks across multiple accounts and regions with a single operation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013227.png"></p><hr><h4 id="CloudFormation-Service-Role"><a href="#CloudFormation-Service-Role" class="headerlink" title="CloudFormation Service Role"></a>CloudFormation Service Role</h4><ul><li>Service Role: IAM role that allows CloudFormation to create &#x2F; update &#x2F; delete resource</li><li>Give ability to user to do the above (å®‰å…¨æ–¹é¢)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004103.png"></p><hr><h4 id="AWS-SES-Simple-Email-Service"><a href="#AWS-SES-Simple-Email-Service" class="headerlink" title="AWS SES (Simple Email Service)"></a>AWS SES (Simple Email Service)</h4><ul><li>Managed service to send email securely (å‘é‚®ä»¶çš„)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004334.png"></p><hr><h4 id="AWS-Pinpoint"><a href="#AWS-Pinpoint" class="headerlink" title="AWS Pinpoint"></a>AWS Pinpoint</h4><ul><li>Scalable 2-way (outbound &#x2F; inbound) marketing communication serivce (é‡è¦)<ul><li>ç»™å®¢æˆ·å‘æ¶ˆæ¯ç”¨çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004519.png"></p><hr><h4 id="AWS-SSM-Session-Manager"><a href="#AWS-SSM-Session-Manager" class="headerlink" title="AWS SSM Session Manager"></a>AWS SSM Session Manager</h4><ul><li>SSM Session Manager: Systems Manager Session Manager</li><li>Allow to start a secure shell on EC2 and On-Premise (æ›´å¥½çš„ä» On-Premise access EC2)<ul><li>No need SSH access (Better security)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img004759.png"></p><hr><h4 id="AWS-Cost-Explorer"><a href="#AWS-Cost-Explorer" class="headerlink" title="AWS Cost Explorer"></a>AWS Cost Explorer</h4><ul><li>Visualize &amp; manage AWS costs and usage over time (å¯ä»¥ç”Ÿæˆæ¶ˆè´¹æŠ¥å‘Š)</li><li>Can choose a optimal Saving Plan</li><li>å¦‚æœé—®å’Œé’±ç›¸å…³çš„å¾ˆå¤§ç¨‹åº¦å°±æ˜¯ Cost Explorer (é‡è¦)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005425.png"></p><hr><h4 id="AWS-Compute-Optimizer"><a href="#AWS-Compute-Optimizer" class="headerlink" title="AWS Compute Optimizer"></a>AWS Compute Optimizer</h4><ul><li>ç®€å•æ¥è¯´, Cost Explorer + Compute Optimizer ä¸€èµ·å°±æ˜¯æ¥çœé’±çš„</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img173241.png"></p><blockquote><p>AWS Compute Optimizer recommends optimal AWS Compute resources for your workloads to reduce costs and improve performance by using machine learning to analyze historical utilization metrics.</p></blockquote><hr><h4 id="AWS-Batch"><a href="#AWS-Batch" class="headerlink" title="AWS Batch"></a>AWS Batch</h4><ul><li>Managed batch processing at any scale (æ‰¹é‡å¤„ç†)<ul><li>Batch can dynamically launch EC2 Instance or Spot Instance</li></ul></li><li>Batch jobs are defined as Docker images and run on ECS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005610.png"></p><ul><li>Batch vs Lambda<ul><li>Lambda: Time limit, Serverless</li><li>Batch: No time limit, Not Serverless</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005741.png"></p><hr><h4 id="AWS-AppFlow"><a href="#AWS-AppFlow" class="headerlink" title="AWS AppFlow"></a>AWS AppFlow</h4><ul><li>Transfer data between Software-as-a-Service (SaaS) applications and AWS (é‡è¦)<ul><li>å¦‚æœé¢˜ç›®é—®åˆ° SaaS å°±è¦æƒ³èµ· AppFlow</li><li>Source: Salesforce, Slack ç­‰ç­‰ (é‡åˆ° SaaS å°±æ˜¯ AppFlow)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img005910.png"></p><hr><h4 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a>AWS Amplify</h4><ul><li>A set of tools to develop and deploy full stack web and mobile application<ul><li>æ­å»ºå…¨æ ˆé¡¹ç›®çš„</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010043.png"></p><hr><h4 id="AWS-Resource-Access-Manager-RAM"><a href="#AWS-Resource-Access-Manager-RAM" class="headerlink" title="AWS Resource Access Manager (RAM)"></a>AWS Resource Access Manager (RAM)</h4><ul><li>RAM is a service that enables easily and securely share AWS resources with any AWS account or within AWS Organization. (eg. Transite Gateway, Subnets)<ul><li>é€‰æ‹© RAM çš„ä¸»è¦åŸå› æ˜¯å®ƒä¾¿å®œ</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img043006.png"></p><hr><h4 id="AWS-Systems-Manager"><a href="#AWS-Systems-Manager" class="headerlink" title="AWS Systems Manager"></a>AWS Systems Manager</h4><ul><li>AWS Systems Manager is an AWS service that you can use to view and control your infrastructure on AWS (æ¯”å¦‚ group resources, eg. EC2, S3 ç­‰ç­‰)</li><li>Use AWS Systems Manager Run Command to run a custom command that applies the patch to all EC2 instances</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img013522.png"></p><hr><h3 id="28-WhitePapers"><a href="#28-WhitePapers" class="headerlink" title="28. WhitePapers"></a>28. WhitePapers</h3><ul><li>Well Architected Framework: æœ‰ 6 ä¸ª Pillars è¦è®°</li><li>Operational Excellence (è¿è¥) + Security (å®‰å…¨) + Reliability (å¯é ) + Performance Efficiency (æ€§èƒ½æ•ˆç‡) + Cost Optimization (çœé’±) + Sustainability (æŒç»­å‘å±•)</li><li>Maximum resilience is achieved by separate connections terminating on separate devices in more than one location</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img911011.png"></p><ul><li>AWS Well-Architected Tool<ul><li>Review architectures against 6 pillars (best practice)</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010508.png"></p><hr><h4 id="AWS-Trusted-Advisor"><a href="#AWS-Trusted-Advisor" class="headerlink" title="AWS Trusted Advisor"></a>AWS Trusted Advisor</h4><ul><li>High level AWS account assessment (AWS è´¦æˆ·è¯„ä¼°)<ul><li>Learn the best practices on cost optimization, performance, and security</li></ul></li><li>æ ¹æ®ä¸Šé¢çš„ 6 Pillars æ¥åˆ¤æ–­ (è¦è®°ä½)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img010724.png"></p><hr><h3 id="29-Extra"><a href="#29-Extra" class="headerlink" title="29. Extra"></a>29. Extra</h3><ul><li><p>DNS queries</p><ul><li>To resolve any DNS queries for resources in the AWS VPC from the on-premises network, you can create an inbound endpoint on Amazon Route 53 Resolver and then DNS resolvers on the on-premises network can forward DNS queries to Amazon Route 53 Resolver via this endpoint.</li><li>To resolve DNS queries for any resources in the on-premises network from the AWS VPC, you can create an outbound endpoint on Amazon Route 53 Resolver and then Amazon Route 53 Resolver can conditionally forward queries to resolvers on the on-premises network via this endpoint.</li></ul></li><li><p>EC2 Instance recover from impaired state</p><ul><li>A recovered instance is identical to the original instance, including the instance ID, private IP addresses, Elastic IP addresses, and all instance metadata</li><li>If your instance has a public IPv4 address, it retains the public IPv4 address after recovery</li></ul></li><li><p>Spot Instance &amp; Spot Fleet</p><ul><li>If a spot request is persistent, then it is opened again after your Spot Instance is interrupted</li><li>Spot Fleets can maintain target capacity by launching replacement instances after Spot Instances in the fleet are terminated</li><li>When you cancel an active spot request, it does not terminate the associated instance</li></ul></li><li><p>Improve the security at the authentication level by leveraging short-lived credentials</p><ul><li>Use IAM authentication from AWS Lambda to Amazon RDS PostgreSQL</li><li>Attach an AWS Identity and Access Management (IAM) role to AWS Lambda</li></ul></li><li><p>Only root user account can do</p><ul><li>Some of the AWS tasks that only a root account user can do are as follows: change account name or root password or root email address, change AWS support plan, close AWS account, enable AWS Multi-Factor Authentication (AWS MFA) on S3 bucket delete, create Cloudfront key pair, register for GovCloud.</li></ul></li></ul><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹, è°¢è°¢</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS CLF-C02</title>
      <link href="/posts/ced5b880.html"/>
      <url>/posts/ced5b880.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><ul><li>å®˜ç½‘: <a href="https://aws.amazon.com/certification/certified-cloud-practitioner/">https://aws.amazon.com/certification/certified-cloud-practitioner/</a></li></ul></blockquote><hr><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><p>é‡ç‚¹: Pay-as-you-goï¼Œon-demand delivery<br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img105337.png"></p><ul><li>There are three fundamental drivers of cost with AWS: compute, storage, and outbound data transfer. In most cases, there is no charge for inbound data transfer or data transfer between other AWS services within the same region.</li></ul><hr><h4 id="Types-of-Cloud-Computing"><a href="#Types-of-Cloud-Computing" class="headerlink" title="Types of Cloud Computing"></a>Types of Cloud Computing</h4><p>é‡ç‚¹: 3 types of cloud computing</p><ul><li>IaaS: æ¯”å¦‚ EC2</li><li>PaaS: æ¯”å¦‚ Elastic Beanstalk</li><li>SaaS: æ¯”å¦‚ Rekognition</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110812.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110945.png"></p><hr><h4 id="Six-Advantages-of-Cloud-Computing"><a href="#Six-Advantages-of-Cloud-Computing" class="headerlink" title="Six Advantages of Cloud Computing"></a>Six Advantages of Cloud Computing</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img084401.png"></p><hr><h4 id="AWS-Global-Infrastructure"><a href="#AWS-Global-Infrastructure" class="headerlink" title="AWS Global Infrastructure"></a>AWS Global Infrastructure</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img114544.png"></p><p>AWS Region</p><ul><li>A region is a cluster of data centers</li><li>ä¸€ä¸ª Region è‡³å°‘æœ‰ä¸‰ä¸ª AZ</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img114639.png"></p><p>AWS Availability Zones</p><ul><li>Each availiablity zone (AZ) is one or more discrete data centers in the same location</li><li>AZ ç»„åˆèµ·æ¥å°±æ˜¯ Region</li><li>All traffic between Availability Zones (AZ) is encrypted</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img114958.png"></p><p>AWS Points of Presence (Edge Locations)</p><ul><li>Content is delivered to end users with low latency</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img115255.png"></p><hr><h4 id="AWS-Shared-Responsibility-Model"><a href="#AWS-Shared-Responsibility-Model" class="headerlink" title="AWS Shared Responsibility Model"></a>AWS Shared Responsibility Model</h4><ul><li>AWS è´Ÿè´£ä»€ä¹ˆï¼ŒCustomer è´Ÿè´£ä»€ä¹ˆ</li><li>AWS is responsible for Security â€œofâ€ the Cloud</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img120115.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103332.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103410.png"></p><hr><h3 id="1-Identity-and-Access-Management"><a href="#1-Identity-and-Access-Management" class="headerlink" title="1. Identity and Access Management"></a>1. Identity and Access Management</h3><h4 id="IAM-Users-amp-Group"><a href="#IAM-Users-amp-Group" class="headerlink" title="IAM Users &amp; Group"></a>IAM Users &amp; Group</h4><ul><li>Global service</li><li>Root account: donâ€™t share with others</li><li>Root user access credentials are the email address and password used to create the AWS account</li><li>Users: people within organization</li><li>Groups: a group of people</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134540.png"></p><p>IAM Permissions</p><ul><li>least privilege principle</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134928.png"></p><h4 id="IAM-Policies"><a href="#IAM-Policies" class="headerlink" title="IAM Policies"></a>IAM Policies</h4><ul><li>Inline Policy æ˜¯ Attach ç»™ä¸ªäººçš„ Policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img135808.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140013.png"></p><p>IAM Password Policy &amp; MFA</p><ul><li>MFA æ˜¯ Root Account çš„ Best Practice</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142523.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142218.png"></p><p>AWS Access Keys &amp; CLI &amp; SDK</p><ul><li>æœ‰ 3 ç§æ–¹æ³• Access AWS: AWS Management Consoleï¼ŒAWS CLIï¼ŒAWS SDK</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img143439.png"></p><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul><li>Assign permissions to AWS services with IAM Roles</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150558.png"></p><p>IAM Guildlines &amp; Best Parctices</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153158.png"></p><p>Shared Responsibility Model for IAM</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img153447.png"></p><h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img154627.png"></p><hr><h3 id="2-Elastic-Compute-Cloud"><a href="#2-Elastic-Compute-Cloud" class="headerlink" title="2. Elastic Compute Cloud"></a>2. Elastic Compute Cloud</h3><h4 id="AWS-EC2"><a href="#AWS-EC2" class="headerlink" title="AWS EC2"></a>AWS EC2</h4><ul><li>60 seconds - There is a one-minute minimum charge for Linux based EC2 instances</li><li>Convertible reserved instance (RI): Purchase convertible reserved instance (RI) if you need additional flexibility, such as the ability to use different instance families, operating systems, or tenancies over the reserved instance (RI) term.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img193350.png"></p><p>User Data:</p><ul><li>EC2 Instance ç¬¬ä¸€æ¬¡è·‘çš„æ—¶å€™ä¼š Runï¼Œç”¨æ¥åš Task (æ¯”å¦‚å®‰è£… Apache)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img194029.png"></p><h4 id="EC2-Instance-Types"><a href="#EC2-Instance-Types" class="headerlink" title="EC2 Instance Types"></a>EC2 Instance Types</h4><ul><li>General Purpose: Balance between Computeï¼ŒMemoryï¼ŒNetworking</li><li>Compute Optimized: Great for compute-intensive tasks</li><li>Memory Optimized: Fast performance for workloads that process large data sets</li><li>Storage Optimized: Great for storage-intensive tasks</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img195856.png"></p><h4 id="Security-Groups"><a href="#Security-Groups" class="headerlink" title="Security Groups"></a>Security Groups</h4><ul><li>Security Group å°±æ˜¯ EC2 çš„é˜²ç«å¢™</li><li>Security Group å¯ä»¥ Attach ç»™å¤šä¸ª Instances</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200755.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201255.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201629.png"></p><h4 id="EC2-Instances-Purchasing-Options"><a href="#EC2-Instances-Purchasing-Options" class="headerlink" title="EC2 Instances Purchasing Options"></a>EC2 Instances Purchasing Options</h4><ul><li>On-Demand Instances: Pay for what you use</li><li>Reserved: é•¿æœŸä½¿ç”¨ (1-3 å¹´)</li><li>Saving Plans: æœ‰å›ºå®šçš„ Billingï¼Œè¶…è¿‡çš„è¿›å…¥ On-Demand</li><li>Spot Instances: æœ€ä¾¿å®œï¼Œä½†æ˜¯å¯èƒ½ Lose Instance</li><li>Dedicated Hosts: å®Œå…¨ Control ä¸€ä¸ª Server</li><li>Capacity Reservations: çŸ­æœŸå†…ä¿è¯æœ‰ Instance å¯ä»¥ä½¿ç”¨ï¼Œå³ä½¿ä¸ä½¿ç”¨</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img024118.png"></p><p>Shared Responsibility Model for EC2</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025826.png"></p><h4 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img025957.png"></p><hr><h3 id="3-EC2-Instance-Storage"><a href="#3-EC2-Instance-Storage" class="headerlink" title="3. EC2 Instance Storage"></a>3. EC2 Instance Storage</h3><h4 id="AWS-EBS"><a href="#AWS-EBS" class="headerlink" title="AWS EBS"></a>AWS EBS</h4><ul><li>Attach EBS to EC2 instance like a USB drive</li><li>EBS Volume tied to AZ</li><li>Persist data even after termination</li><li>Block-level storage</li><li>Charge for EBS Volumes: Provisioned IOPSï¼ŒVolume type</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img030842.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img032719.png"></p><p>EBS Snapshots (å¤‡ä»½)</p><ul><li>Make a backup (snapshot) of EBS volume</li><li>Recycle Bin å¯ä»¥é˜²æ­¢ Accidental Delete</li><li>Amazon Elastic Block Store (Amazon EBS) Snapshots are stored incrementally, which means you are billed only for the changed blocks stored</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img035925.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img040322.png"></p><p>EC2 Instance Store</p><ul><li>ç‰©ç†ç¡¬ç›˜</li><li>Block-level storage</li><li>Fast I&#x2F;O performance</li><li>Good for cache</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img054643.png"></p><p>Shared Responsibility Model for EC2 Storage</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img055927.png"></p><hr><h4 id="AWS-EFS"><a href="#AWS-EFS" class="headerlink" title="AWS EFS"></a>AWS EFS</h4><ul><li>å¯ä»¥ Mount åˆ°å¤šä¸ª EC2 Instance</li><li>Provides a simple, scalable, fully managed elastic NFS file system for use with AWS Cloud services and on-premises resources.</li><li>EBS volume can be attached to a single instance in the same Availability Zone (AZ) whereas EFS file system can be mounted on instances across multiple Availability Zones (AZ)</li><li>EC2 instances can access files on an Amazon Elastic File System (Amazon EFS) file system across many Availability Zones (AZ), Regions and VPCs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img055110.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img055536.png"></p><p>EFS Infrequent Access (EFS-IA)</p><ul><li>Storing files in an accessible location to satisfy audit requirements</li><li>You will pay a fee each time you read from or write data stored on the Amazon Elastic File System (Amazon EFS) - Infrequent Access storage class</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img055437.png"></p><hr><h4 id="AWS-AMI"><a href="#AWS-AMI" class="headerlink" title="AWS AMI"></a>AWS AMI</h4><ul><li>Amazon Machine Image</li><li>å¯ä»¥æ›´å¥½çš„ Configure å’Œ Launch EC2 Instance (æ¯”å¦‚ä¸éœ€è¦é‡è£… Apache)</li><li>Region specific</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img053649.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img053738.png"></p><p>EC2 Image Builder</p><ul><li>Automatically buildï¼Œtest and distribute AMIs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img054433.png"></p><hr><h4 id="AWS-FSx"><a href="#AWS-FSx" class="headerlink" title="AWS FSx"></a>AWS FSx</h4><ul><li>ç¬¬ä¸‰æ–¹æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ</li><li>FSx for Windows</li><li>FSx for Lustre</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img060300.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img060312.png"></p><hr><h4 id="Summary-2"><a href="#Summary-2" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img060513.png"></p><hr><h3 id="4-ELB-amp-ASG"><a href="#4-ELB-amp-ASG" class="headerlink" title="4. ELB &amp; ASG"></a>4. ELB &amp; ASG</h3><h4 id="Scalability-amp-High-Availability"><a href="#Scalability-amp-High-Availability" class="headerlink" title="Scalability &amp; High Availability"></a>Scalability &amp; High Availability</h4><ul><li>Vertical Scale: increase the size of the instance</li><li>Horizontal Scale: increase the number of instances (elastic)</li><li>High Availability: running application in at least 2 AZ (disaster recovery)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img065903.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080120.png"></p><hr><h4 id="AWS-ELB"><a href="#AWS-ELB" class="headerlink" title="AWS ELB"></a>AWS ELB</h4><ul><li>Spread load across multiple downstream instances</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085521.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085832.png"></p><ul><li>Application Load Balancer (HTTP&#x2F;HTTPS)</li><li>Network Load Balancer (Allow TCP&#x2F;UDP)</li><li>Gateway Load Balancer (Security)</li><li>Classic Load Balancer (retired in 2023)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090125.png"></p><hr><h4 id="AWS-ASG"><a href="#AWS-ASG" class="headerlink" title="AWS ASG"></a>AWS ASG</h4><ul><li>å¯ä»¥ä½œä¸º Template æ¥ç”Ÿæˆ EC2 Instance (Launch Template)</li><li>å¯ä»¥å’Œ ELB ä¸€èµ·ç”¨ï¼Œæ¥ Scale Up or Down åŸºäºæœåŠ¡å™¨å‹åŠ›</li><li>å¯ä»¥è‡ªåŠ¨ Replace Unhealth Instance (Meet desired Instances)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091045.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091228.png"></p><p>Scaling Strategies</p><ul><li>Manual Scaling</li><li>Dynamic Scaling</li><li>Predictive Scaling (Use ML)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092355.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092454.png"></p><hr><h4 id="Summary-3"><a href="#Summary-3" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092733.png"></p><hr><h3 id="5-Simple-Storage-Service"><a href="#5-Simple-Storage-Service" class="headerlink" title="5. Simple Storage Service"></a>5. Simple Storage Service</h3><h4 id="AWS-S3"><a href="#AWS-S3" class="headerlink" title="AWS S3"></a>AWS S3</h4><ul><li><p>Buckets have a globally unique name</p></li><li><p>Buckets are defined at the region level</p></li><li><p>All Amazon S3 buckets have encryption configured by default, and objects are automatically encrypted by using server-side encryption with Amazon S3 managed keys (SSE-S3).</p></li><li><p>Amazon Simple Storage Service (Amazon S3) is a key value based object storage service</p></li><li><p>Amazon Simple Storage Service (Amazon S3) stores data in a flat non-hierarchical structure</p></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img093348.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img093802.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img093849.png"></p><p>Bucket Policies</p><ul><li>User Access to S3: Use IAM permission</li><li>EC2 Instance Access: Use IAM Roles</li><li>Cross-Account Access: Use Bucket Policy</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img102509.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img102630.png"></p><p>S3 Website (Static Website Hosting)</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img104755.png"></p><p>S3 Versioning</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img105035.png"></p><p>S3 Replication (CRR &amp; SRR)</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img105607.png"></p><p>S3 Storage Classes</p><ul><li>Standard</li><li>Infrequent Access (IA)</li><li>Glacier</li><li>Intelligent Tiering</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110113.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110226.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110336.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110708.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img110810.png"></p><p>S3 Encryption</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img111248.png"></p><p>Shared Responsibility Model for S3</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img111547.png"></p><hr><h4 id="AWS-Snow-Family"><a href="#AWS-Snow-Family" class="headerlink" title="AWS Snow Family"></a>AWS Snow Family</h4><ul><li>Snowconeï¼ŒSnowball (TB &amp; Petabyte-scale)ï¼ŒSnowmobile (Exabytes-scale)</li><li>Transfer data to AWS physically</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img122700.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175223.png"></p><p>Edge Computing</p><ul><li>åœ¨ä»»ä½•åœ°æ–¹å¤„ç†æ•°æ®</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img123338.png"></p><hr><h4 id="AWS-OpsHub"><a href="#AWS-OpsHub" class="headerlink" title="AWS OpsHub"></a>AWS OpsHub</h4><ul><li>Manage Snow Family Device</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img123604.png"></p><hr><h4 id="AWS-Storage-Gateway"><a href="#AWS-Storage-Gateway" class="headerlink" title="AWS Storage Gateway"></a>AWS Storage Gateway</h4><ul><li>å¤„ç† Hybrid Storage on Cloud</li><li>Automatically enabled data encryption</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img132624.png"></p><hr><h4 id="Summary-4"><a href="#Summary-4" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img132831.png"></p><hr><h3 id="6-Database-amp-Analytics"><a href="#6-Database-amp-Analytics" class="headerlink" title="6. Database &amp; Analytics"></a>6. Database &amp; Analytics</h3><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134205.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img242377.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134415.png"></p><hr><h4 id="AWS-RDS"><a href="#AWS-RDS" class="headerlink" title="AWS RDS"></a>AWS RDS</h4><ul><li>è´Ÿè´£ Relational Database</li><li>Amazon RDS RIs: Like Amazon EC2 RIs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img124658.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134210.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134849.png"></p><p>AWS Aurora</p><ul><li>AWS å¼€å‘çš„æ•°æ®åº“</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img134956.png"></p><p>RDS Deployments Options</p><ul><li>Read Replicas: Scale</li><li>Multi-AZ: Failover</li><li>Multi-Region: Disaster recovery</li><li>You can use both read replicas and multi-AZ deployment for disaster recovery</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140045.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img148104.png"></p><hr><h4 id="AWS-Elastic-Cache"><a href="#AWS-Elastic-Cache" class="headerlink" title="AWS Elastic Cache"></a>AWS Elastic Cache</h4><ul><li>In-memory database (ç±»ä¼¼ Redis)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140153.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140242.png"></p><hr><h4 id="AWS-DynamoDB"><a href="#AWS-DynamoDB" class="headerlink" title="AWS DynamoDB"></a>AWS DynamoDB</h4><ul><li>NoSQL Database</li><li>DynamoDB Reserved Capacity</li><li>Support High Availability by default</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142315.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img143342.png"></p><p>DynamoDB Accelerator (DAX)</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142430.png"></p><p>DynamoDB Global Tables</p><ul><li>Low latency in multiple-regions</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142815.png"></p><hr><h4 id="AWS-Redshift"><a href="#AWS-Redshift" class="headerlink" title="AWS Redshift"></a>AWS Redshift</h4><ul><li>Analytics and data warehousing</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img143251.png"></p><p>Redshift Serverless</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img123392.png"></p><hr><h4 id="AWS-EMR"><a href="#AWS-EMR" class="headerlink" title="AWS EMR"></a>AWS EMR</h4><ul><li>Help creating Hadoop clusters (Big Data) to analyze vast amount of data</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img242278.png"></p><hr><h4 id="AWS-Athena"><a href="#AWS-Athena" class="headerlink" title="AWS Athena"></a>AWS Athena</h4><ul><li>Perform analytics against S3 objects</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144857.png"></p><hr><h4 id="AWS-QuickSight"><a href="#AWS-QuickSight" class="headerlink" title="AWS QuickSight"></a>AWS QuickSight</h4><ul><li>ç”Ÿæˆ Visualization Dashboard (å¤„ç† BI)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145053.png"></p><hr><h4 id="AWS-DocumentDB"><a href="#AWS-DocumentDB" class="headerlink" title="AWS DocumentDB"></a>AWS DocumentDB</h4><ul><li>For MongoDBï¼ŒNoSQL</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145305.png"></p><hr><h4 id="AWS-Neptune"><a href="#AWS-Neptune" class="headerlink" title="AWS Neptune"></a>AWS Neptune</h4><ul><li>Graph database</li><li>NoSQL</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145437.png"></p><hr><h4 id="AWS-Timestream"><a href="#AWS-Timestream" class="headerlink" title="AWS Timestream"></a>AWS Timestream</h4><ul><li>Time series database</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img145616.png"></p><hr><h4 id="AWS-QLDB"><a href="#AWS-QLDB" class="headerlink" title="AWS QLDB"></a>AWS QLDB</h4><ul><li>Immutableï¼Œfor financial transcations</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img122316.png"></p><hr><h4 id="AWS-Managed-Blockchain"><a href="#AWS-Managed-Blockchain" class="headerlink" title="AWS Managed Blockchain"></a>AWS Managed Blockchain</h4><ul><li>Decentralized</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150042.png"></p><hr><h4 id="AWS-Glue"><a href="#AWS-Glue" class="headerlink" title="AWS Glue"></a>AWS Glue</h4><ul><li>AWS Glue is a fully managed extract, transform, and load (ETL) service that makes it easy for customers to prepare and load their data for analytics.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img150226.png"></p><hr><h4 id="AWS-DMS"><a href="#AWS-DMS" class="headerlink" title="AWS DMS"></a>AWS DMS</h4><ul><li>Database Migration Service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img120404.png"></p><hr><h4 id="Summary-5"><a href="#Summary-5" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img622313.png"></p><hr><h3 id="7-Other-Compute-Services"><a href="#7-Other-Compute-Services" class="headerlink" title="7. Other Compute Services"></a>7. Other Compute Services</h3><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><ul><li>Launch Docker containers on AWS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185536.png"></p><hr><h4 id="AWS-Fargate"><a href="#AWS-Fargate" class="headerlink" title="AWS Fargate"></a>AWS Fargate</h4><ul><li>Launch Docker containers on AWS (Serverless)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185649.png"></p><hr><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><ul><li>Docker Registry on AWS</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185752.png"></p><hr><h4 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h4><ul><li>Could be Event-Driven</li><li>Could use EventBridge trigger Lambda every hour (CRON)</li><li>You pay for the compute time you consume for AWS Lambda</li><li>Serverless</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190238.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img022933.png"></p><hr><h4 id="AWS-API-Gateway"><a href="#AWS-API-Gateway" class="headerlink" title="AWS API Gateway"></a>AWS API Gateway</h4><ul><li>Expose Lambda as HTTP API</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img031238.png"></p><hr><h4 id="AWS-Batch"><a href="#AWS-Batch" class="headerlink" title="AWS Batch"></a>AWS Batch</h4><ul><li>A job with a start and an end</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img035927.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img040028.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img040129.png"></p><hr><h4 id="AWS-Lightsail"><a href="#AWS-Lightsail" class="headerlink" title="AWS Lightsail"></a>AWS Lightsail</h4><ul><li>For people with little cloud experience</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042248.png"></p><hr><h4 id="Summary-6"><a href="#Summary-6" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042816.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img042914.png"></p><hr><h3 id="8-Deployment-amp-Manage-Infrastructure"><a href="#8-Deployment-amp-Manage-Infrastructure" class="headerlink" title="8. Deployment &amp; Manage Infrastructure"></a>8. Deployment &amp; Manage Infrastructure</h3><h4 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h4><ul><li>Infrastructure as code (ä¸éœ€è¦æ‰‹åŠ¨ Config EC2 ä¹‹ç±»çš„)</li><li>ä½œä¸º Template æ¥ç”Ÿæˆå„ç§ Services</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img044630.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img044747.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img044837.png"></p><hr><h4 id="AWS-CDK"><a href="#AWS-CDK" class="headerlink" title="AWS CDK"></a>AWS CDK</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img045950.png"></p><hr><h4 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h4><ul><li>PaaS (åªè´Ÿè´£å†™ Applicationï¼Œå…¶ä»–éƒ½ç”± EB æ¥å¤„ç†)</li><li>Free of cost</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img064808.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img064855.png"></p><hr><h4 id="AWS-CodeDeploy"><a href="#AWS-CodeDeploy" class="headerlink" title="AWS CodeDeploy"></a>AWS CodeDeploy</h4><ul><li>Deploy application automatically</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img074724.png"></p><hr><h4 id="AWS-CodeCommit"><a href="#AWS-CodeCommit" class="headerlink" title="AWS CodeCommit"></a>AWS CodeCommit</h4><ul><li>ç±»ä¼¼ Github</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img074839.png"></p><hr><h4 id="AWS-CodeBuild"><a href="#AWS-CodeBuild" class="headerlink" title="AWS CodeBuild"></a>AWS CodeBuild</h4><ul><li>Automatically build and test</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075430.png"></p><hr><h4 id="AWS-CodePipeline"><a href="#AWS-CodePipeline" class="headerlink" title="AWS CodePipeline"></a>AWS CodePipeline</h4><ul><li>CICD</li><li>AWS CodePipeline uses Amazon CloudWatch Events to detect changes in CodeCommit repositories used as a source for a pipeline</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img081356.png"></p><hr><h4 id="AWS-CodeArtifact"><a href="#AWS-CodeArtifact" class="headerlink" title="AWS CodeArtifact"></a>AWS CodeArtifact</h4><ul><li>Manage packages (dependencies)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img082203.png"></p><hr><h4 id="AWS-CodeStar"><a href="#AWS-CodeStar" class="headerlink" title="AWS CodeStar"></a>AWS CodeStar</h4><ul><li>Each AWS CodeStar project includes development tools, including AWS CodePipeline, AWS CodeCommit, AWS CodeBuild, and AWS CodeDeploy, that can be used on their own and with existing AWS applications</li><li>You can use AWS CodeStar and AWS Cloud9 to develop, build, and deploy a serverless web application</li></ul><hr><h4 id="AWS-Cloud9"><a href="#AWS-Cloud9" class="headerlink" title="AWS Cloud9"></a>AWS Cloud9</h4><ul><li>Cloud IDE</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img082707.png"></p><hr><h4 id="AWS-SSM"><a href="#AWS-SSM" class="headerlink" title="AWS SSM"></a>AWS SSM</h4><ul><li>Manage a fleet of EC2 Instances</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img135524.png"></p><hr><h4 id="Summary-7"><a href="#Summary-7" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140426.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img140520.png"></p><hr><h3 id="9-AWS-Global-Infrastructure"><a href="#9-AWS-Global-Infrastructure" class="headerlink" title="9. AWS Global Infrastructure"></a>9. AWS Global Infrastructure</h3><p>Why make a global application?</p><ul><li>Decreased Latency</li><li>Disaster Recovery (DR)</li></ul><p>Global Applications in AWS</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142534.png"></p><hr><h4 id="AWS-Route53"><a href="#AWS-Route53" class="headerlink" title="AWS Route53"></a>AWS Route53</h4><ul><li>DNS (Domain Name System)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142637.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142729.png"></p><p>Routing Policies</p><ul><li>Simple Routing Policy (No health check)</li><li>Weighted Routing Policy (Distribute traffic)</li><li>Latency Routing Policy (Minimize Latency)</li><li>Failover Routing Policy (Disaster recoveryï¼Œactive-passive)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142821.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img142907.png"></p><hr><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><ul><li>Global service</li><li>CDN</li><li>Cached in edged location</li><li>Integrated with WAF (Network Firewall) and Shield (DDoS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144056.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144157.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144238.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img144434.png"></p><hr><h4 id="AWS-Global-Accelerator"><a href="#AWS-Global-Accelerator" class="headerlink" title="AWS Global Accelerator"></a>AWS Global Accelerator</h4><ul><li>AWS Internal Network (No cache)</li><li>AWS Global Accelerator is a good fit for non-HTTP use cases</li><li>AWS Global Accelerator provides static IP addresses that act as a fixed entry point to your applications</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184614.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184642.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img184736.png"></p><hr><h4 id="AWS-Outposts"><a href="#AWS-Outposts" class="headerlink" title="AWS Outposts"></a>AWS Outposts</h4><ul><li>Server Rack (ç‰©ç†å±‚é¢)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185046.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185126.png"></p><hr><h4 id="AWS-WaveLength"><a href="#AWS-WaveLength" class="headerlink" title="AWS WaveLength"></a>AWS WaveLength</h4><ul><li>5G</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185306.png"></p><hr><h4 id="AWS-Local-Zones"><a href="#AWS-Local-Zones" class="headerlink" title="AWS Local Zones"></a>AWS Local Zones</h4><ul><li>AWS Local Zones allow you to use select AWS services, like compute and storage services, closer to more end-users, providing them very low latency access to the applications running locally.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185415.png"></p><hr><h4 id="Global-Applications-Architecture"><a href="#Global-Applications-Architecture" class="headerlink" title="Global Applications Architecture"></a>Global Applications Architecture</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185706.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185814.png"></p><hr><h4 id="Summary-8"><a href="#Summary-8" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img185939.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img190014.png"></p><hr><h3 id="10-Cloud-Integration"><a href="#10-Cloud-Integration" class="headerlink" title="10.Cloud Integration"></a>10.Cloud Integration</h3><ul><li>SQSï¼ŒSNSï¼ŒKinesis</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img191712.png"></p><hr><h4 id="AWS-SQS"><a href="#AWS-SQS" class="headerlink" title="AWS SQS"></a>AWS SQS</h4><ul><li>Decouple application</li><li>Message deleted after Customer read</li><li>Guarantee message will be processed</li><li>Queue Model</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192002.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192052.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192138.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img192214.png"></p><hr><h4 id="AWS-Kinesis"><a href="#AWS-Kinesis" class="headerlink" title="AWS Kinesis"></a>AWS Kinesis</h4><ul><li>Real-time big data streaming</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200432.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200512.png"></p><hr><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><ul><li>Send one message to many receivers</li><li>Pub&#x2F;Sub Model</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200634.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img200723.png"></p><hr><h4 id="AWS-MQ"><a href="#AWS-MQ" class="headerlink" title="AWS MQ"></a>AWS MQ</h4><ul><li>ç®¡ç†ç¬¬ä¸‰æ–¹è½¯ä»¶</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201142.png"></p><hr><h4 id="Summary-9"><a href="#Summary-9" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img201319.png"></p><hr><h3 id="11-Cloud-Monitoring"><a href="#11-Cloud-Monitoring" class="headerlink" title="11. Cloud Monitoring"></a>11. Cloud Monitoring</h3><h4 id="AWS-CloudWatch"><a href="#AWS-CloudWatch" class="headerlink" title="AWS CloudWatch"></a>AWS CloudWatch</h4><ul><li>Application performance</li><li>Resource utilization</li></ul><p>CloudWatch Metric</p><ul><li>Billing metric data is stored in the US East (N. Virginia) Region and represents worldwide charges.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202020.png"></p><p>CloudWatch Alarms</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img202259.png"></p><p>CloudWatch Logs</p><ul><li>Use CloudWatch Logs for both the EC2 instance and the on-premises servers</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203214.png"></p><hr><h4 id="AWS-EventBridge"><a href="#AWS-EventBridge" class="headerlink" title="AWS EventBridge"></a>AWS EventBridge</h4><ul><li>å®šåˆ¶ Event æ¥è§¦å‘æŸäº›åŠŸèƒ½ (Lambdaï¼ŒSNS)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203642.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img203712.png"></p><hr><h4 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h4><ul><li>Governanceï¼Œcompliance and audit for AWS account</li><li>AWS CloudTrail Insights helps AWS users identify and respond to unusual activity associated with write API calls by continuously analyzing CloudTrail management events.</li><li>By default, AWS CloudTrail logs all management events and does not include data events or Insights events.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img064634.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img064712.png"></p><hr><h4 id="AWS-X-Ray"><a href="#AWS-X-Ray" class="headerlink" title="AWS X-Ray"></a>AWS X-Ray</h4><ul><li>You can use AWS X-Ray to analyze and debug serverless and distributed applications such as those built using a microservices architecture.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img070456.png"></p><hr><h4 id="AWS-CodeGuru"><a href="#AWS-CodeGuru" class="headerlink" title="AWS CodeGuru"></a>AWS CodeGuru</h4><ul><li>ML for code review</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img073052.png"></p><hr><h4 id="AWS-Health-Dashboard"><a href="#AWS-Health-Dashboard" class="headerlink" title="AWS Health Dashboard"></a>AWS Health Dashboard</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img073557.png"></p><hr><h4 id="Summary-10"><a href="#Summary-10" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img074126.png"></p><hr><h3 id="12-VPC-amp-Networking"><a href="#12-VPC-amp-Networking" class="headerlink" title="12. VPC &amp; Networking"></a>12. VPC &amp; Networking</h3><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><p>IP Address in AWS</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075533.png"></p><p>VPC &amp; Subnets</p><ul><li>VPC: Virtual Private Network</li><li>Subnets: Partition network inside VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075637.png"></p><p>Internet Gateway &amp; NAT Gateways</p><ul><li>IGW: Public</li><li>NAT: Private</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075859.png"></p><p>Security Groups &amp; Network Access Control List (NACL)</p><ul><li>NACL: Firewall for Allow and Deny rules</li><li>Security Group: Firewall for Allow rules</li><li>A security group is stateful, that is, it automatically allows the return traffic</li><li>Security Group acts as a firewall at the instance level whereas Network Access Control List (Network ACL) acts as a firewall at the subnet level</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080543.png"></p><p>VPC Flow Logs</p><ul><li>Capture log information</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080849.png"></p><p>VPC Peering</p><ul><li>Connect two VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080936.png"></p><p>VPC Endpoints</p><ul><li>Access services privately</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101047.png"></p><hr><h4 id="AWS-PrivateLink"><a href="#AWS-PrivateLink" class="headerlink" title="AWS PrivateLink"></a>AWS PrivateLink</h4><ul><li>ç¬¬ä¸‰æ–¹ VPC è¿æ¥åˆ° AWS VPC</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101255.png"></p><hr><h4 id="Site-to-Site-VPN-amp-Direct-Connect"><a href="#Site-to-Site-VPN-amp-Direct-Connect" class="headerlink" title="Site to Site VPN &amp; Direct Connect"></a>Site to Site VPN &amp; Direct Connect</h4><ul><li>AWS Direct Connect is a cloud service solution that makes it easy to establish a dedicated network connection from your premises to AWS.</li><li>Components of AWS Site to Site VPN: Virtual private gateway (VGW)ï¼ŒCustomer gateway</li><li>A customer gateway device is a physical or software appliance on your side of a Site-to-Site VPN connection. You or your network administrator must configure the device to work with the Site-to-Site VPN connection.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101436.png"></p><hr><h4 id="AWS-ClientVPN"><a href="#AWS-ClientVPN" class="headerlink" title="AWS ClientVPN"></a>AWS ClientVPN</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101635.png"></p><hr><h4 id="AWS-Transit-Gateway"><a href="#AWS-Transit-Gateway" class="headerlink" title="AWS Transit Gateway"></a>AWS Transit Gateway</h4><ul><li>AWS Transit Gateway connects Amazon Virtual Private Clouds (Amazon VPC) and on-premises networks through a central hub.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101746.png"></p><hr><h4 id="AWS-VPN"><a href="#AWS-VPN" class="headerlink" title="AWS VPN"></a>AWS VPN</h4><ul><li>AWS Virtual Private Network (VPN) solutions establish secure connections between on-premises networks, remote offices, client devices, and the AWS global network.</li></ul><hr><h4 id="Summary-11"><a href="#Summary-11" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img101912.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img102013.png"></p><hr><h3 id="13-Security-amp-Compliance"><a href="#13-Security-amp-Compliance" class="headerlink" title="13. Security &amp; Compliance"></a>13. Security &amp; Compliance</h3><h4 id="AWS-WAF-amp-Shield"><a href="#AWS-WAF-amp-Shield" class="headerlink" title="AWS WAF &amp; Shield"></a>AWS WAF &amp; Shield</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103546.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103621.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103650.png"></p><p>AWS Shield</p><ul><li>é˜²æ­¢ DDoS æ”»å‡»</li><li>Shield Advance ç”¨åœ¨ Route53 å’Œ AWS Global Accelerator ä¸Š</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103738.png"></p><p>AWS WAF</p><ul><li>Define Web ACL (Access Control List)</li><li>Can be deployed on Amazon CloudFront, Application Load Balancer, Amazon API Gateway, AWS AppSync</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103839.png"></p><hr><h4 id="AWS-Network-Firewall"><a href="#AWS-Network-Firewall" class="headerlink" title="AWS Network Firewall"></a>AWS Network Firewall</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img103945.png"></p><hr><h4 id="AWS-Firewall-Manager"><a href="#AWS-Firewall-Manager" class="headerlink" title="AWS Firewall Manager"></a>AWS Firewall Manager</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img105934.png"></p><hr><h4 id="AWS-KMS-amp-CloudHSM"><a href="#AWS-KMS-amp-CloudHSM" class="headerlink" title="AWS KMS &amp; CloudHSM"></a>AWS KMS &amp; CloudHSM</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img120236.png"></p><p>KMS: Manage Encryption keys</p><ul><li>Use AWS managed master keys that are automatically created in your account for each service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img120343.png"></p><p>CloudHSM: Encryption Hardware (ç‰©ç†å±‚é¢)</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img120433.png"></p><hr><h4 id="AWS-ACM"><a href="#AWS-ACM" class="headerlink" title="AWS ACM"></a>AWS ACM</h4><ul><li>Manage certificates</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img124350.png"></p><hr><h4 id="AWS-Secrets-Manager"><a href="#AWS-Secrets-Manager" class="headerlink" title="AWS Secrets Manager"></a>AWS Secrets Manager</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img124445.png"></p><hr><h4 id="AWS-Artifact"><a href="#AWS-Artifact" class="headerlink" title="AWS Artifact"></a>AWS Artifact</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img124706.png"></p><hr><h4 id="AWS-GuardDuty"><a href="#AWS-GuardDuty" class="headerlink" title="AWS GuardDuty"></a>AWS GuardDuty</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img125533.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img125621.png"></p><hr><h4 id="AWS-Inspector"><a href="#AWS-Inspector" class="headerlink" title="AWS Inspector"></a>AWS Inspector</h4><ul><li>Amazon Inspector is an automated security assessment service that helps improve the security and compliance of applications deployed on AWS.</li><li>Only for EC2, Container Image &amp; Lambda</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img125801.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img125844.png"></p><hr><h4 id="AWS-Config"><a href="#AWS-Config" class="headerlink" title="AWS Config"></a>AWS Config</h4><ul><li>AWS Config is a service that enables you to assess, audit, and evaluate the configurations of your AWS resources.</li><li>Think resource-specific history, audit, and compliance; think Config.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img125948.png"></p><hr><h4 id="AWS-Macie"><a href="#AWS-Macie" class="headerlink" title="AWS Macie"></a>AWS Macie</h4><ul><li>Find sensitive data</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img130515.png"></p><hr><h4 id="AWS-Security-Hub"><a href="#AWS-Security-Hub" class="headerlink" title="AWS Security Hub"></a>AWS Security Hub</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img131533.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img131605.png"></p><hr><h4 id="AWS-Detective"><a href="#AWS-Detective" class="headerlink" title="AWS Detective"></a>AWS Detective</h4><ul><li>Analyze AWS CloudTrail logs, Amazon VPC Flow Logs, and Amazon GuardDuty findings</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img132824.png"></p><hr><h4 id="IAM-Access-Analyzer"><a href="#IAM-Access-Analyzer" class="headerlink" title="IAM Access Analyzer"></a>IAM Access Analyzer</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img133559.png"></p><hr><h4 id="Summary-12"><a href="#Summary-12" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img152124.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img155139.png"></p><hr><h3 id="14-Machine-Learning"><a href="#14-Machine-Learning" class="headerlink" title="14. Machine Learning"></a>14. Machine Learning</h3><h4 id="AWS-Rekognition"><a href="#AWS-Rekognition" class="headerlink" title="AWS Rekognition"></a>AWS Rekognition</h4><ul><li>Find text or image using ML</li><li>Regional in scope</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164327.png"></p><hr><h4 id="AWS-Transcribe"><a href="#AWS-Transcribe" class="headerlink" title="AWS Transcribe"></a>AWS Transcribe</h4><ul><li>Convert speech to text</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img164826.png"></p><hr><h4 id="Amazon-Elastic-Transcoder"><a href="#Amazon-Elastic-Transcoder" class="headerlink" title="Amazon Elastic Transcoder"></a>Amazon Elastic Transcoder</h4><ul><li>Amazon Elastic Transcoder lets you convert media files that you have stored in Amazon Simple Storage Service (Amazon S3) into media files in the formats required by consumer playback devices.</li></ul><hr><h4 id="AWS-Polly"><a href="#AWS-Polly" class="headerlink" title="AWS Polly"></a>AWS Polly</h4><ul><li>Convert text to speech</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img165059.png"></p><hr><h4 id="AWS-Translate"><a href="#AWS-Translate" class="headerlink" title="AWS Translate"></a>AWS Translate</h4><ul><li>Translate language</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171433.png"></p><hr><h4 id="AWS-Lex-amp-Connect"><a href="#AWS-Lex-amp-Connect" class="headerlink" title="AWS Lex &amp; Connect"></a>AWS Lex &amp; Connect</h4><p>Lex: Conversational bots<br>Connect: Cloud contact center</p><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171703.png"></p><hr><h4 id="AWS-Comprehend"><a href="#AWS-Comprehend" class="headerlink" title="AWS Comprehend"></a>AWS Comprehend</h4><ul><li>NLP</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img171904.png"></p><hr><h4 id="AWS-SageMaker"><a href="#AWS-SageMaker" class="headerlink" title="AWS SageMaker"></a>AWS SageMaker</h4><ul><li>Build ML</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175503.png"></p><hr><h4 id="AWS-Forecast"><a href="#AWS-Forecast" class="headerlink" title="AWS Forecast"></a>AWS Forecast</h4><ul><li>Forecast things using ML</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180029.png"></p><hr><h4 id="AWS-Kendra"><a href="#AWS-Kendra" class="headerlink" title="AWS Kendra"></a>AWS Kendra</h4><ul><li>Document search service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180235.png"></p><hr><h4 id="AWS-Personalize"><a href="#AWS-Personalize" class="headerlink" title="AWS Personalize"></a>AWS Personalize</h4><ul><li>Personal Recommendation</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img180943.png"></p><hr><h4 id="AWS-Textract"><a href="#AWS-Textract" class="headerlink" title="AWS Textract"></a>AWS Textract</h4><ul><li>Extract text</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181533.png"></p><hr><h4 id="Summary-13"><a href="#Summary-13" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img181025.png"></p><hr><h3 id="15-Account-Managementï¼ŒBilling-amp-Support"><a href="#15-Account-Managementï¼ŒBilling-amp-Support" class="headerlink" title="15. Account Managementï¼ŒBilling &amp; Support"></a>15. Account Managementï¼ŒBilling &amp; Support</h3><h4 id="AWS-Organization"><a href="#AWS-Organization" class="headerlink" title="AWS Organization"></a>AWS Organization</h4><ul><li>Manage multiple AWS accounts</li><li>Consolidated Billing</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img215935.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img220144.png"></p><hr><h4 id="AWS-Control-Tower"><a href="#AWS-Control-Tower" class="headerlink" title="AWS Control Tower"></a>AWS Control Tower</h4><ul><li>Running on top of AWS Organization</li><li>AWS Control Tower is an AWS native service providing a pre-defined set of blueprints and guardrails to help customers implement a landing zone for new AWS accounts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230602.png"></p><hr><h4 id="AWS-Service-Catalog"><a href="#AWS-Service-Catalog" class="headerlink" title="AWS Service Catalog"></a>AWS Service Catalog</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img230820.png"></p><hr><h4 id="Pricing-Models-in-AWS"><a href="#Pricing-Models-in-AWS" class="headerlink" title="Pricing Models in AWS"></a>Pricing Models in AWS</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img231117.png"></p><hr><h4 id="AWS-Compute-Optimizer"><a href="#AWS-Compute-Optimizer" class="headerlink" title="AWS Compute Optimizer"></a>AWS Compute Optimizer</h4><ul><li>Reduce cost and improve performance</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img232258.png"></p><hr><h4 id="Cost-Allocation-Tags"><a href="#Cost-Allocation-Tags" class="headerlink" title="Cost Allocation Tags"></a>Cost Allocation Tags</h4><ul><li>For each resource, each tag key must be unique, and each tag key can have only one value</li><li>You must activate both AWS generated tags and user-defined tags separately before they can appear in Cost Explorer or on a cost allocation report</li></ul><hr><h4 id="AWS-Budgets"><a href="#AWS-Budgets" class="headerlink" title="AWS Budgets"></a>AWS Budgets</h4><ul><li>Create alarm when exceed budget</li><li>Budget Types: Cost budgetï¼ŒUsage budgetï¼ŒReservation budget</li><li>AWS Budgets gives you the ability to set custom budgets that alert you when your costs or usage exceed (or are forecasted to exceed) your budgeted amount.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233133.png"></p><hr><h4 id="AWS-Pricing-Calculator"><a href="#AWS-Pricing-Calculator" class="headerlink" title="AWS Pricing Calculator"></a>AWS Pricing Calculator</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075527.png"></p><hr><h4 id="Cost-and-Usage-Reports"><a href="#Cost-and-Usage-Reports" class="headerlink" title="Cost and Usage Reports"></a>Cost and Usage Reports</h4><ul><li>AWS Cost &amp; Usage Report (AWS CUR) contains the most comprehensive set of cost and usage data available.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075737.png"></p><hr><h4 id="Cost-Explorer"><a href="#Cost-Explorer" class="headerlink" title="Cost Explorer"></a>Cost Explorer</h4><ul><li>AWS Cost Explorer has an easy-to-use interface that lets you visualize, understand, and manage your AWS costs and usage over time.</li><li>Can be used to forecast your AWS account usage and costs</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075833.png"></p><hr><h4 id="AWS-Trusted-Advisor"><a href="#AWS-Trusted-Advisor" class="headerlink" title="AWS Trusted Advisor"></a>AWS Trusted Advisor</h4><ul><li>AWS Trusted Advisor is an online tool that provides you real-time guidance to help you provision your resources following AWS best practices on cost optimization</li><li>Identify unattached or underutilized EBS volumes</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233600.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175558.png"></p><hr><h4 id="AWS-Service-Quotas"><a href="#AWS-Service-Quotas" class="headerlink" title="AWS Service Quotas"></a>AWS Service Quotas</h4><ul><li>Service Quotas enables you to view and manage your quotas for AWS services from a central location.</li></ul><hr><h4 id="AWS-Support-Plans-Pricing"><a href="#AWS-Support-Plans-Pricing" class="headerlink" title="AWS Support Plans Pricing"></a>AWS Support Plans Pricing</h4><ul><li>Freeï¼ŒDeveloperï¼ŒBusinessï¼ŒEnterprise On-Rampï¼ŒEnterprise</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img233819.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234952.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235020.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235048.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img235117.png"></p><hr><h4 id="Summary-14"><a href="#Summary-14" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234240.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img234349.png"></p><hr><h3 id="16-Adavanced-Identity"><a href="#16-Adavanced-Identity" class="headerlink" title="16. Adavanced Identity"></a>16. Adavanced Identity</h3><h4 id="AWS-STS"><a href="#AWS-STS" class="headerlink" title="AWS STS"></a>AWS STS</h4><ul><li>Security Token Service</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img072649.png"></p><hr><h4 id="AWS-Cognito"><a href="#AWS-Cognito" class="headerlink" title="AWS Cognito"></a>AWS Cognito</h4><ul><li>å¤„ç†ç”¨æˆ·ç™»å½• (Googleï¼ŒFacebook)</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img072756.png"></p><hr><h4 id="AWS-IAM-Identity-Center"><a href="#AWS-IAM-Identity-Center" class="headerlink" title="AWS IAM Identity Center"></a>AWS IAM Identity Center</h4><ul><li>One login for multiple accounts</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img073056.png"></p><hr><h4 id="Summary-15"><a href="#Summary-15" class="headerlink" title="Summary"></a>Summary</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img073540.png"></p><hr><h3 id="17-Other-AWS-Services"><a href="#17-Other-AWS-Services" class="headerlink" title="17. Other AWS Services"></a>17. Other AWS Services</h3><h4 id="AWS-WorkSpace"><a href="#AWS-WorkSpace" class="headerlink" title="AWS WorkSpace"></a>AWS WorkSpace</h4><ul><li>Global cloud-based products</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083303.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083335.png"></p><hr><h4 id="AWS-AppStream"><a href="#AWS-AppStream" class="headerlink" title="AWS AppStream"></a>AWS AppStream</h4><ul><li>Deliver application within web</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083422.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083502.png"></p><hr><h4 id="AWS-IoT"><a href="#AWS-IoT" class="headerlink" title="AWS IoT"></a>AWS IoT</h4><ul><li>ç‰©è”ç½‘</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083607.png"></p><hr><h4 id="AWS-AppSync"><a href="#AWS-AppSync" class="headerlink" title="AWS AppSync"></a>AWS AppSync</h4><ul><li>GraphQL</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083702.png"></p><hr><h4 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a>AWS Amplify</h4><ul><li>Deploy fullstack web or mobile app</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085244.png"></p><hr><h4 id="AWS-Application-Composer"><a href="#AWS-Application-Composer" class="headerlink" title="AWS Application Composer"></a>AWS Application Composer</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085340.png"></p><hr><h4 id="AWS-Device-Farm"><a href="#AWS-Device-Farm" class="headerlink" title="AWS Device Farm"></a>AWS Device Farm</h4><ul><li>Test web app in different devices</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085508.png"></p><hr><h4 id="AWS-Backup"><a href="#AWS-Backup" class="headerlink" title="AWS Backup"></a>AWS Backup</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085539.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085603.png"></p><hr><h4 id="Disaster-Recovery-Strategies"><a href="#Disaster-Recovery-Strategies" class="headerlink" title="Disaster Recovery Strategies"></a>Disaster Recovery Strategies</h4><ul><li>æœ€ä¾¿å®œ: Back and Restore</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085705.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085729.png"></p><hr><h4 id="AWS-DRS"><a href="#AWS-DRS" class="headerlink" title="AWS DRS"></a>AWS DRS</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085904.png"></p><hr><h4 id="AWS-DataSync"><a href="#AWS-DataSync" class="headerlink" title="AWS DataSync"></a>AWS DataSync</h4><ul><li>Incremental</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img085958.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090038.png"></p><hr><h4 id="AWS-Application-Discovery-Service"><a href="#AWS-Application-Discovery-Service" class="headerlink" title="AWS Application Discovery Service"></a>AWS Application Discovery Service</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090147.png"></p><hr><h4 id="AWS-Application-Migration-Service"><a href="#AWS-Application-Migration-Service" class="headerlink" title="AWS Application Migration Service"></a>AWS Application Migration Service</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090259.png"></p><hr><h4 id="AWS-Migration-Hub"><a href="#AWS-Migration-Hub" class="headerlink" title="AWS Migration Hub"></a>AWS Migration Hub</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090459.png"></p><hr><h4 id="AWS-Migration-Evaluator"><a href="#AWS-Migration-Evaluator" class="headerlink" title="AWS Migration Evaluator"></a>AWS Migration Evaluator</h4><ul><li>AWS Migration Evaluator (Formerly TSO Logic) is a complimentary service to create data-driven business cases for AWS Cloud planning and migration.</li></ul><hr><h4 id="AWS-FIS"><a href="#AWS-FIS" class="headerlink" title="AWS FIS"></a>AWS FIS</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090535.png"></p><hr><h4 id="AWS-Step-Functions"><a href="#AWS-Step-Functions" class="headerlink" title="AWS Step Functions"></a>AWS Step Functions</h4><ul><li>Serverless</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090614.png"></p><hr><h4 id="AWS-Ground-Station"><a href="#AWS-Ground-Station" class="headerlink" title="AWS Ground Station"></a>AWS Ground Station</h4><ul><li>Satellite</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090709.png"></p><hr><h4 id="AWS-Pinpoint"><a href="#AWS-Pinpoint" class="headerlink" title="AWS Pinpoint"></a>AWS Pinpoint</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img090818.png"></p><hr><h4 id="AWS-Systems-Manager"><a href="#AWS-Systems-Manager" class="headerlink" title="AWS Systems Manager"></a>AWS Systems Manager</h4><ul><li>AWS Systems Manager allows you to centralize operational data from multiple AWS services and automate tasks across your AWS resources.</li><li>Get operational insights of its resources to quickly identify any issues that might impact applications using those resources</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img075954.png"></p><hr><h4 id="AWS-Systems-Manager-Session-Manager-SSM"><a href="#AWS-Systems-Manager-Session-Manager-SSM" class="headerlink" title="AWS Systems Manager Session Manager (SSM)"></a>AWS Systems Manager Session Manager (SSM)</h4><ul><li>AWS SSM Session Manager is a fully-managed service that provides you with an interactive browser-based shell and CLI experience.</li><li>Runs on a fleet of Amazon EC2 instances</li></ul><hr><h4 id="AWS-SSO"><a href="#AWS-SSO" class="headerlink" title="AWS SSO"></a>AWS SSO</h4><ul><li>AWS SSO is an AWS service that enables you to makes it easy to centrally manage access to multiple AWS accounts and business applications and provide users with single sign-on access to all their assigned accounts and applications from one place.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080225.png"></p><hr><h4 id="AWS-Quick-Starts-references"><a href="#AWS-Quick-Starts-references" class="headerlink" title="AWS Quick Starts references"></a>AWS Quick Starts references</h4><ul><li>Quick Starts are built by AWS solutions architects and partners to help you deploy popular technologies on AWS, based on AWS best practices for security and high availability.</li></ul><hr><h4 id="APN-Consulting-Partner"><a href="#APN-Consulting-Partner" class="headerlink" title="APN Consulting Partner"></a>APN Consulting Partner</h4><ul><li>APN Consulting Partners are professional services firms that help customers of all types and sizes design, architect, build, migrate, and manage their workloads and applications on AWS, accelerating their migration to AWS cloud.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img080758.png"></p><hr><h4 id="Penetration-Testing"><a href="#Penetration-Testing" class="headerlink" title="Penetration Testing"></a>Penetration Testing</h4><ul><li>AWS customers can carry out security assessments or penetration tests against their AWS infrastructure without prior approval for few common AWS services.</li></ul><hr><h4 id="AWS-Personal-Health-Dashboard"><a href="#AWS-Personal-Health-Dashboard" class="headerlink" title="AWS Personal Health Dashboard"></a>AWS Personal Health Dashboard</h4><ul><li>AWS Personal Health Dashboard provides alerts and remediation guidance when AWS is experiencing events that may impact you.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083000.png"></p><hr><h4 id="AWS-Service-Health-Dashboard"><a href="#AWS-Service-Health-Dashboard" class="headerlink" title="AWS Service Health Dashboard"></a>AWS Service Health Dashboard</h4><ul><li>AWS Service Health Dashboard publishes most up-to-the-minute information on the status and availability of all AWS services in tabular form for all Regions that AWS is present in.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img083127.png"></p><hr><h4 id="AWS-Marketplace"><a href="#AWS-Marketplace" class="headerlink" title="AWS Marketplace"></a>AWS Marketplace</h4><ul><li>Sell Software as a Service (SaaS) solutions to AWS customers</li><li>AWS customer can buy software that has been bundled into customized AMIs by the AWS Marketplace sellers</li></ul><hr><h4 id="AWS-Service-Catalog-1"><a href="#AWS-Service-Catalog-1" class="headerlink" title="AWS Service Catalog"></a>AWS Service Catalog</h4><ul><li>AWS Service Catalog allows organizations to create and manage catalogs of IT services that are approved for use on AWS.</li></ul><hr><h4 id="AWS-Well-Architected-Tool"><a href="#AWS-Well-Architected-Tool" class="headerlink" title="AWS Well-Architected Tool"></a>AWS Well-Architected Tool</h4><ul><li>The AWS Well-Architected Tool helps you review the state of your workloads and compares them to the latest AWS architectural best practices.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img175558.png"></p><hr><h4 id="AWS-Resource-Groups"><a href="#AWS-Resource-Groups" class="headerlink" title="AWS Resource Groups"></a>AWS Resource Groups</h4><ul><li>You can use AWS Resource Groups to organize your AWS resources. Resource groups make it easier to manage and automate tasks on large numbers of resources at a time.</li></ul><hr><h4 id="AWS-Cloud-Foundations"><a href="#AWS-Cloud-Foundations" class="headerlink" title="AWS Cloud Foundations"></a>AWS Cloud Foundations</h4><ul><li>Cloud Foundations provides a guided path to help customers deploy, configure, and secure their new workloads while ensuring they are ready for on-going operations in the cloud.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img170401.png"></p><hr><h4 id="Credentials-Report"><a href="#Credentials-Report" class="headerlink" title="Credentials Report"></a>Credentials Report</h4><ul><li>You can generate and download a credentials report that lists all users in your account and the status of their various credentials, including passwords, access keys, and MFA devices.</li></ul><hr><h4 id="CloudEndure-Disaster-Recovery"><a href="#CloudEndure-Disaster-Recovery" class="headerlink" title="CloudEndure Disaster Recovery"></a>CloudEndure Disaster Recovery</h4><ul><li>CloudEndure Disaster Recovery enables you to use AWS Cloud as a disaster recovery Region for an on-premises workload and its environment.</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091100.png"></p><hr><h3 id="18-AWS-Architecting-amp-Ecosystem"><a href="#18-AWS-Architecting-amp-Ecosystem" class="headerlink" title="18. AWS Architecting &amp; Ecosystem"></a>18. AWS Architecting &amp; Ecosystem</h3><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091239.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091320.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091347.png"></p><hr><h4 id="Operation-Excellence"><a href="#Operation-Excellence" class="headerlink" title="Operation Excellence"></a>Operation Excellence</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091439.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091513.png"></p><hr><h4 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091656.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091735.png"></p><hr><h4 id="Reliability"><a href="#Reliability" class="headerlink" title="Reliability"></a>Reliability</h4><ul><li>AWS Configï¼ŒAWS CloudTrailï¼ŒAmazon CloudWatch</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091813.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091848.png"></p><hr><h4 id="Performance-Efficiency"><a href="#Performance-Efficiency" class="headerlink" title="Performance Efficiency"></a>Performance Efficiency</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091927.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img091956.png"></p><hr><h4 id="Cost-Optimization"><a href="#Cost-Optimization" class="headerlink" title="Cost Optimization"></a>Cost Optimization</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092031.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092058.png"></p><hr><h4 id="Sustainability"><a href="#Sustainability" class="headerlink" title="Sustainability"></a>Sustainability</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092133.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092201.png"></p><hr><h4 id="Cloud-Adoption-Framework-CAF"><a href="#Cloud-Adoption-Framework-CAF" class="headerlink" title="Cloud Adoption Framework (CAF)"></a>Cloud Adoption Framework (CAF)</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092346.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092416.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092445.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151051.png"><br><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img151120.png"></p><hr><h4 id="AWS-IQ"><a href="#AWS-IQ" class="headerlink" title="AWS IQ"></a>AWS IQ</h4><ul><li>æ‰¾äººå¸®å¿™</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img092907.png"></p><hr><h4 id="AWS-AMS"><a href="#AWS-AMS" class="headerlink" title="AWS AMS"></a>AWS AMS</h4><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/img093104.png"></p><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹ï¼Œè°¢è°¢</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Certification </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯åˆ‡å›¾ä»”</title>
      <link href="/posts/bfacd5b7.html"/>
      <url>/posts/bfacd5b7.html</url>
      
        <content type="html"><![CDATA[<hr><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><ul><li>æ­£ç»äººè°å†™<code>CSS</code>å•Š ğŸ˜… (<code>https://jsfiddle.net/user/fiddles/all/1/</code>)</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Hongda-OSU/PicGo/image/76d443f8f92e4e8eaeb8c4d368cdfe81~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.awebp"></p><hr><h3 id="æ»šåŠ¨è§†å·®"><a href="#æ»šåŠ¨è§†å·®" class="headerlink" title="æ»šåŠ¨è§†å·®"></a>æ»šåŠ¨è§†å·®</h3><ul><li><code>Scroll Parallax</code></li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ekg7nrs1/84/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/28rnshqx/88/embedded/result/dark/" rameborder="0" loading="lazy" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="é¼ æ ‡è§†å·®"><a href="#é¼ æ ‡è§†å·®" class="headerlink" title="é¼ æ ‡è§†å·®"></a>é¼ æ ‡è§†å·®</h3><ul><li><code>Mouse Parallax</code></li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/18uedakg/331/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æ‰“å­—æœºæ•ˆæœ"><a href="#æ‰“å­—æœºæ•ˆæœ" class="headerlink" title="æ‰“å­—æœºæ•ˆæœ"></a>æ‰“å­—æœºæ•ˆæœ</h3><ul><li>ä¹Ÿå¯ä»¥å«åš <code>typing effect</code></li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/qgaywfs8/55/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe src="https://codesandbox.io/embed/fw94fg?view=preview&module=%2Fpublic%2Findex.html&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="Typing"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><hr><h3 id="3D-å¡ç‰‡æ•ˆæœ"><a href="#3D-å¡ç‰‡æ•ˆæœ" class="headerlink" title="3D å¡ç‰‡æ•ˆæœ"></a>3D å¡ç‰‡æ•ˆæœ</h3><p><code>https://www.cnblogs.com/coco1s/p/17979602</code></p><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/cswk73b2/205/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe src="https://codesandbox.io/embed/cwy6d7?view=preview&module=%2Fpublic%2Findex.html&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="3D å¡ç‰‡"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><iframe src="https://codesandbox.io/embed/9nldjd?view=preview&module=%2Fpublic%2Findex.html&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="å¡ç‰‡"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/e01vtrpc/18/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/0wh5zu9s/6/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="å¡ç‰‡æ•ˆæœ"><a href="#å¡ç‰‡æ•ˆæœ" class="headerlink" title="å¡ç‰‡æ•ˆæœ"></a>å¡ç‰‡æ•ˆæœ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/9czbrops/46/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/cugLmsv3/354/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ha8o2v65/143/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="ä¸‹åˆ’çº¿ç‰¹æ•ˆ"><a href="#ä¸‹åˆ’çº¿ç‰¹æ•ˆ" class="headerlink" title="ä¸‹åˆ’çº¿ç‰¹æ•ˆ"></a>ä¸‹åˆ’çº¿ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/xpq1g3eu/63/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="Zoom-æ•ˆæœ"><a href="#Zoom-æ•ˆæœ" class="headerlink" title="Zoom æ•ˆæœ"></a>Zoom æ•ˆæœ</h3><ul><li><code>https://css-tricks.com/re-creating-the-porky-pig-animation-from-looney-tunes-in-css/</code></li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/cpuLzsfm/143/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ugwzj47x/39/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="è§†é¢‘èƒŒæ™¯"><a href="#è§†é¢‘èƒŒæ™¯" class="headerlink" title="è§†é¢‘èƒŒæ™¯"></a>è§†é¢‘èƒŒæ™¯</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/wdehmqgp/50/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="å¤´åƒç‰¹æ•ˆ"><a href="#å¤´åƒç‰¹æ•ˆ" class="headerlink" title="å¤´åƒç‰¹æ•ˆ"></a>å¤´åƒç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/56y0gqzw/37/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/c6uph9ab/69/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="é¼ æ ‡æ•ˆæœ"><a href="#é¼ æ ‡æ•ˆæœ" class="headerlink" title="é¼ æ ‡æ•ˆæœ"></a>é¼ æ ‡æ•ˆæœ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/qxndvehu/21/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/8trua6n4/16/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe src="https://codesandbox.io/embed/fgrc6y?view=preview&module=%2Fsrc%2Fstyles.css"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="é¼ æ ‡ç‰¹æ•ˆ"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ua5hfbwr/47/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>åŠ¨æ€é¼ æ ‡æ•ˆæœ</li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/fwbL130q/4/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/y93shdxv/9/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="å›¾ç‰‡å€’å½±"><a href="#å›¾ç‰‡å€’å½±" class="headerlink" title="å›¾ç‰‡å€’å½±"></a>å›¾ç‰‡å€’å½±</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/v5Loj9b1/74/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="å™ªéŸ³ç‰¹æ•ˆ"><a href="#å™ªéŸ³ç‰¹æ•ˆ" class="headerlink" title="å™ªéŸ³ç‰¹æ•ˆ"></a>å™ªéŸ³ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ksyx497p/4/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="å›¾ç‰‡å †å "><a href="#å›¾ç‰‡å †å " class="headerlink" title="å›¾ç‰‡å †å "></a>å›¾ç‰‡å †å </h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/sfc0anmu/86/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/y41krcn9/58/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="äººæ½®æ±¹æ¶Œ"><a href="#äººæ½®æ±¹æ¶Œ" class="headerlink" title="äººæ½®æ±¹æ¶Œ"></a>äººæ½®æ±¹æ¶Œ</h3><p><code>https://codepen.io/zadvorsky/pen/xxwbBQV</code></p><iframe src="https://codesandbox.io/embed/r327rm?view=preview&module=%2Fsrc%2FApp.js&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="äººæ½®æ±¹æ¶Œ"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><hr><h3 id="æ–‡å­—ç‰¹æ•ˆ"><a href="#æ–‡å­—ç‰¹æ•ˆ" class="headerlink" title="æ–‡å­—ç‰¹æ•ˆ"></a>æ–‡å­—ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/0ezmgf81/253/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe src="https://codesandbox.io/embed/yh5272?view=preview&module=%2Fpublic%2Findex.html"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="åå­—"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>   <hr><h3 id="å›¾ç‰‡æ¶ˆå¤±"><a href="#å›¾ç‰‡æ¶ˆå¤±" class="headerlink" title="å›¾ç‰‡æ¶ˆå¤±"></a>å›¾ç‰‡æ¶ˆå¤±</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/e9kzqtop/228/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="å¥‡æ€ªçš„ç‰¹æ•ˆ"><a href="#å¥‡æ€ªçš„ç‰¹æ•ˆ" class="headerlink" title="å¥‡æ€ªçš„ç‰¹æ•ˆ"></a>å¥‡æ€ªçš„ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/cyL2t579/34/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/tm3o4ncj/8/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/gmydz8ew/11/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/twL2a3nk/106/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="Hover-æ•ˆæœ"><a href="#Hover-æ•ˆæœ" class="headerlink" title="Hover æ•ˆæœ"></a>Hover æ•ˆæœ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/bf476zy1/11/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/ok27hLs1/8/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/fw9reojc/105/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/anumv6g4/87/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="æ— é™å›¾ç‰‡"><a href="#æ— é™å›¾ç‰‡" class="headerlink" title="æ— é™å›¾ç‰‡"></a>æ— é™å›¾ç‰‡</h3><iframe src="https://codesandbox.io/embed/k98xf4?view=preview&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="æ— é™æ»‘åŠ¨"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/y9gmv76d/64/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="ç¥å…‰æ•ˆæœ"><a href="#ç¥å…‰æ•ˆæœ" class="headerlink" title="ç¥å…‰æ•ˆæœ"></a>ç¥å…‰æ•ˆæœ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/cLmaf6tu/66/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/4wcd6th1/113/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/aLujzrpe/8/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="kokomi-js-ç”¨ä¾‹"><a href="#kokomi-js-ç”¨ä¾‹" class="headerlink" title="kokomi.js ç”¨ä¾‹"></a>kokomi.js ç”¨ä¾‹</h3><iframe src="https://codesandbox.io/embed/p4xxc9?view=preview&module=%2Ffrag.glsl&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="GL æ•ˆæœ"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><hr><h3 id="è·‘é©¬ç¯æ•ˆæœ"><a href="#è·‘é©¬ç¯æ•ˆæœ" class="headerlink" title="è·‘é©¬ç¯æ•ˆæœ"></a>è·‘é©¬ç¯æ•ˆæœ</h3><ul><li>ä¹Ÿå«åš <code>Marquee</code></li></ul><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/s8r6qtmg/153/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe src="https://codesandbox.io/embed/kny9r5?view=preview&module=%2Fsrc%2FApp.js&hidenavigation=1"     style="width:100%; height: 400px; border:0; border-radius: 4px; overflow:hidden;"     title="focused-diffie"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/zfvc9uqd/9/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æ–‡å­—-Hover-ç¿»è½¬"><a href="#æ–‡å­—-Hover-ç¿»è½¬" class="headerlink" title="æ–‡å­— Hover ç¿»è½¬"></a>æ–‡å­— Hover ç¿»è½¬</h3><iframe src="https://codesandbox.io/embed/xhs6ws?view=preview&module=%2Fsrc%2FApp.js&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="ç¿»è½¬"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><hr><h3 id="æ‰‹ç”µç­’æ•ˆæœ"><a href="#æ‰‹ç”µç­’æ•ˆæœ" class="headerlink" title="æ‰‹ç”µç­’æ•ˆæœ"></a>æ‰‹ç”µç­’æ•ˆæœ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/y5vo3kgp/57/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><hr><h3 id="SVG-æ»¤æ³¢å™¨"><a href="#SVG-æ»¤æ³¢å™¨" class="headerlink" title="SVG æ»¤æ³¢å™¨"></a>SVG æ»¤æ³¢å™¨</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/f4um57ns/73/embedded/result/dark/" allowfullscreen="allowfullscreen" allowpaymentrequest frameborder="0"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/yfon0cp4/27/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/quyLpxzm/88/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æˆ‘çš„åå­—"><a href="#æˆ‘çš„åå­—" class="headerlink" title="æˆ‘çš„åå­—"></a>æˆ‘çš„åå­—</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/rdnx8m71/19/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/xmbL8eka/13/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/tfqcp70b/30/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æ¨ªå‘æ»‘åŠ¨"><a href="#æ¨ªå‘æ»‘åŠ¨" class="headerlink" title="æ¨ªå‘æ»‘åŠ¨"></a>æ¨ªå‘æ»‘åŠ¨</h3><iframe src="https://codesandbox.io/embed/pm4cpy?view=preview"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="H-Scroll"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><ul><li>ä¸‹é¢è¿™ä¸ªæ˜¯çº¯åŸç”Ÿå®ç°</li></ul><iframe src="https://codesandbox.io/embed/98mlvg?view=preview&module=%2Fsrc%2Fscrollable.css&hidenavigation=1"     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"     title="H-Scroll-2"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><hr><h3 id="ç­¾åç‰¹æ•ˆ"><a href="#ç­¾åç‰¹æ•ˆ" class="headerlink" title="ç­¾åç‰¹æ•ˆ"></a>ç­¾åç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/5bhxLd16/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/aozhc9k2/124/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="3D-èœå•"><a href="#3D-èœå•" class="headerlink" title="3D èœå•"></a>3D èœå•</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/14am63yv/101/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="ç”µå½±æ–‡å­—ç‰¹æ•ˆ"><a href="#ç”µå½±æ–‡å­—ç‰¹æ•ˆ" class="headerlink" title="ç”µå½±æ–‡å­—ç‰¹æ•ˆ"></a>ç”µå½±æ–‡å­—ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/8m21o0bd/13/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æš–è‰²èƒŒæ™¯"><a href="#æš–è‰²èƒŒæ™¯" class="headerlink" title="æš–è‰²èƒŒæ™¯"></a>æš–è‰²èƒŒæ™¯</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/2p09ko8w/57/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="å›¾ç‰‡é€šè¿‡æ»‘åŠ¨å±•å‡º"><a href="#å›¾ç‰‡é€šè¿‡æ»‘åŠ¨å±•å‡º" class="headerlink" title="å›¾ç‰‡é€šè¿‡æ»‘åŠ¨å±•å‡º"></a>å›¾ç‰‡é€šè¿‡æ»‘åŠ¨å±•å‡º</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/uf42ortp/17/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="åŸç”Ÿåˆ’å…¥åŠ¨æ•ˆ"><a href="#åŸç”Ÿåˆ’å…¥åŠ¨æ•ˆ" class="headerlink" title="åŸç”Ÿåˆ’å…¥åŠ¨æ•ˆ"></a>åŸç”Ÿåˆ’å…¥åŠ¨æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/w9L0cq3g/177/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="Rellax-js-ç”¨ä¾‹"><a href="#Rellax-js-ç”¨ä¾‹" class="headerlink" title="Rellax.js ç”¨ä¾‹"></a>Rellax.js ç”¨ä¾‹</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/yabeLhsc/8/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æ–‡å­—å±•ç¤ºè§†é¢‘"><a href="#æ–‡å­—å±•ç¤ºè§†é¢‘" class="headerlink" title="æ–‡å­—å±•ç¤ºè§†é¢‘"></a>æ–‡å­—å±•ç¤ºè§†é¢‘</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/2zvc8La6/18/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="æ•…éšœç‰¹æ•ˆ"><a href="#æ•…éšœç‰¹æ•ˆ" class="headerlink" title="æ•…éšœç‰¹æ•ˆ"></a>æ•…éšœç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/mavrgsu6/46/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="èœå•ç‰¹æ•ˆ"><a href="#èœå•ç‰¹æ•ˆ" class="headerlink" title="èœå•ç‰¹æ•ˆ"></a>èœå•ç‰¹æ•ˆ</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/d5romxb3/34/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="åŸç”Ÿå¯¼èˆªæ "><a href="#åŸç”Ÿå¯¼èˆªæ " class="headerlink" title="åŸç”Ÿå¯¼èˆªæ "></a>åŸç”Ÿå¯¼èˆªæ </h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/7jxotqu1/5/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="åˆ›æ„åˆ—è¡¨äº¤äº’"><a href="#åˆ›æ„åˆ—è¡¨äº¤äº’" class="headerlink" title="åˆ›æ„åˆ—è¡¨äº¤äº’"></a>åˆ›æ„åˆ—è¡¨äº¤äº’</h3><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/o6n78gak/24/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><iframe width="100%" height="400px" src="//jsfiddle.net/HDL52/dzbf2wva/64/embedded/result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>è¯·å‹¿éšæ„ä¿®æ”¹ï¼Œè°¢è°¢</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C# å…³é”®å­—è§£æ</title>
      <link href="/posts/cd5cb147.html"/>
      <url>/posts/cd5cb147.html</url>
      
        <content type="html"><![CDATA[<h2 id="C-ä¸­çš„å…³é”®å­—è§£æ"><a href="#C-ä¸­çš„å…³é”®å­—è§£æ" class="headerlink" title="C# ä¸­çš„å…³é”®å­—è§£æ"></a>C# ä¸­çš„å…³é”®å­—è§£æ</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><ul><li><p>ç»“åˆ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/">å¾®è½¯æ–‡æ¡£</a>ï¼Œå¯¹<code>C#</code>ä¸­çš„å…³é”®å­—è¿›è¡Œè§£æã€‚</p></li><li><p>æ–‡ç« ä¸­ï¼Œæ´¾ç”Ÿç±»é»˜è®¤ä¸ºå­ç±»ï¼ŒåŸºç±»é»˜è®¤ä¸ºçˆ¶ç±»ã€‚</p></li><li><p>éƒ¨åˆ†å¸¸è§å…³é”®å­—çœç•¥: <a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/bool">bool</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/jump-statements#the-break-statement">break</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/selection-statements#the-switch-statement">case</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/char">char</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/jump-statements#the-continue-statement">continue</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/default">default</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements#the-do-statement">do</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types">double</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/selection-statements#the-if-statement">else</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/bool">false</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types">float</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements#the-for-statement">for</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/selection-statements#the-if-statement">if</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">int</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">long</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/new-operator">new</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/public">public</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/jump-statements#the-return-statement">return</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/sizeof">sizeof</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types">string</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/bool">true</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/exception-handling-statements">try</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/type-testing-and-cast#typeof-operator">typeof</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/void">void</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements#the-while-statement">while</a></p></li><li><p>å…³é”®å­—çœç•¥ (æ„Ÿè§‰å¯èƒ½ç”¨ä¸åˆ°, è¿™é‡ŒæŒ‡çš„æ˜¯æ—¥å¸¸å“ˆ): <a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/checked-and-unchecked">checked</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/extern">extern</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/fixed">fixed</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/jump-statements#the-goto-statement">goto</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/user-defined-conversion-operators">implicit</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/in">in</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/lock">lock</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing">object</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/operator-overloading">operator</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">sbyte</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">short</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/stackalloc">stackalloc</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">uint</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">ulong</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/checked-and-unchecked">unchecked</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/unsafe">unsafe</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types">ushort</a>ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/volatile">volatile</a></p></li></ul><hr><h3 id="1-abstract-å…³é”®å­—"><a href="#1-abstract-å…³é”®å­—" class="headerlink" title="1. abstract å…³é”®å­—"></a>1. abstract å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œå…³é”®å­—<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/abstract"><code>abstract</code></a>ç”¨äº<ins>å£°æ˜æŠ½è±¡ç±»æˆ–ç±»ä¸­çš„æŠ½è±¡æˆå‘˜</ins>ã€‚</p><p>æŠ½è±¡ç±»ç‰¹ç‚¹:</p><ol><li>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ– (ä¸èƒ½ä½¿ç”¨<code>new</code>å…³é”®å­—)ã€‚</li><li>æŠ½è±¡ç±»å¯èƒ½åŒ…å«æŠ½è±¡æˆå‘˜ï¼ˆæ–¹æ³•ã€å±æ€§ï¼‰å’ŒéæŠ½è±¡æˆå‘˜çš„å®ç°ã€‚</li><li>åªæœ‰æŠ½è±¡ç±»ä¸­æ‰å…è®¸æŠ½è±¡æ–¹æ³•å£°æ˜ã€‚</li><li>æŠ½è±¡ç±»é€šå¸¸ä½œä¸ºåŸºç±»è¢«å­ç±»ç»§æ‰¿ï¼Œå­ç±»å¿…é¡»ä½¿ç”¨<code>override</code>å®ç°æŠ½è±¡ç±»ä¸­å£°æ˜çš„æŠ½è±¡æˆå‘˜ã€‚</li></ol><p>æŠ½è±¡æ–¹æ³•ç‰¹ç‚¹:</p><ol><li>å‡¡æ˜¯åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»éƒ½æ˜¯æŠ½è±¡ç±»ã€‚</li><li>æŠ½è±¡æ–¹æ³•å£°æ˜ä¸æä¾›å®é™…çš„å®ç°ï¼Œå› æ­¤æ²¡æœ‰æ–¹æ³•ä¸»ä½“ã€‚ï¼ˆæŠ½è±¡å±æ€§åŒç†ï¼‰</li><li>åœ¨æŠ½è±¡æ–¹æ³•å£°æ˜ä¸­ä¸èƒ½ä½¿ç”¨<code>static</code>æˆ–<code>virtual</code>å…³é”®å­—ã€‚<ul><li>æŠ½è±¡æ–¹æ³•æ²¡æœ‰å…·ä½“å®ç°ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨<code>static</code>å…³é”®å­—æ¥å£°æ˜ä¸ºé™æ€æ–¹æ³•ã€‚</li><li>æŠ½è±¡æ–¹æ³•æ˜¯éšå¼çš„è™šæ‹Ÿæ–¹æ³•ï¼Œæ‰€ä»¥ä¸éœ€è¦<code>virtual</code>å…³é”®å­—ã€‚</li></ul></li></ol><p>ä¸¾ä¸ªä¾‹å­:</p><ul><li>æªï¼ˆæŠ½è±¡åŸºç±»ï¼‰æ˜¯å¯ä»¥ <code>Shoot</code> å’Œ <code>Reload</code>ï¼ˆæŠ½è±¡æ–¹æ³•ï¼‰ã€‚</li><li>æ¯”å¦‚<code>AK47</code>å’Œ<code>M4</code> (éæŠ½è±¡ç±»å­ç±»)ï¼Œå®ƒä»¬æ‹¥æœ‰ <code>Shoot</code> å’Œ <code>Reload</code> çš„åŠŸèƒ½ã€‚</li><li>ä½†å…·ä½“æ˜¯æ€ä¹ˆ <code>Shoot</code> å’Œ <code>Reload</code>ï¼Œ<code>AK47</code>å’Œ<code>M4</code>æ˜¯ä¸ä¸€æ ·çš„ï¼ˆå…·ä½“å®ç°ï¼‰ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡ç±»ï¼šFirearms</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Firearms</span></span><br><span class="line"> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Shoot</span>()</span>; <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Reload</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Init</span>()</span> &#123;...&#125; <span class="comment">// éæŠ½è±¡æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="built_in">string</span> FireRate &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; <span class="comment">// æŠ½è±¡å±æ€§</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»ï¼šAK47</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AK47</span> : <span class="title">Firearms</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> fireRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Shoot</span>()</span> &#123;...&#125; <span class="comment">// å…·ä½“å®ç°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Reload</span>()</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="built_in">string</span> FireRate</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> fireRate; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; fireRate = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦ç”¨æŠ½è±¡ç±»ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€èˆ¬ç±»<code>class</code>æˆ–è€…æ¥å£<code>interface</code>ï¼Ÿ</p><ol><li>å…±äº«ä»£ç ï¼š<ins>æŠ½è±¡ç±»å¯ä»¥å®šä¹‰ä¸€ç»„ç›¸å…³ç±»çš„é€šç”¨è¡Œä¸ºå’Œå±æ€§ï¼Œå¹¶æä¾›é»˜è®¤çš„å®ç°ã€‚é€šè¿‡ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿å’Œé‡ç”¨æŠ½è±¡ç±»ä¸­çš„ä»£ç </ins>ï¼Œå‡å°‘ä»£ç çš„é‡å¤ç¼–å†™ã€‚è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚(è¿™é‡ŒæŒ‡çš„æ˜¯åœ¨ <code>abstract class</code> é‡Œå£°æ˜çš„éæŠ½è±¡æ–¹æ³•)</li><li>ä»£ç æ‰©å±•æ€§ï¼šæŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨æŠ½è±¡ç±»ä¸­æ²¡æœ‰å…·ä½“çš„å®ç°ã€‚é€šè¿‡ç»§æ‰¿æŠ½è±¡ç±»å¹¶å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¯ä»¥åœ¨å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ä¸­å®ç°è‡ªå·±çš„ä»£ç ã€‚è¿™ç§æ–¹å¼ä½¿å¾—ä»£ç å…·æœ‰æ‰©å±•æ€§ï¼Œå¯ä»¥é€‚åº”æœªæ¥éœ€æ±‚çš„å˜åŒ–ã€‚</li><li>éƒ¨åˆ†å®ç°ï¼šæŠ½è±¡ç±»æ—¢å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åŒ…å«å…·ä½“çš„å®ç°ã€‚è¿™ä½¿å¾—æŠ½è±¡ç±»å¯ä»¥æä¾›ä¸€äº›é»˜è®¤çš„è¡Œä¸ºï¼ŒåŒæ—¶ä¹Ÿç»™å­ç±»æä¾›äº†ä¸€å®šçš„çµæ´»æ€§ã€‚å­ç±»å¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨æŠ½è±¡ç±»ä¸­çš„å®ç°ã€‚</li><li>ï¼ˆå¾…è¡¥å……ï¼‰</li></ol><blockquote><p>æ³¨æ„, ä» <code>C# 8.0</code> å¼€å§‹ <code>interface</code> å°±å¯ä»¥åœ¨æ¥å£é‡Œæä¾›é»˜è®¤çš„å®ç°</p></blockquote><hr><h3 id="2-as-å…³é”®å­—"><a href="#2-as-å…³é”®å­—" class="headerlink" title="2. as å…³é”®å­—"></a>2. as å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œå…³é”®å­—<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/type-testing-and-cast#as-operator"><code>as</code></a>ç”¨äºç±»å‹è½¬æ¢ã€‚</p><ul><li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šä¸<code>null</code>æ£€æŸ¥ä¸€èµ·ä½¿ç”¨<code>as</code>å…³é”®å­—ã€‚è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœè½¬æ¢ä¸æˆåŠŸï¼Œ<code>as</code>ä¼šè¿”å›<code>null</code>ï¼Œè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚è¿™ä½¿å¾—<code>as</code>å…³é”®å­—åœ¨é¢å¯¹ç±»å‹è½¬æ¢å¤±è´¥æ—¶çš„è¡Œä¸ºæ›´åŠ æ¸©å’Œã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Animal</span> &#123; ... &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">Animal animal = <span class="keyword">new</span> Dog();</span><br><span class="line">Dog dog = animal <span class="keyword">as</span> Dog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (dog != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Successful&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Failed&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>as</code>å…³é”®å­—å°è¯•å°†<code>animal</code>è½¬æ¢ä¸º<code>Dog</code>ç±»å‹ã€‚ç”±äº<code>animal</code>å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>Dog</code>ç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥è½¬æ¢æˆåŠŸã€‚å¦‚æœ<code>animal</code>å¯¹è±¡æ˜¯<code>Animal</code>ç±»å‹çš„å¯¹è±¡ï¼Œåˆ™ä¸Šé¢ä»£ç ä¼šè½¬æ¢å¤±è´¥ã€‚</p><hr><h3 id="3-base-å…³é”®å­—"><a href="#3-base-å…³é”®å­—" class="headerlink" title="3. base å…³é”®å­—"></a>3. base å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>base</code>å…³é”®å­—ç”¨äº<ins>åœ¨å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜æˆ–è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°</ins>ã€‚</p><ul><li><code>base</code>å…³é”®å­—åªèƒ½ç”¨äºå­ç±»ï¼Œè€Œä¸æ˜¯åŸºç±»ä¸­ã€‚</li><li>å¦‚æœåŸºç±»æˆå‘˜æ˜¯ç§æœ‰çš„ï¼Œå³ä½¿ä½¿ç”¨<code>base</code>å…³é”®å­—ä¹Ÿæ— æ³•è®¿é—®ã€‚</li><li>åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨ <code>base</code> å…³é”®å­—å°†äº§ç”Ÿé”™è¯¯ã€‚</li><li>å¦‚æœåŸºç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°é‡è½½ï¼Œå­ç±»åœ¨ä½¿ç”¨<code>base</code>å…³é”®å­—è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°æ—¶ï¼Œéœ€è¦é€‰æ‹©è¦è°ƒç”¨çš„å…·ä½“æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”æä¾›ä¸æ‰€é€‰åŸºç±»æ„é€ å‡½æ•°åŒ¹é…çš„å‚æ•°åˆ—è¡¨ã€‚</li></ul><p>ä¸‹é¢æ˜¯<code>base</code>å…³é”®å­—çš„å‡ ç§å¸¸è§ç”¨æ³•</p><ul><li>è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°</li></ul><p>åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>base</code>å…³é”®å­—è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åŸºç±»çš„æ„é€ å‡½æ•° 1</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseClass</span>(<span class="params"><span class="built_in">int</span> x</span>)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸºç±»çš„æ„é€ å‡½æ•° 2</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseClass</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>)</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="comment">// æ‰§è¡Œå…¶ä»–æ´¾ç”Ÿç±»çš„æ„é€ é€»è¾‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DerivedClass</span>(<span class="params"><span class="built_in">int</span> x</span>) : <span class="title">base</span>(<span class="params">x</span>)</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DerivedClass</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>) : <span class="title">base</span>(<span class="params">x, y</span>)</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> DerivedClass(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">new</span> DerivedClass(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>DerivedClass</code>ç»§æ‰¿è‡ª<code>BaseClass</code>ã€‚åœ¨<code>DerivedClass</code>çš„æ„é€ å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code>base(x)</code>è°ƒç”¨äº†åŸºç±»<code>BaseClass</code>çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¼ é€’å‚æ•°<code>x</code>ã€‚</p><ul><li>å¼•ç”¨åŸºç±»çš„æˆå‘˜</li></ul><p>å½“<ins>æ´¾ç”Ÿç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªä¸åŸºç±»ç›¸åŒåç§°çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•</ins>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>base</code>å…³é”®å­—æ¥è®¿é—®å®ƒã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åŸºç±»çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SomeMethod</span>()</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨åŸºç±»çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SomeMethod</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">base</span>.SomeMethod();</span><br><span class="line">        <span class="comment">// ... å…¶ä»–é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>DerivedClass</code>ç»§æ‰¿è‡ª<code>BaseClass</code>ã€‚åœ¨<code>DerivedClass</code>ä¸­çš„<code>SomeMethod</code>æ–¹æ³•ä¸­ï¼Œä½¿ç”¨<code>base.SomeMethod()</code>è°ƒç”¨äº†åŸºç±»<code>BaseClass</code>çš„æ–¹æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨<code>base</code>å»è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Ÿ</p><ol><li>ç»§æ‰¿åŸºç±»çš„è¡Œä¸ºå’ŒçŠ¶æ€: é€šè¿‡è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿åŸºç±»çš„è¡Œä¸ºå’ŒçŠ¶æ€ã€‚åŸºç±»å¯èƒ½åŒ…å«ä¸€äº›é‡è¦çš„åˆå§‹åŒ–é€»è¾‘ï¼Œä»¥ç¡®ä¿å®ƒçš„æˆå‘˜å’Œå±æ€§å¤„äºæ­£ç¡®çš„çŠ¶æ€ã€‚</li><li>æä¾›åŸºç±»æ‰€éœ€çš„åˆå§‹åŒ–å‚æ•°: å¦‚æœåŸºç±»çš„æ„é€ å‡½æ•°éœ€è¦æ¥æ”¶å‚æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œæ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°å¹¶ä¼ é€’é€‚å½“çš„å‚æ•°ï¼Œæ¥æä¾›å¿…è¦çš„ä¿¡æ¯ã€‚</li><li>é¿å…å†—ä½™ä»£ç : å¦‚æœåŸºç±»çš„æ„é€ å‡½æ•°å·²ç»åŒ…å«äº†ä¸€äº›é€šç”¨çš„ã€æ‰€æœ‰æ´¾ç”Ÿç±»éƒ½éœ€è¦çš„åˆå§‹åŒ–ä»£ç ï¼Œé‚£ä¹ˆåœ¨æ´¾ç”Ÿç±»ä¸­é€šè¿‡ä½¿ç”¨<code>base</code>å…³é”®å­—è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥é¿å…é‡å¤ç¼–å†™è¿™äº›åˆå§‹åŒ–ä»£ç ã€‚</li><li>ï¼ˆå¾…è¡¥å……ï¼‰</li></ol><hr><h3 id="4-byte-å…³é”®å­—"><a href="#4-byte-å…³é”®å­—" class="headerlink" title="4. byte å…³é”®å­—"></a>4. byte å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>byte</code>å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ª<code>8</code>ä½æ— ç¬¦å·ï¼ˆ<code>unsigned</code>ï¼‰æ•´æ•°ç±»å‹çš„å˜é‡ã€‚</p><p><code>byte</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­å…·æœ‰å¤šç§ç”¨é€”å’Œåº”ç”¨åœºæ™¯</p><ul><li>å­˜å‚¨å’Œå¤„ç†äºŒè¿›åˆ¶æ•°æ®: <code>byte</code>ç±»å‹æ˜¯ä¸€ä¸ª<code>8</code>ä½æ— ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´ä»<code>0</code>åˆ°<code>255</code>ã€‚å› æ­¤ï¼Œå®ƒéå¸¸é€‚åˆç”¨äºå­˜å‚¨å’Œå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€æ–‡ä»¶ç­‰ã€‚</li><li>ç½‘ç»œç¼–ç¨‹: åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦ä½¿ç”¨<code>byte</code>ç±»å‹æ¥è¯»å–å’Œå†™å…¥æ•°æ®æµã€å¤„ç†ç½‘ç»œå­—èŠ‚åºç­‰ã€‚</li><li>æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–: åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œè€Œååºåˆ—åŒ–åˆ™æ˜¯å°†å­—èŠ‚åºåˆ—è½¬æ¢å›å¯¹è±¡ã€‚åœ¨æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œ<code>byte</code>ç±»å‹é€šå¸¸ç”¨äºè¡¨ç¤ºå’Œæ“ä½œå­—èŠ‚æ•°æ®ã€‚</li><li>â€¦</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å–å›¾åƒæ–‡ä»¶çš„å­—èŠ‚æ•°æ®</span></span><br><span class="line"><span class="built_in">byte</span>[] imageData = File.ReadAllBytes(<span class="string">&quot;image.jpg&quot;</span>);</span><br><span class="line"><span class="comment">// å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œè¿”å›å‹ç¼©åçš„å­—èŠ‚æ•°æ®</span></span><br><span class="line"><span class="built_in">byte</span>[] compressedData = CompressData(originalData);</span><br></pre></td></tr></table></figure><hr><h3 id="5-å¼‚å¸¸å¤„ç†å…³é”®å­—"><a href="#5-å¼‚å¸¸å¤„ç†å…³é”®å­—" class="headerlink" title="5. å¼‚å¸¸å¤„ç†å…³é”®å­—"></a>5. å¼‚å¸¸å¤„ç†å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>try</code>å…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ª<code>try</code>å—ï¼Œè¡¨ç¤ºå…¶ä¸­å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ã€‚</p><ul><li><code>try</code>å—åé¢é€šå¸¸è·Ÿéšä¸€ä¸ªæˆ–å¤šä¸ª<code>catch</code>å—ï¼Œç”¨äºå¤„ç†å¯èƒ½æŠ›å‡ºçš„ç‰¹å®šå¼‚å¸¸ã€‚æœ€åè¿˜å¯ä»¥é€‰æ‹©æ€§åœ°åŒ…å«ä¸€ä¸ª<code>finally</code>å—ï¼Œå®ƒåŒ…å«çš„ä»£ç æ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šè¢«æ‰§è¡Œã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line">StreamReader reader = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    reader = <span class="keyword">new</span> StreamReader(<span class="string">&quot;nonexistent_file.txt&quot;</span>);</span><br><span class="line">    Console.WriteLine(reader.ReadToEnd());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (FileNotFoundException ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¤„ç†æ–‡ä»¶æ‰¾ä¸åˆ°çš„å¼‚å¸¸</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;File not found: &quot;</span> + ex.FileName);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å…¶ä»–ç±»å‹çš„å¼‚å¸¸</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;An error occurred: &quot;</span> + ex.Message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿å…³é—­StreamReaderå¯¹è±¡ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æº</span></span><br><span class="line">    <span class="keyword">if</span> (reader != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        reader.Close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>try</code>å—ä¸­çš„ä»£ç å¼•å‘äº†å¼‚å¸¸ï¼Œç¨‹åºä¼šç«‹å³è·³è½¬åˆ°<code>catch</code>å—ï¼Œå¯»æ‰¾ä¸å¼‚å¸¸ç±»å‹åŒ¹é…çš„<code>catch</code>å—ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„ä»£ç å—ã€‚æ¯ä¸ª<code>catch</code>å—å¯ä»¥æ•è·å¹¶å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚</p><ul><li>å¤„ç†å¼‚æ­¥å‡½æ•°çš„å¼‚å¸¸<br>å¼‚æ­¥å‡½æ•°é€šå¸¸è¿”å›ä¸€ä¸ª<code>Task</code>æˆ–<code>Task&lt;T&gt;</code>å¯¹è±¡ã€‚å¯ä»¥åœ¨<code>try</code>å—ä¸­<code>await</code>è¿™ä¸ªä»»åŠ¡ï¼Œå¹¶åœ¨<code>catch</code>å—ä¸­å¤„ç†å¯èƒ½çš„å¼‚å¸¸ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœ‰å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SomeAsyncOperation</span>()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">HandleAsyncOperation</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">await</span> SomeAsyncOperation();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;An exception occurred: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä¸æ˜¯æ‰€æœ‰çš„å¼‚å¸¸éƒ½åº”è¯¥è¢«æ•è·ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªåº”è¯¥æ•è·çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ã€‚å¯¹äºä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸ï¼Œæœ€å¥½è®©å®ƒä»¬ä¼ æ’­å‡ºå»ï¼Œè¿™æ ·è°ƒç”¨è€…æˆ–è€…å…¨å±€å¼‚å¸¸å¤„ç†å™¨å¯ä»¥æ•è·å¹¶å¤„ç†å®ƒä»¬ã€‚</p><p>ï¼ˆè¿™é‡Œæš‚æ—¶çœç•¥å¤„ç†è¿­ä»£å™¨æ–¹æ³•ä¸­çš„å¼‚å¸¸ï¼Œå¾…è¡¥å……ï¼‰</p><hr><h3 id="6-class-å…³é”®å­—"><a href="#6-class-å…³é”®å­—" class="headerlink" title="6. class å…³é”®å­—"></a>6. class å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/class"><code>class</code></a>å…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ªç±»ã€‚</p><ul><li>ç±»æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„å±æ€§ï¼ˆå­—æ®µã€å¸¸é‡å’Œäº‹ä»¶ï¼‰ã€æ–¹æ³•å’Œç´¢å¼•å™¨çš„ç»„åˆã€‚ç±»å¯ä»¥ç›´æ¥å®ä¾‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåŸºç±»ç»§æ‰¿ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç±»çš„æˆå‘˜å˜é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> myInt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        myInt = <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç±»çš„æˆå‘˜æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintValue</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;MyInt = &quot;</span> + myInt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><ins><code>C#</code> ä¸­ä»…å…è®¸å•ä¸€ç»§æ‰¿ï¼Œå³ä¸€ä¸ªç±»ä»…èƒ½ä»ä¸€ä¸ªåŸºç±»ç»§æ‰¿å®ç°ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªç±»å¯æ‹¥æœ‰å¤šä¸ªæ¥å£</ins> (é‡è¦)ã€‚</p><table><thead><tr><th align="left">ç»§æ‰¿</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">æ— </td><td align="left">class ClassA { }</td></tr><tr><td align="left">å•ä¸€</td><td align="left">class DerivedClass : BaseClass { }</td></tr><tr><td align="left">æ— ï¼Œå®ç°ä¸¤ä¸ªæ¥å£</td><td align="left">class ImplClass : IFace1, IFace2 { }</td></tr><tr><td align="left">å•ä¸€ï¼Œå®ç°ä¸€ä¸ªæ¥å£</td><td align="left">class ImplDerivedClass : BaseClass, IFace1 { }</td></tr></tbody></table><ul><li><p>ä¸‹é¢æ˜¯ä¸€äº›ç±»çš„ä½¿ç”¨æ–¹æ³•</p></li><li><p>(1) è®¿é—®ä¿®é¥°ç¬¦: ç±»çš„è®¿é—®ä¿®é¥°ç¬¦å†³å®šäº†å®ƒåœ¨ä»£ç ä¸­çš„å¯è§æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»æ˜¯<code>internal</code>çš„ï¼Œæ„å‘³ç€å®ƒåªåœ¨åŒä¸€ç¨‹åºé›†ä¸­å¯è§ã€‚ç±»çš„æˆå‘˜é»˜è®¤æ˜¯<code>private</code>çš„ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨è®¿é—®ã€‚</p></li><li><p>(2) é™æ€ç±»: ä½¿ç”¨<code>static</code>å…³é”®å­—å¯ä»¥å®šä¹‰é™æ€ç±»å’Œé™æ€æˆå‘˜ã€‚é™æ€ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œä¸èƒ½è¢«ç»§æ‰¿ï¼Œä¸”åªèƒ½åŒ…å«é™æ€æˆå‘˜ã€‚é™æ€æˆå‘˜åªæœ‰ä¸€ä»½ï¼Œå±äºç±»æœ¬èº«ï¼Œè€Œä¸å±äºç±»çš„ä»»ä½•å®ä¾‹ã€‚</p></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">MathUtils</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">double</span> <span class="title">SquareRoot</span>(<span class="params"><span class="built_in">double</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.Sqrt(<span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MathUtils.Add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">MathUtils.SquareRoot(<span class="number">4.0</span>)</span><br></pre></td></tr></table></figure><ul><li><p>(3) æ„é€ å‡½æ•°: ç±»å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºç±»çš„å®ä¾‹ã€‚æ„é€ å‡½æ•°çš„åç§°å¿…é¡»ä¸ç±»åç›¸åŒï¼Œä¸”ä¸è¿”å›ä»»ä½•å€¼ã€‚</p></li><li><p>(4) é™æ€æ„é€ å‡½æ•°: <ins>ç”¨äºåˆå§‹åŒ–é™æ€æˆå‘˜æˆ–æ‰§è¡Œé™æ€åˆå§‹åŒ–ä»£ç </ins>ã€‚å®ƒæ²¡æœ‰å‚æ•°åˆ—è¡¨ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è°ƒç”¨ã€‚<ins>é™æ€æ„é€ å‡½æ•°åœ¨ç±»çš„ç¬¬ä¸€ä¸ªå®ä¾‹æˆ–é™æ€æˆå‘˜è¢«è®¿é—®ä¹‹å‰è‡ªåŠ¨è°ƒç”¨ï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡</ins>ã€‚</p></li></ul><p>è®¿é—®é™æ€æˆå‘˜æ—¶è°ƒç”¨</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">int</span> myStaticField;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">int</span> myStaticReadOnlyField;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">MyClass</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é™æ€æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–é™æ€æˆå‘˜</span></span><br><span class="line">        myStaticField = <span class="number">10</span>;</span><br><span class="line">        myStaticReadOnlyField = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MyMethod</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;MyStaticField: &quot;</span> + myStaticField);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;MyStaticReadOnlyField: &quot;</span> + myStaticReadOnlyField);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨é™æ€æ–¹æ³•ï¼Œé™æ€æ„é€ å‡½æ•°ä¼šåœ¨æ­¤æ—¶è‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line">MyClass.MyMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyStaticField: 10</span></span><br><span class="line"><span class="comment">// MyStaticReadOnlyField: 20</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºç±»çš„å®ä¾‹æ—¶è°ƒç”¨</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">int</span> myStaticField;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">int</span> myStaticReadOnlyField;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">MyClass</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        myStaticField = <span class="number">10</span>;</span><br><span class="line">        myStaticReadOnlyField = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;MyStaticField: &quot;</span> + myStaticField);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;MyStaticReadOnlyField: &quot;</span> + myStaticReadOnlyField);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç±»çš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Œé™æ€æ„é€ å‡½æ•°ä¼šåœ¨æ­¤æ—¶è‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line">MyClass obj = <span class="keyword">new</span> MyClass();</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyStaticField: 10</span></span><br><span class="line"><span class="comment">// MyStaticReadOnlyField: 20</span></span><br></pre></td></tr></table></figure><ul><li>(5) å†…éƒ¨ç±»: å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»å†…éƒ¨çš„ç±»ã€‚å†…éƒ¨ç±»æ‹¥æœ‰è®¿é—®å¤–éƒ¨ç±»æˆå‘˜çš„ç‰¹æƒï¼Œå¯ä»¥ç”¨äºå®ç°æ›´å¤æ‚çš„é€»è¾‘å’Œå°è£…ã€‚ï¼ˆæ³¨æ„ï¼Œè™½ç„¶å†…éƒ¨ç±»å¯ä»¥è®¿é—®å…¶å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼Œä½†åè¿‡æ¥ä¸æˆç«‹ã€‚ï¼‰</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">OuterClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> outerField = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">InnerClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        OuterClass outer;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°ï¼Œé€šè¿‡å‚æ•°å°†å¤–éƒ¨ç±»å®ä¾‹ä¼ å…¥</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">InnerClass</span>(<span class="params">OuterClass outer</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.outer = outer;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InnerMethod</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(outer.outerField);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> InnerClass <span class="title">CreateInnerClass</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> InnerClass(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">OuterClass outer = <span class="keyword">new</span> OuterClass();</span><br><span class="line">OuterClass.InnerClass inner = outer.CreateInnerClass();</span><br><span class="line">inner.InnerMethod(); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><ul><li>(6) æ³›å‹ç±»: æ³›å‹ç±»å…·æœ‰åœ¨å®ä¾‹åŒ–æ—¶å¯ä»¥æŒ‡å®šå‚æ•°ç±»å‹çš„ç‰¹æ€§ï¼Œä»è€Œæä¾›äº†æ›´çµæ´»å’Œç±»å‹å®‰å…¨çš„ä»£ç é‡ç”¨æ–¹å¼ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyGenericClass</span>&lt;<span class="title">T</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> T myField;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyGenericClass</span>(<span class="params">T <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        myField = <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">MyMethod</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> myField;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyGenericClass&lt;<span class="built_in">int</span>&gt; intObj = <span class="keyword">new</span> MyGenericClass&lt;<span class="built_in">int</span>&gt;(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">int</span> <span class="keyword">value</span> = intObj.MyMethod(); <span class="comment">// è¿”å›å€¼ä¸º 10</span></span><br><span class="line"></span><br><span class="line">MyGenericClass&lt;<span class="built_in">string</span>&gt; stringObj = <span class="keyword">new</span> MyGenericClass&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"><span class="built_in">string</span> text = stringObj.MyMethod(); <span class="comment">// è¿”å›å€¼ä¸º &quot;Hello&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>C#</code>è¿˜æœ‰è®¸å¤šå…¶ä»–ä¸åŒçš„ç±»ï¼Œæ¯”å¦‚ä¹‹å‰ä»‹ç»çš„æŠ½è±¡ç±»ï¼Œè¿˜æœ‰æ¥å£ï¼Œå¯†å°ç±»ï¼Œæšä¸¾ç±»ï¼Œéƒ¨åˆ†ç±»ï¼Œç‰¹æ€§ç±»ï¼Œå§”æ‰˜ç±»ç­‰ç­‰ã€‚ï¼ˆå¾…è¡¥å……ï¼‰</p><hr><h3 id="7-const-å…³é”®å­—"><a href="#7-const-å…³é”®å­—" class="headerlink" title="7. const å…³é”®å­—"></a>7. const å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>const</code>å…³é”®å­—æ¥å£°æ˜æŸä¸ªå¸¸é‡å­—æ®µæˆ–å±€éƒ¨å˜é‡ã€‚å¸¸é‡å­—æ®µå’Œå¸¸é‡å±€éƒ¨å˜é‡ä¸æ˜¯å˜é‡å¹¶ä¸”ä¸èƒ½ä¿®æ”¹ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> X = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">double</span> GravitationalConstant = <span class="number">6.673e-11</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">string</span> ProductName = <span class="string">&quot;Visual C#&quot;</span>;</span><br></pre></td></tr></table></figure><hr><h3 id="8-decimal-å…³é”®å­—"><a href="#8-decimal-å…³é”®å­—" class="headerlink" title="8. decimal å…³é”®å­—"></a>8. decimal å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œå½“æ‰€éœ€çš„ç²¾åº¦ç”±å°æ•°ç‚¹å³ä¾§çš„ä½æ•°å†³å®šæ—¶ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types"><code>decimal</code></a>å…³é”®å­—æ˜¯åˆé€‚çš„ã€‚</p><ul><li>å®ƒæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨ç²¾ç¡®çš„åè¿›åˆ¶æ•°å€¼ï¼ˆæ”¯æŒå°æ•°ç‚¹å<code>28</code>çš„ç²¾ç¡®åº¦ï¼‰ï¼Œé€‚ç”¨äºéœ€è¦é«˜ç²¾åº¦è®¡ç®—çš„åœºæ™¯ï¼Œä¾‹å¦‚è´¢åŠ¡å’Œè´§å¸è®¡ç®—ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">decimal</span> myDecimal = <span class="number">3.14</span>m; <span class="comment">// ä½¿ç”¨åç¼€ &quot;m&quot; è¡¨ç¤º decimal ç±»å‹</span></span><br><span class="line"><span class="built_in">float</span> myFloat = <span class="number">3.14f</span>; <span class="comment">// ä½¿ç”¨åç¼€ &quot;f&quot; è¡¨ç¤º float ç±»å‹</span></span><br><span class="line"><span class="built_in">double</span> myDouble = <span class="number">3.14</span>; <span class="comment">// é»˜è®¤ä¸º double ç±»å‹</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>decimal</code>ç±»å‹è™½ç„¶å…·æœ‰è¾ƒé«˜çš„ç²¾åº¦å’Œå‡†ç¡®æ€§ï¼Œå®ƒçš„è®¡ç®—é€Ÿåº¦é€šå¸¸æ¯”å…¶ä»–æµ®ç‚¹ç±»å‹ï¼Œæ¯”å¦‚ <code>float</code> å’Œ <code>double</code>ï¼Œæ…¢ã€‚</p><hr><h3 id="9-delegate-å…³é”®å­—"><a href="#9-delegate-å…³é”®å­—" class="headerlink" title="9. delegate å…³é”®å­—"></a>9. delegate å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/delegates/"><code>delegate</code></a>å…³é”®å­—ç”¨äºå£°æ˜å’Œä½¿ç”¨å§”æ‰˜ã€‚</p><p>å®ƒç±»ä¼¼äºä¸€ä¸ªè£…ç€æ–¹æ³•çš„å®¹å™¨ï¼Œå¯ä»¥å°†æ–¹æ³•ï¼ˆå®ä¾‹æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ï¼‰ä½œä¸ºå¯¹è±¡è¿›è¡Œä¼ é€’ï¼Œä½†<ins>å‰ææ˜¯å§”æ‰˜å’Œå¯¹åº”ä¼ é€’æ–¹æ³•çš„ç­¾åå¾—æ˜¯ç›¸åŒçš„ï¼Œç­¾åæŒ‡çš„æ˜¯ä»–ä»¬çš„å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹</ins>ã€‚ï¼ˆç±»ä¼¼å›è°ƒå‡½æ•°æˆ–è€…<code>Thunk</code>å‡½æ•°ï¼‰</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å§”æ‰˜çš„å£°æ˜ï¼ŒæŒ‡å®šäº†è¿”å›å€¼ç±»å‹ä¸º intï¼Œæ¥æ”¶ä¸¤ä¸ª int ç±»å‹çš„å‚æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="built_in">int</span> <span class="title">MyDelegate</span>(<span class="params"><span class="built_in">int</span> num1, <span class="built_in">int</span> num2</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å§”æ‰˜çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œçš„ method å‚æ•°æ˜¯ä¸€ä¸ª Operation ç±»å‹çš„å§”æ‰˜</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Calculate</span>(<span class="params"><span class="built_in">int</span> num1, <span class="built_in">int</span> num2, MyDelegate callback</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åœ¨Calculateæ–¹æ³•ä¸­è°ƒç”¨å§”æ‰˜</span></span><br><span class="line">        <span class="keyword">return</span> callback(num1, num2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªç¬¦åˆ Operation å§”æ‰˜ç­¾åçš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> num1, <span class="built_in">int</span> num2</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Subtract</span>(<span class="params"><span class="built_in">int</span> num1, <span class="built_in">int</span> num2</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Calculator calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å§”æ‰˜å°† Add æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line"><span class="built_in">int</span> result = calculator.Calculate(<span class="number">10</span>, <span class="number">5</span>, Add);</span><br><span class="line">Console.WriteLine(result);  <span class="comment">// è¾“å‡ºï¼š15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å§”æ‰˜å°† Subtract æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line">result = calculator.Calculate(<span class="number">10</span>, <span class="number">5</span>, Subtract);</span><br><span class="line">Console.WriteLine(result);  <span class="comment">// è¾“å‡ºï¼š5</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨<code>C#</code>ä¸­åˆ›å»ºå§”æ‰˜å¯¹è±¡æ—¶ï¼Œå¹¶ä¸ä¸€å®šéœ€è¦ä½¿ç”¨<code>new</code>å…³é”®å­—æ¥å®ä¾‹åŒ–å§”æ‰˜ã€‚</p><ul><li>ä½¿ç”¨<code>new</code>å…³é”®å­—å’Œå§”æ‰˜ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºå§”æ‰˜å¯¹è±¡</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">MyDelegate myDelegate = <span class="keyword">new</span> MyDelegate(ShowMessage);</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>new MyDelegate</code>è¯­æ³•åˆ›å»ºäº†ä¸€ä¸ªå§”æ‰˜å¯¹è±¡<code>myDelegate</code>ï¼Œå¹¶å°†<code>ShowMessage</code>æ–¹æ³•ç»‘å®šåˆ°å§”æ‰˜ä¸Šã€‚</p><ul><li>ä½¿ç”¨éšå¼æ–¹æ³•ç»„è½¬æ¢æ¥åˆ›å»ºå§”æ‰˜å¯¹è±¡</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">MyDelegate myDelegate = ShowMessage;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥å°†æ–¹æ³•å<code>ShowMessage</code>èµ‹å€¼ç»™å§”æ‰˜å¯¹è±¡<code>myDelegate</code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œéšå¼æ–¹æ³•ç»„è½¬æ¢ï¼Œå°†æ–¹æ³•è½¬æ¢ä¸ºå§”æ‰˜å¯¹è±¡ã€‚</p><ul><li>ä½¿ç”¨åŒ¿åæ–¹æ³•åˆ›å»ºå§”æ‰˜å¯¹è±¡</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">MyDelegate myDelegate = <span class="built_in">delegate</span>(<span class="built_in">string</span> message)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(message);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åŒ¿åæ–¹æ³•çš„è¯­æ³•æ˜¯ä½¿ç”¨å…³é”®å­—<code>delegate</code>åè·Ÿä¸€ä¸ªå‚æ•°åˆ—è¡¨å’Œæ–¹æ³•ä½“ã€‚</p><ul><li>ä½¿ç”¨<code>Lambda</code>è¡¨è¾¾å¼åˆ›å»ºå§”æ‰˜å¯¹è±¡</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Lambdaè¡¨è¾¾å¼çš„å‚æ•°éƒ¨åˆ†åªä½¿ç”¨äº†å‚æ•°å&quot;message&quot;ï¼Œè€Œæ²¡æœ‰æŒ‡å®šå‚æ•°ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">// ç¼–è¯‘å™¨ä¼šæ ¹æ®å§”æ‰˜ç±»å‹æ¨æ–­å‡ºå‚æ•°ç±»å‹ã€‚</span></span><br><span class="line">MyDelegate myDelegate = (message) =&gt; Console.WriteLine(message);</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>Lambda</code>è¡¨è¾¾å¼å®šä¹‰äº†ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œå°†å…¶èµ‹å€¼ç»™å§”æ‰˜å¯¹è±¡<code>myDelegate</code>ã€‚</p><ul><li><p>é‚£ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨å§”æ‰˜<code>delegate</code>ï¼Ÿ</p></li><li><p>(1) äº‹ä»¶å¤„ç†: å§”æ‰˜å¹¿æ³›ç”¨äºäº‹ä»¶å¤„ç†æ¨¡å‹ä¸­ã€‚é€šè¿‡å®šä¹‰å§”æ‰˜ç±»å‹å’Œäº‹ä»¶ï¼Œå¯ä»¥å°†äº‹ä»¶ä¸ç‰¹å®šçš„å¤„ç†æ–¹æ³•å…³è”èµ·æ¥ã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå§”æ‰˜ä¼šè°ƒç”¨ç»‘å®šçš„æ–¹æ³•ï¼Œä»è€Œå®ç°äº‹ä»¶çš„å¤„ç†å’Œå“åº”ã€‚</p></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªå§”æ‰˜</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">EventHandler</span>(<span class="params"><span class="built_in">string</span> message</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EventPublisher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªäº‹ä»¶ï¼Œä½¿ç”¨ä¹‹å‰å®šä¹‰çš„å§”æ‰˜</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler Event;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TriggerEvent</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">        Event?.Invoke(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EventSubscriber</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Subscribe</span>(<span class="params">EventPublisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">        publisher.Event += HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">HandleEvent</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†äº‹ä»¶</span></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Event received: &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºäº‹ä»¶å‘å¸ƒè€…å’Œè®¢é˜…è€…</span></span><br><span class="line">EventPublisher publisher = <span class="keyword">new</span> EventPublisher();</span><br><span class="line">EventSubscriber subscriber = <span class="keyword">new</span> EventSubscriber();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">subscriber.Subscribe(publisher);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">publisher.TriggerEvent(<span class="string">&quot;Hello, World!&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>(2) å›è°ƒå‡½æ•°: å§”æ‰˜å¯ç”¨ä½œå›è°ƒå‡½æ•°çš„ä¸€ç§æ–¹å¼ã€‚å½“ä¸€ä¸ªæ–¹æ³•éœ€è¦åœ¨å®Œæˆåé€šçŸ¥å¦ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†å§”æ‰˜ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨å§”æ‰˜ä»¥æ‰§è¡Œå›è°ƒæ“ä½œã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyCallbackDelegate</span>(<span class="params"><span class="built_in">string</span> message</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Processor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> MyCallbackDelegate callback;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Processor</span>(<span class="params">MyCallbackDelegate callback</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.callback = callback;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Process</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Processing...</span></span><br><span class="line">        <span class="comment">// Once processing is done, callback is called:</span></span><br><span class="line">        callback(<span class="string">&quot;Processing completed!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a new processor, passing it a callback function:</span></span><br><span class="line">Processor processor = <span class="keyword">new</span> Processor(MyCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start the processing:</span></span><br><span class="line">processor.Process();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MyCallback</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>(3) å¤šæ’­å§”æ‰˜ (å§”æ‰˜é“¾): å§”æ‰˜è¿˜æ”¯æŒå¤šæ’­ï¼ˆ<code>multicast</code>ï¼‰çš„åŠŸèƒ½ï¼Œå³ä¸€ä¸ªå§”æ‰˜å¯ä»¥ç»‘å®šå¤šä¸ªæ–¹æ³•ã€‚è¿™ä½¿å¾—å¯ä»¥å°†å¤šä¸ªæ–¹æ³•ä½œä¸ºå§”æ‰˜çš„è°ƒç”¨åˆ—è¡¨ï¼Œå¹¶æŒ‰é¡ºåºä¾æ¬¡è°ƒç”¨å®ƒä»¬ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyDelegate</span>()</span>;</span><br><span class="line"></span><br><span class="line">MyDelegate myDelegate = Method1;</span><br><span class="line">myDelegate += Method2;</span><br><span class="line">myDelegate += Method3;</span><br><span class="line">myDelegate -= Method4; <span class="comment">// åˆ é™¤è°ƒç”¨åˆ—è¡¨ä¸­çš„æ–¹æ³•</span></span><br><span class="line">myDelegate();  <span class="comment">// è°ƒç”¨å§”æ‰˜ï¼Œä¾æ¬¡æ‰§è¡Œç»‘å®šçš„æ–¹æ³•</span></span><br></pre></td></tr></table></figure><ul><li>(4) æ³›å‹å§”æ‰˜: <code>C#</code>ä¸­çš„å§”æ‰˜æ”¯æŒæ³›å‹ï¼Œå¯ä»¥æ›´å¥½åœ°æ”¯æŒç±»å‹å®‰å…¨æ€§å’Œä»£ç é‡ç”¨ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="built_in">delegate</span> T <span class="title">MyGenericDelegate</span>&lt;<span class="title">T</span>&gt;(<span class="params">T <span class="keyword">value</span></span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Square</span>(<span class="params"><span class="built_in">int</span> x</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyGenericDelegate&lt;<span class="built_in">int</span>&gt; squareDelegate = Square;</span><br><span class="line"><span class="built_in">int</span> result = squareDelegate(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><ul><li>(5) <code>LINQ</code> å’Œ <code>Lambda</code> è¡¨è¾¾å¼: åœ¨<code>LINQ</code>ä¸­ï¼Œå§”æ‰˜ç”¨äºå®šä¹‰æŸ¥è¯¢æ“ä½œã€‚è€Œ<code>Lambda</code>è¡¨è¾¾å¼å®è´¨ä¸Šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å§”æ‰˜ï¼Œä»¥ä¸€ç§æ›´ç®€æ´å’Œå¼ºå¤§çš„æ–¹å¼å®šä¹‰åŒ¿åå‡½æ•°ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®šä¹‰ä¸€ä¸ªå§”æ‰˜ï¼Œæ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºå¶æ•°</span></span><br><span class="line">        Func&lt;<span class="built_in">int</span>, <span class="built_in">bool</span>&gt; isEven = x =&gt; x % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨LINQå’Œå§”æ‰˜æ‰¾å‡ºæ‰€æœ‰å¶æ•°</span></span><br><span class="line">        IEnumerable&lt;<span class="built_in">int</span>&gt; evens = numbers.Where(isEven);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰“å°æ‰€æœ‰çš„å¶æ•°</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> evens)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨<code>C#</code>ä¸­ï¼Œä¸ä¸€å®šéè¦ä½¿ç”¨<code>delegate</code>å…³é”®å­—æ¥å®šä¹‰å§”æ‰˜ã€‚å…¶å®ï¼Œ<code>Func&lt;T, TResult&gt;</code>ã€<code>Action&lt;T&gt;</code>ç­‰éƒ½æ˜¯å†…ç½®çš„å§”æ‰˜ç±»å‹ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>delegate</code>å…³é”®å­—ã€‚ï¼ˆ<code>C#</code>ä¸­å†…ç½®çš„å§”æ‰˜ç±»å‹ï¼‰</p><ul><li>(6) å®šåˆ¶æˆ–æ‰©å±•æ–¹æ³•: åœ¨<code>C#</code>ä¸­ï¼Œå¯ä»¥åˆ©ç”¨å§”æ‰˜å»å®šåˆ¶æˆ–æ‰©å±•æ–¹æ³•ï¼Œæ”¹å˜å…¶è¡Œä¸ºæˆ–å¢åŠ æ–°çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å§”æ‰˜æ¥å®šåˆ¶æ¯”è¾ƒæ–¹æ³•ï¼Œä»è€Œå¯¹é›†åˆè¿›è¡Œè‡ªå®šä¹‰æ’åºã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="built_in">int</span> <span class="title">Comparison</span>&lt;<span class="keyword">in</span> <span class="title">T</span>&gt;(<span class="params">T x, T y</span>)</span>;</span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">5</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå§”æ‰˜å®ä¾‹ï¼Œä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•</span></span><br><span class="line">Comparison&lt;<span class="built_in">int</span>&gt; comparison = (x, y) =&gt; y.CompareTo(x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ List&lt;T&gt; ç±»çš„ Sort æ–¹æ³•ï¼Œå°†å§”æ‰˜ä½œä¸ºå‚æ•°ä¼ å…¥</span></span><br><span class="line">numbers.Sort(comparison);</span><br><span class="line"></span><br><span class="line"><span class="comment">// numbers: &#123; 10, 8, 6, 5, 3 &#125;</span></span><br></pre></td></tr></table></figure><ul><li>(7)ï¼ˆå¾…è¡¥å……ï¼‰</li></ul><hr><h3 id="10-enum-å…³é”®å­—"><a href="#10-enum-å…³é”®å­—" class="headerlink" title="10. enum å…³é”®å­—"></a>10. enum å…³é”®å­—</h3><p>åœ¨ <code>C#</code> ä¸­ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/enum"><code>enum</code></a> å…³é”®å­—ç”¨äºå£°æ˜æšä¸¾ç±»å‹ã€‚</p><ul><li><p>æšä¸¾æ˜¯ä¸€ç§å€¼ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå›ºå®šçš„å€¼é›†åˆã€‚è¿™äº›å€¼è¢«ç§°ä¸ºæšä¸¾æˆå‘˜ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªå…³è”çš„å¸¸é‡å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼æ˜¯<code>0</code>ï¼Œåç»­çš„æˆå‘˜å€¼ä¾æ¬¡é€’å¢<code>1</code>ï¼Œä½†æ˜¯å¯ä»¥æ˜¾å¼åœ°æ”¹å˜è¿™ä¸ªé¡ºåºã€‚</p></li><li><p>å‡è®¾æœ‰ä¸€ä¸ªæšä¸¾ç±»å‹å®šä¹‰äº†ä¸€å‘¨çš„å¤©æ•°</p></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> DayOfWeek</span><br><span class="line">&#123;</span><br><span class="line">    Sunday = <span class="number">0</span>,</span><br><span class="line">    Monday = <span class="number">1</span>,</span><br><span class="line">    Tuesday = <span class="number">2</span>,</span><br><span class="line">    Wednesday = <span class="number">3</span>,</span><br><span class="line">    Thursday = <span class="number">4</span>,</span><br><span class="line">    Friday = <span class="number">5</span>,</span><br><span class="line">    Saturday = <span class="number">6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥åˆ›å»ºä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å½“å‰çš„æ˜ŸæœŸå‡ </li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">DayOfWeek today = DayOfWeek.Monday;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥å°†æšä¸¾å€¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œä¾‹å¦‚æ•´æ•°æˆ–å­—ç¬¦ä¸²</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span> dayNumber = (<span class="built_in">int</span>)DayOfWeek.Friday;  <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">string</span> dayName = DayOfWeek.Friday.ToString();  <span class="comment">// &quot;Friday&quot;</span></span><br></pre></td></tr></table></figure><ul><li>åè¿‡æ¥ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºæšä¸¾å€¼</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">DayOfWeek day = (DayOfWeek)<span class="number">5</span>;  <span class="comment">// DayOfWeek.Friday</span></span><br><span class="line">DayOfWeek day = Enum.Parse&lt;DayOfWeek&gt;(<span class="string">&quot;Friday&quot;</span>);  <span class="comment">// DayOfWeek.Friday</span></span><br><span class="line"></span><br><span class="line">DayOfWeek day;</span><br><span class="line"><span class="built_in">bool</span> success = Enum.TryParse&lt;DayOfWeek&gt;(<span class="string">&quot;Sunday&quot;</span>, <span class="keyword">out</span> day); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæšä¸¾è¡¨ç¤ºçš„æ˜¯ä¸€ç»„ä½æ ‡å¿—ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨<code>[Flags]</code>å±æ€§ï¼Œå¹¶ä¸ºæšä¸¾æˆå‘˜æŒ‡å®š<code>2</code>çš„å¹‚æ¬¡æ–¹å€¼ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ä½è¿ç®—ç¬¦æ¥ç»„åˆã€æ·»åŠ æˆ–ç§»é™¤æšä¸¾å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">[<span class="meta">Flags</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> AccessRights</span><br><span class="line">&#123;</span><br><span class="line">    None = <span class="number">0</span>,     <span class="comment">// 0000</span></span><br><span class="line">    Read = <span class="number">1</span>,     <span class="comment">// 0001</span></span><br><span class="line">    Write = <span class="number">2</span>,    <span class="comment">// 0010</span></span><br><span class="line">    Execute = <span class="number">4</span>,  <span class="comment">// 0100</span></span><br><span class="line">    FullControl = Read | Write | Execute <span class="comment">// 0111</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>AccessRights</code>æšä¸¾å®šä¹‰äº†ä¸€ç»„è®¿é—®æƒé™ï¼Œæ¯ä¸ªæƒé™æ˜¯äºŒè¿›åˆ¶ä½çš„ä¸€ä¸ªæ ‡å¿—ã€‚è¿™å…è®¸æˆ‘ä»¬å°†ä¸åŒçš„æƒé™ç»„åˆåˆ°ä¸€èµ·ï¼Œç„¶åé€šè¿‡ä½è¿ç®—æ£€æŸ¥ç‰¹å®šçš„æƒé™æ˜¯å¦å­˜åœ¨ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®è¯»å’Œå†™æƒé™</span></span><br><span class="line">AccessRights rights = AccessRights.Read | AccessRights.Write;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥æ˜¯å¦æœ‰å†™æƒé™</span></span><br><span class="line"><span class="keyword">if</span> ((rights &amp; AccessRights.Write) == AccessRights.Write)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æœ‰å†™æƒé™&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;æ— å†™æƒé™&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä½è¿ç®—ç¬¦çš„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>HasFlag</code>æ–¹æ³•æ¥æ£€æŸ¥ç‰¹å®šçš„æƒé™æ˜¯å¦å­˜åœ¨ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">AccessRights rights = AccessRights.Read | AccessRights.Write;</span><br><span class="line"></span><br><span class="line">rights.HasFlag(AccessRights.Write) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><hr><h3 id="11-event-å…³é”®å­—"><a href="#11-event-å…³é”®å­—" class="headerlink" title="11. event å…³é”®å­—"></a>11. event å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/event"><code>event</code></a>å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªäº‹ä»¶ã€‚ï¼ˆ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/events/how-to-publish-events-that-conform-to-net-framework-guidelines">å¦‚ä½•å‘å¸ƒç¬¦åˆ .NET å‡†åˆ™çš„äº‹ä»¶</a>ï¼‰</p><ul><li>äº‹ä»¶æ˜¯ç”±å¯¹è±¡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹è§¦å‘çš„ä¸€ç§æœºåˆ¶ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ï¼Œæˆ–è€…æŸä¸ªæ“ä½œå·²ç»å®Œæˆã€‚å¯¹è±¡å¯ä»¥è®¢é˜…è¿™ä¸ªäº‹ä»¶ï¼Œè¿™æ ·å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè°ƒç”¨è®¢é˜…è€…å®šä¹‰çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚</li></ul><p>åœ¨äº‹ä»¶çš„å®šä¹‰ä¸­ï¼Œé€šå¸¸ä¼šæœ‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚ä¸€éƒ¨åˆ†æ˜¯å£°æ˜äº‹ä»¶çš„å§”æ‰˜ï¼ˆ<code>delegate</code>ï¼‰ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯äº‹ä»¶æœ¬èº«ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„<code>event</code>ä½¿ç”¨ä¾‹å­</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå§”æ‰˜</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">MyEventHandler</span>(<span class="params"><span class="built_in">string</span> message</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Publisher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> MyEventHandler MyEvent;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RaiseEvent</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">        MyEvent?.Invoke(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Subscriber</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Subscribe</span>(<span class="params">Publisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">        publisher.MyEvent += HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">HandleEvent</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æ”¶åˆ°äº†æ¥è‡ªPublisherçš„æ¶ˆæ¯ï¼š <span class="subst">&#123;message&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> publisher = <span class="keyword">new</span> Publisher();</span><br><span class="line">        <span class="keyword">var</span> subscriber = <span class="keyword">new</span> Subscriber();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">        subscriber.Subscribe(publisher);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘å¸ƒäº‹ä»¶</span></span><br><span class="line">        publisher.RaiseEvent(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å¸®åŠ©äº†äº‹ä»¶å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„è§£è€¦ã€‚å‘å¸ƒè€…å¹¶ä¸éœ€è¦çŸ¥é“è°è®¢é˜…äº†å®ƒçš„äº‹ä»¶ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“äº‹ä»¶å°†å¦‚ä½•è¢«å¤„ç†ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç‹¬ç«‹åœ°ä¿®æ”¹å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„ä»£ç ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><ul><li><p><code>event</code>å…³é”®å­—ä½¿ç”¨æ³¨æ„ç‚¹</p></li><li><p>(1) é¿å…å†…å­˜æ³„æ¼</p><ul><li>å¦‚æœä¸€ä¸ªå¯¹è±¡è®¢é˜…äº†å¦ä¸€ä¸ªå¯¹è±¡çš„äº‹ä»¶ï¼Œé‚£ä¹ˆåœ¨ä¸éœ€è¦è®¢é˜…äº‹ä»¶æ—¶åº”å½“åŠæ—¶å–æ¶ˆè®¢é˜…ï¼Œä»¥é¿å…å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ï¼ˆåªè¦äº‹ä»¶å‘å¸ƒè€…è¿˜åœ¨å†…å­˜ä¸­ï¼Œè®¢é˜…è€…å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œå³ä½¿è®¢é˜…è€…å·²ç»ä¸å†ä½¿ç”¨ï¼‰</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Subscriber</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Subscribe</span>(<span class="params">Publisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        publisher.MyEvent += HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Unsubscribe</span>(<span class="params">Publisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        publisher.MyEvent -= HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">HandleEvent</span>(<span class="params"><span class="built_in">object</span> sender, MyEventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æ”¶åˆ°äº†æ¥è‡ªPublisherçš„æ¶ˆæ¯ï¼š <span class="subst">&#123;e.Message&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>(2) å§”æ‰˜ç±»å‹<ul><li><code>System.EventHandler</code> å’Œ <code>System.EventHandler&lt;T&gt;</code> æ˜¯æ ‡å‡†çš„äº‹ä»¶å§”æ‰˜ç±»å‹ï¼Œæ¨èåœ¨äº‹ä»¶å®šä¹‰ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Publisher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ ‡å‡†çš„EventHandler</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler MyEvent;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ³›å‹çš„EventHandler</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler&lt;MyEventArgs&gt; MyEventWithArgs;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnMyEvent</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyEvent?.Invoke(<span class="keyword">this</span>, EventArgs.Empty);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnMyEventWithArgs</span>(<span class="params">MyEventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyEventWithArgs?.Invoke(<span class="keyword">this</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyEventArgs</span> : <span class="title">EventArgs</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Message &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>(3) äº‹ä»¶è®¿é—®å™¨<ul><li>äº‹ä»¶è®¿é—®å™¨å…è®¸åœ¨äº‹ä»¶è¢«æ·»åŠ æˆ–ç§»é™¤æ—¶æ‰§è¡Œè‡ªå®šä¹‰çš„é€»è¾‘ã€‚è¿™å¯¹äºè°ƒè¯•æˆ–ç®¡ç†è®¢é˜…è€…åˆ—è¡¨éå¸¸æœ‰ç”¨ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyEventArgs</span> : <span class="title">EventArgs</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Message &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Publisher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> EventHandler&lt;MyEventArgs&gt; myEvent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler&lt;MyEventArgs&gt; MyEvent</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">add</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº&quot;</span>);</span><br><span class="line">            myEvent += <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">remove</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº&quot;</span>);</span><br><span class="line">            myEvent -= <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnMyEvent</span>(<span class="params">MyEventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        myEvent?.Invoke(<span class="keyword">this</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RaiseEvent</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        OnMyEvent(<span class="keyword">new</span> MyEventArgs &#123; Message = message &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Subscriber</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Subscribe</span>(<span class="params">Publisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        publisher.MyEvent += HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Unsubscribe</span>(<span class="params">Publisher publisher</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        publisher.MyEvent -= HandleEvent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">HandleEvent</span>(<span class="params"><span class="built_in">object</span> sender, MyEventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;æ”¶åˆ°äº†æ¥è‡ªPublisherçš„æ¶ˆæ¯ï¼š <span class="subst">&#123;e.Message&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Publisher publisher = <span class="keyword">new</span> Publisher();</span><br><span class="line">        Subscriber subscriber = <span class="keyword">new</span> Subscriber();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">        subscriber.Subscribe(publisher);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">        publisher.RaiseEvent(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–æ¶ˆè®¢é˜…äº‹ä»¶</span></span><br><span class="line">        subscriber.Unsubscribe(publisher);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="12-explicit-å…³é”®å­—"><a href="#12-explicit-å…³é”®å­—" class="headerlink" title="12. explicit å…³é”®å­—"></a>12. explicit å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<a href="https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/user-defined-conversion-operators"><code>explicit</code></a>å…³é”®å­—ç”¨äºç±»å‹è½¬æ¢ã€‚</p><ul><li><p><code>explicit</code>å…³é”®å­—é€šå¸¸ç”¨åœ¨ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢æ“ä½œä¸­ï¼Œå…è®¸ä»ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢åˆ°å¦ä¸€ç§æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ä»ç±»åˆ°æ¥å£ï¼Œæˆ–è€…ä»çˆ¶ç±»åˆ°å­ç±»ç­‰ç­‰ã€‚</p></li><li><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè½¬æ¢æ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚ä½¿ç”¨<code>explicit</code>å…³é”®å­—å¯ä»¥å¼ºåˆ¶å¼€å‘è€…æ˜ç¡®åœ°å¤„ç†è½¬æ¢ï¼Œä»è€Œå‡å°‘åœ¨è½¬æ¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯çš„å¯èƒ½æ€§ã€‚</p></li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>explicit</code>å…³é”®å­—çš„ä¾‹å­</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Fahrenheit</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> Temperature &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨èç”¨ lambda è¡¨è¾¾å¼å†™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">Celsius</span>(<span class="params">Fahrenheit f</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ConvertToFahrenheit(f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Celsius <span class="title">ConvertToFahrenheit</span>(<span class="params">Fahrenheit f</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> celsiusTemperature = (<span class="number">5.0f</span> / <span class="number">9.0f</span>) * (f.Temperature - <span class="number">32</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Celsius(celsiusTemperature);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Celsius</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> Temperature &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Celsius</span>(<span class="params"><span class="built_in">float</span> temp</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Temperature = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fahrenheit f = <span class="keyword">new</span> Fahrenheit &#123; Temperature = <span class="number">100</span> &#125;;</span><br><span class="line">Celsius c = (Celsius)f;  <span class="comment">// æ˜¾å¼è½¬æ¢</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œä¸èƒ½ç›´æ¥å°†<code>Fahrenheit</code>å¯¹è±¡è½¬æ¢ä¸º<code>Celsius</code>ï¼Œå¿…é¡»æ˜ç¡®åœ°è¿›è¡Œè½¬æ¢ã€‚</p><hr><h3 id="13-foreach-å…³é”®å­—"><a href="#13-foreach-å…³é”®å­—" class="headerlink" title="13. foreach å…³é”®å­—"></a>13. foreach å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>foreach</code>å…³é”®å­—ç”¨äºéå†é›†åˆï¼ˆå¦‚æ•°ç»„ï¼Œåˆ—è¡¨ç­‰ï¼‰ä¸­çš„å…ƒç´ ã€‚</p><ul><li>å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡è°ƒç”¨é›†åˆå¯¹è±¡çš„<code>GetEnumerator</code>æ–¹æ³•æ¥è·å–<code>IEnumerator</code>æˆ–<code>IEnumerator&lt;T&gt;</code>å¯¹è±¡ï¼Œç„¶ååœ¨æ¯æ¬¡è¿­ä»£ä¸­è°ƒç”¨<code>MoveNext</code>æ–¹æ³•å’Œ<code>Current</code>å±æ€§ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼Œåé¢<code>IEnumerator</code>å’Œ<code>IEnumerator&lt;T&gt;</code>ç»Ÿç§°ä¸ºæšä¸¾å™¨</p></blockquote><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fibNumbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span> &#125;;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> element <span class="keyword">in</span> fibNumbers)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">$&quot;<span class="subst">&#123;element&#125;</span> &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// 0 1 1 2 3 5 8 13</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›<code>foreach</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•</p><ul><li>(1) å®ç°æšä¸¾å™¨æ¥å£çš„é›†åˆ<br>åœ¨<code>C#</code>ä¸­ï¼Œè®¸å¤šå†…ç½®é›†åˆç±»å‹éƒ½å®ç°äº†æšä¸¾å™¨æ¥å£ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥ä½¿ç”¨<code>foreach</code>å¾ªç¯è¿›è¡Œè¿­ä»£ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt; dictionary = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="string">&quot;One&quot;</span>, <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&quot;Two&quot;</span>, <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="string">&quot;Three&quot;</span>, <span class="number">3</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (KeyValuePair&lt;<span class="built_in">string</span>, <span class="built_in">int</span>&gt; item <span class="keyword">in</span> dictionary)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;Key: <span class="subst">&#123;item.Key&#125;</span>, Value: <span class="subst">&#123;item.Value&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>(2) å®ç°æšä¸¾å™¨æ¥å£çš„è‡ªå®šä¹‰ç±»<br>å¦‚æœæƒ³è¦è‡ªå®šä¹‰ç±»èƒ½å¤Ÿè¢«<code>foreach</code>å¾ªç¯éå†ï¼Œéœ€è¦å®ç°æšä¸¾å™¨æ¥å£ã€‚è¿™ä¸ªæ¥å£å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>GetEnumerator</code>ï¼Œè¿”å›ä¸€ä¸ªå®ç°äº†æšä¸¾å™¨æ¥å£çš„å¯¹è±¡ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyCollection</span> : <span class="title">IEnumerable</span>&lt;<span class="title">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span>[] data = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator&lt;<span class="built_in">int</span>&gt; <span class="title">GetEnumerator</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; data.Length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> data[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> GetEnumerator();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰é›†åˆ</span></span><br><span class="line">MyCollection collection = <span class="keyword">new</span> MyCollection();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> collection)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>(3) å¼‚æ­¥æµçš„è¿­ä»£<br>å¼‚æ­¥æµçš„è¿­ä»£æ˜¯<code>C# 8.0</code>æ–°å¢çš„ç‰¹æ€§ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶ï¼Œå†™å‡ºæ›´é«˜æ•ˆå’Œæ›´æ˜“äºç†è§£çš„ä»£ç ã€‚å¼‚æ­¥æµçš„è¿­ä»£é€šè¿‡<code>await foreach</code>å…³é”®å­—å®ç°ã€‚å®ƒèƒ½å¤Ÿå¼‚æ­¥åœ°è¿­ä»£è¿™æ ·çš„åºåˆ—ï¼Œè€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> IAsyncEnumerable&lt;<span class="built_in">int</span>&gt; <span class="title">GenerateSequence</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">await</span> Task.Delay(<span class="number">100</span>);  <span class="comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">TestAsyncStream</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">foreach</span> (<span class="function"><span class="keyword">var</span> number <span class="keyword">in</span> <span class="title">GenerateSequence</span>())</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>GenerateSequence</code>æ–¹æ³•ç”Ÿæˆäº†ä¸€ä¸ªå¼‚æ­¥åºåˆ—ã€‚æ¯ä¸ªå…ƒç´ éƒ½æ˜¯åœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´åç”Ÿæˆçš„ï¼Œä»¥æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œã€‚<code>TestAsyncStream</code>æ–¹æ³•ä½¿ç”¨<code>await foreach</code>è¯­å¥æ¥å¼‚æ­¥åœ°è¿­ä»£è¿™ä¸ªåºåˆ—ã€‚æ¯æ¬¡è¿­ä»£éƒ½ä¼šå¼‚æ­¥åœ°ç­‰å¾…ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p><hr><h3 id="14-interface-å…³é”®å­—"><a href="#14-interface-å…³é”®å­—" class="headerlink" title="14. interface å…³é”®å­—"></a>14. interface å…³é”®å­—</h3><p>åœ¨ <code>C#</code> ä¸­ï¼Œæ¥å£<code>interface</code>æ˜¯ä¸€ç§å®šä¹‰è¡Œä¸ºå¥‘çº¦çš„ç±»å‹ã€‚æ¥å£å£°æ˜ä¸€ç»„æ–¹æ³•ã€å±æ€§ã€äº‹ä»¶æˆ–ç´¢å¼•å™¨ï¼Œä½†ä¸æä¾›å…¶å®ç°ã€‚ç±»<code>class</code>æˆ–ç»“æ„ä½“<code>struct</code>å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œå¹¶æä¾›æ¥å£ä¸­å®šä¹‰çš„æˆå‘˜çš„å…·ä½“å®ç°ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Speak</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Move</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç±»æˆ–ç»“æ„ä½“å®ç°æ¥å£æ—¶ï¼Œå¿…é¡»æä¾›æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜çš„å…·ä½“å®ç°ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title">IPoint</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Property signatures:</span></span><br><span class="line">    <span class="built_in">int</span> X &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> Y &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> Distance &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Point</span> : <span class="title">IPoint</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Constructor:</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        X = x;</span><br><span class="line">        Y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Property implementation:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> X &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Y &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Property implementation</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Distance =&gt;</span><br><span class="line">       Math.Sqrt(X * X + Y * Y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">MainClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PrintPoint</span>(<span class="params">IPoint p</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;x=&#123;0&#125;, y=&#123;1&#125;&quot;</span>, p.X, p.Y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        IPoint p = <span class="keyword">new</span> Point(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">        Console.Write(<span class="string">&quot;My Point: &quot;</span>);</span><br><span class="line">        PrintPoint(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Output: My Point: x=2, y=3</span></span><br></pre></td></tr></table></figure><ul><li>æ¥å£å¯ä»¥ä»ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–æ¥å£ç»§æ‰¿ã€‚å®ç°è¯¥æ¥å£çš„ç±»å¿…é¡»å®ç°æ‰€æœ‰ç»§æ‰¿çš„æ¥å£æˆå‘˜ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IDrawable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Draw</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IResizable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Resize</span>(<span class="params"><span class="built_in">double</span> factor</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Shape</span> : <span class="title">IDrawable</span>, <span class="title">IResizable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Width &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Height &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shape</span>(<span class="params"><span class="built_in">double</span> width, <span class="built_in">double</span> height</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Width = width;</span><br><span class="line">        Height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç° IDrawable æ¥å£çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Draw</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Drawing a shape with width <span class="subst">&#123;Width&#125;</span> and height <span class="subst">&#123;Height&#125;</span>.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ç° IResizable æ¥å£çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Resize</span>(<span class="params"><span class="built_in">double</span> factor</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Width *= factor;</span><br><span class="line">        Height *= factor;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Resized shape to width <span class="subst">&#123;Width&#125;</span> and height <span class="subst">&#123;Height&#125;</span>.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«<ul><li>å®ç°: æ¥å£ä¸­ä¸èƒ½åŒ…å«ä»»ä½•å®ç°(<code>C# 8.0</code> çš„é»˜è®¤æ¥å£æ–¹æ³•é™¤å¤–)ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«å®ç°ã€‚</li><li>å¤šé‡ç»§æ‰¿: ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</li><li>æ„é€ å‡½æ•°: æ¥å£ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥ã€‚</li><li>æˆå‘˜ç±»å‹: æ¥å£ä¸­ä¸èƒ½åŒ…å«å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IShape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¥å£ä¸èƒ½æœ‰æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shape</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IShape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¥å£ä¸­ä¸èƒ½åŒ…å«å­—æ®µ</span></span><br><span class="line">    <span class="function"><span class="built_in">double</span> <span class="title">CalculateArea</span>(<span class="params"><span class="built_in">double</span> size</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">double</span> area;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="built_in">double</span> <span class="title">CalculateArea</span>(<span class="params"><span class="built_in">double</span> size</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">double</span> <span class="title">GetArea</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="15-internal-å…³é”®å­—"><a href="#15-internal-å…³é”®å­—" class="headerlink" title="15. internal å…³é”®å­—"></a>15. internal å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>internal</code>å…³é”®å­—ç”¨äºæŒ‡å®šæˆå‘˜çš„å¯è®¿é—®æ€§ã€‚<code>internal</code>ä¿®é¥°ç¬¦ä½¿æˆå‘˜åœ¨åŒä¸€ç¨‹åºé›†<code>assembly</code>å†…å¯è®¿é—®ï¼Œä½†åœ¨ç¨‹åºé›†å¤–ä¸å¯è®¿é—®ã€‚(è¿™é‡Œçš„ç¨‹åºé›†ä¸æ˜¯æŒ‡åŒä¸€ä¸ªæ–‡ä»¶, ä¹Ÿä¸æ˜¯æŒ‡<code>namespace</code>)</p><ul><li><p>ç¨‹åºé›†<code>Assembly</code>: ç¨‹åºé›†æ˜¯<code>.NET</code>ä¸­çš„åŸºæœ¬éƒ¨ç½²å•å…ƒï¼Œå¯ä»¥æ˜¯ä¸€ä¸ª<code>DLL</code>æˆ–<code>EXE</code>æ–‡ä»¶ã€‚ä¸€ä¸ªç¨‹åºé›†åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå‘½åç©ºé—´å’Œç±»å‹ï¼ŒåŒ…å«äº†å…ƒæ•°æ®å’Œä»£ç ã€‚ç¨‹åºé›†æ˜¯<code>.NET</code>ä¸­çš„ç‰©ç†è¾¹ç•Œã€‚</p></li><li><p>ç±»çš„<code>internal</code>å¯è®¿é—®æ€§</p><ul><li>åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»è¢«å£°æ˜ä¸º<code>internal</code>ï¼Œå› æ­¤å®ƒåªèƒ½åœ¨åŒä¸€ç¨‹åºé›†å†…è®¿é—®ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶1ï¼šMyClass.cs</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello from MyClass!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶2ï¼šProgram.cs</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass myClass = <span class="keyword">new</span> MyClass();</span><br><span class="line">        myClass.Display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»å’Œå®ƒçš„<code>Display</code>æ–¹æ³•éƒ½å¯ä»¥åœ¨<code>Program</code>ç±»ä¸­è®¿é—®ï¼Œå› ä¸ºå®ƒä»¬åœ¨åŒä¸€ä¸ªç¨‹åºé›†å†…ã€‚</p><ul><li>æ–¹æ³•çš„<code>internal</code>å¯è®¿é—®æ€§<ul><li>åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»æ˜¯<code>public</code>çš„ï¼Œä½†å…¶ä¸­çš„<code>InternalMethod</code>æ–¹æ³•è¢«å£°æ˜ä¸º<code>internal</code>ï¼Œå› æ­¤å®ƒåªèƒ½åœ¨åŒä¸€ç¨‹åºé›†å†…è®¿é—®ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶1ï¼šMyClass.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">internal</span> <span class="keyword">void</span> <span class="title">InternalMethod</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello from InternalMethod!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶2ï¼šProgram.cs</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass myClass = <span class="keyword">new</span> MyClass();</span><br><span class="line">        myClass.InternalMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>çš„<code>InternalMethod</code>æ–¹æ³•å¯ä»¥åœ¨<code>Program</code>ç±»ä¸­è®¿é—®ï¼Œå› ä¸ºå®ƒä»¬åœ¨åŒä¸€ä¸ªç¨‹åºé›†å†…ã€‚</p><ul><li>è·¨ç¨‹åºé›†è®¿é—®<ul><li>å¦‚æœå°è¯•ä»å¦ä¸€ä¸ªç¨‹åºé›†è®¿é—®<code>internal</code>æˆå‘˜ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªé¡¹ç›®: <code>ProjectA</code>å’Œ<code>ProjectB</code>ã€‚<code>ProjectA</code>å®šä¹‰äº†ä¸€ä¸ª<code>internal</code>ç±»ï¼Œè€Œ<code>ProjectB</code>è¯•å›¾è®¿é—®å®ƒã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ProjectA - æ–‡ä»¶1ï¼šMyClass.cs</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Hello from MyClass!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ProjectB - æ–‡ä»¶1ï¼šProgram.cs</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass myClass = <span class="keyword">new</span> MyClass(); <span class="comment">// ç¼–è¯‘é”™è¯¯ï¼š&#x27;MyClass&#x27; is inaccessible due to its protection level</span></span><br><span class="line">        myClass.Display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äº<code>MyClass</code>è¢«å£°æ˜ä¸º<code>internal</code>ï¼Œæ‰€ä»¥å®ƒä¸èƒ½åœ¨<code>ProjectB</code>ä¸­è®¿é—®ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><ul><li>é€‰æ‹©<code>internal</code>è€Œä¸é€‰æ‹©<code>public</code>çš„åŸå› <ul><li>å°è£…å®ç°ç»†èŠ‚: å½“ä½ å¸Œæœ›å°è£…ç±»ã€æ–¹æ³•æˆ–å…¶ä»–æˆå‘˜ï¼Œåªè®©å®ƒä»¬åœ¨åŒä¸€ä¸ªç¨‹åºé›†å†…ä½¿ç”¨ï¼Œè€Œä¸æš´éœ²ç»™å¤–éƒ¨ç¨‹åºé›†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>internal</code>ä¿®é¥°ç¬¦ã€‚</li><li>æ§åˆ¶<code>API</code>å…¬å¼€æ€§: åœ¨è®¾è®¡åº“æˆ–æ¡†æ¶æ—¶ï¼Œ<code>internal</code>ä¿®é¥°ç¬¦å¯ä»¥å¸®åŠ©æ§åˆ¶å“ªäº›ç±»å‹å’Œæˆå‘˜åº”æš´éœ²ç»™åº“çš„ä½¿ç”¨è€…ï¼Œå“ªäº›åº”ä¿æŒå†…éƒ¨ä½¿ç”¨ã€‚</li></ul></li></ul><hr><h3 id="16-is-å…³é”®å­—"><a href="#16-is-å…³é”®å­—" class="headerlink" title="16. is å…³é”®å­—"></a>16. is å…³é”®å­—</h3><p><code>is</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯ç‰¹å®šç±»å‹çš„å®ä¾‹ã€‚</p><ul><li>ç±»å‹æ£€æŸ¥<ul><li>ä½¿ç”¨<code>is</code>å¯ä»¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯ç‰¹å®šç±»å‹çš„å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›<code>true</code>ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">object</span> obj = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span> <span class="built_in">string</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj is a string.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj is not a string.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ¨¡å¼åŒ¹é…<ul><li>ä»<code>C# 7.0</code>å¼€å§‹ï¼Œ<code>is</code>å…³é”®å­—è¿˜æ”¯æŒæ¨¡å¼åŒ¹é…ã€‚è¿™ä½¿å¾—æ£€æŸ¥ç±»å‹å’Œè½¬æ¢ç±»å‹å¯ä»¥åœ¨ä¸€ä¸ªæ“ä½œä¸­å®Œæˆã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">object</span> obj = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span> <span class="built_in">string</span> s)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;obj is a string with value: <span class="subst">&#123;s&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj is not a string.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå¦‚æœ<code>obj</code>æ˜¯<code>string</code>ç±»å‹ï¼Œ<code>is</code>å…³é”®å­—ä¸ä»…æ£€æŸ¥ç±»å‹ï¼Œè¿˜å°†<code>obj</code>è½¬æ¢ä¸º<code>string</code>å¹¶èµ‹å€¼ç»™å˜é‡<code>s</code>ã€‚ç„¶åå¯ä»¥ç›´æ¥ä½¿ç”¨<code>s</code>ã€‚</p><ul><li>ä½¿ç”¨<code>is</code>è¿›è¡Œ<code>null</code>æ£€æŸ¥<ul><li><code>is</code>å…³é”®å­—è¿˜å¯ä»¥ç”¨æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸º<code>null</code>ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">object</span> obj = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span> <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj is null.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj is not null.&quot;</span>); <span class="comment">// ç›¸å½“äº is not</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ£€æŸ¥æ¥å£å®ç°<ul><li><code>is</code>å…³é”®å­—ä¹Ÿå¯ä»¥ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Speak</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Speak</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Woof!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">object</span> obj = <span class="keyword">new</span> Dog();</span><br><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span> IAnimal animal)</span><br><span class="line">&#123;</span><br><span class="line">    animal.Speak(); <span class="comment">// Outputs: Woof!</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;obj does not implement IAnimal.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="17-namespace-å…³é”®å­—"><a href="#17-namespace-å…³é”®å­—" class="headerlink" title="17. namespace å…³é”®å­—"></a>17. namespace å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>namespace</code>(å‘½åç©ºé—´) æ˜¯ç”¨äºç»„ç»‡ä»£ç å’Œé˜²æ­¢å‘½åå†²çªçš„ä¸€ç§æœºåˆ¶ã€‚å‘½åç©ºé—´æä¾›äº†ä¸€ç§é€»è¾‘ä¸Šçš„åˆ†ç»„æ–¹å¼ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç®¡ç†å’Œç»´æŠ¤ä»£ç ã€‚</p><ul><li>å®šä¹‰å‘½åç©ºé—´</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">MyApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MyMethod</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Hello from MyMethod!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»è¢«å®šä¹‰åœ¨<code>MyApplication</code>å‘½åç©ºé—´ä¸­ã€‚</p><ul><li>ä½¿ç”¨å‘½åç©ºé—´<ul><li>è¦ä½¿ç”¨æŸä¸ªå‘½åç©ºé—´ä¸­çš„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡<code>using</code>å…³é”®å­—å¯¼å…¥å‘½åç©ºé—´ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> MyApplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyClass myClass = <span class="keyword">new</span> MyClass();</span><br><span class="line">        myClass.MyMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‘½åç©ºé—´çš„å¥½å¤„<ul><li>ç»„ç»‡ä»£ç : é€šè¿‡ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥å°†ç›¸å…³çš„ç±»ã€æ¥å£ã€æšä¸¾ç­‰è¿›è¡Œåˆ†ç»„ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</li><li>é¿å…å‘½åå†²çª: åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¸åŒæ¨¡å—æˆ–åº“ä¸­å¯èƒ½ä¼šæœ‰åŒåçš„ç±»å‹ï¼Œé€šè¿‡ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥é¿å…è¿™äº›å†²çªã€‚</li></ul></li></ul><hr><h3 id="18-null-å…³é”®å­—"><a href="#18-null-å…³é”®å­—" class="headerlink" title="18. null å…³é”®å­—"></a>18. null å…³é”®å­—</h3><p><code>null</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­è¡¨ç¤ºå¯¹è±¡å¼•ç”¨ä¸æŒ‡å‘ä»»ä½•å®ä¾‹ã€‚å®ƒæ˜¯å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼ï¼Œæ„å‘³ç€å˜é‡ä¸å¼•ç”¨ä»»ä½•å¯¹è±¡ã€‚</p><ul><li>å¸¸è§ç”¨é€” (çœç•¥éƒ¨åˆ†å¸¸è§æƒ…å†µ)</li><li>(1) ç©ºåˆå¹¶è¿ç®—ç¬¦<ul><li>ç©ºåˆå¹¶è¿ç®—ç¬¦<code>(??)</code>æä¾›äº†ç®€æ´çš„è¯­æ³•æ¥å¤„ç†<code>null</code>å€¼ã€‚å¦‚æœå·¦æ“ä½œæ•°ä¸º<code>null</code>ï¼Œåˆ™è¿”å›å³æ“ä½œæ•°ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> str = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">string</span> result = str ?? <span class="string">&quot;default value&quot;</span>;</span><br><span class="line">Console.WriteLine(result); <span class="comment">// è¾“å‡º &quot;default value&quot;</span></span><br></pre></td></tr></table></figure><ul><li>(2) ç©ºæ¡ä»¶è¿ç®—ç¬¦<ul><li>ç©ºæ¡ä»¶è¿ç®—ç¬¦<code>(?.)</code>åœ¨è®¿é—®æˆå‘˜æˆ–è°ƒç”¨æ–¹æ³•æ—¶æ£€æŸ¥<code>null</code>ã€‚å¦‚æœå¯¹è±¡ä¸º<code>null</code>ï¼Œè¡¨è¾¾å¼è¿”å›<code>null</code>è€Œä¸å¼•å‘å¼‚å¸¸ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">MyClass obj = <span class="literal">null</span>;</span><br><span class="line">obj?.DoSomething(); <span class="comment">// ä¸ä¼šå¼•å‘ NullReferenceException</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>[] arr = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">int</span>? <span class="keyword">value</span> = arr?[<span class="number">0</span>]; <span class="comment">// value ä¸º null</span></span><br></pre></td></tr></table></figure><ul><li>(3) å¤„ç†å€¼ç±»å‹çš„<code>null</code><ul><li>å¯¹äºå€¼ç±»å‹ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼<code>null</code>ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å¯ç©ºç±»å‹ï¼ˆ<code>Nullable&lt;T&gt;</code> æˆ– <code>T?</code>ï¼‰æ¥è¡¨ç¤ºå¯ä»¥ä¸º<code>null</code>çš„å€¼ç±»å‹ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span>? nullableInt = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (nullableInt.HasValue)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(nullableInt.Value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;nullableInt is null&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="19-out-å…³é”®å­—"><a href="#19-out-å…³é”®å­—" class="headerlink" title="19. out å…³é”®å­—"></a>19. out å…³é”®å­—</h3><p>åœ¨<code>C#</code>ä¸­ï¼Œ<code>out</code>å…³é”®å­—ç”¨äºæ–¹æ³•å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‚æ•°å°†ç”±æ–¹æ³•åˆå§‹åŒ–å¹¶è¿”å›ç»™è°ƒç”¨æ–¹ã€‚<code>out</code>å‚æ•°åœ¨æ–¹æ³•è°ƒç”¨æ—¶ä¸éœ€è¦è¢«åˆå§‹åŒ–ï¼Œä½†åœ¨æ–¹æ³•è¿”å›ä¹‹å‰å¿…é¡»è¢«èµ‹å€¼ã€‚</p><ul><li>å®šä¹‰å’Œä½¿ç”¨<code>out</code>å‚æ•°<ul><li>åœ¨æ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨<code>out</code>å…³é”®å­—ï¼Œå¹¶åœ¨æ–¹æ³•è°ƒç”¨æ—¶ä¹Ÿä½¿ç”¨<code>out</code>å…³é”®å­—ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> result;</span><br><span class="line">        <span class="built_in">bool</span> success = TryParse(<span class="string">&quot;123&quot;</span>, <span class="keyword">out</span> result);</span><br><span class="line">        <span class="keyword">if</span> (success)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Parsed number: <span class="subst">&#123;result&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Failed to parse number.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">TryParse</span>(<span class="params"><span class="built_in">string</span> input, <span class="keyword">out</span> <span class="built_in">int</span> number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>.TryParse(input, <span class="keyword">out</span> number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>out</code>è¿”å›å¤šä¸ªå€¼<ul><li>é€šè¿‡<code>out</code>å‚æ•°ï¼Œå¯ä»¥è®©æ–¹æ³•è¿”å›å¤šä¸ªå€¼ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">double</span> area, perimeter;</span><br><span class="line">        CalculateCircle(<span class="number">5</span>, <span class="keyword">out</span> area, <span class="keyword">out</span> perimeter);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Area: <span class="subst">&#123;area&#125;</span>, Perimeter: <span class="subst">&#123;perimeter&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CalculateCircle</span>(<span class="params"><span class="built_in">double</span> radius, <span class="keyword">out</span> <span class="built_in">double</span> area, <span class="keyword">out</span> <span class="built_in">double</span> perimeter</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        area = Math.PI * radius * radius;</span><br><span class="line">        perimeter = <span class="number">2</span> * Math.PI * radius;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>out</code>ä¸<code>ref</code>çš„åŒºåˆ«</p><ul><li>åˆå§‹åŒ–è¦æ±‚: ä½¿ç”¨<code>out</code>å‚æ•°çš„æ–¹æ³•ä¸è¦æ±‚åœ¨è°ƒç”¨å‰åˆå§‹åŒ–è¯¥å‚æ•°ï¼Œè€Œ<code>ref</code>å‚æ•°å¿…é¡»åœ¨è°ƒç”¨å‰åˆå§‹åŒ–ã€‚</li><li>èµ‹å€¼è¦æ±‚: ä½¿ç”¨<code>out</code>å‚æ•°çš„æ–¹æ³•å¿…é¡»åœ¨æ–¹æ³•è¿”å›ä¹‹å‰ä¸ºè¯¥å‚æ•°èµ‹å€¼ï¼Œè€Œ<code>ref</code>å‚æ•°ä¸å¼ºåˆ¶è¦æ±‚åœ¨æ–¹æ³•å†…èµ‹å€¼ã€‚</li></ul></li><li><p>ä»¥ä¸‹é™åˆ¶é€‚ç”¨äºä½¿ç”¨<code>out</code>å…³é”®å­—</p><ul><li>å¼‚æ­¥æ–¹æ³•ä¸­ä¸å…è®¸ä½¿ç”¨<code>out</code>å‚æ•°ã€‚</li><li>è¿­ä»£å™¨æ–¹æ³•ä¸­ä¸å…è®¸ä½¿ç”¨<code>out</code>å‚æ•°ã€‚</li><li>å±æ€§ä¸èƒ½ä½œä¸º<code>out</code>å‚æ•°ä¼ é€’ã€‚</li></ul></li></ul><hr><h3 id="20-override-å…³é”®å­—"><a href="#20-override-å…³é”®å­—" class="headerlink" title="20. override å…³é”®å­—"></a>20. override å…³é”®å­—</h3><p><code>override</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºæ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å™¨æˆ–äº‹ä»¶ï¼Œè¡¨ç¤ºæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»çš„è™šæ–¹æ³•ã€è™šå±æ€§ã€è™šç´¢å¼•å™¨æˆ–è™šäº‹ä»¶ã€‚é€šè¿‡ä½¿ç”¨<code>override</code>ï¼Œæ´¾ç”Ÿç±»å¯ä»¥æä¾›åŸºç±»æˆå‘˜çš„æ–°å®ç°ã€‚</p><ul><li>å®šä¹‰åŸºç±»å’Œæ´¾ç”Ÿç±»<ul><li>åœ¨åŸºç±»ä¸­ï¼Œä½¿ç”¨<code>virtual</code>å…³é”®å­—å®šä¹‰å¯ä»¥è¢«é‡å†™çš„æˆå‘˜ã€‚åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œä½¿ç”¨<code>override</code>å…³é”®å­—é‡å†™è¿™äº›æˆå‘˜ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;BaseClass Display method&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;DerivedClass Display method&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>override</code>é‡å†™å±æ€§å’Œæ–¹æ³•<ul><li>å¯ä»¥ä½¿ç”¨<code>override</code>å…³é”®å­—é‡å†™åŸºç±»ä¸­çš„è™šå±æ€§ã€‚(é‡å†™æ–¹æ³•å¦‚ä¸Š)</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">int</span> Number &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ShowNumber</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Number: &quot;</span> + Number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _number;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> Number</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _number; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; _number = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ShowNumber</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Derived Number: &quot;</span> + Number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„äº‹é¡¹<ul><li>è™šæˆå‘˜: åªæœ‰åŸºç±»ä¸­æ ‡è®°ä¸º<code>virtual</code>æˆ–<code>abstract</code>çš„æˆå‘˜æ‰èƒ½è¢«é‡å†™ã€‚</li><li>è®¿é—®ä¿®é¥°ç¬¦: é‡å†™çš„æˆå‘˜çš„è®¿é—®çº§åˆ«å¿…é¡»ä¸åŸºç±»ä¸­çš„æˆå‘˜ä¸€è‡´ï¼Œæˆ–è€…æ›´ä¸¥æ ¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåŸºç±»ä¸­çš„è™šæ–¹æ³•æ˜¯<code>public</code>ï¼Œåˆ™æ´¾ç”Ÿç±»ä¸­çš„é‡å†™æ–¹æ³•ä¹Ÿå¿…é¡»æ˜¯<code>public</code>ï¼Œä¸èƒ½æ˜¯<code>protected</code>æˆ–<code>private</code>ã€‚</li></ul></li></ul><hr><h3 id="21-params-å…³é”®å­—"><a href="#21-params-å…³é”®å­—" class="headerlink" title="21. params å…³é”®å­—"></a>21. params å…³é”®å­—</h3><p><code>params</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºæŒ‡å®šä¸€ä¸ªæ–¹æ³•å‚æ•°æ•°ç»„ï¼Œä½¿å¾—æ–¹æ³•å¯ä»¥æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ã€‚</p><ul><li>ä½¿ç”¨<code>params</code>å…³é”®å­—çš„å‚æ•°å¿…é¡»æ˜¯æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å®ƒå¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼ŒåŒ…æ‹¬é›¶ä¸ªå‚æ•°ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumbers</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">int</span>[] numbers</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> numbers)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PrintNumbers(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);  <span class="comment">// è¾“å‡º: 1 2 3 4</span></span><br><span class="line">PrintNumbers(<span class="number">5</span>, <span class="number">6</span>);        <span class="comment">// è¾“å‡º: 5 6</span></span><br><span class="line">PrintNumbers();            <span class="comment">// è¾“å‡º: ï¼ˆç©ºï¼‰</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>params</code>çš„ç†ç”±</li><li>(1) çµæ´»æ€§å’Œç®€æ´æ€§<ul><li><code>params</code>å…³é”®å­—æä¾›äº†åœ¨æ–¹æ³•è°ƒç”¨æ—¶çš„çµæ´»æ€§å’Œç®€æ´æ€§ã€‚å®ƒå…è®¸è°ƒç”¨è€…ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œè€Œä¸éœ€è¦æ˜¾å¼åœ°åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚è¿™ä½¿å¾—æ–¹æ³•è°ƒç”¨æ›´ç®€æ´ã€æ›´ç›´è§‚ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PrintNumbers</span>(<span class="params"><span class="built_in">int</span>[] numbers</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> numbers)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ–¹æ³•æ—¶éœ€è¦åˆ›å»ºæ•°ç»„</span></span><br><span class="line">PrintNumbers(<span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;);</span><br><span class="line">PrintNumbers(<span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">10</span>, <span class="number">20</span> &#125;);</span><br><span class="line">PrintNumbers(<span class="keyword">new</span> <span class="built_in">int</span>[] &#123; &#125;);  <span class="comment">// ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ä½¿ç”¨<code>params</code>å…³é”®å­—ï¼Œåˆ™éœ€è¦æ˜¾å¼åœ°åˆ›å»ºæ•°ç»„</p><ul><li>(2) æ”¯æŒå¤šå‚æ•°é‡è½½<ul><li><code>params</code>å…³é”®å­—å…è®¸æ–¹æ³•æ”¯æŒå¤šç§å‚æ•°é‡è½½ï¼Œè¿™åœ¨éœ€è¦å¤„ç†å¤šä¸ªä¸åŒå‚æ•°æ•°é‡çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚å®ƒé¿å…äº†ä¸ºæ¯ç§å¯èƒ½çš„å‚æ•°æ•°é‡å®šä¹‰å¤šä¸ªé‡è½½æ–¹æ³•ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayItems</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">string</span>[] items</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> items)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ–¹æ³•æ—¶</span></span><br><span class="line">DisplayItems(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>);</span><br><span class="line">DisplayItems(<span class="string">&quot;Dog&quot;</span>, <span class="string">&quot;Cat&quot;</span>);</span><br><span class="line">DisplayItems();  <span class="comment">// ä¼ é€’é›¶ä¸ªå‚æ•°</span></span><br></pre></td></tr></table></figure><hr><h3 id="22-private-å…³é”®å­—"><a href="#22-private-å…³é”®å­—" class="headerlink" title="22. private å…³é”®å­—"></a>22. private å…³é”®å­—</h3><p><code>private</code>å…³é”®å­—æ˜¯<code>C#</code>ä¸­çš„è®¿é—®ä¿®é¥°ç¬¦ï¼Œç”¨äºæ§åˆ¶ç±»æˆ–ç»“æ„ä½“æˆå‘˜çš„å¯è®¿é—®æ€§ã€‚æ ‡è®°ä¸º<code>private</code>çš„æˆå‘˜åªèƒ½åœ¨å®šä¹‰å®ƒä»¬çš„ç±»æˆ–ç»“æ„ä½“å†…éƒ¨è®¿é—®ã€‚</p><ul><li>ä½¿ç”¨<code>private</code>å…³é”®å­—å¯ä»¥éšè—ç±»çš„å®ç°ç»†èŠ‚ï¼Œé™åˆ¶å¯¹ç±»å†…éƒ¨æ•°æ®çš„ç›´æ¥è®¿é—®ï¼Œä»è€Œæé«˜ä»£ç çš„å°è£…æ€§å’Œå®‰å…¨æ€§ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Employee2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="built_in">string</span> _name = <span class="string">&quot;FirstName, LastName&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="built_in">double</span> _salary = <span class="number">100.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">GetName</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Salary</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _salary; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">PrivateTest</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="keyword">new</span> Employee2();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The data members are inaccessible (private), so</span></span><br><span class="line">        <span class="comment">// they can&#x27;t be accessed like this:</span></span><br><span class="line">        <span class="comment">//    string n = e._name;</span></span><br><span class="line">        <span class="comment">//    double s = e._salary;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x27;_name&#x27; is indirectly accessed via method:</span></span><br><span class="line">        <span class="built_in">string</span> n = e.GetName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x27;_salary&#x27; is indirectly accessed via property</span></span><br><span class="line">        <span class="built_in">double</span> s = e.Salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„äº‹é¡¹<ul><li><code>private</code>æ˜¯<code>C#</code>ä¸­æœ€ä¸¥æ ¼çš„è®¿é—®ä¿®é¥°ç¬¦ï¼Œä»…é™äºåœ¨ç±»æˆ–ç»“æ„ä½“å†…éƒ¨è®¿é—®ã€‚</li><li><code>private</code>æˆå‘˜ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®ï¼Œå³ä½¿æ˜¯é€šè¿‡ç»§æ‰¿ã€‚</li><li>åœ¨ç»“æ„ä½“ä¸­ï¼Œæ‰€æœ‰æˆå‘˜é»˜è®¤ä¸º<code>private</code>ï¼Œè€Œåœ¨ç±»ä¸­ï¼Œæˆå‘˜é»˜è®¤ä¸º<code>private</code>ã€‚</li></ul></li></ul><hr><h3 id="23-protected-å…³é”®å­—"><a href="#23-protected-å…³é”®å­—" class="headerlink" title="23. protected å…³é”®å­—"></a>23. protected å…³é”®å­—</h3><p><code>protected</code>å…³é”®å­—æ˜¯<code>C#</code>ä¸­çš„è®¿é—®ä¿®é¥°ç¬¦ï¼Œç”¨äºæ§åˆ¶ç±»æˆ–ç»“æ„ä½“æˆå‘˜çš„å¯è®¿é—®æ€§ã€‚æ ‡è®°ä¸º<code>protected</code>çš„æˆå‘˜åªèƒ½åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è®¿é—®: </p><ul><li>åœ¨å®šä¹‰è¯¥æˆå‘˜çš„ç±»å†…éƒ¨è®¿é—®</li><li>åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®</li></ul><p>è¿™ç§è®¿é—®ä¿®é¥°ç¬¦å…è®¸ä½ åœ¨ä¿æŒæ•°æ®å°è£…çš„åŒæ—¶ï¼Œä¸ºæ´¾ç”Ÿç±»æä¾›è®¿é—®åŸºç±»æˆå‘˜çš„èƒ½åŠ›ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å—ä¿æŠ¤çš„å­—æ®µ</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">string</span> name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¬å…±æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetName</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å—ä¿æŠ¤çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">DisplayInfo</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Animal Name: <span class="subst">&#123;name&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å…¬å…±æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowDetails</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¿é—®åŸºç±»çš„å—ä¿æŠ¤æˆå‘˜</span></span><br><span class="line">        DisplayInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Dog dog = <span class="keyword">new</span> Dog();</span><br><span class="line">        dog.SetName(<span class="string">&quot;Buddy&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¿é—®æ´¾ç”Ÿç±»çš„å…¬å…±æ–¹æ³•</span></span><br><span class="line">        dog.ShowDetails();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç›´æ¥è®¿é—®åŸºç±»çš„å—ä¿æŠ¤æˆå‘˜ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">        <span class="comment">// dog.name = &quot;Buddy&quot;;  // é”™è¯¯</span></span><br><span class="line">        <span class="comment">// dog.DisplayInfo();   // é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>protected</code>çš„åŸå› <ul><li>ç»§æ‰¿ä¸æ‰©å±•: <code>protected</code>å…³é”®å­—å…è®¸æ´¾ç”Ÿç±»è®¿é—®åŸºç±»çš„æˆå‘˜ï¼Œä»è€Œæ”¯æŒç±»çš„ç»§æ‰¿å’Œæ‰©å±•ã€‚</li><li>æ•°æ®å°è£…: é€šè¿‡é™åˆ¶æˆå‘˜çš„è®¿é—®æƒé™ï¼Œ<code>protected</code>å…³é”®å­—æœ‰åŠ©äºä¿æŠ¤ç±»çš„å†…éƒ¨çŠ¶æ€ï¼ŒåŒæ—¶å…è®¸æ´¾ç”Ÿç±»è¿›è¡Œå¿…è¦çš„è®¿é—®ã€‚</li></ul></li></ul><p>ä»¥ä¸‹æ˜¯å¯¹<code>protected internal</code>å’Œ<code>private protected</code>è®¿é—®ä¿®é¥°ç¬¦çš„è¯¦ç»†è§£é‡Š</p><ul><li><code>protected internal</code>å…³é”®å­—ç»“åˆäº†<code>protected</code>å’Œ<code>internal</code>çš„ç‰¹æ€§ï¼Œæˆå‘˜å¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è®¿é—®<ul><li>åŒä¸€ç¨‹åºé›†: <code>internal</code>å…è®¸åŒä¸€ç¨‹åºé›†ä¸­çš„ä»»ä½•ä»£ç è®¿é—®ã€‚</li><li>æ´¾ç”Ÿç±»: <code>protected</code>å…è®¸æ´¾ç”Ÿç±»è®¿é—®ï¼Œå³ä½¿å®ƒä»¬åœ¨ä¸åŒçš„ç¨‹åºé›†ä¸­ã€‚</li></ul></li></ul><p>å› æ­¤ï¼Œ<code>protected internal</code>çš„æˆå‘˜å¯ä»¥è¢«åŒä¸€ç¨‹åºé›†ä¸­çš„æ‰€æœ‰ä»£ç è®¿é—®ï¼Œä¹Ÿå¯ä»¥è¢«å…¶ä»–ç¨‹åºé›†ä¸­æ´¾ç”Ÿç±»è®¿é—®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­</p><ul><li>å›¾å½¢åº“ <code>Assembly: GraphicsLibrary.dll</code>: <code>Shape.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">GraphicsLibrary</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å—ä¿æŠ¤çš„å†…éƒ¨æˆå‘˜</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">internal</span> <span class="built_in">double</span> Area &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">internal</span> <span class="keyword">void</span> <span class="title">CalculateArea</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// é»˜è®¤çš„è®¡ç®—é€»è¾‘ï¼Œå¯èƒ½è¢«æ´¾ç”Ÿç±»è¦†ç›–</span></span><br><span class="line">            Area = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å›¾å½¢åº“ <code>Assembly: GraphicsLibrary.dll</code>: <code>Circle.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">GraphicsLibrary</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Circle</span> : <span class="title">Shape</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">double</span> Radius &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Circle</span>(<span class="params"><span class="built_in">double</span> radius</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Radius = radius;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">CalculateArea</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è¦†ç›–åŸºç±»çš„è®¡ç®—é€»è¾‘</span></span><br><span class="line">            Area = Math.PI * Radius * Radius;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayArea</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;The area of the circle is: <span class="subst">&#123;Area&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å›¾å½¢åº“çš„åº”ç”¨ç¨‹åº <code>Assembly: GraphicsApp.exe</code>: <code>Program.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> GraphicsLibrary;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">GraphicsApp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Circle circle = <span class="keyword">new</span> Circle(<span class="number">5</span>);</span><br><span class="line">            circle.CalculateArea();</span><br><span class="line">            circle.DisplayArea();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åœ¨åŒä¸€ç¨‹åºé›†ä¸­å¯ä»¥è®¿é—® protected internal æˆå‘˜</span></span><br><span class="line">            <span class="built_in">double</span> area = circle.Area;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Accessing area directly: <span class="subst">&#123;area&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>protected internal</code>å…è®¸çµæ´»åœ°åœ¨åŒä¸€ç¨‹åºé›†å†…è®¿é—®å…±äº«çš„å®ç°ç»†èŠ‚ï¼ŒåŒæ—¶ä¿ç•™è·¨ç¨‹åºé›†ç»§æ‰¿çš„èƒ½åŠ›ã€‚</p><ul><li><code>private protected</code>å…³é”®å­—ç»“åˆäº†<code>private</code>å’Œ<code>protected</code>çš„ç‰¹æ€§ï¼Œæˆå‘˜åªèƒ½åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è®¿é—®<ul><li>åŒä¸€ç±»å†…éƒ¨: <code>private</code>å…è®¸åœ¨åŒä¸€ç±»å†…éƒ¨è®¿é—®ã€‚</li><li>åŒä¸€ç¨‹åºé›†ä¸­æ´¾ç”Ÿç±»: <code>protected</code>å…è®¸åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®ï¼Œä½†å‰ææ˜¯è¿™äº›æ´¾ç”Ÿç±»åœ¨åŒä¸€ç¨‹åºé›†ä¸­ã€‚</li></ul></li></ul><p>å› æ­¤ï¼Œ<code>private protected</code>çš„æˆå‘˜åªèƒ½è¢«å®šä¹‰å®ƒä»¬çš„ç±»åŠå…¶åŒä¸€ç¨‹åºé›†ä¸­çš„æ´¾ç”Ÿç±»è®¿é—®ï¼Œä¸èƒ½è¢«å…¶ä»–ç¨‹åºé›†çš„æ´¾ç”Ÿç±»è®¿é—®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­</p><ul><li>è®¢å•ç³»ç»Ÿ <code>Assembly: OrderSystem.dll</code>: <code>Order.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">OrderSystem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Order</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å—ä¿æŠ¤çš„ç§æœ‰æˆå‘˜</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">protected</span> <span class="built_in">string</span> OrderId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">protected</span> <span class="built_in">decimal</span> Amount &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Order</span>(<span class="params"><span class="built_in">string</span> orderId, <span class="built_in">decimal</span> amount</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            OrderId = orderId;</span><br><span class="line">            Amount = amount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">DisplayOrderDetails</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Order ID: <span class="subst">&#123;OrderId&#125;</span>, Amount: <span class="subst">&#123;Amount&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®¢å•ç³»ç»Ÿ <code>Assembly: OrderSystem.dll</code>: <code>SpecialOrder.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">OrderSystem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpecialOrder</span> : <span class="title">Order</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SpecialOrder</span>(<span class="params"><span class="built_in">string</span> orderId, <span class="built_in">decimal</span> amount</span>) : <span class="title">base</span>(<span class="params">orderId, amount</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowSpecialOrderDetails</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å¯ä»¥è®¿é—®åŸºç±»çš„ private protected æˆå‘˜</span></span><br><span class="line">            DisplayOrderDetails();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¤–éƒ¨åº”ç”¨ç¨‹åº <code>Assembly: ExternalApp.dll</code>: <code>Program.cs</code></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> OrderSystem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ExternalApp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            SpecialOrder specialOrder = <span class="keyword">new</span> SpecialOrder(<span class="string">&quot;SO123&quot;</span>, <span class="number">1000.00</span>m);</span><br><span class="line">            specialOrder.ShowSpecialOrderDetails();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸èƒ½åœ¨å…¶ä»–ç¨‹åºé›†è®¿é—® private protected æˆå‘˜</span></span><br><span class="line">            <span class="comment">// specialOrder.OrderId = &quot;SO456&quot;; // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">            <span class="comment">// specialOrder.DisplayOrderDetails(); // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>private protected</code>æä¾›äº†ä¸€ç§æ›´ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶ï¼Œé˜²æ­¢ä¸åŒç¨‹åºé›†ä¸­çš„ç±»è®¿é—®æŸäº›å†…éƒ¨ç»†èŠ‚ï¼Œè¿™åœ¨ä¿æŠ¤æ•æ„Ÿæ•°æ®æˆ–å†…éƒ¨å®ç°ç»†èŠ‚æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p><hr><h3 id="24-readonly-å…³é”®å­—"><a href="#24-readonly-å…³é”®å­—" class="headerlink" title="24. readonly å…³é”®å­—"></a>24. readonly å…³é”®å­—</h3><p><code>readonly</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºä¿®é¥°å­—æ®µï¼Œè¡¨ç¤ºè¯¥å­—æ®µåœ¨åˆå§‹åŒ–åä¸èƒ½è¢«æ›´æ”¹ã€‚<code>readonly</code>å­—æ®µåªèƒ½åœ¨ä»¥ä¸‹æƒ…å†µä¸‹èµ‹å€¼</p><ul><li>å­—æ®µå£°æ˜æ—¶: å¯ä»¥åœ¨å£°æ˜å­—æ®µæ—¶ç›´æ¥èµ‹å€¼ã€‚</li><li>æ„é€ å‡½æ•°ä¸­: å¯ä»¥åœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­èµ‹å€¼ï¼ŒåŒ…æ‹¬å®ä¾‹æ„é€ å‡½æ•°å’Œé™æ€æ„é€ å‡½æ•°ã€‚</li></ul><p><code>readonly</code>å­—æ®µä¸<code>const</code>å¸¸é‡çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<code>const</code>æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¿…é¡»åœ¨å£°æ˜æ—¶èµ‹å€¼ï¼Œå¹¶ä¸”å…¶å€¼åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šï¼Œè€Œ<code>readonly</code>å­—æ®µå¯ä»¥åœ¨è¿è¡Œæ—¶è¢«èµ‹å€¼ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®æ„é€ å‡½æ•°çš„é€»è¾‘èµ‹äºˆä¸åŒçš„å€¼ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="built_in">string</span> Name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="built_in">int</span> Age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­—æ®µå£°æ˜æ—¶èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="built_in">string</span> Country = <span class="string">&quot;USA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ä¸­èµ‹å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = name;</span><br><span class="line">        Age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Name: <span class="subst">&#123;Name&#125;</span>, Age: <span class="subst">&#123;Age&#125;</span>, Country: <span class="subst">&#123;Country&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        person.Display();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯•å›¾ä¿®æ”¹ readonly å­—æ®µä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">        <span class="comment">// person.Name = &quot;Bob&quot;; // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">        <span class="comment">// person.Age = 35;     // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">        <span class="comment">// person.Country = &quot;Canada&quot;; // ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>const</code>å’Œ<code>readonly</code>çš„åŒºåˆ«<ul><li><code>const</code>é€‚ç”¨äºå€¼åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šä¸å˜çš„æƒ…å†µï¼Œå¦‚æ•°å­¦å¸¸é‡<code>pi</code>ã€‚</li><li><code>readonly</code>é€‚ç”¨äºå€¼åœ¨è¿è¡Œæ—¶ç¡®å®šä¸”ä¸€æ—¦åˆå§‹åŒ–åä¸å†æ”¹å˜çš„æƒ…å†µï¼Œå¦‚é…ç½®æ–‡ä»¶ä¸­çš„æŸäº›è®¾ç½®ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Constants</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">double</span> Pi = <span class="number">3.14159</span>; <span class="comment">// ç¼–è¯‘æ—¶å¸¸é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> DateTime CreationTime; <span class="comment">// è¿è¡Œæ—¶å¸¸é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Constants</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        CreationTime = DateTime.Now; <span class="comment">// å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­èµ‹å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="25-ref-å…³é”®å­—"><a href="#25-ref-å…³é”®å­—" class="headerlink" title="25. ref å…³é”®å­—"></a>25. ref å…³é”®å­—</h3><p><code>ref</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºæ–¹æ³•å‚æ•°ï¼Œè¡¨ç¤ºå‚æ•°ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’ã€‚è¿™æ„å‘³ç€åœ¨æ–¹æ³•å†…å¯¹å‚æ•°çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šå½±å“åˆ°è°ƒç”¨æ–¹ä¼ é€’çš„å®é™…å˜é‡ã€‚ä½¿ç”¨<code>ref</code>å…³é”®å­—çš„è¦æ±‚</p><ul><li>åœ¨æ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨: å¿…é¡»åœ¨æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨<code>ref</code>å…³é”®å­—ã€‚</li><li>åœ¨æ–¹æ³•è°ƒç”¨æ—¶ä½¿ç”¨: è°ƒç”¨æ–¹æ³•æ—¶ä¹Ÿå¿…é¡»åœ¨å®é™…å‚æ•°å‰åŠ ä¸Š<code>ref</code>å…³é”®å­—ã€‚</li><li>åˆå§‹åŒ–è¦æ±‚: ä¼ é€’ç»™<code>ref</code>å‚æ•°çš„å˜é‡å¿…é¡»åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰åˆå§‹åŒ–ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Increment</span>(<span class="params"><span class="keyword">ref</span> <span class="built_in">int</span> number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        number++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> <span class="keyword">value</span> = <span class="number">5</span>;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Before: <span class="subst">&#123;<span class="keyword">value</span>&#125;</span>&quot;</span>); <span class="comment">// è¾“å‡º: Before: 5</span></span><br><span class="line">        Increment(<span class="keyword">ref</span> <span class="keyword">value</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;After: <span class="subst">&#123;<span class="keyword">value</span>&#125;</span>&quot;</span>);  <span class="comment">// è¾“å‡º: After: 6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸Šé¢çš„ç¤ºä¾‹ä¸­æ²¡æœ‰ä½¿ç”¨<code>ref</code>ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ª<code>Console</code>çš„è¾“å‡ºå°±è¿˜ä¼šæ˜¯<code>5</code>ã€‚åŸå› æ˜¯æ–¹æ³•æ¥æ”¶å‚æ•°çš„å‰¯æœ¬ï¼Œæ–¹æ³•å†…å¯¹å‚æ•°çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å®é™…å˜é‡ã€‚</p><ul><li>ä½¿ç”¨<code>ref</code>çš„åœºæ™¯<ul><li>éœ€è¦ä¿®æ”¹è°ƒç”¨æ–¹å˜é‡çš„åœºæ™¯: å½“ä½ å¸Œæœ›åœ¨æ–¹æ³•å†…ä¿®æ”¹è°ƒç”¨æ–¹ä¼ é€’çš„å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>ref</code>å…³é”®å­—ã€‚ä¾‹å¦‚ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ã€‚</li><li>éœ€è¦è¿”å›å¤šä¸ªå€¼çš„åœºæ™¯: è™½ç„¶æ–¹æ³•æœ¬èº«åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œä½†å¯ä»¥é€šè¿‡<code>ref</code>æˆ–<code>out</code>å‚æ•°è¿”å›å¤šä¸ªå€¼ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Swap</span>(<span class="params"><span class="keyword">ref</span> <span class="built_in">int</span> a, <span class="keyword">ref</span> <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> temp = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> x = <span class="number">10</span>;</span><br><span class="line">        <span class="built_in">int</span> y = <span class="number">20</span>;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Before Swap: x = <span class="subst">&#123;x&#125;</span>, y = <span class="subst">&#123;y&#125;</span>&quot;</span>); <span class="comment">// è¾“å‡º: Before Swap: x = 10, y = 20</span></span><br><span class="line">        Swap(<span class="keyword">ref</span> x, <span class="keyword">ref</span> y);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;After Swap: x = <span class="subst">&#123;x&#125;</span>, y = <span class="subst">&#123;y&#125;</span>&quot;</span>);  <span class="comment">// è¾“å‡º: After Swap: x = 20, y = 10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>ref</code>ä¸<code>out</code>çš„åŒºåˆ«<ul><li>åˆå§‹åŒ–è¦æ±‚: ä¼ é€’ç»™<code>ref</code>å‚æ•°çš„å˜é‡å¿…é¡»åœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰åˆå§‹åŒ–ã€‚ä¼ é€’ç»™<code>out</code>å‚æ•°çš„å˜é‡å¯ä»¥åœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰æœªåˆå§‹åŒ–ï¼Œä½†å¿…é¡»åœ¨æ–¹æ³•å†…éƒ¨èµ‹å€¼ã€‚</li><li>ä¸»è¦ç”¨é€”: <code>ref</code>ç”¨äºä¼ é€’æ•°æ®ç»™æ–¹æ³•ï¼Œå¹¶ä¸”å¸Œæœ›æ–¹æ³•å†…éƒ¨ä¿®æ”¹è¯¥æ•°æ®ã€‚<code>out</code>ç”¨äºæ–¹æ³•è¿”å›å¤šä¸ªå€¼ã€‚</li></ul></li></ul><hr><h3 id="26-sealed-å…³é”®å­—"><a href="#26-sealed-å…³é”®å­—" class="headerlink" title="26. sealed å…³é”®å­—"></a>26. sealed å…³é”®å­—</h3><p><code>sealed</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºç±»å’Œæ–¹æ³•ï¼Œæä¾›äº†ä¸åŒçš„åŠŸèƒ½</p><ul><li>ç”¨äºç±»: é˜²æ­¢å…¶ä»–ç±»ä»å®ƒæ´¾ç”Ÿã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>sealed</code>ç±»ä¸èƒ½ä½œä¸ºåŸºç±»ï¼Œæ— æ³•è¢«ç»§æ‰¿ã€‚</li><li>ç”¨äºæ–¹æ³•: å½“ç”¨åœ¨åŸºç±»ä¸­çš„è™šæ–¹æ³•ä¸Šæ—¶ï¼Œé˜²æ­¢æ´¾ç”Ÿç±»è¿›ä¸€æ­¥é‡å†™è¯¥æ–¹æ³•ã€‚</li></ul><p>å½“ä¸€ä¸ªç±»è¢«æ ‡è®°ä¸º<code>sealed</code>æ—¶ï¼Œå®ƒä¸èƒ½è¢«ç»§æ‰¿ã€‚è¿™é€šå¸¸ç”¨äºé˜²æ­¢ä¸å¸Œæœ›çš„ç»§æ‰¿ï¼Œæˆ–è€…å½“ç±»çš„è®¾è®¡ä¸éœ€è¦è¢«æ‰©å±•æ—¶ã€‚ä½¿ç”¨<code>sealed</code>ç±»å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºå®ƒçš„æˆå‘˜åœ¨ç¼–è¯‘æ—¶å¯ä»¥è¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">FinalClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;This is a sealed class.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä»£ç å°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºä¸èƒ½ç»§æ‰¿ä¸€ä¸ª sealed ç±»</span></span><br><span class="line"><span class="comment">// public class DerivedClass : FinalClass</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªç±»ç»§æ‰¿è‡ªåŸºç±»ï¼Œå¹¶ä¸”é‡å†™äº†åŸºç±»ä¸­çš„è™šæ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>sealed</code>å…³é”®å­—é˜»æ­¢è¿›ä¸€æ­¥çš„é‡å†™ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>sealed</code>å…³é”®å­—å¿…é¡»ä¸<code>override</code>ä¸€èµ·ä½¿ç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;BaseClass Display method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;DerivedClass Display method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä»£ç å°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º Display æ–¹æ³•è¢« sealed</span></span><br><span class="line"><span class="comment">// public class FurtherDerivedClass : DerivedClass</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     public override void Display()</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         Console.WriteLine(&quot;FurtherDerivedClass Display method.&quot;);</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨<code>sealed</code>çš„åœºæ™¯<ul><li>æé«˜å®‰å…¨æ€§: é€šè¿‡é˜²æ­¢ç±»çš„ç»§æ‰¿ï¼Œå¯ä»¥ä¿æŠ¤ç±»çš„å®ç°ç»†èŠ‚ï¼Œé˜²æ­¢å­ç±»æ„å¤–åœ°æ”¹å˜ç±»çš„è¡Œä¸ºã€‚</li><li>æ€§èƒ½ä¼˜åŒ–: æ ‡è®°ä¸º<code>sealed</code>çš„ç±»å’Œæ–¹æ³•å¯ä»¥è¿›è¡Œæ›´å¤šçš„ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“è¿™äº›ç±»å’Œæ–¹æ³•ä¸ä¼šè¢«é‡å†™ã€‚</li><li>é™åˆ¶æ‰©å±•æ€§: å½“ä¸€ä¸ªç±»çš„è®¾è®¡ä¸é€‚åˆæ‰©å±•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>sealed</code>é˜²æ­¢è¿›ä¸€æ­¥çš„ç»§æ‰¿ã€‚</li></ul></li></ul><hr><h3 id="27-static-å…³é”®å­—"><a href="#27-static-å…³é”®å­—" class="headerlink" title="27. static å…³é”®å­—"></a>27. static å…³é”®å­—</h3><p><code>static</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºå£°æ˜ç±»æˆå‘˜å’Œç±»æœ¬èº«ã€‚å®ƒè¡¨ç¤ºè¿™äº›æˆå‘˜æˆ–ç±»ä¸å…·ä½“å®ä¾‹æ— å…³ï¼Œè€Œæ˜¯å±äºç±»å‹æœ¬èº«ã€‚</p><ul><li>é™æ€ç±» <code>static class</code><ul><li>å®šä¹‰: é™æ€ç±»æ˜¯ä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ï¼Œæ‰€æœ‰æˆå‘˜éƒ½å¿…é¡»æ˜¯é™æ€çš„ã€‚</li><li>ç‰¹æ€§: é™æ€ç±»é€šå¸¸ç”¨äºç»„ç»‡ä¸€ç»„ç›¸å…³çš„é™æ€æ–¹æ³•å’Œå¸¸é‡ï¼Œä¸å…è®¸åˆ›å»ºé™æ€ç±»çš„å®ä¾‹ã€‚</li><li>ç”¨é€”: å¸¸ç”¨äºå®ç”¨ç±»<code>Utility class</code>æˆ–åº“ï¼Œæä¾›é™æ€æ–¹æ³•è¿›è¡Œé€šç”¨æ“ä½œã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">MathUtilities</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Multiply</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é™æ€ç±» <code>static</code> æˆå‘˜<ul><li>é™æ€æˆå‘˜åŒ…æ‹¬é™æ€å­—æ®µã€é™æ€å±æ€§ã€é™æ€æ–¹æ³•ã€é™æ€äº‹ä»¶ç­‰ã€‚å®ƒä»¬å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„å…·ä½“å®ä¾‹ã€‚</li><li>é™æ€å­—æ®µ: æ‰€æœ‰å®ä¾‹å…±äº«çš„å­—æ®µï¼Œå¯ä»¥ç”¨äºå­˜å‚¨å…¨å±€çŠ¶æ€æˆ–å¸¸é‡ã€‚</li><li>é™æ€å±æ€§: æä¾›å¯¹é™æ€å­—æ®µçš„è®¿é—®ï¼Œé€šå¸¸ç”¨äºå°è£…ã€‚</li><li>é™æ€æ–¹æ³•: å¯ä»¥åœ¨ä¸åˆ›å»ºç±»å®ä¾‹çš„æƒ…å†µä¸‹è°ƒç”¨ï¼Œç”¨äºæ‰§è¡Œä¸ç±»å®ä¾‹æ— å…³çš„æ“ä½œã€‚</li><li>é™æ€æ„é€ å‡½æ•°: ç”¨äºåˆå§‹åŒ–é™æ€å­—æ®µæˆ–æ‰§è¡Œå…¶ä»–é™æ€åˆå§‹åŒ–ï¼Œåªåœ¨ç±»é¦–æ¬¡è¢«è®¿é—®æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Counter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> Count &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Increment</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é™æ€æˆå‘˜</span></span><br><span class="line">Counter.Increment();</span><br><span class="line">Console.WriteLine(Counter.Count); <span class="comment">// è¾“å‡º: 1</span></span><br></pre></td></tr></table></figure><ul><li>é™æ€æ„é€ å‡½æ•° <code>static constructor</code><ul><li>é™æ€æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–é™æ€å­—æ®µæˆ–æ‰§è¡Œç±»çº§åˆ«çš„åˆå§‹åŒ–ã€‚å®ƒåœ¨ç±»çš„ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¢«è°ƒç”¨ï¼Œä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚</li><li>ç‰¹æ€§: æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒä¸èƒ½ç”±å¤–éƒ¨ä»£ç è°ƒç”¨ï¼›ä¸æ¥å—å‚æ•°ï¼Œå› ä¸ºå®ƒæ˜¯è‡ªåŠ¨è°ƒç”¨çš„ã€‚</li><li>ç”¨é€”: é€šå¸¸ç”¨äºåˆå§‹åŒ–é™æ€æ•°æ®ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Example</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> Value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">Example</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Value = <span class="number">42</span>; <span class="comment">// é™æ€åˆå§‹åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é™æ€æˆå‘˜</span></span><br><span class="line">Console.WriteLine(Example.Value); <span class="comment">// è¾“å‡º: 42</span></span><br></pre></td></tr></table></figure><p><code>static</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­éå¸¸é‡è¦ï¼Œç”¨äºå®šä¹‰ä¸ä¾èµ–äºå…·ä½“å¯¹è±¡å®ä¾‹çš„ç±»å’Œæˆå‘˜ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå…¨å±€çš„ã€å…±äº«çš„è®¿é—®ç‚¹ï¼Œé€‚ç”¨äºéœ€è¦ç»Ÿä¸€ç®¡ç†çŠ¶æ€æˆ–æä¾›é€šç”¨æ“ä½œçš„åœºæ™¯ã€‚</p><hr><h3 id="28-struct-å…³é”®å­—"><a href="#28-struct-å…³é”®å­—" class="headerlink" title="28. struct å…³é”®å­—"></a>28. struct å…³é”®å­—</h3><p><code>struct</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºå®šä¹‰å€¼ç±»å‹ã€‚å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹ï¼ˆå¦‚ç±»ï¼‰ä¸åŒï¼Œå€¼ç±»å‹åœ¨å†…å­˜ä¸­ç›´æ¥å­˜å‚¨å…¶æ•°æ®ï¼Œè€Œä¸æ˜¯å­˜å‚¨å¯¹æ•°æ®çš„å¼•ç”¨ã€‚ç»“æ„ä½“æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå°å‹æ•°æ®å¯¹è±¡ã€‚</p><ul><li>å†…å­˜åˆ†é…: å€¼ç±»å‹çš„æ•°æ®é€šå¸¸åˆ†é…åœ¨æ ˆä¸Šï¼Œè€Œä¸æ˜¯å †ä¸Šã€‚</li><li>æ•°æ®å­˜å‚¨: å€¼ç±»å‹ç›´æ¥åŒ…å«å…¶æ•°æ®ï¼Œè€Œå¼•ç”¨ç±»å‹åŒ…å«å¯¹æ•°æ®çš„å¼•ç”¨ã€‚</li><li>æ— ç»§æ‰¿: ç»“æ„ä½“ä¸èƒ½ç»§æ‰¿è‡ªå…¶ä»–ç»“æ„ä½“æˆ–ç±»ï¼Œä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ã€‚ä½†å®ƒä»¬å¯ä»¥å®ç°æ¥å£ã€‚</li><li>æ— å‚æ•°çš„æ„é€ å‡½æ•°: ä¸èƒ½å®šä¹‰æ— å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºé»˜è®¤çš„æ— å‚æ•°æ„é€ å‡½æ•°å§‹ç»ˆå­˜åœ¨ï¼Œç”¨äºåˆå§‹åŒ–å­—æ®µä¸ºå…¶é»˜è®¤å€¼ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> Point</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> X &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Y &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        X = x;</span><br><span class="line">        Y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Point at (<span class="subst">&#123;X&#125;</span>, <span class="subst">&#123;Y&#125;</span>)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Point p1 = <span class="keyword">new</span> Point(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">        p1.Display(); <span class="comment">// è¾“å‡º: Point at (10, 20)</span></span><br><span class="line"></span><br><span class="line">        Point p2 = p1; <span class="comment">// ç»“æ„ä½“çš„å€¼å¤åˆ¶</span></span><br><span class="line">        p2.X = <span class="number">30</span>;</span><br><span class="line">        p2.Display(); <span class="comment">// è¾“å‡º: Point at (30, 20)</span></span><br><span class="line">        p1.Display(); <span class="comment">// è¾“å‡º: Point at (10, 20) - p1 æœªå—å½±å“</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>struct</code> çš„é€‚ç”¨åœºæ™¯<ul><li>è½»é‡çº§æ•°æ®ç»“æ„: ç»“æ„ä½“é€‚åˆç”¨äºè¡¨ç¤ºè½»é‡çº§çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚äºŒç»´åæ ‡ã€é¢œè‰²ã€æ—¶é—´ç­‰ã€‚</li><li>ä¸å¯å˜å¯¹è±¡: å› ä¸ºç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œé€šå¸¸å¯ä»¥è®¾è®¡æˆä¸å¯å˜å¯¹è±¡ï¼Œæä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§ã€‚</li><li>æ€§èƒ½è€ƒè™‘: ç”±äºç»“æ„ä½“åœ¨æ ˆä¸Šåˆ†é…ï¼Œè®¿é—®é€Ÿåº¦è¾ƒå¿«ï¼Œé€‚åˆäºé¢‘ç¹åˆ†é…å’Œé‡Šæ”¾çš„å°å‹å¯¹è±¡ã€‚</li></ul></li></ul><hr><h3 id="29-switch-å…³é”®å­—"><a href="#29-switch-å…³é”®å­—" class="headerlink" title="29. switch å…³é”®å­—"></a>29. switch å…³é”®å­—</h3><blockquote><p>è¿™é‡Œä¸»è¦ä»‹ç»<code>switch</code>è¡¨è¾¾å¼</p></blockquote><p><code>switch</code>è¡¨è¾¾å¼æ˜¯<code>C# 8.0</code>å¼•å…¥çš„ä¸€ç§ç®€æ´ä¸”åŠŸèƒ½å¼ºå¤§çš„åˆ†æ”¯é€‰æ‹©æœºåˆ¶ã€‚ä¸ä¼ ç»Ÿçš„<code>switch</code>è¯­å¥ä¸åŒï¼Œ<code>switch</code>è¡¨è¾¾å¼ä¸ä»…èƒ½æ ¹æ®è¾“å…¥å€¼è¿›è¡Œåˆ†æ”¯ï¼Œè€Œä¸”æ›´çµæ´»åœ°ç»“åˆäº†æ¨¡å¼åŒ¹é…çš„ç‰¹æ€§ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = expression <span class="keyword">switch</span></span><br><span class="line">&#123;</span><br><span class="line">    pattern1 =&gt; result1,</span><br><span class="line">    pattern2 =&gt; result2,</span><br><span class="line">    pattern3 =&gt; result3,</span><br><span class="line">    _ =&gt; defaultResult</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>switch</code>è¡¨è¾¾å¼æä¾›äº†ä¸€ç§ç®€æ´ä¸”çµæ´»çš„æ–¹å¼æ¥è¿›è¡Œæ¡ä»¶åˆ†æ”¯é€‰æ‹©ï¼Œä¸ä¼ ç»Ÿ<code>switch</code>è¯­å¥ç›¸æ¯”ï¼Œå®ƒä¸ä»…å‡å°‘äº†ä»£ç é‡ï¼Œè¿˜æé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</p><hr><h3 id="30-this-å…³é”®å­—"><a href="#30-this-å…³é”®å­—" class="headerlink" title="30. this å…³é”®å­—"></a>30. this å…³é”®å­—</h3><p><code>this</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºå¼•ç”¨å½“å‰å®ä¾‹çš„æˆå‘˜ï¼ŒåŒ…æ‹¬å­—æ®µã€æ–¹æ³•ã€å±æ€§ã€äº‹ä»¶å’Œç´¢å¼•å™¨ã€‚å®ƒåœ¨ç±»çš„éé™æ€æˆå‘˜ä¸­éå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ï¼Œ<code>this</code>å…³é”®å­—è¿˜æœ‰å…¶ä»–ç‰¹å®šç”¨é€”ï¼Œå¦‚è°ƒç”¨æ„é€ å‡½æ•°å’Œæ‰©å±•æ–¹æ³•ã€‚</p><ul><li>å¼•ç”¨å½“å‰å®ä¾‹çš„æˆå‘˜<ul><li>åœ¨ç±»çš„å®ä¾‹æ–¹æ³•æˆ–å±æ€§ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>this</code>å…³é”®å­—å¼•ç”¨å½“å‰å®ä¾‹çš„æˆå‘˜ï¼Œå°¤å…¶æ˜¯åœ¨æˆå‘˜åç§°ä¸æ–¹æ³•å‚æ•°åç§°ç›¸åŒæ—¶ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ this å¼•ç”¨å½“å‰å®ä¾‹çš„ name å­—æ®µ</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Name: <span class="subst">&#123;<span class="keyword">this</span>.name&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">        person.Display(); <span class="comment">// è¾“å‡º: Name: Alice</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°<ul><li><code>this</code>å…³é”®å­—å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨åŒä¸€ä¸ªç±»çš„å…¶ä»–æ„é€ å‡½æ•°ï¼Œç§°ä¸ºæ„é€ å‡½æ•°é‡è½½ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Rectangle</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Width &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Height &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rectangle</span>() : <span class="title">this</span>(<span class="params"><span class="number">0</span>, <span class="number">0</span></span>) <span class="comment">// è°ƒç”¨å…·æœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°</span></span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rectangle</span>(<span class="params"><span class="built_in">int</span> width, <span class="built_in">int</span> height</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.Width = width;</span><br><span class="line">        <span class="keyword">this</span>.Height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Width: <span class="subst">&#123;Width&#125;</span>, Height: <span class="subst">&#123;Height&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Rectangle rect1 = <span class="keyword">new</span> Rectangle();</span><br><span class="line">        rect1.Display(); <span class="comment">// è¾“å‡º: Width: 0, Height: 0</span></span><br><span class="line"></span><br><span class="line">        Rectangle rect2 = <span class="keyword">new</span> Rectangle(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">        rect2.Display(); <span class="comment">// è¾“å‡º: Width: 10, Height: 20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ‰©å±•æ–¹æ³•çš„è°ƒç”¨<ul><li><code>this</code>å…³é”®å­—åœ¨æ‰©å±•æ–¹æ³•çš„å®šä¹‰ä¸­ç”¨äºæŒ‡ç¤ºè¢«æ‰©å±•çš„ç±»å‹ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">StringExtensions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">IsNullOrEmpty</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">string</span>.IsNullOrEmpty(<span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> str = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">bool</span> result = str.IsNullOrEmpty(); <span class="comment">// ä½¿ç”¨æ‰©å±•æ–¹æ³•</span></span><br><span class="line">        Console.WriteLine(result); <span class="comment">// è¾“å‡º: True</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>IsNullOrEmpty</code>æ–¹æ³•æ˜¯ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œå®ƒä½¿ç”¨<code>this</code>å…³é”®å­—å°†<code>string</code>ç±»å‹æ‰©å±•ä¸ºåŒ…å«è¯¥æ–¹æ³•çš„ç±»å‹ã€‚<code>this</code>å…³é”®å­—æŒ‡ç¤º<code>value</code>å‚æ•°ä¸ºè¢«æ‰©å±•çš„ç±»å‹çš„å®ä¾‹ã€‚</p><hr><h3 id="31-throw-å…³é”®å­—"><a href="#31-throw-å…³é”®å­—" class="headerlink" title="31. throw å…³é”®å­—"></a>31. throw å…³é”®å­—</h3><p><code>throw</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºå¼•å‘å¼‚å¸¸ã€‚å¼‚å¸¸æ˜¯ä¸€ç§åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯æˆ–æ„å¤–æƒ…å†µï¼Œä½¿ç”¨<code>throw</code>å¯ä»¥ä¸­æ–­ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œæµç¨‹ï¼Œå¹¶è½¬åˆ°ç›¸å…³çš„å¼‚å¸¸å¤„ç†ä»£ç ã€‚</p><ul><li>å¼•å‘å¼‚å¸¸<ul><li>ä½¿ç”¨<code>throw</code>å…³é”®å­—å¯ä»¥æ˜¾å¼å¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œé€šå¸¸åœ¨æ£€æµ‹åˆ°ç¨‹åºçŠ¶æ€ä¸åˆæ³•æˆ–å‡ºç°é”™è¯¯æ—¶ä½¿ç”¨ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> divisor = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> result = Divide(<span class="number">10</span>, divisor);</span><br><span class="line">            Console.WriteLine(result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (DivideByZeroException ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Caught an exception: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Divide</span>(<span class="params"><span class="built_in">int</span> dividend, <span class="built_in">int</span> divisor</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (divisor == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> DivideByZeroException(<span class="string">&quot;Divisor cannot be zero.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dividend / divisor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é‡æ–°å¼•å‘å¼‚å¸¸<ul><li>åœ¨æ•è·å¼‚å¸¸åï¼Œå¯èƒ½å¸Œæœ›é‡æ–°å¼•å‘å¼‚å¸¸ä»¥å…è®¸å¤–éƒ¨ä»£ç è¿›ä¸€æ­¥å¤„ç†ã€‚åœ¨<code>catch</code>å—ä¸­ä½¿ç”¨<code>throw</code>å¯ä»¥é‡æ–°å¼•å‘å½“å‰æ•è·çš„å¼‚å¸¸ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FileProcessor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ProcessFile</span>(<span class="params"><span class="built_in">string</span> filePath</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> content = ReadFile(filePath);</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;File content:&quot;</span>);</span><br><span class="line">            Console.WriteLine(content);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;An I/O error occurred while processing the file.&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span>; <span class="comment">// é‡æ–°å¼•å‘å¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;An unexpected error occurred.&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span>; <span class="comment">// é‡æ–°å¼•å‘å¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">ReadFile</span>(<span class="params"><span class="built_in">string</span> filePath</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrWhiteSpace(filePath))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="keyword">nameof</span>(filePath), <span class="string">&quot;File path cannot be null or empty.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!File.Exists(filePath))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> FileNotFoundException(<span class="string">&quot;The specified file does not exist.&quot;</span>, filePath);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> File.ReadAllText(filePath);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        FileProcessor processor = <span class="keyword">new</span> FileProcessor();</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            processor.ProcessFile(<span class="string">&quot;nonexistentfile.txt&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// åœ¨è¿™é‡Œå¯ä»¥è¿›ä¸€æ­¥å¤„ç†å¼‚å¸¸ï¼Œä¾‹å¦‚è®°å½•æ—¥å¿—æˆ–æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Exception caught in Main: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„äº‹é¡¹<ul><li>ä½¿ç”¨å¼‚å¸¸ç±»å‹: <code>throw</code>å…³é”®å­—åé¢å¿…é¡»è·Ÿä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚å¼‚å¸¸å¯¹è±¡é€šå¸¸æ˜¯ä»<code>System.Exception</code>ç±»æ´¾ç”Ÿçš„ç±»å®ä¾‹ã€‚</li><li>é‡æ–°å¼•å‘çš„æ­£ç¡®æ–¹å¼: åœ¨<code>catch</code>å—ä¸­é‡æ–°å¼•å‘å¼‚å¸¸æ—¶ï¼Œä½¿ç”¨<code>throw</code>; è€Œä¸æ˜¯<code>throw ex</code>;ã€‚å‰è€…ä¿ç•™äº†åŸå§‹å¼‚å¸¸çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œè€Œåè€…ä¼šé‡ç½®å †æ ˆè·Ÿè¸ªã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ä¸æ¨èï¼Œå› ä¸ºä¼šä¸¢å¤±åŸå§‹å¼‚å¸¸çš„å †æ ˆè·Ÿè¸ª</span></span><br><span class="line">    <span class="keyword">throw</span> ex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨èçš„æ–¹å¼ï¼Œä¿ç•™åŸå§‹å¼‚å¸¸çš„å †æ ˆè·Ÿè¸ª</span></span><br><span class="line">    <span class="keyword">throw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="32-using-å…³é”®å­—"><a href="#32-using-å…³é”®å­—" class="headerlink" title="32. using å…³é”®å­—"></a>32. using å…³é”®å­—</h3><p><code>using</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­æœ‰ä¸¤ç§ä¸»è¦çš„ç”¨æ³•</p><ul><li>èµ„æºç®¡ç† (<code>using</code>è¯­å¥): ç”¨äºå®šä¹‰ä¸€ä¸ªèŒƒå›´ï¼Œåœ¨è¯¥èŒƒå›´ç»“æŸæ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾ç‰¹å®šçš„èµ„æºã€‚é€šå¸¸ç”¨äºå¤„ç†éæ‰˜ç®¡èµ„æºï¼Œå¦‚æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ç­‰ï¼Œéœ€è¦æ˜¾å¼é‡Šæ”¾çš„èµ„æºã€‚</li><li>å‘½åç©ºé—´å¯¼å…¥ (<code>using</code>æŒ‡ä»¤): ç”¨äºå¯¼å…¥å‘½åç©ºé—´ï¼Œä»¥ä¾¿åœ¨ä»£ç ä¸­å¯ä»¥ç®€åŒ–å¯¹å‘½åç©ºé—´å†…ç±»å‹çš„å¼•ç”¨ã€‚</li></ul><p>èµ„æºç®¡ç† (<code>using</code>è¯­å¥)</p><ul><li><code>using</code>è¯­å¥ç”¨äºç¡®ä¿å®ç°äº†<code>IDisposable</code>æ¥å£çš„å¯¹è±¡åœ¨ä½¿ç”¨å®Œåè¢«æ­£ç¡®åœ°é‡Šæ”¾ã€‚<code>IDisposable</code>æ¥å£åŒ…å«ä¸€ä¸ª<code>Dispose</code>æ–¹æ³•ï¼Œç”¨äºé‡Šæ”¾èµ„æºã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (StreamReader reader = <span class="keyword">new</span> StreamReader(<span class="string">&quot;example.txt&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> content = reader.ReadToEnd();</span><br><span class="line">            Console.WriteLine(content);</span><br><span class="line">        &#125; <span class="comment">// reader å¯¹è±¡åœ¨æ­¤å¤„è¢«é‡Šæ”¾</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘½åç©ºé—´å¯¼å…¥ (<code>using</code>æŒ‡ä»¤)</p><ul><li><code>using</code>æŒ‡ä»¤ç”¨äºåœ¨æ–‡ä»¶çš„é¡¶éƒ¨å¯¼å…¥å‘½åç©ºé—´ï¼Œä»¥ä¾¿åœ¨ä»£ç ä¸­ç®€åŒ–å¯¹è¯¥å‘½åç©ºé—´å†…ç±»å‹çš„å¼•ç”¨ã€‚è¿™å¯ä»¥å‡å°‘ä»£ç ä¸­çš„å†—é•¿ç±»å‹åç§°ï¼Œå¹¶æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line">        Console.WriteLine(<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, numbers));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ«å: å¯ä»¥ä½¿ç”¨<code>using</code>æŒ‡ä»¤ä¸ºç±»å‹æˆ–å‘½åç©ºé—´åˆ›å»ºåˆ«åã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Project = MyCompany.ProjectNamespace;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Project.MyClass obj = <span class="keyword">new</span> Project.MyClass();</span><br><span class="line">        obj.MyMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="33-virtual-å…³é”®å­—"><a href="#33-virtual-å…³é”®å­—" class="headerlink" title="33. virtual å…³é”®å­—"></a>33. virtual å…³é”®å­—</h3><p><code>virtual</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºä¿®é¥°æ–¹æ³•ã€å±æ€§ã€äº‹ä»¶æˆ–ç´¢å¼•å™¨ï¼Œè¡¨ç¤ºè¿™äº›æˆå‘˜å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è¢«é‡å†™ã€‚</p><ul><li><p>ä½¿ç”¨<code>virtual</code>å…³é”®å­—å®šä¹‰çš„æˆå‘˜æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œä½†å…è®¸æ´¾ç”Ÿç±»é€šè¿‡<code>override</code>å…³é”®å­—æä¾›æ–°çš„å®ç°ï¼Œä»è€Œæ”¹å˜åŸºç±»çš„è¡Œä¸ºã€‚</p></li><li><p>è™šæ–¹æ³• <code>Virtual Methods</code></p><ul><li>è™šæ–¹æ³•æ˜¯æŒ‡åœ¨åŸºç±»ä¸­å®šä¹‰ï¼Œå¹¶å…è®¸æ´¾ç”Ÿç±»é‡å†™çš„æ–¹æ³•ã€‚è™šæ–¹æ³•åœ¨åŸºç±»ä¸­æä¾›äº†é»˜è®¤å®ç°ï¼Œä½†æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡é‡å†™å®ƒæ¥æä¾›æ–°çš„è¡Œä¸ºã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;BaseClass Display&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Display</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;DerivedClass Display&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è™šå±æ€§ <code>Virtual Properties</code><ul><li>è™šå±æ€§ç±»ä¼¼äºè™šæ–¹æ³•ï¼Œå®ƒä»¬å…è®¸åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­çš„å±æ€§ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _name; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; _name = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _name; &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; _name = <span class="keyword">value</span>.ToUpper(); &#125; <span class="comment">// å¼ºåˆ¶å°†åå­—è½¬æ¢ä¸ºå¤§å†™</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è™šäº‹ä»¶ <code>Virtual Events</code><ul><li>è™šäº‹ä»¶ä¸è™šæ–¹æ³•ç±»ä¼¼ï¼Œå…è®¸æ´¾ç”Ÿç±»é‡å†™äº‹ä»¶çš„è®¢é˜…<code>add</code>å’Œå–æ¶ˆè®¢é˜…<code>remove</code>è¡Œä¸ºã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">event</span> EventHandler MyEvent;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnMyEvent</span>(<span class="params">EventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ˜¯å¦æœ‰è®¢é˜…è€…ï¼Œç„¶åå¼•å‘äº‹ä»¶</span></span><br><span class="line">        MyEvent?.Invoke(<span class="keyword">this</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TriggerEvent</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ OnMyEvent æ–¹æ³•æ¥å¼•å‘äº‹ä»¶</span></span><br><span class="line">        OnMyEvent(EventArgs.Empty);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DerivedClass</span> : <span class="title">BaseClass</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> EventHandler _eventHandlers;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">event</span> EventHandler MyEvent</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">add</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Adding event handler&quot;</span>);</span><br><span class="line">            _eventHandlers += <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">remove</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Removing event handler&quot;</span>);</span><br><span class="line">            _eventHandlers -= <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnMyEvent</span>(<span class="params">EventArgs e</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;DerivedClass specific event handling&quot;</span>);</span><br><span class="line">        _eventHandlers?.Invoke(<span class="keyword">this</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        DerivedClass obj = <span class="keyword">new</span> DerivedClass();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">        obj.MyEvent += (sender, e) =&gt; Console.WriteLine(<span class="string">&quot;Event Handler 1&quot;</span>);</span><br><span class="line">        obj.MyEvent += (sender, e) =&gt; Console.WriteLine(<span class="string">&quot;Event Handler 2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">        obj.TriggerEvent();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">        obj.MyEvent -= (sender, e) =&gt; Console.WriteLine(<span class="string">&quot;Event Handler 2&quot;</span>);</span><br><span class="line">        obj.TriggerEvent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>virtual</code>çš„ä½¿ç”¨åœºæ™¯<ul><li>å¤šæ€æ€§: è™šæ–¹æ³•å’Œå±æ€§å…è®¸æ´¾ç”Ÿç±»é‡å†™åŸºç±»çš„å®ç°ï¼Œä»è€Œå®ç°å¤šæ€æ€§ã€‚åŸºç±»çš„æ–¹æ³•å¯ä»¥è°ƒç”¨æ´¾ç”Ÿç±»çš„å®ç°ï¼Œè€Œæ— éœ€äº†è§£æ´¾ç”Ÿç±»çš„å…·ä½“ç±»å‹ã€‚</li><li>é»˜è®¤è¡Œä¸º: è™šæ–¹æ³•å’Œå±æ€§å¯ä»¥æä¾›åŸºç±»çš„é»˜è®¤è¡Œä¸ºï¼Œæ´¾ç”Ÿç±»å¯ä»¥é€‰æ‹©æ¥å—é»˜è®¤è¡Œä¸ºæˆ–æä¾›è‡ªå·±çš„å®ç°ã€‚</li></ul></li></ul><p>ä¸ºä»€ä¹ˆé€‰æ‹©<code>virtual</code>è€Œä¸æ˜¯<code>abstract</code></p><ul><li><p>(1) <code>virtual</code>å…³é”®å­—</p><ul><li>å®šä¹‰: <code>virtual</code>å…³é”®å­—ç”¨äºå®šä¹‰å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™çš„æˆå‘˜ã€‚è™šæˆå‘˜åœ¨åŸºç±»ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œæ´¾ç”Ÿç±»å¯ä»¥é€‰æ‹©é‡å†™è¯¥å®ç°ã€‚</li><li>ç”¨é€”: å½“åŸºç±»æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œä½†æ´¾ç”Ÿç±»å¯ä»¥æ ¹æ®éœ€è¦è¦†ç›–è¯¥å®ç°æ—¶ï¼Œä½¿ç”¨<code>virtual</code>ã€‚å®ƒå…è®¸æä¾›ä¸€ä¸ªåŸºç¡€è¡Œä¸ºï¼Œå¹¶åœ¨æ´¾ç”Ÿç±»ä¸­è¿›è¡Œæ‰©å±•æˆ–ä¿®æ”¹ã€‚</li></ul></li><li><p>(2) <code>abstract</code>å…³é”®å­—</p><ul><li>å®šä¹‰: <code>abstract</code>å…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ªæ²¡æœ‰å®ç°çš„æˆå‘˜ï¼Œæ´¾ç”Ÿç±»å¿…é¡»æä¾›è¯¥æˆå‘˜çš„å…·ä½“å®ç°ã€‚æŠ½è±¡æˆå‘˜æ²¡æœ‰æ–¹æ³•ä½“ï¼Œç±»æœ¬èº«ä¹Ÿå¿…é¡»æ˜¯æŠ½è±¡çš„<code>abstract class</code>ã€‚</li><li>ç”¨é€”: å½“åŸºç±»å¼ºåˆ¶æ´¾ç”Ÿç±»å®ç°æŸäº›æ–¹æ³•æˆ–å±æ€§æ—¶ï¼Œä½¿ç”¨<code>abstract</code>ã€‚å®ƒç”¨äºå®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„æ¥å£æˆ–è¡Œä¸ºè§„èŒƒï¼Œæ‰€æœ‰çš„æ´¾ç”Ÿç±»éƒ½å¿…é¡»å®ç°è¿™äº›è¡Œä¸ºã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Speak</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Speak</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Bark&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Cat</span> : <span class="title">Animal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Speak</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Meow&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="34-get-å’Œ-set-å…³é”®å­—"><a href="#34-get-å’Œ-set-å…³é”®å­—" class="headerlink" title="34. get å’Œ set å…³é”®å­—"></a>34. get å’Œ set å…³é”®å­—</h3><p><code>get</code>å’Œ<code>set</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºå®šä¹‰å±æ€§çš„è®¿é—®å™¨ã€‚</p><ul><li><code>get</code>è®¿é—®å™¨ç”¨äºè¿”å›å±æ€§çš„å€¼ï¼Œè€Œ<code>set</code>è®¿é—®å™¨ç”¨äºä¸ºå±æ€§åˆ†é…æ–°å€¼ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> _name; <span class="comment">// è¿”å›å­—æ®µçš„å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            _name = <span class="keyword">value</span>; <span class="comment">// è®¾ç½®å­—æ®µçš„å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.Name = <span class="string">&quot;Alice&quot;</span>; <span class="comment">// è°ƒç”¨ set è®¿é—®å™¨</span></span><br><span class="line">        Console.WriteLine(person.Name); <span class="comment">// è°ƒç”¨ get è®¿é—®å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨å±æ€§<ul><li>è‡ªåŠ¨å±æ€§æ˜¯ä¸€ç§ç®€åŒ–è¯­æ³•ï¼Œå®ƒè®©ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆç§æœ‰çš„åå¤‡å­—æ®µã€‚ä½¿ç”¨è‡ªåŠ¨å±æ€§æ—¶ï¼Œä¸éœ€è¦æ˜¾å¼å®šä¹‰ <code>get</code>å’Œ<code>set</code>è®¿é—®å™¨çš„å®ç°ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; <span class="comment">// è‡ªåŠ¨å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.Name = <span class="string">&quot;Alice&quot;</span>; <span class="comment">// è‡ªåŠ¨å±æ€§çš„ set è®¿é—®å™¨</span></span><br><span class="line">        Console.WriteLine(person.Name); <span class="comment">// è‡ªåŠ¨å±æ€§çš„ get è®¿é—®å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åªè¯»å’Œå†™å…¥å±æ€§<ul><li>åªè¯»å±æ€§: åªå®šä¹‰<code>get</code>è®¿é—®å™¨çš„å±æ€§ã€‚</li><li>å†™å…¥å±æ€§: åªå®šä¹‰<code>set</code>è®¿é—®å™¨çš„å±æ€§ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åªè¯»å±æ€§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _name; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™å…¥å±æ€§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">set</span> &#123; _name = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">GetName</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> _name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å±æ€§çš„è®¿é—®æ§åˆ¶<ul><li>å¯ä»¥ä¸ºå±æ€§çš„<code>get</code>å’Œ<code>set</code>è®¿é—®å™¨æŒ‡å®šä¸åŒçš„è®¿é—®ä¿®é¥°ç¬¦ï¼Œä»¥æ§åˆ¶å®ƒä»¬çš„è®¿é—®çº§åˆ«ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> _name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _name; &#125;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">set</span> &#123; _name = <span class="keyword">value</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = name; <span class="comment">// å¯ä»¥åœ¨ç±»å†…éƒ¨è®¾ç½®å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>Name</code>å±æ€§çš„<code>set</code>è®¿é—®å™¨æ˜¯ç§æœ‰çš„ï¼Œå› æ­¤åªèƒ½åœ¨<code>Person</code>ç±»å†…éƒ¨è®¾ç½®<code>Name</code>çš„å€¼ï¼Œè€Œ<code>get</code> è®¿é—®å™¨æ˜¯å…¬æœ‰çš„ï¼Œå…è®¸ä»å¤–éƒ¨è¯»å–<code>Name</code>çš„å€¼ã€‚</p><hr><h3 id="35-add-å’Œ-remove-å…³é”®å­—"><a href="#35-add-å’Œ-remove-å…³é”®å­—" class="headerlink" title="35. add å’Œ remove å…³é”®å­—"></a>35. add å’Œ remove å…³é”®å­—</h3><p><code>add</code>å’Œ<code>remove</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºè‡ªå®šä¹‰äº‹ä»¶çš„è®¿é—®å™¨ã€‚è¿™ä¸¤ä¸ªå…³é”®å­—å…è®¸ä½ å®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºçš„æ·»åŠ å’Œç§»é™¤é€»è¾‘ï¼Œå®ƒä»¬é€šå¸¸ä¸<code>event</code>å…³é”®å­—ä¸€èµ·ä½¿ç”¨ã€‚</p><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyEventPublisher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> EventHandler _myEvent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler MyEvent</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">add</span> =&gt; _myEvent += <span class="keyword">value</span>;</span><br><span class="line">        <span class="keyword">remove</span> =&gt; _myEvent -= <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RaiseEvent</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        _myEvent?.Invoke(<span class="keyword">this</span>, EventArgs.Empty);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MyEventPublisher publisher = <span class="keyword">new</span> MyEventPublisher();</span><br><span class="line">        </span><br><span class="line">        EventHandler handler = (sender, e) =&gt; Console.WriteLine(<span class="string">&quot;Event triggered&quot;</span>);</span><br><span class="line">        publisher.MyEvent += handler; <span class="comment">// è§¦å‘ add è®¿é—®å™¨</span></span><br><span class="line">        publisher.RaiseEvent(); <span class="comment">// è¾“å‡º &quot;Event triggered&quot;</span></span><br><span class="line">        </span><br><span class="line">        publisher.MyEvent -= handler; <span class="comment">// è§¦å‘ remove è®¿é—®å™¨</span></span><br><span class="line">        publisher.RaiseEvent(); <span class="comment">// æ²¡æœ‰è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è‡ªå®šä¹‰<code>add</code>å’Œ<code>remove</code>è®¿é—®å™¨ï¼Œå¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶äº‹ä»¶çš„è®¢é˜…å’Œå–æ¶ˆè®¢é˜…è¿‡ç¨‹ï¼Œä½¿å¾—äº‹ä»¶ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¯æ§ã€‚</p><hr><h3 id="36-yield-è¯­å¥"><a href="#36-yield-è¯­å¥" class="headerlink" title="36. yield è¯­å¥"></a>36. yield è¯­å¥</h3><p><code>yield</code>è¯­å¥åœ¨<code>C#</code>ä¸­ç”¨äºå®ç°è¿­ä»£å™¨ï¼Œè¯¥è¯­å¥ä½¿ä¸€ä¸ªæ–¹æ³•ã€<code>get</code>è®¿é—®å™¨æˆ–<code>operator</code>è¿”å›ä¸€ä¸ªåºåˆ—çš„å…ƒç´ è€Œä¸å¿…åˆ›å»ºä¸´æ—¶çš„é›†åˆã€‚è¿™å¯¹äºåœ¨éœ€è¦å»¶è¿Ÿæ‰§è¡Œæˆ–å¤„ç†å¤§æ•°æ®é›†åˆæ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æŒ‰éœ€ç”Ÿæˆåºåˆ—ä¸­çš„å…ƒç´ ã€‚</p><ul><li><p>åŸºæœ¬æ¦‚å¿µ</p><ul><li>è¿­ä»£å™¨: ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®ç°äº†<code>IEnumerable</code>æˆ–<code>IEnumerator</code>æ¥å£ï¼Œæä¾›ä¸€ç§é€ä¸€è®¿é—®åºåˆ—ä¸­å…ƒç´ çš„æ–¹æ³•ï¼Œè€Œæ— éœ€æš´éœ²åº•å±‚è¡¨ç¤ºã€‚</li><li>å»¶è¿Ÿæ‰§è¡Œ: <code>yield</code>è¯­å¥ä½¿å¾—æ–¹æ³•çš„æ‰§è¡Œåœ¨æ¯æ¬¡è¿”å›ä¸€ä¸ªå…ƒç´ åå¯ä»¥æš‚åœï¼Œå¹¶åœ¨ä¸‹ä¸€æ¬¡éœ€è¦å…ƒç´ æ—¶æ¢å¤ã€‚è¿™ç§ç‰¹æ€§è¢«ç§°ä¸ºå»¶è¿Ÿæ‰§è¡Œã€‚</li></ul></li><li><p>åŸºæœ¬ç”¨æ³• <code>yield return</code> å’Œ <code>yield break</code></p><ul><li><code>yield return</code>: ç”¨äºè¿”å›ä¸€ä¸ªåºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶æš‚åœæ–¹æ³•çš„æ‰§è¡Œï¼Œç›´åˆ°åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ è¢«è¯·æ±‚ã€‚</li><li><code>yield break</code>: ç”¨äºç»ˆæ­¢è¿­ä»£ï¼Œç«‹å³é€€å‡ºè¿­ä»£å™¨å—ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FibonacciGenerator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IEnumerable&lt;<span class="built_in">int</span>&gt; <span class="title">GenerateFibonacci</span>(<span class="params"><span class="built_in">int</span> maxTermCount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> previous = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">int</span> current = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (count &lt; maxTermCount)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> previous;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> next = previous + current;</span><br><span class="line">            previous = current;</span><br><span class="line">            current = next;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Fibonacci Sequence (first 10 terms):&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> FibonacciGenerator.GenerateFibonacci(<span class="number">10</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>yield</code>çš„ä¼˜ç‚¹<ul><li>ç®€åŒ–ä»£ç : ä½¿ç”¨<code>yield</code>å¯ä»¥è½»æ¾åœ°åˆ›å»ºè¿”å›å¤šä¸ªå€¼çš„è¿­ä»£å™¨ï¼Œè€Œæ— éœ€åˆ›å»ºä¸´æ—¶é›†åˆæˆ–æ‰‹åŠ¨å®ç° <code>IEnumerable</code>æˆ–<code>IEnumerator</code>æ¥å£ã€‚</li><li>èŠ‚çœå†…å­˜: ç”±äº<code>yield</code>è¯­å¥æ”¯æŒå»¶è¿Ÿæ‰§è¡Œï¼Œå®ƒåªåœ¨éœ€è¦æ—¶ç”Ÿæˆå…ƒç´ ï¼Œé¿å…äº†ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®ï¼ŒèŠ‚çœäº†å†…å­˜ã€‚</li><li>æé«˜æ€§èƒ½: åœ¨å¤„ç†å¤§æ•°æ®é›†æˆ–è€—æ—¶çš„è®¡ç®—æ—¶ï¼Œ<code>yield</code>å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨åºåˆ—ä¸­é€ä¸€è®¿é—®å…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰å…ƒç´ ã€‚</li></ul></li></ul><hr><h3 id="37-async-å…³é”®å­—"><a href="#37-async-å…³é”®å­—" class="headerlink" title="37. async å…³é”®å­—"></a>37. async å…³é”®å­—</h3><p><code>async</code>å…³é”®å­—åœ¨<code>C#</code>ä¸­ç”¨äºæ ‡è¯†ä¸€ä¸ªæ–¹æ³•ã€<code>lambda</code>è¡¨è¾¾å¼æˆ–åŒ¿åæ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚å¼‚æ­¥æ–¹æ³•å…è®¸ä½ åœ¨ä¸é˜»å¡è°ƒç”¨çº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œï¼ˆå¦‚<code>I/O</code>æ“ä½œã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥ä¿æŒå“åº”ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡åˆ›å»ºæ–°çº¿ç¨‹ã€‚</p><ul><li>åŸºæœ¬æ¦‚å¿µ<ul><li>å¼‚æ­¥æ–¹æ³•: ä½¿ç”¨<code>async</code>å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª<code>await</code>è¡¨è¾¾å¼ã€‚å½“å¼‚æ­¥æ–¹æ³•æ‰§è¡Œåˆ° <code>await</code>è¡¨è¾¾å¼æ—¶ï¼Œå®ƒä¼šå¼‚æ­¥åœ°ç­‰å¾…æ“ä½œå®Œæˆï¼Œè€Œä¸é˜»å¡å½“å‰çº¿ç¨‹ã€‚</li><li>è¿”å›ç±»å‹: å¼‚æ­¥æ–¹æ³•é€šå¸¸è¿”å›<code>Task</code>æˆ–<code>Task&lt;T&gt;</code>å¯¹è±¡ï¼Œè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å›<code>Task</code>ï¼›å¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å›<code>Task&lt;T&gt;</code>ï¼Œå…¶ä¸­<code>T</code>æ˜¯è¿”å›å€¼çš„ç±»å‹ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Net.Http;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">async</span> Task <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> url = <span class="string">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> result = <span class="keyword">await</span> FetchDataAsync(url);</span><br><span class="line">        Console.WriteLine(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">async</span> Task&lt;<span class="built_in">string</span>&gt; <span class="title">FetchDataAsync</span>(<span class="params"><span class="built_in">string</span> url</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (HttpClient client = <span class="keyword">new</span> HttpClient())</span><br><span class="line">        &#123;</span><br><span class="line">            HttpResponseMessage response = <span class="keyword">await</span> client.GetAsync(url);</span><br><span class="line">            response.EnsureSuccessStatusCode();</span><br><span class="line">            <span class="built_in">string</span> responseData = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line">            <span class="keyword">return</span> responseData;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é‡è¦æ³¨æ„äº‹é¡¹<ul><li>å¼‚æ­¥æ‰€æœ‰: å¼‚æ­¥æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„æ‰€æœ‰å¯èƒ½é˜»å¡çš„æ“ä½œä¹Ÿåº”å°½å¯èƒ½ä½¿ç”¨å¼‚æ­¥ç‰ˆæœ¬ã€‚</li><li>é”™è¯¯å¤„ç†: åœ¨å¼‚æ­¥æ–¹æ³•ä¸­ï¼Œå¯ä»¥åƒå¤„ç†åŒæ­¥ä»£ç ä¸­çš„å¼‚å¸¸ä¸€æ ·ä½¿ç”¨<code>try-catch</code>è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚æœªå¤„ç†çš„å¼‚å¸¸ä¼šåœ¨è¿”å›çš„<code>Task</code>å¯¹è±¡ä¸Šå¼•å‘ã€‚</li></ul></li></ul><hr><h3 id="38-lambda-è¡¨è¾¾å¼"><a href="#38-lambda-è¡¨è¾¾å¼" class="headerlink" title="38. lambda è¡¨è¾¾å¼"></a>38. lambda è¡¨è¾¾å¼</h3><p><code>Lambda</code>è¡¨è¾¾å¼æ˜¯<code>C#</code>ä¸­çš„ä¸€ç§åŒ¿åå‡½æ•°ï¼Œå®ƒå¯ä»¥åŒ…å«è¡¨è¾¾å¼æˆ–è¯­å¥å—ï¼Œå¹¶ä¸”å¯ä»¥ç”¨æ¥åˆ›å»ºå§”æ‰˜æˆ–è¡¨è¾¾å¼æ ‘ç±»å‹ã€‚<code>Lambda</code>è¡¨è¾¾å¼æä¾›äº†ä¸€ç§ç®€æ´çš„è¯­æ³•ï¼Œç”¨äºå®šä¹‰å†…è”çš„å‡½æ•°æˆ–å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ã€‚<code>Lambda</code>è¡¨è¾¾å¼é€šå¸¸ç”¨äº<code>LINQ</code>æŸ¥è¯¢ã€äº‹ä»¶å¤„ç†ç¨‹åºå’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚</p><ul><li>ä½¿ç”¨å•è¡Œè¡¨è¾¾å¼çš„<code>Lambda</code>è¡¨è¾¾å¼</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>, <span class="built_in">int</span>&gt; multiply = (x, y) =&gt; x * y;</span><br><span class="line">Console.WriteLine(multiply(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// è¾“å‡º: 6</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>multiply</code>æ˜¯ä¸€ä¸ª<code>Func&lt;int, int, int&gt;</code>ç±»å‹çš„å§”æ‰˜ï¼Œå®ƒæ¥å—ä¸¤ä¸ª<code>int</code>å‚æ•°å¹¶è¿”å›ä¸€ä¸ª <code>int</code>ã€‚<code>Lambda</code>è¡¨è¾¾å¼<code>(x, y) =&gt; x * y</code>å®šä¹‰äº†è¿™ä¸ªå§”æ‰˜çš„å®ç°ã€‚</p><ul><li>ä½¿ç”¨è¯­å¥å—çš„<code>Lambda</code>è¡¨è¾¾å¼</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Action&lt;<span class="built_in">string</span>&gt; greet = name =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> greeting = <span class="string">$&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span>;</span><br><span class="line">    Console.WriteLine(greeting);</span><br><span class="line">&#125;;</span><br><span class="line">greet(<span class="string">&quot;World&quot;</span>); <span class="comment">// è¾“å‡º: Hello, World!</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>greet</code>æ˜¯ä¸€ä¸ª<code>Action&lt;string&gt;</code>ç±»å‹çš„å§”æ‰˜ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code>string</code>å‚æ•°å¹¶è¿”å›<code>void</code>ã€‚<code>Lambda</code>è¡¨è¾¾å¼<code>name =&gt; &#123; ... &#125;</code>ä½¿ç”¨äº†è¯­å¥å—æ¥æ‰§è¡Œå¤šè¡Œæ“ä½œã€‚</p><ul><li>æ— å‚æ•°çš„<code>Lambda</code>è¡¨è¾¾å¼</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Func&lt;<span class="built_in">int</span>&gt; getRandomNumber = () =&gt; <span class="keyword">new</span> Random().Next(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">Console.WriteLine(getRandomNumber()); <span class="comment">// è¾“å‡ºä¸€ä¸ªéšæœºæ•°</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>getRandomNumber</code>æ˜¯ä¸€ä¸ª<code>Func&lt;int&gt;</code>ç±»å‹çš„å§”æ‰˜ï¼Œå®ƒä¸æ¥å—ä»»ä½•å‚æ•°å¹¶è¿”å›ä¸€ä¸ª<code>int</code>ã€‚<code>Lambda</code>è¡¨è¾¾å¼<code>() =&gt; new Random().Next(1, 100)</code>å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å‡½æ•°ã€‚</p><ul><li>å•ä¸ªå‚æ•°çš„ç®€å†™å½¢å¼</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; square = x =&gt; x * x;</span><br><span class="line">Console.WriteLine(square(<span class="number">5</span>)); <span class="comment">// è¾“å‡º: 25</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>square</code>æ˜¯ä¸€ä¸ª<code>Func&lt;int, int&gt;</code>ç±»å‹çš„å§”æ‰˜ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code>int</code>å‚æ•°å¹¶è¿”å›ä¸€ä¸ª<code>int</code>ã€‚<code>Lambda</code>è¡¨è¾¾å¼<code>x =&gt; x * x</code>çœç•¥äº†å‚æ•°ç±»å‹å’Œæ‹¬å·ã€‚</p><ul><li><code>LINQ</code>æŸ¥è¯¢<ul><li><code>Lambda</code>è¡¨è¾¾å¼å¹¿æ³›ç”¨äº<code>LINQ</code>æŸ¥è¯¢ä¸­ï¼Œä½œä¸ºæŸ¥è¯¢è¡¨è¾¾å¼çš„æ¡ä»¶å’ŒæŠ•å½±ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> evenNumbers = numbers.Where(n =&gt; n % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> number <span class="keyword">in</span> evenNumbers)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(number); <span class="comment">// è¾“å‡º: 2, 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å§”æ‰˜å’Œäº‹ä»¶å¤„ç†<ul><li><code>Lambda</code>è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥ç®€æ´åœ°å®šä¹‰å§”æ‰˜å’Œäº‹ä»¶å¤„ç†ç¨‹åºã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line">Button btn = <span class="keyword">new</span> Button();</span><br><span class="line">btn.Click += (sender, e) =&gt; Console.WriteLine(<span class="string">&quot;Button clicked!&quot;</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="39-åŒ¿åæ–¹æ³•"><a href="#39-åŒ¿åæ–¹æ³•" class="headerlink" title="39. åŒ¿åæ–¹æ³•"></a>39. åŒ¿åæ–¹æ³•</h3><p>åŒ¿åæ–¹æ³•<code>Anonymous Methods</code>æ˜¯<code>C#</code>ä¸­çš„ä¸€ç§å®šä¹‰å§”æ‰˜å®ä¾‹çš„æ–¹å¼ï¼Œå®ƒå…è®¸ä½ åœ¨ä»£ç ä¸­ç›´æ¥å£°æ˜ä¸€ä¸ªæ²¡æœ‰åç§°çš„æ–¹æ³•ã€‚åŒ¿åæ–¹æ³•æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥åˆ›å»ºå†…è”çš„å§”æ‰˜ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ã€‚</p><ul><li>åŒ¿åæ–¹æ³•ä½¿ç”¨<code>delegate</code>å…³é”®å­—ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å‚æ•°å’Œæ–¹æ³•ä½“ã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">DisplayMessage</span>(<span class="params"><span class="built_in">string</span> message</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨åŒ¿åæ–¹æ³•å®šä¹‰å§”æ‰˜å®ä¾‹</span></span><br><span class="line">        DisplayMessage display = <span class="built_in">delegate</span>(<span class="built_in">string</span> message)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(message);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨åŒ¿åæ–¹æ³•</span></span><br><span class="line">        display(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŒ¿åæ–¹æ³•å’Œ<code>Lambda</code>è¡¨è¾¾å¼æ¯”è¾ƒ</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åæ–¹æ³•</span></span><br><span class="line">Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; square1 = <span class="built_in">delegate</span>(<span class="built_in">int</span> x) &#123; <span class="keyword">return</span> x * x; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lambda è¡¨è¾¾å¼</span></span><br><span class="line">Func&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt; square2 = x =&gt; x * x;</span><br></pre></td></tr></table></figure><ul><li>ä½•æ—¶ä½¿ç”¨åŒ¿åæ–¹æ³•<ul><li>å¤æ‚é€»è¾‘: å½“æ–¹æ³•ä½“åŒ…å«å¤æ‚é€»è¾‘æˆ–å¤šè¡Œä»£ç æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨åŒ¿åæ–¹æ³•ã€‚</li><li>æ•è·å¤šä¸ªå˜é‡: éœ€è¦æ•è·å¤šä¸ªå¤–éƒ¨å˜é‡æˆ–å‚æ•°æ—¶ï¼ŒåŒ¿åæ–¹æ³•å¯ä»¥æä¾›æ›´æ¸…æ™°çš„è¯­æ³•ç»“æ„ã€‚</li></ul></li></ul><hr><h3 id="40-æ³›å‹å‡½æ•°"><a href="#40-æ³›å‹å‡½æ•°" class="headerlink" title="40. æ³›å‹å‡½æ•°"></a>40. æ³›å‹å‡½æ•°</h3><p>æ³›å‹å‡½æ•°<code>Generic Functions</code>æ˜¯æŒ‡å¯ä»¥æ¥å—ä¸åŒç±»å‹å‚æ•°çš„å‡½æ•°ã€‚<code>C#</code>ä¸­çš„æ³›å‹å‡½æ•°é€šè¿‡åœ¨å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œä½¿å¾—å‡½æ•°å¯ä»¥ç‹¬ç«‹äºå…·ä½“çš„æ•°æ®ç±»å‹æ¥ç¼–å†™ã€‚åœ¨è°ƒç”¨æ³›å‹å‡½æ•°æ—¶ï¼Œå…·ä½“çš„ç±»å‹ä¼šè¢«æ›¿æ¢ä¸ºå®é™…ä½¿ç”¨çš„ç±»å‹ã€‚è¿™æ ·ï¼Œæ³›å‹å‡½æ•°å¯ä»¥åœ¨ä¸é‡å¤ç¼–å†™ä»£ç çš„æƒ…å†µä¸‹é€‚åº”å¤šç§æ•°æ®ç±»å‹ã€‚</p><ul><li>å®šä¹‰æ³›å‹å‡½æ•°<ul><li>åœ¨<code>C#</code>ä¸­ï¼Œæ³›å‹å‡½æ•°é€šè¿‡åœ¨æ–¹æ³•åç§°åä½¿ç”¨å°–æ‹¬å·<code>&lt;T&gt;</code>å½¢å¼çš„ç±»å‹å‚æ•°æ¥å®šä¹‰ï¼Œå…¶ä¸­<code>T</code>æ˜¯ç±»å‹å‚æ•°çš„å ä½ç¬¦ã€‚å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œä¾‹å¦‚<code>&lt;T, U&gt;</code>ç­‰ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Print&lt;<span class="built_in">int</span>&gt;(<span class="number">123</span>);        <span class="comment">// è¾“å‡º: 123</span></span><br><span class="line">        Print&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// è¾“å‡º: Hello</span></span><br><span class="line">        Print&lt;<span class="built_in">double</span>&gt;(<span class="number">3.14</span>);    <span class="comment">// è¾“å‡º: 3.14</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print</span>&lt;<span class="title">T</span>&gt;(<span class="params">T <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¤šä¸ªç±»å‹å‚æ•°<ul><li>æ³›å‹å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œä½¿ç”¨é€—å·åˆ†éš”ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Swap</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params"><span class="keyword">ref</span> T first, <span class="keyword">ref</span> U second</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    T temp = first;</span><br><span class="line">    first = (T)(<span class="built_in">object</span>)second;</span><br><span class="line">    second = (U)(<span class="built_in">object</span>)temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>Swap</code>æ–¹æ³•ä½¿ç”¨äº†ä¸¤ä¸ªç±»å‹å‚æ•°<code>T</code>å’Œ<code>U</code>ï¼Œå¯ä»¥äº¤æ¢ä¸åŒç±»å‹çš„å˜é‡ã€‚</p><ul><li>ç±»å‹çº¦æŸ<ul><li>å¯ä»¥å¯¹æ³›å‹ç±»å‹å‚æ•°æ–½åŠ çº¦æŸï¼Œä»¥é™åˆ¶å¯ç”¨çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œé™åˆ¶ç±»å‹å‚æ•°å¿…é¡»å®ç°æŸä¸ªæ¥å£æˆ–ç»§æ‰¿è‡ªæŸä¸ªç±»ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Display</span>&lt;<span class="title">T</span>&gt;(<span class="params">T <span class="keyword">value</span></span>) <span class="keyword">where</span> T : IComparable&lt;T&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>Display&lt;T&gt;</code>æ–¹æ³•åªèƒ½æ¥å—å®ç°äº†<code>IComparable&lt;T&gt;</code>æ¥å£çš„ç±»å‹ã€‚</p><ul><li>æ³›å‹å‡½æ•°çš„ä¼˜ç‚¹<ul><li>ä»£ç é‡ç”¨: æ³›å‹å‡½æ•°å…è®¸ç¼–å†™é€šç”¨çš„ä»£ç ï¼Œå¯ä»¥ä¸ä¸åŒçš„æ•°æ®ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œè€Œæ— éœ€ä¸ºæ¯ç§ç±»å‹ç¼–å†™é‡å¤çš„ä»£ç ã€‚</li><li>ç±»å‹å®‰å…¨: ä½¿ç”¨æ³›å‹å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹ä¸€è‡´æ€§ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</li><li>æ€§èƒ½: æ³›å‹å‡½æ•°ä¸ä¼šåƒéæ³›å‹é›†åˆç±»é‚£æ ·å¼•å…¥è£…ç®±å’Œæ‹†ç®±æ“ä½œï¼ˆå¯¹äºå€¼ç±»å‹ï¼‰ï¼Œå› æ­¤å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ul></li></ul><hr><h3 id="41-LINQ-è¯­è¨€é›†æˆæŸ¥è¯¢"><a href="#41-LINQ-è¯­è¨€é›†æˆæŸ¥è¯¢" class="headerlink" title="41. LINQ (è¯­è¨€é›†æˆæŸ¥è¯¢)"></a>41. LINQ (è¯­è¨€é›†æˆæŸ¥è¯¢)</h3><p><code>LINQ</code>ï¼ˆè¯­è¨€é›†æˆæŸ¥è¯¢ï¼‰æ˜¯<code>C#</code>æä¾›çš„ä¸€ç§åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>SQL</code>çš„è¯­æ³•æ¥æŸ¥è¯¢å’Œæ“ä½œå„ç§æ•°æ®æºï¼Œå¦‚å¯¹è±¡é›†åˆã€æ•°æ®åº“ã€<code>XML</code>ç­‰ã€‚<code>LINQ</code>æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•å’Œæœºåˆ¶ï¼Œä½¿å¾—æ•°æ®æŸ¥è¯¢å’Œæ“ä½œæ›´åŠ ç®€æ´ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤ã€‚</p><ul><li><p><code>LINQ</code>çš„åŸºæœ¬æ¦‚å¿µ</p><ul><li>ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•: æ— è®ºæ•°æ®æ¥æºæ˜¯ä»€ä¹ˆï¼Œ<code>LINQ</code>æä¾›äº†ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•ï¼Œç®€åŒ–äº†æ•°æ®è®¿é—®å’Œæ“ä½œçš„è¿‡ç¨‹ã€‚</li><li>å»¶è¿Ÿæ‰§è¡Œ: <code>LINQ</code>æŸ¥è¯¢é€šå¸¸æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œå³åªæœ‰åœ¨æŸ¥è¯¢ç»“æœè¢«çœŸæ­£è®¿é—®æ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒæŸ¥è¯¢ã€‚è¿™å¯ä»¥æé«˜æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ã€‚</li></ul></li><li><p><code>LINQ</code>æŸ¥è¯¢è¯­æ³•</p><ul><li>æŸ¥è¯¢è¯­æ³•ç±»ä¼¼<code>SQL</code>ï¼Œæ˜¯ä¸€ç§å£°æ˜å¼çš„è¯­æ³•ï¼Œæè¿°æˆ‘ä»¬å¸Œæœ›ä»æ•°æ®æºä¸­æå–ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">5</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">12</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> numQuery = <span class="keyword">from</span> num <span class="keyword">in</span> numbers</span><br><span class="line">               <span class="keyword">where</span> num % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">               <span class="keyword">orderby</span> num</span><br><span class="line">               <span class="keyword">select</span> num;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> numQuery)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>LINQ</code>æ–¹æ³•è¯­æ³•<ul><li>æ–¹æ³•è¯­æ³•ä½¿ç”¨æ ‡å‡†æŸ¥è¯¢è¿ç®—ç¬¦æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œå¯ä»¥åƒé“¾æ¡ä¸€æ ·è¿æ¥èµ·æ¥ã€‚</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">5</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">12</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> numQuery = numbers.Where(num =&gt; num % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">                      .OrderBy(num =&gt; num)</span><br><span class="line">                      .Select(num =&gt; num);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> numQuery)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>LINQ</code>çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€å°±æ˜¯å®ƒå¯ä»¥ä½œç”¨äºå®ç°äº†<code>IEnumerable&lt;T&gt;</code>æ¥å£çš„ä»»ä½•æ•°æ®æºã€‚</li></ul><figure class="highlight c#"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ LINQ æŸ¥è¯¢</span></span><br><span class="line">        IEnumerable&lt;<span class="built_in">int</span>&gt; evenNumbers = numbers.Where(n =&gt; n % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æšä¸¾æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> evenNumbers)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(num); <span class="comment">// è¾“å‡º: 2, 4</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>LINQ</code>æ˜¯<code>C#</code>ä¸­çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å¼æ¥æŸ¥è¯¢å’Œæ“ä½œå„ç§æ•°æ®æºã€‚é€šè¿‡ <code>LINQ</code>ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç®€å•ã€æ¸…æ™°ä¸”ç±»å‹å®‰å…¨çš„ä»£ç æ¥æ‰§è¡Œå¤æ‚çš„æ•°æ®æ“ä½œã€‚</p><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>æ–‡ä»¶è¿˜æœªä¸Šä¼  Github</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6å­¦ä¹ ç¬”è®° â€¢ ä¸‹</title>
      <link href="/posts/461e57d3.html"/>
      <url>/posts/461e57d3.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ¬è¯»ä¹¦ç¬”è®°èŠ‚æ˜¯é’ˆå¯¹é˜®ä¸€å³°ç¼–å†™çš„ <a href="https://es6.ruanyifeng.com/">ã€ŠECMAScript 6 å…¥é—¨æ•™ç¨‹ã€‹</a>çš„æ€»ç»“ã€‚é€‚åˆå·²ç»æŒæ¡ <code>ES5</code> çš„è¯»è€…ï¼Œç”¨æ¥äº†è§£è¿™é—¨è¯­è¨€çš„æœ€æ–°å‘å±•ã€‚ç¬”è®°å†…å®¹ä»…åŒ…æ‹¬æ—¥å¸¸å¼€å‘ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æ¦‚å¿µã€‚</p></blockquote><hr><h2 id="20-async-å‡½æ•°"><a href="#20-async-å‡½æ•°" class="headerlink" title="20. async å‡½æ•°"></a>20. async å‡½æ•°</h2><h3 id="20-1-å«ä¹‰"><a href="#20-1-å«ä¹‰" class="headerlink" title="20.1 å«ä¹‰"></a>20.1 å«ä¹‰</h3><p><code>ES6</code>å¼•å…¥çš„ <code>async</code> å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚ç®€å•æ¥è¯´ï¼Œ<code>async</code> å‡½æ•°å°±æ˜¯ <code>Generator</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚å®ƒå°† <code>Generator</code>å‡½æ•°çš„æ˜Ÿå·<code>*</code>æ›¿æ¢æˆ<code>async</code>ï¼Œ<code>yield</code>æ›¿æ¢æˆ<code>await</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readFile = <span class="keyword">function</span> (<span class="params">fileName</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(fileName, <span class="keyword">function</span> (<span class="params">error, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">return</span> <span class="title function_">reject</span>(error);</span><br><span class="line">      <span class="title function_">resolve</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">const</span> f1 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/fstab&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> f2 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/shells&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">toString</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="title function_">toString</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>gen</code>ä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå†™æˆ<code>async</code>å‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> asyncReadFile = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> f1 = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/fstab&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> f2 = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/shells&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">toString</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="title function_">toString</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>async</code>å‡½æ•°å¯¹ <code>Generator</code> å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹</p><ol><li>å†…ç½®æ‰§è¡Œå™¨: <code>Generator</code> å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼ˆ<code>co</code>æ¨¡å—ï¼‰ï¼Œè€Œ<code>async</code>å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>async</code>å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ã€‚</li><li>æ›´å¥½çš„è¯­ä¹‰: <code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·æ˜Ÿå·å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚<code>async</code>è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œ<code>await</code>è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</li><li>æ›´å¹¿çš„é€‚ç”¨æ€§: <code>co</code>æ¨¡å—çº¦å®šï¼Œ<code>yield</code>å‘½ä»¤åé¢åªèƒ½æ˜¯ <code>Thunk</code> å‡½æ•°æˆ– <code>Promise</code> å¯¹è±¡ï¼Œè€Œ<code>async</code>å‡½æ•°çš„<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ <code>Promise</code> å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ã€‚ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ <code>resolved</code> çš„ <code>Promise</code> å¯¹è±¡ï¼‰</li><li>è¿”å›å€¼æ˜¯ Promise: <ins><code>async</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>Promise</code> å¯¹è±¡</ins>ï¼Œè¿™æ¯” <code>Generator</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>Iterator</code> å¯¹è±¡æ–¹ä¾¿ï¼Œå¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</li></ol><p>è¿›ä¸€æ­¥è¯´ï¼Œ<code>async</code>å‡½æ•°å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè€Œ<code>await</code>å‘½ä»¤å°±æ˜¯å¯ä»¥æ›¿ä»£<code>then</code>çš„è¯­æ³•ç³–ã€‚ä¸‹é¢çš„ <code>Promise</code> é“¾å¯ä»¥è¢«é‡å†™ä¸ºä¸€ä¸ª <code>async</code> å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="20-2-åŸºæœ¬ç”¨æ³•"><a href="#20-2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="20.2 åŸºæœ¬ç”¨æ³•"></a>20.2 åŸºæœ¬ç”¨æ³•</h3><p><ins><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°</ins>ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œ<ins>é‡åˆ°<code>await</code>å°±ä¼šæš‚åœå½“å‰çš„<code>async</code>å‡½æ•°æ‰§è¡Œï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUserData</span>(<span class="params">userId</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿”å›Promiseçš„fetchå‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.example.com/user/<span class="subst">$&#123;userId&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éœ€è¦æ£€æŸ¥å“åº”æ˜¯å¦okï¼Œå¦‚æœä¸okåˆ™æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error! status: <span class="subst">$&#123;response.status&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> response.<span class="title function_">json</span>(); <span class="comment">// å‡è®¾æœåŠ¡å™¨å“åº”çš„æ˜¯JSONæ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(</span><br><span class="line">      <span class="string">`There was a problem with the fetch operation: <span class="subst">$&#123;error.message&#125;</span>`</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è¿™ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="title function_">fetchUserData</span>(<span class="number">123</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(user))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>fetchUserData</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒä½¿ç”¨<code>fetchAPI</code>ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åä½¿ç”¨<code>await</code>å…³é”®å­—ç­‰å¾…<code>Promise</code>è§£å†³ã€‚æ³¨æ„ï¼Œåœ¨å¼‚æ­¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å§‹ç»ˆä½¿ç”¨<code>try/catch</code>æ¥æ•è·å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚<br><br></p><p><code>async</code>å‡½æ•°æœ‰å¤šç§ä½¿ç”¨å½¢å¼ã€‚å®ƒå¯ä»¥ä½œä¸ºå£°æ˜ï¼Œä½œä¸ºè¡¨è¾¾å¼ï¼Œè¿˜å¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡æˆ–ç±»çš„æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="keyword">async</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;&#125; &#125;;</span><br><span class="line">obj.<span class="title function_">foo</span>().<span class="title function_">then</span>(...)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Storage</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cachePromise</span> = caches.<span class="title function_">open</span>(<span class="string">&#x27;avatars&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getAvatar</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> cache = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">cachePromise</span>;</span><br><span class="line">    <span class="keyword">return</span> cache.<span class="title function_">match</span>(<span class="string">`/avatars/<span class="subst">$&#123;name&#125;</span>.jpg`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storage = <span class="keyword">new</span> <span class="title class_">Storage</span>();</span><br><span class="line">storage.<span class="title function_">getAvatar</span>(<span class="string">&#x27;jake&#x27;</span>).<span class="title function_">then</span>(â€¦);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">foo</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure><hr><h3 id="20-3-è¯­æ³•"><a href="#20-3-è¯­æ³•" class="headerlink" title="20.3 è¯­æ³•"></a>20.3 è¯­æ³•</h3><p><code>async</code>å‡½æ•°çš„è¯­æ³•è§„åˆ™æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œéš¾ç‚¹æ˜¯é”™è¯¯å¤„ç†æœºåˆ¶ã€‚<br><br></p><p><strong>ï¼ˆ1ï¼‰è¿”å› Promise å¯¹è±¡</strong></p><p><ins><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡</ins>ï¼ˆä¸ç®¡æœ‰æ²¡æœ‰<code>return</code>è¯­å¥ï¼Œæ€»æ˜¯è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼‰ã€‚<ins><code>async</code>å‡½æ•°å†…éƒ¨<code>return</code>è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v));</span><br><span class="line"><span class="comment">// &quot;hello world&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>å†…éƒ¨<code>return</code>å‘½ä»¤è¿”å›çš„å€¼ï¼Œä¼šè¢«<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚<br><br></p><p><ins><code>async</code>å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ <code>Promise</code> å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€</ins>ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«<code>catch</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolve&quot;</span>, v))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;reject&quot;</span>, e));</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ–</strong></p><p><code>async</code>å‡½æ•°è¿”å›çš„ <code>Promise</code> å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰<code>await</code>å‘½ä»¤åé¢çš„ <code>Promise</code> å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<ins>åªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">asyncFunc</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>then</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¼šç­‰åˆ°<code>asyncFunc</code>å‡½æ•°å†…éƒ¨çš„ä¸¤ä¸ª<code>await</code>æ“ä½œéƒ½å®Œæˆåæ‰ä¼šè¢«è°ƒç”¨ã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰await å‘½ä»¤</strong></p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<ins><code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯ <code>Promise</code> å¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç­‰åŒäº</span></span><br><span class="line">  <span class="comment">// return 123;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v));</span><br><span class="line"><span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡ï¼ˆå³å®šä¹‰äº†<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œè¯¦ç»†è¯·çœ‹<code>Promise</code>ç« èŠ‚çš„<code>resolve()</code>æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆ<code>await</code>ä¼šå°†å…¶ç­‰åŒäº <code>Promise</code> å¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;Resolved!&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> thenable;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// &#x27;Resolved!&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">asyncFunc</span>();</span><br><span class="line"><span class="comment">// 1000</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>thenable</code>å¯¹è±¡æœ‰ä¸€ä¸ª<code>then</code>æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥åœ¨<code>asyncFunc</code>å‡½æ•°ä¸­ä½¿ç”¨<code>await</code>æ¥ç­‰å¾…å®ƒã€‚<ins>å½“<code>JS</code>å¼•æ“çœ‹åˆ°æˆ‘ä»¬è¯•å›¾ç­‰å¾…ä¸€ä¸ª<code>thenable</code>å¯¹è±¡æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„<code>then</code>æ–¹æ³•</ins>ï¼Œå¹¶ç­‰å¾…è¯¥æ–¹æ³•è°ƒç”¨å…¶<code>resolve</code>å‚æ•°æ‰€ä¼ å…¥çš„å€¼ã€‚<br><br></p><p>å¦‚æœ<ins><code>await</code>å‘½ä»¤åé¢çš„ <code>Promise</code> å¯¹è±¡å¦‚æœå˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œåˆ™<code>reject</code>çš„å‚æ•°ä¼šè¢«<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°æ¥æ”¶åˆ°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e));</span><br><span class="line"><span class="comment">// å‡ºé”™äº†</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­<code>await</code>è¯­å¥å‰é¢æ²¡æœ‰<code>return</code>ï¼Œä½†æ˜¯<code>reject</code>æ–¹æ³•çš„å‚æ•°ä¾ç„¶ä¼ å…¥äº†<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚è¿™é‡Œå¦‚æœåœ¨<code>await</code>å‰é¢åŠ ä¸Š<code>return</code>ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚<br><br></p><p><ins>ä»»ä½•ä¸€ä¸ª<code>await</code>è¯­å¥åé¢çš„ <code>Promise</code> å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ª <code>async</code> å‡½æ•°ç«‹å³åœæ­¢æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>try/catch</code> è¯­å¥æ¥æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶å¤„ç†å®ƒã€‚</ins>ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œ<code>async</code>å‡½æ•°ä¼šä¸­æ–­æ‰§è¡Œï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æƒ…å†µ 1</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;hello world&quot;</span>); <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µ 2</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error);</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯ä»¥å¤„ç†é”™è¯¯ï¼Œå¹¶å†³å®šå¦‚ä½•ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// æ¯”å¦‚å¯ä»¥é‡æ–°æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œç­‰ç­‰</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›<ins>å³ä½¿å‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œå¤±è´¥ï¼Œä¹Ÿä¸è¦ä¸­æ–­åé¢çš„å¼‚æ­¥æ“ä½œ</ins>ã€‚æˆ‘ä»¬å¯ä»¥å°†<code>await</code>æ”¾åœ¨<code>try...catch</code>ç»“æ„é‡Œé¢ï¼Œè¿™æ ·ä¸ç®¡è¿™ä¸ªå¼‚æ­¥æ“ä½œæ˜¯å¦æˆåŠŸï¼Œä¸‹ä¸€ä¸ª<code>await</code>éƒ½ä¼šæ‰§è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v));</span><br><span class="line"><span class="comment">// å‡ºé”™äº†</span></span><br><span class="line"><span class="comment">// hello world</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹æ³•æ˜¯<code>await</code>åé¢çš„ <code>Promise</code> å¯¹è±¡å†è·Ÿä¸€ä¸ª<code>catch</code>æ–¹æ³•ï¼Œå¤„ç†å‰é¢å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e));</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(v));</span><br><span class="line"><span class="comment">// å‡ºé”™äº†</span></span><br><span class="line"><span class="comment">// hello world</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å®ƒæ›´åŠ ç´§å‡‘ï¼Œä¸éœ€è¦æ˜¾å¼åœ°ä½¿ç”¨<code>try/catch</code>ã€‚ä½†å®ƒçš„ç¼ºç‚¹æ˜¯éœ€è¦ç¡®ä¿æ¯ä¸ªå¯èƒ½äº§ç”Ÿé”™è¯¯çš„<code>await</code>éƒ½æœ‰ä¸€ä¸ª<code>catch</code>æ–¹æ³•ï¼Œå¦åˆ™é”™è¯¯å¯èƒ½ä¼šè¢«å¿½è§†ã€‚<br><br></p><p><strong>ï¼ˆ4ï¼‰é”™è¯¯å¤„ç†</strong></p><p>å¦‚æœ<ins><code>await</code>åé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäº<code>async</code>å‡½æ•°è¿”å›çš„ <code>Promise</code> å¯¹è±¡è¢«<code>reject</code></ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyncFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">  <span class="comment">// å¦‚æœ fetch å‡ºé”™ï¼ˆä¾‹å¦‚ï¼Œç”±äºç½‘ç»œé—®é¢˜ï¼‰ï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç å°†ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">asyncFunc</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error));</span><br><span class="line"><span class="comment">// å¦‚æœ asyncFunc åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆè¿™ä¸ª .catch å°†ä¼šæ•è·åˆ°</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>fetch</code>å‡½æ•°æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆ<code>asyncFunc</code>ä¼šç«‹å³åœæ­¢æ‰§è¡Œå¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¯¼è‡´å®ƒè¿”å›çš„<code>Promise</code>å˜ä¸º<code>rejected</code>çŠ¶æ€ã€‚è¿™ä¸ªé”™è¯¯ç„¶åè¢«<code>catch</code>æ•è·å¹¶å¤„ç†ã€‚<br><br></p><p>é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œå°±æ˜¯å°†å…¶æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¹‹ä¸­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰å¤šä¸ª<code>await</code>å‘½ä»¤ï¼Œå¯ä»¥ç»Ÿä¸€æ”¾åœ¨<code>try...catch</code>ç»“æ„ä¸­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> val1 = <span class="keyword">await</span> <span class="title function_">firstStep</span>();</span><br><span class="line">    <span class="keyword">const</span> val2 = <span class="keyword">await</span> <span class="title function_">secondStep</span>(val1);</span><br><span class="line">    <span class="keyword">const</span> val3 = <span class="keyword">await</span> <span class="title function_">thirdStep</span>(val1, val2);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Final: &quot;</span>, val3);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸Šé¢ä¸‰ä¸ªå¼‚æ­¥æ“ä½œæ˜¯ä¸²è¡Œå¤„ç†ï¼Œå³<code>secondStep</code>å°†åœ¨<code>firstStep</code>å®Œæˆåå¼€å§‹ã€‚å¦‚æœè¿™ä¸‰ä¸ªæ“ä½œä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨<code>Promise.all()</code>å¹¶è¡Œæ‰§è¡Œä»¥æé«˜æ•ˆç‡ã€‚<br><br></p><p><strong>ï¼ˆ5ï¼‰ä½¿ç”¨æ³¨æ„ç‚¹</strong></p><p>ç¬¬ä¸€ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯<code>rejected</code>ï¼Œæ‰€ä»¥<ins>æœ€å¥½æŠŠ<code>await</code>å‘½ä»¤æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¸­</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">somethingThatReturnsAPromise</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">somethingThatReturnsAPromise</span>().<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç‚¹ï¼Œ<ins>å¤šä¸ª<code>await</code>å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="keyword">await</span> <span class="title function_">getFoo</span>();</span><br><span class="line"><span class="keyword">let</span> bar = <span class="keyword">await</span> <span class="title function_">getBar</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼ˆå³äº’ä¸ä¾èµ–ï¼‰ï¼Œè¢«å†™æˆç»§å‘å…³ç³»ã€‚è¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºåªæœ‰<code>getFoo</code>å®Œæˆä»¥åï¼Œæ‰ä¼šæ‰§è¡Œ<code>getBar</code>ï¼Œå®Œå…¨å¯ä»¥è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> [foo, bar] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">getFoo</span>(), <span class="title function_">getBar</span>()]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> fooPromise = <span class="title function_">getFoo</span>();</span><br><span class="line"><span class="keyword">let</span> barPromise = <span class="title function_">getBar</span>();</span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">await</span> fooPromise;</span><br><span class="line"><span class="keyword">let</span> bar = <span class="keyword">await</span> barPromise;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>éƒ½æ˜¯åŒæ—¶è§¦å‘ï¼Œè¿™æ ·å°±ä¼šç¼©çŸ­ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ã€‚<br><br></p><p>ç¬¬ä¸‰ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åªèƒ½ç”¨åœ¨<code>async</code>å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">dbFuc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  docs.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> db.<span class="title function_">post</span>(doc);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>await</code>ç”¨åœ¨æ™®é€šå‡½æ•°ä¹‹ä¸­ã€‚ä½†æ˜¯ï¼Œå°±ç®—å°†<code>forEach</code>æ–¹æ³•çš„å‚æ•°æ”¹æˆ<code>async</code>å‡½æ•°ä¹Ÿæœ‰é—®é¢˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dbFuc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœ</span></span><br><span class="line">  docs.<span class="title function_">forEach</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> db.<span class="title function_">post</span>(doc);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œï¼ŒåŸå› æ˜¯è¿™æ—¶ä¸‰ä¸ª<code>db.post()</code>æ“ä½œå°†æ˜¯å¹¶å‘æ‰§è¡Œï¼ˆ<code>forEach</code> ä¸ä¼šç­‰å¾…å›è°ƒå‡½æ•°ï¼‰ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç»§å‘æ‰§è¡Œã€‚æ­£ç¡®çš„å†™æ³•æ˜¯é‡‡ç”¨<code>for</code>å¾ªç¯ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">dbFuc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> doc <span class="keyword">of</span> docs) &#123;</span><br><span class="line">    <span class="keyword">await</span> db.<span class="title function_">post</span>(doc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ•°ç»„çš„<a href="https://www.javascripttutorial.net/javascript-array-reduce/"><code>reduce()</code></a>æ–¹æ³•æ¥é€ä¸ªé¡ºåºå¤„ç†æ•°ç»„ä¸­çš„å…ƒç´ ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">dbFunc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> docs.<span class="title function_">reduce</span>(<span class="keyword">async</span> (prevPromise, doc) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> prevPromise;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> db.<span class="title function_">post</span>(doc);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;An error occurred: &quot;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¼ é€’ç»™<code>reduce()</code>çš„å‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œè¿™ä¸ª<code>Promise</code>åœ¨å‰ä¸€ä¸ª <code>Promise</code>è§£æä¹‹åå¼€å§‹å¦ä¸€é¡¹æ•°æ®åº“æ“ä½œã€‚æˆ‘ä»¬ä½¿ç”¨<code>Promise.resolve()</code>ä½œä¸ºåˆå§‹å€¼ï¼Œä»¥å¼€å§‹ <code>Promise</code>é“¾ã€‚<br><br></p><p>å¦‚æœå¸Œæœ›<ins>å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>Promise.all()</code>æ–¹æ³•</ins>ã€‚ä¸‹é¢ä¸¤ç§å†™æ³•æ•ˆæœç›¸åŒã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">dbFuc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line">  <span class="keyword">let</span> promises = docs.<span class="title function_">map</span>(<span class="function">(<span class="params">doc</span>) =&gt;</span> db.<span class="title function_">post</span>(doc));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> results = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(promises);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">dbFuc</span>(<span class="params">db</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;];</span><br><span class="line">  <span class="keyword">let</span> promises = docs.<span class="title function_">map</span>(<span class="function">(<span class="params">doc</span>) =&gt;</span> db.<span class="title function_">post</span>(doc));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> results = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> promise <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    results.<span class="title function_">push</span>(<span class="keyword">await</span> promise);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬å››ç‚¹ï¼Œ<code>async</code> å‡½æ•°å¯ä»¥ä¿ç•™è¿è¡Œå †æ ˆã€‚å®ƒä¼šåœ¨ç­‰å¾…<code>Promise</code>è§£ææœŸé—´æš‚åœå‡½æ•°çš„æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€èŒƒå›´å†…é˜»æ­¢æ‰§è¡Œï¼Œè¿™ä½¿å¾—è°ƒè¯•å·¥å…·èƒ½å¤Ÿåœ¨å¯èƒ½å‘ç”Ÿé”™è¯¯çš„åœ°æ–¹åœä¸‹æ¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">b</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="title function_">c</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡å®šå‡½æ•°<code>a</code>å†…éƒ¨è¿è¡Œäº†ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡<code>b()</code>ã€‚å½“<code>b()</code>è¿è¡Œçš„æ—¶å€™ï¼Œå‡½æ•°<code>a()</code>ä¸ä¼šä¸­æ–­ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œã€‚<ins>ç­‰åˆ°<code>b()</code>è¿è¡Œç»“æŸï¼Œå¯èƒ½<code>a()</code>æ—©å°±è¿è¡Œç»“æŸäº†ï¼Œ<code>b()</code>æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå·²ç»æ¶ˆå¤±äº†</ins>ã€‚å¦‚æœ<code>b()</code>æˆ–<code>c()</code>æŠ¥é”™ï¼Œ<a href="https://zhuanlan.zhihu.com/p/26637923">é”™è¯¯å †æ ˆ</a>å°†ä¸åŒ…æ‹¬<code>a()</code>ã€‚<br><br></p><p>ç°åœ¨å°†è¿™ä¸ªä¾‹å­æ”¹æˆ<code>async</code>å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">b</span>();</span><br><span class="line">  <span class="title function_">c</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>b()</code>è¿è¡Œçš„æ—¶å€™ï¼Œ<code>a()</code>æ˜¯æš‚åœæ‰§è¡Œï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒéƒ½ä¿å­˜ç€ã€‚ä¸€æ—¦<code>b()</code>æˆ–<code>c()</code>æŠ¥é”™ï¼Œé”™è¯¯å †æ ˆå°†åŒ…æ‹¬<code>a()</code>ã€‚</p><hr><h3 id="20-4-async-å‡½æ•°å®ç°åŸç†"><a href="#20-4-async-å‡½æ•°å®ç°åŸç†" class="headerlink" title="20.4 async å‡½æ•°å®ç°åŸç†"></a>20.4 async å‡½æ•°å®ç°åŸç†</h3><p><code>async</code> å‡½æ•°çš„å®ç°åŸç†ï¼Œå°±æ˜¯å°† <code>Generator</code> å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">args</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">spawn</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„<code>async</code>å‡½æ•°éƒ½å¯ä»¥å†™æˆä¸Šé¢çš„ç¬¬äºŒç§å½¢å¼ï¼Œå…¶ä¸­çš„<code>spawn</code>å‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">spawn</span>(<span class="params">genF</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> gen = <span class="title function_">genF</span>(); <span class="comment">// å»ºç«‹ Generater å‡½æ•°</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">step</span>(<span class="params">nextF</span>) &#123;</span><br><span class="line">      <span class="comment">// nextF æ˜¯ä¸€ä¸ª Generater å‡½æ•°</span></span><br><span class="line">      <span class="keyword">let</span> next;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        next = <span class="title function_">nextF</span>(); <span class="comment">// å¯åŠ¨ Generaterï¼Œè¿”å›å½“å‰çŠ¶æ€ï¼Œè¿è¡Œè‡³ä¸‹ä¸€ä¸ª yield</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reject</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (next.<span class="property">done</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">resolve</span>(next.<span class="property">value</span>); <span class="comment">// ç»“æŸæ‰§è¡Œå™¨</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(next.<span class="property">value</span>).<span class="title function_">then</span>(</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">v</span>) &#123;</span><br><span class="line">          <span class="title function_">step</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> gen.<span class="title function_">next</span>(v);</span><br><span class="line">          &#125;); <span class="comment">// å¼€å§‹é€’å½’</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">          <span class="title function_">step</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> gen.<span class="keyword">throw</span>(e);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¼ é€’ä¸€ä¸ª functionï¼Œç”¨æ¥å¯åŠ¨ Generaterï¼Œç¬¬ä¸€æ¬¡ä¼ å‚æ˜¯æ— æ•ˆçš„</span></span><br><span class="line">    <span class="title function_">step</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> gen.<span class="title function_">next</span>(<span class="literal">undefined</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="20-5-å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"><a href="#20-5-å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ" class="headerlink" title="20.5 å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"></a>20.5 å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ</h3><p>é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ <code>async</code> å‡½æ•°ä¸ <code>Promise</code>ã€<code>Generator</code> å‡½æ•°çš„æ¯”è¾ƒã€‚</p><ul><li>å‡å®šæŸä¸ª <code>DOM</code> å…ƒç´ ä¸Šé¢ï¼Œéƒ¨ç½²äº†ä¸€ç³»åˆ—çš„åŠ¨ç”»ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œæ‰èƒ½å¼€å§‹åä¸€ä¸ªã€‚å¦‚æœå½“ä¸­æœ‰ä¸€ä¸ªåŠ¨ç”»å‡ºé”™ï¼Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„åŠ¨ç”»çš„è¿”å›å€¼ã€‚</li></ul><p>é¦–å…ˆæ˜¯ <code>Promise</code> çš„å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">chainAnimationsPromise</span>(<span class="params">elem, animations</span>) &#123;</span><br><span class="line">  <span class="comment">// å˜é‡ ret ç”¨æ¥ä¿å­˜ä¸Šä¸€ä¸ªåŠ¨ç”»çš„è¿”å›å€¼</span></span><br><span class="line">  <span class="keyword">let</span> ret = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªå·²è§£å†³çš„ Promise</span></span><br><span class="line">  <span class="keyword">let</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå† animations æ•°ç»„ä¸­çš„æ¯ä¸ªåŠ¨ç”»</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> anim <span class="keyword">of</span> animations) &#123;</span><br><span class="line">    <span class="comment">// å°†æ¯ä¸ªåŠ¨ç”»é“¾æ¥åˆ° Promise é“¾</span></span><br><span class="line">    p = p.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="comment">// ä¿å­˜å‰ä¸€ä¸ªåŠ¨ç”»çš„è§£å†³å€¼</span></span><br><span class="line">      ret = val;</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå½“å‰åŠ¨ç”»å¹¶è¿”å›æ–°çš„ Promise</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">anim</span>(elem);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä»»ä½•ä¸€ä¸ªåŠ¨ç”»çš„ Promise è¢«æ‹’ç»ï¼Œå°†è¢« catch æ•æ‰</span></span><br><span class="line">  <span class="keyword">return</span> p</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="comment">/* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶ <code>Promise</code> çš„å†™æ³•æ¯”å›è°ƒå‡½æ•°çš„å†™æ³•å¤§å¤§æ”¹è¿›ï¼Œä½†æ˜¯ä¸€çœ¼çœ‹ä¸Šå»ï¼Œä»£ç å®Œå…¨éƒ½æ˜¯ <code>Promise</code> çš„ <code>API</code>ï¼Œæ“ä½œæœ¬èº«çš„è¯­ä¹‰åè€Œä¸å®¹æ˜“çœ‹å‡ºæ¥ã€‚<br><br></p><p>æ¥ç€æ˜¯ <code>Generator</code> å‡½æ•°çš„å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">chainAnimationsGenerator</span>(<span class="params">elem, animations</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">spawn</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">    <span class="keyword">let</span> ret = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> anim <span class="keyword">of</span> animations) &#123;</span><br><span class="line">        ret = <span class="keyword">yield</span> <span class="title function_">anim</span>(elem);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="comment">/* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨ <code>Generator</code> å‡½æ•°éå†äº†æ¯ä¸ªåŠ¨ç”»ï¼Œè¯­ä¹‰æ¯” <code>Promise</code> å†™æ³•æ›´æ¸…æ™°ï¼Œç”¨æˆ·å®šä¹‰çš„æ“ä½œå…¨éƒ¨éƒ½å†™åœ¨<code>spawn</code>å‡½æ•°çš„å†…éƒ¨ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå†™æ³•å¿…é¡»æä¾›ä¸€ä¸ªä»»åŠ¡è¿è¡Œå™¨ï¼Œè‡ªåŠ¨æ‰§è¡Œ <code>Generator</code> å‡½æ•°ï¼Œè€Œä¸”å¿…é¡»ä¿è¯<code>yield</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼è¿”å›ä¸€ä¸ª <code>Promise</code>ã€‚<br><br></p><p>æœ€åæ˜¯ <code>async</code> å‡½æ•°çš„å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">chainAnimationsAsync</span>(<span class="params">elem, animations</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ret = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> anim <span class="keyword">of</span> animations) &#123;</span><br><span class="line">      ret = <span class="keyword">await</span> <span class="title function_">anim</span>(elem);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">/* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>Async</code> å‡½æ•°çš„å®ç°æœ€ç®€æ´ï¼Œæœ€ç¬¦åˆè¯­ä¹‰ã€‚å®ƒå°† <code>Generator</code> å†™æ³•ä¸­çš„è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œæ”¹åœ¨è¯­è¨€å±‚é¢æä¾›ï¼Œä¸æš´éœ²ç»™ç”¨æˆ·ï¼Œå› æ­¤ä»£ç é‡æœ€å°‘ã€‚</p><hr><h3 id="20-6-æŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"><a href="#20-6-æŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ" class="headerlink" title="20.6 æŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"></a>20.6 æŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ</h3><p>å®é™…å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä¸€ç»„å¼‚æ­¥æ“ä½œéœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆçš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„ <code>URL</code>ï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚<br><br></p><p><code>Promise</code> çš„å†™æ³•å¦‚ä¸‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logInOrder</span>(<span class="params">urls</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿œç¨‹è¯»å–æ‰€æœ‰URL</span></span><br><span class="line">  <span class="keyword">const</span> textPromises = urls.<span class="title function_">map</span>(<span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(url).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> response.<span class="title function_">text</span>());</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‰æ¬¡åºè¾“å‡º</span></span><br><span class="line">  <span class="comment">// chain ä»£è¡¨å½“å‰çš„ Promise é“¾ï¼Œåˆå§‹å€¼æ˜¯ Promise.resolve()</span></span><br><span class="line">  textPromises.<span class="title function_">reduce</span>(<span class="function">(<span class="params">chain, textPromise</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise</span></span><br><span class="line">    <span class="keyword">return</span> chain</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">() =&gt;</span> textPromise) <span class="comment">// è¿”å›å½“å‰æ­£åœ¨å¤„ç†çš„ textPromise</span></span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">text</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(text));</span><br><span class="line">  &#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()); <span class="comment">// åˆå§‹åŒ– Promise é“¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>fetch</code>æ–¹æ³•ï¼ŒåŒæ—¶è¿œç¨‹è¯»å–ä¸€ç»„ <code>URL</code>ã€‚æ¯ä¸ª<code>fetch</code>æ“ä½œéƒ½è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œæ”¾å…¥<code>textPromises</code>æ•°ç»„ã€‚ç„¶åï¼Œ<code>reduce</code>æ–¹æ³•ä¾æ¬¡å¤„ç†æ¯ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œç„¶åä½¿ç”¨<code>then</code>ï¼Œå°†æ‰€æœ‰ <code>Promise</code> å¯¹è±¡è¿èµ·æ¥ï¼Œå› æ­¤å°±å¯ä»¥ä¾æ¬¡è¾“å‡ºç»“æœã€‚<br><br></p><p>è¿™ç§å†™æ³•å¯è¯»æ€§æ¯”è¾ƒå·®ã€‚ä¸‹é¢æ˜¯ <code>async</code> å‡½æ•°å®ç°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">logInOrder</span>(<span class="params">urls</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> url <span class="keyword">of</span> urls) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> response.<span class="title function_">text</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ç¡®å®å¤§å¤§ç®€åŒ–ï¼Œ<ins>é—®é¢˜æ˜¯æ‰€æœ‰è¿œç¨‹æ“ä½œéƒ½æ˜¯ç»§å‘ã€‚åªæœ‰å‰ä¸€ä¸ª <code>URL</code> è¿”å›ç»“æœï¼Œæ‰ä¼šå»è¯»å–ä¸‹ä¸€ä¸ª <code>URL</code></ins>ï¼Œè¿™æ ·åšæ•ˆç‡å¾ˆå·®ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯å¹¶å‘å‘å‡ºè¿œç¨‹è¯·æ±‚ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">logInOrder</span>(<span class="params">urls</span>) &#123;</span><br><span class="line">  <span class="comment">// å¹¶å‘è¯»å–è¿œç¨‹URL</span></span><br><span class="line">  <span class="keyword">const</span> textPromises = urls.<span class="title function_">map</span>(<span class="keyword">async</span> (url) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">text</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‰æ¬¡åºè¾“å‡º</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> textPromise <span class="keyword">of</span> textPromises) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> textPromise);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>urls.map</code> æ–¹æ³•ä¼šå¯¹ <code>urls</code> æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿™ä¸ªå¼‚æ­¥å‡½æ•°ä¼šè¿œç¨‹è¯»å–<code>URL</code>ï¼Œç„¶åç­‰å¾…å“åº”ã€‚æ‰€æœ‰çš„è¿™äº›æ“ä½œéƒ½åœ¨ <code>map</code> æ–¹æ³•è°ƒç”¨çš„åŒæ—¶å¼€å§‹ï¼Œæ‰€ä»¥è¿™äº›æ“ä½œæ˜¯å¹¶å‘çš„ã€‚<br><br></p><p>æ³¨æ„ï¼Œåœ¨è¿™ä¸ªå¼‚æ­¥å‡½æ•°ä¸­ï¼Œ<code>await fetch(url)</code> ä¼šæš‚åœå‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ° <code>fetch</code> æ“ä½œå®Œæˆã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸ä¼šé˜»æ­¢å…¶ä»–æ“ä½œï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½åœ¨è‡ªå·±çš„å¼‚æ­¥å‡½æ•°ä¸­å¤„ç†ã€‚å› æ­¤ï¼Œ<code>textPromises</code> æ˜¯ä¸€ä¸ªåŒ…å«<code>Promise</code>çš„æ•°ç»„ï¼Œæ¯ä¸ª<code>Promise</code>éƒ½ä»£è¡¨ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å¼‚æ­¥æ“ä½œã€‚</p><hr><h3 id="20-7-å¼‚æ­¥æ“ä½œç»§å‘ä¸å¹¶å‘"><a href="#20-7-å¼‚æ­¥æ“ä½œç»§å‘ä¸å¹¶å‘" class="headerlink" title="20.7 å¼‚æ­¥æ“ä½œç»§å‘ä¸å¹¶å‘"></a>20.7 å¼‚æ­¥æ“ä½œç»§å‘ä¸å¹¶å‘</h3><p>ç»§å‘æ‰§è¡Œå¼‚æ­¥æ“ä½œæ„å‘³ç€ç­‰å¾…ä¸€ä¸ªæ“ä½œå®Œæˆåå†æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œã€‚<br><br></p><p>ï¼ˆ1ï¼‰ä½¿ç”¨ Promise é“¾<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">[func1, func2, func3].<span class="title function_">forEach</span>(<span class="function">(<span class="params">func</span>) =&gt;</span> &#123;</span><br><span class="line">  promise = promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="title function_">func</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;All async operations finished.&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>func1</code>, <code>func2</code> å’Œ <code>func3</code> æ˜¯è¿”å›<code>Promise</code>çš„å¼‚æ­¥å‡½æ•°ã€‚è¿™ä¸ªä»£ç æ®µåˆ›å»ºäº†ä¸€ä¸ª<code>Promise</code>é“¾ï¼Œä¾æ¬¡è°ƒç”¨æ¯ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨æ‰€æœ‰å‡½æ•°éƒ½å®Œæˆåè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚<br><br></p><p>ï¼ˆ2ï¼‰ä½¿ç”¨ Promise é“¾ II<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">doAsyncOperation1</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result1);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">doAsyncOperation2</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result2);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">doAsyncOperation3</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result3</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result3);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€ä¸ª <code>then</code> é‡Œé¢è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œè¿™æ ·åªæœ‰å‰ä¸€ä¸ª <code>Promise</code> çŠ¶æ€å˜ä¸º <code>resolved</code>ï¼Œåä¸€ä¸ª <code>Promise</code> æ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚<br><br></p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ async&#x2F;await<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">runInSequence</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">func1</span>();</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">func2</span>();</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">func3</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;All async operations finished.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runInSequence</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>func1</code>, <code>func2</code> å’Œ <code>func3</code>ä¹Ÿæ˜¯è¿”å›<code>Promise</code>çš„å¼‚æ­¥å‡½æ•°ã€‚<code>runInSequence</code>å‡½æ•°ä½¿ç”¨<code>await</code>å…³é”®å­—ä¾æ¬¡ç­‰å¾…æ¯ä¸ªå‡½æ•°å®Œæˆï¼Œç„¶åè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚<br><br></p><p>ï¼ˆ4ï¼‰ä½¿ç”¨ forâ€¦of å¾ªç¯<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">runInSequence</span>(<span class="params">functions</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> func <span class="keyword">of</span> functions) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">func</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;All async operations finished.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runInSequence</span>([func1, func2, func3]);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­å’Œå‰ä¸€ä¸ªä¾‹å­ç±»ä¼¼ï¼Œä½†æ˜¯<code>runInSequence</code>å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œå¹¶ä½¿ç”¨<code>for...of</code>å¾ªç¯æ¥ä¾æ¬¡è°ƒç”¨å®ƒä»¬ã€‚<br><br></p><p>å¹¶å‘æ‰§è¡Œå¼‚æ­¥æ“ä½œæ˜¯æŒ‡åŒæ—¶å¼€å§‹å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨å®ƒä»¬éƒ½å®Œæˆåè¿›è¡Œä¸‹ä¸€æ­¥ã€‚<br><br></p><p>ï¼ˆ1ï¼‰ä½¿ç”¨ Promise.all()<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="title function_">doAsyncOperation1</span>();</span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="title function_">doAsyncOperation2</span>();</span><br><span class="line"><span class="keyword">let</span> promise3 = <span class="title function_">doAsyncOperation3</span>();</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">[result1, result2, result3]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result1, result2, result3);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸‰ä¸ª<code>promise</code>ä¼šåŒæ—¶å¼€å§‹ï¼Œå¹¶è¡Œæ‰§è¡Œã€‚åªæœ‰å½“è¿™ä¸‰ä¸ªæ“ä½œéƒ½æˆåŠŸå®Œæˆï¼Œ<code>Promise.all()</code> æ‰ä¼šè§£å†³ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆ <code>Promise.all()</code> ä¹Ÿä¼šç«‹å³è¢« <code>reject</code>ï¼Œä¸å†ç­‰å¾…å…¶ä»–æ“ä½œã€‚<br><br></p><p>ï¼ˆ2ï¼‰ä½¿ç”¨ Promise.allSettled()<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="title function_">doAsyncOperation1</span>();</span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="title function_">doAsyncOperation2</span>();</span><br><span class="line"><span class="keyword">let</span> promise3 = <span class="title function_">doAsyncOperation3</span>();</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">allSettled</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">results</span>) =&gt;</span> &#123;</span><br><span class="line">  results.<span class="title function_">forEach</span>(<span class="function">(<span class="params">result, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">status</span> === <span class="string">&quot;fulfilled&quot;</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Operation <span class="subst">$&#123;index + <span class="number">1</span>&#125;</span> succeeded with <span class="subst">$&#123;result.value&#125;</span>`</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Operation <span class="subst">$&#123;index + <span class="number">1</span>&#125;</span> failed with <span class="subst">$&#123;result.reason&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>Promise.allSettled()</code> çš„è¡Œä¸ºä¸ <code>Promise.all()</code> ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä¼šç­‰å¾…æ‰€æœ‰æ“ä½œå®Œæˆï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚è¿™å¯¹äºå¸Œæœ›äº†è§£æ‰€æœ‰æ“ä½œçš„ç»“æœï¼Œè€Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥çš„æ“ä½œå¾ˆæœ‰ç”¨ã€‚<br><br></p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ async&#x2F;await ç»“åˆ for..of<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> urls = [<span class="string">&quot;url1&quot;</span>, <span class="string">&quot;url2&quot;</span>, <span class="string">&quot;url3&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> requests = urls.<span class="title function_">map</span>(<span class="function">(<span class="params">url</span>) =&gt;</span> <span class="title function_">fetch</span>(url));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> request <span class="keyword">of</span> requests) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> request;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•å¯ä»¥å¹¶å‘å¯åŠ¨å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œä½†ç­‰å¾…ç»“æœçš„é¡ºåºä¾ç„¶æ˜¯ä¸²è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§æ–¹æ³•ä¸ä¼šé˜»æ­¢å¼‚æ­¥æ“ä½œçš„å¯åŠ¨ï¼Œä½†ä¼šæŒ‰é¡ºåºç­‰å¾…æ¯ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚</p><hr><h3 id="20-8-é¡¶å±‚-await"><a href="#20-8-é¡¶å±‚-await" class="headerlink" title="20.8 é¡¶å±‚ await"></a>20.8 é¡¶å±‚ await</h3><p>æ—©æœŸçš„è¯­æ³•è§„å®šï¼Œ<code>await</code>å‘½ä»¤åªèƒ½å‡ºç°åœ¨ <code>async</code> å‡½æ•°å†…éƒ¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>await</code>å‘½ä»¤ç‹¬ç«‹ä½¿ç”¨ï¼Œæ²¡æœ‰æ”¾åœ¨ <code>async</code> å‡½æ•°é‡Œé¢ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br><br></p><p>ä» <a href="https://github.com/tc39/proposal-top-level-await">ES6</a> å¼€å§‹ï¼Œå…è®¸åœ¨æ¨¡å—çš„é¡¶å±‚ç‹¬ç«‹ä½¿ç”¨<code>await</code>å‘½ä»¤ï¼Œä½¿å¾—ä¸Šé¢é‚£è¡Œä»£ç ä¸ä¼šæŠ¥é”™äº†ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä½¿ç”¨<code>await</code>è§£å†³æ¨¡å—å¼‚æ­¥åŠ è½½çš„é—®é¢˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// awaiting.js</span></span><br><span class="line"><span class="keyword">let</span> output;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dynamic = <span class="keyword">await</span> <span class="keyword">import</span>(someMission);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">  output = <span class="title function_">someProcess</span>(dynamic.<span class="property">default</span>, data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br><span class="line"><span class="keyword">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡å—<code>awaiting.js</code>çš„è¾“å‡ºå€¼<code>output</code>ï¼Œå–å†³äºå¼‚æ­¥æ“ä½œã€‚æˆ‘ä»¬æŠŠå¼‚æ­¥æ“ä½œåŒ…è£…åœ¨ä¸€ä¸ª <code>async</code> å‡½æ•°é‡Œé¢ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œåªæœ‰ç­‰é‡Œé¢çš„å¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œï¼Œå˜é‡<code>output</code>æ‰ä¼šæœ‰å€¼ï¼Œå¦åˆ™å°±è¿”å›<code>undefined</code>ã€‚<br><br></p><p>ä¸‹é¢æ˜¯åŠ è½½è¿™ä¸ªæ¨¡å—çš„å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// usage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; output &#125; <span class="keyword">from</span> <span class="string">&quot;./awaiting.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outputPlusValue</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> output + value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>));</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>)), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<ins><code>outputPlusValue()</code>çš„æ‰§è¡Œç»“æœï¼Œå®Œå…¨å–å†³äºæ‰§è¡Œçš„æ—¶é—´ã€‚å¦‚æœ<code>awaiting.js</code>é‡Œé¢çš„å¼‚æ­¥æ“ä½œæ²¡æ‰§è¡Œå®Œï¼ŒåŠ è½½è¿›æ¥çš„<code>output</code>çš„å€¼å°±æ˜¯<code>undefined</code></ins>ã€‚<br><br></p><p>ç›®å‰çš„è§£å†³æ–¹æ³•ï¼Œå°±æ˜¯è®©åŸå§‹æ¨¡å—è¾“å‡ºä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œä»è¿™ä¸ª <code>Promise</code> å¯¹è±¡åˆ¤æ–­å¼‚æ­¥æ“ä½œæœ‰æ²¡æœ‰ç»“æŸï¼ˆæ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯å¦ä¸º<code>resolved</code>ï¼Œå³ä½¿ç”¨<code>then</code>çš„å›è°ƒå‡½æ•°ï¼‰ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// awaiting.js</span></span><br><span class="line"><span class="keyword">let</span> output;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dynamic = <span class="keyword">await</span> <span class="keyword">import</span>(someMission);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">  output = <span class="title function_">someProcess</span>(dynamic.<span class="property">default</span>, data);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>awaiting.js</code>é™¤äº†è¾“å‡º<code>output</code>ï¼Œè¿˜é»˜è®¤è¾“å‡ºä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼ˆ<code>async</code> å‡½æ•°ç«‹å³æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼‰ï¼Œä»è¿™ä¸ªå¯¹è±¡åˆ¤æ–­å¼‚æ­¥æ“ä½œæ˜¯å¦ç»“æŸã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// usage.js</span></span><br><span class="line"><span class="keyword">import</span> promise, &#123; output &#125; <span class="keyword">from</span> <span class="string">&quot;./awaiting.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outputPlusValue</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> output + value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>));</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>)), <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå°†<code>awaiting.js</code>å¯¹è±¡çš„è¾“å‡ºï¼Œæ”¾åœ¨<code>promise.then()</code>é‡Œé¢ï¼Œè¿™æ ·å°±èƒ½ä¿è¯å¼‚æ­¥æ“ä½œå®Œæˆä»¥åï¼Œæ‰å»è¯»å–<code>output</code>ã€‚<br><br></p><p>è¿™ç§å†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œ<ins>ç­‰äºè¦æ±‚æ¨¡å—çš„ä½¿ç”¨è€…éµå®ˆä¸€ä¸ªé¢å¤–çš„ä½¿ç”¨åè®®</ins>ï¼ŒæŒ‰ç…§ç‰¹æ®Šçš„æ–¹æ³•ä½¿ç”¨è¿™ä¸ªæ¨¡å—ã€‚ä¸€æ—¦å¿˜è®°ä½¿ç”¨ <code>Promise</code> åŠ è½½ï¼Œè¿™ä¸ªæ¨¡å—çš„ä»£ç å°±å¯èƒ½å‡ºé”™ã€‚<br><br></p><p><ins>é¡¶å±‚çš„<code>await</code>å‘½ä»¤ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä¿è¯åªæœ‰å¼‚æ­¥æ“ä½œå®Œæˆï¼Œæ¨¡å—æ‰ä¼šè¾“å‡ºå€¼</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// awaiting.js</span></span><br><span class="line"><span class="keyword">const</span> dynamic = <span class="keyword">import</span>(someMission);</span><br><span class="line"><span class="keyword">const</span> data = <span class="title function_">fetch</span>(url);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> output = <span class="title function_">someProcess</span>((<span class="keyword">await</span> dynamic).<span class="property">default</span>, <span class="keyword">await</span> data);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<ins>ä¸¤ä¸ªå¼‚æ­¥æ“ä½œåœ¨è¾“å‡ºçš„æ—¶å€™ï¼Œéƒ½åŠ ä¸Šäº†<code>await</code>å‘½ä»¤ã€‚åªæœ‰ç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œè¿™ä¸ªæ¨¡å—æ‰ä¼šè¾“å‡ºå€¼</ins>ã€‚åŠ è½½è¿™ä¸ªæ¨¡å—çš„å†™æ³•å¦‚ä¸‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// usage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; output &#125; <span class="keyword">from</span> <span class="string">&quot;./awaiting.js&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outputPlusValue</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> output + value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>));</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>)), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„å†™æ³•ï¼Œä¸æ™®é€šçš„æ¨¡å—åŠ è½½å®Œå…¨ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡å—çš„ä½¿ç”¨è€…å®Œå…¨ä¸ç”¨å…³å¿ƒï¼Œä¾èµ–æ¨¡å—çš„å†…éƒ¨æœ‰æ²¡æœ‰å¼‚æ­¥æ“ä½œï¼Œæ­£å¸¸åŠ è½½å³å¯ã€‚<br><br></p><p>è¿™æ—¶ï¼Œæ¨¡å—çš„åŠ è½½ä¼šç­‰å¾…ä¾èµ–æ¨¡å—çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œæ‰æ‰§è¡Œåé¢çš„ä»£ç ã€‚æ‰€ä»¥ï¼Œå®ƒæ€»æ˜¯ä¼šå¾—åˆ°æ­£ç¡®çš„<code>output</code>ï¼Œä¸ä¼šå› ä¸ºåŠ è½½æ—¶æœºçš„ä¸åŒï¼Œè€Œå¾—åˆ°ä¸ä¸€æ ·çš„å€¼ã€‚<br><br></p><p>æ³¨æ„ï¼Œé¡¶å±‚<code>await</code>åªèƒ½ç”¨åœ¨ <code>ES6</code> æ¨¡å—ã€‚</p><hr><h2 id="21-Class-çš„åŸºæœ¬è¯­æ³•"><a href="#21-Class-çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="21. Class çš„åŸºæœ¬è¯­æ³•"></a>21. Class çš„åŸºæœ¬è¯­æ³•</h2><h3 id="21-1-ç±»çš„ç”±æ¥"><a href="#21-1-ç±»çš„ç”±æ¥" class="headerlink" title="21.1 ç±»çš„ç”±æ¥"></a>21.1 ç±»çš„ç”±æ¥</h3><p>åœ¨<code>JS</code>ä¸­ï¼Œç”Ÿæˆå®ä¾‹å¯¹è±¡çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Point</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Point</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&quot;, &quot;</span> + <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚ <code>C++</code> å’Œ <code>Java</code>ï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“æ„Ÿåˆ°å›°æƒ‘ã€‚<br><code>ES6</code> å¼•å…¥äº† <code>Class</code>ï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µã€‚é€šè¿‡<code>class</code>å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&quot;, &quot;</span> + <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªâ€œç±»â€ï¼Œ<ins>å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ª<code>constructor()</code>æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ„é€ æ–¹æ³•ï¼Œè€Œ<code>this</code>å…³é”®å­—åˆ™ä»£è¡¨å®ä¾‹å¯¹è±¡</ins>ã€‚æ–°çš„<code>class</code>å†™æ³•è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚<br><br></p><p><code>Point</code>ç±»é™¤äº†æ„é€ æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ª<code>toString()</code>æ–¹æ³•ã€‚æ³¨æ„ï¼Œå®šä¹‰<code>toString()</code>æ–¹æ³•çš„æ—¶å€™ï¼Œå‰é¢ä¸éœ€è¦åŠ ä¸Š<code>function</code>è¿™ä¸ªå…³é”®å­—ï¼Œç›´æ¥æŠŠå‡½æ•°å®šä¹‰æ”¾è¿›å»äº†å°±å¯ä»¥äº†ã€‚<br><br></p><p>ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç›´æ¥å¯¹ç±»ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;(&quot;</span> + <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&quot;, &quot;</span> + <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> point = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">point.<span class="title function_">toString</span>();</span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„<code>prototype</code>å±æ€§ä¸Šé¢ï¼ˆä¹Ÿç§°ä¸ºåŸå‹å¯¹è±¡ï¼‰ã€‚å› æ­¤ï¼Œåœ¨ç±»çš„å®ä¾‹ä¸Šé¢è°ƒç”¨æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">start</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">make</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">model</span> + <span class="string">&quot; engine started.&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car1 = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line">car1.<span class="title function_">start</span>(); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle Talon TSi engine started.&quot;</span></span><br></pre></td></tr></table></figure><p>ç”±äºç±»çš„æ–¹æ³•éƒ½å®šä¹‰åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ã€‚<code>Object.assign()</code>æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³•ã€‚ï¼ˆ<code>class</code> ç›´æ¥æ·»åŠ å°±è¡Œï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span>, &#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">make</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">model</span> + <span class="string">&quot; engine started.&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">stop</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">make</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">model</span> + <span class="string">&quot; engine stopped.&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car1 = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line">car1.<span class="title function_">start</span>(); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle Talon TSi engine started.&quot;</span></span><br><span class="line">car1.<span class="title function_">stop</span>(); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle Talon TSi engine stopped.&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨<code>JS</code>ä¸­ï¼Œæ¯ä¸€ä¸ªå‡½æ•°ï¼ˆåŒ…æ‹¬ç±»ï¼Œå› ä¸ºåœ¨<code>JS</code>ä¸­ç±»ä¹Ÿæ˜¯å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼Œé»˜è®¤æŒ‡å‘å‡½æ•°æœ¬èº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>prototype</code>å¯¹è±¡çš„ <code>constructor</code>å±æ€§ç›´æ¥æŒ‡å‘â€œç±»â€çš„æœ¬èº«ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Car</span>); <span class="comment">// è¾“å‡ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(car.<span class="property">constructor</span> === <span class="title class_">Car</span>); <span class="comment">// è¾“å‡ºï¼štrue</span></span><br></pre></td></tr></table></figure><hr><h3 id="21-2-constructor-æ–¹æ³•"><a href="#21-2-constructor-æ–¹æ³•" class="headerlink" title="21.2 constructor æ–¹æ³•"></a>21.2 constructor æ–¹æ³•</h3><p><code>constructor()</code>æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œ<ins>é€šè¿‡<code>new</code>å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•</ins>ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰<code>constructor()</code>æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„<code>constructor()</code>æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³åœ¨åˆ›å»ºå¯¹è±¡æ—¶è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œæ¯”å¦‚è®¾ç½®å¯¹è±¡çš„å±æ€§ï¼Œé‚£ä¹ˆéœ€è¦æ˜¾å¼å®šä¹‰ä½ è‡ªå·±çš„ <code>constructor()</code>æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">make</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">model</span> + <span class="string">&quot; engine started.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line">car.<span class="title function_">start</span>(); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle Talon TSi engine started.&quot;</span></span><br></pre></td></tr></table></figure><p><code>constructor()</code>æ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³<code>this</code>ï¼‰ï¼Œä½†å®Œå…¨å¯ä»¥æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶è¿”å›å®ƒ</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">make</span>: <span class="string">&quot;Ford&quot;</span>,</span><br><span class="line">      <span class="attr">model</span>: <span class="string">&quot;F-150&quot;</span>,</span><br><span class="line">      <span class="attr">year</span>: <span class="number">2020</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(car.<span class="property">make</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Ford&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>constructor()</code>æ–¹æ³•è¿”å›äº†ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å¯¹è±¡ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬æ‰“å°<code>car.make</code>æ—¶ï¼Œè¾“å‡ºçš„æ˜¯<code>&#39;Ford&#39;</code>è€Œä¸æ˜¯<code>&#39;Eagle&#39;</code>ã€‚</p><hr><h3 id="21-3-ç±»çš„å®ä¾‹"><a href="#21-3-ç±»çš„å®ä¾‹" class="headerlink" title="21.3 ç±»çš„å®ä¾‹"></a>21.3 ç±»çš„å®ä¾‹</h3><p>ç”Ÿæˆç±»çš„å®ä¾‹çš„å†™æ³•ï¼Œä¸<code>ES5</code>å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨<code>new</code>å‘½ä»¤ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> point = <span class="title class_">Point</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="keyword">let</span> point = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p><ins>ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œé™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨<code>this</code>å¯¹è±¡ä¸Šï¼Œé€šè¿‡å®ä¾‹è®¿é—®ï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨<code>class</code>ä¸Šï¼Œé™æ€å±æ€§æˆ–è€…é™æ€æ–¹æ³•ï¼‰</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">    <span class="comment">// å®ä¾‹å±æ€§</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŸå‹æ–¹æ³•</span></span><br><span class="line">  <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">make</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">model</span> + <span class="string">&quot; engine started.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isCar</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj <span class="keyword">instanceof</span> <span class="title class_">Car</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€å±æ€§</span></span><br><span class="line"><span class="title class_">Car</span>.<span class="property">manu</span> = <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(car.<span class="property">make</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle&quot;</span></span><br><span class="line">car.<span class="title function_">start</span>(); <span class="comment">// è¾“å‡ºï¼š&quot;Eagle Talon TSi engine started.&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Car</span>.<span class="title function_">isCar</span>(car)); <span class="comment">// è¾“å‡ºï¼štrue</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Car</span>.<span class="property">manu</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Unknown&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>make</code>ã€<code>model</code>å’Œ<code>year</code>æ˜¯å®ä¾‹å±æ€§ï¼Œ<code>start</code>æ˜¯åŸå‹æ–¹æ³•ï¼Œ<code>isCar</code>æ˜¯é™æ€æ–¹æ³•ï¼Œ<code>manu</code>æ˜¯é™æ€å±æ€§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<code>make</code>å’Œ<code>start</code>å¯ä»¥é€šè¿‡å®ä¾‹<code>car</code>è®¿é—®ï¼Œè€Œ<code>isCar</code>å’Œ<code>manu</code>åªèƒ½é€šè¿‡ç±»å<code>Car</code>è®¿é—®ã€‚<br><br></p><p>ä¸<code>ES5</code>ä¸€æ ·ï¼Œ<ins>ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">p1.<span class="property">__proto__</span> === p2.<span class="property">__proto__</span>;</span><br><span class="line"><span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>å’Œ<code>p2</code>éƒ½æ˜¯<code>Point</code>çš„å®ä¾‹ï¼Œå®ƒä»¬çš„åŸå‹éƒ½æ˜¯<code>Point.prototype</code>ï¼Œæ‰€ä»¥<code>__proto__</code>å±æ€§æ˜¯ç›¸ç­‰çš„ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„<code>__proto__</code>å±æ€§ä¸ºâ€œç±»â€æ·»åŠ æ–¹æ³•ã€‚<br><br></p><p>ç„¶è€Œï¼Œä½¿ç”¨ <code>__proto__</code> é€šå¸¸æ˜¯ä¸æ¨èçš„ï¼Œå› ä¸ºè¿™å¹¶ä¸æ˜¯è¯­è¨€çš„ä¸€ä¸ªæ ‡å‡†ç‰¹æ€§ï¼Œè€Œä¸”åœ¨ä¸åŒçš„ <code>JS</code> ç¯å¢ƒä¸­å¯èƒ½è¡¨ç°ä¸åŒã€‚æ›´å¥½çš„æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨ <code>Object.getPrototypeOf(obj)</code> å‡½æ•°è·å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œæˆ–è€…ä½¿ç”¨ <code>Object.setPrototypeOf(obj, prototype)</code> å‡½æ•°è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">p1.<span class="property">__proto__</span>.<span class="property">printName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Oops&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">printName</span>(); <span class="comment">// &quot;Oops&quot;</span></span><br><span class="line">p2.<span class="title function_">printName</span>(); <span class="comment">// &quot;Oops&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">4</span>, <span class="number">2</span>);</span><br><span class="line">p3.<span class="title function_">printName</span>(); <span class="comment">// &quot;Oops&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç åœ¨<code>p1</code>çš„åŸå‹ä¸Šæ·»åŠ äº†ä¸€ä¸ª<code>printName()</code>æ–¹æ³•ï¼Œç”±äº<code>p1</code>çš„åŸå‹å°±æ˜¯<code>p2</code>çš„åŸå‹ï¼Œå› æ­¤<code>p2</code>ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è€Œä¸”ï¼Œæ­¤åæ–°å»ºçš„å®ä¾‹<code>p3</code>ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚<ins>è¿™æ„å‘³ç€ï¼Œä½¿ç”¨å®ä¾‹çš„<code>__proto__</code>å±æ€§æ”¹å†™åŸå‹ï¼Œå¿…é¡»ç›¸å½“è°¨æ…ï¼Œä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šæ”¹å˜â€œç±»â€çš„åŸå§‹å®šä¹‰ï¼Œå½±å“åˆ°æ‰€æœ‰å®ä¾‹</ins>ã€‚</p><hr><h3 id="21-4-å®ä¾‹å±æ€§çš„æ–°å†™æ³•"><a href="#21-4-å®ä¾‹å±æ€§çš„æ–°å†™æ³•" class="headerlink" title="21.4 å®ä¾‹å±æ€§çš„æ–°å†™æ³•"></a>21.4 å®ä¾‹å±æ€§çš„æ–°å†™æ³•</h3><p><a href="https://github.com/tc39/proposal-class-fields">ES6</a> ä¸ºç±»çš„å®ä¾‹å±æ€§ï¼Œåˆè§„å®šäº†ä¸€ç§æ–°å†™æ³•ã€‚å®ä¾‹å±æ€§ç°åœ¨é™¤äº†å¯ä»¥å®šä¹‰åœ¨<code>constructor()</code>æ–¹æ³•é‡Œé¢çš„<code>this</code>ä¸Šé¢ï¼Œ<ins>ä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»å†…éƒ¨çš„æœ€é¡¶å±‚</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IncreasingCounter</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_count</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting the current value!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_count</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_count</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå®ä¾‹å±æ€§<code>_count</code>å®šä¹‰åœ¨<code>constructor()</code>æ–¹æ³•é‡Œé¢çš„<code>this</code>ä¸Šé¢ã€‚ç°åœ¨çš„æ–°å†™æ³•æ˜¯ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»çš„æœ€é¡¶å±‚ï¼Œå…¶ä»–éƒ½ä¸å˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IncreasingCounter</span> &#123;</span><br><span class="line">  _count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting the current value!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_count</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_count</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå®ä¾‹å±æ€§<code>_count</code>ä¸å–å€¼å‡½æ•°<code>value()</code>å’Œ<code>increment()</code>æ–¹æ³•ï¼Œå¤„äºåŒä¸€ä¸ªå±‚çº§ã€‚è¿™æ—¶ï¼Œä¸éœ€è¦åœ¨å®ä¾‹å±æ€§å‰é¢åŠ ä¸Š<code>this</code>ã€‚<br><br></p><p>æ³¨æ„ï¼Œ<ins>æ–°å†™æ³•å®šä¹‰çš„å±æ€§æ˜¯å®ä¾‹å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡çš„åŸå‹<code>prototype</code>ä¸Šé¢</ins>ã€‚å› ä¸ºå¦‚æœåŸå‹å˜äº†ï¼Œæ¯”å¦‚è¿™é‡Œçš„<code>_count</code>æˆ‘ä»¬åšè®¡æ•°å¤„ç†ï¼Œé‚£ä¹ˆæ‰€æœ‰å®ä¾‹çš„<code>_count</code>å±æ€§éƒ½ä¼šæ”¹å˜ï¼Œè¿™å°±ä¼šå‡ºç°ä¸æˆ‘ä»¬é¢„æœŸä¸åŒçš„ç»“æœã€‚<br><br></p><p>è¿™ç§æ–°å†™æ³•çš„å¥½å¤„æ˜¯ï¼Œæ‰€æœ‰å®ä¾‹å¯¹è±¡è‡ªèº«çš„å±æ€§éƒ½å®šä¹‰åœ¨ç±»çš„å¤´éƒ¨ï¼Œçœ‹ä¸Šå»æ¯”è¾ƒæ•´é½ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºè¿™ä¸ªç±»æœ‰å“ªäº›å®ä¾‹å±æ€§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">foo</span> &#123;</span><br><span class="line">  bar = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  baz = <span class="string">&quot;world&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ï¼Œ<code>foo</code>ç±»æœ‰ä¸¤ä¸ªå®ä¾‹å±æ€§ï¼Œä¸€ç›®äº†ç„¶ã€‚å¦å¤–ï¼Œå†™èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€æ´ã€‚</p><hr><h3 id="21-5-å–å€¼å‡½æ•°-getter-å’Œå­˜å€¼å‡½æ•°-setter"><a href="#21-5-å–å€¼å‡½æ•°-getter-å’Œå­˜å€¼å‡½æ•°-setter" class="headerlink" title="21.5 å–å€¼å‡½æ•° getter å’Œå­˜å€¼å‡½æ•° setter"></a>21.5 å–å€¼å‡½æ•° getter å’Œå­˜å€¼å‡½æ•° setter</h3><p>ä¸<code>ES5</code>ä¸€æ ·ï¼Œ<ins>åœ¨â€œç±»â€çš„å†…éƒ¨å¯ä»¥ä½¿ç”¨<code>get</code>å’Œ<code>set</code>å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸º</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_myProperty</span> = <span class="string">&quot;Default value&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Getter</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">myProperty</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting myProperty&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_myProperty</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Setter</span></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">myProperty</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Setting myProperty&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_myProperty</span> = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">myProperty</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Getting myProperty&quot; å’Œ &quot;Default value&quot;</span></span><br><span class="line">obj.<span class="property">myProperty</span> = <span class="string">&quot;New value&quot;</span>; <span class="comment">// è¾“å‡ºï¼š&quot;Setting myProperty&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">myProperty</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Getting myProperty&quot; å’Œ &quot;New value&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>myProperty</code>å±æ€§æœ‰å¯¹åº”çš„å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œå› æ­¤èµ‹å€¼å’Œè¯»å–è¡Œä¸ºéƒ½è¢«è‡ªå®šä¹‰äº†ã€‚æ³¨æ„ï¼Œ<ins>å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯è®¾ç½®åœ¨å±æ€§çš„ <code>Descriptor</code> å¯¹è±¡ä¸Šçš„</ins>ã€‚</p><hr><h3 id="21-6-Class-è¡¨è¾¾å¼"><a href="#21-6-Class-è¡¨è¾¾å¼" class="headerlink" title="21.6 Class è¡¨è¾¾å¼"></a>21.6 Class è¡¨è¾¾å¼</h3><p>ä¸å‡½æ•°ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‘½åç±»è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">User</span> = <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">user.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º &quot;Hello, my name is Alice&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MyClass</span>); <span class="comment">// æŠ¥é”™ï¼ŒMyClass åœ¨ç±»å¤–éƒ¨ä¸å¯ç”¨</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨è¡¨è¾¾å¼å®šä¹‰äº†ä¸€ä¸ªç±»ã€‚<ins>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç±»çš„åå­—æ˜¯<code>MyClass</code>ï¼Œä½†æ˜¯<code>MyClass</code>åªåœ¨ <code>Class</code> çš„å†…éƒ¨å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»ã€‚åœ¨ <code>Class</code> å¤–éƒ¨ï¼Œè¿™ä¸ªç±»åªèƒ½ç”¨<code>User</code>å¼•ç”¨</ins>ã€‚<br><br></p><p>å¦‚æœç±»çš„å†…éƒ¨æ²¡ç”¨åˆ°çš„è¯ï¼Œå¯ä»¥çœç•¥<code>MyClass</code>ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åç±»è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">User</span> = <span class="keyword">class</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line">user.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º &quot;Hello, my name is Alice&quot;</span></span><br></pre></td></tr></table></figure><p>é‡‡ç”¨ <code>Class</code> è¡¨è¾¾å¼ï¼Œå¯ä»¥å†™å‡ºç«‹å³æ‰§è¡Œçš„ <code>Class</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> (<span class="keyword">class</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"></span><br><span class="line">user.<span class="title function_">sayHello</span>(); <span class="comment">// è¾“å‡º &quot;Hello, my name is Alice&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="21-7-é™æ€æ–¹æ³•"><a href="#21-7-é™æ€æ–¹æ³•" class="headerlink" title="21.7 é™æ€æ–¹æ³•"></a>21.7 é™æ€æ–¹æ³•</h3><p>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•éƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚<ins>å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Š<code>static</code>å…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™å°±ç§°ä¸ºâ€œé™æ€æ–¹æ³•â€</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">classMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">classMethod</span>(); <span class="comment">// &#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">new</span> <span class="title class_">Foo</span>();</span><br><span class="line">foo.<span class="title function_">classMethod</span>();</span><br><span class="line"><span class="comment">// TypeError: foo.classMethod is not a function</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Foo</code>ç±»çš„<code>classMethod</code>æ–¹æ³•å‰æœ‰<code>static</code>å…³é”®å­—ï¼Œè¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>Foo</code>ç±»ä¸Šè°ƒç”¨ï¼Œè€Œä¸æ˜¯åœ¨<code>Foo</code>ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚å¦‚æœåœ¨å®ä¾‹ä¸Šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¡¨ç¤ºä¸å­˜åœ¨è¯¥æ–¹æ³•ã€‚<br><br></p><p>æ³¨æ„ï¼Œ<ins>å¦‚æœé™æ€æ–¹æ³•åŒ…å«<code>this</code>å…³é”®å­—ï¼Œè¿™ä¸ª<code>this</code>æŒ‡çš„æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å®ä¾‹</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">myStaticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">myInstanceMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="title function_">myStaticMethod</span>(); <span class="comment">// è¾“å‡º MyClass [Function: MyClass]ï¼Œthis æŒ‡å‘ç±»</span></span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">instance.<span class="title function_">myInstanceMethod</span>(); <span class="comment">// è¾“å‡º MyClass &#123;&#125;ï¼Œthis æŒ‡å‘å®ä¾‹</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>myStaticMethod</code>æ˜¯<code>MyClass</code>çš„é™æ€æ–¹æ³•ï¼Œ<code>this</code>æŒ‡å‘çš„æ˜¯ç±»<code>MyClass</code>ã€‚<code>myInstanceMethod</code>æ˜¯å®ä¾‹æ–¹æ³•ï¼Œ<code>this</code>æŒ‡å‘çš„æ˜¯ç±»çš„å®ä¾‹ã€‚å¦å¤–ï¼Œä»è¿™ä¸ªä¾‹å­è¿˜å¯ä»¥çœ‹å‡ºï¼Œ<ins>é™æ€æ–¹æ³•å¯ä»¥ä¸éé™æ€æ–¹æ³•é‡å</ins>ã€‚<br><br></p><p><ins>çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿</ins>ã€‚åŒæ—¶ï¼Œ<ins>é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»<code>super</code>å¯¹è±¡ä¸Šè°ƒç”¨çš„</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ParentClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">greeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello from ParentClass&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChildClass</span> <span class="keyword">extends</span> <span class="title class_ inherited__">ParentClass</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ChildClass</span>.<span class="title function_">greeting</span>(); <span class="comment">// è¾“å‡º &quot;Hello from ParentClass&quot;</span></span><br><span class="line"></span><br><span class="line">-----------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ParentClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">greeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello from ParentClass&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChildClass</span> <span class="keyword">extends</span> <span class="title class_ inherited__">ParentClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">greeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">greeting</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello from ChildClass&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ChildClass</span>.<span class="title function_">greeting</span>();</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// &quot;Hello from ParentClass&quot;</span></span><br><span class="line"><span class="comment">// &quot;Hello from ChildClass&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="21-8-ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§"><a href="#21-8-ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§" class="headerlink" title="21.8 ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§"></a>21.8 ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§</h3><p><a href="https://github.com/tc39/proposal-class-fields">ES6</a>ä¸º<code>class</code>æ·»åŠ äº†ç§æœ‰å±æ€§ï¼Œ<ins>æ–¹æ³•æ˜¯åœ¨å±æ€§åä¹‹å‰ä½¿ç”¨<code>#</code>è¡¨ç¤º</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IncreasingCounter</span> &#123;</span><br><span class="line">  #count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting the current value!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#count;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#count++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> <span class="title class_">IncreasingCounter</span>();</span><br><span class="line">counter.#count; <span class="comment">// æŠ¥é”™</span></span><br><span class="line">counter.#count = <span class="number">42</span>; <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>#count</code>å°±æ˜¯ç§æœ‰å±æ€§ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨ï¼ˆ<code>this.#count</code>ï¼‰ã€‚å¦‚æœåœ¨ç±»çš„å¤–éƒ¨ä½¿ç”¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br><br></p><p>å¦å¤–ï¼Œ<ins>ä¸ç®¡åœ¨ç±»çš„å†…éƒ¨æˆ–å¤–éƒ¨ï¼Œè¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„ç§æœ‰å±æ€§ï¼Œéƒ½ä¼šæŠ¥é”™</ins>ã€‚è¿™è·Ÿå…¬å¼€å±æ€§çš„è¡Œä¸ºå®Œå…¨ä¸åŒï¼Œå¦‚æœè¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„å…¬å¼€å±æ€§ï¼Œä¸ä¼šæŠ¥é”™ï¼Œåªä¼šè¿”å›<code>undefined</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IncreasingCounter</span> &#123;</span><br><span class="line">  #count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting the current value!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#myCount; <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#count++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="keyword">new</span> <span class="title class_">IncreasingCounter</span>();</span><br><span class="line">counter.#myCount; <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>#myCount</code>æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„ç§æœ‰å±æ€§ï¼Œä¸ç®¡åœ¨å‡½æ•°å†…éƒ¨æˆ–å¤–éƒ¨ï¼Œè¯»å–è¯¥å±æ€§éƒ½ä¼šå¯¼è‡´æŠ¥é”™ã€‚æ³¨æ„ï¼Œç§æœ‰å±æ€§çš„å±æ€§åå¿…é¡»åŒ…æ‹¬<code>#</code>ï¼Œå¦‚æœä¸å¸¦<code>#</code>ï¼Œä¼šè¢«å½“ä½œå¦ä¸€ä¸ªå±æ€§ã€‚<br><br></p><p><code>ES6</code>ä¸­<ins>ä¸ä»…å¯ä»¥å†™ç§æœ‰å±æ€§ï¼Œè¿˜å¯ä»¥ç”¨æ¥å†™ç§æœ‰æ–¹æ³•</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  #a;</span><br><span class="line">  #b;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#a = a;</span><br><span class="line">    <span class="variable language_">this</span>.#b = b;</span><br><span class="line">  &#125;</span><br><span class="line">  #<span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#a + <span class="variable language_">this</span>.#b;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">printSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#<span class="title function_">sum</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œ<ins>ç§æœ‰å±æ€§ä¹Ÿå¯ä»¥è®¾ç½® <code>getter</code> å’Œ <code>setter</code> æ–¹æ³•</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">  #xValue = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#x);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get #<span class="title function_">x</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#xValue;</span><br><span class="line">  &#125;</span><br><span class="line">  set #<span class="title function_">x</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#xValue = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>#x</code>æ˜¯ä¸€ä¸ªç§æœ‰å±æ€§ï¼Œå®ƒçš„è¯»å†™éƒ½é€šè¿‡<code>get #x()</code>å’Œ<code>set #x()</code>æ“ä½œå¦ä¸€ä¸ªç§æœ‰å±æ€§<code>#xValue</code>æ¥å®Œæˆã€‚<br><br></p><p><ins>ç§æœ‰å±æ€§ä¸é™äºä»<code>this</code>å¼•ç”¨ï¼Œåªè¦æ˜¯åœ¨ç±»çš„å†…éƒ¨ï¼Œå®ä¾‹ä¹Ÿå¯ä»¥å¼•ç”¨ç§æœ‰å±æ€§</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  #privateProperty = <span class="string">&quot;I&#x27;m private&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">checkPrivateProperty</span>(<span class="params">otherInstance</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> otherInstance.#privateProperty;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance1 = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="keyword">const</span> instance2 = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance1.<span class="title function_">checkPrivateProperty</span>(instance2));</span><br><span class="line"><span class="comment">// è¾“å‡º &quot;I&#x27;m private&quot;</span></span><br></pre></td></tr></table></figure><p><ins>ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ä¹Ÿå¯ä»¥åŠ ä¸Š<code>static</code>å…³é”®å­—ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé™æ€çš„ç§æœ‰å±æ€§æˆ–ç§æœ‰æ–¹æ³•</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> #<span class="title function_">privateStaticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello from private static method&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">callPrivateStaticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#<span class="title function_">privateStaticMethod</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MyClass</span>.<span class="title function_">callPrivateStaticMethod</span>());</span><br><span class="line"><span class="comment">// è¾“å‡º &quot;Hello from private static method&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="21-9-in-è¿ç®—ç¬¦"><a href="#21-9-in-è¿ç®—ç¬¦" class="headerlink" title="21.9 in è¿ç®—ç¬¦"></a>21.9 in è¿ç®—ç¬¦</h3><p>å‰é¢è¯´è¿‡ï¼Œ<ins>ç›´æ¥è®¿é—®æŸä¸ªç±»ä¸å­˜åœ¨çš„ç§æœ‰å±æ€§ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è®¿é—®ä¸å­˜åœ¨çš„å…¬å¼€å±æ€§ä¸ä¼šæŠ¥é”™ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç±»çš„å®ä¾‹</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">  #brand;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isC</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      obj.#brand;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œç±»<code>C</code>çš„é™æ€æ–¹æ³•<code>isC()</code>å°±ç”¨æ¥åˆ¤æ–­ï¼ŒæŸä¸ªå¯¹è±¡æ˜¯å¦ä¸º<code>C</code>çš„å®ä¾‹ã€‚å®ƒé‡‡ç”¨çš„æ–¹æ³•å°±æ˜¯ï¼Œè®¿é—®è¯¥å¯¹è±¡çš„ç§æœ‰å±æ€§<code>#brand</code>ã€‚å¦‚æœä¸æŠ¥é”™ï¼Œå°±ä¼šè¿”å›<code>true</code>ï¼›å¦‚æœæŠ¥é”™ï¼Œå°±è¯´æ˜è¯¥å¯¹è±¡ä¸æ˜¯å½“å‰ç±»çš„å®ä¾‹ï¼Œä»è€Œ<code>catch</code>éƒ¨åˆ†è¿”å›<code>false</code>ã€‚<br><br></p><p>å› æ­¤ï¼Œ<code>try...catch</code>ç»“æ„å¯ä»¥ç”¨æ¥åˆ¤æ–­æŸä¸ªç§æœ‰å±æ€§æ˜¯å¦å­˜åœ¨ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„å†™æ³•å¾ˆéº»çƒ¦ï¼Œä»£ç å¯è¯»æ€§å¾ˆå·®ï¼Œ<a href="https://github.com/tc39/proposal-private-fields-in-in">ES6</a> æ”¹è¿›äº†<ins><code>in</code>è¿ç®—ç¬¦ï¼Œä½¿å®ƒä¹Ÿå¯ä»¥ç”¨æ¥åˆ¤æ–­ç§æœ‰å±æ€§ã€‚å®ƒä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123;</span><br><span class="line">  #brand;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isC</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (#brand <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="comment">// ç§æœ‰å±æ€§ #brand å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ç§æœ‰å±æ€§ #foo ä¸å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>in</code>ä¹Ÿå¯ä»¥è·Ÿ<code>this</code>ä¸€èµ·é…åˆä½¿ç”¨ï¼Œç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ‹¥æœ‰æŸä¸ªå±æ€§çš„ï¼Œæ— è®ºè¿™ä¸ªå±æ€§æ˜¯åœ¨å®ä¾‹æœ¬èº«è¿˜æ˜¯åœ¨å®ƒçš„åŸå‹é“¾ä¸­ã€‚æ³¨æ„ï¼Œ<ins>åˆ¤æ–­ç§æœ‰å±æ€§æ—¶ï¼Œ<code>in</code>åªèƒ½ç”¨åœ¨ç±»çš„å†…éƒ¨</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  #foo = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">m</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(#foo <span class="keyword">in</span> <span class="variable language_">this</span>); <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(#bar <span class="keyword">in</span> <span class="variable language_">this</span>); <span class="comment">// false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="21-10-é™æ€å—"><a href="#21-10-é™æ€å—" class="headerlink" title="21.10 é™æ€å—"></a>21.10 é™æ€å—</h3><p>é™æ€å±æ€§çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœå®ƒæœ‰åˆå§‹åŒ–é€»è¾‘ï¼Œè¿™ä¸ªé€»è¾‘è¦ä¹ˆå†™åœ¨ç±»çš„å¤–éƒ¨ï¼Œè¦ä¹ˆå†™åœ¨<code>constructor()</code>æ–¹æ³•é‡Œé¢ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="property">myStaticProperty</span> = <span class="string">&quot;some value&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">MyClass</span>.<span class="property">myStaticProperty</span>) &#123;</span><br><span class="line">      <span class="title class_">MyClass</span>.<span class="property">myStaticProperty</span> = <span class="string">&quot;some value&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>ES2022</code> å¼•å…¥äº†<a href="https://github.com/tc39/proposal-class-static-block">é™æ€å—</a>ï¼ˆ<code>static block</code>ï¼‰ï¼Œå…è®¸åœ¨ç±»çš„å†…éƒ¨è®¾ç½®ä¸€ä¸ªä»£ç å—ï¼Œ<ins>åœ¨ç±»ç”Ÿæˆæ—¶è¿è¡Œä¸”åªè¿è¡Œä¸€æ¬¡ï¼Œä¸»è¦ä½œç”¨æ˜¯å¯¹é™æ€å±æ€§è¿›è¡Œåˆå§‹åŒ–</ins>ã€‚ä»¥åï¼Œ<ins>æ–°å»ºç±»çš„å®ä¾‹æ—¶ï¼Œè¿™ä¸ªå—å°±ä¸è¿è¡Œäº†</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> a;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">a</span> = <span class="title function_">doSomethingThatMightFail</span>();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">a</span> = <span class="string">&quot;default value&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªç±»å…è®¸æœ‰å¤šä¸ªé™æ€å—ï¼Œæ¯ä¸ªé™æ€å—ä¸­åªèƒ½è®¿é—®ä¹‹å‰å£°æ˜çš„é™æ€å±æ€§ã€‚åŒæ—¶ï¼Œé™æ€å—çš„å†…éƒ¨ä¸èƒ½æœ‰<code>return</code>è¯­å¥ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ç±»åæˆ–<code>this</code>ï¼ŒæŒ‡ä»£å½“å‰ç±»ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> prop1;</span><br><span class="line">  <span class="keyword">static</span> prop2;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªé™æ€å—</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">prop1</span> = <span class="string">&quot;value1&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªé™æ€å—</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">prop2</span> = <span class="variable language_">this</span>.<span class="property">prop1</span> + <span class="string">&quot; value2&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MyClass</span>.<span class="property">prop1</span>); <span class="comment">// è¾“å‡º &quot;value1&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MyClass</span>.<span class="property">prop2</span>); <span class="comment">// è¾“å‡º &quot;value1 value2&quot;</span></span><br></pre></td></tr></table></figure><p>é™¤äº†é™æ€å±æ€§çš„åˆå§‹åŒ–ï¼Œé™æ€å—è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯<ins>å°†ç§æœ‰å±æ€§ä¸ç±»çš„å¤–éƒ¨ä»£ç åˆ†äº«</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="comment">// ç§æœ‰å±æ€§</span></span><br><span class="line">  <span class="keyword">static</span> #privateProp = <span class="string">&quot;private value&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨é™æ€å—ä¸­å®šä¹‰å…¬å¼€æ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getPrivateProp</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">MyClass</span>.#privateProp;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MyClass</span>.<span class="title function_">getPrivateProp</span>()); <span class="comment">// è¾“å‡º &quot;private value&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç‰¹æ€§æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥æ§åˆ¶ç±»çš„ç§æœ‰å±æ€§çš„è®¿é—®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å†³å®šå“ªäº›ç§æœ‰å±æ€§åº”è¯¥å¯¹å¤–éƒ¨ä»£ç å¼€æ”¾ï¼Œä»¥åŠåœ¨ä½•ç§æ¡ä»¶ä¸‹å¼€æ”¾ã€‚</p><hr><h3 id="21-11-ç±»çš„æ³¨æ„ç‚¹"><a href="#21-11-ç±»çš„æ³¨æ„ç‚¹" class="headerlink" title="21.11 ç±»çš„æ³¨æ„ç‚¹"></a>21.11 ç±»çš„æ³¨æ„ç‚¹</h3><p><strong>ï¼ˆ1ï¼‰Generator æ–¹æ³•</strong></p><p>å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·<code>*</code>ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ª <code>Generator</code> å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">lass <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  * <span class="title function_">generatorMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;Hello,&#x27;</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;world!&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myInstance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="keyword">const</span> gen = myInstance.<span class="title function_">generatorMethod</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// è¾“å‡º &quot;Hello,&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// è¾“å‡º &quot;world!&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// è¾“å‡º undefined</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰this çš„æŒ‡å‘</strong></p><p>ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰<code>this</code>ï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†ç±»çš„æ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨ï¼Œé‚£ä¹ˆ<code>this</code>å¯èƒ½å°±ä¸å†æŒ‡å‘åŸæ¥çš„å¯¹è±¡äº†ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">myMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myInstance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">myInstance.<span class="title function_">myMethod</span>(); <span class="comment">// MyClassçš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; method &#125; = myInstance;</span><br><span class="line"><span class="title function_">method</span>(); <span class="comment">// undefinedæˆ–è€…å…¨å±€å¯¹è±¡ï¼ˆåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>myMethod</code>æ–¹æ³•ä¸­çš„<code>this</code>é»˜è®¤æŒ‡å‘<code>MyClass</code>çš„å®ä¾‹ã€‚ä½†å½“æˆ‘ä»¬å°†<code>myMethod</code>æ–¹æ³•èµ‹å€¼ç»™å˜é‡<code>method</code>ï¼Œå¹¶å•ç‹¬è°ƒç”¨<code>method()</code>æ—¶ï¼Œ<code>this</code>å°±å˜æˆäº†<code>undefined</code>ã€‚<br><br></p><p>è§£å†³æ–¹æ³•æ˜¯ï¼Œ<ins>åœ¨æ„é€ æ–¹æ³•ä¸­ç»‘å®š<code>this</code></ins>ï¼Œæˆ–è€…ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">myMethod</span> = <span class="variable language_">this</span>.<span class="property">myMethod</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">myMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  myMethod = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="22-Class-çš„ç»§æ‰¿"><a href="#22-Class-çš„ç»§æ‰¿" class="headerlink" title="22. Class çš„ç»§æ‰¿"></a>22. Class çš„ç»§æ‰¿</h2><p><a href="https://es6.ruanyifeng.com/#docs/class-extends">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="22-1-ç®€ä»‹"><a href="#22-1-ç®€ä»‹" class="headerlink" title="22.1 ç®€ä»‹"></a>22.1 ç®€ä»‹</h3><p><ins><code>Class</code> å¯ä»¥é€šè¿‡<code>extends</code>å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè®©å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•</ins>ã€‚<code>extends</code> çš„å†™æ³•æ¯” <code>ES5</code> çš„åŸå‹é“¾ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ColorPoint</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Point</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<ins><code>Point</code>æ˜¯çˆ¶ç±»ï¼Œ<code>ColorPoint</code>æ˜¯å­ç±»ï¼Œå®ƒé€šè¿‡<code>extends</code>å…³é”®å­—ï¼Œç»§æ‰¿äº†<code>Point</code>ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</ins>ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨<code>ColorPoint</code>å†…éƒ¨åŠ ä¸Šä»£ç ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ColorPoint</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(x, y); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„ constructor(x, y)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">color</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">super</span>.<span class="title function_">toString</span>(); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„ toString()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>constructor()</code>æ–¹æ³•å’Œ<code>toString()</code>æ–¹æ³•å†…éƒ¨ï¼Œéƒ½å‡ºç°äº†<code>super</code>å…³é”®å­—ã€‚<ins><code>super</code>åœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºä¸€ä¸ªçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡</ins>ã€‚<br><br></p><p><code>ES6</code> è§„å®šï¼Œ<ins>å­ç±»å¿…é¡»åœ¨<code>constructor()</code>æ–¹æ³•ä¸­è°ƒç”¨<code>super()</code></ins>ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„<code>this</code>å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†æ·»åŠ å­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨<code>super()</code>æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°è‡ªå·±çš„<code>this</code>å¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ColorPoint</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cp = <span class="keyword">new</span> <span class="title class_">ColorPoint</span>(); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå­ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸€å®šè¦è°ƒç”¨<code>super()</code>ï¼ŸåŸå› å°±åœ¨äº <code>ES6</code> çš„ç»§æ‰¿æœºåˆ¶ï¼Œä¸ <code>ES5</code> å®Œå…¨ä¸åŒã€‚</p><ul><li><code>ES5</code> çš„ç»§æ‰¿æœºåˆ¶ï¼Œæ˜¯å…ˆåˆ›é€ ä¸€ä¸ªç‹¬ç«‹çš„å­ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°è¿™ä¸ªå¯¹è±¡ä¸Šé¢ï¼Œå³â€œå®ä¾‹åœ¨å‰ï¼Œç»§æ‰¿åœ¨åâ€ã€‚</li><li><code>ES6</code> çš„ç»§æ‰¿æœºåˆ¶ï¼Œåˆ™æ˜¯å…ˆå°†çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°ä¸€ä¸ªç©ºçš„å¯¹è±¡ä¸Šé¢ï¼Œç„¶åå†å°†è¯¥å¯¹è±¡ä½œä¸ºå­ç±»çš„å®ä¾‹ï¼Œå³â€œç»§æ‰¿åœ¨å‰ï¼Œå®ä¾‹åœ¨åâ€ã€‚</li></ul><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>ES6</code> çš„ç»§æ‰¿å¿…é¡»å…ˆè°ƒç”¨<code>super()</code>æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸€æ­¥ä¼šç”Ÿæˆä¸€ä¸ªç»§æ‰¿çˆ¶ç±»çš„<code>this</code>å¯¹è±¡ï¼Œæ²¡æœ‰è¿™ä¸€æ­¥å°±æ— æ³•ç»§æ‰¿çˆ¶ç±»ã€‚<br><br></p><p>æ³¨æ„ï¼Œè¿™æ„å‘³ç€<ins>æ–°å»ºå­ç±»å®ä¾‹æ—¶ï¼Œçˆ¶ç±»çš„æ„é€ å‡½æ•°å¿…å®šä¼šå…ˆè¿è¡Œä¸€æ¬¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bar = <span class="keyword">new</span> <span class="title class_">Bar</span>();</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå­ç±» <code>Bar</code> æ–°å»ºå®ä¾‹æ—¶ï¼Œä¼šè¾“å‡º<code>1</code>å’Œ<code>2</code>ã€‚åŸå› å°±æ˜¯å­ç±»æ„é€ å‡½æ•°è°ƒç”¨<code>super()</code>æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ã€‚<br><br></p><p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œ<ins>åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨<code>super()</code>ä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨<code>this</code>å…³é”®å­—</ins>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼Œå¿…é¡»å…ˆå®Œæˆçˆ¶ç±»çš„ç»§æ‰¿ï¼Œåªæœ‰<code>super()</code>æ–¹æ³•æ‰èƒ½è®©å­ç±»å®ä¾‹ç»§æ‰¿çˆ¶ç±»ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Parent&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Error: Must call super constructor in derived class before accessing &#x27;this&#x27;</span></span><br><span class="line">    <span class="comment">// console.log(this.name);</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">super</span>(); <span class="comment">// æ­£ç¡®åˆå§‹åŒ–å­ç±»å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// è¾“å‡º: &#x27;Parent&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Child</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»çš„<code>constructor()</code>æ–¹æ³•æ²¡æœ‰è°ƒç”¨<code>super()</code>ä¹‹å‰ï¼Œå°±ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œç»“æœæŠ¥é”™ï¼Œè€Œæ”¾åœ¨<code>super()</code>ä¹‹åå°±æ˜¯æ­£ç¡®çš„ã€‚<br><br></p><p><ins>å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰<code>constructor()</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šé»˜è®¤æ·»åŠ ï¼Œå¹¶ä¸”é‡Œé¢ä¼šè°ƒç”¨<code>super()</code></ins>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå­ç±»éƒ½æœ‰<code>constructor()</code>æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼å®šä¹‰ constructor()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&quot;John&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="property">name</span>); <span class="comment">// è¾“å‡º: &#x27;John&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ‰äº†å­ç±»çš„å®šä¹‰ï¼Œå°±å¯ä»¥ç”Ÿæˆå­ç±»çš„å®ä¾‹äº†ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">child <span class="keyword">instanceof</span> <span class="title class_">Child</span>; <span class="comment">// true</span></span><br><span class="line">child <span class="keyword">instanceof</span> <span class="title class_">Parent</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<ins>å¦‚æœçˆ¶ç±»å’Œå­ç±»æœ‰åŒåå±æ€§ï¼Œå­ç±»çš„å±æ€§ä¼šè¦†ç›–çˆ¶ç±»çš„å±æ€§</ins>ã€‚è¿™æ˜¯å› ä¸ºåœ¨å­ç±»ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Parent&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Child&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child.<span class="title function_">showName</span>(); <span class="comment">// è¾“å‡º: &#x27;Child&#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="22-2-ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ç»§æ‰¿"><a href="#22-2-ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ç»§æ‰¿" class="headerlink" title="22.2 ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ç»§æ‰¿"></a>22.2 ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ç»§æ‰¿</h3><p><ins>çˆ¶ç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œé™¤äº†ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•</ins>ã€‚å­ç±»æ— æ³•ç»§æ‰¿çˆ¶ç±»çš„ç§æœ‰å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œ<ins>ç§æœ‰å±æ€§åªèƒ½åœ¨å®šä¹‰å®ƒçš„ <code>class</code> é‡Œé¢ä½¿ç”¨</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  #p = <span class="number">1</span>;</span><br><span class="line">  #<span class="title function_">m</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.#p); <span class="comment">// æŠ¥é”™</span></span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">m</span>(); <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ<ins>çˆ¶ç±»å®šä¹‰äº†ç§æœ‰å±æ€§çš„è¯»å†™æ–¹æ³•ï¼Œå­ç±»å°±å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œè¯»å†™ç§æœ‰å±æ€§</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  #p = <span class="number">1</span>;</span><br><span class="line">  <span class="title function_">getP</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#p;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bar</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">getP</span>()); <span class="comment">// 1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>getP()</code>æ˜¯çˆ¶ç±»ç”¨æ¥è¯»å–ç§æœ‰å±æ€§çš„æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•è¯»åˆ°çˆ¶ç±»çš„ç§æœ‰å±æ€§ã€‚</p><hr><h3 id="22-3-é™æ€å±æ€§å’Œé™æ€æ–¹æ³•çš„ç»§æ‰¿"><a href="#22-3-é™æ€å±æ€§å’Œé™æ€æ–¹æ³•çš„ç»§æ‰¿" class="headerlink" title="22.3 é™æ€å±æ€§å’Œé™æ€æ–¹æ³•çš„ç»§æ‰¿"></a>22.3 é™æ€å±æ€§å’Œé™æ€æ–¹æ³•çš„ç»§æ‰¿</h3><p><ins>çˆ¶ç±»çš„é™æ€å±æ€§å’Œé™æ€æ–¹æ³•ï¼Œä¹Ÿä¼šè¢«å­ç±»ç»§æ‰¿</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">B.<span class="title function_">hello</span>(); <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>hello()</code>æ˜¯<code>A</code>ç±»çš„é™æ€æ–¹æ³•ï¼Œ<code>B</code>ç»§æ‰¿<code>A</code>ï¼Œä¹Ÿç»§æ‰¿äº†<code>A</code>çš„é™æ€æ–¹æ³•ã€‚<br><br></p><p>æ³¨æ„ï¼Œ<ins>é™æ€å±æ€§æ˜¯é€šè¿‡<a href="https://vue3js.cn/interview/JavaScript/copy.html">è½¯æ‹·è´</a>å®ç°ç»§æ‰¿çš„</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> foo = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    B.<span class="property">foo</span>--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br><span class="line">B.<span class="property">foo</span>; <span class="comment">// 99</span></span><br><span class="line">A.<span class="property">foo</span>; <span class="comment">// 100</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>foo</code>æ˜¯ <code>A</code> ç±»çš„é™æ€å±æ€§ï¼Œ<code>B</code> ç±»ç»§æ‰¿äº† <code>A</code> ç±»ï¼Œå› æ­¤ä¹Ÿç»§æ‰¿äº†è¿™ä¸ªå±æ€§ã€‚ä½†æ˜¯ï¼Œ<ins>åœ¨ <code>B</code> ç±»å†…éƒ¨æ“ä½œ<code>B.foo</code>è¿™ä¸ªé™æ€å±æ€§ï¼Œå½±å“ä¸åˆ°<code>A.foo</code></ins>ï¼ŒåŸå› å°±æ˜¯ <code>B</code> ç±»ç»§æ‰¿é™æ€å±æ€§æ—¶ï¼Œä¼šé‡‡ç”¨æµ…æ‹·è´ï¼Œæ‹·è´çˆ¶ç±»é™æ€å±æ€§çš„å€¼ï¼Œå› æ­¤<code>A.foo</code>å’Œ<code>B.foo</code>æ˜¯ä¸¤ä¸ªå½¼æ­¤ç‹¬ç«‹çš„å±æ€§ã€‚<br><br></p><p>ä½†æ˜¯ï¼Œç”±äºè¿™ç§æ‹·è´æ˜¯æµ…æ‹·è´ï¼Œ<ins>å¦‚æœçˆ¶ç±»çš„é™æ€å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå­ç±»çš„é™æ€å±æ€§ä¹Ÿä¼šæŒ‡å‘è¿™ä¸ªå¯¹è±¡</ins>ï¼Œå› ä¸ºæµ…æ‹·è´åªä¼šæ‹·è´å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> foo = &#123; <span class="attr">n</span>: <span class="number">100</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    B.<span class="property">foo</span>.<span class="property">n</span>--;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br><span class="line">B.<span class="property">foo</span>.<span class="property">n</span>; <span class="comment">// 99</span></span><br><span class="line">A.<span class="property">foo</span>.<span class="property">n</span>; <span class="comment">// 99</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>A.foo</code>çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæµ…æ‹·è´å¯¼è‡´<code>B.foo</code>å’Œ<code>A.foo</code>æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå­ç±»<code>B</code>ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å±æ€§å€¼ï¼Œä¼šå½±å“åˆ°çˆ¶ç±»<code>A</code>ã€‚</p><hr><h3 id="22-4-super-å…³é”®å­—"><a href="#22-4-super-å…³é”®å­—" class="headerlink" title="22.4 super å…³é”®å­—"></a>22.4 super å…³é”®å­—</h3><p><code>super</code>è¿™ä¸ªå…³é”®å­—ï¼Œæ—¢å¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ã€‚<br><br></p><p>ï¼ˆ1ï¼‰å½“<code>super</code><ins>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨<code>super()</code>çš„ä½œç”¨æ˜¯å½¢æˆå­ç±»çš„<code>this</code>å¯¹è±¡ï¼ŒæŠŠçˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•æ”¾åˆ°è¿™ä¸ª<code>this</code>å¯¹è±¡ä¸Šé¢ã€‚å­ç±»åœ¨è°ƒç”¨<code>super()</code>ä¹‹å‰ï¼Œæ˜¯æ²¡æœ‰<code>this</code>å¯¹è±¡çš„ï¼Œä»»ä½•å¯¹<code>this</code>çš„æ“ä½œéƒ½è¦æ”¾åœ¨<code>super()</code>çš„åé¢ã€‚<br><br></p><p>æ³¨æ„ï¼Œ<ins>è¿™é‡Œçš„<code>super</code>è™½ç„¶ä»£è¡¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å› ä¸ºè¿”å›çš„æ˜¯å­ç±»çš„<code>this</code>ï¼ˆå³å­ç±»çš„å®ä¾‹å¯¹è±¡ï¼‰ï¼Œæ‰€ä»¥<code>super</code>å†…éƒ¨çš„<code>this</code>ä»£è¡¨å­ç±»çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯çˆ¶ç±»çš„å®ä¾‹</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span>.<span class="property">target</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title function_">A</span>(); <span class="comment">// A</span></span><br><span class="line"><span class="keyword">new</span> <span class="title function_">B</span>(); <span class="comment">// B</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>new.target</code>æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>super()</code>æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»<code>B</code>çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±»<code>A</code>çš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>super()</code>å†…éƒ¨çš„<code>this</code>æŒ‡å‘çš„æ˜¯<code>B</code>ã€‚<br><br></p><p>ä¸è¿‡ï¼Œ<ins>ç”±äº<code>super()</code>åœ¨å­ç±»æ„é€ æ–¹æ³•ä¸­æ‰§è¡Œæ—¶ï¼Œå­ç±»çš„å±æ€§å’Œæ–¹æ³•è¿˜æ²¡æœ‰ç»‘å®šåˆ°<code>this</code>ï¼Œæ‰€ä»¥å¦‚æœå­˜åœ¨åŒåå±æ€§ï¼Œæ­¤æ—¶æ‹¿åˆ°çš„æ˜¯çˆ¶ç±»çš„å±æ€§</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  name = <span class="string">&quot;A&quot;</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My name is &quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  name = <span class="string">&quot;B&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="title function_">B</span>(); <span class="comment">// My name is A</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæœ€åä¸€è¡Œè¾“å‡ºçš„æ˜¯<code>A</code>ï¼Œè€Œä¸æ˜¯<code>B</code>ï¼ŒåŸå› å°±åœ¨äº<code>super()</code>æ‰§è¡Œæ—¶ï¼Œ<code>B</code>çš„<code>name</code>å±æ€§è¿˜æ²¡æœ‰ç»‘å®šåˆ°<code>this</code>ï¼Œæ‰€ä»¥<code>this.name</code>æ‹¿åˆ°çš„æ˜¯<code>A</code>ç±»çš„<code>name</code>å±æ€§ã€‚<br><br></p><p><ins>ä½œä¸ºå‡½æ•°æ—¶ï¼Œ<code>super()</code>åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­</ins>ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹å°±ä¼šæŠ¥é”™ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">m</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(); <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å½“<code>super</code><ins>ä½œä¸ºå¯¹è±¡æ—¶ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œåœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Parent&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello from Parent class&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Child&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">greet</span>(); <span class="comment">// ä½¿ç”¨superåœ¨æ™®é€šæ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> from child class`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">sayHello</span>(); <span class="comment">// åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨superè°ƒç”¨çˆ¶ç±»é™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello from Child class&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">c.<span class="title function_">greet</span>();</span><br><span class="line"><span class="title class_">Child</span>.<span class="title function_">sayHello</span>();</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>super</code>æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œé‚£ä¹ˆå®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§ï¼ˆå³å®šä¹‰åœ¨<code>constructor</code>é‡Œï¼‰ï¼Œæ˜¯æ— æ³•é€šè¿‡<code>super</code>è°ƒç”¨çš„ã€‚è¿™æ—¶å€™æƒ³åœ¨å­ç±»ä¸­è®¿é—®åˆ°çˆ¶ç±»å®ä¾‹ä¸Šçš„å±æ€§ï¼Œåˆ™éœ€è¦åœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥è¿”å›è¿™ä¸ªå±æ€§ï¼Œç„¶ååœ¨å­ç±»ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Parent&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">super</span>.<span class="property">name</span>); <span class="comment">// TypeError ...</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">super</span>.<span class="title function_">getName</span>()); <span class="comment">// &#x27;Parent&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><ins>åœ¨å­ç±»æ™®é€šæ–¹æ³•ä¸­é€šè¿‡<code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹</ins>ã€‚æ‰€ä»¥é€šè¿‡<code>super</code>å¯¹æŸä¸ªå±æ€§èµ‹å€¼ï¼Œ<code>super</code>å°±æ˜¯<code>this</code>ï¼Œèµ‹å€¼çš„å±æ€§ä¼šå˜æˆå­ç±»å®ä¾‹çš„å±æ€§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">m</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">print</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br><span class="line">b.<span class="title function_">m</span>(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.print()</code>è™½ç„¶è°ƒç”¨çš„æ˜¯<code>A.prototype.print()</code>ï¼Œä½†æ˜¯<code>A.prototype.print()</code>å†…éƒ¨çš„<code>this</code>æŒ‡å‘å­ç±»<code>B</code>çš„å®ä¾‹ï¼Œå¯¼è‡´è¾“å‡ºçš„æ˜¯<code>2</code>ï¼Œè€Œä¸æ˜¯<code>1</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="property">x</span> = <span class="number">3</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">super</span>.<span class="property">x</span>); <span class="comment">// undefined</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>); <span class="comment">// 3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.x</code>èµ‹å€¼ä¸º<code>3</code>ï¼Œè¿™æ—¶ç­‰åŒäºå¯¹<code>this.x</code>èµ‹å€¼ä¸º<code>3</code>ã€‚è€Œå½“è¯»å–<code>super.x</code>çš„æ—¶å€™ï¼Œè¯»çš„æ˜¯<code>A.prototype.x</code>ï¼Œæ‰€ä»¥è¿”å›<code>undefined</code>ã€‚<br><br></p><p><ins>å¦‚æœ<code>super</code>ä½œä¸ºå¯¹è±¡ï¼Œç”¨åœ¨é™æ€æ–¹æ³•ä¹‹ä¸­ï¼Œè¿™æ—¶<code>super</code>å°†æŒ‡å‘çˆ¶ç±»ï¼Œè€Œä¸æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">myMethod</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;static&quot;</span>, msg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">myMethod</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;instance&quot;</span>, msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">myMethod</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">myMethod</span>(msg);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">myMethod</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">myMethod</span>(msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child</span>.<span class="title function_">myMethod</span>(<span class="number">1</span>); <span class="comment">// static 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child.<span class="title function_">myMethod</span>(<span class="number">2</span>); <span class="comment">// instance 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super</code>åœ¨é™æ€æ–¹æ³•ä¹‹ä¸­æŒ‡å‘çˆ¶ç±»ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¹‹ä¸­æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚<br><br></p><p>å¦å¤–ï¼Œ<ins>åœ¨å­ç±»çš„é™æ€æ–¹æ³•ä¸­é€šè¿‡<code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘å½“å‰çš„å­ç±»ï¼Œè€Œä¸æ˜¯å­ç±»çš„å®ä¾‹</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">m</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">print</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B.<span class="property">x</span> = <span class="number">3</span>;</span><br><span class="line">B.<span class="title function_">m</span>(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé™æ€æ–¹æ³•<code>B.m</code>é‡Œé¢ï¼Œ<code>super.print</code>æŒ‡å‘çˆ¶ç±»çš„é™æ€æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„<code>this</code>æŒ‡å‘çš„æ˜¯<code>B</code>ï¼Œè€Œä¸æ˜¯<code>B</code>çš„å®ä¾‹ã€‚</p><hr><h3 id="22-5-ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§"><a href="#22-5-ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§" class="headerlink" title="22.5 ç±»çš„ prototype å±æ€§å’Œ __proto__ å±æ€§"></a>22.5 ç±»çš„ prototype å±æ€§å’Œ __proto__ å±æ€§</h3><p>å¤§å¤šæ•°æµè§ˆå™¨çš„ <code>ES5</code> å®ç°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§ã€‚<code>Class</code> ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰<code>prototype</code>å±æ€§å’Œ<code>__proto__</code>å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚</p><ul><li>å­ç±»çš„<code>__proto__</code>å±æ€§ï¼Œ<ins>è¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»</ins>ã€‚</li><li>å­ç±»<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§ï¼Œ<ins>è¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>å±æ€§</ins>ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">B.<span class="property">__proto__</span> === A; <span class="comment">// true</span></span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === A.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<ins>å­ç±»<code>B</code>çš„<code>__proto__</code>å±æ€§æŒ‡å‘çˆ¶ç±»<code>A</code>ï¼Œå­ç±»<code>B</code>çš„<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§æŒ‡å‘çˆ¶ç±»<code>A</code>çš„<code>prototype</code>å±æ€§</ins>ã€‚</p><p>è¿™ä¸¤æ¡ç»§æ‰¿é“¾ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼š</p><ul><li>ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹ï¼ˆ<code>__proto__</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆ<code>A</code>ï¼‰ã€‚</li><li>ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰çš„å®ä¾‹ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">B.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(A.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> = A.<span class="property"><span class="keyword">prototype</span></span>;</span><br></pre></td></tr></table></figure><hr><h3 id="22-6-åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"><a href="#22-6-åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿" class="headerlink" title="22.6 åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"></a>22.6 åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿</h3><p><code>ES6</code> å…è®¸ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°å®šä¹‰å­ç±»ï¼Œå› ä¸º <code>ES6</code> æ˜¯å…ˆæ–°å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°<code>this</code>ï¼Œä½¿å¾—çˆ¶ç±»çš„æ‰€æœ‰è¡Œä¸ºéƒ½å¯ä»¥ç»§æ‰¿ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»§æ‰¿<code>Array</code>çš„ä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="title class_">MyArray</span>();</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line">arr.<span class="property">length</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">arr.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">arr[<span class="number">0</span>]; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª<code>MyArray</code>ç±»ï¼Œç»§æ‰¿äº†<code>Array</code>æ„é€ å‡½æ•°ï¼Œå› æ­¤å°±å¯ä»¥ä»<code>MyArray</code>ç”Ÿæˆæ•°ç»„çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€ï¼Œ<code>ES6</code> å¯ä»¥è‡ªå®šä¹‰åŸç”Ÿæ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚<code>Array</code>ã€<code>String</code>ç­‰ï¼‰çš„å­ç±»ï¼Œè¿™æ˜¯ <code>ES5</code> æ— æ³•åšåˆ°çš„ã€‚<br><br></p><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œ<code>extends</code>å…³é”®å­—ä¸ä»…å¯ä»¥ç”¨æ¥ç»§æ‰¿ç±»ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚å› æ­¤å¯ä»¥åœ¨åŸç”Ÿæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ã€‚ä¸‹é¢å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå¸¦ç‰ˆæœ¬åŠŸèƒ½çš„æ•°ç»„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VersionedArray</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Array</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">history</span> = [[]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">commit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="title function_">slice</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">revert</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">length</span>, ...<span class="variable language_">this</span>.<span class="property">history</span>[<span class="variable language_">this</span>.<span class="property">history</span>.<span class="property">length</span> - <span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title class_">VersionedArray</span>();</span><br><span class="line"></span><br><span class="line">x.<span class="title function_">push</span>(<span class="number">1</span>);</span><br><span class="line">x.<span class="title function_">push</span>(<span class="number">2</span>);</span><br><span class="line">x; <span class="comment">// [1, 2]</span></span><br><span class="line">x.<span class="property">history</span>; <span class="comment">// [[]]</span></span><br><span class="line"></span><br><span class="line">x.<span class="title function_">commit</span>();</span><br><span class="line">x.<span class="property">history</span>; <span class="comment">// [[], [1, 2]]</span></span><br><span class="line"></span><br><span class="line">x.<span class="title function_">push</span>(<span class="number">3</span>);</span><br><span class="line">x; <span class="comment">// [1, 2, 3]</span></span><br><span class="line">x.<span class="property">history</span>; <span class="comment">// [[], [1, 2]]</span></span><br><span class="line"></span><br><span class="line">x.<span class="title function_">revert</span>();</span><br><span class="line">x; <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>VersionedArray</code>ä¼šé€šè¿‡<code>commit</code>æ–¹æ³•ï¼Œå°†è‡ªå·±çš„å½“å‰çŠ¶æ€ç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬å¿«ç…§ï¼Œå­˜å…¥<code>history</code>å±æ€§ã€‚<code>revert</code>æ–¹æ³•ç”¨æ¥å°†æ•°ç»„é‡ç½®ä¸ºæœ€æ–°ä¸€æ¬¡ä¿å­˜çš„ç‰ˆæœ¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ<code>VersionedArray</code>ä¾ç„¶æ˜¯ä¸€ä¸ªæ™®é€šæ•°ç»„ï¼Œæ‰€æœ‰åŸç”Ÿçš„æ•°ç»„æ–¹æ³•éƒ½å¯ä»¥åœ¨å®ƒä¸Šé¢è°ƒç”¨ã€‚<br><br></p><p>æ³¨æ„ï¼Œç»§æ‰¿<code>Object</code>çš„å­ç±»ï¼Œæœ‰ä¸€ä¸ª<a href="https://stackoverflow.com/questions/36203614/super-does-not-pass-arguments-when-instantiating-a-class-extended-from-object">è¡Œä¸ºå·®å¼‚</a>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NewObj</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Object</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">NewObj</span>(&#123; <span class="attr">attr</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">o.<span class="property">attr</span> === <span class="literal">true</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>NewObj</code>ç»§æ‰¿äº†<code>Object</code>ï¼Œä½†æ˜¯æ— æ³•é€šè¿‡<code>super</code>æ–¹æ³•å‘çˆ¶ç±»<code>Object</code>ä¼ å‚ã€‚è¿™æ˜¯å› ä¸º <code>ES6</code> æ”¹å˜äº†<code>Object</code>æ„é€ å‡½æ•°çš„è¡Œä¸ºï¼Œä¸€æ—¦å‘ç°<code>Object</code>æ–¹æ³•ä¸æ˜¯é€šè¿‡<code>new Object()</code>è¿™ç§å½¢å¼è°ƒç”¨ï¼Œ<code>ES6</code> è§„å®š<code>Object</code>æ„é€ å‡½æ•°ä¼šå¿½ç•¥å‚æ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6å­¦ä¹ ç¬”è®° â€¢ ä¸­</title>
      <link href="/posts/9413d22e.html"/>
      <url>/posts/9413d22e.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ¬è¯»ä¹¦ç¬”è®°èŠ‚æ˜¯é’ˆå¯¹é˜®ä¸€å³°ç¼–å†™çš„ <a href="https://es6.ruanyifeng.com/">ã€ŠECMAScript 6 å…¥é—¨æ•™ç¨‹ã€‹</a>çš„æ€»ç»“ã€‚é€‚åˆå·²ç»æŒæ¡ <code>ES5</code> çš„è¯»è€…ï¼Œç”¨æ¥äº†è§£è¿™é—¨è¯­è¨€çš„æœ€æ–°å‘å±•ã€‚ç¬”è®°å†…å®¹ä»…åŒ…æ‹¬æ—¥å¸¸å¼€å‘ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æ¦‚å¿µã€‚</p></blockquote><hr><h2 id="16-Promise-å¯¹è±¡"><a href="#16-Promise-å¯¹è±¡" class="headerlink" title="16. Promise å¯¹è±¡"></a>16. Promise å¯¹è±¡</h2><h3 id="16-1-äº‹ä»¶å¾ªç¯"><a href="#16-1-äº‹ä»¶å¾ªç¯" class="headerlink" title="16.1 äº‹ä»¶å¾ªç¯"></a>16.1 äº‹ä»¶å¾ªç¯</h3><p>æ¨èé˜…è¯»ï¼š<a href="https://segmentfault.com/a/1190000038928521">js äº‹ä»¶å¾ªç¯æœºåˆ¶ event-loop</a><br><br></p><p><code>JavaScript</code>æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä»£ç æŒ‰é¡ºåºæ‰§è¡Œï¼Œä½†ä¸ºäº†å¤„ç†è€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ï¼‰ï¼Œå¼•å…¥äº†å¼‚æ­¥æœºåˆ¶ã€‚</p><p>æ‰§è¡Œé¡ºåºåŸåˆ™: å…ˆåŒæ­¥ï¼Œå†å¼‚æ­¥ï¼›å¼‚æ­¥ä¸­å…ˆå¾®ä»»åŠ¡ï¼Œåå®ä»»åŠ¡</p><ul><li>å®ä»»åŠ¡ï¼ˆ<code>macro-task</code>ï¼‰ï¼š<code>setTimeout</code>ã€<code>setInterval</code>ã€æ•´ä½“ä»£ç <code>script</code></li><li>å¾®ä»»åŠ¡ï¼ˆ<code>micro-task</code>ï¼‰ï¼š<code>Promise.then/catch</code>ã€<code>process.nextTick</code></li></ul><p>äº‹ä»¶å¾ªç¯æµç¨‹</p><ul><li><ol><li>åŒæ­¥ä»»åŠ¡ç›´æ¥åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</li></ol></li><li><ol start="2"><li>å¼‚æ­¥ä»»åŠ¡è¿›å…¥<code>Event Table</code>æ³¨å†Œï¼Œå®Œæˆåè¿›å…¥<code>Event Queue</code></li></ol></li><li><ol start="3"><li>ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä»<code>Event Queue</code>è¯»å–ä»»åŠ¡æ‰§è¡Œ</li></ol></li><li><ol start="4"><li>æ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°±ä¼šæ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡</li></ol></li><li><ol start="5"><li>ç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¾ªç¯å¾€å¤</li></ol></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);  <span class="comment">// åŒæ­¥ï¼Œç«‹å³æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>);  <span class="comment">// å®ä»»åŠ¡</span></span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3&#x27;</span>);  <span class="comment">// å¾®ä»»åŠ¡</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4&#x27;</span>);  <span class="comment">// åŒæ­¥ï¼Œç«‹å³æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºé¡ºåºï¼š1 â†’ 4 â†’ 3 â†’ 2</p></blockquote><ul><li><code>setTimeout(fn, 0)</code> ä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶æ‰§è¡Œ</li><li><code>new Promise</code> çš„æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œåªæœ‰ <code>.then()</code> æ˜¯å¼‚æ­¥çš„</li><li>æ¯è½®å¾ªç¯éƒ½æ˜¯ï¼šæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ â†’ æ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡ â†’ ä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li></ul><hr><h3 id="16-2-Promise-çš„å«ä¹‰"><a href="#16-2-Promise-çš„å«ä¹‰" class="headerlink" title="16.2 Promise çš„å«ä¹‰"></a>16.2 Promise çš„å«ä¹‰</h3><p><code>Promise</code> æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„<a href="https://segmentfault.com/a/1190000021942060">å›è°ƒå‡½æ•°</a>å’Œ<a href="https://zh.javascript.info/introduction-browser-events">äº‹ä»¶</a>ï¼Œæ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç±»ä¼¼äºä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚<br><br></p><p><code>Promise</code>å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹</p><ul><li><ins><code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“</ins>ã€‚<code>Promise</code>å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰å’Œ<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚<ins>åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€</ins>ã€‚</li><li><ins><code>Promise</code>å¯¹è±¡ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜</ins>ã€‚<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»<code>pending</code>å˜ä¸º<code>fulfilled</code>å’Œä»<code>pending</code>å˜ä¸º<code>rejected</code>ã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œè¿™æ—¶å°±ç§°ä¸º <code>resolved</code>ï¼ˆå·²å®šå‹ï¼‰ã€‚</li></ul><p><code>Promise</code>å¯¹è±¡çš„å¥½å¤„ï¼Œæ˜¯å¯ä»¥<ins>å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°</ins>ã€‚æ­¤å¤–ï¼Œ<code>Promise</code>å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</p><p><code>Promise</code>ä¹Ÿæœ‰ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œ<ins>æ— æ³•å–æ¶ˆ<code>Promise</code>ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆ</ins>ã€‚å…¶æ¬¡ï¼Œ<ins>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code>å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨</ins>ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äº<code>pending</code>çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</p><hr><h3 id="16-3-åŸºæœ¬ç”¨æ³•"><a href="#16-3-åŸºæœ¬ç”¨æ³•" class="headerlink" title="16.3 åŸºæœ¬ç”¨æ³•"></a>16.3 åŸºæœ¬ç”¨æ³•</h3><p><code>Promise</code>çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯<code>resolve</code>å’Œ<code>reject</code>ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± <code>JavaScript</code> å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚</p><ul><li><code>resolve</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» <code>pending</code> å˜ä¸º <code>resolved</code>ï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</li><li><code>reject</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» <code>pending</code> å˜ä¸º <code>rejected</code>ï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>Promise</code>å®ä¾‹ç”Ÿæˆåå¯ä»¥<ins>ç”¨<code>then</code>æ–¹æ³•æŒ‡å®š<code>resolved</code>å’Œ<code>rejected</code>çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚å®ƒä»¬éƒ½æ¥å—<code>Promise</code>å¯¹è±¡ä¼ å‡ºçš„å€¼ä½œä¸ºå‚æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// failure</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡çš„ä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">timeout</span>(<span class="params">ms</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// https://developer.mozilla.org/en-US/docs/Web/API/setTimeout</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ms, <span class="string">&quot;done&quot;</span>); <span class="comment">// &#x27;done&#x27; ä¼šä¼ å…¥å›è°ƒå‡½æ•° resolve</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">timeout</span>(<span class="number">1000</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 1ç§’å &quot;done&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>timeout</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<code>Promise</code>å®ä¾‹ï¼Œè¡¨ç¤ºä¸€æ®µæ—¶é—´ä»¥åæ‰ä¼šå‘ç”Ÿçš„ç»“æœã€‚è¿‡äº†æŒ‡å®šçš„æ—¶é—´åï¼Œ<code>Promise</code>å®ä¾‹çš„çŠ¶æ€å˜ä¸º<code>resolved</code>ï¼Œå°±ä¼šè§¦å‘<code>then</code>æ–¹æ³•ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚<br><br></p><p><ins><code>Promise</code> æ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œ</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolved.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hello</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// resolved</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise</code> æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯<code>Hello</code>ã€‚ç„¶åï¼Œ<ins><code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œ</ins>ï¼Œæ‰€ä»¥<code>resolved</code>æœ€åè¾“å‡ºã€‚</p><p>å¦‚æœ<ins>è°ƒç”¨<code>resolve</code>å‡½æ•°å’Œ<code>reject</code>å‡½æ•°æ—¶å¸¦æœ‰å‚æ•°</ins>ï¼Œé‚£ä¹ˆå®ƒä»¬çš„<ins>å‚æ•°ä¼šè¢«ä¼ é€’ç»™å›è°ƒå‡½æ•°</ins>ã€‚</p><ul><li><code>reject</code>å‡½æ•°çš„å‚æ•°é€šå¸¸æ˜¯<code>Error</code>å¯¹è±¡çš„å®ä¾‹ï¼Œè¡¨ç¤ºæŠ›å‡ºçš„é”™è¯¯ã€‚</li><li><code>resolve</code>å‡½æ•°çš„å‚æ•°é™¤äº†æ­£å¸¸çš„å€¼ä»¥å¤–ï¼Œè¿˜å¯èƒ½æ˜¯å¦ä¸€ä¸ª <code>Promise</code> å®ä¾‹ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">resolve</span>(p1);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>å’Œ<code>p2</code>éƒ½æ˜¯ <code>Promise</code> çš„å®ä¾‹ï¼Œä½†æ˜¯<code>p2</code>çš„<code>resolve</code>æ–¹æ³•å°†<code>p1</code>ä½œä¸ºå‚æ•°ï¼Œå³ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ˜¯è¿”å›å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚è¿™æ—¶<code>p1</code>çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™<code>p2</code>ï¼Œæ­¤æ—¶<code>p1</code>çš„çŠ¶æ€å†³å®šäº†<code>p2</code>çš„çŠ¶æ€ã€‚</p><ul><li>å¦‚æœ<code>p1</code>çš„çŠ¶æ€æ˜¯<code>pending</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…<code>p1</code>çš„çŠ¶æ€æ”¹å˜ã€‚</li><li>å¦‚æœ<code>p1</code>çš„çŠ¶æ€å·²ç»æ˜¯<code>resolved</code>æˆ–è€…<code>rejected</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;fail&quot;</span>)), <span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(p1), <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p2.<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(error));</span><br><span class="line"><span class="comment">// Error: fail</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>æ˜¯ä¸€ä¸ª <code>Promise</code>ï¼Œ<code>3</code> ç§’ä¹‹åå˜ä¸º<code>rejected</code>ã€‚<code>p2</code>çš„çŠ¶æ€åœ¨ <code>1</code> ç§’ä¹‹åæ”¹å˜ï¼Œè€Œä¸”<code>resolve</code>æ–¹æ³•è¿”å›çš„æ˜¯<code>p1</code>ã€‚</p><ul><li>ç”±äº<code>p2</code>è¿”å›çš„æ˜¯å¦ä¸€ä¸ª <code>Promise</code>ï¼Œå¯¼è‡´<code>p2</code>è‡ªå·±çš„çŠ¶æ€æ— æ•ˆäº†ï¼Œ<ins>ç”±<code>p1</code>çš„çŠ¶æ€å†³å®š<code>p2</code>çš„çŠ¶æ€</ins>ã€‚æ‰€ä»¥ï¼Œåé¢çš„<code>then</code>è¯­å¥éƒ½å˜æˆé’ˆå¯¹åè€…<code>p1</code>ã€‚åˆè¿‡äº† <code>2</code> ç§’ï¼Œ<code>p1</code>å˜ä¸º<code>rejected</code>ï¼Œå¯¼è‡´è§¦å‘<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</li></ul><p>æ³¨æ„ï¼Œè°ƒç”¨<code>resolve</code>æˆ–<code>reject</code>å¹¶ä¸ä¼šç»ˆç»“ <code>Promise</code> çš„å‚æ•°å‡½æ•°çš„æ‰§è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>resolve(1)</code>ä»¥åï¼Œåé¢çš„<code>console.log(2)</code>è¿˜æ˜¯ä¼šæ‰§è¡Œï¼Œ<ins>å¹¶ä¸”ä¼šé¦–å…ˆæ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯å› ä¸ºç«‹å³ <code>resolved</code> çš„ <code>Promise</code> æ˜¯åœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œï¼Œæ€»æ˜¯æ™šäºæœ¬è½®å¾ªç¯çš„åŒæ­¥ä»»åŠ¡</ins>ã€‚<br><br></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨<code>resolve</code>æˆ–<code>reject</code>ä»¥åï¼Œ<code>Promise</code> çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»§æ“ä½œåº”è¯¥æ”¾åˆ°<code>then</code>æ–¹æ³•é‡Œé¢ï¼Œè€Œä¸åº”è¯¥ç›´æ¥å†™åœ¨<code>resolve</code>æˆ–<code>reject</code>çš„åé¢ã€‚æ‰€ä»¥ï¼Œ<ins>æœ€å¥½åœ¨å®ƒä»¬å‰é¢åŠ ä¸Š<code>return</code>è¯­å¥</ins>ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ„å¤–ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// åé¢çš„è¯­å¥ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="16-4-then-æ–¹æ³•"><a href="#16-4-then-æ–¹æ³•" class="headerlink" title="16.4 then æ–¹æ³•"></a>16.4 then æ–¹æ³•</h3><p><code>Promise.then()</code>æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸º <code>Promise</code> å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚<ins><code>then</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>resolved</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>rejected</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°</ins>ï¼Œå®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚<br><br></p><p><ins><code>then</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹</ins>ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³<code>then</code>æ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª<code>then</code>æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getJSON</span>(<span class="string">&quot;/posts.json&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">json</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> json.<span class="property">post</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨<code>then</code>æ–¹æ³•ï¼Œä¾æ¬¡æŒ‡å®šäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚<ins>ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆä»¥åï¼Œä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°</ins>ã€‚<br><br></p><p>é“¾å¼å†™æ³•çš„<code>then</code>ï¼Œå¯ä»¥æŒ‡å®šä¸€ç»„æŒ‰ç…§æ¬¡åºè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚<ins>è¿™æ—¶ï¼Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæœ‰å¯èƒ½è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼ˆå³æœ‰å¼‚æ­¥æ“ä½œï¼‰ï¼Œè¿™æ—¶åä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¯¥<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getJSON</span>(<span class="string">&quot;/post/1.json&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getJSON</span>(post.<span class="property">commentURL</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">comments</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolved: &quot;</span>, comments);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;rejected: &quot;</span>, err);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚<ins>è¿™æ—¶ï¼Œç¬¬äºŒä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–</ins>ã€‚</p><ul><li>å¦‚æœå˜ä¸º<code>resolved</code>ï¼Œç¬¬äºŒä¸ª<code>then</code>æ–¹æ³•å°±è°ƒç”¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</li><li>å¦‚æœçŠ¶æ€å˜ä¸º<code>rejected</code>ï¼Œç¬¬äºŒä¸ª<code>then</code>æ–¹æ³•å°±è°ƒç”¨ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚</li></ul><p>å¦‚æœé‡‡ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å†™å¾—æ›´ç®€æ´ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getJSON</span>(<span class="string">&quot;/post/1.json&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">post</span>) =&gt;</span> <span class="title function_">getJSON</span>(post.<span class="property">commentURL</span>))</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">comments</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolved: &quot;</span>, comments),</span><br><span class="line">    <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;rejected: &quot;</span>, err)</span><br><span class="line">  );</span><br></pre></td></tr></table></figure><hr><h3 id="16-5-catch-æ–¹æ³•"><a href="#16-5-catch-æ–¹æ³•" class="headerlink" title="16.5 catch æ–¹æ³•"></a>16.5 catch æ–¹æ³•</h3><p><code>Promise.catch()</code>æ–¹æ³•ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚<ins>å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getJSON</span>(<span class="string">&quot;/posts.json&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">posts</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç† getJSON å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å‘ç”Ÿé”™è¯¯ï¼&quot;</span>, error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getJSON()</code>æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚</p><ul><li>å¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸º<code>resolved</code>ï¼Œåˆ™ä¼šè°ƒç”¨<code>then()</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</li><li>å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º<code>rejected</code>ï¼Œå°±ä¼šè°ƒç”¨<code>catch()</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚</li></ul><p>æ³¨æ„ï¼Œ<ins><code>then()</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«<code>catch()</code>æ–¹æ³•æ•è·</ins>ã€‚</p><p>ä¸‹é¢ä»£ç ä¸­ï¼Œ<code>promise</code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«<code>catch()</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°æ•è·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;test&quot;</span>); <span class="comment">// or reject(new Error(&#x27;test&#x27;));</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Error: test</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä¸¤ç§å†™æ³•ä¸ä¸Šé¢æ˜¯ç­‰ä»·çš„ã€‚ï¼ˆæ¯”è¾ƒå–œæ¬¢<code>try...catch...</code>çš„å†™æ³•ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="title function_">reject</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;test&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœ<code>Promise</code>çŠ¶æ€å·²ç»å˜æˆ<code>resolved</code>ï¼Œå†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// ok</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise</code> åœ¨<code>resolve</code>è¯­å¥åé¢ï¼Œå†æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸ä¼šè¢«æ•è·ã€‚å› ä¸º <code>Promise</code> çš„çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±æ°¸ä¹…ä¿æŒè¯¥çŠ¶æ€ã€‚<br><br></p><p><code>Promise</code> å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª<code>catch</code>è¯­å¥æ•è·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getJSON</span>(<span class="string">&quot;/post/1.json&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getJSON</span>(post.<span class="property">commentURL</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">comments</span>) &#123;</span><br><span class="line">    <span class="comment">// some code</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å‰é¢ä¸‰ä¸ªPromiseäº§ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰ä¸ª <code>Promise</code> å¯¹è±¡: ä¸€ä¸ªç”±<code>getJSON()</code>äº§ç”Ÿï¼Œä¸¤ä¸ªç”±<code>then()</code>äº§ç”Ÿã€‚å®ƒä»¬ä¹‹ä¸­ä»»ä½•ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ï¼Œéƒ½ä¼šè¢«æœ€åä¸€ä¸ª<code>catch()</code>æ•è·ã€‚<br><br></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<ins>ä¸è¦åœ¨<code>then()</code>æ–¹æ³•é‡Œé¢å®šä¹‰ <code>Reject</code> çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œæ€»æ˜¯ä½¿ç”¨<code>catch</code>æ–¹æ³•</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>è·Ÿä¼ ç»Ÿçš„<code>try/catch</code>ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œ<ins>å¦‚æœæ²¡æœ‰ä½¿ç”¨<code>catch()</code>æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code> å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç </ins>ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> someAsyncThing = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸º x æ²¡æœ‰å£°æ˜</span></span><br><span class="line">    <span class="title function_">resolve</span>(x + <span class="number">2</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">someAsyncThing</span>().<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;everything is great&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="comment">// Uncaught (in promise) ReferenceError: x is not defined</span></span><br><span class="line"><span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>someAsyncThing()</code>å‡½æ•°äº§ç”Ÿçš„ <code>Promise</code> å¯¹è±¡ï¼Œå†…éƒ¨æœ‰è¯­æ³•é”™è¯¯ã€‚è¿è¡Œåˆ°è¿™ä¸€è¡Œæ—¶ï¼Œä¼šæ‰“å°å‡ºé”™è¯¯æç¤ºï¼Œä½†æ˜¯ä¸ä¼šç»ˆæ­¢è„šæœ¬æ‰§è¡Œï¼Œ<code>2</code> ç§’ä¹‹åè¿˜æ˜¯ä¼šè¾“å‡º<code>123</code>ã€‚è¿™å°±æ˜¯è¯´ï¼Œ<ins><code>Promise</code> å†…éƒ¨çš„é”™è¯¯ä¸ä¼šå½±å“åˆ° <code>Promise</code> å¤–éƒ¨çš„ä»£ç </ins>ï¼Œé€šä¿—çš„è¯´æ³•å°±æ˜¯â€œ<code>Promise</code> ä¼šåƒæ‰é”™è¯¯â€ã€‚<br><br></p><p>æ‰€ä»¥å»ºè®®ï¼Œ<code>Promise</code> å¯¹è±¡åé¢è¦è·Ÿ<code>catch()</code>æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥å¤„ç† <code>Promise</code> å†…éƒ¨å‘ç”Ÿçš„é”™è¯¯ã€‚æ³¨æ„ï¼Œ<ins><code>catch()</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡</ins>ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨<code>then()</code>æ–¹æ³•ï¼Œæˆ–è€…<code>catch()</code>æ–¹æ³•ï¼Œå»å¤„ç†å‰ä¸€ä¸ª<code>catch()</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ã€‚</p><hr><h3 id="16-6-finally-æ–¹æ³•"><a href="#16-6-finally-æ–¹æ³•" class="headerlink" title="16.6 finally æ–¹æ³•"></a>16.6 finally æ–¹æ³•</h3><p><code>Promise.finally()</code>æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡<code>Promise</code>å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">promise</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;Â·Â·Â·&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;Â·Â·Â·&#125;)</span><br><span class="line">.<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;Â·Â·Â·&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡<code>promise</code>æœ€åçš„çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œå®Œ<code>then</code>æˆ–<code>catch</code>æŒ‡å®šçš„å›è°ƒå‡½æ•°ä»¥åï¼Œéƒ½ä¼šæ‰§è¡Œ<code>finally</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚<br><br></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ <code>Promise</code> å¤„ç†è¯·æ±‚ï¼Œç„¶åä½¿ç”¨<code>finally</code>æ–¹æ³•å…³æ‰æœåŠ¡å™¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">  .<span class="title function_">listen</span>(port)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(server.<span class="property">stop</span>);</span><br></pre></td></tr></table></figure><p>ç”±äº<ins><code>finally</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°</ins>ï¼Œè¿™è¡¨æ˜<ins><code>finally</code>æ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº<code>Promise</code>çš„æ‰§è¡Œç»“æœ</ins>ã€‚</p><hr><h3 id="16-7-all-æ–¹æ³•"><a href="#16-7-all-æ–¹æ³•" class="headerlink" title="16.7 all æ–¹æ³•"></a>16.7 all æ–¹æ³•</h3><p><code>Promise.all()</code>æ–¹æ³•ç”¨äºå°†å¤šä¸ª<code>Promise</code>å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3]); <span class="comment">// æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢<code>p</code>çš„çŠ¶æ€ç”±<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µ</p><ul><li>åªæœ‰<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„<ins>çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œ<code>p</code>çš„çŠ¶æ€æ‰ä¼šå˜æˆ<code>fulfilled</code></ins>ï¼Œæ­¤æ—¶<ins><code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°</ins>ã€‚</li><li>åªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­<ins>æœ‰ä¸€ä¸ªè¢«<code>rejected</code>ï¼Œ<code>p</code>çš„çŠ¶æ€å°±å˜æˆ<code>rejected</code></ins>ï¼Œæ­¤æ—¶<ins>ç¬¬ä¸€ä¸ªè¢«<code>reject</code>çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°</ins>ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> promises = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getJSON</span>(<span class="string">&quot;/post/&quot;</span> + id + <span class="string">&quot;.json&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>(promises)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">posts</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªæœ‰<code>promises</code>ä¸­<code>6</code>ä¸ª<code>Promise</code>å®ä¾‹çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå˜ä¸º<code>rejected</code>ï¼Œæ‰ä¼šè°ƒç”¨<code>Promise.all()</code>æ–¹æ³•åé¢çš„å›è°ƒå‡½æ•°ã€‚<br><br></p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> databasePromise = <span class="title function_">connectDatabase</span>(); <span class="comment">// è¿™é‡Œåº”è¯¥æ˜¯è¿”å›ä¸€ä¸ª Promise å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> booksPromise = databasePromise.<span class="title function_">then</span>(findAllBooks); <span class="comment">// è¿”å›ä¸€ä¸ª Promise Objectï¼Œä¸ºå½“å‰ Promise çš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userPromise = databasePromise.<span class="title function_">then</span>(getCurrentUser);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([booksPromise, userPromise]).<span class="title function_">then</span>(<span class="function">(<span class="params">[books, user]</span>) =&gt;</span></span><br><span class="line">  <span class="title function_">pickTopRecommendations</span>(books, user)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>booksPromise</code>å’Œ<code>userPromise</code>æ˜¯ä¸¤ä¸ªå¼‚æ­¥æ“ä½œï¼Œåªæœ‰ç­‰åˆ°å®ƒä»¬çš„ç»“æœéƒ½è¿”å›äº†ï¼Œæ‰ä¼šè§¦å‘<code>pickTopRecommendations</code>è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚<br><br></p><p>æ³¨æ„ï¼Œå¦‚æœ<ins>ä½œä¸ºå‚æ•°çš„ <code>Promise</code> å®ä¾‹ï¼Œè‡ªå·±å®šä¹‰äº†<code>catch</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦è¢«<code>rejected</code>ï¼Œå¹¶ä¸ä¼šè§¦å‘<code>Promise.all()</code>çš„<code>catch</code>æ–¹æ³•</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> result)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> e);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;æŠ¥é”™äº†&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> result)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> e);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e));</span><br><span class="line"><span class="comment">// [&quot;hello&quot;, Error: æŠ¥é”™äº†]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>æ˜¯<code>resolved</code>ï¼Œ<code>p2</code>ä¼šè¢«<code>rejected</code>ã€‚ä½†æ˜¯<code>p2</code>æœ‰è‡ªå·±çš„<code>catch</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹ï¼Œ<code>p2</code>å®é™…æŒ‡å‘çš„æ˜¯è¿™ä¸ªæ–°çš„å®ä¾‹ã€‚<ins>è¯¥å®ä¾‹æ‰§è¡Œå®Œ<code>catch</code>æ–¹æ³•åï¼Œä¹Ÿä¼šå˜æˆ<code>resolved</code>ï¼Œå¯¼è‡´<code>Promise.all()</code>æ–¹æ³•å‚æ•°é‡Œé¢çš„ä¸¤ä¸ªå®ä¾‹éƒ½ä¼š<code>resolved</code>ï¼Œå› æ­¤ä¼šè°ƒç”¨<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°</ins>ï¼Œè€Œä¸ä¼šè°ƒç”¨<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚<br><br></p><p>å¦‚æœ<code>p2</code>æ²¡æœ‰è‡ªå·±çš„<code>catch</code>æ–¹æ³•ï¼Œå°±ä¼šè°ƒç”¨<code>Promise.all()</code>çš„<code>catch</code>æ–¹æ³•ã€‚</p><hr><h3 id="16-8-race-æ–¹æ³•"><a href="#16-8-race-æ–¹æ³•" class="headerlink" title="16.8 race æ–¹æ³•"></a>16.8 race æ–¹æ³•</h3><p><code>Promise.race()</code>æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª <code>Promise</code> å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">race</span>([p1, p2, p3]);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­<ins>æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œ<code>p</code>çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜</ins>ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ <code>Promise</code> å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚<br><br></p><p>ä¸‹é¢å¦‚æœæŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è·å¾—ç»“æœï¼Œå°±å°† <code>Promise</code> çš„çŠ¶æ€å˜ä¸º<code>reject</code>ï¼Œå¦åˆ™å˜ä¸º<code>resolve</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">race</span>([</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;/resource-that-may-take-a-while&quot;</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;request timeout&quot;</span>)), <span class="number">5000</span>);</span><br><span class="line">  &#125;),</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="variable language_">console</span>.<span class="property">log</span>).<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ <code>5</code> ç§’ä¹‹å†…<code>fetch</code>æ–¹æ³•æ— æ³•è¿”å›ç»“æœï¼Œå˜é‡<code>p</code>çš„çŠ¶æ€å°±ä¼šå˜ä¸º<code>rejected</code>ï¼Œä»è€Œè§¦å‘<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p><hr><h3 id="16-9-allSettled-æ–¹æ³•"><a href="#16-9-allSettled-æ–¹æ³•" class="headerlink" title="16.9 allSettled æ–¹æ³•"></a>16.9 allSettled æ–¹æ³•</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›ç­‰åˆ°ä¸€ç»„å¼‚æ­¥æ“ä½œéƒ½ç»“æŸï¼Œä¸ç®¡æ¯ä¸€ä¸ªæ“ä½œæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>ES6</code> å¼•å…¥äº†<code>Promise.allSettled()</code>æ–¹æ³•ã€‚<br><br></p><p><code>Promise.allSettled()</code>æ–¹æ³•æ¥å—ä¸€ä¸ª<code>Promise</code>æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå¹¶<ins>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡</ins>ã€‚åªæœ‰ç­‰åˆ°å‚æ•°æ•°ç»„çš„<ins>æ‰€æœ‰ <code>Promise</code> å¯¹è±¡éƒ½å‘ç”ŸçŠ¶æ€å˜æ›´ï¼Œä¸ç®¡æ˜¯<code>fulfilled</code>è¿˜æ˜¯<code>rejected</code>ï¼Œè¿”å›çš„ <code>Promise</code> å¯¹è±¡æ‰ä¼šå‘ç”ŸçŠ¶æ€å˜æ›´</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [<span class="title function_">fetch</span>(<span class="string">&quot;/api-1&quot;</span>), <span class="title function_">fetch</span>(<span class="string">&quot;/api-2&quot;</span>), <span class="title function_">fetch</span>(<span class="string">&quot;/api-3&quot;</span>)];</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">allSettled</span>(promises);</span><br><span class="line"><span class="title function_">removeLoadingIndicator</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ•°ç»„<code>promises</code>åŒ…å«äº†ä¸‰ä¸ªè¯·æ±‚ï¼Œåªæœ‰ç­‰åˆ°è¿™ä¸‰ä¸ªè¯·æ±‚éƒ½ç»“æŸäº†ï¼Œä¸ç®¡è¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œ<code>removeLoadingIndicator()</code>æ‰ä¼šæ‰§è¡Œã€‚<br><br></p><p><code>Promise.allSettled()</code>è¿”å›çš„ <code>Promise</code> å®ä¾‹ï¼Œ<ins>çŠ¶æ€æ€»æ˜¯<code>fulfilled</code>ï¼Œä¸ä¼šå˜æˆ<code>rejected</code></ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> resolved = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line"><span class="keyword">const</span> rejected = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> allSettledPromise = <span class="title class_">Promise</span>.<span class="title function_">allSettled</span>([resolved, rejected]);</span><br><span class="line"></span><br><span class="line">allSettledPromise.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">results</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;fulfilled&#x27;, value: 42 &#125;,</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;rejected&#x27;, reason: -1 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.allSettled()</code>çš„è¿”å›å€¼<code>allSettledPromise</code>ï¼ŒçŠ¶æ€åªå¯èƒ½å˜æˆ<code>fulfilled</code>ã€‚<ins>å®ƒçš„å›è°ƒå‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•°æ˜¯æ•°ç»„<code>results</code>ï¼Œå¯¹åº”ä¼ å…¥<code>Promise.allSettled()</code>çš„æ•°ç»„é‡Œé¢çš„ä¸¤ä¸ª <code>Promise</code> å¯¹è±¡</ins>ã€‚<br><br></p><p>ä¸Šé¢<code>results</code>çš„æ¯ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚ï¼ˆé‡ç‚¹ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶</span></span><br><span class="line">&#123;<span class="attr">status</span>: <span class="string">&#x27;fulfilled&#x27;</span>, <span class="attr">value</span>: value&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶</span></span><br><span class="line">&#123;<span class="attr">status</span>: <span class="string">&#x27;rejected&#x27;</span>, <span class="attr">reason</span>: reason&#125;</span><br></pre></td></tr></table></figure><p>æˆå‘˜å¯¹è±¡çš„<code>status</code>å±æ€§çš„å€¼åªå¯èƒ½æ˜¯å­—ç¬¦ä¸²<code>fulfilled</code>æˆ–å­—ç¬¦ä¸²<code>rejected</code>ï¼Œç”¨æ¥åŒºåˆ†å¼‚æ­¥æ“ä½œæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚<ins>å¦‚æœæ˜¯æˆåŠŸ<code>fulfilled</code>ï¼Œå¯¹è±¡ä¼šæœ‰<code>value</code>å±æ€§ï¼Œå¦‚æœæ˜¯å¤±è´¥<code>rejected</code>ï¼Œä¼šæœ‰<code>reason</code>å±æ€§</ins>ï¼Œå¯¹åº”ä¸¤ç§çŠ¶æ€æ—¶å‰é¢å¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ã€‚</p><hr><h3 id="16-10-any-æ–¹æ³•"><a href="#16-10-any-æ–¹æ³•" class="headerlink" title="16.10 any æ–¹æ³•"></a>16.10 any æ–¹æ³•</h3><p><code>Promise.any()</code> æ¥å—ä¸€ç»„ <code>Promise</code> å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹è¿”å›ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">any</span>([</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;https://v8.dev/&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;home&quot;</span>),</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;https://v8.dev/blog&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;blog&quot;</span>),</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;https://v8.dev/docs&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;docs&quot;</span>),</span><br><span class="line">])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">first</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åªè¦æœ‰ä¸€ä¸ª fetch() è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(first);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰€æœ‰ä¸‰ä¸ª fetch() å…¨éƒ¨è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ul><li>åªè¦å‚æ•°å®ä¾‹æœ‰ä¸€ä¸ªå˜æˆ<code>fulfilled</code>çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ<code>fulfilled</code>çŠ¶æ€ã€‚</li><li>å¦‚æœæ‰€æœ‰å‚æ•°å®ä¾‹éƒ½å˜æˆ<code>rejected</code>çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ<code>rejected</code>çŠ¶æ€ã€‚</li></ul><p>ä¸‹é¢æ˜¯<code>Promise()</code>ä¸<code>await</code>å‘½ä»¤ç»“åˆä½¿ç”¨çš„ä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;/endpoint-a&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;a&quot;</span>),</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;/endpoint-b&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;b&quot;</span>),</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;/endpoint-c&quot;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="string">&quot;c&quot;</span>),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> first = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">any</span>(promises);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(first);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.any()</code>æ–¹æ³•çš„å‚æ•°åŒ…å«ä¸‰ä¸ª <code>Promise</code> æ“ä½œã€‚å…¶ä¸­åªè¦æœ‰ä¸€ä¸ªå˜æˆ<code>fulfilled</code>ï¼Œ<code>Promise.any()</code>è¿”å›çš„ <code>Promise</code> å¯¹è±¡å°±å˜æˆ<code>fulfilled</code>ã€‚å¦‚æœæ‰€æœ‰ä¸‰ä¸ªæ“ä½œéƒ½å˜æˆ<code>rejected</code>ï¼Œé‚£ä¹ˆ<code>await</code>å‘½ä»¤å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><hr><h3 id="16-11-resolve-æ–¹æ³•"><a href="#16-11-resolve-æ–¹æ³•" class="headerlink" title="16.11 resolve æ–¹æ³•"></a>16.11 resolve æ–¹æ³•</h3><p>æœ‰æ—¶éœ€è¦å°†ç°æœ‰å¯¹è±¡è½¬ä¸º <code>Promise</code> å¯¹è±¡ï¼Œ<code>Promise.resolve()</code>æ–¹æ³•å°±èµ·åˆ°è¿™ä¸ªä½œç”¨ã€‚<br><br></p><p><strong>ï¼ˆ1ï¼‰å‚æ•°æ˜¯ä¸€ä¸ª thenable å¯¹è±¡</strong></p><p><code>thenable</code>å¯¹è±¡æŒ‡çš„æ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable);</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<ins><code>resolve()</code>æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º <code>Promise</code> å¯¹è±¡ï¼Œç„¶åç«‹å³æ‰§è¡Œ<code>thenable</code>å¯¹è±¡çš„<code>then()</code>æ–¹æ³•</ins>ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰å‚æ•°ä¸æ˜¯å…·æœ‰ then()æ–¹æ³•çš„å¯¹è±¡ï¼Œæˆ–æ ¹æœ¬å°±ä¸æ˜¯å¯¹è±¡</strong></p><p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰<code>then()</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™<code>resolve()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º<code>resolved</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Hello</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰ä¸å¸¦æœ‰ä»»ä½•å‚æ•°</strong></p><p><code>resolve()</code>æ–¹æ³•è°ƒç”¨æ—¶å¯ä»¥<ins>ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ª<code>resolved</code>çŠ¶æ€çš„ <code>Promise</code> å¯¹è±¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><ins>ç«‹å³<code>resolve()</code>çš„ <code>Promise</code> å¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€çš„ç»“æŸæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;three&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;two&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;one&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// one</span></span><br><span class="line"><span class="comment">// two</span></span><br><span class="line"><span class="comment">// three</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>setTimeout(fn, 0)</code>åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶æ‰§è¡Œï¼Œ<code>resolve()</code>åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ç»“æŸæ—¶æ‰§è¡Œï¼Œ<code>console.log(&#39;one&#39;)</code>åˆ™æ˜¯ç«‹å³æ‰§è¡Œï¼Œå› æ­¤æœ€å…ˆè¾“å‡ºã€‚</p><hr><h3 id="16-12-reject-æ–¹æ³•"><a href="#16-12-reject-æ–¹æ³•" class="headerlink" title="16.12 reject æ–¹æ³•"></a>16.12 reject æ–¹æ³•</h3><p><code>Promise.reject(reason)</code>æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸º<code>rejected</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>));</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="literal">null</span>, <span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å‡ºé”™äº†</span></span><br></pre></td></tr></table></figure><p><code>Promise.reject()</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º<code>reject</code>çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e === <span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><hr><h2 id="17-Iterator-å’Œ-forâ€¦of-å¾ªç¯"><a href="#17-Iterator-å’Œ-forâ€¦of-å¾ªç¯" class="headerlink" title="17. Iterator å’Œ forâ€¦of å¾ªç¯"></a>17. Iterator å’Œ forâ€¦of å¾ªç¯</h2><h3 id="17-1-Iterator-æ¦‚å¿µ"><a href="#17-1-Iterator-æ¦‚å¿µ" class="headerlink" title="17.1 Iterator æ¦‚å¿µ"></a>17.1 Iterator æ¦‚å¿µ</h3><p>éå†å™¨<code>Iterator</code>æ˜¯ä¸€ç§æ¥å£ï¼Œ<ins>ä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶</ins>ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² <code>Iterator</code> æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼Œä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ã€‚<br><br></p><p><code>Iterator</code> çš„éå†è¿‡ç¨‹</p><ol><li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚</li><li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚</li><li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚</li><li>ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚</li></ol><p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚å…¶ä¸­ï¼Œ<ins><code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">15</span>, <span class="number">25</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> it = a[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"></span><br><span class="line">it.<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// 1</span></span><br><span class="line">it.<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// 5</span></span><br><span class="line">it.<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> è§„å®šï¼Œé»˜è®¤çš„ <code>Iterator</code> æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯â€œå¯éå†çš„â€ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">numbers</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">let</span> idx = -<span class="number">1</span>; <span class="comment">// &lt;--- æŠµæ¶ˆ ++ çš„ side-effect</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">next</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        idx++;</span><br><span class="line">        <span class="comment">// å¯ä»¥å°è¯• log å‡ºä¸‹é¢çš„ object</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">value</span>: self.<span class="property">numbers</span>[idx],</span><br><span class="line">          <span class="attr">done</span>: idx &gt;= self.<span class="property">numbers</span>.<span class="property">length</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> obj) <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>obj</code>æ˜¯å¯éå†çš„ï¼Œå› ä¸ºå…·æœ‰<code>Symbol.iterator</code>å±æ€§ã€‚æ‰§è¡Œè¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„æ ¹æœ¬ç‰¹å¾å°±æ˜¯å…·æœ‰<code>next</code>æ–¹æ³•ã€‚æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æˆå‘˜çš„ä¿¡æ¯å¯¹è±¡ï¼Œå…·æœ‰<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸Šé¢ iterator æ‰“å°å‡ºæ¥çš„ objects</span></span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">1</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">2</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="number">3</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>done</code> ä¸ä»£è¡¨è¿”å›çš„å€¼æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªï¼Œè€Œæ˜¯è¡¨ç¤ºè¿­ä»£å™¨æ˜¯å¦æ²¡æœ‰æ›´å¤šçš„å€¼å¯ä»¥è¿”å›ã€‚</p><hr><h3 id="17-2-forâ€¦of-å¾ªç¯"><a href="#17-2-forâ€¦of-å¾ªç¯" class="headerlink" title="17.2 forâ€¦of å¾ªç¯"></a>17.2 forâ€¦of å¾ªç¯</h3><p><strong>ï¼ˆ1ï¼‰æ•°ç»„ï¼ŒSet ä¸ Map</strong></p><p><code>ES6</code> çš„æ•°ç»„ï¼Œ<code>Set</code> å’Œ <code>Map</code> åŸç”Ÿå…·æœ‰ <code>Iterator</code> æ¥å£ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> color <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red green blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(arr);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> color <span class="keyword">of</span> set) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(color);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red green blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>).<span class="title function_">set</span>(<span class="string">&quot;b&quot;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pair);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [&#x27;a&#x27;, 1]</span></span><br><span class="line"><span class="comment">// [&#x27;b&#x27;, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot; : &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a : 1</span></span><br><span class="line"><span class="comment">// b : 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ<code>Set</code> å’Œ <code>Map</code> éå†çš„é¡ºåºæ˜¯æŒ‰ç…§å„ä¸ªæˆå‘˜è¢«æ·»åŠ è¿›æ•°æ®ç»“æ„çš„é¡ºåºã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„</strong></p><p>æœ‰äº›æ•°æ®ç»“æ„æ˜¯åœ¨ç°æœ‰æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—ç”Ÿæˆçš„ã€‚æ¯”å¦‚ï¼Œ<code>ES6</code> çš„æ•°ç»„ã€<code>Set</code>ã€<code>Map</code> éƒ½éƒ¨ç½²äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨åéƒ½è¿”å›éå†å™¨å¯¹è±¡ã€‚</p><ul><li><code>entries()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†[é”®å, é”®å€¼]ç»„æˆçš„æ•°ç»„ã€‚</li><li><code>keys()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®åã€‚</li><li><code>values()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> arr.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pair);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [0, &#x27;a&#x27;]</span></span><br><span class="line"><span class="comment">// [1, &#x27;b&#x27;]</span></span><br><span class="line"><span class="comment">// [2, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</strong></p><p>å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä¹ŸåŸç”Ÿå…·æœ‰ <code>Iterator</code> æ¥å£ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> s <span class="keyword">of</span> str) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s); <span class="comment">// h e l l o</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// argumentså¯¹è±¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printArgs</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="variable language_">arguments</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printArgs</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å¯¹è±¡</strong></p><p><code>for...of</code>ä¸èƒ½ç›´æ¥ä½¿ç”¨äºæ™®é€šå¯¹è±¡ä¸Šï¼Œå¿…é¡»éƒ¨ç½² <code>Iterator</code> æ¥å£åæ‰èƒ½ä½¿ç”¨ã€‚</p><ul><li>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œéå†<code>Object.keys()</code>ç”Ÿæˆçš„å¯¹è±¡é”®åçš„æ•°ç»„ã€‚</li><li>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ <code>Generator</code> å‡½æ•°å°†å¯¹è±¡é‡æ–°åŒ…è£…ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ¡ˆä¸€</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key, <span class="string">&quot;-&gt;&quot;</span>, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ¡ˆäºŒ</span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">entries</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)) &#123;</span><br><span class="line">    <span class="keyword">yield</span> [key, obj[key]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> <span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key, <span class="string">&quot;-&gt;&quot;</span>, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a -&gt; 1</span></span><br><span class="line"><span class="comment">// b -&gt; 2</span></span><br><span class="line"><span class="comment">// c -&gt; 3</span></span><br></pre></td></tr></table></figure><hr><h2 id="18-Generator-å‡½æ•°"><a href="#18-Generator-å‡½æ•°" class="headerlink" title="18. Generator å‡½æ•°"></a>18. Generator å‡½æ•°</h2><h3 id="18-1-åŸºæœ¬æ¦‚å¿µ"><a href="#18-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="18.1 åŸºæœ¬æ¦‚å¿µ"></a>18.1 åŸºæœ¬æ¦‚å¿µ</h3><p><code>Generator</code> å‡½æ•°æ˜¯ <code>ES6</code> æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒã€‚</p><ul><li><strong>è¯­æ³•ä¸Šï¼š</strong><ins><code>Generator</code> å‡½æ•°ç±»ä¼¼ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€</ins>ã€‚æ‰§è¡Œ <code>Generator</code> å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œ<ins>å¯ä»¥ä¾æ¬¡éå† <code>Generator</code> å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€</ins>ã€‚</li><li><strong>å½¢å¼ä¸Šï¼š</strong><code>Generator</code> å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾ã€‚ä¸€æ˜¯ï¼Œ<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›äºŒæ˜¯ï¼Œå‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">hwGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;world&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;ending&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hw = <span class="title function_">hwGenerator</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª <code>Generator</code> å‡½æ•°<code>hwGenerator</code>ï¼Œå®ƒå†…éƒ¨æœ‰ä¸¤ä¸ª<code>yield</code>è¡¨è¾¾å¼<code>hello</code>å’Œ<code>world</code>ï¼Œå³è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š<code>hello</code>ï¼Œ<code>world</code> å’Œ <code>return</code> è¯­å¥ã€‚<br><br></p><p><code>Generator</code> å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ä¸æ™®é€šå‡½æ•°ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯ï¼Œ<ins>è°ƒç”¨ <code>Generator</code> å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡</ins>ã€‚é€šè¿‡è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œ<ins>ä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€</ins>ã€‚<br><br></p><p>æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰ä¸ºæ­¢ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">hw.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// &#123; value: &#x27;world&#x27;, done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// &#123; value: &#x27;ending&#x27;, done: true &#125;</span></span><br><span class="line"></span><br><span class="line">hw.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼Œè°ƒç”¨ <code>Generator</code> å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨ <code>Generator</code> å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆã€‚æ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚<code>value</code>å±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯<code>yield</code>è¡¨è¾¾å¼åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚</p><hr><h3 id="18-2-yield-è¡¨è¾¾å¼"><a href="#18-2-yield-è¡¨è¾¾å¼" class="headerlink" title="18.2 yield è¡¨è¾¾å¼"></a>18.2 yield è¡¨è¾¾å¼</h3><p>ç”±äº <code>Generator</code> å‡½æ•°è¿”å›çš„<ins>éå†å™¨å¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨<code>next</code>æ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€</ins>ï¼Œæ‰€ä»¥<code>Generator</code>å…¶å®<ins>æä¾›äº†ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°</ins>ã€‚<code>yield</code>è¡¨è¾¾å¼å°±æ˜¯æš‚åœæ ‡å¿—ã€‚<br><br></p><p>éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•çš„è¿è¡Œé€»è¾‘å¦‚ä¸‹</p><ul><li><ins>é‡åˆ°<code>yield</code>è¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨<code>yield</code>åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼</ins>ã€‚</li><li>ä¸‹ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ã€‚</li><li>å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„<code>yield</code>è¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ°<code>return</code>è¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°†<code>return</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ã€‚</li><li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰<code>return</code>è¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ä¸º<code>undefined</code>ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">123</span> + <span class="number">456</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 579, done: false&#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p><code>yield</code>è¡¨è¾¾å¼ä¸<code>return</code>è¯­å¥æ—¢æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä¹Ÿæœ‰åŒºåˆ«ã€‚ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œéƒ½èƒ½è¿”å›ç´§è·Ÿåœ¨è¯­å¥åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚<ins>åŒºåˆ«åœ¨äºæ¯æ¬¡é‡åˆ°<code>yield</code>ï¼Œå‡½æ•°æš‚åœæ‰§è¡Œï¼Œä¸‹ä¸€æ¬¡å†ä»è¯¥ä½ç½®ç»§ç»­å‘åæ‰§è¡Œï¼Œè€Œ<code>return</code>è¯­å¥ä¸å…·å¤‡ä½ç½®è®°å¿†çš„åŠŸèƒ½</ins>ã€‚ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡<code>return</code>è¯­å¥ï¼Œä½†æ˜¯å¯ä»¥æ‰§è¡Œå¤šæ¬¡<code>yield</code>è¡¨è¾¾å¼ã€‚</p><hr><h3 id="18-3-ä¸-Iterator-æ¥å£çš„å…³ç³»"><a href="#18-3-ä¸-Iterator-æ¥å£çš„å…³ç³»" class="headerlink" title="18.3 ä¸ Iterator æ¥å£çš„å…³ç³»"></a>18.3 ä¸ Iterator æ¥å£çš„å…³ç³»</h3><p>ç”±äº <code>Generator</code> å‡½æ•°å°±æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤å¯ä»¥æŠŠ <code>Generator</code> èµ‹å€¼ç»™å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ï¼Œä»è€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰ <code>Iterator</code> æ¥å£ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myIterable = &#123;&#125;;</span><br><span class="line">myIterable[<span class="title class_">Symbol</span>.<span class="property">iterator</span>] = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">[...myIterable]; <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Generator</code> å‡½æ•°èµ‹å€¼ç»™<code>Symbol.iterator</code>å±æ€§ï¼Œä»è€Œä½¿å¾—<code>myIterable</code>å¯¹è±¡å…·æœ‰äº† <code>Iterator</code> æ¥å£ï¼Œå¯ä»¥è¢«<code>...</code>è¿ç®—ç¬¦éå†äº†ã€‚</p><hr><h3 id="18-4-next-æ–¹æ³•çš„å‚æ•°"><a href="#18-4-next-æ–¹æ³•çš„å‚æ•°" class="headerlink" title="18.4 next æ–¹æ³•çš„å‚æ•°"></a>18.4 next æ–¹æ³•çš„å‚æ•°</h3><p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›<code>undefined</code>ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œ<ins>è¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼</ins>ã€‚ï¼ˆæ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; <span class="literal">true</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> reset = <span class="keyword">yield</span> i;</span><br><span class="line">    <span class="keyword">if</span> (reset) &#123;</span><br><span class="line">      i = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">f</span>(); <span class="comment">// å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 0, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(<span class="literal">true</span>); <span class="comment">// &#123; value: 0, done: false &#125;</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶ rest ä¸º trueï¼Œæ‰€ä»¥ i = -1ï¼Œåˆå› ä¸º i++ï¼Œ</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ä¸‹ä¸€æ¬¡è¿è¡Œåˆ° yield i çš„æ—¶å€™ i å°±æ˜¯ 0</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥æ— é™è¿è¡Œçš„ <code>Generator</code> å‡½æ•°<code>f</code>ï¼Œå¦‚æœ<code>next</code>æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæ¯æ¬¡è¿è¡Œåˆ°<code>yield</code>è¡¨è¾¾å¼ï¼Œå˜é‡<code>reset</code>çš„å€¼æ€»æ˜¯<code>undefined</code>ã€‚å½“<code>next</code>æ–¹æ³•å¸¦ä¸€ä¸ªå‚æ•°<code>true</code>æ—¶ï¼Œå˜é‡<code>reset</code>å°±è¢«é‡ç½®ä¸ºè¿™ä¸ªå‚æ•°ï¼Œå› æ­¤<code>i</code>ä¼šç­‰äº<code>-1</code>ï¼Œä¸‹ä¸€è½®å¾ªç¯å°±ä¼šä»<code>-1</code>å¼€å§‹é€’å¢ã€‚<br><br></p><p>è¿™ä¸ªåŠŸèƒ½æœ‰å¾ˆé‡è¦çš„æ„ä¹‰ã€‚<code>Generator</code> å‡½æ•°ä»æš‚åœçŠ¶æ€åˆ°æ¢å¤è¿è¡Œï¼Œå®ƒçš„ä¸Šä¸‹æ–‡çŠ¶æ€<code>context</code>æ˜¯ä¸å˜çš„ã€‚é€šè¿‡<code>next</code>æ–¹æ³•çš„å‚æ•°ï¼Œå°±æœ‰åŠæ³•åœ¨ <code>Generator</code> å‡½æ•°å¼€å§‹è¿è¡Œä¹‹åï¼Œç»§ç»­å‘å‡½æ•°ä½“å†…éƒ¨æ³¨å…¥å€¼ã€‚<ins>ä»è€Œåœ¨ <code>Generator</code> å‡½æ•°è¿è¡Œçš„ä¸åŒé˜¶æ®µï¼Œè°ƒæ•´å‡½æ•°è¡Œä¸º</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">foo</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="number">2</span> * (<span class="keyword">yield</span> x + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> z = <span class="keyword">yield</span> y / <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="title function_">foo</span>(<span class="number">5</span>);</span><br><span class="line">a.<span class="title function_">next</span>(); <span class="comment">// &#123; value:6, done:false &#125;</span></span><br><span class="line">a.<span class="title function_">next</span>(); <span class="comment">// æ­¤æ—¶ y ä¸º undefined, &#123; value:NaN, done:false &#125;</span></span><br><span class="line">a.<span class="title function_">next</span>(); <span class="comment">// æ­¤æ—¶ z ä¸º undefined, &#123; value:NaN, done:true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒæ¬¡è¿è¡Œ<code>next()</code>çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œå¯¼è‡´ <code>y</code> çš„å€¼ç­‰äº<code>2 * undefined</code>ï¼Œé™¤ä»¥ <code>3</code> ä»¥åå˜æˆ<code>NaN</code>ï¼Œå› æ­¤è¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ä¹Ÿç­‰äº<code>NaN</code>ã€‚ç¬¬ä¸‰æ¬¡è¿è¡Œ<code>next</code>æ–¹æ³•çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œæ‰€ä»¥<code>z</code>ç­‰äº<code>undefined</code>ï¼Œè¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ç­‰äº<code>5 + NaN + undefined</code>ï¼Œå³<code>NaN</code>ã€‚<br><br></p><p>å¦‚æœå‘<code>next</code>æ–¹æ³•æä¾›å‚æ•°ï¼Œè¿”å›ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="title function_">foo</span>(<span class="number">5</span>);</span><br><span class="line">b.<span class="title function_">next</span>(); <span class="comment">// &#123; value:6, done:false &#125;</span></span><br><span class="line">b.<span class="title function_">next</span>(<span class="number">12</span>); <span class="comment">// æ­¤æ—¶ y ä¸º 24, å› ä¸º yield (x + 1) = 12, &#123; value:8, done:false &#125;</span></span><br><span class="line">b.<span class="title function_">next</span>(<span class="number">13</span>); <span class="comment">// æ­¤æ—¶ z ä¸º 13, å› ä¸º yield (y / 3) = 13, &#123; value:42, done:true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œè¿”å›<code>x+1</code>çš„å€¼<code>6</code>ï¼›ç¬¬äºŒæ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡<code>yield</code>è¡¨è¾¾å¼çš„å€¼è®¾ä¸º<code>12</code>ï¼Œå› æ­¤<code>y</code>ç­‰äº<code>24</code>ï¼Œè¿”å›<code>y / 3</code>çš„å€¼<code>8</code>ï¼›ç¬¬ä¸‰æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡<code>yield</code>è¡¨è¾¾å¼çš„å€¼è®¾ä¸º<code>13</code>ï¼Œå› æ­¤<code>z</code>ç­‰äº<code>13</code>ï¼Œè¿™æ—¶<code>x</code>ç­‰äº<code>5</code>ï¼Œ<code>y</code>ç­‰äº<code>24</code>ï¼Œæ‰€ä»¥<code>return</code>è¯­å¥çš„å€¼ç­‰äº<code>42</code>ã€‚<br><br></p><p>æ³¨æ„ï¼Œç”±äº<code>next</code>æ–¹æ³•çš„å‚æ•°è¡¨ç¤ºä¸Šä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œä¼ é€’å‚æ•°æ˜¯æ— æ•ˆçš„ã€‚</p><hr><h3 id="18-5-forâ€¦of-å¾ªç¯"><a href="#18-5-forâ€¦of-å¾ªç¯" class="headerlink" title="18.5 forâ€¦of å¾ªç¯"></a>18.5 forâ€¦of å¾ªç¯</h3><p><code>for...of</code>å¯ä»¥è‡ªåŠ¨éå† <code>Generator</code> å‡½æ•°ç”Ÿæˆçš„<code>Iterator</code>å¯¹è±¡ï¼Œä¸”ä¸éœ€è¦è°ƒç”¨<code>next</code>æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> <span class="title function_">foo</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3 (æ²¡æœ‰4)</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œä¸€æ—¦è¿”å›å¯¹è±¡çš„<code>done</code>å±æ€§ä¸º<code>true</code>ï¼Œ<code>for...of</code>å¾ªç¯å°±ä¼šä¸­æ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ã€‚æ‰€ä»¥ä¸Šé¢ä»£ç çš„<code>return</code>è¯­å¥è¿”å›çš„<code>4</code>ï¼Œä¸åŒ…æ‹¬åœ¨<code>for...of</code>å¾ªç¯ä¹‹ä¸­ã€‚<br><br></p><p>é™¤äº†<code>for...of</code>å¾ªç¯ä»¥å¤–ï¼Œæ‰©å±•è¿ç®—ç¬¦ã€è§£æ„èµ‹å€¼å’Œ<code>Array.from</code>æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„ï¼Œéƒ½æ˜¯éå†å™¨æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒä»¬éƒ½å¯ä»¥å°† <code>Generator</code> å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">numbers</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰©å±•è¿ç®—ç¬¦</span></span><br><span class="line">[...<span class="title function_">numbers</span>()]; <span class="comment">// [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.from æ–¹æ³•</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title function_">numbers</span>()); <span class="comment">// [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æ„èµ‹å€¼</span></span><br><span class="line"><span class="keyword">let</span> [x, y] = <span class="title function_">numbers</span>();</span><br><span class="line">x; <span class="comment">// 1</span></span><br><span class="line">y; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><hr><h3 id="18-6-throw-æ–¹æ³•"><a href="#18-6-throw-æ–¹æ³•" class="headerlink" title="18.6 throw æ–¹æ³•"></a>18.6 throw æ–¹æ³•</h3><p>éå†å™¨å¯¹è±¡çš„<code>throw()</code>æ–¹æ³•ï¼Œå¯ä»¥<ins>åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨ <code>Generator</code> å‡½æ•°ä½“å†…æ•è·</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> g = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å†…éƒ¨æ•è·&quot;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> i = <span class="title function_">g</span>();</span><br><span class="line">i.<span class="title function_">next</span>(); <span class="comment">// åˆå§‹åŒ–å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  i.<span class="keyword">throw</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  i.<span class="keyword">throw</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¤–éƒ¨æ•è·&quot;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å†…éƒ¨æ•è· a</span></span><br><span class="line"><span class="comment">// å¤–éƒ¨æ•è· b</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡<code>i</code>è¿ç»­æŠ›å‡ºä¸¤ä¸ªé”™è¯¯ã€‚<ins>ç¬¬ä¸€ä¸ªé”™è¯¯è¢« <code>Generator</code> å‡½æ•°ä½“å†…çš„<code>catch</code>è¯­å¥æ•è·</ins>ã€‚<code>i</code>ç¬¬äºŒæ¬¡æŠ›å‡ºé”™è¯¯ï¼Œç”±äº <code>Generator</code> å‡½æ•°å†…éƒ¨çš„<code>catch</code>è¯­å¥å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œä¸ä¼šå†æ•æ‰åˆ°è¿™ä¸ªé”™è¯¯äº†ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯å°±<ins>è¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>è¯­å¥æ•è·</ins>ã€‚<br><br></p><p>æ³¨æ„ï¼Œä¸è¦æ··æ·†éå†å™¨å¯¹è±¡çš„<code>throw</code>æ–¹æ³•å’Œå…¨å±€çš„<code>throw</code>å‘½ä»¤ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¤–éƒ¨æ•è·&quot;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¤–éƒ¨æ•è· [Error: a]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¹‹æ‰€ä»¥åªæ•è·äº†<code>a</code>ï¼Œæ˜¯å› ä¸ºå‡½æ•°ä½“å¤–çš„<code>catch</code>è¯­å¥å—ï¼Œæ•è·äº†æŠ›å‡ºçš„<code>a</code>é”™è¯¯ä»¥åï¼Œå°±ä¸ä¼šå†ç»§ç»­<code>try</code>ä»£ç å—é‡Œé¢å‰©ä½™çš„è¯­å¥äº†ã€‚</p><ul><li>å¦‚æœ <code>Generator</code> å‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½²<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆ<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œ<ins>å°†è¢«å¤–éƒ¨<code>try...catch</code>ä»£ç å—æ•è·</ins>ã€‚</li><li>å¦‚æœ <code>Generator</code> å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨ï¼Œéƒ½æ²¡æœ‰éƒ¨ç½²<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ¥é”™ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œã€‚</li></ul><p><code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯è¦è¢«å†…éƒ¨æ•è·ï¼Œ<ins>å‰ææ˜¯å¿…é¡»è‡³å°‘æ‰§è¡Œè¿‡ä¸€æ¬¡<code>next</code>æ–¹æ³•</ins>ã€‚åŒæ—¶ï¼Œ<ins><code>throw</code>æ–¹æ³•è¢«æ•è·åï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸‹ä¸€æ¡<code>yield</code>è¡¨è¾¾å¼</ins>ï¼Œç­‰åŒäºæ‰§è¡Œä¸€æ¬¡<code>next</code>æ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> gen = <span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// a</span></span><br><span class="line">g.<span class="keyword">throw</span>(); <span class="comment">// b</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// c</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>g.throw()</code>æ–¹æ³•è¢«æ•è·ä»¥åï¼Œè‡ªåŠ¨æ‰§è¡Œäº†ä¸€æ¬¡<code>next</code>æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šæ‰“å°<code>b</code>ã€‚è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ<ins>åªè¦ <code>Generator</code> å‡½æ•°å†…éƒ¨éƒ¨ç½²äº†<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆéå†å™¨çš„<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸å½±å“ä¸‹ä¸€æ¬¡éå†</ins>ã€‚<br><br></p><p><code>Generator</code> å‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…æ•è·ï¼›åè¿‡æ¥ï¼Œ<code>Generator</code> å‡½æ•°ä½“å†…æŠ›å‡ºçš„é”™è¯¯ï¼Œä¹Ÿå¯ä»¥è¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>æ•è·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">let</span> y = x.<span class="title function_">toUpperCase</span>();</span><br><span class="line">  <span class="keyword">yield</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> it = <span class="title function_">foo</span>();</span><br><span class="line"></span><br><span class="line">it.<span class="title function_">next</span>(); <span class="comment">// &#123; value:3, done:false &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  it.<span class="title function_">next</span>(<span class="number">42</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•å‘å‡½æ•°ä½“å†…ä¼ å…¥ä¸€ä¸ªå‚æ•° <code>42</code>ï¼Œæ•°å€¼æ˜¯æ²¡æœ‰<code>toUpperCase</code>æ–¹æ³•çš„ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ª <code>TypeError</code> é”™è¯¯ï¼Œè¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>æ•è·ã€‚</p><hr><h3 id="18-7-return-æ–¹æ³•"><a href="#18-7-return-æ–¹æ³•" class="headerlink" title="18.7 return æ–¹æ³•"></a>18.7 return æ–¹æ³•</h3><p>éå†å™¨å¯¹è±¡çš„<code>return()</code>æ–¹æ³•ï¼Œå¯ä»¥è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ä¸”<ins>ç»ˆç»“éå† <code>Generator</code> å‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">g.<span class="keyword">return</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// &#123; value: &quot;foo&quot;, done: true &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡<code>g</code>è°ƒç”¨<code>return()</code>æ–¹æ³•åï¼Œè¿”å›å€¼çš„<code>value</code>å±æ€§å°±æ˜¯<code>return()</code>æ–¹æ³•çš„å‚æ•°<code>foo</code>ã€‚å¹¶ä¸”ï¼Œ<code>Generator</code> å‡½æ•°çš„éå†å°±ç»ˆæ­¢äº†ï¼Œè¿”å›å€¼çš„<code>done</code>å±æ€§ä¸º<code>true</code>ã€‚</p><ul><li>å¦‚æœ<code>return()</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¸æä¾›å‚æ•°ï¼Œåˆ™è¿”å›å€¼çš„<code>value</code>å±æ€§ä¸º<code>undefined</code>ã€‚</li><li>å¦‚æœ <code>Generator</code> å‡½æ•°å†…éƒ¨æœ‰<code>try...finally</code>ä»£ç å—ï¼Œä¸”æ­£åœ¨æ‰§è¡Œ<code>try</code>ä»£ç å—ï¼Œé‚£ä¹ˆ<code>return()</code>æ–¹æ³•ä¼šå¯¼è‡´ç«‹åˆ»è¿›å…¥<code>finally</code>ä»£ç å—ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">numbers</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">numbers</span>();</span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line">g.<span class="keyword">return</span>(<span class="number">7</span>); <span class="comment">// &#123; value: 4, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 5, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 7, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>return()</code>æ–¹æ³•åï¼Œå°±å¼€å§‹æ‰§è¡Œ<code>finally</code>ä»£ç å—ï¼Œä¸æ‰§è¡Œ<code>try</code>é‡Œé¢å‰©ä¸‹çš„ä»£ç äº†ï¼Œç„¶åç­‰åˆ°<code>finally</code>ä»£ç å—æ‰§è¡Œå®Œï¼Œå†è¿”å›<code>return()</code>æ–¹æ³•æŒ‡å®šçš„è¿”å›å€¼ã€‚</p><hr><h3 id="18-8-æ–¹æ³•çš„å…±åŒç‚¹"><a href="#18-8-æ–¹æ³•çš„å…±åŒç‚¹" class="headerlink" title="18.8 æ–¹æ³•çš„å…±åŒç‚¹"></a>18.8 æ–¹æ³•çš„å…±åŒç‚¹</h3><p><code>Generator</code> å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡çš„<code>next()</code>ã€<code>throw()</code>ã€<code>return()</code>æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä»¶äº‹ï¼Œå®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯è®© <code>Generator</code> å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢<code>yield</code>è¡¨è¾¾å¼ã€‚</p><ul><li><code>next()</code>æ–¹æ³•æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ªå€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> g = <span class="keyword">function</span>* (x, y) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">yield</span> x + y;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = <span class="title function_">g</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">gen.<span class="title function_">next</span>(); <span class="comment">// Object &#123;value: 3, done: false&#125;</span></span><br><span class="line"></span><br><span class="line">gen.<span class="title function_">next</span>(<span class="number">1</span>); <span class="comment">// Object &#123;value: 1, done: true&#125;</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºå°† let result = yield x + y</span></span><br><span class="line"><span class="comment">// æ›¿æ¢æˆ let result = 1;</span></span><br></pre></td></tr></table></figure><ul><li><code>throw()</code>æ–¹æ³•æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª<code>throw</code>è¯­å¥ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gen.<span class="keyword">throw</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>)); <span class="comment">// Uncaught Error: å‡ºé”™äº†</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºå°† let result = yield x + y</span></span><br><span class="line"><span class="comment">// æ›¿æ¢æˆ let result = throw(new Error(&#x27;å‡ºé”™äº†&#x27;));</span></span><br></pre></td></tr></table></figure><ul><li><code>return()</code>æ–¹æ³•æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª<code>return</code>è¯­å¥ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">gen.<span class="keyword">return</span>(<span class="number">2</span>); <span class="comment">// Object &#123;value: 2, done: true&#125;</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºå°† let result = yield x + y</span></span><br><span class="line"><span class="comment">// æ›¿æ¢æˆ let result = return 2;</span></span><br></pre></td></tr></table></figure><hr><h3 id="18-9-yield-è¡¨è¾¾å¼"><a href="#18-9-yield-è¡¨è¾¾å¼" class="headerlink" title="18.9 yield* è¡¨è¾¾å¼"></a>18.9 yield* è¡¨è¾¾å¼</h3><p><code>ES6</code> æä¾›çš„<code>yield*</code>è¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª <code>Generator</code> å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª <code>Generator</code> å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> delegatedIterator = (<span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Bye!&quot;</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> delegatingIterator = (<span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Greetings!&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span>* delegatedIterator;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Ok, bye.&quot;</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> delegatingIterator) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;Greetings!</span></span><br><span class="line"><span class="comment">// &quot;Hello!&quot;</span></span><br><span class="line"><span class="comment">// &quot;Bye!&quot;</span></span><br><span class="line"><span class="comment">// &quot;Ok, bye.&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>delegatingIterator</code>æ˜¯ä»£ç†è€…ï¼Œ<code>delegatedIterator</code>æ˜¯è¢«ä»£ç†è€…ã€‚å¦‚æœè¢«ä»£ç†çš„ <code>Generator</code> å‡½æ•°æœ‰<code>return</code>è¯­å¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘ä»£ç†å®ƒçš„ <code>Generator</code> å‡½æ•°è¿”å›æ•°æ®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">genFuncWithReturn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;b&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;The result&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">logReturned</span>(<span class="params">genObj</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">yield</span>* genObj;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[...<span class="title function_">logReturned</span>(<span class="title function_">genFuncWithReturn</span>())];</span><br><span class="line"><span class="comment">// The result</span></span><br><span class="line"><span class="comment">// å€¼ä¸º [ &#x27;a&#x27;, &#x27;b&#x27; ]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨ä¸¤æ¬¡éå†ã€‚</p><ul><li>ç¬¬ä¸€æ¬¡æ˜¯æ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°<code>logReturned</code>è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚</li><li>ç¬¬äºŒæ¬¡æ˜¯<code>yield*</code>è¯­å¥éå†å‡½æ•°<code>genFuncWithReturn</code>è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚</li></ul><p>è¿™ä¸¤æ¬¡éå†çš„æ•ˆæœæ˜¯å åŠ çš„ï¼Œæœ€ç»ˆè¡¨ç°ä¸ºæ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°<code>genFuncWithReturn</code>è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚æ‰€ä»¥æœ€åçš„æ•°æ®è¡¨è¾¾å¼å¾—åˆ°çš„å€¼ç­‰äº<code>[ &#39;a&#39;, &#39;b&#39; ]</code>ã€‚åŒæ—¶ï¼Œå‡½æ•°<code>genFuncWithReturn</code>çš„<code>return</code>è¯­å¥çš„è¿”å›å€¼<code>The result</code>ï¼Œä¼šè¿”å›ç»™å‡½æ•°<code>logReturned</code>å†…éƒ¨çš„<code>result</code>å˜é‡ã€‚</p><hr><h3 id="18-10-ä½œä¸ºå¯¹è±¡çš„å±æ€§"><a href="#18-10-ä½œä¸ºå¯¹è±¡çš„å±æ€§" class="headerlink" title="18.10 ä½œä¸ºå¯¹è±¡çš„å±æ€§"></a>18.10 ä½œä¸ºå¯¹è±¡çš„å±æ€§</h3><p>å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯ <code>Generator</code> å‡½æ•°ï¼Œå¯ä»¥ç®€å†™æˆä¸‹é¢çš„å½¢å¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  * <span class="title function_">myGeneratorMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ƒçš„å®Œæ•´å½¢å¼å¦‚ä¸‹ï¼Œä¸ä¸Šé¢çš„å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚ï¼ˆè¯¦ç»†è¯·è§ä¸Šä¸€ç« çš„å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">myGeneratorMethod</span>: <span class="keyword">function</span>* () &#123;</span><br><span class="line">    <span class="comment">// Â·Â·Â·</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h3 id="18-11-å«ä¹‰"><a href="#18-11-å«ä¹‰" class="headerlink" title="18.11 å«ä¹‰"></a>18.11 å«ä¹‰</h3><p><strong>ï¼ˆ1ï¼‰Generator ä¸çŠ¶æ€æœº</strong></p><p><code>Generator</code> æ˜¯å®ç°çŠ¶æ€æœºçš„æœ€ä½³ç»“æ„ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„<code>clock</code>å‡½æ•°å°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ticking = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> clock = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (ticking) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tick!&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tock!&quot;</span>);</span><br><span class="line">  ticking = !ticking;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<code>clock</code>å‡½æ•°ä¸€å…±æœ‰ä¸¤ç§çŠ¶æ€<code>Tick</code>å’Œ<code>Tock</code>ï¼Œæ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±æ”¹å˜ä¸€æ¬¡çŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°å¦‚æœç”¨ <code>Generator</code> å®ç°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> clock = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tick!&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tock!&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>Generator</code> å®ç°ä¸ <code>ES5</code> å®ç°å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°å°‘äº†ç”¨æ¥ä¿å­˜çŠ¶æ€çš„å¤–éƒ¨å˜é‡<code>ticking</code>ï¼Œè¿™æ ·å°±æ›´ç®€æ´ï¼Œæ›´å®‰å…¨ï¼Œåœ¨å†™æ³•ä¸Šä¹Ÿæ›´ä¼˜é›…ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰Generator ä¸åç¨‹</strong></p><p>åç¨‹ <code>coroutine</code> æ˜¯ä¸€ç§ç¨‹åºè¿è¡Œçš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£æˆâ€œåä½œçš„çº¿ç¨‹â€æˆ–â€œåä½œçš„å‡½æ•°â€ã€‚åç¨‹æ—¢å¯ä»¥ç”¨å•çº¿ç¨‹å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šçº¿ç¨‹å®ç°ã€‚</p><ul><li><p><strong>åç¨‹ä¸å­ä¾‹ç¨‹çš„å·®å¼‚</strong><br>ä¼ ç»Ÿçš„â€œå­ä¾‹ç¨‹â€ <code>subroutine</code> é‡‡ç”¨å †æ ˆå¼â€œåè¿›å…ˆå‡ºâ€çš„æ‰§è¡Œæ–¹å¼ï¼Œåªæœ‰å½“è°ƒç”¨çš„å­å‡½æ•°å®Œå…¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸæ‰§è¡Œçˆ¶å‡½æ•°ã€‚<ins>åç¨‹ä¸å…¶ä¸åŒï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆå•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå³å¤šä¸ªå‡½æ•°ï¼‰å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰å¤„äºæ­£åœ¨è¿è¡Œçš„çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰éƒ½å¤„äºæš‚åœæ€ <code>suspended</code>ï¼Œçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ä¹‹é—´å¯ä»¥äº¤æ¢æ‰§è¡Œæƒ</ins>ã€‚è¿™ç§å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€äº¤æ¢æ‰§è¡Œæƒçš„çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºåç¨‹ã€‚</p></li><li><p><strong>åç¨‹ä¸æ™®é€šçº¿ç¨‹çš„å·®å¼‚</strong><br>åç¨‹é€‚åˆç”¨äºå¤šä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œå®ƒä¸æ™®é€šçš„çº¿ç¨‹å¾ˆç›¸ä¼¼ï¼Œéƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€å¯ä»¥åˆ†äº«å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<ins>åŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä½†æ˜¯è¿è¡Œçš„åç¨‹åªèƒ½æœ‰ä¸€ä¸ªï¼Œå…¶ä»–åç¨‹éƒ½å¤„äºæš‚åœçŠ¶æ€</ins>ã€‚æ­¤å¤–ï¼Œ<ins>æ™®é€šçš„çº¿ç¨‹æ˜¯æŠ¢å…ˆå¼çš„ï¼Œåˆ°åº•å“ªä¸ªçº¿ç¨‹ä¼˜å…ˆå¾—åˆ°èµ„æºï¼Œå¿…é¡»ç”±è¿è¡Œç¯å¢ƒå†³å®šï¼Œä½†æ˜¯åç¨‹æ˜¯åˆä½œå¼çš„ï¼Œæ‰§è¡Œæƒç”±åç¨‹è‡ªå·±åˆ†é…</ins>ã€‚</p></li></ul><p><code>Generator</code> å‡½æ•°æ˜¯ <code>ES6</code> å¯¹åç¨‹çš„å®ç°ï¼Œ<ins>ä½†å±äºä¸å®Œå…¨å®ç°</ins>ã€‚<code>Generator</code> å‡½æ•°è¢«ç§°ä¸ºâ€œåŠåç¨‹â€ï¼Œæ„æ€æ˜¯åªæœ‰ <code>Generator</code> å‡½æ•°çš„è°ƒç”¨è€…ï¼Œæ‰èƒ½å°†ç¨‹åºçš„æ‰§è¡Œæƒè¿˜ç»™ <code>Generator</code> å‡½æ•°ã€‚å¦‚æœæ˜¯å®Œå…¨å®ç°çš„åç¨‹ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®©æš‚åœçš„åç¨‹ç»§ç»­æ‰§è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">A</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆ‘æ˜¯A&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="title function_">B</span>(); <span class="comment">// Aåœä½ï¼Œåœ¨è¿™é‡Œè½¬äº¤çº¿ç¨‹æ‰§è¡Œæƒç»™B</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç»“æŸäº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆ‘æ˜¯B&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>; <span class="comment">// è¿”å›ï¼Œå¹¶ä¸”å°†çº¿ç¨‹æ‰§è¡Œæƒè¿˜ç»™A</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = <span class="title function_">A</span>();</span><br><span class="line">gen.<span class="title function_">next</span>();</span><br><span class="line">gen.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘æ˜¯A</span></span><br><span class="line"><span class="comment">// æˆ‘æ˜¯B</span></span><br><span class="line"><span class="comment">// ç»“æŸäº†</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>A</code>å°†æ‰§è¡Œæƒäº¤ç»™<code>B</code>ï¼Œæˆ‘ä»¬ç§°<code>A</code>æ˜¯<code>B</code>çš„çˆ¶åç¨‹ã€‚é‚£ä¹ˆç°åœ¨<code>B</code>æ‰§è¡Œï¼Œ<code>A</code>å°±ç›¸å½“äºå¤„äºæš‚åœçš„çŠ¶æ€ã€‚ç­‰åˆ°<code>B</code>æœ€å<code>return 100</code>ï¼Œæ‰§è¡Œæƒå°±ä¼šè¿˜ç»™<code>A</code>ã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰Generator ä¸ä¸Šä¸‹æ–‡</strong></p><p>æ‰§è¡Œ <code>JS</code> ä»£ç æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå…¨å±€çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ŒåŒ…å«äº†å½“å‰æ‰€æœ‰çš„å˜é‡å’Œå¯¹è±¡ã€‚æ‰§è¡Œå‡½æ•°æˆ–å—çº§ä»£ç æ—¶ï¼Œåˆä¼š<mark class="hl-label red">åœ¨å½“å‰ä¸Šä¸‹æ–‡ç¯å¢ƒçš„ä¸Šå±‚</mark> ï¼Œäº§ç”Ÿä¸€ä¸ª <mark class="hl-label blue">å‡½æ•°è¿è¡Œçš„ä¸Šä¸‹æ–‡</mark> ï¼Œä½œä¸º <mark class="hl-label green">å½“å‰activeçš„ä¸Šä¸‹æ–‡</mark> ï¼Œç”±æ­¤å½¢æˆä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒçš„å †æ ˆã€‚<br><br></p><p>è¿™ä¸ªå †æ ˆæ˜¯â€œåè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼Œæœ€åäº§ç”Ÿçš„ä¸Šä¸‹æ–‡ç¯å¢ƒé¦–å…ˆæ‰§è¡Œå®Œæˆï¼Œé€€å‡ºå †æ ˆï¼Œç„¶åå†æ‰§è¡Œå®Œæˆå®ƒä¸‹å±‚çš„ä¸Šä¸‹æ–‡ï¼Œç›´è‡³æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæˆï¼Œå †æ ˆæ¸…ç©ºã€‚<br><br></p><p><code>Generator</code> å‡½æ•°ä¸ä¸€æ ·ï¼Œå®ƒæ‰§è¡Œäº§ç”Ÿçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä¸€æ—¦<ins>é‡åˆ°<code>yield</code>å‘½ä»¤ï¼Œå°±ä¼šæš‚æ—¶é€€å‡ºå †æ ˆï¼Œä½†æ˜¯å¹¶ä¸æ¶ˆå¤±ï¼Œé‡Œé¢çš„æ‰€æœ‰å˜é‡å’Œå¯¹è±¡ä¼šå†»ç»“åœ¨å½“å‰çŠ¶æ€</ins>ã€‚ç­‰åˆ°å¯¹å®ƒæ‰§è¡Œ<code>next</code>å‘½ä»¤æ—¶ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒåˆä¼šé‡æ–°åŠ å…¥è°ƒç”¨æ ˆï¼Œå†»ç»“çš„å˜é‡å’Œå¯¹è±¡æ¢å¤æ‰§è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(g.<span class="title function_">next</span>().<span class="property">value</span>, g.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 1, 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ<code>g.next()</code>æ—¶ï¼Œ<code>Generator</code> å‡½æ•°<code>gen</code>çš„ä¸Šä¸‹æ–‡ä¼šåŠ å…¥å †æ ˆï¼Œå³å¼€å§‹è¿è¡Œ<code>gen</code>å†…éƒ¨çš„ä»£ç ã€‚ç­‰é‡åˆ°<code>yield 1</code>æ—¶ï¼Œ<code>gen</code>ä¸Šä¸‹æ–‡é€€å‡ºå †æ ˆï¼Œå†…éƒ¨çŠ¶æ€å†»ç»“ã€‚ç¬¬äºŒæ¬¡æ‰§è¡Œ<code>g.next()</code>æ—¶ï¼Œ<code>gen</code>ä¸Šä¸‹æ–‡é‡æ–°åŠ å…¥å †æ ˆï¼Œå˜æˆå½“å‰çš„ä¸Šä¸‹æ–‡ï¼Œé‡æ–°æ¢å¤æ‰§è¡Œã€‚</p><hr><h3 id="18-12-åº”ç”¨"><a href="#18-12-åº”ç”¨" class="headerlink" title="18.12 åº”ç”¨"></a>18.12 åº”ç”¨</h3><p><strong>ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾</strong></p><p><code>Generator</code> å‡½æ•°çš„æš‚åœæ‰§è¡Œçš„æ•ˆæœï¼Œæ„å‘³ç€<ins>å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå†™åœ¨<code>yield</code>è¡¨è¾¾å¼é‡Œé¢</ins>ï¼Œç­‰åˆ°è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶å†å¾€åæ‰§è¡Œã€‚æ‰€ä»¥ï¼Œ<code>Generator</code> å‡½æ•°çš„ä¸€ä¸ªé‡è¦å®é™…æ„ä¹‰å°±æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ”¹å†™å›è°ƒå‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">loadUI</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">showLoadingScreen</span>();</span><br><span class="line">  <span class="keyword">yield</span> <span class="title function_">loadUIDataAsynchronously</span>();</span><br><span class="line">  <span class="title function_">hideLoadingScreen</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> loader = <span class="title function_">loadUI</span>();</span><br><span class="line"><span class="comment">// åŠ è½½UI</span></span><br><span class="line">loader.<span class="title function_">next</span>();</span><br><span class="line"><span class="comment">// å¸è½½UI</span></span><br><span class="line">loader.<span class="title function_">next</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨<code>loadUI</code>å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œä»…è¿”å›ä¸€ä¸ªéå†å™¨ã€‚ä¸‹ä¸€æ¬¡å¯¹è¯¥éå†å™¨è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œåˆ™ä¼šæ˜¾ç¤º<code>Loading</code>ç•Œé¢ï¼Œå¹¶ä¸”å¼‚æ­¥åŠ è½½æ•°æ®ã€‚ç­‰åˆ°æ•°æ®åŠ è½½å®Œæˆï¼Œå†ä¸€æ¬¡ä½¿ç”¨<code>next</code>æ–¹æ³•ï¼Œåˆ™ä¼šéšè—<code>Loading</code>ç•Œé¢ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†</strong></p><p>å¦‚æœæœ‰ä¸€ä¸ªå¤šæ­¥æ“ä½œï¼Œé‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">step1</span>(<span class="keyword">function</span> (<span class="params">value1</span>) &#123;</span><br><span class="line">  <span class="title function_">step2</span>(value1, <span class="keyword">function</span> (<span class="params">value2</span>) &#123;</span><br><span class="line">    <span class="title function_">step3</span>(value2, <span class="keyword">function</span> (<span class="params">value3</span>) &#123;</span><br><span class="line">      <span class="title function_">step4</span>(value3, <span class="keyword">function</span> (<span class="params">value4</span>) &#123;</span><br><span class="line">        <span class="comment">// Do something with value4</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨ <code>Promise</code> æ”¹å†™ä¸Šé¢çš„ä»£ç ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(step1)</span><br><span class="line">  .<span class="title function_">then</span>(step2)</span><br><span class="line">  .<span class="title function_">then</span>(step3)</span><br><span class="line">  .<span class="title function_">then</span>(step4)</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">value4</span>) &#123;</span><br><span class="line">      <span class="comment">// Do something with value4</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">      <span class="comment">// Handle any error from step1 through step4</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .<span class="title function_">done</span>();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å·²ç»æŠŠå›è°ƒå‡½æ•°ï¼Œæ”¹æˆäº†ç›´çº¿æ‰§è¡Œçš„å½¢å¼ï¼Œä½†æ˜¯åŠ å…¥äº†å¤§é‡ <code>Promise</code> çš„è¯­æ³•ã€‚<code>Generator</code> å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„ä»£ç è¿è¡Œæµç¨‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">longRunningTask</span>(<span class="params">value1</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value2 = <span class="keyword">yield</span> <span class="title function_">step1</span>(value1);</span><br><span class="line">    <span class="keyword">let</span> value3 = <span class="keyword">yield</span> <span class="title function_">step2</span>(value2);</span><br><span class="line">    <span class="keyword">let</span> value4 = <span class="keyword">yield</span> <span class="title function_">step3</span>(value3);</span><br><span class="line">    <span class="keyword">let</span> value5 = <span class="keyword">yield</span> <span class="title function_">step4</span>(value4);</span><br><span class="line">    <span class="comment">// Do something with value4</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// Handle any error from step1 through step4</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œ<ins>ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰æ¬¡åºè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">scheduler</span>(<span class="title function_">longRunningTask</span>(initialValue));</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">scheduler</span>(<span class="params">task</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> taskObj = task.<span class="title function_">next</span>(task.<span class="property">value</span>);</span><br><span class="line">  <span class="comment">// å¦‚æœGeneratorå‡½æ•°æœªç»“æŸï¼Œå°±ç»§ç»­è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (!taskObj.<span class="property">done</span>) &#123;</span><br><span class="line">    task.<span class="property">value</span> = taskObj.<span class="property">value</span>;</span><br><span class="line">    <span class="title function_">scheduler</span>(task);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸Šé¢è¿™ç§åšæ³•ï¼Œåªé€‚åˆåŒæ­¥æ“ä½œï¼Œå³æ‰€æœ‰çš„<code>task</code>éƒ½å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œã€‚å› ä¸ºè¿™é‡Œçš„ä»£ç ä¸€å¾—åˆ°è¿”å›å€¼ï¼Œå°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæ²¡æœ‰åˆ¤æ–­å¼‚æ­¥æ“ä½œä½•æ—¶å®Œæˆã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰æ§åˆ¶æµç®¡ç† II</strong></p><p>åˆ©ç”¨<code>for...of</code>å¾ªç¯ä¼šè‡ªåŠ¨ä¾æ¬¡æ‰§è¡Œ<code>yield</code>å‘½ä»¤çš„ç‰¹æ€§ï¼Œèƒ½æä¾›ä¸€ç§æ›´ä¸€èˆ¬çš„æ§åˆ¶æµç®¡ç†çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œç”¨æ•°ç»„<code>steps</code>å°è£…äº†ä¸€ä¸ªä»»åŠ¡çš„å¤šä¸ªæ­¥éª¤ï¼Œå¹¶ä¾æ¬¡ä¸ºè¿™äº›æ­¥éª¤åŠ ä¸Š<code>yield</code>å‘½ä»¤ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> steps = [step1Func, step2Func, step3Func];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">iterateSteps</span>(<span class="params">steps</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; steps.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> step = steps[i];</span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">step</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†ä»»åŠ¡åˆ†è§£æˆæ­¥éª¤ä¹‹åï¼Œè¿˜å¯ä»¥å†å°†é¡¹ç›®åˆ†è§£æˆå¤šä¸ªä¾æ¬¡æ‰§è¡Œçš„ä»»åŠ¡<code>jobs</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> jobs = [job1, job2, job3];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">iterateJobs</span>(<span class="params">jobs</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; jobs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> job = jobs[i];</span><br><span class="line">    <span class="keyword">yield</span>* <span class="title function_">iterateSteps</span>(job.<span class="property">steps</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå°±å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯ä¸€æ¬¡æ€§ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡çš„æ‰€æœ‰æ­¥éª¤ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> step <span class="keyword">of</span> <span class="title function_">iterateJobs</span>(jobs)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(step.<span class="property">id</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æé†’ï¼Œä¸Šé¢çš„åšæ³•åªèƒ½ç”¨äºæ‰€æœ‰æ­¥éª¤éƒ½æ˜¯åŒæ­¥æ“ä½œçš„æƒ…å†µï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œçš„æ­¥éª¤ã€‚</p><hr><h2 id="19-Generator-å‡½æ•°å¼‚æ­¥åº”ç”¨"><a href="#19-Generator-å‡½æ•°å¼‚æ­¥åº”ç”¨" class="headerlink" title="19. Generator å‡½æ•°å¼‚æ­¥åº”ç”¨"></a>19. Generator å‡½æ•°å¼‚æ­¥åº”ç”¨</h2><h3 id="19-1-åŸºæœ¬æ¦‚å¿µ"><a href="#19-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="19.1 åŸºæœ¬æ¦‚å¿µ"></a>19.1 åŸºæœ¬æ¦‚å¿µ</h3><p><strong>ï¼ˆ1ï¼‰å¼‚æ­¥</strong></p><p>æ‰€è°“â€å¼‚æ­¥â€ï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªä»»åŠ¡è¢«äººä¸ºåˆ†æˆä¸¤æ®µï¼Œå…ˆæ‰§è¡Œç¬¬ä¸€æ®µï¼Œç„¶åè½¬è€Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åšå¥½äº†å‡†å¤‡ï¼Œå†å›è¿‡å¤´æ‰§è¡Œç¬¬äºŒæ®µ</ins>ã€‚</p><ul><li>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯è¯»å–æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä»»åŠ¡çš„ç¬¬ä¸€æ®µå‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œè¦æ±‚è¯»å–æ–‡ä»¶ã€‚ç„¶åï¼Œç¨‹åºæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›æ–‡ä»¶ï¼Œå†æ¥ç€æ‰§è¡Œä»»åŠ¡çš„ç¬¬äºŒæ®µå¤„ç†æ–‡ä»¶ã€‚</li></ul><p>ç›¸åº”åœ°ï¼Œè¿ç»­çš„æ‰§è¡Œå°±å«åšåŒæ­¥ã€‚ç”±äºæ˜¯è¿ç»­æ‰§è¡Œï¼Œä¸èƒ½æ’å…¥å…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿä»ç¡¬ç›˜è¯»å–æ–‡ä»¶çš„è¿™æ®µæ—¶é—´ï¼Œç¨‹åºåªèƒ½å¹²ç­‰ç€ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰å›è°ƒå‡½æ•°</strong></p><p><code>JS</code> è¯­è¨€å¯¹å¼‚æ­¥ç¼–ç¨‹çš„å®ç°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€è°“<ins>å›è°ƒå‡½æ•°ï¼Œå°±æ˜¯æŠŠä»»åŠ¡çš„ç¬¬äºŒæ®µå•ç‹¬å†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç­‰åˆ°é‡æ–°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;/etc/passwd&quot;</span>, <span class="string">&quot;utf-8&quot;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>readFile</code>å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡çš„ç¬¬äºŒæ®µã€‚ç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›äº†<code>/etc/passwd</code>è¿™ä¸ªæ–‡ä»¶ä»¥åï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰Promise</strong></p><p>å›è°ƒå‡½æ•°çš„é—®é¢˜å‡ºç°åœ¨å¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—ã€‚å‡å®šè¯»å–<code>A</code>æ–‡ä»¶ä¹‹åï¼Œå†è¯»å–<code>B</code>æ–‡ä»¶ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">readFile</span>(fileA, <span class="string">&quot;utf-8&quot;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  fs.<span class="title function_">readFile</span>(fileB, <span class="string">&quot;utf-8&quot;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸éš¾æƒ³è±¡ï¼Œå¦‚æœä¾æ¬¡è¯»å–ä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°å¤šé‡åµŒå¥—ã€‚å› ä¸ºå¤šä¸ªå¼‚æ­¥æ“ä½œå½¢æˆäº†å¼ºè€¦åˆï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œéœ€è¦ä¿®æ”¹ï¼Œå®ƒçš„ä¸Šå±‚å›è°ƒå‡½æ•°å’Œä¸‹å±‚å›è°ƒå‡½æ•°ï¼Œå¯èƒ½éƒ½è¦è·Ÿç€ä¿®æ”¹ã€‚<br><br></p><p><code>Promise</code> å¯¹è±¡å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºçš„ã€‚å®ƒä¸æ˜¯æ–°çš„è¯­æ³•åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„å†™æ³•ï¼Œ<ins>å…è®¸å°†å›è°ƒå‡½æ•°çš„åµŒå¥—ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> readFile = <span class="built_in">require</span>(<span class="string">&quot;fs-readfile-promise&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">readFile</span>(fileA)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">readFile</span>(fileB);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­çš„<code>fs-readfile-promise</code>æ¨¡å—ï¼Œè¿”å›ä¸€ä¸ª <code>Promise</code> ç‰ˆæœ¬çš„<code>readFile</code>å‡½æ•°ï¼Œå¹¶é€šè¿‡<code>then</code>æ–¹æ³•åŠ è½½å›è°ƒå‡½æ•°ï¼Œ<code>catch</code>æ–¹æ³•æ•æ‰æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚<br><br></p><p><code>Promise</code> çš„å†™æ³•åªæ˜¯å›è°ƒå‡½æ•°çš„æ”¹è¿›ï¼Œä½¿ç”¨<code>then</code>æ–¹æ³•ä»¥åï¼Œå¼‚æ­¥ä»»åŠ¡çš„ä¸¤æ®µæ‰§è¡Œçœ‹å¾—æ›´æ¸…æ¥šäº†ã€‚ä½†æ˜¯ï¼Œ<code>Promise</code> çš„æœ€å¤§é—®é¢˜æ˜¯ä»£ç å†—ä½™ï¼ŒåŸæ¥çš„ä»»åŠ¡è¢« <code>Promise</code> åŒ…è£…äº†ä¸€ä¸‹ï¼Œä¸ç®¡ä»€ä¹ˆæ“ä½œï¼Œä¸€çœ¼çœ‹å»è®¸å¤š<code>then</code>ï¼ŒåŸæ¥çš„è¯­ä¹‰å˜å¾—å¾ˆä¸æ¸…æ¥šã€‚<br><br></p><p><strong>ï¼ˆ4ï¼‰Generator å‡½æ•°</strong></p><p>â€œåç¨‹â€ <code>coroutine</code>ï¼Œæ˜¯å¤šä¸ªçº¿ç¨‹äº’ç›¸åä½œï¼Œå®Œæˆå¼‚æ­¥ä»»åŠ¡ã€‚åç¨‹æœ‰ç‚¹åƒå‡½æ•°ï¼Œåˆæœ‰ç‚¹åƒçº¿ç¨‹ã€‚å®ƒçš„è¿è¡Œæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œåç¨‹<code>A</code>å¼€å§‹æ‰§è¡Œã€‚</li><li>ç¬¬äºŒæ­¥ï¼Œ<ins>åç¨‹<code>A</code>æ‰§è¡Œåˆ°ä¸€åŠï¼Œè¿›å…¥æš‚åœï¼Œæ‰§è¡Œæƒè½¬ç§»åˆ°åç¨‹<code>B</code></ins>ã€‚</li><li>ç¬¬ä¸‰æ­¥ï¼Œä¸€æ®µæ—¶é—´åï¼Œåç¨‹<code>B</code>äº¤è¿˜æ‰§è¡Œæƒã€‚</li><li>ç¬¬å››æ­¥ï¼Œåç¨‹<code>A</code>æ¢å¤æ‰§è¡Œã€‚</li></ul><p>ä¸Šé¢æµç¨‹çš„åç¨‹<code>A</code>ï¼Œå°±æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œå› ä¸ºå®ƒåˆ†æˆä¸¤æ®µæˆ–å¤šæ®µæ‰§è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">asyncJob</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...å…¶ä»–ä»£ç </span></span><br><span class="line">  <span class="keyword">let</span> f = <span class="keyword">yield</span> <span class="title function_">readFile</span>(fileA);</span><br><span class="line">  <span class="comment">// ...å…¶ä»–ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„å‡½æ•°<code>asyncJob</code>æ˜¯ä¸€ä¸ªåç¨‹ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨å…¶ä¸­çš„<code>yield</code>å‘½ä»¤ï¼Œ<ins>è¡¨ç¤ºæ‰§è¡Œåˆ°æ­¤å¤„ï¼Œæ‰§è¡Œæƒå°†äº¤ç»™å…¶ä»–åç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>yield</code>å‘½ä»¤æ˜¯å¼‚æ­¥ä¸¤ä¸ªé˜¶æ®µçš„åˆ†ç•Œçº¿</ins>ã€‚<br><br></p><p><code>Generator</code> å‡½æ•°æ˜¯åç¨‹åœ¨ <code>ES6</code> çš„å®ç°ï¼Œæœ€å¤§ç‰¹ç‚¹å°±æ˜¯å¯ä»¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒï¼ˆå³æš‚åœæ‰§è¡Œï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå°è£…çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæˆ–è€…è¯´æ˜¯å¼‚æ­¥ä»»åŠ¡çš„å®¹å™¨ã€‚å¼‚æ­¥æ“ä½œéœ€è¦æš‚åœçš„åœ°æ–¹ï¼Œéƒ½ç”¨<code>yield</code>è¯­å¥æ³¨æ˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="keyword">yield</span> x + <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>(<span class="number">1</span>);</span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨ <code>Generator</code> å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ˆå³éå†å™¨ï¼‰<code>g</code>ã€‚è¿™æ˜¯ <code>Generator</code> å‡½æ•°ä¸åŒäºæ™®é€šå‡½æ•°çš„å¦ä¸€ä¸ªåœ°æ–¹ï¼Œå³æ‰§è¡Œå®ƒä¸ä¼šè¿”å›ç»“æœï¼Œè¿”å›çš„æ˜¯æŒ‡é’ˆå¯¹è±¡ã€‚è°ƒç”¨æŒ‡é’ˆ<code>g</code>çš„<code>next</code>æ–¹æ³•ï¼Œä¼šç§»åŠ¨å†…éƒ¨æŒ‡é’ˆï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€æ®µï¼‰ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªé‡åˆ°çš„<code>yield</code>è¯­å¥ï¼Œä¸Šä¾‹æ˜¯æ‰§è¡Œåˆ°<code>x + 2</code>ä¸ºæ­¢ã€‚<br><br></p><p>æ¢è¨€ä¹‹ï¼Œ<code>next</code>æ–¹æ³•çš„ä½œç”¨æ˜¯åˆ†é˜¶æ®µæ‰§è¡Œ<code>Generator</code>å‡½æ•°ã€‚æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„ä¿¡æ¯ï¼ˆ<code>value</code>å±æ€§å’Œ<code>done</code>å±æ€§ï¼‰ã€‚<code>value</code>å±æ€§æ˜¯<code>yield</code>è¯­å¥åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„å€¼ï¼›<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º <code>Generator</code> å‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œå³æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</p><hr><h3 id="19-2-æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†"><a href="#19-2-æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†" class="headerlink" title="19.2 æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†"></a>19.2 æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†</h3><p><code>Generator</code> å‡½æ•°å¯ä»¥æš‚åœå’Œæ¢å¤æ‰§è¡Œï¼Œè¿™æ˜¯å®ƒèƒ½å°è£…å¼‚æ­¥ä»»åŠ¡çš„æ ¹æœ¬åŸå› ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œä½¿å®ƒå¯ä»¥ä½œä¸ºå¼‚æ­¥ç¼–ç¨‹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š<ins>å‡½æ•°ä½“å†…å¤–çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†æœºåˆ¶</ins>ã€‚<br><br></p><p><code>next</code>è¿”å›å€¼çš„ <code>value</code> å±æ€§ï¼Œæ˜¯ <code>Generator</code> å‡½æ•°å‘å¤–è¾“å‡ºæ•°æ®ã€‚<code>next</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—å‚æ•°ï¼Œå‘ <code>Generator</code> å‡½æ•°ä½“å†…è¾“å…¥æ•°æ®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="keyword">yield</span> x + <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>(<span class="number">1</span>);</span><br><span class="line">g.<span class="title function_">next</span>(); <span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line">g.<span class="title function_">next</span>(<span class="number">2</span>); <span class="comment">// &#123; value: 2, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ª<code>next</code>æ–¹æ³•çš„<code>value</code>å±æ€§ï¼Œè¿”å›è¡¨è¾¾å¼<code>x + 2</code>çš„å€¼ã€‚ç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•å¸¦æœ‰å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è¢«ä¼ å…¥ <code>Generator</code> å‡½æ•°ï¼Œä½œä¸ºä¸Šä¸ªé˜¶æ®µå¼‚æ­¥ä»»åŠ¡çš„è¿”å›ç»“æœï¼Œä¹Ÿå°±æ˜¯<code>y</code>çš„å€¼ã€‚å› æ­¤ï¼Œè¿™ä¸€æ­¥çš„<code>value</code>å±æ€§ï¼Œè¿”å›çš„å°±æ˜¯<code>2</code>ã€‚<br><br></p><p><code>Generator</code> å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥éƒ¨ç½²é”™è¯¯å¤„ç†ä»£ç ï¼Œæ•è·å‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="keyword">yield</span> x + <span class="number">2</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>(<span class="number">1</span>);</span><br><span class="line">g.<span class="title function_">next</span>();</span><br><span class="line">g.<span class="keyword">throw</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line"><span class="comment">// å‡ºé”™äº†</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œ<code>Generator</code> å‡½æ•°ä½“å¤–ï¼Œ<ins>ä½¿ç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥è¢«å‡½æ•°ä½“å†…çš„<code>try...catch</code>ä»£ç å—æ•è·</ins>ã€‚è¿™æ„å‘³ç€ï¼Œ<ins>å‡ºé”™çš„ä»£ç ä¸å¤„ç†é”™è¯¯çš„ä»£ç ï¼Œå®ç°äº†æ—¶é—´å’Œç©ºé—´ä¸Šçš„åˆ†ç¦»ï¼Œè¿™å¯¹äºå¼‚æ­¥ç¼–ç¨‹æ— ç–‘æ˜¯å¾ˆé‡è¦çš„</ins>ã€‚</p><hr><h3 id="19-3-å¼‚æ­¥ä»»åŠ¡çš„å°è£…"><a href="#19-3-å¼‚æ­¥ä»»åŠ¡çš„å°è£…" class="headerlink" title="19.3 å¼‚æ­¥ä»»åŠ¡çš„å°è£…"></a>19.3 å¼‚æ­¥ä»»åŠ¡çš„å°è£…</h3><p>ä½¿ç”¨<code>Generator</code>å°è£…å¼‚æ­¥æ“ä½œçš„æ ¸å¿ƒæ€è·¯ï¼š</p><ul><li>åœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨<code>yield</code>äº¤å‡ºæ‰§è¡Œæƒã€‚</li><li>åœ¨å¼‚æ­¥ä»»åŠ¡ç»“æŸåï¼Œä½¿ç”¨<code>next</code>äº¤è¿˜æ‰§è¡Œæƒã€‚</li></ul><p>ä¸‹é¢çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>Generator</code> å‡½æ•°ï¼Œæ‰§è¡Œä¸€ä¸ªçœŸå®çš„å¼‚æ­¥ä»»åŠ¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. é¦–å…ˆå†™ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡,åœ¨ä¸€ç§’åè¿”å›ç‰¹å®šå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">asyncTask</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ¥ä¸‹æ¥å†™å‡ºæœŸæœ›æ‰§è¡Œçš„é¡ºåº</span></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">runTask</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> text = <span class="keyword">yield</span> asyncTask;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(text); <span class="comment">// æˆ‘ä»¬æœŸæœ›è¿™é‡Œæ­£å¸¸è¾“å‡º Hello World</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æŒ‰ç…§æœŸæœ›å€¼æ‰§è¡Œå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> gen = <span class="title function_">runTask</span>(); <span class="comment">// æ­¤æ—¶æ‰§è¡Œæƒå·²ç»äº¤å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œ gen.next().value å°±æ˜¯ asyncTaskï¼Œæ‰§è¡Œ asyncTask</span></span><br><span class="line"><span class="comment">// å…³é”®ç‚¹åœ¨äº callback é‡Œè°ƒç”¨ next äº¤è¿˜æ‰§è¡Œæƒ</span></span><br><span class="line"><span class="comment">// ç”±äº next æ–¹æ³•å¸¦æœ‰å‚æ•° textï¼Œä¸”æ˜¯ callback çš„è¿”å›å€¼ï¼Œæ‰€ä»¥æœ‰ç»ˆç«¯è¾“å‡ºã€‚</span></span><br><span class="line">gen.<span class="title function_">next</span>().<span class="title function_">value</span>(<span class="keyword">function</span> (<span class="params">text</span>) &#123;</span><br><span class="line">  gen.<span class="title function_">next</span>(text);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è™½ç„¶å¾ˆç²—ç³™ï¼Œä½†æ˜¯å·²ç»åæ˜ äº†ä½¿ç”¨<code>Generator</code>å°è£…å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒæ€æƒ³ã€‚æœ€ç›´è§‚çš„å—ç›Šå°±æ˜¯ï¼Œ<code>runTask</code>çš„å†…å®¹ä¸åŒæ­¥ä»£ç ç›¸ä¼¼ï¼Œæ¡ç†æ¸…æ™°ï¼Œå¾ˆé€‚åˆé˜…è¯»ã€‚<br><br></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ <code>Generator</code> å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯ä¸Šé¢ä»£ç ä¸­ç¬¬ä¸‰éƒ¨åˆ†çš„æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼Œå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µã€‚</p><hr><h3 id="19-4-Thunk-å‡½æ•°"><a href="#19-4-Thunk-å‡½æ•°" class="headerlink" title="19.4 Thunk å‡½æ•°"></a>19.4 Thunk å‡½æ•°</h3><p><code>Thunk</code> å‡½æ•°æ˜¯è‡ªåŠ¨æ‰§è¡Œ <code>Generator</code> å‡½æ•°çš„ä¸€ç§æ–¹æ³•ã€‚<br><br></p><p><strong>ï¼ˆ1ï¼‰å‚æ•°çš„æ±‚å€¼ç­–ç•¥</strong></p><p><code>Thunk</code> å‡½æ•°æ—©åœ¨ä¸Šä¸ªä¸–çºª <code>60</code> å¹´ä»£å°±è¯ç”Ÿäº†ã€‚é‚£æ—¶ï¼Œç¼–ç¨‹è¯­è¨€åˆšåˆšèµ·æ­¥ï¼Œè®¡ç®—æœºå­¦å®¶è¿˜åœ¨ç ”ç©¶ï¼Œç¼–è¯‘å™¨æ€ä¹ˆå†™æ¯”è¾ƒå¥½ã€‚ä¸€ä¸ªäº‰è®ºçš„ç„¦ç‚¹æ˜¯â€æ±‚å€¼ç­–ç•¥â€ï¼Œå³å‡½æ•°çš„å‚æ•°åˆ°åº•åº”è¯¥ä½•æ—¶æ±‚å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">m</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> m * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(x + <span class="number">5</span>)ï¼›</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å…ˆå®šä¹‰å‡½æ•°<code>f</code>ï¼Œç„¶åå‘å®ƒä¼ å…¥è¡¨è¾¾å¼<code>x + 5</code>ã€‚è¯·é—®ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥ä½•æ—¶æ±‚å€¼ï¼Ÿ<br><br></p><p>ä¸€ç§æ„è§æ˜¯<ins>â€œä¼ å€¼è°ƒç”¨â€</ins>ï¼Œå³åœ¨è¿›å…¥å‡½æ•°ä½“ä¹‹å‰ï¼Œå°±è®¡ç®—<code>x + 5</code>çš„å€¼ï¼Œå†å°†è¿™ä¸ªå€¼ä¼ å…¥å‡½æ•°<code>f</code>ã€‚<code>C</code> è¯­è¨€å°±é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">f</span>(x + <span class="number">5</span>);</span><br><span class="line"><span class="comment">// ä¼ å€¼è°ƒç”¨æ—¶ï¼Œç­‰åŒäº</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">6</span>);</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ„è§æ˜¯<ins>â€œä¼ åè°ƒç”¨â€</ins>ï¼Œå³ç›´æ¥å°†è¡¨è¾¾å¼<code>x + 5</code>ä¼ å…¥å‡½æ•°ä½“ï¼Œåªåœ¨ç”¨åˆ°å®ƒçš„æ—¶å€™æ±‚å€¼ã€‚<code>Haskell</code> è¯­è¨€é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">f</span>(x + <span class="number">5</span>)(</span><br><span class="line">  <span class="comment">// ä¼ åè°ƒç”¨æ—¶ï¼Œç­‰åŒäº</span></span><br><span class="line">  x + <span class="number">5</span></span><br><span class="line">) * <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>ä¼ å€¼è°ƒç”¨å’Œä¼ åè°ƒç”¨ï¼Œå“ªä¸€ç§æ¯”è¾ƒå¥½ï¼Ÿå›ç­”æ˜¯å„æœ‰åˆ©å¼Šã€‚ä¼ å€¼è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¯¹å‚æ•°æ±‚å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šè¿˜æ²¡ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æŸå¤±ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰Thunk å‡½æ•°çš„å«ä¹‰</strong></p><p>ç¼–è¯‘å™¨â€œä¼ åè°ƒç”¨â€çš„å®ç°ï¼Œå¾€å¾€æ˜¯å°†å‚æ•°æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°ä¹‹ä¸­ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±å«åš <code>Thunk</code> å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">m</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> m * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(x + <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> thunk = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">5</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">thunk</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">thunk</span>() * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° <code>f</code> çš„å‚æ•°<code>x + 5</code>è¢«ä¸€ä¸ªå‡½æ•°æ›¿æ¢äº†ã€‚å‡¡æ˜¯ç”¨åˆ°åŸå‚æ•°çš„åœ°æ–¹ï¼Œå¯¹<code>Thunk</code>å‡½æ•°æ±‚å€¼å³å¯ã€‚è¿™å°±æ˜¯ <code>Thunk</code> å‡½æ•°çš„å®šä¹‰ï¼Œ<ins>å®ƒæ˜¯â€œä¼ åè°ƒç”¨â€çš„ä¸€ç§å®ç°ç­–ç•¥ï¼Œç”¨æ¥æ›¿æ¢æŸä¸ªè¡¨è¾¾å¼</ins>ã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰JS è¯­è¨€çš„ Thunk å‡½æ•°</strong></p><p><ins><code>JavaScript</code> æ˜¯ä¼ å€¼è°ƒç”¨</ins>ï¼Œå®ƒçš„ <code>Thunk</code> å‡½æ•°å«ä¹‰æœ‰æ‰€ä¸åŒã€‚åœ¨ <code>JavaScript</code> ä¸­ï¼Œ<code>Thunk</code> å‡½æ•°æ›¿æ¢çš„ä¸æ˜¯è¡¨è¾¾å¼ï¼Œè€Œæ˜¯å¤šå‚æ•°å‡½æ•°ï¼Œå°†å…¶æ›¿æ¢æˆä¸€ä¸ªåªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°çš„å•å‚æ•°å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­£å¸¸ç‰ˆæœ¬çš„ readFileï¼ˆå¤šå‚æ•°ç‰ˆæœ¬ï¼‰</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(fileName, callback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Thunkç‰ˆæœ¬çš„ readFileï¼ˆå•å‚æ•°ç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Thunk</span> = <span class="keyword">function</span> (<span class="params">fileName</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„</span></span><br><span class="line">    <span class="keyword">return</span> fs.<span class="title function_">readFile</span>(fileName, callback);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> readFileThunk = <span class="title class_">Thunk</span>(fileName);</span><br><span class="line"><span class="title function_">readFileThunk</span>(callback);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>fs</code>æ¨¡å—çš„<code>readFile</code>æ–¹æ³•æ˜¯ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ–‡ä»¶åå’Œå›è°ƒå‡½æ•°ã€‚ç»è¿‡è½¬æ¢å™¨å¤„ç†ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªå•å‚æ•°å‡½æ•°ï¼Œåªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå•å‚æ•°ç‰ˆæœ¬ï¼Œå°±å«åš <code>Thunk</code> å‡½æ•°ã€‚<br><br></p><p>ä»»ä½•å‡½æ•°ï¼Œåªè¦å‚æ•°æœ‰å›è°ƒå‡½æ•°ï¼Œå°±èƒ½å†™æˆ <code>Thunk</code> å‡½æ•°çš„å½¢å¼ã€‚ï¼ˆ<a href="https://zhuanlan.zhihu.com/p/404060484">æ¨èé˜…è¯»</a>ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Thunk</span> = <span class="keyword">function</span> (<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args, callback);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰Thunkify æ¨¡å—</strong></p><p><code>Thunkify</code> æ¨¡å—çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> thunkify = <span class="built_in">require</span>(<span class="string">&quot;thunkify&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> read = <span class="title function_">thunkify</span>(fs.<span class="property">readFile</span>);</span><br><span class="line"><span class="title function_">read</span>(<span class="string">&quot;package.json&quot;</span>)(<span class="keyword">function</span> (<span class="params">err, str</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>Thunkify</code> çš„æºç ä¸ä¸Šä¸€èŠ‚é‚£ä¸ªç®€å•çš„è½¬æ¢å™¨éå¸¸åƒã€‚ï¼ˆ<a href="https://segmentfault.com/a/1190000010414406">æºç è§£è¯»</a>ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">thunkify</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> args = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="variable language_">arguments</span>.<span class="property">length</span>);</span><br><span class="line">    <span class="keyword">let</span> ctx = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; args.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">      args[i] = <span class="variable language_">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">done</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> called;</span><br><span class="line"></span><br><span class="line">      args.<span class="title function_">push</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (called) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        called = <span class="literal">true</span>;</span><br><span class="line">        done.<span class="title function_">apply</span>(<span class="literal">null</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        fn.<span class="title function_">apply</span>(ctx, args);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="title function_">done</span>(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒçš„æºç ä¸»è¦å¤šäº†ä¸€ä¸ªæ£€æŸ¥æœºåˆ¶ï¼Œå˜é‡<code>called</code>ç¡®ä¿å›è°ƒå‡½æ•°åªè¿è¡Œä¸€æ¬¡ã€‚è¿™æ ·çš„è®¾è®¡ä¸ä¸‹é¢çš„ <code>Generator</code> å‡½æ•°ç›¸å…³ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a, b, callback</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = a + b;</span><br><span class="line">  <span class="title function_">callback</span>(sum);</span><br><span class="line">  <span class="title function_">callback</span>(sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ft = <span class="title function_">thunkify</span>(f);</span><br><span class="line"><span class="keyword">let</span> print = <span class="variable language_">console</span>.<span class="property">log</span>.<span class="title function_">bind</span>(<span class="variable language_">console</span>);</span><br><span class="line"><span class="title function_">ft</span>(<span class="number">1</span>, <span class="number">2</span>)(print);</span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äº<code>thunkify</code>åªå…è®¸å›è°ƒå‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥åªè¾“å‡ºä¸€è¡Œç»“æœã€‚<br><br></p><p><strong>ï¼ˆ5ï¼‰Generator å‡½æ•°çš„æµç¨‹ç®¡ç†</strong></p><p><code>Thunk</code> å‡½æ•°å¯ä»¥ç”¨äº <code>Generator</code> å‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"><span class="keyword">let</span> res = g.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!res.<span class="property">done</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">value</span>);</span><br><span class="line">  res = g.<span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Generator</code> å‡½æ•°<code>gen</code>ä¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ‰€æœ‰æ­¥éª¤ã€‚<br><br></p><p>ä½†æ˜¯ï¼Œè¿™ä¸é€‚åˆå¼‚æ­¥æ“ä½œã€‚<ins>å¦‚æœå¿…é¡»ä¿è¯å‰ä¸€æ­¥æ‰§è¡Œå®Œï¼Œæ‰èƒ½æ‰§è¡Œåä¸€æ­¥ï¼Œä¸Šé¢çš„è‡ªåŠ¨æ‰§è¡Œå°±ä¸å¯è¡Œ</ins>ã€‚è¿™æ—¶ï¼Œ<code>Thunk</code> å‡½æ•°å°±èƒ½æ´¾ä¸Šç”¨å¤„ã€‚<br><br></p><p>ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ã€‚ä¸‹é¢çš„ <code>Generator</code> å‡½æ•°å°è£…äº†ä¸¤ä¸ªå¼‚æ­¥æ“ä½œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> thunkify = <span class="built_in">require</span>(<span class="string">&quot;thunkify&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> readFileThunk = <span class="title function_">thunkify</span>(fs.<span class="property">readFile</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> r1 = <span class="keyword">yield</span> <span class="title function_">readFileThunk</span>(<span class="string">&quot;/etc/fstab&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r1.<span class="title function_">toString</span>());</span><br><span class="line">  <span class="keyword">let</span> r2 = <span class="keyword">yield</span> <span class="title function_">readFileThunk</span>(<span class="string">&quot;/etc/shells&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(r2.<span class="title function_">toString</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<ins><code>yield</code>å‘½ä»¤ç”¨äºå°†ç¨‹åºçš„æ‰§è¡Œæƒç§»å‡º <code>Generator</code> å‡½æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå°†æ‰§è¡Œæƒå†äº¤è¿˜ç»™ <code>Generator</code> å‡½æ•°</ins>ã€‚<br><br></p><p>è¿™ç§æ–¹æ³•å°±æ˜¯ <code>Thunk</code> å‡½æ•°ï¼Œ<ins>å› ä¸ºå®ƒå¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œå°†æ‰§è¡Œæƒäº¤è¿˜ç»™ <code>Generator</code> å‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r1 = g.<span class="title function_">next</span>();</span><br><span class="line">r1.<span class="title function_">value</span>(<span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="comment">// r1.value å°±æ˜¯ readFileThunk æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err; <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> r2 = g.<span class="title function_">next</span>(data); <span class="comment">// å¦‚æœ data ä» readFileThunk æ–¹æ³•å›è°ƒå‡ºæ¥</span></span><br><span class="line">  <span class="comment">// å½’è¿˜æ‰§è¡Œæƒï¼Œr1 èµ‹å€¼æˆåŠŸï¼Œè¿è¡Œè‡³ä¸‹ä¸€ä¸ª yield</span></span><br><span class="line">  r2.<span class="title function_">value</span>(<span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    g.<span class="title function_">next</span>(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>g</code>æ˜¯ <code>Generator</code> å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆï¼Œè¡¨ç¤ºç›®å‰æ‰§è¡Œåˆ°å“ªä¸€æ­¥ã€‚<code>next</code>æ–¹æ³•è´Ÿè´£å°†æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€æ­¥ï¼Œå¹¶è¿”å›è¯¥æ­¥çš„<code>value</code>å±æ€§å’Œ<code>done</code>å±æ€§ã€‚<br><br></p><p>ä»”ç»†çœ‹ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥å‘ç° <code>Generator</code> å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶å®æ˜¯<ins>å°†åŒä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåå¤ä¼ å…¥<code>next</code>æ–¹æ³•çš„<code>value</code>å±æ€§</ins>ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨é€’å½’æ¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚ï¼ˆç†è®ºä¸Šï¼‰<br><br></p><p><strong>ï¼ˆ6ï¼‰Thunk å‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†</strong></p><p><code>Thunk</code> å‡½æ•°çœŸæ­£çš„å¨åŠ›ï¼Œåœ¨äºå¯ä»¥è‡ªåŠ¨æ‰§è¡Œ <code>Generator</code> å‡½æ•°ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªåŸºäº <code>Thunk</code> å‡½æ•°çš„ <code>Generator</code> æ‰§è¡Œå™¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> gen = <span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">next</span>(<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = gen.<span class="title function_">next</span>(data);</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">done</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    result.<span class="title function_">value</span>(next);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">g</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">run</span>(g);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<code>run</code>å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ª <code>Generator</code> å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚å†…éƒ¨çš„<code>next</code>å‡½æ•°å°±æ˜¯ <code>Thunk</code> çš„å›è°ƒå‡½æ•°ã€‚<code>next</code>å‡½æ•°å…ˆå°†æŒ‡é’ˆç§»åˆ° <code>Generator</code> å‡½æ•°çš„ä¸‹ä¸€æ­¥ï¼ˆ<code>gen.next</code>æ–¹æ³•ï¼‰ï¼Œç„¶ååˆ¤æ–­ <code>Generator</code> å‡½æ•°æ˜¯å¦ç»“æŸï¼ˆ<code>result.done</code>å±æ€§ï¼‰ï¼Œå¦‚æœæ²¡ç»“æŸï¼Œå°±å°†<code>next</code>å‡½æ•°å†ä¼ å…¥ <code>Thunk</code> å‡½æ•°ï¼ˆ<code>result.value</code>å±æ€§ï¼‰ï¼Œå¦åˆ™å°±ç›´æ¥é€€å‡ºã€‚<br><br></p><p>æœ‰äº†è¿™ä¸ªæ‰§è¡Œå™¨ï¼Œæ‰§è¡Œ <code>Generator</code> å‡½æ•°æ–¹ä¾¿å¤šäº†ã€‚ä¸ç®¡å†…éƒ¨æœ‰å¤šå°‘ä¸ªå¼‚æ­¥æ“ä½œï¼Œç›´æ¥æŠŠ <code>Generator</code> å‡½æ•°ä¼ å…¥<code>run</code>å‡½æ•°å³å¯ã€‚æ³¨æ„ï¼Œ<ins>å‰ææ˜¯æ¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œéƒ½è¦æ˜¯ <code>Thunk</code> å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè·Ÿåœ¨<code>yield</code>å‘½ä»¤åé¢çš„å¿…é¡»æ˜¯ <code>Thunk</code> å‡½æ•°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> g = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> f1 = <span class="keyword">yield</span> <span class="title function_">readFileThunk</span>(<span class="string">&quot;fileA&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> f2 = <span class="keyword">yield</span> <span class="title function_">readFileThunk</span>(<span class="string">&quot;fileB&quot;</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">let</span> fn = <span class="keyword">yield</span> <span class="title function_">readFileThunk</span>(<span class="string">&quot;fileN&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">run</span>(g);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>g</code>å°è£…äº†<code>n</code>ä¸ªå¼‚æ­¥çš„è¯»å–æ–‡ä»¶æ“ä½œï¼Œåªè¦æ‰§è¡Œ<code>run</code>å‡½æ•°ï¼Œè¿™äº›æ“ä½œå°±ä¼šè‡ªåŠ¨å®Œæˆã€‚è¿™æ ·ä¸€æ¥ï¼Œå¼‚æ­¥æ“ä½œä¸ä»…å¯ä»¥å†™å¾—åƒåŒæ­¥æ“ä½œï¼Œè€Œä¸”ä¸€è¡Œä»£ç å°±å¯ä»¥æ‰§è¡Œã€‚<br><br></p><p><code>Thunk</code> å‡½æ•°å¹¶ä¸æ˜¯ <code>Generator</code> å‡½æ•°è‡ªåŠ¨æ‰§è¡Œçš„å”¯ä¸€æ–¹æ¡ˆã€‚å› ä¸ºè‡ªåŠ¨æ‰§è¡Œçš„å…³é”®æ˜¯ï¼Œå¿…é¡»æœ‰ä¸€ç§æœºåˆ¶ï¼Œè‡ªåŠ¨æ§åˆ¶ <code>Generator</code> å‡½æ•°çš„æµç¨‹ï¼Œæ¥æ”¶å’Œäº¤è¿˜ç¨‹åºçš„æ‰§è¡Œæƒã€‚å›è°ƒå‡½æ•°å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œ<code>Promise</code> å¯¹è±¡ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><hr><h3 id="19-5-co-æ¨¡å—"><a href="#19-5-co-æ¨¡å—" class="headerlink" title="19.5 co æ¨¡å—"></a>19.5 co æ¨¡å—</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>Generator</code> å‡½æ•°ï¼Œç”¨äºä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> gen = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> f1 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/fstab&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> f2 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/shells&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">toString</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="title function_">toString</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/tj/co">co æ¨¡å—</a>å¯ä»¥ç”¨äº <code>Generator</code> å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œï¼Œä¸ç”¨å†ç¼–å†™ <code>Generator</code> å‡½æ•°çš„æ‰§è¡Œå™¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> co = <span class="built_in">require</span>(<span class="string">&quot;co&quot;</span>);</span><br><span class="line"><span class="title function_">co</span>(gen);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Generator</code> å‡½æ•°åªè¦ä¼ å…¥<code>co</code>å‡½æ•°ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p><p><code>co</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">co</span>(gen).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Generator å‡½æ•°æ‰§è¡Œå®Œæˆ&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰åˆ° <code>Generator</code> å‡½æ•°æ‰§è¡Œç»“æŸï¼Œå°±ä¼šè¾“å‡ºä¸€è¡Œæç¤ºã€‚<br><br></p><p><strong>ï¼ˆ1ï¼‰co æ¨¡å—çš„åŸç†</strong></p><p>ä¸ºä»€ä¹ˆ <code>co</code> å¯ä»¥è‡ªåŠ¨æ‰§è¡Œ <code>Generator</code> å‡½æ•°ï¼Ÿ</p><p>å‰é¢è¯´è¿‡ï¼Œ<ins><code>Generator</code> å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ã€‚å®ƒçš„è‡ªåŠ¨æ‰§è¡Œéœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå½“å¼‚æ­¥æ“ä½œæœ‰äº†ç»“æœï¼Œèƒ½å¤Ÿè‡ªåŠ¨äº¤å›æ‰§è¡Œæƒ</ins>ã€‚</p><p>ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><ul><li>å›è°ƒå‡½æ•°ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ <code>Thunk</code> å‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°é‡Œé¢äº¤å›æ‰§è¡Œæƒã€‚</li><li><code>Promise</code> å¯¹è±¡ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ <code>Promise</code> å¯¹è±¡ï¼Œç”¨<code>then</code>æ–¹æ³•äº¤å›æ‰§è¡Œæƒã€‚</li></ul><p><code>co</code> æ¨¡å—å…¶å®å°±æ˜¯å°†ä¸¤ç§è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆ<code>Thunk</code> å‡½æ•°å’Œ <code>Promise</code> å¯¹è±¡ï¼‰ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ¨¡å—ã€‚</p><ul><li>ä½¿ç”¨ <code>co</code> çš„å‰ææ¡ä»¶æ˜¯ï¼Œ<code>Generator</code> å‡½æ•°çš„<code>yield</code>å‘½ä»¤åé¢ï¼Œåªèƒ½æ˜¯ <code>Thunk</code> å‡½æ•°æˆ– <code>Promise</code> å¯¹è±¡ã€‚å¦‚æœæ•°ç»„æˆ–å¯¹è±¡çš„æˆå‘˜ï¼Œå…¨éƒ¨éƒ½æ˜¯ <code>Promise</code> å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>co</code>ã€‚<br><br></li></ul><p><strong>ï¼ˆ2ï¼‰åŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œ</strong></p><p>æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆï¼ŒæŠŠ<code>fs</code>æ¨¡å—çš„<code>readFile</code>æ–¹æ³•åŒ…è£…æˆä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> readFile = <span class="keyword">function</span> (<span class="params">fileName</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="comment">// Promise æ–°å»ºåç«‹å³æ‰§è¡Œ</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(fileName, <span class="keyword">function</span> (<span class="params">error, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reject</span>(error);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">resolve</span>(data); <span class="comment">// è¯»å–æˆåŠŸï¼Œä¼  data è¿› then æ–¹æ³•</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> f1 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/fstab&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> f2 = <span class="keyword">yield</span> <span class="title function_">readFile</span>(<span class="string">&quot;/etc/shells&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">toString</span>());</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="title function_">toString</span>());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸Šé¢çš„ <code>Generator</code> å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œæ­¤æ—¶ gen.next().value æ˜¯ readFile è¿”å›çš„ Promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">// resolve è¿”å›çš„ data è¿›å…¥å›è°ƒå‡½æ•°</span></span><br><span class="line">g.<span class="title function_">next</span>().<span class="property">value</span>.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  g.<span class="title function_">next</span>(data).<span class="property">value</span>.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    g.<span class="title function_">next</span>(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨æ‰§è¡Œå°±æ˜¯ç”¨<code>then</code>æ–¹æ³•ï¼Œå±‚å±‚æ·»åŠ å›è°ƒå‡½æ•°ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥å†™å‡ºä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">run</span>(<span class="params">gen</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> g = <span class="title function_">gen</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">next</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = g.<span class="title function_">next</span>(data);</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">done</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result.<span class="property">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    result.<span class="property">value</span>.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">run</span>(gen);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ <code>Generator</code> å‡½æ•°è¿˜æ²¡æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œ<code>next</code>å‡½æ•°å°±è°ƒç”¨è‡ªèº«ï¼Œå®ç°è‡ªåŠ¨æ‰§è¡Œã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰co æ¨¡å—çš„æºç </strong></p><p>é¦–å…ˆï¼Œ<code>co</code> å‡½æ•°æ¥å— <code>Generator</code> å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">co</span>(<span class="params">gen</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿”å›çš„ <code>Promise</code> å¯¹è±¡é‡Œé¢ï¼Œ<code>co</code> å…ˆæ£€æŸ¥å‚æ•°<code>gen</code>æ˜¯å¦ä¸º <code>Generator</code> å‡½æ•°ã€‚å¦‚æœæ˜¯ï¼Œå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆå¯¹è±¡ï¼›å¦‚æœä¸æ˜¯å°±è¿”å›ï¼Œå¹¶å°† <code>Promise</code> å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸º<code>resolved</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">co</span>(<span class="params">gen</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> gen === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      gen = gen.<span class="title function_">call</span>(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!gen || <span class="keyword">typeof</span> gen.<span class="property">next</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">resolve</span>(gen);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œ<code>co</code> å°† <code>Generator</code> å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒåŒ…è£…æˆ<code>onFulfilled</code>å‡½æ•°ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ•æ‰æŠ›å‡ºçš„é”™è¯¯ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">co</span>(<span class="params">gen</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> gen === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      gen = gen.<span class="title function_">call</span>(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!gen || <span class="keyword">typeof</span> gen.<span class="property">next</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">resolve</span>(gen);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onFulfilled</span>();</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">onFulfilled</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> ret;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        ret = gen.<span class="title function_">next</span>(res);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reject</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">next</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå°±æ˜¯å…³é”®çš„<code>next</code>å‡½æ•°ï¼Œå®ƒä¼šåå¤è°ƒç”¨è‡ªèº«ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">next</span>(<span class="params">ret</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (ret.<span class="property">done</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">resolve</span>(ret.<span class="property">value</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> value = toPromise.<span class="title function_">call</span>(ctx, ret.<span class="property">value</span>);</span><br><span class="line">  <span class="keyword">if</span> (value &amp;&amp; <span class="title function_">isPromise</span>(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">then</span>(onFulfilled, onRejected);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">onRejected</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">TypeError</span>(</span><br><span class="line">      <span class="string">&quot;You may only yield a function, promise, generator, array, or object, &quot;</span> +</span><br><span class="line">        <span class="string">&#x27;but the following object was passed: &quot;&#x27;</span> +</span><br><span class="line">        <span class="title class_">String</span>(ret.<span class="property">value</span>) +</span><br><span class="line">        <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>next</code>å‡½æ•°çš„å†…éƒ¨ä»£ç ï¼Œä¸€å…±åªæœ‰å››è¡Œå‘½ä»¤ã€‚</p><ul><li>æ£€æŸ¥å½“å‰æ˜¯å¦ä¸º <code>Generator</code> å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œå¦‚æœæ˜¯å°±è¿”å›ã€‚</li><li>ç¡®ä¿æ¯ä¸€æ­¥çš„è¿”å›å€¼ï¼Œæ˜¯ <code>Promise</code> å¯¹è±¡ã€‚</li><li><code>then</code>æ–¹æ³•ä¸ºè¿”å›å€¼åŠ ä¸Šå›è°ƒå‡½æ•°ï¼Œç„¶åé€šè¿‡<code>onFulfilled</code>å‡½æ•°å†æ¬¡è°ƒç”¨<code>next</code>å‡½æ•°ã€‚</li><li>åœ¨å‚æ•°ä¸ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹ï¼ˆå‚æ•°é <code>Thunk</code> å‡½æ•°å’Œ <code>Promise</code> å¯¹è±¡ï¼‰ï¼Œå°† <code>Promise</code> å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸º<code>rejected</code>ï¼Œä»è€Œç»ˆæ­¢æ‰§è¡Œã€‚</li></ul><p><strong>ï¼ˆ4ï¼‰å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œ</strong></p><p><code>co</code> æ”¯æŒå¹¶å‘çš„å¼‚æ­¥æ“ä½œï¼Œå³å…è®¸æŸäº›æ“ä½œåŒæ—¶è¿›è¡Œï¼Œç­‰åˆ°å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥ã€‚è¿™æ—¶ï¼Œè¦æŠŠå¹¶å‘çš„æ“ä½œéƒ½æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œé¢ï¼Œè·Ÿåœ¨<code>yield</code>è¯­å¥åé¢ã€‚ï¼ˆ<a href="https://es6.ruanyifeng.com/#docs/generator-async#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%A4%84%E7%90%86-Stream">ä¾‹å­</a>ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„çš„å†™æ³•</span></span><br><span class="line"><span class="title function_">co</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">yield</span> [<span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>), <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">2</span>)];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(onerror);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡çš„å†™æ³•</span></span><br><span class="line"><span class="title function_">co</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">yield</span> &#123;</span><br><span class="line">    <span class="number">1</span>: <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>),</span><br><span class="line">    <span class="number">2</span>: <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">2</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(onerror);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6å­¦ä¹ ç¬”è®° â€¢ ä¸Š</title>
      <link href="/posts/fbe58254.html"/>
      <url>/posts/fbe58254.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ¬è¯»ä¹¦ç¬”è®°èŠ‚æ˜¯é’ˆå¯¹é˜®ä¸€å³°ç¼–å†™çš„ <a href="https://es6.ruanyifeng.com/">ã€ŠECMAScript 6 å…¥é—¨æ•™ç¨‹ã€‹</a>çš„æ€»ç»“ã€‚é€‚åˆå·²ç»æŒæ¡ <code>ES5</code> çš„è¯»è€…ï¼Œç”¨æ¥äº†è§£è¿™é—¨è¯­è¨€çš„æœ€æ–°å‘å±•ã€‚ç¬”è®°å†…å®¹ä»…åŒ…æ‹¬æ—¥å¸¸å¼€å‘ä¸­å¯èƒ½ä¼šç”¨åˆ°çš„æ¦‚å¿µã€‚</p></blockquote><hr><h2 id="1-let-å’Œ-const-å‘½ä»¤"><a href="#1-let-å’Œ-const-å‘½ä»¤" class="headerlink" title="1. let å’Œ const å‘½ä»¤"></a>1. let å’Œ const å‘½ä»¤</h2><h3 id="1-1-let-å‘½ä»¤"><a href="#1-1-let-å‘½ä»¤" class="headerlink" title="1.1 let å‘½ä»¤"></a>1.1 let å‘½ä»¤</h3><p><code>let</code>çš„ç”¨æ³•ç±»ä¼¼äº<code>var</code>ï¼Œä½†æ‰€å£°æ˜çš„å˜é‡åªåœ¨<code>let</code>å‘½ä»¤æ‰€åœ¨çš„ä»£ç å—ï¼ˆå³ <code>&#123;&#125;</code> åŒ…è£¹èµ·æ¥çš„å†…å®¹ï¼‰å†…æœ‰æ•ˆã€‚è€Œ<code>var</code>æ‰€å£°æ˜çš„å˜é‡åœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">a; <span class="comment">// ReferenceError: a is not defined.</span></span><br><span class="line">b; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ1ï¼‰ä¸å­˜åœ¨å˜é‡æå‡</strong></p><p><code>var</code>å‘½ä»¤ä¼šå‘ç”Ÿ<ins>â€œå˜é‡æå‡â€ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸º<code>undefined</code></ins>ã€‚ä¸ºäº†çº æ­£è¿™ç§ç°è±¡ï¼Œ<code>let</code>å‘½ä»¤æ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var çš„æƒ…å†µ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo); <span class="comment">// è¾“å‡º undefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let çš„æƒ…å†µ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bar); <span class="comment">// æŠ¥é”™ ReferenceError</span></span><br><span class="line"><span class="keyword">let</span> bar = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰æš‚æ—¶æ€§æ­»åŒº</strong></p><p>åªè¦<a href="https://blog.poetries.top/browser-working-principle/guide/part2/lesson09.html#%E4%BD%9C%E7%94%A8%E5%9F%9F-scope">å—çº§ä½œç”¨åŸŸ</a>å†…å­˜åœ¨<code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€ï¼ˆ<code>binding</code>ï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// TDZ å¼€å§‹</span></span><br><span class="line">  tmp = <span class="string">&quot;abc&quot;</span>; <span class="comment">// ReferenceError</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp); <span class="comment">// ReferenceError</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tmp; <span class="comment">// TDZ ç»“æŸ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">  tmp = <span class="number">123</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp); <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="1-2-å—çº§ä½œç”¨åŸŸ"><a href="#1-2-å—çº§ä½œç”¨åŸŸ" class="headerlink" title="1.2 å—çº§ä½œç”¨åŸŸ"></a>1.2 å—çº§ä½œç”¨åŸŸ</h3><p><code>ES5</code> åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™å¸¦æ¥å¾ˆå¤šä¸åˆç†çš„æƒ…å†µ <br><br></p><p><strong>ï¼ˆ1ï¼‰å†…å±‚å˜é‡è¦†ç›–å¤–å±‚å˜é‡</strong><br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp);</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„åŸæ„æ˜¯ï¼Œ<code>if</code>ä»£ç å—çš„å¤–éƒ¨ä½¿ç”¨å¤–å±‚çš„<code>tmp</code>å˜é‡ï¼Œå†…éƒ¨ä½¿ç”¨å†…å±‚çš„<code>tmp</code>å˜é‡ã€‚ä½†æ˜¯å‡½æ•°<code>f</code>æ‰§è¡Œåï¼Œè¾“å‡ºç»“æœå´ä¸º<code>undefined</code>ã€‚<br><br></p><p><ins>åŸå› å…¶å®å°±æ˜¯å˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„<code>tmp</code>å˜é‡è¦†ç›–äº†å¤–å±‚çš„<code>tmp</code>å˜é‡</ins>ã€‚å®é™…ä¸­çš„ä»£ç å¦‚ä¸‹<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> tmp; <span class="comment">// å£°æ˜ä½†æœªèµ‹å€¼ undefined</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(tmp); <span class="comment">// è¾“å‡º undefined</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    tmp = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰ç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡</strong><br><br></p><p>ä¸‹é¢ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>åªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; s.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(s[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åº”å¯¹ä¸Šé¢è¿™äº›æƒ…å†µï¼Œ<code>ES6</code> æ–°å¢äº†å—çº§ä½œç”¨åŸŸï¼Œ<ins>å¤–å±‚ä½œç”¨åŸŸæ— æ³•è·å–åˆ°å†…å±‚ä½œç”¨åŸŸ</ins>ã€‚<ins>å³ä½¿å¤–å±‚å’Œå†…å±‚éƒ½ä½¿ç”¨ç›¸åŒå˜é‡åï¼Œä¹Ÿéƒ½äº’ä¸å¹²æ‰°</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> n = <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> n = <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(n); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‡½æ•°æœ‰ä¸¤ä¸ªä»£ç å—ï¼Œéƒ½å£°æ˜äº†å˜é‡<code>n</code>ï¼Œè¿è¡Œåè¾“å‡º <code>5</code>ã€‚è¿™è¡¨ç¤ºå¤–å±‚ä»£ç å—ä¸å—å†…å±‚ä»£ç å—çš„å½±å“ã€‚å¦‚æœä¸¤æ¬¡éƒ½ä½¿ç”¨<code>var</code>å®šä¹‰å˜é‡<code>n</code>ï¼Œæœ€åè¾“å‡ºçš„å€¼å°±æ˜¯ <code>10</code>ã€‚</p><hr><h3 id="1-3-const-å‘½ä»¤"><a href="#1-3-const-å‘½ä»¤" class="headerlink" title="1.3 const å‘½ä»¤"></a>1.3 const å‘½ä»¤</h3><p><code>const</code>å£°æ˜ä¸€ä¸ªåªè¯»å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ï¼Œ<ins>ä¸”å¿…é¡»ç«‹å³åˆå§‹åŒ–</ins>ã€‚ï¼ˆä¸ <code>let</code> ä¸€æ ·ï¼Œ<code>const</code> ä¸å­˜åœ¨å˜é‡æå‡ï¼Œå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.1415</span>;</span><br><span class="line"><span class="variable constant_">PI</span>; <span class="comment">// 3.1415</span></span><br><span class="line"><span class="variable constant_">PI</span> = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><p><code>const</code>ä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œ<ins>è€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨</ins>ã€‚</p><ul><li>å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ¯”å¦‚æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚</li><li>ä½†å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆã€‚<code>const</code>åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸º foo æ·»åŠ ä¸€ä¸ªå±æ€§</span></span><br><span class="line">foo.<span class="property">prop</span> = <span class="number">123</span>;</span><br><span class="line">foo.<span class="property">prop</span>; <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† foo æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠ¥é”™</span></span><br><span class="line">foo = &#123;&#125;; <span class="comment">// TypeError: &quot;foo&quot; is read-only</span></span><br></pre></td></tr></table></figure><hr><h2 id="2-å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#2-å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="2. å˜é‡çš„è§£æ„èµ‹å€¼"></a>2. å˜é‡çš„è§£æ„èµ‹å€¼</h2><h3 id="2-1-æ•°ç»„çš„è§£æ„èµ‹å€¼"><a href="#2-1-æ•°ç»„çš„è§£æ„èµ‹å€¼" class="headerlink" title="2.1 æ•°ç»„çš„è§£æ„èµ‹å€¼"></a>2.1 æ•°ç»„çš„è§£æ„èµ‹å€¼</h3><p>ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®, å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo, [[bar], baz]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]];</span><br><span class="line">foo; <span class="comment">// 1</span></span><br><span class="line">bar; <span class="comment">// 2</span></span><br><span class="line">baz; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [, , third] = [<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>];</span><br><span class="line">third; <span class="comment">// &quot;baz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">head; <span class="comment">// 1</span></span><br><span class="line">tail; <span class="comment">// [2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">&quot;a&quot;</span>];</span><br><span class="line">x; <span class="comment">// &quot;a&quot;</span></span><br><span class="line">y; <span class="comment">// undefined</span></span><br><span class="line">z; <span class="comment">// []</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„è§£æ„èµ‹å€¼æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µ</p><ul><li>è§£æ„ä¸æˆåŠŸï¼Œé‚£ä¹ˆå¯¹åº”å˜é‡çš„å€¼å°±ç­‰äº<code>undefined</code>ã€‚</li><li>ä¸å®Œå…¨è§£æ„ï¼Œç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼Œåªä¼šåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo] = []; <span class="comment">// foo == undefined</span></span><br><span class="line"><span class="keyword">let</span> [bar, foo] = [<span class="number">1</span>]; <span class="comment">// foo == undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line">a; <span class="comment">// 1</span></span><br><span class="line">b; <span class="comment">// 2</span></span><br><span class="line">d; <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ <code>Iterator</code> æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]); <span class="comment">// Set åŸç”Ÿå¸¦æœ‰ Iterator æ¥å£</span></span><br><span class="line">x; <span class="comment">// &quot;a&quot;</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„è§£æ„èµ‹å€¼å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå¹¶ä¸”<ins>å¿…é¡»ä¸¥æ ¼ç­‰äº<code>undefined</code></ins>æ‰ä¼šç”Ÿæ•ˆã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [];</span><br><span class="line">foo; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&quot;b&quot;</span>] = [<span class="string">&quot;a&quot;</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">&quot;b&quot;</span>] = [<span class="string">&quot;a&quot;</span>, <span class="literal">undefined</span>]; <span class="comment">// x=&#x27;a&#x27;, y=&#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line">x; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>];</span><br><span class="line">x; <span class="comment">// null</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-2-å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#2-2-å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="2.2 å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>2.2 å¯¹è±¡çš„è§£æ„èµ‹å€¼</h3><p>å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚<ins>æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®š</ins>ã€‚<ins>è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; bar, foo &#125; = &#123; <span class="attr">foo</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">bar</span>: <span class="string">&quot;bbb&quot;</span> &#125;;</span><br><span class="line">foo; <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">bar; <span class="comment">// &quot;bbb&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">bar</span>: <span class="string">&quot;bbb&quot;</span> &#125;;</span><br><span class="line">baz; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<ins>å˜é‡åä¸å±æ€§åä¸ä¸€è‡´</ins>ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">first</span>: <span class="string">&quot;hello&quot;</span>, <span class="attr">last</span>: <span class="string">&quot;world&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">first</span>: f, <span class="attr">last</span>: l &#125; = obj;</span><br><span class="line">f; <span class="comment">// &#x27;hello&#x27;</span></span><br><span class="line">l; <span class="comment">// &#x27;world&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„æœºåˆ¶ï¼Œæ˜¯<ins>å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡</ins>ï¼Œ<mark class="hl-label red">çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…</mark> ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: foo, <span class="attr">bar</span>: bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">bar</span>: <span class="string">&quot;bbb&quot;</span> &#125;;</span><br><span class="line"><span class="comment">// let &#123;foo, bar&#125; = &#123; foo: &#x27;aaa&#x27;, bar: &#x27;bbb&#x27; &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">bar</span>: <span class="string">&quot;bbb&quot;</span> &#125;;</span><br><span class="line">baz; <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">foo; <span class="comment">// error: foo is not defined</span></span><br></pre></td></tr></table></figure><p>è§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚ä¸‹é¢ä»£ç åˆ†åˆ«å¯¹<code>p</code>ï¼Œ<code>x</code>ï¼Œ<code>y</code>ä¸‰ä¸ªå±æ€§è¿›è¡Œè§£æ„èµ‹å€¼ã€‚æ³¨æ„ï¼Œåœ¨å¯¹<code>x</code>ï¼Œ<code>y</code>å±æ€§çš„è§£æ„èµ‹å€¼ä¹‹ä¸­ï¼Œ<code>x</code>ï¼Œ<code>y</code>æ˜¯å˜é‡ï¼Œ<code>p</code>æ˜¯æ¨¡å¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">p</span>: [<span class="string">&quot;Hello&quot;</span>, &#123; <span class="attr">y</span>: <span class="string">&quot;World&quot;</span> &#125;],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;</span><br><span class="line">  p,</span><br><span class="line">  <span class="attr">p</span>: [x, &#123; y &#125;],</span><br><span class="line">&#125; = obj;</span><br><span class="line">p; <span class="comment">// [&quot;Hello&quot;, &#123;y: &quot;World&quot;&#125;]</span></span><br><span class="line">x; <span class="comment">// &quot;Hello&quot;</span></span><br><span class="line">y; <span class="comment">// &quot;World&quot;</span></span><br></pre></td></tr></table></figure><p>å¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå¹¶ä¸”å¿…é¡»ä¸¥æ ¼ç­‰äº<code>undefined</code>æ‰ä¼šç”Ÿæ•ˆã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; x = <span class="number">3</span> &#125; = &#123;&#125;;</span><br><span class="line">x; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; x, y = <span class="number">5</span> &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="literal">undefined</span> &#125;;</span><br><span class="line">x; <span class="comment">// 1</span></span><br><span class="line">y; <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">x</span>: y = <span class="number">3</span> &#125; = &#123;&#125;;</span><br><span class="line">y; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">x</span>: y = <span class="number">3</span> &#125; = &#123; <span class="attr">x</span>: <span class="number">5</span> &#125;;</span><br><span class="line">y; <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><hr><h3 id="2-3-å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"><a href="#2-3-å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼" class="headerlink" title="2.3 å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"></a>2.3 å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼</h3><p>å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">&#123; x = <span class="number">0</span>, y = <span class="number">0</span> &#125; = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">move</span>(&#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span> &#125;); <span class="comment">// [3, 8]</span></span><br><span class="line"><span class="title function_">move</span>(&#123; <span class="attr">x</span>: <span class="number">3</span> &#125;); <span class="comment">// [3, 0]</span></span><br><span class="line"><span class="title function_">move</span>(&#123;&#125;); <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="title function_">move</span>(); <span class="comment">// [0, 0]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>move</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚é€šè¿‡å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„ï¼Œå¾—åˆ°å˜é‡<code>x</code>å’Œ<code>y</code>çš„å€¼ã€‚å¦‚æœè§£æ„å¤±è´¥ï¼Œ<code>x</code>å’Œ<code>y</code>ç­‰äºé»˜è®¤å€¼ã€‚<br><br></p><p>æ³¨æ„ï¼Œä¸‹é¢çš„å†™æ³•ä¼šå¾—åˆ°ä¸ä¸Šé¢ä¸ä¸€æ ·çš„ç»“æœã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">&#123; x, y &#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">move</span>(&#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span> &#125;); <span class="comment">// [3, 8]</span></span><br><span class="line"><span class="title function_">move</span>(&#123; <span class="attr">x</span>: <span class="number">3</span> &#125;); <span class="comment">// [3, undefined]</span></span><br><span class="line"><span class="title function_">move</span>(&#123;&#125;); <span class="comment">// [undefined, undefined]</span></span><br><span class="line"><span class="title function_">move</span>(); <span class="comment">// [0, 0]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç <ins>ä¸ºå‡½æ•°<code>move</code>çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ä¸ºå˜é‡<code>x</code>å’Œ<code>y</code>æŒ‡å®šé»˜è®¤å€¼</ins>ã€‚å½“å‚æ•°ä¸º<code>undefined</code>æ—¶ï¼Œå‚æ•°é»˜è®¤å€¼å¯ç”¨ã€‚</p><hr><h3 id="2-4-è§£æ„èµ‹å€¼çš„ç”¨é€”"><a href="#2-4-è§£æ„èµ‹å€¼çš„ç”¨é€”" class="headerlink" title="2.4 è§£æ„èµ‹å€¼çš„ç”¨é€”"></a>2.4 è§£æ„èµ‹å€¼çš„ç”¨é€”</h3><p><strong>ï¼ˆ1ï¼‰äº¤æ¢å˜é‡çš„å€¼</strong></p><p>ä¸‹é¢ä»£ç äº¤æ¢å˜é‡<code>x</code>å’Œ<code>y</code>çš„å€¼ï¼Œè¿™æ ·çš„å†™æ³•ç®€æ´æ˜“è¯»ï¼Œè¯­ä¹‰æ¸…æ™°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">[x, y] = [y, x]; <span class="comment">// x = 2, y = 1</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</strong></p><p>å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a, b, c] = <span class="title function_">example</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = <span class="title function_">example</span>();</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰æå– JSON æ•°æ®</strong></p><p>è§£æ„èµ‹å€¼å¯¹æå– <code>JSON</code> å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå°¤å…¶æœ‰ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">42</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: [<span class="number">867</span>, <span class="number">5309</span>],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(id, status, number);</span><br><span class="line"><span class="comment">// 42, &quot;OK&quot;, [867, 5309]</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å‡½æ•°å‚æ•°çš„å®šä¹‰</strong></p><p>è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">[x, y, z]</span>) &#123; ... &#125;</span><br><span class="line"><span class="title function_">f</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">&#123;x, y, z&#125;</span>) &#123; ... &#125;</span><br><span class="line"><span class="title function_">f</span>(&#123;<span class="attr">z</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰éå† Map ç»“æ„</strong></p><p>å‰é¢æåˆ°ï¼Œä»»ä½•éƒ¨ç½²äº† <code>Iterator</code> æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ã€‚<code>Map</code> ç»“æ„åŸç”Ÿæ”¯æŒ <code>Iterator</code> æ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;first&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;second&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot; is &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br></pre></td></tr></table></figure><hr><h2 id="3-å­—ç¬¦ä¸²çš„æ‰©å±•"><a href="#3-å­—ç¬¦ä¸²çš„æ‰©å±•" class="headerlink" title="3. å­—ç¬¦ä¸²çš„æ‰©å±•"></a>3. å­—ç¬¦ä¸²çš„æ‰©å±•</h2><p><a href="https://es6.ruanyifeng.com/#docs/string">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="3-1-æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#3-1-æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="3.1 æ¨¡æ¿å­—ç¬¦ä¸²"></a>3.1 æ¨¡æ¿å­—ç¬¦ä¸²</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;#result&quot;</span>).<span class="title function_">append</span>(<span class="string">`</span></span><br><span class="line"><span class="string">  There are &lt;b&gt;<span class="subst">$&#123;basket.count&#125;</span>&lt;/b&gt; items</span></span><br><span class="line"><span class="string">   in your basket, &lt;em&gt;<span class="subst">$&#123;basket.onSale&#125;</span>&lt;/em&gt;</span></span><br><span class="line"><span class="string">  are on sale!</span></span><br><span class="line"><span class="string">`</span>);</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆ<code>template string</code>ï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Bob&quot;</span>,</span><br><span class="line">  time = <span class="string">&quot;today&quot;</span>;</span><br><span class="line"><span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span>;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼ï¼Œæ¢è¡Œï¼Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&quot;Hello&quot;</span> + <span class="string">&quot;World&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">`Hello</span></span><br><span class="line"><span class="string">World`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str1); <span class="comment">// HelloWorld</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2); <span class="comment">// Hello</span></span><br><span class="line"><span class="comment">// World æ¢è¡Œè¢«ä¿ç•™</span></span><br></pre></td></tr></table></figure><hr><h3 id="3-2-æ ‡ç­¾æ¨¡æ¿"><a href="#3-2-æ ‡ç­¾æ¨¡æ¿" class="headerlink" title="3.2 æ ‡ç­¾æ¨¡æ¿"></a>3.2 æ ‡ç­¾æ¨¡æ¿</h3><p>æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆ<code>tagged template</code>ï¼‰ã€‚</p><ul><li>æ ‡ç­¾æ¨¡æ¿ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„æ˜¯å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯ç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">alert<span class="string">`hello`</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="title function_">alert</span>([<span class="string">&quot;hello&quot;</span>]);</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç›´æ¥è°ƒç”¨äº†ã€‚ä¼šå…ˆå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tag</span>(<span class="params">stringArr, ...values</span>)&#123; ... &#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tag</span>(<span class="params">stringArr, value1, value2</span>)&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">tag<span class="string">`Hello <span class="subst">$&#123; a + b &#125;</span> world <span class="subst">$&#123; a * b &#125;</span>`</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="title function_">tag</span>([<span class="string">&#x27;Hello &#x27;</span>, <span class="string">&#x27; world &#x27;</span>, <span class="string">&#x27;&#x27;</span>], <span class="number">15</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="4-å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"><a href="#4-å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•" class="headerlink" title="4. å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"></a>4. å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•</h2><h3 id="4-1-æ–°å¢æ–¹æ³•"><a href="#4-1-æ–°å¢æ–¹æ³•" class="headerlink" title="4.1 æ–°å¢æ–¹æ³•"></a>4.1 æ–°å¢æ–¹æ³•</h3><p><code>ES5</code> ä¸­åªæœ‰<code>indexOf()</code>æ–¹æ³•å¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚<code>ES6</code> åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•</p><ul><li><code>includes()</code>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚</li><li><code>startsWith()</code>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚</li><li><code>endsWith()</code>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">startsWith</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">endsWith</span>(<span class="string">&quot;!&quot;</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">includes</span>(<span class="string">&quot;o&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">startsWith</span>(<span class="string">&quot;world&quot;</span>, <span class="number">6</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">endsWith</span>(<span class="string">&quot;Hello&quot;</span>, <span class="number">5</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">includes</span>(<span class="string">&quot;Hello&quot;</span>, <span class="number">6</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°<code>n</code>æ—¶ï¼Œ<code>endsWith()</code>çš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•ä¸åŒã€‚å®ƒé’ˆå¯¹å‰<code>n</code>ä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬<code>n</code>ä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚<br><br></p><p><code>repeat()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå°†åŸå­—ç¬¦ä¸²é‡å¤<code>n</code>æ¬¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;na&quot;</span>.<span class="title function_">repeat</span>(<span class="number">3</span>); <span class="comment">// &quot;nana&quot;</span></span><br><span class="line"><span class="string">&quot;na&quot;</span>.<span class="title function_">repeat</span>(<span class="string">&quot;2&quot;</span>); <span class="comment">// &quot;nana&quot; è½¬æ¢æˆæ•°å­—</span></span><br><span class="line"><span class="string">&quot;na&quot;</span>.<span class="title function_">repeat</span>(<span class="number">0</span>); <span class="comment">// &quot;&quot;</span></span><br><span class="line"><span class="string">&quot;na&quot;</span>.<span class="title function_">repeat</span>(<span class="number">2.9</span>); <span class="comment">// &quot;nana&quot; å–æ•´</span></span><br><span class="line"><span class="string">&quot;na&quot;</span>.<span class="title function_">repeat</span>(-<span class="number">1</span>); <span class="comment">// RangeError</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> å¼•å…¥å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦åŠŸèƒ½ï¼Œèƒ½åœ¨æŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦æ—¶ï¼Œå¾€å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚<code>padStart()</code>ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼Œ<code>padEnd()</code>ç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;x&quot;</span>.<span class="title function_">padStart</span>(<span class="number">5</span>, <span class="string">&quot;ab&quot;</span>); <span class="comment">// &#x27;ababx&#x27; è¡¥åˆ°length == 5</span></span><br><span class="line"><span class="string">&quot;abc&quot;</span>.<span class="title function_">padStart</span>(<span class="number">10</span>, <span class="string">&quot;0123456789&quot;</span>);</span><br><span class="line"><span class="comment">// &#x27;0123456abc&#x27; å¦‚æœä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æœ€å¤§é•¿åº¦ï¼Œåˆ™ä¼šæˆªå»è¶…å‡ºçš„ä½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;x&quot;</span>.<span class="title function_">padEnd</span>(<span class="number">5</span>, <span class="string">&quot;ab&quot;</span>); <span class="comment">// &#x27;xabab&#x27;</span></span><br><span class="line"><span class="string">&quot;x&quot;</span>.<span class="title function_">padEnd</span>(<span class="number">4</span>, <span class="string">&quot;ab&quot;</span>); <span class="comment">// &#x27;xaba&#x27;</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> æ–°å¢äº†<code>trimStart()</code>å’Œ<code>trimEnd()</code>ä¸¤ä¸ªæ–¹æ³•ã€‚å®ƒä»¬çš„è¡Œä¸ºä¸<code>trim()</code>ä¸€è‡´ï¼Œ<code>trimStart()</code>æ¶ˆé™¤å­—ç¬¦ä¸²å¤´éƒ¨çš„ç©ºæ ¼ï¼Œ<code>trimEnd()</code>æ¶ˆé™¤å°¾éƒ¨çš„ç©ºæ ¼ã€‚å®ƒä»¬è¿”å›çš„éƒ½æ˜¯æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="string">&quot;  abc  &quot;</span>;</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">trim</span>(); <span class="comment">// &quot;abc&quot;</span></span><br><span class="line">s.<span class="title function_">trimStart</span>(); <span class="comment">// &quot;abc  &quot;</span></span><br><span class="line">s.<span class="title function_">trimEnd</span>(); <span class="comment">// &quot;  abc&quot;</span></span><br></pre></td></tr></table></figure><p><code>ES5</code>ä¸­ï¼Œ<code>replace()</code>åªèƒ½æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚å¦‚æœè¦æ›¿æ¢æ‰€æœ‰çš„åŒ¹é…ï¼Œéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„<code>g</code>ä¿®é¥°ç¬¦ã€‚<code>ES6</code>å¼•å…¥äº†<code>replaceAll()</code>æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ›¿æ¢æ‰€æœ‰åŒ¹é…ã€‚å®ƒè¿”å›çš„æ˜¯æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;aabbcc&quot;</span>.<span class="title function_">replace</span>(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;_&quot;</span>);</span><br><span class="line"><span class="comment">// &#x27;aa_bcc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;aabbcc&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/b/g</span>, <span class="string">&quot;_&quot;</span>);</span><br><span class="line"><span class="comment">// &#x27;aa__cc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;aabbcc&quot;</span>.<span class="title function_">replaceAll</span>(<span class="string">&quot;b&quot;</span>, <span class="string">&quot;_&quot;</span>);</span><br><span class="line"><span class="comment">// &#x27;aa__cc&#x27;</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> å¢åŠ äº†<code>matchAll()</code>æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å–å‡ºå­—ç¬¦ä¸²é‡Œé¢æ‰€æœ‰åŒ¹é…ã€‚ä½†æ˜¯ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼Œè€Œä¸æ˜¯æ•°ç»„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> string = <span class="string">&quot;test1test2test3&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/t(e)(st(\d?))/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> match <span class="keyword">of</span> string.<span class="title function_">matchAll</span>(regex)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(match);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;]</span></span><br><span class="line"><span class="comment">// [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;]</span></span><br><span class="line"><span class="comment">// [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span></span><br></pre></td></tr></table></figure><p>éå†å™¨è½¬ä¸ºæ•°ç»„æ˜¯éå¸¸ç®€å•çš„ï¼Œä½¿ç”¨<code>...</code>è¿ç®—ç¬¦å’Œ<code>Array.from()</code>æ–¹æ³•å°±å¯ä»¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•ä¸€</span></span><br><span class="line">[...string.<span class="title function_">matchAll</span>(regex)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(string.<span class="title function_">matchAll</span>(regex));</span><br></pre></td></tr></table></figure><hr><h2 id="5-æ­£åˆ™çš„æ‰©å±•"><a href="#5-æ­£åˆ™çš„æ‰©å±•" class="headerlink" title="5. æ­£åˆ™çš„æ‰©å±•"></a>5. æ­£åˆ™çš„æ‰©å±•</h2><p><a href="https://es6.ruanyifeng.com/#docs/regex">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="5-1-å…·åç»„åŒ¹é…"><a href="#5-1-å…·åç»„åŒ¹é…" class="headerlink" title="5.1 å…·åç»„åŒ¹é…"></a>5.1 å…·åç»„åŒ¹é…</h3><p>æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åœ†æ‹¬å·è¿›è¡Œ<a href="https://segmentfault.com/a/1190000021043947">ç»„åŒ¹é…</a>ã€‚ä½¿ç”¨<code>exec</code>æ–¹æ³•ï¼Œå°±å¯ä»¥å°†è¿™åŒ¹é…ç»“æœæå–å‡ºæ¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">RE_DATE</span> = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> matchObj = <span class="variable constant_">RE_DATE</span>.<span class="title function_">exec</span>(<span class="string">&quot;1999-12-31&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> year = matchObj[<span class="number">1</span>]; <span class="comment">// 1999</span></span><br><span class="line"><span class="keyword">const</span> month = matchObj[<span class="number">2</span>]; <span class="comment">// 12</span></span><br><span class="line"><span class="keyword">const</span> day = matchObj[<span class="number">3</span>]; <span class="comment">// 31</span></span><br></pre></td></tr></table></figure><p>ç»„åŒ¹é…çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ¯ä¸€ç»„çš„åŒ¹é…å«ä¹‰ä¸å®¹æ˜“çœ‹å‡ºæ¥ï¼Œè€Œä¸”åªèƒ½ç”¨æ•°å­—åºå·<code>XXX[1]</code>å¼•ç”¨ï¼Œè¦æ˜¯ç»„çš„é¡ºåºå˜äº†ï¼Œå¼•ç”¨çš„æ—¶å€™å°±å¿…é¡»ä¿®æ”¹åºå·ã€‚<br><br></p><p><code>ES6</code> å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼ˆ<code>Named Capture Groups</code>ï¼‰ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">RE_DATE</span> = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> matchObj = <span class="variable constant_">RE_DATE</span>.<span class="title function_">exec</span>(<span class="string">&quot;1999-12-31&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> year = matchObj.<span class="property">groups</span>.<span class="property">year</span>; <span class="comment">// &quot;1999&quot;</span></span><br><span class="line"><span class="keyword">const</span> month = matchObj.<span class="property">groups</span>.<span class="property">month</span>; <span class="comment">// &quot;12&quot;</span></span><br><span class="line"><span class="keyword">const</span> day = matchObj.<span class="property">groups</span>.<span class="property">day</span>; <span class="comment">// &quot;31&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-æ•°å€¼çš„æ‰©å±•"><a href="#6-æ•°å€¼çš„æ‰©å±•" class="headerlink" title="6. æ•°å€¼çš„æ‰©å±•"></a>6. æ•°å€¼çš„æ‰©å±•</h2><p><a href="https://es6.ruanyifeng.com/#docs/number">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="6-1-BigInt-æ•°æ®ç±»å‹"><a href="#6-1-BigInt-æ•°æ®ç±»å‹" class="headerlink" title="6.1 BigInt æ•°æ®ç±»å‹"></a>6.1 BigInt æ•°æ®ç±»å‹</h3><p><code>ES5</code> ä¸­æ‰€æœ‰æ•°å­—éƒ½ä¿å­˜æˆ <code>64</code> ä½æµ®ç‚¹æ•°ï¼Œè¿™ç»™æ•°å€¼çš„è¡¨ç¤ºå¸¦æ¥äº†ä¸¤å¤§é™åˆ¶ï¼š</p><ul><li>æ•°å€¼çš„ç²¾åº¦åªèƒ½åˆ° <code>53</code> ä¸ªäºŒè¿›åˆ¶ä½ï¼Œç›¸å½“äº <code>16</code> ä¸ªåè¿›åˆ¶ä½ï¼Œå¤§äºè¿™ä¸ªèŒƒå›´çš„æ•´æ•°ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºã€‚ ï¼ˆä¸é€‚åˆè¿›è¡Œç§‘å­¦å’Œé‡‘èæ–¹é¢çš„ç²¾ç¡®è®¡ç®—ï¼‰</li><li>å¤§äºæˆ–ç­‰äº<code>2</code>çš„<code>1024</code>æ¬¡æ–¹çš„æ•°å€¼æ— æ³•è¡¨ç¤ºï¼Œä¼šè¿”å›<code>Infinity</code>ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¶…è¿‡ 53 ä¸ªäºŒè¿›åˆ¶ä½çš„æ•°å€¼ï¼Œæ— æ³•ä¿æŒç²¾åº¦</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">53</span>) === <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">53</span>) + <span class="number">1</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¶…è¿‡ 2 çš„ 1024 æ¬¡æ–¹çš„æ•°å€¼ï¼Œæ— æ³•è¡¨ç¤º</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, <span class="number">1024</span>); <span class="comment">// Infinity</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ <code>BigInt</code>ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯ <code>ECMAScript</code> çš„<a href="https://juejin.cn/post/6954892721173561358">ç¬¬å…«ç§æ•°æ®ç±»å‹</a>ã€‚<code>BigInt</code> <ins>åªç”¨æ¥è¡¨ç¤ºæ•´æ•°</ins>ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">2172141653n</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">15346349309n</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// BigInt å¯ä»¥ä¿æŒç²¾åº¦</span></span><br><span class="line">a * b; <span class="comment">// 33334444555566667777n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šæ•´æ•°æ— æ³•ä¿æŒç²¾åº¦</span></span><br><span class="line"><span class="title class_">Number</span>(a) * <span class="title class_">Number</span>(b); <span class="comment">// 33334444555566670000</span></span><br></pre></td></tr></table></figure><p><code>BigInt</code> ä¸æ™®é€šæ•´æ•°æ˜¯ä¸¤ç§å€¼ï¼Œå®ƒä»¬ä¹‹é—´å¹¶ä¸ç›¸ç­‰ï¼Œä¸”ä¸èƒ½è¿›è¡Œæ··åˆè¿ç®—ã€‚ä¸ºäº†ä¸ <code>Number</code> ç±»å‹åŒºåˆ«ï¼Œ<code>BigInt</code> ç±»å‹çš„æ•°æ®å¿…é¡»æ·»åŠ åç¼€<code>n</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">42n</span> === <span class="number">42</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="number">1n</span> + <span class="number">1.3</span>; <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><hr><h2 id="7-å‡½æ•°çš„æ‰©å±•"><a href="#7-å‡½æ•°çš„æ‰©å±•" class="headerlink" title="7. å‡½æ•°çš„æ‰©å±•"></a>7. å‡½æ•°çš„æ‰©å±•</h2><h3 id="7-1-å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"><a href="#7-1-å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼" class="headerlink" title="7.1 å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"></a>7.1 å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</h3><p><code>ES6</code> å…è®¸ä¸ºå‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå¯ä»¥ç›´æ¥å†™åœ¨å‚æ•°å®šä¹‰çš„åé¢ï¼ˆé€šå¸¸æ˜¯å‡½æ•°çš„å°¾å‚æ•°ï¼‰ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Point</span>(<span class="params">x = <span class="number">0</span>, y = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">x</span> = x; <span class="comment">// this.x = x || 0 ï¼ˆES5 å†™æ³•ï¼‰</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">y</span> = y; <span class="comment">// this.y = y || 0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Point</span>();</span><br><span class="line">p; <span class="comment">// &#123; x: 0, y: 0 &#125;</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æœ‰ä¸¤ä¸ªå¥½å¤„</p><ul><li>é˜…è¯»ä»£ç çš„äººï¼Œå¯ä»¥ç«‹åˆ»æ„è¯†åˆ°å“ªäº›å‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¸ç”¨æŸ¥çœ‹å‡½æ•°ä½“æˆ–æ–‡æ¡£ã€‚</li><li>æœ‰åˆ©äºå°†æ¥çš„ä»£ç ä¼˜åŒ–ï¼Œå³ä½¿æœªæ¥çš„ç‰ˆæœ¬åœ¨å¯¹å¤–æ¥å£ä¸­ï¼Œå½»åº•æ‹¿æ‰è¿™ä¸ªå‚æ•°ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä»¥å‰çš„ä»£ç æ— æ³•è¿è¡Œã€‚</li></ul><p>å‚æ•°é»˜è®¤å€¼å¯ä»¥ä¸è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ç»“åˆä½¿ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetch</span>(<span class="params">url, &#123; body = <span class="string">&quot;&quot;</span>, method = <span class="string">&quot;GET&quot;</span>, headers = &#123;&#125; &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;http://example.com&quot;</span>, &#123;&#125;);</span><br><span class="line"><span class="comment">// &quot;GET&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>fetch</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ä¸‰ä¸ªå±æ€§éƒ½æœ‰é»˜è®¤å€¼ã€‚è¿™ç§å†™æ³•ä¸èƒ½çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœç»“åˆå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetch</span>(<span class="params">url, &#123; body = <span class="string">&quot;&quot;</span>, method = <span class="string">&quot;GET&quot;</span>, headers = &#123;&#125; &#125; = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line"><span class="comment">// &quot;GET&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå½“å‡½æ•°<code>fetch</code>æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åæ‰æ˜¯è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œå˜é‡<code>method</code>æ‰ä¼šå–åˆ°é»˜è®¤å€¼<code>GET</code>ã€‚</p><p>æ³¨æ„ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ç”Ÿæ•ˆä»¥åï¼Œå‚æ•°è§£æ„èµ‹å€¼ä¾ç„¶ä¼šè¿›è¡Œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">&#123; a, b = <span class="string">&quot;world&quot;</span> &#125; = &#123; a: <span class="string">&quot;hello&quot;</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(); <span class="comment">// world</span></span><br></pre></td></tr></table></figure><hr><h3 id="7-2-rest-å‚æ•°"><a href="#7-2-rest-å‚æ•°" class="headerlink" title="7.2 rest å‚æ•°"></a>7.2 rest å‚æ•°</h3><p><code>rest</code> å‚æ•°å¯ä»¥ä»£æ›¿<code>arguments</code>å¯¹è±¡ï¼Œå»è·å–å‡½æ•°çš„å¤šä½™å‚æ•°ã€‚<code>rest</code> å‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼Œå®ƒåªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// argumentså˜é‡çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sortNumbers</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">arguments</span>).<span class="title function_">sort</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sortNumbers</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// [1,2,3,5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// restå‚æ•°çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sortNumbers</span> = (<span class="params">...numbers</span>) =&gt; numbers.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sortNumbers</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// [1,2,3,5]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„ä¸¤ç§å†™æ³•ï¼Œæ¯”è¾ƒåå¯ä»¥å‘ç°ï¼Œ<code>rest</code> å‚æ•°çš„å†™æ³•æ›´è‡ªç„¶ä¹Ÿæ›´ç®€æ´ã€‚</p><hr><h3 id="7-3-ç®­å¤´å‡½æ•°"><a href="#7-3-ç®­å¤´å‡½æ•°" class="headerlink" title="7.3 ç®­å¤´å‡½æ•°"></a>7.3 ç®­å¤´å‡½æ•°</h3><p><code>ES6</code> å…è®¸ä½¿ç”¨â€œç®­å¤´â€ <code>=&gt;</code> å®šä¹‰å‡½æ•°ã€‚</p><ul><li>å¦‚æœç®­å¤´å‡½æ•°ä¸éœ€è¦å‚æ•°æˆ–éœ€è¦å¤šä¸ªå‚æ•°ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªåœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†ã€‚</li><li>å¦‚æœç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†å¤šäºä¸€æ¡è¯­å¥ï¼Œå°±è¦ä½¿ç”¨å¤§æ‹¬å·å°†å®ƒä»¬æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨<code>return</code>è¯­å¥è¿”å›ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params"></span>) =&gt; <span class="number">5</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; num1 + num2;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">num1, num2</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="keyword">function</span> (<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°å¯ä»¥ä¸å˜é‡è§£æ„ç»“åˆä½¿ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">full</span> = (<span class="params">&#123; first, last &#125;</span>) =&gt; first + <span class="string">&quot; &quot;</span> + last;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">full</span>(<span class="params">person</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> person.<span class="property">first</span> + <span class="string">&quot; &quot;</span> + person.<span class="property">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°è¿˜å¯ä»¥å’Œä¸Šé¢çš„ <code>rest</code> å‚æ•°ç»“åˆä½¿ç”¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">numbers</span> = (<span class="params">...nums</span>) =&gt; nums;</span><br><span class="line"></span><br><span class="line"><span class="title function_">numbers</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">headAndTail</span> = (<span class="params">head, ...tail</span>) =&gt; [head, tail];</span><br><span class="line"></span><br><span class="line"><span class="title function_">headAndTail</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// [1,[2,3,4,5]]</span></span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°çš„é‡è¦ç”¨å¤„æ˜¯ç®€åŒ–<a href="https://segmentfault.com/a/1190000021942060">å›è°ƒå‡½æ•°</a>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šå‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šå‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> result = values.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> result = values.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br></pre></td></tr></table></figure><p>ç®­å¤´å‡½æ•°æœ‰å‡ ä¸ªä½¿ç”¨<a href="https://es6.ruanyifeng.com/#docs/function#%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9">æ³¨æ„ç‚¹</a>ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>å¯¹è±¡ã€‚</p><ul><li>å¯¹äº<ins>æ™®é€šå‡½æ•°æ¥è¯´ï¼Œå†…éƒ¨çš„<code>this</code>æŒ‡å‘å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡</ins>ï¼Œä½†æ˜¯<ins>è¿™ä¸€ç‚¹å¯¹ç®­å¤´å‡½æ•°ä¸æˆç«‹ã€‚å®ƒæ²¡æœ‰è‡ªå·±çš„<code>this</code>å¯¹è±¡ï¼Œå†…éƒ¨çš„<code>this</code>å°±æ˜¯å®šä¹‰æ—¶ä¸Šå±‚ä½œç”¨åŸŸä¸­çš„<code>this</code></ins>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<ins>ç®­å¤´å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘æ˜¯å›ºå®šçš„</ins>ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œ<ins>æ™®é€šå‡½æ•°çš„<code>this</code>æŒ‡å‘æ˜¯å¯å˜çš„</ins>ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">s1</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">s2</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">s1</span>++, <span class="number">1000</span>);</span><br><span class="line">  <span class="comment">// æ™®é€šå‡½æ•°</span></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s2</span>++;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> timer = <span class="keyword">new</span> <span class="title class_">Timer</span>(); <span class="comment">// æ³¨æ„</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;s1: &quot;</span>, timer.<span class="property">s1</span>), <span class="number">3100</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;s2: &quot;</span>, timer.<span class="property">s2</span>), <span class="number">3100</span>);</span><br><span class="line"><span class="comment">// s1: 3</span></span><br><span class="line"><span class="comment">// s2: 0</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Timer</code>å‡½æ•°å†…éƒ¨è®¾ç½®äº†ä¸¤ä¸ªå®šæ—¶å™¨ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°ã€‚<ins>å‰è€…çš„<code>this</code>ç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå³<code>Timer</code>å‡½æ•°ï¼Œåè€…çš„<code>this</code>æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå³å…¨å±€å¯¹è±¡</ins>ã€‚æ‰€ä»¥ï¼Œ<code>3100</code> æ¯«ç§’ä¹‹åï¼Œ<code>timer.s1</code>è¢«æ›´æ–°äº† <code>3</code> æ¬¡ï¼Œè€Œ<code>timer.s2</code>ä¸€æ¬¡éƒ½æ²¡æ›´æ–°ã€‚</p><hr><h2 id="8-æ•°ç»„çš„æ‰©å±•"><a href="#8-æ•°ç»„çš„æ‰©å±•" class="headerlink" title="8. æ•°ç»„çš„æ‰©å±•"></a>8. æ•°ç»„çš„æ‰©å±•</h2><h3 id="8-1-æ‰©å±•è¿ç®—ç¬¦"><a href="#8-1-æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="8.1 æ‰©å±•è¿ç®—ç¬¦"></a>8.1 æ‰©å±•è¿ç®—ç¬¦</h3><p>æ‰©å±•è¿ç®—ç¬¦ <code>...</code>ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚ç±»ä¼¼ <code>rest</code> å‚æ•°çš„é€†è¿ç®—ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>, ...[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>)</span><br><span class="line"><span class="comment">// 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line">[...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>)]</span><br><span class="line"><span class="comment">// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]</span></span><br></pre></td></tr></table></figure><p>æ‰©å±•è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥ä»£æ›¿<code>apply()</code>æ–¹æ³•å°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES5 çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">f.<span class="title function_">apply</span>(<span class="literal">null</span>, args);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> args = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="title function_">f</span>(...args);</span><br></pre></td></tr></table></figure><hr><h3 id="8-2-æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"><a href="#8-2-æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨" class="headerlink" title="8.2 æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"></a>8.2 æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨</h3><p><strong>ï¼ˆ1ï¼‰å¤åˆ¶æ•°ç»„</strong></p><p>æ•°ç»„æ˜¯å¤åˆçš„æ•°æ®ç±»å‹ï¼Œç›´æ¥å¤åˆ¶çš„è¯ï¼Œåªæ˜¯å¤åˆ¶äº†æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å…‹éš†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚æ‰©å±•è¿ç®—ç¬¦æä¾›äº†å¤åˆ¶æ•°ç»„çš„ç®€ä¾¿å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = a1;</span><br><span class="line"></span><br><span class="line">a2[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">a1; <span class="comment">// [2, 2]ï¼Œæµ…æ‹·è´</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">const</span> a2 = [...a1];</span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">const</span> [...a2] = a1;</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰åˆå¹¶æ•°ç»„</strong></p><p>æ‰©å±•è¿ç®—ç¬¦æä¾›äº†æ•°ç»„åˆå¹¶çš„æ–°å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> arr3 = [<span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 çš„åˆå¹¶æ•°ç»„</span></span><br><span class="line">arr1.<span class="title function_">concat</span>(arr2, arr3);</span><br><span class="line"><span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 çš„åˆå¹¶æ•°ç»„</span></span><br><span class="line">[...arr1, ...arr2, ...arr3];</span><br><span class="line"><span class="comment">// [ &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; ]</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡ä¸¤ç§æ–¹æ³•éƒ½æ˜¯<a href="https://vue3js.cn/interview/JavaScript/copy.html">æµ…æ‹·è´</a>ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ç‰¹åˆ«å°å¿ƒã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a1 = [&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;];</span><br><span class="line"><span class="keyword">const</span> a2 = [&#123; <span class="attr">bar</span>: <span class="number">2</span> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a3 = a1.<span class="title function_">concat</span>(a2);</span><br><span class="line"><span class="keyword">const</span> a4 = [...a1, ...a2];</span><br><span class="line"></span><br><span class="line">a3[<span class="number">0</span>] === a1[<span class="number">0</span>]; <span class="comment">// true</span></span><br><span class="line">a4[<span class="number">0</span>] === a1[<span class="number">0</span>]; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a3</code>å’Œ<code>a4</code>æ˜¯ç”¨ä¸¤ç§ä¸åŒæ–¹æ³•åˆå¹¶è€Œæˆçš„æ–°æ•°ç»„ï¼Œä½†æ˜¯å®ƒä»¬çš„æˆå‘˜éƒ½æ˜¯å¯¹åŸæ•°ç»„æˆå‘˜çš„å¼•ç”¨ï¼Œè¿™å°±æ˜¯æµ…æ‹·è´ã€‚<ins>å¦‚æœä¿®æ”¹äº†å¼•ç”¨æŒ‡å‘çš„å€¼ï¼Œä¼šåŒæ­¥åæ˜ åˆ°æ–°æ•°ç»„</ins>ã€‚<br><br></p><p><strong>ï¼ˆ3ï¼‰ä¸è§£æ„èµ‹å€¼ç»“åˆ</strong></p><p>æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">first; <span class="comment">// 1</span></span><br><span class="line">rest; <span class="comment">// [2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = [];</span><br><span class="line">first; <span class="comment">// undefined</span></span><br><span class="line">rest; <span class="comment">// []</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡</strong></p><p>æ‰©å±•è¿ç®—ç¬¦è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„ <code>Iterator</code> æ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰ <code>Iterator</code> æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚æ¯”å¦‚å­—ç¬¦ä¸²ï¼Œ<code>Map</code>å’Œ<code>Set</code>ï¼Œ<code>Generator</code>å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[...<span class="string">&quot;hello&quot;</span>];</span><br><span class="line"><span class="comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, <span class="string">&quot;one&quot;</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="string">&quot;two&quot;</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="string">&quot;three&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [...map.<span class="title function_">keys</span>()]; <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> go = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">[...<span class="title function_">go</span>()]; <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><hr><h3 id="8-3-æ–°å¢æ–¹æ³•"><a href="#8-3-æ–°å¢æ–¹æ³•" class="headerlink" title="8.3 æ–°å¢æ–¹æ³•"></a>8.3 æ–°å¢æ–¹æ³•</h3><p><code>Array.from()</code>æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œç±»ä¼¼æ•°ç»„çš„å¯¹è±¡å’Œå¯éå†çš„å¯¹è±¡ã€‚ï¼ˆåŒ…æ‹¬ <code>ES6</code> æ–°å¢çš„æ•°æ®ç»“æ„ <code>Set</code> å’Œ <code>Map</code>ï¼Œå’Œéƒ¨ç½²äº† <code>Iterator</code> æ¥å£çš„æ•°æ®ç»“æ„ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].<span class="property">slice</span>.<span class="title function_">call</span>(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><p><code>Array.from()</code>è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„<code>map()</code>æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike, <span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike).<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// [1, 4, 9]</span></span><br></pre></td></tr></table></figure><p><code>Array.of()</code>æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚å®ƒå¯ä»¥æ›¿ä»£<code>Array()</code>æˆ–<code>new Array()</code>ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">3</span>); <span class="comment">// [3]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">3</span>).<span class="property">length</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½</span></span><br><span class="line"><span class="title class_">Array</span>(); <span class="comment">// []</span></span><br><span class="line"><span class="title class_">Array</span>(<span class="number">3</span>); <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="title class_">Array</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>); <span class="comment">// [3, 11, 8]</span></span><br></pre></td></tr></table></figure><p><code>find()</code>æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º<code>true</code>çš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚<br><br></p><p><code>findIndex()</code>æ–¹æ³•çš„ç”¨æ³•ä¸<code>find()</code>æ–¹æ³•ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›<code>-1</code>ã€‚<code>find()</code>å’Œ<code>findIndex()</code>éƒ½æ˜¯ä»æ•°ç»„çš„<code>0</code>å·ä½ï¼Œä¾æ¬¡å‘åæ£€æŸ¥ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, -<span class="number">5</span>, <span class="number">10</span>]</span><br><span class="line">  .<span class="title function_">find</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line">  [</span><br><span class="line">    <span class="comment">// -5</span></span><br><span class="line"></span><br><span class="line">    (<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>)</span><br><span class="line">  ].<span class="title function_">findIndex</span>(<span class="keyword">function</span> (<span class="params">value, index, arr</span>) &#123;</span><br><span class="line">    <span class="comment">// å½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŸæ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">  &#125;); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸ä¹‹ç›¸åï¼Œ<code>findLast()</code>å’Œ<code>findLastIndex()</code>æ˜¯ä»æ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜å¼€å§‹ï¼Œä¾æ¬¡å‘å‰æ£€æŸ¥ï¼Œå…¶ä»–éƒ½ä¿æŒä¸å˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">4</span> &#125;];</span><br><span class="line"></span><br><span class="line">array.<span class="title function_">findLast</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n.<span class="property">value</span> % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// &#123; value: 3 &#125;</span></span><br><span class="line">array.<span class="title function_">findLastIndex</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n.<span class="property">value</span> % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p><code>fill()</code>æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚å®ƒè¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].<span class="title function_">fill</span>(<span class="number">7</span>);</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">7</span>)[</span><br><span class="line">  <span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line">  (<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>)</span><br><span class="line">].<span class="title function_">fill</span>(<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// [&#x27;a&#x27;, 7, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•ç”¨äºéå†æ•°ç»„ã€‚<code>keys()</code>æ˜¯å¯¹é”®åçš„éå†ï¼Œ<code>values()</code>æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œ<code>entries()</code>æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚å®ƒä»¬éƒ½å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯è¿›è¡Œéå†ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].<span class="title function_">keys</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].<span class="title function_">values</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>].<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure><p><code>includes()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ã€‚è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º<code>0</code>ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">  .<span class="title function_">includes</span>(<span class="number">2</span>) <span class="comment">// true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].<span class="title function_">includes</span>(<span class="number">4</span>) <span class="comment">// false</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="title class_">NaN</span>)].<span class="title function_">includes</span>(<span class="title class_">NaN</span>) <span class="comment">// true</span></span><br><span class="line">  [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)].<span class="title function_">includes</span>(<span class="number">3</span>, -<span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„æˆå‘˜æœ‰æ—¶è¿˜æ˜¯æ•°ç»„ï¼Œ<code>flat()</code>æ–¹æ³•ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]].<span class="title function_">flat</span>();</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p><code>flat()</code>æ–¹æ³•é»˜è®¤åªä¼šâ€œæ‹‰å¹³â€ä¸€å±‚ï¼Œå¦‚æœæƒ³è¦â€œæ‹‰å¹³â€å¤šå±‚çš„åµŒå¥—æ•°ç»„ï¼Œå¯ä»¥æŒ‡å®š<code>flat()</code>æ–¹æ³•çš„å‚æ•°ï¼Œè¡¨ç¤ºæƒ³è¦æ‹‰å¹³çš„å±‚æ•°ï¼Œé»˜è®¤ä¸º<code>1</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]]</span><br><span class="line">  .<span class="title function_">flat</span>()</span><br><span class="line">  [</span><br><span class="line">    <span class="comment">// [1, 2, 3, [4, 5]]</span></span><br><span class="line"></span><br><span class="line">    (<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line">  ].<span class="title function_">flat</span>(<span class="number">2</span>)</span><br><span class="line">  [</span><br><span class="line">    <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line">    (<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>]])</span><br><span class="line">  ].<span class="title function_">flat</span>(<span class="title class_">Infinity</span>);</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p><code>flatMap()</code>æ–¹æ³•å¯¹åŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç›¸å½“äºæ‰§è¡Œ<code>map()</code>ï¼‰, ç„¶åå¯¹è¿”å›å€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ<code>flat()</code>æ–¹æ³•ã€‚æ³¨æ„ï¼Œ<code>flatMap()</code>åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç›¸å½“äº [[2, 4], [3, 6], [4, 8]].flat()</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">  .<span class="title function_">flatMap</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> [x, x * <span class="number">2</span>])</span><br><span class="line">  [</span><br><span class="line">    <span class="comment">// [2, 4, 3, 6, 4, 8]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›¸å½“äº [[[2]], [[4]], [[6]], [[8]]].flat()</span></span><br><span class="line">    (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">  ].<span class="title function_">flatMap</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> [[x * <span class="number">2</span>]]);</span><br><span class="line"><span class="comment">// [[2], [4], [6], [8]]</span></span><br></pre></td></tr></table></figure><p><code>ES5</code> ä¸æ”¯æŒæ•°ç»„çš„è´Ÿç´¢å¼•ï¼Œå¦‚æœè¦å¼•ç”¨æ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜ï¼Œä¸èƒ½å†™æˆ<code>arr[-1]</code>ï¼Œåªèƒ½ä½¿ç”¨<code>arr[arr.length - 1]</code>ã€‚<code>ES6</code> ä¸ºæ•°ç»„å®ä¾‹å¢åŠ äº†<code>at()</code>æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›å¯¹åº”ä½ç½®çš„æˆå‘˜ï¼Œå¹¶æ”¯æŒè´Ÿç´¢å¼•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">5</span>, <span class="number">12</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>];</span><br><span class="line"></span><br><span class="line">arr[-<span class="number">2</span>]; <span class="comment">// Error</span></span><br><span class="line">arr.<span class="title function_">at</span>(<span class="number">2</span>); <span class="comment">// 8</span></span><br><span class="line">arr.<span class="title function_">at</span>(-<span class="number">2</span>); <span class="comment">// 130</span></span><br></pre></td></tr></table></figure><hr><h2 id="9-å¯¹è±¡çš„æ‰©å±•"><a href="#9-å¯¹è±¡çš„æ‰©å±•" class="headerlink" title="9. å¯¹è±¡çš„æ‰©å±•"></a>9. å¯¹è±¡çš„æ‰©å±•</h2><p><a href="https://es6.ruanyifeng.com/#docs/object">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="9-1-å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"><a href="#9-1-å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•" class="headerlink" title="9.1 å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"></a>9.1 å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•</h3><p><code>ES6</code> å…è®¸åœ¨å¤§æ‹¬å·é‡Œé¢ï¼Œç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ï¼Œä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> birth = <span class="string">&quot;2000/01/01&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">  birth, <span class="comment">// ç­‰åŒäº birth: birth</span></span><br><span class="line">  <span class="title function_">hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆ‘çš„åå­—æ˜¯&quot;</span>, <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç­‰åŒäº hello: function ()...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h3 id="9-2-super-å…³é”®å­—"><a href="#9-2-super-å…³é”®å­—" class="headerlink" title="9.2 super å…³é”®å­—"></a>9.2 super å…³é”®å­—</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<ins><code>this</code>å…³é”®å­—æ€»æ˜¯æŒ‡å‘å‡½æ•°æ‰€åœ¨çš„å½“å‰å¯¹è±¡</ins>ï¼Œ<code>ES6</code> åˆæ–°å¢äº†å¦ä¸€ä¸ªç±»ä¼¼çš„å…³é”®å­—<ins><code>super</code>ï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proto = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="string">&quot;world&quot;</span>,</span><br><span class="line">  <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">foo</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(obj, proto);</span><br><span class="line">obj.<span class="title function_">foo</span>(); <span class="comment">// &quot;world&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>obj.foo()</code>æ–¹æ³•ä¹‹ä¸­ï¼Œé€šè¿‡<code>super.foo</code>å¼•ç”¨äº†åŸå‹å¯¹è±¡<code>proto</code>çš„<code>foo</code>æ–¹æ³•ã€‚<ins>ä½†æ˜¯ç»‘å®šçš„<code>this</code>å´è¿˜æ˜¯å½“å‰å¯¹è±¡<code>obj</code>ï¼Œå› æ­¤è¾“å‡ºçš„å°±æ˜¯<code>world</code></ins>ã€‚<br><br></p><p>æ³¨æ„ï¼Œ<code>super</code>å…³é”®å­—è¡¨ç¤ºåŸå‹å¯¹è±¡æ—¶ï¼Œ<ins>åªèƒ½ç”¨åœ¨å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­</ins>ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹éƒ½ä¼šæŠ¥é”™ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">/ æŠ¥é”™</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="variable language_">super</span>.<span class="property">foo</span> <span class="comment">// å¯¹è±¡å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="function">() =&gt;</span> <span class="variable language_">super</span>.<span class="property">foo</span> <span class="comment">// å¯¹è±¡å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// å¯¹è±¡å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="property">foo</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="9-3-å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"><a href="#9-3-å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="9.3 å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"></a>9.3 å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦</h3><p><strong>ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼</strong></p><p>å¯¹è±¡çš„è§£æ„èµ‹å€¼ç”¨äºä»ä¸€ä¸ªå¯¹è±¡å–å€¼ï¼Œå°†ç›®æ ‡å¯¹è±¡æ‰€æœ‰<a href="https://es6.ruanyifeng.com/#docs/object#%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%AF%E6%9E%9A%E4%B8%BE%E6%80%A7%E5%92%8C%E9%81%8D%E5%8E%86">å¯éå†</a>çš„ã€ä½†å°šæœªè¢«è¯»å–çš„å±æ€§ï¼Œåˆ†é…åˆ°æŒ‡å®šçš„å¯¹è±¡ä¸Šé¢ã€‚ï¼ˆæ³¨æ„ï¼Œè§£æ„èµ‹å€¼å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œä¸”ç­‰å·å³è¾¹ä¸èƒ½æ˜¯<code>undefined</code>æˆ–<code>null</code>ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; x, y, ...z &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line">z <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> z = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> n = &#123; ...z &#125;;</span><br><span class="line">n <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; ...x, y, z &#125; = someObject; <span class="comment">// å¥æ³•é”™è¯¯</span></span><br></pre></td></tr></table></figure><p>è§£æ„èµ‹å€¼çš„æ‹·è´æ˜¯<a href="https://vue3js.cn/interview/JavaScript/copy.html">æµ…æ‹·è´</a>ï¼Œå³<ins>å¦‚æœä¸€ä¸ªé”®çš„å€¼æ˜¯å¤åˆç±»å‹çš„å€¼ï¼ˆå¦‚æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ï¼‰ï¼Œé‚£ä¹ˆè§£æ„èµ‹å€¼æ‹·è´çš„æ˜¯è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå€¼çš„å‰¯æœ¬</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">1</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; ...x &#125; = obj;</span><br><span class="line">obj.<span class="property">a</span>.<span class="property">b</span> = <span class="number">2</span>;</span><br><span class="line">x.<span class="property">a</span>.<span class="property">b</span>; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>x</code>æ˜¯è§£æ„èµ‹å€¼æ‰€åœ¨çš„å¯¹è±¡ï¼Œæ‹·è´äº†å¯¹è±¡<code>obj</code>çš„<code>a</code>å±æ€§ã€‚<code>a</code>å±æ€§å¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å€¼ï¼Œä¼šå½±å“åˆ°è§£æ„èµ‹å€¼å¯¹å®ƒçš„å¼•ç”¨ã€‚<br><br></p><p>è§£æ„èµ‹å€¼çš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯æ‰©å±•æŸä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¼•å…¥å…¶ä»–æ“ä½œã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">baseFunction</span>(<span class="params">&#123; a, b &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">wrapperFunction</span>(<span class="params">&#123; x, y, ...restConfig &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ x å’Œ y å‚æ•°è¿›è¡Œæ“ä½œ</span></span><br><span class="line">  <span class="comment">// å…¶ä½™å‚æ•°ä¼ ç»™åŸå§‹å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">baseFunction</span>(restConfig);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸå§‹å‡½æ•°<code>baseFunction</code>æ¥å—<code>a</code>å’Œ<code>b</code>ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°<code>wrapperFunction</code>åœ¨<code>baseFunction</code>çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œèƒ½å¤Ÿæ¥å—å¤šä½™çš„å‚æ•°ï¼Œå¹¶ä¸”ä¿ç•™åŸå§‹å‡½æ•°çš„è¡Œä¸ºã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦</strong></p><p>å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ <code>...</code> ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ã€‚ï¼ˆæ‰©å±•è¿ç®—ç¬¦ä¸éœ€è¦æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> z = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> n = &#123; ...z &#125;;</span><br><span class="line">n <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span><br><span class="line"></span><br><span class="line">&#123;...&#123;&#125;, <span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment">// &#123; a: 1 &#125;</span></span><br></pre></td></tr></table></figure><p>æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨äºåˆå¹¶ä¸¤ä¸ªå¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ab = &#123; ...a, ...b &#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> ab = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, a, b);</span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œæ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦åé¢ï¼Œåˆ™æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨çš„åŒåå±æ€§ä¼šè¢«è¦†ç›–æ‰ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aWithOverrides = &#123; ...a, <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> aWithOverrides = &#123; ...a, ...&#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>,</span><br><span class="line">  y = <span class="number">2</span>,</span><br><span class="line">  aWithOverrides = &#123; ...a, x, y &#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> aWithOverrides = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, a, &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a</code>å¯¹è±¡çš„<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§ï¼Œæ‹·è´åˆ°æ–°å¯¹è±¡åä¼šè¢«è¦†ç›–æ‰ã€‚</p><hr><h2 id="10-å¯¹è±¡çš„æ–°å¢æ–¹æ³•"><a href="#10-å¯¹è±¡çš„æ–°å¢æ–¹æ³•" class="headerlink" title="10. å¯¹è±¡çš„æ–°å¢æ–¹æ³•"></a>10. å¯¹è±¡çš„æ–°å¢æ–¹æ³•</h2><p><a href="https://es6.ruanyifeng.com/#docs/object-methods">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="10-1-é™æ€æ–¹æ³•"><a href="#10-1-é™æ€æ–¹æ³•" class="headerlink" title="10.1 é™æ€æ–¹æ³•"></a>10.1 é™æ€æ–¹æ³•</h3><p><code>ES5</code> ä¸­æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼Œç›¸ç­‰è¿ç®—ç¬¦<code>==</code>å’Œä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦<code>===</code>ã€‚å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼Œå‰è€…ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œåè€…çš„<code>NaN</code>ä¸ç­‰äºè‡ªèº«ï¼Œä»¥åŠ<code>+0</code>ç­‰äº<code>-0</code>ã€‚<br><br></p><p><code>Object.is()</code>æ–¹æ³•ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦<code>===</code>çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚ä¸åŒä¹‹å¤„åªæœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯<code>+0</code>ä¸ç­‰äº<code>-0</code>ï¼ŒäºŒæ˜¯<code>NaN</code>ç­‰äºè‡ªèº«ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;foo&quot;</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">is</span>(&#123;&#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><code>Object.assign()</code>æ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡<code>source</code>çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡<code>target</code>ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source1, source2);</span><br><span class="line">target; <span class="comment">// &#123;a:1, b:2, c:3&#125;</span></span><br></pre></td></tr></table></figure><p><code>Object.assign()</code>æœ‰ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚<br><br></p><p><strong>ï¼ˆ1ï¼‰æµ…æ‹·è´</strong></p><p><code>Object.assign()</code>æ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ã€‚<br><br></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const obj1 = &#123;a: &#123;b: 1&#125;&#125;;</span><br><span class="line">const obj2 = Object.assign(&#123;&#125;, obj1);</span><br><span class="line"></span><br><span class="line">obj1.a.b = 2;</span><br><span class="line">obj2.a.b // 2</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæºå¯¹è±¡<code>obj1</code>çš„<code>a</code>å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>Object.assign()</code>æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚è¿™ä¸ªå¯¹è±¡çš„ä»»ä½•å˜åŒ–ï¼Œéƒ½ä¼šåæ˜ åˆ°ç›®æ ‡å¯¹è±¡ä¸Šé¢ã€‚<br><br></p><p><strong>ï¼ˆ2ï¼‰åŒåå±æ€§çš„æ›¿æ¢</strong></p><p>å¯¹äºåµŒå¥—çš„å¯¹è±¡ï¼Œä¸€æ—¦é‡åˆ°åŒåå±æ€§ï¼Œ<code>Object.assign()</code>çš„å¤„ç†æ–¹æ³•æ˜¯æ›¿æ¢ï¼Œè€Œä¸æ˜¯æ·»åŠ ã€‚è¿™é€šå¸¸ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&quot;c&quot;</span>, <span class="attr">d</span>: <span class="string">&quot;e&quot;</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">&quot;hello&quot;</span> &#125; &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source);</span><br><span class="line"><span class="comment">// &#123; a: &#123; b: &#x27;hello&#x27; &#125; &#125;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæ™®é€šå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•å¯¹å¯¹è±¡è¿›è¡Œéå†ã€‚</p><ul><li><code>Object.keys()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯éå†å±æ€§çš„é”®åã€‚</li><li><code>Object.values()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼ã€‚</li><li><code>Object.entries()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line"><span class="comment">// [&quot;foo&quot;, &quot;baz&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">values</span>(obj);</span><br><span class="line"><span class="comment">// [&quot;bar&quot;, 42]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(obj);</span><br><span class="line"><span class="comment">// [ [&quot;foo&quot;, &quot;bar&quot;], [&quot;baz&quot;, 42] ]</span></span><br></pre></td></tr></table></figure><hr><h2 id="11-è¿ç®—ç¬¦çš„æ‰©å±•"><a href="#11-è¿ç®—ç¬¦çš„æ‰©å±•" class="headerlink" title="11. è¿ç®—ç¬¦çš„æ‰©å±•"></a>11. è¿ç®—ç¬¦çš„æ‰©å±•</h2><h3 id="11-1-é“¾åˆ¤æ–­è¿ç®—ç¬¦"><a href="#11-1-é“¾åˆ¤æ–­è¿ç®—ç¬¦" class="headerlink" title="11.1 é“¾åˆ¤æ–­è¿ç®—ç¬¦"></a>11.1 é“¾åˆ¤æ–­è¿ç®—ç¬¦</h3><p>å½“æˆ‘ä»¬æ‰“ç®—è¯»å–å¯¹è±¡å†…éƒ¨çš„æŸä¸ªå±æ€§æ—¶ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä¸€ä¸‹å±æ€§çš„ä¸Šå±‚å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> firstName = message.<span class="property">body</span>.<span class="property">user</span>.<span class="property">firstName</span> || <span class="string">&quot;default&quot;</span>; <span class="comment">// æ— æ³•ä¿è¯ message.body å­˜åœ¨...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> firstName =</span><br><span class="line">  (message &amp;&amp;</span><br><span class="line">    message.<span class="property">body</span> &amp;&amp;</span><br><span class="line">    message.<span class="property">body</span>.<span class="property">user</span> &amp;&amp;</span><br><span class="line">    message.<span class="property">body</span>.<span class="property">user</span>.<span class="property">firstName</span>) ||</span><br><span class="line">  <span class="string">&quot;default&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>firstName</code>å±æ€§åœ¨å¯¹è±¡çš„ç¬¬å››å±‚ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­å››æ¬¡ï¼Œæ¯ä¸€å±‚æ˜¯å¦æœ‰å€¼ã€‚è¿™æ ·çš„å±‚å±‚åˆ¤æ–­éå¸¸éº»çƒ¦ï¼Œå› æ­¤ <code>ES6</code> å¼•å…¥äº†â€œé“¾åˆ¤æ–­è¿ç®—ç¬¦â€ <code>?.</code>ï¼Œç”¨æ¥ç®€åŒ–ä¸Šé¢çš„å†™æ³•ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> firstName = message?.<span class="property">body</span>?.<span class="property">user</span>?.<span class="property">firstName</span> || <span class="string">&quot;default&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†<code>?.</code>è¿ç®—ç¬¦ï¼Œç›´æ¥åœ¨é“¾å¼è°ƒç”¨çš„æ—¶å€™åˆ¤æ–­ï¼Œå·¦ä¾§çš„å¯¹è±¡æ˜¯å¦ä¸º<code>null</code>æˆ–<code>undefined</code>ã€‚å¦‚æœæ˜¯çš„ï¼Œå°±ä¸å†å¾€ä¸‹è¿ç®—ï¼Œè€Œæ˜¯è¿”å›<code>undefined</code>ã€‚<br><br></p><p>ä¸‹é¢æ˜¯ <code>?.</code> è¿ç®—ç¬¦å¸¸è§å½¢å¼ï¼Œä»¥åŠä¸ä½¿ç”¨è¯¥è¿ç®—ç¬¦æ—¶çš„ç­‰ä»·å½¢å¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">a?.<span class="property">b</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a.<span class="property">b</span>;</span><br><span class="line"></span><br><span class="line">a?.[x];</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a[x];</span><br><span class="line"></span><br><span class="line">a?.<span class="title function_">b</span>();</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a.<span class="title function_">b</span>();</span><br><span class="line"></span><br><span class="line">a?.();</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : <span class="title function_">a</span>();</span><br></pre></td></tr></table></figure><hr><h3 id="11-2-Null-åˆ¤æ–­è¿ç®—ç¬¦"><a href="#11-2-Null-åˆ¤æ–­è¿ç®—ç¬¦" class="headerlink" title="11.2 Null åˆ¤æ–­è¿ç®—ç¬¦"></a>11.2 Null åˆ¤æ–­è¿ç®—ç¬¦</h3><p>è¯»å–å¯¹è±¡å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„å€¼æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šé»˜è®¤å€¼ã€‚å¸¸è§åšæ³•æ˜¯é€šè¿‡<code>||</code>è¿ç®—ç¬¦æŒ‡å®šé»˜è®¤å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> headerText = response.<span class="property">settings</span>.<span class="property">headerText</span> || <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> animationDuration = response.<span class="property">settings</span>.<span class="property">animationDuration</span> || <span class="number">300</span>;</span><br><span class="line"><span class="keyword">const</span> showSplashScreen = response.<span class="property">settings</span>.<span class="property">showSplashScreen</span> || <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å±æ€§çš„å€¼å¦‚æœä¸ºç©ºå­—ç¬¦ä¸²æˆ–<code>false</code>æˆ–<code>0</code>ï¼Œé»˜è®¤å€¼ä¹Ÿä¼šç”Ÿæ•ˆã€‚ä¸ºæ­¤ï¼Œ<code>ES6</code> å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ <code>Null</code> åˆ¤æ–­è¿ç®—ç¬¦<code>??</code>ã€‚å®ƒçš„è¡Œä¸ºç±»ä¼¼<code>||</code>ï¼Œä½†æ˜¯åªæœ‰è¿ç®—ç¬¦å·¦ä¾§çš„å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶ï¼Œæ‰ä¼šè¿”å›å³ä¾§çš„å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> animationDuration = response.<span class="property">settings</span>?.<span class="property">animationDuration</span> ?? <span class="number">300</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>response.settings</code>æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œæˆ–è€…<code>response.settings.animationDuration</code>æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œå°±ä¼šè¿”å›é»˜è®¤å€¼<code>300</code>ã€‚</p><hr><h2 id="12-Symbol-æ•°æ®ç±»å‹"><a href="#12-Symbol-æ•°æ®ç±»å‹" class="headerlink" title="12. Symbol æ•°æ®ç±»å‹"></a>12. Symbol æ•°æ®ç±»å‹</h2><p><a href="https://es6.ruanyifeng.com/#docs/symbol">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="12-1-Symbol-æ¦‚è¿°"><a href="#12-1-Symbol-æ¦‚è¿°" class="headerlink" title="12.1 Symbol æ¦‚è¿°"></a>12.1 Symbol æ¦‚è¿°</h3><p><code>ES6</code> å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ <code>Symbol</code>ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚</p><p><code>Symbol</code> é€šè¿‡ <code>Symbol()</code> å‡½æ•°ç”Ÿæˆï¼Œå¯ä»¥ç”¨äºä¸ºå¯¹è±¡æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä¸”ä¸å­˜åœ¨å±æ€§åå†²çªã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="title class_">Symbol</span>(); <span class="comment">// Symbol() å‡½æ•°å‰ä¸èƒ½ä½¿ç”¨ new å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> s;</span><br><span class="line"><span class="comment">// &quot;symbol&quot;</span></span><br></pre></td></tr></table></figure><p><code>ES6</code> æä¾›äº†ä¸€ä¸ª <code>Symbol</code> å€¼çš„å®ä¾‹å±æ€§<code>description</code>ï¼Œç›´æ¥è¿”å› <code>Symbol</code> å€¼çš„æè¿°ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sym = <span class="title class_">Symbol</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°</span></span><br><span class="line"></span><br><span class="line">sym; <span class="comment">// [object Symbol] &#123; ... &#125;</span></span><br><span class="line">sym.<span class="title function_">toString</span>(); <span class="comment">// &quot;Symbol(foo)&quot;</span></span><br><span class="line"></span><br><span class="line">sym.<span class="property">description</span>; <span class="comment">// &quot;foo&quot;</span></span><br></pre></td></tr></table></figure><p>å› ä¸º <code>Symbol</code> å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼ˆå°±ç®—æ˜¯ç›¸åŒæè¿°ï¼Œé™¤éä½¿ç”¨ <a href="https://es6.ruanyifeng.com/#docs/symbol#Symbol-for%EF%BC%8CSymbol-keyFor"><code>Symbol.for</code></a>ï¼‰ï¼Œä½¿ç”¨ <code>Symbol</code> å€¼ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mySymbol = <span class="title class_">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">&quot;Hello!&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ</span></span><br><span class="line">a[mySymbol]; <span class="comment">// &quot;Hello!&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="13-Set-å’Œ-Map-æ•°æ®ç»“æ„"><a href="#13-Set-å’Œ-Map-æ•°æ®ç»“æ„" class="headerlink" title="13. Set å’Œ Map æ•°æ®ç»“æ„"></a>13. Set å’Œ Map æ•°æ®ç»“æ„</h2><p><a href="https://es6.ruanyifeng.com/#docs/set-map">æœ¬ç« </a>è·³è¿‡ <code>WeakSet</code> å’Œ <code>WeakMap</code> éƒ¨åˆ†ã€‚</p><h3 id="13-1-Set-åŸºæœ¬ç”¨æ³•"><a href="#13-1-Set-åŸºæœ¬ç”¨æ³•" class="headerlink" title="13.1 Set åŸºæœ¬ç”¨æ³•"></a>13.1 Set åŸºæœ¬ç”¨æ³•</h3><p><code>ES6</code>æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ <code>Set</code>ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯<ins>æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼</ins>ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–è€…å…·æœ‰ <code>iterable</code> æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼Œä½œä¸ºå‚æ•°åˆå§‹åŒ–ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>].<span class="title function_">forEach</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> s.<span class="title function_">add</span>(x));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 3 5 4</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä»‹ç» <code>Set</code> å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</p><ul><li><code>Set.prototype.size</code>ï¼šè¿”å›<code>Set</code>å®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚</li><li><code>Set.prototype.add(value)</code>ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› <code>Set</code> ç»“æ„æœ¬èº«ã€‚</li><li><code>Set.prototype.delete(value)</code>ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚</li><li><code>Set.prototype.has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º<code>Set</code>çš„æˆå‘˜ã€‚</li><li><code>Set.prototype.clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">s.<span class="title function_">add</span>(<span class="number">1</span>).<span class="title function_">add</span>(<span class="number">2</span>).<span class="title function_">add</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// æ³¨æ„2è¢«åŠ å…¥äº†ä¸¤æ¬¡</span></span><br><span class="line"></span><br><span class="line">s.<span class="property">size</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">s.<span class="title function_">delete</span>(<span class="number">2</span>);</span><br><span class="line">s.<span class="title function_">has</span>(<span class="number">2</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><code>Set</code> ç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†, å¯ä»¥ç›´æ¥ç”¨<code>for...of</code>å¾ªç¯éå† <code>Set</code>ã€‚ä¹Ÿå¯ä»¥ç”¨<code>forEach</code>æ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> set) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red</span></span><br><span class="line"><span class="comment">// green</span></span><br><span class="line"><span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>]);</span><br><span class="line">set.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, key</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot; : &quot;</span> + value));</span><br><span class="line"><span class="comment">// 1 : 1</span></span><br><span class="line"><span class="comment">// 4 : 4</span></span><br><span class="line"><span class="comment">// 9 : 9</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­<code>forEach</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚ä½†æ˜¯å› ä¸º <code>Set</code> ç»“æ„çš„é”®åå°±æ˜¯é”®å€¼ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ°¸è¿œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><hr><h3 id="13-2-Set-éå†çš„åº”ç”¨"><a href="#13-2-Set-éå†çš„åº”ç”¨" class="headerlink" title="13.2 Set éå†çš„åº”ç”¨"></a>13.2 Set éå†çš„åº”ç”¨</h3><p>æ‰©å±•è¿ç®—ç¬¦å’Œ <code>Set</code> ç»“æ„ç›¸ç»“åˆï¼Œå¯ä»¥å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜</span></span><br><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(array)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦</span></span><br><span class="line">[...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="string">&#x27;ababbc&#x27;</span>)].<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// &quot;abc&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨Array.fromæ–¹æ³•å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dedupe</span>(<span class="params">array</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(array));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">dedupe</span>([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„<code>map</code>å’Œ<code>filter</code>æ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äº <code>Set</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">set = <span class="keyword">new</span> <span class="title class_">Set</span>([...set].<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>));</span><br><span class="line"><span class="comment">// è¿”å›Setç»“æ„ï¼š&#123;2, 4, 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">set = <span class="keyword">new</span> <span class="title class_">Set</span>([...set].<span class="title function_">filter</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x % <span class="number">2</span> == <span class="number">0</span>));</span><br><span class="line"><span class="comment">// è¿”å›Setç»“æ„ï¼š&#123;2, 4&#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="13-3-Map-åŸºæœ¬ç”¨æ³•"><a href="#13-3-Map-åŸºæœ¬ç”¨æ³•" class="headerlink" title="13.3 Map åŸºæœ¬ç”¨æ³•"></a>13.3 Map åŸºæœ¬ç”¨æ³•</h3><p><code>Map</code> æ•°æ®ç»“æ„ç±»ä¼¼äºå¯¹è±¡ï¼Œæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯å„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;title&quot;</span>, <span class="string">&quot;Author&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">map.<span class="property">size</span>; <span class="comment">// 2</span></span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&quot;name&quot;</span>); <span class="comment">// true</span></span><br><span class="line">map.<span class="title function_">get</span>(<span class="string">&quot;name&quot;</span>); <span class="comment">// &quot;å¼ ä¸‰&quot;</span></span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&quot;title&quot;</span>); <span class="comment">// true</span></span><br><span class="line">map.<span class="title function_">get</span>(<span class="string">&quot;title&quot;</span>); <span class="comment">// &quot;Author&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä»‹ç» <code>Map</code> å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</p><ul><li><code>Map.prototype.size</code>ï¼šè¿”å› <code>Map</code> ç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚</li><li><code>Map.prototype.set(key, value)</code>ï¼šè®¾ç½®é”®å<code>key</code>å¯¹åº”çš„é”®å€¼ä¸º<code>value</code>ï¼Œç„¶åè¿”å›æ•´ä¸ª <code>Map</code> ç»“æ„ã€‚å¦‚æœ<code>key</code>å·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚</li><li><code>Map.prototype.get(key)</code>ï¼šè¯»å–<code>key</code>å¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°<code>key</code>ï¼Œè¿”å›<code>undefined</code>ã€‚</li><li><code>Map.prototype.has(key)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ <code>Map</code> å¯¹è±¡ä¹‹ä¸­ã€‚</li><li><code>Map.prototype.delete(key)</code>ï¼šåˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›<code>true</code>ã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›<code>false</code>ã€‚</li><li><code>Map.prototype.clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;bar&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">map.<span class="property">size</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">map.<span class="title function_">get</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// hello</span></span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">map.<span class="title function_">clear</span>();</span><br><span class="line">map.<span class="property">size</span>; <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä»‹ç» <code>Map</code> ç»“æ„åŸç”Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•</p><ul><li><code>Map.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li><li><code>Map.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li><li><code>Map.prototype.entries()</code>ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li><li><code>Map.prototype.forEach()</code>ï¼šéå† <code>Map</code> çš„æ‰€æœ‰æˆå‘˜ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&quot;F&quot;</span>, <span class="string">&quot;no&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;T&quot;</span>, <span class="string">&quot;yes&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.<span class="title function_">keys</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;F&quot;</span></span><br><span class="line"><span class="comment">// &quot;T&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> map.<span class="title function_">values</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;no&quot;</span></span><br><span class="line"><span class="comment">// &quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> map.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item[<span class="number">0</span>], item[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;F&quot; &quot;no&quot;</span></span><br><span class="line"><span class="comment">// &quot;T&quot; &quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;F&quot; &quot;no&quot;</span></span><br><span class="line"><span class="comment">// &quot;T&quot; &quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäºä½¿ç”¨map.entries()</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;F&quot; &quot;no&quot;</span></span><br><span class="line"><span class="comment">// &quot;T&quot; &quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value, key, map</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Key: %s, Value: %s&quot;</span>, key, value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<code>Map</code> çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚</p><hr><h3 id="13-4-Map-ä¸å…¶ä»–æ•°æ®ç»“æ„è½¬æ¢"><a href="#13-4-Map-ä¸å…¶ä»–æ•°æ®ç»“æ„è½¬æ¢" class="headerlink" title="13.4 Map ä¸å…¶ä»–æ•°æ®ç»“æ„è½¬æ¢"></a>13.4 Map ä¸å…¶ä»–æ•°æ®ç»“æ„è½¬æ¢</h3><p><strong>ï¼ˆ1ï¼‰Map è½¬ä¸ºæ•°ç»„</strong></p><p><code>Map</code> è½¬ä¸ºæ•°ç»„æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦<code>...</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myMap = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="literal">true</span>, <span class="number">7</span>).<span class="title function_">set</span>(&#123; <span class="attr">foo</span>: <span class="number">3</span> &#125;, [<span class="string">&quot;abc&quot;</span>]);</span><br><span class="line">[...myMap];</span><br><span class="line"><span class="comment">// [ [ true, 7 ], [ &#123; foo: 3 &#125;, [ &#x27;abc&#x27; ] ] ]</span></span><br></pre></td></tr></table></figure><p>ç»“åˆæ•°ç»„çš„<code>map</code>æ–¹æ³•ã€<code>filter</code>æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç° <code>Map</code> çš„éå†å’Œè¿‡æ»¤ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map0 = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>).<span class="title function_">set</span>(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>).<span class="title function_">set</span>(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="title class_">Map</span>([...map0].<span class="title function_">filter</span>(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> k &lt; <span class="number">3</span>));</span><br><span class="line"><span class="comment">// äº§ç”Ÿ Map ç»“æ„ &#123;1 =&gt; &#x27;a&#x27;, 2 =&gt; &#x27;b&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="title class_">Map</span>([...map0].<span class="title function_">map</span>(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> [k * <span class="number">2</span>, <span class="string">&quot;_&quot;</span> + v]));</span><br><span class="line"><span class="comment">// äº§ç”Ÿ Map ç»“æ„ &#123;2 =&gt; &#x27;_a&#x27;, 4 =&gt; &#x27;_b&#x27;, 6 =&gt; &#x27;_c&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰æ•°ç»„ è½¬ä¸º Map</strong></p><p>å°†æ•°ç»„ä¼ å…¥ <code>Map</code> æ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸º <code>Map</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="literal">true</span>, <span class="number">7</span>],</span><br><span class="line">  [&#123; <span class="attr">foo</span>: <span class="number">3</span> &#125;, [<span class="string">&quot;abc&quot;</span>]],</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// Map &#123;</span></span><br><span class="line"><span class="comment">//   true =&gt; 7,</span></span><br><span class="line"><span class="comment">//   Object &#123;foo: 3&#125; =&gt; [&#x27;abc&#x27;]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰Map è½¬ä¸ºå¯¹è±¡</strong></p><p>å¦‚æœæ‰€æœ‰ <code>Map</code> çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ— æŸåœ°è½¬ä¸ºå¯¹è±¡ã€‚å¦‚æœæœ‰éå­—ç¬¦ä¸²çš„é”®åï¼Œé‚£ä¹ˆè¿™ä¸ªé”®åä¼šè¢«è½¬æˆå­—ç¬¦ä¸²ï¼Œå†ä½œä¸ºå¯¹è±¡çš„é”®åã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">strMapToObj</span>(<span class="params">strMap</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> strMap) &#123;</span><br><span class="line">    obj[k] = v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myMap = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="string">&quot;yes&quot;</span>, <span class="literal">true</span>).<span class="title function_">set</span>(<span class="string">&quot;no&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="title function_">strMapToObj</span>(myMap);</span><br><span class="line"><span class="comment">// &#123; yes: true, no: false &#125;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ4ï¼‰å¯¹è±¡è½¬ä¸º Map</strong></p><p>å¯¹è±¡è½¬ä¸º <code>Map</code> å¯ä»¥é€šè¿‡ <code>Object.entries()</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj));</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ5ï¼‰Map è½¬ä¸º JSON</strong></p><p><code>Map</code> è½¬ä¸º <code>JSON</code> è¦åŒºåˆ†ä¸¤ç§æƒ…å†µã€‚</p><p>ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>Map</code> çš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡ <code>JSON</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">strMapToJson</span>(<span class="params">strMap</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">strMapToObj</span>(strMap));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myMap = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="string">&quot;yes&quot;</span>, <span class="literal">true</span>).<span class="title function_">set</span>(<span class="string">&quot;no&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="title function_">strMapToJson</span>(myMap);</span><br><span class="line"><span class="comment">// &#x27;&#123;&quot;yes&quot;:true,&quot;no&quot;:false&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>Map</code> çš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„ <code>JSON</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mapToArrayJson</span>(<span class="params">map</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...map]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myMap = <span class="keyword">new</span> <span class="title class_">Map</span>().<span class="title function_">set</span>(<span class="literal">true</span>, <span class="number">7</span>).<span class="title function_">set</span>(&#123; <span class="attr">foo</span>: <span class="number">3</span> &#125;, [<span class="string">&quot;abc&quot;</span>]);</span><br><span class="line"><span class="title function_">mapToArrayJson</span>(myMap);</span><br><span class="line"><span class="comment">// &#x27;[[true,7],[&#123;&quot;foo&quot;:3&#125;,[&quot;abc&quot;]]]&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ6ï¼‰JSON è½¬ä¸º Map</strong></p><p><code>JSON</code> è½¬ä¸º <code>Map</code>ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">objToStrMap</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> strMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)) &#123;</span><br><span class="line">    strMap.<span class="title function_">set</span>(k, obj[k]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> strMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">jsonToStrMap</span>(<span class="params">jsonStr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">objToStrMap</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">jsonToStrMap</span>(<span class="string">&#x27;&#123;&quot;yes&quot;: true, &quot;no&quot;: false&#125;&#x27;</span>);</span><br><span class="line"><span class="comment">// Map &#123;&#x27;yes&#x27; =&gt; true, &#x27;no&#x27; =&gt; false&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ•´ä¸ª <code>JSON</code> å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ç›´æ¥è½¬ä¸º <code>Map</code>ã€‚ï¼ˆç±»ä¼¼ <code>Map</code> è½¬ä¸ºæ•°ç»„ <code>JSON</code> çš„é€†æ“ä½œï¼‰<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">jsonToMap</span>(<span class="params">jsonStr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Map</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">jsonToMap</span>(<span class="string">&#x27;[[true,7],[&#123;&quot;foo&quot;:3&#125;,[&quot;abc&quot;]]]&#x27;</span>);</span><br><span class="line"><span class="comment">// Map &#123;true =&gt; 7, Object &#123;foo: 3&#125; =&gt; [&#x27;abc&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><hr><h2 id="14-Proxy"><a href="#14-Proxy" class="headerlink" title="14. Proxy"></a>14. Proxy</h2><p><a href="https://es6.ruanyifeng.com/#docs/proxy">æœ¬ç« </a>å†…å®¹å¤æ‚ï¼Œæ•…å…ˆè·³è¿‡ä¸€éƒ¨åˆ†ã€‚</p><h3 id="14-1-Proxy-æ¦‚è¿°"><a href="#14-1-Proxy-æ¦‚è¿°" class="headerlink" title="14.1 Proxy æ¦‚è¿°"></a>14.1 Proxy æ¦‚è¿°</h3><p><code>Proxy</code> å¯ä»¥ç†è§£æˆï¼Œ<ins>åœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™</ins>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Proxy</span>(</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">target, propKey, receiver</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`getting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, propKey, receiver);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">target, propKey, value, receiver</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`setting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, propKey, value, receiver);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å¯¹ä¸€ä¸ªç©ºå¯¹è±¡æ¶è®¾äº†ä¸€å±‚æ‹¦æˆªï¼Œé‡å®šä¹‰äº†å±æ€§çš„è¯»å–<code>get</code>å’Œè®¾ç½®<code>set</code>è¡Œä¸ºã€‚å¯¹è®¾ç½®äº†æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡<code>obj</code>è¯»å†™å®ƒçš„å±æ€§ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">obj.<span class="property">count</span> = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//  setting count!</span></span><br><span class="line">++obj.<span class="property">count</span>;</span><br><span class="line"><span class="comment">//  getting count!</span></span><br><span class="line"><span class="comment">//  setting count!</span></span><br><span class="line"><span class="comment">//  2</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ<code>Proxy</code> å®é™…ä¸Šé‡è½½<code>overload</code>äº†ç‚¹è¿ç®—ç¬¦ï¼Œå³ç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰ã€‚(ç±»ä¼¼<code>C++</code>çš„é‡è½½)<br><br></p><p><code>ES6</code> åŸç”Ÿæä¾› <code>Proxy</code> æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ <code>Proxy</code> å®ä¾‹ã€‚<code>target</code>å‚æ•°è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡ï¼Œ<code>handler</code>å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªæ‹¦æˆªè¯»å–å±æ€§è¡Œä¸ºçš„ä¾‹å­ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(</span><br><span class="line">  &#123;&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">target, propKey</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">35</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">time</span>; <span class="comment">// 35</span></span><br><span class="line">proxy.<span class="property">name</span>; <span class="comment">// 35</span></span><br><span class="line">proxy.<span class="property">title</span>; <span class="comment">// 35</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½œä¸ºæ„é€ å‡½æ•°ï¼Œ<code>Proxy</code>æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¢«ä»£ç†çš„æ“ä½œï¼Œéœ€è¦æä¾›ä¸€ä¸ªå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ‹¦æˆªå¯¹åº”çš„æ“ä½œã€‚<br><br></p><p>æ³¨æ„ï¼Œè¦ä½¿å¾—<code>Proxy</code>èµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹<code>Proxy</code>å®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œæ“ä½œã€‚</p><hr><h3 id="14-2-Proxy-çš„å®ä¾‹æ–¹æ³•"><a href="#14-2-Proxy-çš„å®ä¾‹æ–¹æ³•" class="headerlink" title="14.2 Proxy çš„å®ä¾‹æ–¹æ³•"></a>14.2 Proxy çš„å®ä¾‹æ–¹æ³•</h3><p><code>Proxy</code> æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€å…± <code>13</code> ç§ã€‚(å‰©ä¸‹çš„å¯ä»¥åœ¨<a href="https://es6.ruanyifeng.com/#docs/proxy#Proxy-%E5%AE%9E%E4%BE%8B%E7%9A%84%E6%96%B9%E6%B3%95">è¿™é‡Œ</a>æ‰¾åˆ°) <br><br></p><p><code>get()</code>æ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œï¼Œå¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åå’Œ <code>proxy</code> å®ä¾‹æœ¬èº«ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">target, propKey</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (propKey <span class="keyword">in</span> target) &#123;</span><br><span class="line">      <span class="keyword">return</span> target[propKey];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ReferenceError</span>(<span class="string">&#x27;Prop name &quot;&#x27;</span> + propKey + <span class="string">&#x27;&quot; does not exist.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span>; <span class="comment">// &quot;å¼ ä¸‰&quot;</span></span><br><span class="line">proxy.<span class="property">age</span>; <span class="comment">// æŠ›å‡ºä¸€ä¸ªé”™è¯¯</span></span><br></pre></td></tr></table></figure><p><code>set()</code>æ–¹æ³•ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œï¼Œå¯ä»¥æ¥å—å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åã€å±æ€§å€¼å’Œ <code>Proxy</code> å®ä¾‹æœ¬èº«ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> validator = &#123;</span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">obj, prop, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (prop === <span class="string">&quot;age&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="title class_">Number</span>.<span class="title function_">isInteger</span>(value)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&quot;The age is not an integer&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (value &gt; <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RangeError</span>(<span class="string">&quot;The age seems invalid&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹äºæ»¡è¶³æ¡ä»¶çš„ age å±æ€§ä»¥åŠå…¶ä»–å±æ€§ï¼Œç›´æ¥ä¿å­˜</span></span><br><span class="line">    obj[prop] = value;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123;&#125;, validator);</span><br><span class="line">person.<span class="property">age</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">person.<span class="property">age</span>; <span class="comment">// 100</span></span><br><span class="line">person.<span class="property">age</span> = <span class="string">&quot;young&quot;</span>; <span class="comment">// æŠ¥é”™</span></span><br><span class="line">person.<span class="property">age</span> = <span class="number">300</span>; <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><hr><h2 id="15-Reflect"><a href="#15-Reflect" class="headerlink" title="15. Reflect"></a>15. Reflect</h2><h3 id="15-1-Reflect-æ¦‚è¿°"><a href="#15-1-Reflect-æ¦‚è¿°" class="headerlink" title="15.1 Reflect æ¦‚è¿°"></a>15.1 Reflect æ¦‚è¿°</h3><p><code>Reflect</code>å¯¹è±¡ä¸<code>Proxy</code>å¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ <code>ES6</code> ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° <code>API</code>ã€‚<code>Reflect</code>å¯¹è±¡çš„è®¾è®¡ç›®çš„æœ‰è¿™æ ·å‡ ä¸ªã€‚</p><ul><li><p>å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰ï¼Œæ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœªæ¥å¯ä»¥ä»<code>Reflect</code>å¯¹è±¡ä¸Šæ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚</p></li><li><p>ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚</p></li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è€å†™æ³•</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, property, attributes);</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å†™æ³•</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">Reflect</span>.<span class="title function_">defineProperty</span>(target, property, attributes)) &#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ç›´æ¥è¿”å› false</span></span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è€å†™æ³•</span></span><br><span class="line"><span class="string">&quot;assign&quot;</span> <span class="keyword">in</span> <span class="title class_">Object</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å†™æ³•</span></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">has</span>(<span class="title class_">Object</span>, <span class="string">&quot;assign&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>è®©<code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•å¯¹åº”ï¼Œåªè¦æ˜¯<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> loggedObj = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;get&quot;</span>, target, name);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, name);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;delete&quot;</span> + name);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, name);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">has</span>(<span class="params">target, name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;has&quot;</span> + name);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">has</span>(target, name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€ä¸ª<code>Proxy</code>å¯¹è±¡çš„æ‹¦æˆªæ“ä½œ<code>get</code>ã€<code>delete</code>ã€<code>has</code>ï¼Œå†…éƒ¨éƒ½è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œä¿è¯åŸç”Ÿè¡Œä¸ºèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚<br><br></p><p>ç®€å•æ¥è¯´ï¼Œæœ‰äº†<code>Reflect</code>å¯¹è±¡ä»¥åï¼Œå¾ˆå¤šæ“ä½œä¼šæ›´æ˜“è¯»ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è€å†™æ³•</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">apply</span>.<span class="title function_">call</span>(<span class="title class_">Math</span>.<span class="property">floor</span>, <span class="literal">undefined</span>, [<span class="number">1.75</span>]); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å†™æ³•</span></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>.<span class="property">floor</span>, <span class="literal">undefined</span>, [<span class="number">1.75</span>]); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><hr><h3 id="15-2-Reflect-é™æ€æ–¹æ³•"><a href="#15-2-Reflect-é™æ€æ–¹æ³•" class="headerlink" title="15.2 Reflect é™æ€æ–¹æ³•"></a>15.2 Reflect é™æ€æ–¹æ³•</h3><p><code>Reflect</code>å¯¹è±¡ä¹Ÿæœ‰ <code>13</code> ä¸ªé™æ€æ–¹æ³•ã€‚(å‰©ä¸‹çš„å¯ä»¥åœ¨<a href="https://es6.ruanyifeng.com/#docs/reflect#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">è¿™é‡Œ</a>æ‰¾åˆ°) <br><br></p><p><code>Reflect.get</code>æ–¹æ³•æŸ¥æ‰¾å¹¶è¿”å›<code>target</code>å¯¹è±¡çš„<code>name</code>å±æ€§ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myObject = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">baz</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">foo</span> + <span class="variable language_">this</span>.<span class="property">bar</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">get</span>(myObject, <span class="string">&quot;foo&quot;</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">get</span>(myObject, <span class="string">&quot;bar&quot;</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">get</span>(myObject, <span class="string">&quot;baz&quot;</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p><code>Reflect.set</code>æ–¹æ³•è®¾ç½®<code>target</code>å¯¹è±¡çš„<code>name</code>å±æ€§ç­‰äº<code>value</code>ã€‚<br><br></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myObject = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">bar</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">foo</span> = value);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.<span class="property">foo</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">set</span>(myObject, <span class="string">&quot;foo&quot;</span>, <span class="number">2</span>);</span><br><span class="line">myObject.<span class="property">foo</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">set</span>(myObject, <span class="string">&quot;bar&quot;</span>, <span class="number">3</span>);</span><br><span class="line">myObject.<span class="property">foo</span>; <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Coding</title>
      <link href="/posts/3458e8f8.html"/>
      <url>/posts/3458e8f8.html</url>
      
        <content type="html"><![CDATA[<h3 id="PriorityQueue-ä¼˜å…ˆé˜Ÿåˆ—"><a href="#PriorityQueue-ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="PriorityQueue ä¼˜å…ˆé˜Ÿåˆ—"></a><code>PriorityQueue</code> ä¼˜å…ˆé˜Ÿåˆ—</h3><h4 id="ç¬¬kå¤§çš„å…ƒç´ "><a href="#ç¬¬kå¤§çš„å…ƒç´ " class="headerlink" title="ç¬¬kå¤§çš„å…ƒç´ "></a>ç¬¬<code>k</code>å¤§çš„å…ƒç´ </h4><blockquote><p><a href="https://leetcode.com/problems/kth-largest-element-in-an-array/">Leetcode 215. Kth Largest Element in an Array</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªæ•°ç»„<code>nums</code>å’Œä¸€ä¸ªæ•´æ•°<code>k</code>ï¼Œè¾“å‡ºæ•°ç»„ä¸­ç¬¬<code>k</code>å¤§çš„å…ƒç´ </li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [3, 2, 1, 5, 6, 4], k = 2</span><br><span class="line">Output: 5</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> æœ€å°å † <a href="https://www.geeksforgeeks.org/heap-queue-or-heapq-in-python/">ä»€ä¹ˆæ˜¯ heap</a></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–ä¸€ä¸ªå¤§å°ä¸º k çš„æœ€å°å †ï¼Œå°†å‰ k ä¸ªå…ƒç´ åŠ å…¥å †ä¸­</span><br><span class="line">2. éå†å‰©ä½™çš„å…ƒç´ ï¼Œå¦‚æœå½“å‰å…ƒç´ å¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™æ›¿æ¢å †é¡¶</span><br><span class="line">3. éå†ç»“æŸåï¼Œå †é¡¶å³ä¸ºç¬¬ k å¤§çš„å…ƒç´ </span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findKthLargest</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        heap = nums[:k]</span><br><span class="line">        heapq.heapify(heap)  <span class="comment"># å»ºç«‹æœ€å°å †</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums[k:]:</span><br><span class="line">            <span class="keyword">if</span> num &gt; heap[<span class="number">0</span>]:  <span class="comment"># åªåœ¨å½“å‰å…ƒç´ å¤§äºå †é¡¶æ—¶æ›¿æ¢</span></span><br><span class="line">                heapq.heapreplace(heap, num)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> heap[<span class="number">0</span>] <span class="comment"># å¦‚æœæ˜¯ heap, é‚£å°±æ˜¯è¿”å›æ•°ç»„å‰ k å¤§çš„å…ƒç´ </span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">findKthLargest</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> minPQ = <span class="keyword">new</span> <span class="title class_">MinPriorityQueue</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            minPQ.<span class="title function_">enqueue</span>(nums[i]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (minPQ.<span class="title function_">size</span>() &gt; k)</span><br><span class="line">                minPQ.<span class="title function_">dequeue</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> minPQ.<span class="title function_">front</span>().<span class="property">element</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å‰kä¸ªå…ƒç´ çš„é¢‘ç‡"><a href="#å‰kä¸ªå…ƒç´ çš„é¢‘ç‡" class="headerlink" title="å‰kä¸ªå…ƒç´ çš„é¢‘ç‡"></a>å‰<code>k</code>ä¸ªå…ƒç´ çš„é¢‘ç‡</h4><blockquote><p><a href="https://leetcode.com/problems/top-k-frequent-elements/">Leetcode 347. Top K Frequent Elements</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªæ•°ç»„<code>nums</code>å’Œä¸€ä¸ªæ•´æ•°<code>k</code>ï¼Œè¿”å›æ•°ç»„ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å‰<code>k</code>ä¸ªå…ƒç´ </li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1, 1, 1, 2, 2, 3], k = 2</span><br><span class="line">Output: [1, 2]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³• 1: heapq.nlargest</code> (<code>Python</code>)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ `Counter` ç»Ÿè®¡å…ƒç´ å‡ºç°é¢‘ç‡</span><br><span class="line">2. è°ƒç”¨ `heapq.nlargest`ï¼Œåœ¨ O(n + k log n) æ—¶é—´å†…æ‰¾åˆ°å‰ k å¤§çš„é¢‘ç‡</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topKFrequent</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(nums) == k:</span><br><span class="line">            <span class="keyword">return</span> nums</span><br><span class="line"></span><br><span class="line">        count = Counter(nums)</span><br><span class="line">        <span class="keyword">return</span> heapq.nlargest(k, count.keys(), key=count.get)</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³• 2:</code> æœ€å°å †</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç»Ÿè®¡å…ƒç´ é¢‘ç‡ï¼Œä½¿ç”¨å †å­˜å‚¨å‰ k ä¸ªé«˜é¢‘å…ƒç´ </span><br><span class="line">2. æ¯æ¬¡æ¯”è¾ƒå½“å‰å…ƒç´ ä¸å †é¡¶çš„é¢‘ç‡ï¼Œç»´æŠ¤å †çš„å¤§å°ä¸º k</span><br><span class="line">3. æœ€åå †ä¸­çš„å…ƒç´ å³ä¸ºç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topKFrequent</span>(<span class="params">nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="comment"># 1. ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„é¢‘ç‡</span></span><br><span class="line">        freq_map = Counter(nums)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. ä½¿ç”¨æœ€å°å †æ‰¾åˆ°å‰ k ä¸ªé¢‘ç‡æœ€é«˜çš„å…ƒç´ </span></span><br><span class="line">        heap = []</span><br><span class="line">        <span class="keyword">for</span> num, freq <span class="keyword">in</span> freq_map.items():</span><br><span class="line">            heapq.heappush(heap, (freq, num))  <span class="comment"># å †ä¸­å­˜å‚¨ (é¢‘ç‡, å…ƒç´ )</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(heap) &gt; k:</span><br><span class="line">                heapq.heappop(heap)  <span class="comment"># ç»´æŒå †çš„å¤§å°ä¸º k</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. æå–å †ä¸­çš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> [num <span class="keyword">for</span> freq, num <span class="keyword">in</span> heap]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">topKFrequent</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">        <span class="comment">// 1. ç»Ÿè®¡é¢‘ç‡</span></span><br><span class="line">        <span class="keyword">const</span> freqMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> nums)</span><br><span class="line">            freqMap.<span class="title function_">set</span>(num, (freqMap.<span class="title function_">get</span>(num) || <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. ä½¿ç”¨æœ€å°å †</span></span><br><span class="line">        <span class="keyword">const</span> minPQ = <span class="keyword">new</span> <span class="title class_">MinPriorityQueue</span>(&#123; <span class="attr">priority</span>: <span class="function"><span class="params">x</span> =&gt;</span> x[<span class="number">1</span>] &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> [num, freq] <span class="keyword">of</span> freqMap) &#123;</span><br><span class="line">            minPQ.<span class="title function_">enqueue</span>([num, freq]);</span><br><span class="line">            <span class="keyword">if</span> (minPQ.<span class="title function_">size</span>() &gt; k)</span><br><span class="line">                minPQ.<span class="title function_">dequeue</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. æå–å †ä¸­çš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> minPQ.<span class="title function_">toArray</span>().<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">element</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li><code>è§£æ³• 3:</code> æ¡¶æ’åº</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç»Ÿè®¡é¢‘ç‡ï¼Œå¹¶å°†å…ƒç´ æŒ‰é¢‘ç‡å­˜å‚¨åœ¨â€œæ¡¶â€ä¸­</span><br><span class="line">2. æ¡¶çš„ç´¢å¼•è¡¨ç¤ºé¢‘ç‡ï¼Œä»é«˜åˆ°ä½æå–å‰ k ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topKFrequent</span>(<span class="params">nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="comment"># 1. ç»Ÿè®¡é¢‘ç‡</span></span><br><span class="line">        freq_map = Counter(nums)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. æ¡¶æ’åº</span></span><br><span class="line">        bucket = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) + <span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">for</span> num, freq <span class="keyword">in</span> freq_map.items():</span><br><span class="line">            bucket[freq].append(num) <span class="comment"># å°†å…ƒç´ æŒ‰é¢‘ç‡å­˜å‚¨åœ¨å¯¹åº”æ¡¶ä¸­</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. ä»é«˜é¢‘åˆ°ä½é¢‘æå–å‰ k ä¸ªå…ƒç´ </span></span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(bucket) - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> num <span class="keyword">in</span> bucket[i]:</span><br><span class="line">                result.append(num)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(result) == k:</span><br><span class="line">                    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">topKFrequent</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">        <span class="comment">// 1. ç»Ÿè®¡é¢‘ç‡</span></span><br><span class="line">        <span class="keyword">const</span> freqMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> nums)</span><br><span class="line">            freqMap.<span class="title function_">set</span>(num, (freqMap.<span class="title function_">get</span>(num) || <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æ¡¶æ’åº</span></span><br><span class="line">        <span class="keyword">const</span> bucket = <span class="title class_">Array</span>(nums.<span class="property">length</span> + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="literal">null</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> []);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> [num, freq] <span class="keyword">of</span> freqMap)</span><br><span class="line">            bucket[freq].<span class="title function_">push</span>(num);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. ä»é«˜é¢‘åˆ°ä½é¢‘æå–å‰ k ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = bucket.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span> &amp;&amp; result.<span class="property">length</span> &lt; k; i--)</span><br><span class="line">            result.<span class="title function_">push</span>(...bucket[i]);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p><code>æœ€å°å †</code>: æ›´çµæ´»ï¼Œå¯ä»¥é€‚åº”åŠ¨æ€è¾“å…¥æ•°æ®ï¼Œé€‚åˆ<code>k</code>è¾ƒå°çš„æƒ…å†µ<br><code>æ¡¶æ’åº</code>: æ›´é«˜æ•ˆï¼Œå°¤å…¶æ˜¯å½“<code>k</code>è¾ƒå¤§æˆ–é¢‘ç‡åˆ†å¸ƒè¾ƒå‡åŒ€æ—¶</p></blockquote><hr><h3 id="Design"><a href="#Design" class="headerlink" title="Design"></a><code>Design</code></h3><h4 id="LRU-ç¼“å­˜"><a href="#LRU-ç¼“å­˜" class="headerlink" title="LRU ç¼“å­˜"></a><code>LRU</code> ç¼“å­˜</h4><blockquote><p><a href="https://leetcode.com/problems/lru-cache/">Leetcode 146. LRU Cache</a></p></blockquote><ul><li><p><code>é¢˜ç›®:</code> å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„<code>LRU Cache (Least Recently Used Cache)</code>ï¼Œå®ƒèƒ½å¤Ÿåœ¨å›ºå®šå®¹é‡ä¸‹ç¼“å­˜é”®å€¼å¯¹ï¼ŒåŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ç§æ“ä½œ</p><ul><li><code>get(key)</code>: å¦‚æœé”®å­˜åœ¨ï¼Œè¿”å›å…¶å€¼ï¼Œå¹¶å°†è¯¥é”®æ ‡è®°ä¸ºæœ€è¿‘ä½¿ç”¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›<code>-1</code></li><li><code>put(key, value)</code>: æ’å…¥æ–°é”®å€¼å¯¹ã€‚å¦‚æœç¼“å­˜å·²æ»¡ï¼Œç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„é”®å€¼å¯¹</li></ul></li><li><p><code>è§£æ³• 1: OrderedDict</code> (<code>Python</code>)</p><ul><li><code>Python</code>ä¸­çš„<code>OrderedDict</code>å¯ä»¥éå¸¸ç›´è§‚åœ°å®ç°<code>LRU Cache</code></li><li><code>OrderedDict</code>è‡ªåŠ¨ç»´æŠ¤æ’å…¥é¡ºåºï¼Œæœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´ æ€»åœ¨æœ€å‰é¢</li><li>æä¾›äº†<code>move_to_end(key)</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŸä¸ªé”®ç§»åŠ¨åˆ°æœ«å°¾ï¼Œè¡¨ç¤ºæœ€è¿‘ä½¿ç”¨</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get æ–¹æ³•</span><br><span class="line">    å¦‚æœé”®å­˜åœ¨ï¼Œå°†å…¶ç§»åˆ°æœ«å°¾ï¼Œè¡¨ç¤ºæœ€è¿‘ä½¿ç”¨ï¼Œå¹¶è¿”å›å¯¹åº”å€¼</span><br><span class="line">    å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å› -1</span><br><span class="line"></span><br><span class="line">put æ–¹æ³•</span><br><span class="line">    å¦‚æœé”®å­˜åœ¨ï¼Œæ›´æ–°å€¼å¹¶ç§»åˆ°æœ«å°¾</span><br><span class="line">    å¦‚æœé”®ä¸å­˜åœ¨ï¼Œç›´æ¥æ·»åŠ </span><br><span class="line">    å¦‚æœç¼“å­˜è¶…å‡ºå®¹é‡ï¼Œåˆ é™¤æœ€å‰é¢çš„é”®ï¼ˆpopitem(last=False)ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, capacity: <span class="built_in">int</span></span>):</span><br><span class="line">        self.cache = OrderedDict() <span class="comment"># åˆ›å»ºä¸€ä¸ªæœ‰åºå­—å…¸</span></span><br><span class="line">        self.capacity = capacity</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, key: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.cache:</span><br><span class="line">            <span class="comment"># å°†è®¿é—®çš„é”®ç§»åˆ°æœ«å°¾</span></span><br><span class="line">            self.cache.move_to_end(key)</span><br><span class="line">            <span class="keyword">return</span> self.cache[key]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, key: <span class="built_in">int</span>, value: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.cache:</span><br><span class="line">            <span class="comment"># å¦‚æœé”®å·²ç»å­˜åœ¨ï¼Œæ›´æ–°å€¼ï¼Œå¹¶ç§»åˆ°æœ«å°¾</span></span><br><span class="line">            self.cache.move_to_end(key)</span><br><span class="line"></span><br><span class="line">        self.cache[key] = value</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.cache) &gt; self.capacity:</span><br><span class="line">            <span class="comment"># è¶…è¿‡å®¹é‡æ—¶ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªé”®ï¼ˆæœ€ä¹…æœªä½¿ç”¨ï¼‰</span></span><br><span class="line">            self.cache.popitem(last=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³• 2: Map</code> (<code>Javascript</code>)<ul><li><code>JS</code>çš„<code>Map</code>æ•°æ®ç»“æ„ï¼Œå®ƒæŒ‰æ’å…¥é¡ºåºå­˜å‚¨é”®å€¼å¯¹</li><li>ä½¿ç”¨<code>set(key, value)</code>æ–¹æ³•æ›´æ–°é”®æ—¶ï¼Œä¼šå°†è¯¥é”®ç§»åˆ°æœ«å°¾ï¼Œè¡¨ç¤ºæœ€è¿‘ä½¿ç”¨</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get æ–¹æ³•</span><br><span class="line">    å¦‚æœé”®å­˜åœ¨ï¼Œå…ˆåˆ é™¤å®ƒï¼Œå†é‡æ–°æ’å…¥åˆ°æœ«å°¾</span><br><span class="line">    å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å› -1</span><br><span class="line"></span><br><span class="line">put æ–¹æ³•</span><br><span class="line">    å¦‚æœé”®å·²å­˜åœ¨ï¼Œå…ˆåˆ é™¤å®ƒï¼Œå†æ’å…¥æ–°å€¼</span><br><span class="line">    å¦‚æœè¶…è¿‡å®¹é‡ï¼Œåˆ é™¤æœ€è€çš„é”®ï¼ˆMap.keys().next().value è¿”å›ç¬¬ä¸€ä¸ªé”®ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">capacity</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">capacity</span> = capacity;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// Map æ˜¯æœ‰åºçš„ï¼ŒæŒ‰æ’å…¥é¡ºåºç»´æŠ¤é”®å€¼å¯¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) <span class="keyword">return</span> -<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(key);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// åˆ é™¤æ—§ä½ç½®çš„é”®</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value); <span class="comment">// å°†é”®ç§»åˆ°æœ«å°¾ï¼ˆæœ€æ–°ä½¿ç”¨ï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">put</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key))</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// å¦‚æœé”®å·²å­˜åœ¨ï¼Œå…ˆåˆ é™¤å®ƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value); <span class="comment">// æ’å…¥æ–°é”®å€¼å¯¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="property">size</span> &gt; <span class="variable language_">this</span>.<span class="property">capacity</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> oldestKey = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">keys</span>().<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// è·å–æœ€è€çš„é”®</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(oldestKey);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h4 id="å®ç°éšæœºé›†åˆ"><a href="#å®ç°éšæœºé›†åˆ" class="headerlink" title="å®ç°éšæœºé›†åˆ"></a>å®ç°éšæœºé›†åˆ</h4><blockquote><p><a href="https://leetcode.com/problems/insert-delete-getrandom-o1/">Leetcode 380. Insert Delete GetRandom O(1)</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹æ“ä½œçš„é›†åˆï¼Œåœ¨å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º<code>O(1)</code>ä¸‹å®ç°æ’å…¥ã€åˆ é™¤å’Œéšæœºè·å–æ“ä½œ<ul><li><code>insert(val)</code>: å¦‚æœé›†åˆä¸­æ²¡æœ‰è¯¥å€¼ï¼Œåˆ™æ’å…¥</li><li><code>remove(val)</code>: å¦‚æœé›†åˆä¸­å­˜åœ¨è¯¥å€¼</li><li><code>getRandom()</code>: éšæœºè¿”å›é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ è¢«è¿”å›çš„æ¦‚ç‡ç›¸ç­‰</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input</span><br><span class="line">[&quot;RandomizedSet&quot;, &quot;insert&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;]</span><br><span class="line">[[], [1], [2], [2], [], [1], [2], []]</span><br><span class="line">Output</span><br><span class="line">[null, true, false, true, 2, true, false, 2]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> æ•°ç»„ + å“ˆå¸Œè¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. æ•°ç»„å­˜å‚¨é›†åˆçš„å…ƒç´ ï¼Œç”¨äºéšæœºè®¿é—®</span><br><span class="line">2. å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªå€¼åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œæ–¹ä¾¿ O(1) æ—¶é—´æŸ¥æ‰¾å’Œåˆ é™¤</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RandomizedSet</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.<span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line">        self.<span class="built_in">list</span> = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, val: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">in</span> self.<span class="built_in">dict</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        self.<span class="built_in">dict</span>[val] = <span class="built_in">len</span>(self.<span class="built_in">list</span>) <span class="comment"># è®°å½•å€¼çš„ç´¢å¼•</span></span><br><span class="line">        self.<span class="built_in">list</span>.append(val) <span class="comment"># å°†å€¼æ·»åŠ åˆ°åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove</span>(<span class="params">self, val: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">not</span> <span class="keyword">in</span> self.<span class="built_in">dict</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        idx = self.<span class="built_in">dict</span>[val] <span class="comment"># è·å–å€¼çš„ç´¢å¼•</span></span><br><span class="line">        last = self.<span class="built_in">list</span>[-<span class="number">1</span>] <span class="comment"># è·å–åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line">        self.<span class="built_in">list</span>[idx] = last <span class="comment"># å°†æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°è¢«ç§»é™¤çš„ä½ç½®</span></span><br><span class="line">        self.<span class="built_in">dict</span>[last] = idx <span class="comment"># æ›´æ–°æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">        self.<span class="built_in">list</span>.pop() <span class="comment"># åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">del</span> self.<span class="built_in">dict</span>[val] <span class="comment"># ä»å­—å…¸ä¸­åˆ é™¤è¯¥å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getRandom</span>(<span class="params">self</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">return</span> random.choice(self.<span class="built_in">list</span>) <span class="comment"># éšæœºé€‰æ‹©ä¸€ä¸ªåˆ—è¡¨ä¸­çš„å€¼</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span> = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">insert</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">has</span>(val)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(val, <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>); <span class="comment">// å­˜å‚¨å€¼å’Œç´¢å¼•</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(val); <span class="comment">// å°†å€¼æ·»åŠ åˆ°æ•°ç»„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">has</span>(val)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> idx = <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(val); <span class="comment">// è·å–å€¼çš„ç´¢å¼•</span></span><br><span class="line">        <span class="keyword">const</span> last = <span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span> - <span class="number">1</span>]; <span class="comment">// è·å–æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[idx] = last; <span class="comment">// å°†æœ€åä¸€ä¸ªå€¼ç§»åˆ°è¢«åˆ é™¤çš„ä½ç½®</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(last, idx); <span class="comment">// æ›´æ–°æœ€åä¸€ä¸ªå€¼çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">pop</span>(); <span class="comment">// åˆ é™¤æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">delete</span>(val); <span class="comment">// ä»æ˜ å°„ä¸­åˆ é™¤è¯¥å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getRandom</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> randomIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>[randomIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="LinkedList-é“¾è¡¨"><a href="#LinkedList-é“¾è¡¨" class="headerlink" title="LinkedList é“¾è¡¨"></a><code>LinkedList</code> é“¾è¡¨</h3><h4 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/reverse-linked-list/">Leetcode 206. Reverse Linked List</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹<code>head</code>ï¼Œå°†å…¶å®Œå…¨åè½¬ï¼Œå¹¶è¿”å›æ–°çš„å¤´èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [0,1,2,3]</span><br><span class="line">Output: [3,2,1,0]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•: Two Pointers</code> åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆï¼šprev è¡¨ç¤ºå‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œcurr è¡¨ç¤ºå½“å‰èŠ‚ç‚¹</span><br><span class="line">2. éå†é“¾è¡¨ï¼Œé€ä¸ªè°ƒæ•´å½“å‰èŠ‚ç‚¹çš„æŒ‡å‘ï¼Œä½¿å…¶æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">3. ç§»åŠ¨æŒ‡é’ˆï¼Œç›´åˆ°é“¾è¡¨å°¾éƒ¨</span><br><span class="line">4. è¿”å› prev ä½œä¸ºæ–°çš„å¤´èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverseList</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        prev = <span class="literal">None</span></span><br><span class="line">        curr = head</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> curr:</span><br><span class="line">            next_node = curr.<span class="built_in">next</span> <span class="comment"># æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            curr.<span class="built_in">next</span> = prev <span class="comment"># å½“å‰èŠ‚ç‚¹æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            prev = curr <span class="comment"># prev å‘å‰ç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            curr = next_node <span class="comment"># curr å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prev   </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">reverseList</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> prev = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> curr = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">            <span class="keyword">let</span> nextNode = curr.<span class="property">next</span>; <span class="comment">// æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            curr.<span class="property">next</span> = prev; <span class="comment">// å½“å‰èŠ‚ç‚¹æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            prev = curr; <span class="comment">// prev å‘å‰ç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            curr = nextNode; <span class="comment">// curr å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åè½¬é“¾è¡¨ä¸­é—´éƒ¨åˆ†"><a href="#åè½¬é“¾è¡¨ä¸­é—´éƒ¨åˆ†" class="headerlink" title="åè½¬é“¾è¡¨ä¸­é—´éƒ¨åˆ†"></a>åè½¬é“¾è¡¨ä¸­é—´éƒ¨åˆ†</h4><blockquote><p><a href="https://leetcode.com/problems/reverse-linked-list-ii/">Leetcode 92. Reverse Linked List II</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹<code>head</code>ï¼Œä»¥åŠä¸¤ä¸ªæ•´æ•°<code>left</code>å’Œ<code>right</code>ï¼Œåè½¬é“¾è¡¨ä¸­ä»ä½ç½®<code>left</code>åˆ°ä½ç½®<code>right</code>çš„éƒ¨åˆ†ï¼Œå¹¶è¿”å›é“¾è¡¨çš„å¤´èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,2,3,4,5], left = 2, right = 4</span><br><span class="line">Output: [1,4,3,2,5]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> è™šæ‹Ÿå¤´èŠ‚ç‚¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. æ·»åŠ è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼šç”¨äºå¤„ç†ä»é“¾è¡¨å¤´éƒ¨å¼€å§‹åè½¬çš„ç‰¹æ®Šæƒ…å†µ</span><br><span class="line">2. æ‰¾åˆ° left çš„å‰é©±èŠ‚ç‚¹ prev å’Œè¦åè½¬çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ curr</span><br><span class="line">3. éå†ä» left åˆ° right çš„é“¾è¡¨éƒ¨åˆ†ï¼Œé€ä¸ªå°†å½“å‰èŠ‚ç‚¹æ’å…¥åˆ°å­é“¾è¡¨çš„å¤´éƒ¨</span><br><span class="line">4. è¿”å›é“¾è¡¨çš„æ–°å¤´èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverseBetween</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode], left: <span class="built_in">int</span>, right: <span class="built_in">int</span></span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        dummy = ListNode(<span class="number">0</span>, head)</span><br><span class="line">        prev = dummy</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. æ‰¾åˆ° left çš„å‰é©±èŠ‚ç‚¹ï¼ˆprevï¼‰å’Œ left èŠ‚ç‚¹ï¼ˆcurrï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(left - <span class="number">1</span>):</span><br><span class="line">            prev = prev.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        curr = prev.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. åè½¬ [left, right] ä¹‹é—´çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(right - left):</span><br><span class="line">            next_node = curr.<span class="built_in">next</span> <span class="comment"># æš‚å­˜å½“å‰èŠ‚ç‚¹çš„ next</span></span><br><span class="line">            curr.<span class="built_in">next</span> = next_node.<span class="built_in">next</span> <span class="comment"># å½“å‰èŠ‚ç‚¹æŒ‡å‘ next çš„ next</span></span><br><span class="line">            next_node.<span class="built_in">next</span> = prev.<span class="built_in">next</span> <span class="comment"># æ’å…¥åˆ°å­é“¾è¡¨å¤´éƒ¨</span></span><br><span class="line">            prev.<span class="built_in">next</span> = next_node <span class="comment"># æ›´æ–° prev çš„ next</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">reverseBetween</span>(<span class="params">head, left, right</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>, head);</span><br><span class="line">        <span class="keyword">let</span> prev = dummy;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. æ‰¾åˆ° left çš„å‰é©±èŠ‚ç‚¹ï¼ˆprevï¼‰å’Œ left èŠ‚ç‚¹ï¼ˆcurrï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; left; i++)</span><br><span class="line">            prev = prev.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">        curr = prev.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. åè½¬ [left, right] ä¹‹é—´çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; right - left; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> nextNode = curr.<span class="property">next</span>;</span><br><span class="line">            curr.<span class="property">next</span> = nextNode.<span class="property">next</span>;</span><br><span class="line">            nextNode.<span class="property">next</span> = prev.<span class="property">next</span>;</span><br><span class="line">            prev.<span class="property">next</span> = nextNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>ä¾‹å­ï¼Œåè½¬é“¾è¡¨<code>1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</code> ç¬¬<code>2</code>ä¸ªèŠ‚ç‚¹åˆ°ç¬¬<code>4</code>ä¸ªèŠ‚ç‚¹</li></ul><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Step 1</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Step 2</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221705.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><p><img src="https://raw.githubusercontent.com/Hongda-Lin/ImageStore/master/img221721.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åˆæˆé“¾è¡¨"><a href="#åˆæˆé“¾è¡¨" class="headerlink" title="åˆæˆé“¾è¡¨"></a>åˆæˆé“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/merge-two-sorted-lists/">Leetcode 21. Merge Two Sorted Lists</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸¤ä¸ªå•é“¾è¡¨<code>list1</code>å’Œ<code>list2</code>ï¼Œå®ƒä»¬çš„å…ƒç´ æŒ‰å‡åºæ’åˆ—ã€‚å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œè¦æ±‚æ–°é“¾è¡¨ä¹ŸæŒ‰ç…§å‡åºæ’åˆ—ï¼Œå¹¶è¿”å›æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: list1 = [1,2,4], list2 = [1,3,5]</span><br><span class="line">Output: [1,1,2,3,4,5]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> è™šæ‹Ÿå¤´èŠ‚ç‚¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ dummy æ¥ç®€åŒ–é“¾è¡¨è¿æ¥é€»è¾‘</span><br><span class="line">2. éå† list1 å’Œ list2ï¼Œé€æ­¥æ¯”è¾ƒå®ƒä»¬çš„èŠ‚ç‚¹å€¼ï¼Œå°†è¾ƒå°çš„èŠ‚ç‚¹è¿æ¥åˆ°ç»“æœé“¾è¡¨ä¸­</span><br><span class="line">3. å½“ä¸€ä¸ªé“¾è¡¨éå†å®Œæˆåï¼Œå°†å¦ä¸€ä¸ªé“¾è¡¨å‰©ä½™çš„èŠ‚ç‚¹ç›´æ¥è¿æ¥åˆ°ç»“æœé“¾è¡¨</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mergeTwoLists</span>(<span class="params">self, list1: <span class="type">Optional</span>[ListNode], list2: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        dummy = ListNode()</span><br><span class="line">        curr = dummy</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œæ¯”è¾ƒèŠ‚ç‚¹å€¼</span></span><br><span class="line">        <span class="keyword">while</span> list1 <span class="keyword">and</span> list2:</span><br><span class="line">            <span class="keyword">if</span> list1.val &lt; list2.val:</span><br><span class="line">                curr.<span class="built_in">next</span> = list1</span><br><span class="line">                list1 = list1.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                curr.<span class="built_in">next</span> = list2</span><br><span class="line">                list2 = list2.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">            curr = curr.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿æ¥å‰©ä½™çš„èŠ‚ç‚¹</span></span><br><span class="line">        curr.<span class="built_in">next</span> = list1 <span class="keyword">or</span> list2</span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">mergeTwoLists</span>(<span class="params">list1, list2</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">let</span> curr = dummt;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œæ¯”è¾ƒèŠ‚ç‚¹å€¼</span></span><br><span class="line">        <span class="keyword">while</span> (list1 !== <span class="literal">null</span> &amp;&amp; list2 !== <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (list1.<span class="property">val</span> &lt; list2.<span class="property">val</span>) &#123;</span><br><span class="line">                curr.<span class="property">next</span> = list1;</span><br><span class="line">                list1 = list1.<span class="property">next</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                curr.<span class="property">next</span> = list2;</span><br><span class="line">                list2 = list2.<span class="property">next</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            curr = curr.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿æ¥å‰©ä½™çš„èŠ‚ç‚¹</span></span><br><span class="line">        curr.<span class="property">next</span> = list1 || list2;</span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"><a href="#kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨" class="headerlink" title="kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨"></a><code>k</code>ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/reverse-nodes-in-k-group/">Leetcode 25. Reverse Nodes in k-Group</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹<code>head</code>å’Œä¸€ä¸ªæ•´æ•°<code>k</code>ï¼Œå°†é“¾è¡¨æŒ‰ç…§æ¯<code>k</code>ä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„è¿›è¡Œç¿»è½¬ã€‚å¦‚æœå‰©ä½™èŠ‚ç‚¹ä¸è¶³ <code>k</code>ä¸ªï¼Œåˆ™ä¿æŒåŸæ ·ã€‚è¦æ±‚è¿”å›ç¿»è½¬åçš„é“¾è¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,2,3,4,5,6], k = 3</span><br><span class="line">Output: [3,2,1,6,5,4]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> æŒ‰ç»„ç¿»è½¬ + åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. éå†é“¾è¡¨å¹¶æŒ‰ k ä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„åˆ†å‰²</span><br><span class="line">2. å¯¹æ¯ç»„èŠ‚ç‚¹æ‰§è¡Œç¿»è½¬æ“ä½œ</span><br><span class="line">3. ç¿»è½¬åçš„éƒ¨åˆ†ä¸é“¾è¡¨çš„å…¶ä»–éƒ¨åˆ†æ­£ç¡®è¿æ¥</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverseKGroup</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode], k: <span class="built_in">int</span></span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        dummy = ListNode(<span class="number">0</span>, head)</span><br><span class="line">        group_prev = dummy</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># æ‰¾åˆ°å½“å‰ç»„çš„ç¬¬ k ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            kth = self.getKthNode(group_prev, k)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> kth:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            group_next = kth.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># åè½¬å½“å‰ç»„çš„èŠ‚ç‚¹</span></span><br><span class="line">            prev, curr = group_next, group_prev.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">while</span> curr != group_next:</span><br><span class="line">                next_node = curr.<span class="built_in">next</span></span><br><span class="line">                curr.<span class="built_in">next</span> = prev</span><br><span class="line">                prev = curr</span><br><span class="line">                curr = next_node</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¤„ç†è¿æ¥ï¼šå°†åè½¬åçš„éƒ¨åˆ†ä¸é“¾è¡¨å…¶ä½™éƒ¨åˆ†è¿æ¥èµ·æ¥</span></span><br><span class="line">            next_node = group_prev.<span class="built_in">next</span></span><br><span class="line">            group_prev.<span class="built_in">next</span> = kth</span><br><span class="line">            group_prev = next_node</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getKthNode</span>(<span class="params">self, node, k</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        <span class="keyword">while</span> node <span class="keyword">and</span> k &gt; <span class="number">0</span>:</span><br><span class="line">            node = node.<span class="built_in">next</span></span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">reverseKGroup</span>(<span class="params">head, k</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>, head);</span><br><span class="line">        <span class="keyword">let</span> groupPrev = dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°å½“å‰ç»„çš„ç¬¬ k ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">const</span> kth = <span class="variable language_">this</span>.<span class="title function_">getKthNode</span>(groupPrev, k);</span><br><span class="line">            <span class="keyword">if</span> (!kth) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">const</span> groupNext = kth.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åè½¬å½“å‰ç»„çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">let</span> prev = groupNext;</span><br><span class="line">            <span class="keyword">let</span> curr = groupPrev.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (curr !== groupNext) &#123;</span><br><span class="line">                <span class="keyword">const</span> nextNode = curr.<span class="property">next</span>;</span><br><span class="line">                curr.<span class="property">next</span> = prev;</span><br><span class="line">                prev = curr;</span><br><span class="line">                curr = nextNode;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†è¿æ¥</span></span><br><span class="line">            <span class="keyword">const</span> nextNode = groupPrev.<span class="property">next</span>;</span><br><span class="line">            groupPrev.<span class="property">next</span> = kth;</span><br><span class="line">            groupPrev = nextNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getKthNode</span>(<span class="params">node, k</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (node &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            node = node.<span class="property">next</span>;</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æˆå¯¹åè½¬é“¾è¡¨èŠ‚ç‚¹"><a href="#æˆå¯¹åè½¬é“¾è¡¨èŠ‚ç‚¹" class="headerlink" title="æˆå¯¹åè½¬é“¾è¡¨èŠ‚ç‚¹"></a>æˆå¯¹åè½¬é“¾è¡¨èŠ‚ç‚¹</h4><blockquote><p><a href="https://leetcode.com/problems/swap-nodes-in-pairs/">Leetcode 24. Swap Nodes in Pairs</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹<code>head</code>ï¼Œå°†é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä¸¤ä¸¤äº¤æ¢ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚å¦‚æœé“¾è¡¨èŠ‚ç‚¹æ•°æ˜¯å¥‡æ•°ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ä¿æŒä¸å˜</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,2,3,4]</span><br><span class="line">Output: [2,1,4,3]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> è™šæ‹Ÿå¤´èŠ‚ç‚¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ dummyï¼Œä¾¿äºæ“ä½œå¤´èŠ‚ç‚¹åŠå…¶åçš„èŠ‚ç‚¹</span><br><span class="line">2. æ¯æ¬¡å–å‡ºä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹ï¼Œå°†å®ƒä»¬äº¤æ¢</span><br><span class="line">3. æ­£ç¡®è°ƒæ•´æŒ‡é’ˆä»¥ä¿æŒé“¾è¡¨çš„é¡ºåº</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swapPairs</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        dummy = ListNode(<span class="number">0</span>, head)</span><br><span class="line">        prev = dummy</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> head <span class="keyword">and</span> head.<span class="built_in">next</span>:</span><br><span class="line">            <span class="comment"># è¦äº¤æ¢çš„ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            first = head</span><br><span class="line">            second = head.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># äº¤æ¢èŠ‚ç‚¹</span></span><br><span class="line">            prev.<span class="built_in">next</span> = second</span><br><span class="line">            first.<span class="built_in">next</span> = second.<span class="built_in">next</span></span><br><span class="line">            second.<span class="built_in">next</span> = first</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ç§»åŠ¨æŒ‡é’ˆå‡†å¤‡ä¸‹ä¸€ç»„äº¤æ¢</span></span><br><span class="line">            prev = first</span><br><span class="line">            head = first.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">swapPairs</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        dummy.<span class="property">next</span> = head;</span><br><span class="line">        <span class="keyword">let</span> prev = dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (head &amp;&amp; head.<span class="property">next</span>) &#123;</span><br><span class="line">            <span class="comment">// è¦äº¤æ¢çš„ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">const</span> first = head;</span><br><span class="line">            <span class="keyword">const</span> second = head.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// äº¤æ¢èŠ‚ç‚¹</span></span><br><span class="line">            prev.<span class="property">next</span> = second;</span><br><span class="line">            first.<span class="property">next</span> = second.<span class="property">next</span>;</span><br><span class="line">            second.<span class="property">next</span> = first;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç§»åŠ¨æŒ‡é’ˆå‡†å¤‡ä¸‹ä¸€ç»„äº¤æ¢</span></span><br><span class="line">            prev = first;</span><br><span class="line">            head = first.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å¯¹æŠ˜é“¾è¡¨"><a href="#å¯¹æŠ˜é“¾è¡¨" class="headerlink" title="å¯¹æŠ˜é“¾è¡¨"></a>å¯¹æŠ˜é“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/reorder-list/">Leetcode 143. Reorder List</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ç»™å®šä¸€ä¸ªå•é“¾è¡¨<code>head</code>ï¼Œè¦æ±‚åœ¨åŸåœ°ä¿®æ”¹é“¾è¡¨ï¼Œä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´, å°†å…¶é‡æ–°æ’åºä¸º<ul><li>åŸé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ -&gt; æœ€åä¸€ä¸ªèŠ‚ç‚¹ -&gt; ç¬¬äºŒä¸ªèŠ‚ç‚¹ -&gt; å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹ -&gt;</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,2,3,4,5]</span><br><span class="line">Output: [1,5,2,4,3]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> å¿«æ…¢æŒ‡é’ˆ + åè½¬é“¾è¡¨ + åˆå¹¶é“¾è¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹</span><br><span class="line">   - ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œå½“å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæŒ‡å‘ä¸­ç‚¹</span><br><span class="line">2. åè½¬é“¾è¡¨ååŠéƒ¨åˆ†</span><br><span class="line">   - å°†é“¾è¡¨ä»ä¸­ç‚¹åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œåè½¬ååŠéƒ¨åˆ†é“¾è¡¨</span><br><span class="line">3. åˆå¹¶é“¾è¡¨</span><br><span class="line">   - æŒ‰é¡ºåºäº¤æ›¿è¿æ¥å‰åŠéƒ¨åˆ†å’Œåè½¬åçš„ååŠéƒ¨åˆ†é“¾è¡¨</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reorderList</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Do not return anything, modify head in-place instead.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 1. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹</span></span><br><span class="line">        slow, fast = head, head.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> fast <span class="keyword">and</span> fast.<span class="built_in">next</span>:</span><br><span class="line">            slow = slow.<span class="built_in">next</span></span><br><span class="line">            fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. åè½¬é“¾è¡¨çš„ååŠéƒ¨åˆ†</span></span><br><span class="line">        curr = slow.<span class="built_in">next</span></span><br><span class="line">        prev = <span class="literal">None</span></span><br><span class="line">        slow.<span class="built_in">next</span> = <span class="literal">None</span> <span class="comment"># åˆ‡æ–­å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†é“¾è¡¨çš„è¿æ¥</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> curr:</span><br><span class="line">            next_node = curr.<span class="built_in">next</span></span><br><span class="line">            second.<span class="built_in">next</span> = prev</span><br><span class="line">            prev = curr</span><br><span class="line">            curr = next_node</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. åˆå¹¶é“¾è¡¨</span></span><br><span class="line">        first, second = head, prev <span class="comment"># first æ˜¯å‰åŠéƒ¨åˆ†çš„é“¾è¡¨å¤´ï¼Œsecond æ˜¯åè½¬åçš„ååŠéƒ¨åˆ†é“¾è¡¨å¤´</span></span><br><span class="line">        <span class="keyword">while</span> second:</span><br><span class="line">            tmp1, tmp2 = first.<span class="built_in">next</span>, second.<span class="built_in">next</span></span><br><span class="line">            first.<span class="built_in">next</span> = second</span><br><span class="line">            second.<span class="built_in">next</span> = tmp1</span><br><span class="line">            first, second = tmp1, tmp2</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">reorderList</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!head || !head.<span class="property">next</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> slow = head, fast = head.<span class="property">next</span>;</span><br><span class="line">        <span class="keyword">while</span> (fast &amp;&amp; fast.<span class="property">next</span>) &#123;</span><br><span class="line">            slow = slow.<span class="property">next</span>;</span><br><span class="line">            fast = fast.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. åè½¬é“¾è¡¨çš„ååŠéƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">let</span> curr = slow.<span class="property">next</span>;</span><br><span class="line">        <span class="keyword">let</span> prev = <span class="literal">null</span>;</span><br><span class="line">        slow.<span class="property">next</span> = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">            <span class="keyword">const</span> nextNode = curr.<span class="property">next</span>;</span><br><span class="line">            curr.<span class="property">next</span> = prev;</span><br><span class="line">            prev = curr;</span><br><span class="line">            curr = nextNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. åˆå¹¶é“¾è¡¨</span></span><br><span class="line">        <span class="keyword">let</span> first = head, second = prev;</span><br><span class="line">        <span class="keyword">while</span> (second) &#123;</span><br><span class="line">            <span class="keyword">let</span> tmp1 = first.<span class="property">next</span>, tmp2 = second.<span class="property">next</span>;</span><br><span class="line">            first.<span class="property">next</span> = second;</span><br><span class="line">            second.<span class="property">next</span> = tmp1;</span><br><span class="line">            first = tmp1, second = tmp2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åˆ é™¤æœ‰åºé“¾è¡¨é‡å¤å…ƒç´ "><a href="#åˆ é™¤æœ‰åºé“¾è¡¨é‡å¤å…ƒç´ " class="headerlink" title="åˆ é™¤æœ‰åºé“¾è¡¨é‡å¤å…ƒç´ "></a>åˆ é™¤æœ‰åºé“¾è¡¨é‡å¤å…ƒç´ </h4><blockquote><p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list/">Leetcode 83. Remove Duplicates from Sorted List</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ä»ä¸€ä¸ªå‡åºæ’åˆ—çš„é“¾è¡¨ä¸­ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„èŠ‚ç‚¹ï¼Œç¡®ä¿æ¯ä¸ªå€¼åªå‡ºç°ä¸€æ¬¡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,1,2,3,3]</span><br><span class="line">Output: [1,2,3]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> éå†é“¾è¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä»é“¾è¡¨å¤´å¼€å§‹ï¼Œä¾æ¬¡æ£€æŸ¥å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼</span><br><span class="line">2. å¦‚æœå½“å‰èŠ‚ç‚¹å€¼å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼ç›¸åŒï¼Œåˆ™è·³è¿‡ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">3. å¦‚æœå€¼ä¸åŒï¼Œåˆ™ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">4. é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°éå†å®Œæ•´ä¸ªé“¾è¡¨</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deleteDuplicates</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        curr = head</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> curr <span class="keyword">and</span> curr.<span class="built_in">next</span>:</span><br><span class="line">            next_node = curr.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">if</span> curr.val == next_node.val: <span class="comment"># å¦‚æœå½“å‰å€¼ç­‰äºä¸‹ä¸€ä¸ªå€¼</span></span><br><span class="line">                curr.<span class="built_in">next</span> = next_node.<span class="built_in">next</span> <span class="comment"># è·³è¿‡ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                curr = curr.<span class="built_in">next</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">deleteDuplicates</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> curr = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (curr &amp;&amp; curr.<span class="property">next</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> nextNode = curr.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (curr.<span class="property">val</span> === nextNode.<span class="property">val</span>) </span><br><span class="line">                curr.<span class="property">next</span> = nextNode.<span class="property">next</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                curr = curr.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åˆ é™¤æœ‰åºé“¾è¡¨æ‰€æœ‰é‡å¤å…ƒç´ "><a href="#åˆ é™¤æœ‰åºé“¾è¡¨æ‰€æœ‰é‡å¤å…ƒç´ " class="headerlink" title="åˆ é™¤æœ‰åºé“¾è¡¨æ‰€æœ‰é‡å¤å…ƒç´ "></a>åˆ é™¤æœ‰åºé“¾è¡¨æ‰€æœ‰é‡å¤å…ƒç´ </h4><blockquote><p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/">Leetcode 82. Remove Duplicates from Sorted List II</a></p></blockquote><ul><li><code>é¢˜ç›®:</code> ä»ä¸€ä¸ªå‡åºæ’åˆ—çš„é“¾è¡¨ä¸­ï¼Œåˆ é™¤æ‰€æœ‰å‡ºç°æ¬¡æ•°è¶…è¿‡<code>1</code>æ¬¡çš„èŠ‚ç‚¹ï¼Œä»…ä¿ç•™æ²¡æœ‰é‡å¤çš„èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [1,2,3,3,4,4,5]</span><br><span class="line">Output: [1,2,5]</span><br></pre></td></tr></table></figure><ul><li><code>è§£æ³•:</code> åŒæŒ‡é’ˆ + è™šæ‹Ÿå¤´èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆ›å»ºè™šæ‹Ÿå¤´èŠ‚ç‚¹ dummyï¼Œä»¥å¤„ç†å¯èƒ½éœ€è¦åˆ é™¤å¤´èŠ‚ç‚¹çš„æƒ…å†µ</span><br><span class="line">2. å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼š</span><br><span class="line">    - prevï¼šæŒ‡å‘æœ€åä¸€ä¸ªä¸é‡å¤çš„èŠ‚ç‚¹</span><br><span class="line">    - currï¼šç”¨äºéå†é“¾è¡¨</span><br><span class="line">3. éå†é“¾è¡¨ï¼š</span><br><span class="line">    - å¦‚æœ curr å’Œ curr.next çš„å€¼ç›¸åŒï¼Œè·³è¿‡æ‰€æœ‰é‡å¤çš„èŠ‚ç‚¹</span><br><span class="line">    - å¦‚æœæ²¡æœ‰é‡å¤ï¼Œç§»åŠ¨ prev æŒ‡é’ˆåˆ°å½“å‰èŠ‚ç‚¹</span><br><span class="line">4. è¿”å›è™šæ‹Ÿå¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deleteDuplicates</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        dummy = ListNode(<span class="number">0</span>, head)</span><br><span class="line">        prev, curr = dummy, head</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> curr:</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ä¸ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŒ</span></span><br><span class="line">            <span class="keyword">if</span> curr.<span class="built_in">next</span> <span class="keyword">and</span> curr.val == curr.<span class="built_in">next</span>.val:</span><br><span class="line">                <span class="comment"># è·³è¿‡æ‰€æœ‰å€¼ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">while</span> curr.<span class="built_in">next</span> <span class="keyword">and</span> curr.val == curr.<span class="built_in">next</span>.val:</span><br><span class="line">                    curr = curr.<span class="built_in">next</span></span><br><span class="line">                <span class="comment"># å°† prev çš„ next æŒ‡å‘ä¸‹ä¸€ä¸ªä¸é‡å¤çš„èŠ‚ç‚¹</span></span><br><span class="line">                prev.<span class="built_in">next</span> = curr.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœæ²¡æœ‰é‡å¤ï¼Œç§»åŠ¨ prev æŒ‡é’ˆ</span></span><br><span class="line">                prev = prev.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># ç§»åŠ¨ curr æŒ‡é’ˆ</span></span><br><span class="line">            curr = curr.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">deleteDuplicates</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>, head);</span><br><span class="line">        <span class="keyword">let</span> prev = dummy, curr = head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ä¸ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŒ</span></span><br><span class="line">            <span class="keyword">if</span> (curr.<span class="property">next</span> &amp;&amp; curr.<span class="property">val</span> === curr.<span class="property">next</span>.<span class="property">val</span>) &#123;</span><br><span class="line">                <span class="comment">// è·³è¿‡æ‰€æœ‰å€¼ç›¸åŒçš„èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">while</span> (curr.<span class="property">next</span> &amp;&amp; curr.<span class="property">val</span> === curr.<span class="property">next</span>.<span class="property">val</span>)</span><br><span class="line">                    curr = curr.<span class="property">next</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°† prev çš„ next æŒ‡å‘ä¸‹ä¸€ä¸ªä¸é‡å¤çš„èŠ‚ç‚¹</span></span><br><span class="line">            prev.<span class="property">next</span> = curr.<span class="property">next</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æœ‰é‡å¤ï¼Œç§»åŠ¨ prev æŒ‡é’ˆ</span></span><br><span class="line">            prev = prev.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç§»åŠ¨ curr æŒ‡é’ˆ</span></span><br><span class="line">        curr = curr.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="é“¾è¡¨è½¬æ ‘"><a href="#é“¾è¡¨è½¬æ ‘" class="headerlink" title="é“¾è¡¨è½¬æ ‘"></a>é“¾è¡¨è½¬æ ‘</h4><blockquote><p><a href="https://leetcode.com/problems/convert-sorted-list-to-binary-search-tree/">Leetcode 109. Convert Sorted List to Binary Search Tree</a></p></blockquote><ul><li>é¢˜ç›®: å°†ä¸€ä¸ªæœ‰åºé“¾è¡¨è½¬æ¢ä¸ºé«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼ˆ<code>BST</code>ï¼‰ã€‚é«˜åº¦å¹³è¡¡æŒ‡çš„æ˜¯æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡<code>1</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: head = [-10,-3,0,5,9]</span><br><span class="line">Output: [0,-3,9,-10,null,5]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åˆ†æ²»æ³• + å¿«æ…¢æŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼Œå°†å…¶ä½œä¸ºå½“å‰æ ‘çš„æ ¹èŠ‚ç‚¹</span><br><span class="line">2. å¯¹ä¸­é—´èŠ‚ç‚¹ä¹‹å‰çš„é“¾è¡¨é€’å½’æ„å»ºå·¦å­æ ‘</span><br><span class="line">3. å¯¹ä¸­é—´èŠ‚ç‚¹ä¹‹åçš„é“¾è¡¨é€’å½’æ„å»ºå³å­æ ‘</span><br><span class="line">4. å½“é“¾è¡¨ä¸ºç©ºæ—¶ï¼Œè¿”å› None</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sortedListToBST</span>(<span class="params">self, head: <span class="type">Optional</span>[ListNode]</span>) -&gt; <span class="type">Optional</span>[TreeNode]:</span><br><span class="line">        <span class="comment"># è¾…åŠ©å‡½æ•°ï¼šæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">find_middle</span>(<span class="params">start, end</span>):</span><br><span class="line">            slow = fast = start</span><br><span class="line">            <span class="keyword">while</span> fast != end <span class="keyword">and</span> fast.<span class="built_in">next</span> != end:</span><br><span class="line">                slow = slow.<span class="built_in">next</span></span><br><span class="line">                fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">return</span> slow</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä¸»å‡½æ•°ï¼šé€’å½’æ„å»ºäºŒå‰æœç´¢æ ‘</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">build_bst</span>(<span class="params">start, end</span>):</span><br><span class="line">            <span class="keyword">if</span> start == end:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            </span><br><span class="line">            mid = find_middle(start, end)</span><br><span class="line">            root = TreeNode(mid.val)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ„å»ºå·¦å³å­æ ‘</span></span><br><span class="line">            root.left = build_bst(start, mid)</span><br><span class="line">            root.right = build_bst(mid.<span class="built_in">next</span>, end)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> build_bst(head, <span class="literal">None</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">sortedListToBST</span>(<span class="params">head</span>) &#123;</span><br><span class="line">        <span class="comment">// è¾…åŠ©å‡½æ•°ï¼šæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">findMiddle</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> slow = start;</span><br><span class="line">            <span class="keyword">let</span> fast = start;</span><br><span class="line">            <span class="keyword">while</span> (fast !== end &amp;&amp; fast.<span class="property">next</span> !== end) &#123;</span><br><span class="line">                slow = slow.<span class="property">next</span>;</span><br><span class="line">                fast = fast.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> slow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸»å‡½æ•°ï¼šé€’å½’æ„å»ºäºŒå‰æœç´¢æ ‘</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">buildBST</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (start === end) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> mid = <span class="title function_">findMiddle</span>(start, end);</span><br><span class="line">            <span class="keyword">const</span> root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(mid.<span class="property">val</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ„å»ºå·¦å³å­æ ‘</span></span><br><span class="line">            root.<span class="property">left</span> = <span class="title function_">buildBST</span>(start, mid);</span><br><span class="line">            root.<span class="property">right</span> = <span class="title function_">buildBST</span>(mid.<span class="property">next</span>, end);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">buildBST</span>(head, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åˆå¹¶kä¸ªæœ‰åºé“¾è¡¨"><a href="#åˆå¹¶kä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="åˆå¹¶kä¸ªæœ‰åºé“¾è¡¨"></a>åˆå¹¶<code>k</code>ä¸ªæœ‰åºé“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/merge-k-sorted-lists/">Leetcode 23. Merge k Sorted Lists</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®š<code>k</code>ä¸ªæœ‰åºé“¾è¡¨ï¼Œå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæœ‰åºé“¾è¡¨å¹¶è¿”</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: lists = [[1,4,5],[1,3,4],[2,6]]</span><br><span class="line">Output: [1,1,2,3,4,4,5,6]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å°†æ¯ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹åŠ å…¥æœ€å°å †</span><br><span class="line">2. æ¯æ¬¡ä»å †ä¸­å–å‡ºæœ€å°å€¼èŠ‚ç‚¹ï¼Œå°†å…¶åŠ å…¥ç»“æœé“¾è¡¨</span><br><span class="line">3. å¦‚æœè¯¥èŠ‚ç‚¹æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥å †ä¸­</span><br><span class="line">4. é‡å¤ä»¥ä¸Šè¿‡ç¨‹ç›´åˆ°å †ä¸ºç©º</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mergeKLists</span>(<span class="params">self, lists: <span class="type">List</span>[<span class="type">Optional</span>[ListNode]]</span>) -&gt; <span class="type">Optional</span>[ListNode]:</span><br><span class="line">        min_heap = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†æ¯ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹æ”¾å…¥å †ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(lists)):</span><br><span class="line">            <span class="keyword">if</span> lists[i]:</span><br><span class="line">                heapq.heappush(min_heap, (lists[i].val, i, lists[i]))</span><br><span class="line"></span><br><span class="line">        dummy = ListNode(<span class="number">0</span>)</span><br><span class="line">        curr = dummy</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸æ–­ä»å †ä¸­å–å‡ºæœ€å°èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶åç»­èŠ‚ç‚¹ç»§ç»­æ”¾å…¥å †ä¸­</span></span><br><span class="line">        <span class="keyword">while</span> min_heap:</span><br><span class="line">            val, idx, node = heapq.heappop(min_heap)</span><br><span class="line">            curr.<span class="built_in">next</span> = node</span><br><span class="line">            curr = curr.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">if</span> node.<span class="built_in">next</span>:</span><br><span class="line">                heapq.heappush(min_heap, (node.<span class="built_in">next</span>.val, idx, node.<span class="built_in">next</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">mergeKLists</span>(<span class="params">lists</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> minHeap = <span class="keyword">new</span> <span class="title class_">MinPriorityQueue</span>(&#123; <span class="attr">priority</span>: <span class="function">(<span class="params">node</span>) =&gt;</span> node.<span class="property">val</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ¯ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹åŠ å…¥å †ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; lists.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lists[i])</span><br><span class="line">                minHeap.<span class="title function_">enqueue</span>(lists[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> dummy = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">let</span> curr = dummy;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»å †ä¸­å–å‡ºæœ€å°èŠ‚ç‚¹ï¼Œæ„å»ºåˆå¹¶é“¾è¡¨</span></span><br><span class="line">        <span class="keyword">while</span> (!minHeap.<span class="title function_">isEmpty</span>()) &#123;</span><br><span class="line">            <span class="keyword">const</span> smallestNode = minHeap.<span class="title function_">dequeue</span>().<span class="property">element</span>; <span class="comment">// å–å‡ºæœ€å°å€¼èŠ‚ç‚¹</span></span><br><span class="line">            curr.<span class="property">next</span> = smallestNode;</span><br><span class="line">            curr = curr.<span class="property">next</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (smallestNode.<span class="property">next</span>)</span><br><span class="line">                minHeap.<span class="title function_">enqueue</span>(smallestNode.<span class="property">next</span>); <span class="comment">// å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥å †</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="BFS-amp-DFS"><a href="#BFS-amp-DFS" class="headerlink" title="BFS &amp; DFS"></a><code>BFS</code> &amp; <code>DFS</code></h3><h4 id="æµ·å²›é—®é¢˜"><a href="#æµ·å²›é—®é¢˜" class="headerlink" title="æµ·å²›é—®é¢˜"></a>æµ·å²›é—®é¢˜</h4><blockquote><p><a href="https://leetcode.com/problems/number-of-islands/">Leetcode 200. Number of Islands</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªç”±<code>&#39;1&#39;</code>å’Œ<code>&#39;0&#39;</code>ç»„æˆçš„ç½‘æ ¼ï¼Œ<code>&#39;1&#39;</code>è¡¨ç¤ºé™†åœ°ï¼Œ<code>&#39;0&#39;</code>è¡¨ç¤ºæ°´åŸŸï¼Œè®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚å²›å±¿è¢«æ°´åŸŸåŒ…å›´ï¼Œç”±ç›¸é‚»çš„é™†åœ°ï¼ˆæ°´å¹³æˆ–å‚ç›´æ–¹å‘ï¼‰è¿æ¥è€Œæˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: grid = [</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],</span><br><span class="line">  [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;]</span><br><span class="line">]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•<code>1</code>: å¹¿åº¦ä¼˜å…ˆæœç´¢ (<code>BFS</code>)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. éå†ç½‘æ ¼ä¸­çš„æ¯ä¸ªä½ç½®ï¼Œæ‰¾åˆ°æœªè®¿é—®çš„é™†åœ°èŠ‚ç‚¹ä½œä¸ºèµ·ç‚¹</span><br><span class="line">2. ä»èµ·ç‚¹å¼€å§‹ï¼Œä½¿ç”¨ BFS éå†æ•´ä¸ªå²›å±¿ï¼Œå°†æ‰€æœ‰ç›¸è¿çš„é™†åœ°æ ‡è®°ä¸ºå·²è®¿é—®</span><br><span class="line">3. æ¯å‘ç°ä¸€ä¸ªæ–°å²›å±¿æ—¶ï¼Œå²›å±¿è®¡æ•°å™¨åŠ ä¸€</span><br><span class="line">4. è¿”å›æœ€ç»ˆçš„å²›å±¿æ•°é‡</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">numIslands</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        island = <span class="number">0</span></span><br><span class="line">        visited = <span class="built_in">set</span>() <span class="comment"># è®°å½•å·²è®¿é—®èŠ‚ç‚¹</span></span><br><span class="line">        rows, cols = <span class="built_in">len</span>(grid), <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">bfs</span>(<span class="params">r, c</span>):</span><br><span class="line">            q = deque()</span><br><span class="line">            q.append((r, c))</span><br><span class="line">            visited.add((r, c))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> q:</span><br><span class="line">                row, col = q.popleft()</span><br><span class="line">                <span class="keyword">for</span> dr, dc <span class="keyword">in</span> [[<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>]]:</span><br><span class="line">                    nr, nc = dr + row, dc + col</span><br><span class="line">                    <span class="keyword">if</span> (</span><br><span class="line">                        <span class="number">0</span> &lt;= nr &lt; rows <span class="keyword">and</span></span><br><span class="line">                        <span class="number">0</span> &lt;= nc &lt; cols <span class="keyword">and</span></span><br><span class="line">                        grid[nr][nc] == <span class="string">&quot;1&quot;</span> <span class="keyword">and</span></span><br><span class="line">                        (nr, nc) <span class="keyword">not</span> <span class="keyword">in</span> visited</span><br><span class="line">                    ):</span><br><span class="line">                        q.append((nr, nc))</span><br><span class="line">                        visited.add((nr, nc))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(rows):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(cols):</span><br><span class="line">                <span class="keyword">if</span> grid[r][c] == <span class="string">&quot;1&quot;</span> <span class="keyword">and</span> (r, c) <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    island += <span class="number">1</span></span><br><span class="line">                    bfs(r, c)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> island</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">numIslands</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> rows = grid.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">const</span> cols = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">const</span> visited = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">        <span class="keyword">let</span> island = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">bfs</span> = (<span class="params">r, c</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> queue = [];</span><br><span class="line">            queue.<span class="title function_">push</span>([r, c]);</span><br><span class="line">            visited.<span class="title function_">add</span>(<span class="string">`<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;c&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (queue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> [row, col] = queue.<span class="title function_">shift</span>();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">const</span> [dr, dc] <span class="keyword">of</span> [[<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>]]) &#123;</span><br><span class="line">                    <span class="keyword">const</span> nr = dr + row;</span><br><span class="line">                    <span class="keyword">const</span> nc = dc + col;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (nr &gt;= <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        nc &gt;= <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        nr &lt; rows &amp;&amp;</span><br><span class="line">                        nc &lt; cols &amp;&amp;</span><br><span class="line">                        grid[nr][nc] === <span class="string">&quot;1&quot;</span> &amp;&amp;</span><br><span class="line">                        !visited.<span class="title function_">has</span>(<span class="string">`<span class="subst">$&#123;nr&#125;</span>,<span class="subst">$&#123;nc&#125;</span>`</span>)</span><br><span class="line">                    ) &#123;</span><br><span class="line">                        queue.<span class="title function_">push</span>([nr, nc]);</span><br><span class="line">                        visited.<span class="title function_">add</span>(<span class="string">`<span class="subst">$&#123;nr&#125;</span>,<span class="subst">$&#123;nc&#125;</span>`</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; rows; r++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; cols; c++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[r][c] === <span class="string">&quot;1&quot;</span> &amp;&amp; !visited.<span class="title function_">has</span>(<span class="string">`<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;c&#125;</span>`</span>)) &#123;</span><br><span class="line">                    island += <span class="number">1</span>;</span><br><span class="line">                    <span class="title function_">bfs</span>(r, c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> island;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>è§£æ³•<code>2</code>: æ·±åº¦ä¼˜å…ˆæœç´¢ (<code>DFS</code>)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’æ›¿ä»£ BFS çš„é˜Ÿåˆ—é€»è¾‘</span><br><span class="line">2. éå†ç½‘æ ¼ï¼Œé‡åˆ°æœªè®¿é—®çš„é™†åœ°æ—¶ï¼Œå¯åŠ¨ DFS éå†æ•´ä¸ªå²›å±¿</span><br><span class="line">3. æ¯å‘ç°ä¸€ä¸ªæ–°å²›å±¿æ—¶ï¼Œå²›å±¿è®¡æ•°å™¨åŠ ä¸€</span><br><span class="line">4. è¿”å›å²›å±¿æ•°é‡</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">numIslands</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        island = <span class="number">0</span></span><br><span class="line">        rows, cols = <span class="built_in">len</span>(grid), <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">r, c</span>):</span><br><span class="line">            <span class="keyword">if</span> r &lt; <span class="number">0</span> <span class="keyword">or</span> c &lt; <span class="number">0</span> <span class="keyword">or</span> r &gt;= rows <span class="keyword">or</span> c &gt;= cols <span class="keyword">or</span> grid[r][c] == <span class="string">&quot;0&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            grid[r][c] = <span class="string">&quot;0&quot;</span> <span class="comment"># æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">            <span class="comment"># éå†å››ä¸ªæ–¹å‘</span></span><br><span class="line">            <span class="keyword">for</span> dr, dc <span class="keyword">in</span> [[<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>]]:</span><br><span class="line">                dfs(r + dr, c + dc)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(rows):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(cols):</span><br><span class="line">                <span class="keyword">if</span> grid[r][c] == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">                    island += <span class="number">1</span></span><br><span class="line">                    dfs(r, c)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> island</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">numIslands</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> rows = grid.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">const</span> cols = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">let</span> island = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">dfs</span> = (<span class="params">r, c</span>) =&gt; &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¶…å‡ºè¾¹ç•Œæˆ–é‡åˆ°æ°´åŸŸï¼Œåˆ™åœæ­¢é€’å½’</span></span><br><span class="line">            <span class="keyword">if</span> (r &lt; <span class="number">0</span> || c &lt; <span class="number">0</span> || r &gt;= rows || c &gt;= cols || grid[r][c] === <span class="string">&quot;0&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            grid[r][c] = <span class="number">0</span>; <span class="comment">// æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> [dr, dc] <span class="keyword">of</span> [[<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>]])</span><br><span class="line">                <span class="title function_">dfs</span>(r + dr, c + dc);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; rows; r++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; cols; c++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[r][c] === <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">                    island += <span class="number">1</span>;</span><br><span class="line">                    <span class="title function_">dfs</span>(r, c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> island;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Two-Pointers-åŒæŒ‡é’ˆ"><a href="#Two-Pointers-åŒæŒ‡é’ˆ" class="headerlink" title="Two Pointers åŒæŒ‡é’ˆ"></a><code>Two Pointers</code> åŒæŒ‡é’ˆ</h3><h4 id="é›¨æ°´é—®é¢˜"><a href="#é›¨æ°´é—®é¢˜" class="headerlink" title="é›¨æ°´é—®é¢˜"></a>é›¨æ°´é—®é¢˜</h4><blockquote><p><a href="https://leetcode.com/problems/trapping-rain-water/">Leetcode 42. Trapping Rain Water</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„<code>height</code>ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ±å­çš„é«˜åº¦ã€‚å‡è®¾ä¸‹é›¨åæ°´åªä¼šåœç•™åœ¨æŸ±å­ä¹‹é—´ï¼Œè¯·è®¡ç®—å¯ä»¥æ¥ä½çš„æ€»é›¨æ°´é‡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class="line">Output: 6</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»æ•°ç»„çš„å·¦å³ä¸¤ç«¯å‘ä¸­é—´é æ‹¢</span><br><span class="line">2. åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œè®°å½•å·¦å³ä¸¤ä¾§çš„æœ€å¤§é«˜åº¦</span><br><span class="line">3. è®¡ç®—å½“å‰æŸ±å­ä¸Šæ–¹çš„é›¨æ°´é‡ï¼š</span><br><span class="line">    - é›¨æ°´é‡ = è¾ƒä½ä¸€ä¾§çš„æœ€å¤§é«˜åº¦ - å½“å‰æŸ±å­é«˜åº¦</span><br><span class="line">4. ç§»åŠ¨è¾ƒä½ä¸€ä¾§çš„æŒ‡é’ˆï¼ŒåŒæ—¶æ›´æ–°å¯¹åº”çš„æœ€å¤§é«˜åº¦</span><br><span class="line">5. éå†ç»“æŸæ—¶ï¼Œç´¯åŠ æ‰€æœ‰é›¨æ°´é‡å¹¶è¿”å›ç»“æœ</span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">trap</span>(<span class="params">self, height: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> height:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        left, right = <span class="number">0</span>, <span class="built_in">len</span>(height) - <span class="number">1</span></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å·¦å³ä¸¤è¾¹çš„æœ€å¤§é«˜åº¦</span></span><br><span class="line">        left_max, right_max = height[left], height[right]</span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> left &lt; right:</span><br><span class="line">            <span class="comment"># å¦‚æœå·¦è¾¹çš„æœ€å¤§é«˜åº¦å°äºå³è¾¹çš„æœ€å¤§é«˜åº¦</span></span><br><span class="line">            <span class="keyword">if</span> left_max &lt; right_max:</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">                <span class="comment"># æ›´æ–°å·¦è¾¹çš„æœ€å¤§é«˜åº¦</span></span><br><span class="line">                left_max = <span class="built_in">max</span>(left_max, height[left])</span><br><span class="line">                <span class="comment"># è®¡ç®—å½“å‰å·¦æŒ‡é’ˆä½ç½®çš„æ¥æ°´é‡ï¼ˆå·¦è¾¹çš„æœ€å¤§é«˜åº¦ - å½“å‰æŸ±å­çš„é«˜åº¦ï¼‰</span></span><br><span class="line">                result += left_max - height[left]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right -= <span class="number">1</span></span><br><span class="line">                <span class="comment"># æ›´æ–°å³è¾¹çš„æœ€å¤§é«˜åº¦</span></span><br><span class="line">                right_max = <span class="built_in">max</span>(right_max, height[right])</span><br><span class="line">                <span class="comment"># è®¡ç®—å½“å‰å³æŒ‡é’ˆä½ç½®çš„æ¥æ°´é‡ï¼ˆå³è¾¹çš„æœ€å¤§é«˜åº¦ - å½“å‰æŸ±å­çš„é«˜åº¦ï¼‰</span></span><br><span class="line">                result += right_max - height[right]</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">trap</span>(<span class="params">height</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> left = <span class="number">0</span>, right = height.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> leftMax = height[left], rightMax = height[right];</span><br><span class="line">        <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (leftMax &lt; rightMax) &#123;</span><br><span class="line">                left++;</span><br><span class="line">                leftMax = <span class="title class_">Math</span>.<span class="title function_">max</span>(leftMax, height[left]); <span class="comment">// æ›´æ–°å·¦è¾¹æœ€å¤§é«˜åº¦</span></span><br><span class="line">                result += leftMax - height[left]; <span class="comment">// è®¡ç®—å·¦ä¾§æ¥æ°´é‡</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right--;</span><br><span class="line">                rightMax = <span class="title class_">Math</span>.<span class="title function_">max</span>(rightMax, height[right]); <span class="comment">// æ›´æ–°å³è¾¹æœ€å¤§é«˜åº¦</span></span><br><span class="line">                result += rightMax - height[right]; <span class="comment">// è®¡ç®—å³ä¾§æ¥æ°´é‡</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ç››æ°´é—®é¢˜"><a href="#ç››æ°´é—®é¢˜" class="headerlink" title="ç››æ°´é—®é¢˜"></a>ç››æ°´é—®é¢˜</h4><blockquote><p><a href="https://leetcode.com/problems/container-with-most-water/">Leetcode 11. Container With Most Water</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•°ç»„<code>height</code>ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªç«–çº¿çš„é«˜åº¦ï¼Œç«–çº¿åœ¨æ¨ªè½´ä¸Šçš„é—´éš”ä¸º<code>1</code>ã€‚æ‰¾åˆ°ä¸¤æ ¹ç«–çº¿ä¹‹é—´å½¢æˆçš„å®¹å™¨èƒ½å¤Ÿç››æ°´çš„æœ€å¤§é¢ç§¯</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: height = [1,8,6,2,5,4,8,3,7]</span><br><span class="line">Output: 49</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–å·¦å³æŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„ä¸¤ç«¯</span><br><span class="line">2. æ¯æ¬¡è®¡ç®—ç”±å·¦å³æŒ‡é’ˆå¯¹åº”çš„ç«–çº¿å½¢æˆçš„å®¹å™¨é¢ç§¯ï¼Œæ›´æ–°æœ€å¤§é¢ç§¯</span><br><span class="line">3. ç§»åŠ¨è¾ƒçŸ­ç«–çº¿çš„ä¸€ä¾§æŒ‡é’ˆï¼Œå°è¯•æ‰¾åˆ°æ›´å¤§çš„å®¹å™¨</span><br><span class="line">4. é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å·¦å³æŒ‡é’ˆç›¸é‡</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxArea</span>(<span class="params">self, height: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        left, right = <span class="number">0</span>, <span class="built_in">len</span>(height) - <span class="number">1</span></span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> left &lt; right:</span><br><span class="line">            <span class="comment"># è®¡ç®—å½“å‰å®¹å™¨çš„é¢ç§¯</span></span><br><span class="line">            width = right - left</span><br><span class="line">            area = <span class="built_in">min</span>(height[left], height[right]) * width</span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€å¤§é¢ç§¯</span></span><br><span class="line">            result = <span class="built_in">max</span>(result, area)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ç§»åŠ¨è¾ƒçŸ­è¾¹å¯¹åº”çš„æŒ‡é’ˆï¼Œå°è¯•æ‰¾åˆ°æ›´å¤§çš„å®¹å™¨</span></span><br><span class="line">            <span class="keyword">if</span> height[left] &lt; height[right]:</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxArea</span>(<span class="params">height</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> left = <span class="number">0</span>, right = height.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> maxArea = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—å½“å‰å®¹å™¨çš„é¢ç§¯</span></span><br><span class="line">            <span class="keyword">const</span> width = right - left;</span><br><span class="line">            <span class="keyword">const</span> area = <span class="title class_">Math</span>.<span class="title function_">min</span>(height[left], height[right]) * width;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°æœ€å¤§é¢ç§¯</span></span><br><span class="line">            maxArea = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxArea, area);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç§»åŠ¨è¾ƒçŸ­è¾¹å¯¹åº”çš„æŒ‡é’ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (height[left] &lt; height[right])</span><br><span class="line">                left++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                right--;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> maxArea;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä¸€ç»´æ•°ç»„å»é‡"><a href="#ä¸€ç»´æ•°ç»„å»é‡" class="headerlink" title="ä¸€ç»´æ•°ç»„å»é‡"></a>ä¸€ç»´æ•°ç»„å»é‡</h4><blockquote><p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/">Leetcode 26. Remove Duplicates from Sorted Array</a></p></blockquote><ul><li>é¢˜ç›®: æœ‰åºæ•°ç»„<code>nums</code>ï¼Œéœ€è¦åŸåœ°ç§»é™¤é‡å¤é¡¹ï¼Œä½¿æ¯ä¸ªå…ƒç´ æœ€å¤šå‡ºç°ä¸€æ¬¡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [0,0,1,1,1,2,2,3,3,4]</span><br><span class="line">Output: 5, nums = [0,1,2,3,4,_,_,_,_,_]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ i æŒ‡é’ˆè·Ÿè¸ªå»é‡åæ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®</span><br><span class="line">2. ä½¿ç”¨ j æŒ‡é’ˆéå†æ•°ç»„ï¼Œå¯»æ‰¾ä¸é‡å¤çš„å…ƒç´ </span><br><span class="line">3. é‡åˆ°æ–°å…ƒç´ æ—¶ï¼Œå°†å…¶æ”¾åœ¨ i+1 ä½ç½®ï¼Œå¹¶æ›´æ–° i</span><br><span class="line">4. è¿”å›å»é‡åæ•°ç»„çš„é•¿åº¦ i+1</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">removeDuplicates</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        i = <span class="number">0</span> <span class="comment"># è·Ÿè¸ªå»é‡åæ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[j] != nums[i]: <span class="comment"># å¦‚æœå‘ç°æ–°çš„å…ƒç´ </span></span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                nums[i] = nums[j] <span class="comment"># å°† nums[j] ç§»åŠ¨åˆ°å»é‡åçš„æ•°ç»„ä¸­</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">removeDuplicates</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt; nums.<span class="property">length</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[j] !== nums[i]) &#123; <span class="comment">// é‡åˆ°æ–°å…ƒç´ </span></span><br><span class="line">                i++;</span><br><span class="line">                nums[i] = nums[j]; <span class="comment">// æ›´æ–°æ•°ç»„</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"><a href="#æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"></a>æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/3sum-closest/">Leetcode 16. 3Sum Closest</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º<code>n</code>çš„æ•´æ•°æ•°ç»„<code>nums</code>å’Œä¸€ä¸ªç›®æ ‡å€¼<code>target</code>ï¼Œæ‰¾åˆ°æ•°ç»„ä¸­ä¸‰ä¸ªæ•°çš„å’Œï¼Œä½¿å…¶æœ€æ¥è¿‘ç›®æ ‡å€¼ã€‚è¿”å›è¿™ä¸ªå’Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [-1,2,1,-4], target = 1</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: The sum that is closest to the target is 2. (-1 + 2 + 1 = 2)</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ’åº + åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. é¦–å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åº</span><br><span class="line">2. éå†æ•°ç»„ï¼Œå›ºå®šä¸€ä¸ªæ•° nums[i]ï¼Œç”¨åŒæŒ‡é’ˆä» i+1 å’Œæ•°ç»„æœ«å°¾å‡ºå‘å¯»æ‰¾æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</span><br><span class="line">3. å¦‚æœå½“å‰ä¸‰æ•°ä¹‹å’Œæ¯”è®°å½•çš„æ›´æ¥è¿‘ç›®æ ‡å€¼ï¼Œæ›´æ–°ç»“æœ</span><br><span class="line">4. æ ¹æ®å½“å‰å’Œä¸ç›®æ ‡å€¼çš„å¤§å°å…³ç³»ç§»åŠ¨å·¦å³æŒ‡é’ˆ</span><br><span class="line">5. è¿”å›æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">threeSumClosest</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        nums.sort() <span class="comment"># æ’åº</span></span><br><span class="line">        result = <span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>) <span class="comment"># åˆå§‹åŒ–æœ€æ¥è¿‘çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">2</span>):</span><br><span class="line">            left, right = i + <span class="number">1</span>, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                curr_sum = nums[i] + nums[left] + nums[right]</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ›´æ–°æœ€æ¥è¿‘çš„ç»“æœ</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">abs</span>(curr_sum - target) &lt; <span class="built_in">abs</span>(result - target):</span><br><span class="line">                    result = curr_sum</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ ¹æ®å½“å‰å’Œä¸ç›®æ ‡å€¼çš„å…³ç³»è°ƒæ•´æŒ‡é’ˆ</span></span><br><span class="line">                <span class="keyword">if</span> curr_sum &lt; target:</span><br><span class="line">                    left += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> curr_sum &gt; target:</span><br><span class="line">                    right -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">return</span> curr_sum <span class="comment"># å½“å‰å’Œç­‰äºç›®æ ‡å€¼æ—¶ç›´æ¥è¿”å›</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">threeSumClosest</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">        nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// æ’åº</span></span><br><span class="line">        <span class="keyword">let</span> result = <span class="title class_">Infinity</span>; <span class="comment">// åˆå§‹åŒ–æœ€æ¥è¿‘çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span> - <span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> left = i + <span class="number">1</span>, right = nums.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                <span class="keyword">let</span> currSum = nums[i] + nums[left] + nums[right];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ›´æ–°æœ€æ¥è¿‘çš„ç»“æœ</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(currSum - target) &lt; <span class="title class_">Math</span>.<span class="title function_">abs</span>(result - target))</span><br><span class="line">                    result = currSum;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ ¹æ®å½“å‰å’Œä¸ç›®æ ‡å€¼çš„å…³ç³»è°ƒæ•´æŒ‡é’ˆ</span></span><br><span class="line">                <span class="keyword">if</span> (currSum &lt; target)</span><br><span class="line">                    left++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (currSum &gt; target)</span><br><span class="line">                    right--;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">return</span> currSum; <span class="comment">// å½“å‰å’Œç­‰äºç›®æ ‡å€¼æ—¶ç›´æ¥è¿”å›</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/3sum/">Leetcode 15. 3Sum</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªåŒ…å«æ•´æ•°çš„æ•°ç»„<code>nums</code>ï¼Œè¿”å›æ‰€æœ‰ä¸é‡å¤çš„ä¸‰å…ƒç»„<code>[nums[i], nums[j], nums[k]]</code>ï¼Œä½¿å¾—<code>nums[i] + nums[j] + nums[k] == 0</code>ã€‚ç­”æ¡ˆä¸­ä¸èƒ½åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [-1, 0, 1, 2, -1, -4]</span><br><span class="line">Output: [[-1, -1, 2], [-1, 0, 1]]</span><br><span class="line">Explanation: </span><br><span class="line">nums[0] + nums[1] + nums[3] = -1 + -1 + 2 = 0</span><br><span class="line">nums[0] + nums[2] + nums[4] = -1 + 0 + 1 = 0</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ’åº + åŒæŒ‡é’ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä¾¿äºå»é‡å’Œä½¿ç”¨åŒæŒ‡é’ˆ</span><br><span class="line">2. éå†æ•°ç»„ï¼Œå›ºå®šä¸€ä¸ªæ•° nums[i]ï¼Œç„¶åç”¨åŒæŒ‡é’ˆä» i+1 å’Œæ•°ç»„æœ«å°¾å‡ºå‘ï¼Œå¯»æ‰¾å’Œä¸º -nums[i] çš„å¦å¤–ä¸¤ä¸ªæ•°</span><br><span class="line">3. å¦‚æœæ‰¾åˆ°å’Œä¸º 0 çš„ä¸‰å…ƒç»„ï¼Œå°†å…¶åŠ å…¥ç»“æœé›†ä¸­ï¼ŒåŒæ—¶ç§»åŠ¨æŒ‡é’ˆè·³è¿‡é‡å¤å€¼</span><br><span class="line">4. å¦‚æœå½“å‰å’Œå°äº 0ï¼Œå·¦æŒ‡é’ˆå³ç§»ï¼›å¦‚æœå½“å‰å’Œå¤§äº 0ï¼Œå³æŒ‡é’ˆå·¦ç§»</span><br><span class="line">5. éå†ç»“æŸè¿”å›ç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        nums.sort() <span class="comment"># å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ–¹ä¾¿åç»­å»é‡å’ŒåŒæŒ‡é’ˆå¤„ç†</span></span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">2</span>):</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰æ•°å’Œå‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œè·³è¿‡ï¼Œé¿å…é‡å¤ä¸‰å…ƒç»„</span></span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            left, right = i + <span class="number">1</span>, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                total = nums[i] + nums[left] + nums[right] <span class="comment"># è®¡ç®—å½“å‰ä¸‰æ•°ä¹‹å’Œ</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> total == <span class="number">0</span>:</span><br><span class="line">                    result.append([nums[i], nums[left], nums[right]])</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># è·³è¿‡é‡å¤çš„å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆå€¼</span></span><br><span class="line">                    <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> nums[left] == nums[left + <span class="number">1</span>]:</span><br><span class="line">                        left += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> nums[right] == nums[right - <span class="number">1</span>]:</span><br><span class="line">                        right -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment"># ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">                    left += <span class="number">1</span></span><br><span class="line">                    right -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> total &lt; <span class="number">0</span>: <span class="comment"># å¦‚æœå½“å‰å’Œå°äº 0ï¼Œå¢åŠ å·¦æŒ‡é’ˆ</span></span><br><span class="line">                    left += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>: <span class="comment"># å¦‚æœå½“å‰å’Œå¤§äº 0ï¼Œå‡å°‘å³æŒ‡é’ˆ</span></span><br><span class="line">                    right -= <span class="number">1</span> </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">threeSum</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// å¯¹æ•°ç»„è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span> - <span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰æ•°å’Œå‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œè·³è¿‡ï¼Œé¿å…é‡å¤ä¸‰å…ƒç»„</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] === nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> left = i + <span class="number">1</span>, right = nums.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                <span class="keyword">const</span> total = nums[i] + nums[left] + nums[right];</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (total === <span class="number">0</span>) &#123;</span><br><span class="line">                    result.<span class="title function_">push</span>([nums[i], nums[left], nums[right]]);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// è·³è¿‡é‡å¤çš„å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆå€¼</span></span><br><span class="line">                    <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[left] === nums[left + <span class="number">1</span>]) left++;</span><br><span class="line">                    <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[right] === nums[right - <span class="number">1</span>]) right--;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">                    left++;</span><br><span class="line">                    right--;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (total &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    left++; <span class="comment">// å¦‚æœå½“å‰å’Œå°äº 0ï¼Œå¢åŠ å·¦æŒ‡é’ˆ</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    right--;  å¦‚æœå½“å‰å’Œå¤§äº <span class="number">0</span>ï¼Œå‡å°‘å³æŒ‡é’ˆ</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a>å››æ•°ä¹‹å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/4sum/">Leetcode 18. 4Sum</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªç”±æ•´æ•°æ•°ç»„<code>nums</code>å’Œä¸€ä¸ªç›®æ ‡å€¼<code>target</code>ï¼Œæ‰¾å‡ºæ‰€æœ‰ä¸é‡å¤çš„å››å…ƒç»„<code>[nums[a], nums[b], nums[c], nums[d]]</code>ï¼Œä½¿å¾—<code>nums[a] + nums[b] + nums[c] + nums[d] == target</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,0,-1,0,-2,2], target = 0</span><br><span class="line">Output: [[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]</span><br><span class="line">Explanation: The solution sets are unique and order does not matter</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ’åº + åŒæŒ‡é’ˆ + å¤šå±‚éå†</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä»¥ä¾¿åç»­å»é‡å’Œä½¿ç”¨åŒæŒ‡é’ˆ</span><br><span class="line">2. å…ˆå›ºå®šä¸¤ä¸ªæ•° nums[i] å’Œ nums[j]ï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆå¯»æ‰¾å‰©ä¸‹ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å››æ•°ä¹‹å’Œç­‰äº target</span><br><span class="line">3. éå†è¿‡ç¨‹ä¸­è·³è¿‡é‡å¤çš„æ•°å€¼ï¼Œé¿å…ç»“æœä¸­å‡ºç°é‡å¤çš„å››å…ƒç»„</span><br><span class="line">4. è¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å››å…ƒç»„</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fourSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        nums.sort() <span class="comment"># æ’åº</span></span><br><span class="line">        result = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">3</span>):</span><br><span class="line">            <span class="comment"># è·³è¿‡é‡å¤çš„ç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">if</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, <span class="built_in">len</span>(nums) - <span class="number">2</span>):</span><br><span class="line">                <span class="comment"># è·³è¿‡é‡å¤çš„ç¬¬äºŒä¸ªæ•°</span></span><br><span class="line">                <span class="keyword">if</span> j &gt; i + <span class="number">1</span> <span class="keyword">and</span> nums[j] == nums[j - <span class="number">1</span>]:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">                left, right = j + <span class="number">1</span>, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                    total = nums[i] + nums[j] + nums[left] + nums[right]</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> total == target:</span><br><span class="line">                        result.append([nums[i], nums[j], nums[left], nums[right]])</span><br><span class="line"></span><br><span class="line">                        <span class="comment"># è·³è¿‡é‡å¤çš„å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆå€¼</span></span><br><span class="line">                        <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> nums[left] == nums[left + <span class="number">1</span>]:</span><br><span class="line">                            left += <span class="number">1</span></span><br><span class="line">                        <span class="keyword">while</span> left &lt; right <span class="keyword">and</span> nums[right] == nums[right - <span class="number">1</span>]:</span><br><span class="line">                            right -= <span class="number">1</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="comment"># ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">                        left += <span class="number">1</span></span><br><span class="line">                        right -= <span class="number">1</span></span><br><span class="line">                    <span class="keyword">elif</span> total &lt; target:</span><br><span class="line">                        left += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        right -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">fourSum</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">        nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// æ’åº</span></span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span> - <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// è·³è¿‡é‡å¤çš„ç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] === nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.<span class="property">length</span> - <span class="number">2</span>; j++) &#123;</span><br><span class="line">                <span class="comment">// è·³è¿‡é‡å¤çš„ç¬¬äºŒä¸ªæ•°</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; i + <span class="number">1</span> &amp;&amp; nums[j] === nums[j - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> left = j + <span class="number">1</span>, right = nums.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                    <span class="keyword">const</span> total = nums[i] + nums[j] + nums[left] + nums[right];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (total === target) &#123;</span><br><span class="line">                        result.<span class="title function_">push</span>([nums[i], nums[j], nums[left], nums[right]]);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// è·³è¿‡é‡å¤çš„å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆå€¼</span></span><br><span class="line">                        <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[left] === nums[left + <span class="number">1</span>]) left++;</span><br><span class="line">                        <span class="keyword">while</span> (left &lt; right &amp;&amp; nums[right] === nums[right - <span class="number">1</span>]) right--;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">                        left++;</span><br><span class="line">                        right--;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (total &lt; target) &#123;</span><br><span class="line">                        left++;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        right--;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ‰¾å‡ºæ•°ç»„ä¸­çš„é‡å¤æ•°å­—"><a href="#æ‰¾å‡ºæ•°ç»„ä¸­çš„é‡å¤æ•°å­—" class="headerlink" title="æ‰¾å‡ºæ•°ç»„ä¸­çš„é‡å¤æ•°å­—"></a>æ‰¾å‡ºæ•°ç»„ä¸­çš„é‡å¤æ•°å­—</h4><blockquote><p><a href="https://leetcode.com/problems/find-the-duplicate-number/">Leetcode 287. Find the Duplicate Number</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªåŒ…å«<code>n + 1</code>ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œå…¶ä¸­æ¯ä¸ªæ•´æ•°éƒ½åœ¨èŒƒå›´ [1, n] å†…ï¼Œä¸”åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚æ‰¾å‡ºè¯¥é‡å¤çš„æ•°å­—ã€‚æ³¨æ„ï¼šä¸èƒ½ä¿®æ”¹æ•°ç»„å†…å®¹ï¼Œå¹¶ä¸”ä»…ä½¿ç”¨å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [3,1,3,4,2]</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å¿«æ…¢æŒ‡é’ˆï¼ˆ<code>Floyd</code>åˆ¤åœˆç®—æ³•ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å°†æ•°ç»„çœ‹ä½œé“¾è¡¨ï¼Œnums[i] æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">2. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ç¯çš„ä½ç½®ï¼šæ…¢æŒ‡é’ˆä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆä¸€æ¬¡èµ°ä¸¤æ­¥</span><br><span class="line">3. åœ¨ç¯ä¸­æ‰¾åˆ°å…¥å£ï¼Œä¹Ÿå°±æ˜¯é‡å¤çš„æ•°å­—</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findDuplicate</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆ</span></span><br><span class="line">        slow, fast = nums[<span class="number">0</span>], nums[nums[<span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é˜¶æ®µ 1ï¼šæ‰¾åˆ°å¿«æ…¢æŒ‡é’ˆç›¸é‡ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> slow != fast:</span><br><span class="line">            slow = nums[slow]</span><br><span class="line">            fast = nums[nums[fast]]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é˜¶æ®µ 2ï¼šæ‰¾åˆ°ç¯çš„å…¥å£ï¼Œå³é‡å¤çš„æ•°å­—</span></span><br><span class="line">        slow = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> slow != fast:</span><br><span class="line">            slow = nums[slow]</span><br><span class="line">            fast = nums[fast]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> slow</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">findDuplicate</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> slow = nums[<span class="number">0</span>], fast = nums[nums[<span class="number">0</span>]];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é˜¶æ®µ 1ï¼šæ‰¾åˆ°å¿«æ…¢æŒ‡é’ˆç›¸é‡ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (slow !== fast) &#123;</span><br><span class="line">            slow = nums[slow];</span><br><span class="line">            fast = nums[nums[fast]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é˜¶æ®µ 2ï¼šæ‰¾åˆ°ç¯çš„å…¥å£ï¼Œå³é‡å¤çš„æ•°å­—</span></span><br><span class="line">        slow = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (slow !== fast) &#123;</span><br><span class="line">            slow = nums[slow];</span><br><span class="line">            fast = nums[fast];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Binary-Search"><a href="#Binary-Search" class="headerlink" title="Binary Search"></a><code>Binary Search</code></h3><h4 id="æœ€é•¿é€’å¢å­åºåˆ—"><a href="#æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="æœ€é•¿é€’å¢å­åºåˆ—"></a>æœ€é•¿é€’å¢å­åºåˆ—</h4><blockquote><p><a href="https://leetcode.com/problems/longest-increasing-subsequence/">Leetcode 300. Longest Increasing Subsequence</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„<code>nums</code>ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [10,9,2,5,3,7,101,18]</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: The longest increasing subsequence is [2,3,7,101], therefore the length is 4</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’ + äºŒåˆ†æ³•ä¼˜åŒ–</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åŠ¨æ€è§„åˆ’ï¼š</span><br><span class="line">   å®šä¹‰ dp[i] è¡¨ç¤ºä»¥ nums[i] ä¸ºç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦</span><br><span class="line">   çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šdp[i] = max(dp[i], dp[j] + 1) for all j &lt; i and nums[j] &lt; nums[i]</span><br><span class="line">   æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)</span><br><span class="line"></span><br><span class="line">2. äºŒåˆ†æ³•ä¼˜åŒ–ï¼š</span><br><span class="line">   ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ tailsï¼Œå…¶ä¸­ tails[i] è¡¨ç¤ºé•¿åº¦ä¸º i+1 çš„é€’å¢å­åºåˆ—çš„æœ«å°¾æœ€å°å€¼</span><br><span class="line">   å¯¹æ¯ä¸ª nums ä¸­çš„å…ƒç´ ä½¿ç”¨äºŒåˆ†æ³•æ›´æ–° tails</span><br><span class="line">   æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lengthOfLIS</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># ç”¨äºå­˜å‚¨ä¸åŒé•¿åº¦é€’å¢å­åºåˆ—çš„æœ€å°æœ«å°¾å€¼</span></span><br><span class="line">        tails = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="comment"># äºŒåˆ†æŸ¥æ‰¾ï¼Œå¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äº num çš„ä½ç½®</span></span><br><span class="line">            left, right = <span class="number">0</span>, <span class="built_in">len</span>(tails)</span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                mid = (left + right) // <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> tails[mid] &lt; num:</span><br><span class="line">                    left = mid + <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    right = mid</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¦‚æœ left ç­‰äº tails é•¿åº¦ï¼Œè¯´æ˜ num æ˜¯ä¸€ä¸ªæ–°çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">if</span> left == <span class="built_in">len</span>(tails):</span><br><span class="line">                tails.append(num)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tails[left] = num</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(tails)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">lengthOfLIS</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> tails = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº num çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">let</span> left = <span class="number">0</span>, right = tails.<span class="property">length</span>;</span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">                <span class="keyword">const</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>((left + right) / <span class="number">2</span>);</span><br><span class="line">                <span class="keyword">if</span> (tails[mid] &lt; num)</span><br><span class="line">                    left = mid + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    right = mid;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (left === tails.<span class="property">length</span>)</span><br><span class="line">                <span class="comment">// å¦‚æœ num æ¯” tails ä¸­çš„æ‰€æœ‰å€¼éƒ½å¤§ï¼Œç›´æ¥æ·»åŠ åˆ°æœ«å°¾</span></span><br><span class="line">                tails.<span class="title function_">push</span>(num);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="comment">// å¦åˆ™æ›¿æ¢ä½ç½® left çš„å€¼ï¼Œä¿æŒæ›´å°çš„æœ«å°¾</span></span><br><span class="line">                tails[left] = num;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tails.<span class="property">length</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Tree-æ ‘ä¸äºŒå‰æ ‘"><a href="#Tree-æ ‘ä¸äºŒå‰æ ‘" class="headerlink" title="Tree æ ‘ä¸äºŒå‰æ ‘"></a><code>Tree</code> æ ‘ä¸äºŒå‰æ ‘</h3><h4 id="äºŒå‰æ ‘å±‚åºéå†"><a href="#äºŒå‰æ ‘å±‚åºéå†" class="headerlink" title="äºŒå‰æ ‘å±‚åºéå†"></a>äºŒå‰æ ‘å±‚åºéå†</h4><ul><li>å®ç°äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆéå†ï¼Œ<code>BFS</code>ï¼‰</li><li>ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼ŒæŒ‰å±‚çº§é¡ºåºé€å±‚è®¿é—®èŠ‚ç‚¹ï¼Œæ¯å±‚ä»å·¦åˆ°å³</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    3  </span><br><span class="line">   / \</span><br><span class="line">  9   20</span><br><span class="line">     /  \</span><br><span class="line">    15   7</span><br><span class="line"></span><br><span class="line">è¾“å‡º: </span><br><span class="line">[</span><br><span class="line">    [3],</span><br><span class="line">    [9, 20],</span><br><span class="line">    [15, 7]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é˜Ÿåˆ—å®ç°<code>BFS</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ deque å®ç°é˜Ÿåˆ—ï¼Œåˆå§‹åŒ…å«æ ¹èŠ‚ç‚¹</span><br><span class="line">2. éå†æ¯ä¸€å±‚ï¼š</span><br><span class="line">    - è®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹æ•°é‡ï¼ˆlevel_sizeï¼‰</span><br><span class="line">    - å¼¹å‡ºé˜Ÿé¦–èŠ‚ç‚¹ï¼Œå­˜å‚¨å€¼åˆ°å½“å‰å±‚ç»“æœ</span><br><span class="line">    - å°†å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span><br><span class="line">3. æ¯å±‚éå†ç»“æŸåï¼Œå°†å½“å‰å±‚ç»“æœåŠ å…¥æœ€ç»ˆç»“æœ</span><br><span class="line">4. é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œéå†å®Œæˆ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val=<span class="number">0</span>, left=<span class="literal">None</span>, right=<span class="literal">None</span></span>):</span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">levelOrder</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="built_in">list</span>[<span class="built_in">list</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">        queue = deque([root]) <span class="comment"># åˆå§‹åŒ–é˜Ÿåˆ—ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            level_size = <span class="built_in">len</span>(queue) <span class="comment"># å½“å‰å±‚çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">            current_level = [] <span class="comment"># ç”¨äºå­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹å€¼</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(level_size):</span><br><span class="line">                node = queue.popleft() <span class="comment"># å¼¹å‡ºé˜Ÿé¦–èŠ‚ç‚¹</span></span><br><span class="line">                current_level.append(node.val) <span class="comment"># æ·»åŠ èŠ‚ç‚¹å€¼åˆ°å½“å‰å±‚</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># å°†å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">                <span class="keyword">if</span> node.left:</span><br><span class="line">                    queue.append(node.left)</span><br><span class="line">                <span class="keyword">if</span> node.right:</span><br><span class="line">                    queue.append(node.right)</span><br><span class="line"></span><br><span class="line">            result.append(current_level) <span class="comment"># å°†å½“å‰å±‚åŠ å…¥ç»“æœ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result       </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">val = <span class="number">0</span>, left = <span class="literal">null</span>, right = <span class="literal">null</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">val</span> = val;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">left</span> = left;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">right</span> = right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">levelOrder</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line">        <span class="keyword">if</span> (!root) <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> queue = [root]; <span class="comment">// åˆå§‹åŒ–é˜Ÿåˆ—ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (queue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> levelSize = queue.<span class="property">length</span>; <span class="comment">// å½“å‰å±‚çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">            <span class="keyword">const</span> currentLevel = []; <span class="comment">// ç”¨äºå­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹å€¼</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; levelSize; i++) &#123;</span><br><span class="line">                <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>(); <span class="comment">// å¼¹å‡ºé˜Ÿé¦–èŠ‚ç‚¹</span></span><br><span class="line">                currentLevel.<span class="title function_">push</span>(node.<span class="property">val</span>); <span class="comment">// æ·»åŠ èŠ‚ç‚¹å€¼åˆ°å½“å‰å±‚</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// å°†å·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">                <span class="keyword">if</span> (node.<span class="property">left</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">                <span class="keyword">if</span> (node.<span class="property">right</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result.<span class="title function_">push</span>(currentLevel);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ ‘æ¯å±‚çš„æœ€å¤§å€¼"><a href="#æ ‘æ¯å±‚çš„æœ€å¤§å€¼" class="headerlink" title="æ ‘æ¯å±‚çš„æœ€å¤§å€¼"></a>æ ‘æ¯å±‚çš„æœ€å¤§å€¼</h4><blockquote><p><a href="https://leetcode.com/problems/find-largest-value-in-each-tree-row/">Leetcode 515. Find Largest Value in Each Tree Row</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼ŒæŒ‰å±‚éå†æ ‘ï¼Œè¿”å›æ¯ä¸€è¡Œä¸­çš„æœ€å¤§å€¼</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">      1</span><br><span class="line">     / \</span><br><span class="line">    3   2</span><br><span class="line">   / \    \</span><br><span class="line">  5   3    9</span><br><span class="line"></span><br><span class="line">Output: [1,3,9]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å¹¿åº¦ä¼˜å…ˆæœç´¢<code>BFS</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é˜Ÿåˆ—ï¼ˆdequeï¼‰è¿›è¡Œå±‚åºéå†ï¼ˆBFSï¼‰</span><br><span class="line">2. éå†æ¯ä¸€å±‚æ—¶ï¼Œæ‰¾å‡ºè¯¥å±‚èŠ‚ç‚¹å€¼çš„æœ€å¤§å€¼</span><br><span class="line">3. å°†æ¯å±‚çš„æœ€å¤§å€¼æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">largestValues</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        result = []</span><br><span class="line">        queue = deque([root])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            level_size = <span class="built_in">len</span>(queue)</span><br><span class="line">            max_val = <span class="built_in">float</span>(<span class="string">&quot;-inf&quot;</span>) <span class="comment"># åˆå§‹åŒ–æ¯å±‚æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(level_size):</span><br><span class="line">                node = queue.popleft() <span class="comment"># å¼¹å‡ºå½“å‰å±‚çš„èŠ‚ç‚¹</span></span><br><span class="line">                max_val = <span class="built_in">max</span>(max_val, node.val) <span class="comment"># æ›´æ–°æœ€å¤§å€¼</span></span><br><span class="line">                <span class="keyword">if</span> node.left:</span><br><span class="line">                    queue.append(node.left) <span class="comment"># åŠ å…¥å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> node.right:</span><br><span class="line">                    queue.append(node.right) <span class="comment"># åŠ å…¥å³å­èŠ‚ç‚¹</span></span><br><span class="line">            </span><br><span class="line">            result.append(max_val) <span class="comment"># ä¿å­˜æ¯å±‚æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">largestValues</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!root) <span class="keyword">return</span> [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line">        <span class="keyword">const</span> queue = [root];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (queue.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> levelSize = queue.<span class="property">length</span>;</span><br><span class="line">            <span class="keyword">let</span> maxVal = -<span class="title class_">Infinity</span>; <span class="comment">// åˆå§‹åŒ–æ¯å±‚æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; levelSize; i++) &#123;</span><br><span class="line">                <span class="keyword">const</span> node = queue.<span class="title function_">shift</span>(); <span class="comment">// å¼¹å‡ºå½“å‰å±‚çš„èŠ‚ç‚¹</span></span><br><span class="line">                maxVal = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxVal, node.<span class="property">val</span>); <span class="comment">// æ›´æ–°æœ€å¤§å€¼</span></span><br><span class="line">                <span class="keyword">if</span> (node.<span class="property">left</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>); <span class="comment">// åŠ å…¥å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (node.<span class="property">right</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>); <span class="comment">// åŠ å…¥å³å­èŠ‚ç‚¹</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result.<span class="title function_">push</span>(maxVal); <span class="comment">// ä¿å­˜æ¯å±‚æœ€å¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="éªŒè¯äºŒå‰æœç´¢æ ‘"></a>éªŒè¯äºŒå‰æœç´¢æ ‘</h4><blockquote><p><a href="https://leetcode.com/problems/validate-binary-search-tree/">Leetcode 98. Validate Binary Search Tree</a></p></blockquote><ul><li>é¢˜ç›®: éªŒè¯ä¸€æ£µäºŒå‰æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘ï¼ˆ<code>BST</code>ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">äºŒå‰æœç´¢æ ‘çš„æ€§è´¨:</span><br><span class="line">1. èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«æ¯”å½“å‰èŠ‚ç‚¹å€¼å°çš„èŠ‚ç‚¹</span><br><span class="line">2. èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«æ¯”å½“å‰èŠ‚ç‚¹å€¼å¤§çš„èŠ‚ç‚¹</span><br><span class="line">3. å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [2,1,3]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€’å½’éªŒè¯ä¸Šä¸‹ç•Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯å¦æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ€§è´¨:</span><br><span class="line">   èŠ‚ç‚¹çš„å€¼åº”åœ¨ä¸€ä¸ªèŒƒå›´å†… `(low, high)`</span><br><span class="line">2. åˆå§‹èŒƒå›´æ˜¯ `(-inf, inf)`</span><br><span class="line">3. å·¦å­æ ‘çš„å€¼èŒƒå›´: `(low, node.val)`</span><br><span class="line">   å³å­æ ‘çš„å€¼èŒƒå›´: `(node.val, high)`</span><br><span class="line">4. é€’å½’æ£€æŸ¥å­æ ‘æ˜¯å¦æ»¡è¶³æ¡ä»¶</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValidBST</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="comment"># é€’å½’å‡½æ•°ï¼Œæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦åœ¨ (low, high) èŒƒå›´å†…</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">validate</span>(<span class="params">node, low, high</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node: <span class="comment"># ç©ºèŠ‚ç‚¹æ˜¯åˆæ³•çš„</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="comment"># å½“å‰èŠ‚ç‚¹å€¼å¿…é¡»åœ¨èŒƒå›´å†…</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> (low &lt; node.val &lt; high):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> validate(node.left, low, node.val) <span class="keyword">and</span> validate(node.right, node.val, high)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå§‹èŒƒå›´ä¸º (-inf, inf)</span></span><br><span class="line">        <span class="keyword">return</span> validate(root, <span class="built_in">float</span>(<span class="string">&quot;-inf&quot;</span>), <span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>))</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">isValidBST</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">validate</span>(<span class="params">node, low, high</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// ç©ºèŠ‚ç‚¹åˆæ³•</span></span><br><span class="line">            <span class="keyword">if</span> (node.<span class="property">val</span> &lt;= low || node.<span class="property">val</span> &gt;= high) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// ä¸åœ¨èŒƒå›´å†…</span></span><br><span class="line">            <span class="comment">// æ£€æŸ¥å·¦å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">validate</span>(node.<span class="property">left</span>, low, node.<span class="property">val</span>) &amp;&amp; <span class="title function_">validate</span>(node.<span class="property">right</span>, node.<span class="property">val</span>, high);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹èŒƒå›´ (-Infinity, Infinity)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">validate</span>(root, -<span class="title class_">Infinity</span>, <span class="title class_">Infinity</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="äºŒå‰æ ‘æœ€å¤§å·®å€¼"><a href="#äºŒå‰æ ‘æœ€å¤§å·®å€¼" class="headerlink" title="äºŒå‰æ ‘æœ€å¤§å·®å€¼"></a>äºŒå‰æ ‘æœ€å¤§å·®å€¼</h4><blockquote><p><a href="https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/">Leetcode 1026. Maximum Difference Between Node and Ancestor</a></p></blockquote><ul><li>é¢˜ç›®: æ‰¾åˆ°äºŒå‰æ ‘ä¸­ä»»æ„èŠ‚ç‚¹ä¸å…¶ç¥–å…ˆèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å¤§å·®å€¼<ul><li>ç¥–å…ˆèŠ‚ç‚¹: ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹è·¯å¾„ä¸Šçš„ä»»æ„èŠ‚ç‚¹</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [8,3,10,1,6,null,14,null,null,4,7,13]</span><br><span class="line">Output: 7</span><br><span class="line"></span><br><span class="line">å·®å€¼æœ€å¤§çš„ä¸€å¯¹èŠ‚ç‚¹æ˜¯: 8 å’Œ 1ï¼Œå·®å€¼ä¸º 7</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆ<code>DFS</code>ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’ï¼ˆDFSï¼‰éå†äºŒå‰æ ‘</span><br><span class="line">2. åœ¨é€’å½’è¿‡ç¨‹ä¸­ç»´æŠ¤å½“å‰è·¯å¾„ä¸Šçš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span><br><span class="line">3. æ¯åˆ°ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">    - æ›´æ–°è·¯å¾„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span><br><span class="line">    - è®¡ç®—å½“å‰èŠ‚ç‚¹å€¼ä¸è·¯å¾„æœ€å°å€¼æˆ–æœ€å¤§å€¼çš„å·®å€¼</span><br><span class="line">4. éå†æ•´æ£µæ ‘ï¼Œè¿”å›æœ€å¤§å·®å€¼</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxAncestorDiff</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">maxDiff</span>(<span class="params">node, curr_min, curr_max</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node: <span class="comment"># å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›å½“å‰å·®å€¼</span></span><br><span class="line">                <span class="keyword">return</span> curr_max - curr_min</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ›´æ–°å½“å‰è·¯å¾„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span></span><br><span class="line">            curr_min = <span class="built_in">min</span>(curr_min, node.val)</span><br><span class="line">            curr_max = <span class="built_in">max</span>(curr_max, node.val)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># é€’å½’å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œè®¡ç®—æœ€å¤§å·®å€¼</span></span><br><span class="line">            left_diff = maxDiff(node.left, curr_min, curr_max)</span><br><span class="line">            right_diff = maxDiff(node.right, curr_min, curr_max)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># è¿”å›å·¦å³å­æ ‘ä¸­å·®å€¼çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(left_diff, right_diff)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œåˆå§‹æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ºæ ¹èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">return</span> maxDiff(root, root.val, root.val)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxAncestorDiff</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">maxDiff</span>(<span class="params">node, currMin, currMax</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!node) <span class="keyword">return</span> currMax - currMin; <span class="comment">// è¿”å›å½“å‰å·®å€¼</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°è·¯å¾„ä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</span></span><br><span class="line">            currMin = <span class="title class_">Math</span>.<span class="title function_">min</span>(currMin, node.<span class="property">val</span>);</span><br><span class="line">            currMax = <span class="title class_">Math</span>.<span class="title function_">max</span>(currMax, node.<span class="property">val</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é€’å½’å·¦å³å­æ ‘ï¼Œè®¡ç®—æœ€å¤§å·®å€¼</span></span><br><span class="line">            <span class="keyword">const</span> leftDiff = <span class="title function_">maxDiff</span>(node.<span class="property">left</span>, currMin, currMax);</span><br><span class="line">            <span class="keyword">const</span> rightDiff = <span class="title function_">maxDiff</span>(node.<span class="property">right</span>, currMin, currMax);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¿”å›å·¦å³å­æ ‘ä¸­å·®å€¼çš„æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(leftDiff, rightDiff);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ºæ ¹èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">maxDiff</span>(root, root.<span class="property">val</span>, root.<span class="property">val</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ•°é‡"><a href="#ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ•°é‡" class="headerlink" title="ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ•°é‡"></a>ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ•°é‡</h4><blockquote><p><a href="https://leetcode.com/problems/unique-binary-search-trees/">Leetcode 96. Unique Binary Search Trees</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•´æ•°<code>n</code>ï¼Œè¡¨ç¤ºä»<code>1</code>åˆ°<code>n</code>çš„èŠ‚ç‚¹ï¼Œè®¡ç®—å¯ä»¥å½¢æˆçš„ä¸åŒäºŒå‰æœç´¢æ ‘ï¼ˆ<code>BST</code>ï¼‰çš„æ•°é‡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: n = 3</span><br><span class="line">Output: 5</span><br><span class="line"></span><br><span class="line">   1         3     3      2      1</span><br><span class="line">    \       /     /      / \      \</span><br><span class="line">     3     2     1      1   3      2</span><br><span class="line">    /     /       \                 \</span><br><span class="line">   2     1         2                 3</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’ (å¡ç‰¹å…°æ•°å…¬å¼)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ G[i] è¡¨ç¤ºç”± i ä¸ªèŠ‚ç‚¹å¯ä»¥æ„æˆçš„ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ•°é‡</span><br><span class="line">2. åˆå§‹æ¡ä»¶</span><br><span class="line">    - G[0] = 1ï¼ˆç©ºæ ‘æœ‰ 1 ç§æƒ…å†µï¼‰</span><br><span class="line">    - G[1] = 1ï¼ˆåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿåªæœ‰ 1 ç§æƒ…å†µï¼‰</span><br><span class="line">3. é€’æ¨å…¬å¼</span><br><span class="line">    - G[i] = Î£ G[j-1] * G[i-j]</span><br><span class="line">    - å³é€‰æ‹©ç¬¬ j ä¸ªèŠ‚ç‚¹ä¸ºæ ¹æ—¶</span><br><span class="line">        - å·¦å­æ ‘æœ‰ j-1 ä¸ªèŠ‚ç‚¹ï¼Œæ•°é‡ä¸º G[j-1]</span><br><span class="line">        - å³å­æ ‘æœ‰ i-j ä¸ªèŠ‚ç‚¹ï¼Œæ•°é‡ä¸º G[i-j]</span><br><span class="line">    - å¯¹æ‰€æœ‰å¯èƒ½çš„æ ¹èŠ‚ç‚¹ j æ±‚å’Œ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">numTrees</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># G[i] è¡¨ç¤º i ä¸ªèŠ‚ç‚¹çš„ä¸åŒäºŒå‰æœç´¢æ ‘æ•°é‡</span></span><br><span class="line">        G = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹æ¡ä»¶</span></span><br><span class="line">        G[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        G[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># åŠ¨æ€è§„åˆ’è®¡ç®— G[2] åˆ° G[n]</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, i + <span class="number">1</span>):</span><br><span class="line">                G[i] += G[j - <span class="number">1</span>] * G[i - j]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> G[n]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">numTrees</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> G = <span class="keyword">new</span> <span class="title class_">Array</span>(n + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆå§‹æ¡ä»¶</span></span><br><span class="line">        G[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        G[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ¨æ€è§„åˆ’è®¡ç®— G[2] åˆ° G[n]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                G[i] += G[j - <span class="number">1</span>] * G[i - j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> G[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ£€æŸ¥äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡"><a href="#æ£€æŸ¥äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡" class="headerlink" title="æ£€æŸ¥äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡"></a>æ£€æŸ¥äºŒå‰æ ‘æ˜¯å¦å¹³è¡¡</h4><blockquote><p><a href="https://leetcode.com/problems/balanced-binary-tree/">Leetcode 110. Balanced Binary Tree</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„<ul><li>å¹³è¡¡äºŒå‰æ ‘çš„å®šä¹‰æ˜¯: äºŒå‰æ ‘çš„ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡<code>1</code></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [3,9,20,null,null,15,7]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ·±åº¦ä¼˜å…ˆæœç´¢ (<code>DFS</code>)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’å‡½æ•° dfs(node)</span><br><span class="line">   - å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›å¹³è¡¡çŠ¶æ€ True å’Œé«˜åº¦ 0</span><br><span class="line">   - é€’å½’æ£€æŸ¥å·¦å³å­æ ‘ï¼Œè®¡ç®—å®ƒä»¬çš„å¹³è¡¡çŠ¶æ€å’Œé«˜åº¦</span><br><span class="line">2. å½“å‰èŠ‚ç‚¹æ˜¯å¦å¹³è¡¡</span><br><span class="line">   - å·¦å³å­æ ‘éƒ½å¹³è¡¡</span><br><span class="line">   - å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡ 1</span><br><span class="line">3. è¿”å›å½“å‰èŠ‚ç‚¹çš„å¹³è¡¡çŠ¶æ€å’Œé«˜åº¦</span><br><span class="line">4. æ£€æŸ¥æ ¹èŠ‚ç‚¹çš„å¹³è¡¡çŠ¶æ€</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isBalanced</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span>, <span class="number">0</span> <span class="comment"># [æ˜¯å¦å¹³è¡¡, é«˜åº¦]</span></span><br><span class="line">            </span><br><span class="line">            left_balanced, left_height = dfs(node.left)</span><br><span class="line">            right_balanced, right_height = dfs(node.right)</span><br><span class="line"></span><br><span class="line">            balanced = left_balanced <span class="keyword">and</span> right_balanced <span class="keyword">and</span> <span class="built_in">abs</span>(left_height - right_height) &lt;= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            height = <span class="built_in">max</span>(left_height, right_height) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> balanced, height</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dfs(root)[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">isBalanced</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">node</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!node) <span class="keyword">return</span> [<span class="literal">true</span>, <span class="number">0</span>]; <span class="comment">// [æ˜¯å¦å¹³è¡¡, é«˜åº¦]</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> [leftBalanced, leftHeight] = <span class="title function_">dfs</span>(node.<span class="property">left</span>);</span><br><span class="line">            <span class="keyword">const</span> [rightBalanced, rightHeight] = <span class="title function_">dfs</span>(node.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> balanced = leftBalanced &amp;&amp; rightBalanced &amp;&amp; <span class="title class_">Math</span>.<span class="title function_">abs</span>(leftHeight - rightHeight) &lt;= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> height = <span class="title class_">Math</span>.<span class="title function_">max</span>(leftHeight, rightHeight) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> [balanced, height];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">dfs</span>(root)[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="äºŒå‰æœç´¢æ ‘ç¬¬kå°çš„èŠ‚ç‚¹"><a href="#äºŒå‰æœç´¢æ ‘ç¬¬kå°çš„èŠ‚ç‚¹" class="headerlink" title="äºŒå‰æœç´¢æ ‘ç¬¬kå°çš„èŠ‚ç‚¹"></a>äºŒå‰æœç´¢æ ‘ç¬¬<code>k</code>å°çš„èŠ‚ç‚¹</h4><blockquote><p><a href="https://leetcode.com/problems/kth-smallest-element-in-a-bst/">Leetcode 230. Kth Smallest Element in a BST</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹<code>root</code>ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•°<code>k</code>ï¼Œè¯·è¿”å›è¯¥äºŒå‰æœç´¢æ ‘ä¸­ç¬¬<code>k</code>å°çš„èŠ‚ç‚¹å€¼</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [3,1,4,null,2], k = 1</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: ä¸­åºéå† (<code>In-order Traversal</code>)</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼ŒæŒ‰å‡åºè®¿é—®èŠ‚ç‚¹å€¼</span><br><span class="line">2. è®¡æ•°æ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“è®¡æ•°ç­‰äº k æ—¶ï¼Œè¿”å›è¯¥èŠ‚ç‚¹å€¼</span><br><span class="line">3. ä½¿ç”¨é€’å½’å®ç°ä¸­åºéå†</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kthSmallest</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        count = <span class="number">0</span> <span class="comment"># è®¡æ•°å™¨</span></span><br><span class="line">        result = <span class="literal">None</span> <span class="comment"># ç»“æœå­˜å‚¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">node</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> count, result</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># éå†å·¦å­æ ‘</span></span><br><span class="line">            inorder(node.left)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¤„ç†å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> count == k:</span><br><span class="line">                result = node.val</span><br><span class="line">                <span class="keyword">return</span> </span><br><span class="line">            </span><br><span class="line">            <span class="comment"># éå†å³å­æ ‘</span></span><br><span class="line">            inorder(node.right)</span><br><span class="line"></span><br><span class="line">        inorder(root)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">kthSmallest</span>(<span class="params">root, k</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span>; <span class="comment">// è®¡æ•°å™¨</span></span><br><span class="line">        <span class="keyword">let</span> result = <span class="literal">null</span>; <span class="comment">// ç»“æœå­˜å‚¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">inorder</span>(<span class="params">node</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éå†å·¦å­æ ‘</span></span><br><span class="line">            <span class="title function_">inorder</span>(node.<span class="property">left</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            count += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (count === k) &#123;</span><br><span class="line">                result = node.<span class="property">val</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éå†å³å­æ ‘</span></span><br><span class="line">            <span class="title function_">inorder</span>(node.<span class="property">right</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">inorder</span>(root);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨"><a href="#äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨" class="headerlink" title="äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨"></a>äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</h4><blockquote><p><a href="https://leetcode.com/problems/flatten-binary-tree-to-linked-list/">Leetcode 114. Flatten Binary Tree to Linked List</a></p></blockquote><ul><li>é¢˜ç›®: å°†äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨ï¼Œè¦æ±‚â€œå°±åœ°â€ä¿®æ”¹æ ‘çš„ç»“æ„ï¼Œä½¿å…¶å˜ä¸ºä¸€ä¸ªå•é“¾è¡¨å½¢å¼ï¼Œé¡ºåºä¸å‰åºéå†ä¸€è‡´</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [1,2,5,3,4,null,6]</span><br><span class="line">Output: [1,null,2,null,3,null,4,null,5,null,6]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€’å½’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. é€’å½’å¤„ç†å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå°†å®ƒä»¬åˆ†åˆ«æ‰å¹³åŒ–</span><br><span class="line">2. ä¿å­˜å³å­æ ‘ï¼Œå¹¶å°†å·¦å­æ ‘ç§»åˆ°å³å­æ ‘çš„ä½ç½®ï¼Œå°†å·¦å­æ ‘ç½®ä¸º None</span><br><span class="line">3. æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹ï¼Œå°†ä¿å­˜çš„å³å­æ ‘æ¥åˆ°è¿™ä¸ªèŠ‚ç‚¹ä¸Š</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">flatten</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># é€’å½’å¤„ç†å·¦å­æ ‘å’Œå³å­æ ‘</span></span><br><span class="line">        self.flatten(root.left)</span><br><span class="line">        self.flatten(root.right)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¿å­˜å³å­æ ‘</span></span><br><span class="line">        right_subtree = root.right</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†å·¦å­æ ‘ç§»åŠ¨åˆ°å³å­æ ‘çš„ä½ç½®</span></span><br><span class="line">        root.right = root.left</span><br><span class="line">        root.left = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">        curr = root</span><br><span class="line">        <span class="keyword">while</span> curr.right:</span><br><span class="line">            curr = curr.right</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†ä¿å­˜çš„å³å­æ ‘æ¥åˆ°æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">        curr.right = right_subtree</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">flatten</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!root) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’å¤„ç†å·¦å­æ ‘å’Œå³å­æ ‘</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">flatten</span>(root.<span class="property">left</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">flatten</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿å­˜å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">const</span> rightSubtree = root.<span class="property">right</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†å·¦å­æ ‘ç§»åŠ¨åˆ°å³å­æ ‘çš„ä½ç½®</span></span><br><span class="line">        root.<span class="property">right</span> = root.<span class="property">left</span>;</span><br><span class="line">        root.<span class="property">left</span> = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> curr = root;</span><br><span class="line">        <span class="keyword">while</span> (curr.<span class="property">right</span>)</span><br><span class="line">            curr = curr.<span class="property">right</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°†ä¿å­˜çš„å³å­æ ‘æ¥åˆ°æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">        curr.<span class="property">right</span> = rightSubtree;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h4><blockquote><p><a href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/">Leetcode 235. Lowest Common Ancestor of a Binary Search Tree</a></p></blockquote><ul><li>é¢˜ç›®: åœ¨ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼ˆ<code>BST</code>ï¼‰ä¸­ï¼Œç»™å®šä¸¤ä¸ªèŠ‚ç‚¹<code>p</code>å’Œ<code>q</code>ï¼Œæ‰¾åˆ°å®ƒä»¬çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆ<code>LCA</code>ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [5,3,8,1,4,7,9,null,2], p = 3, q = 8</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: èŠ‚ç‚¹ 5 æ˜¯èŠ‚ç‚¹ 3 å’Œ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åˆ©ç”¨äºŒå‰æœç´¢æ ‘çš„æ€§è´¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†</span><br><span class="line">2. å¦‚æœ p å’Œ q çš„å€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹å€¼ï¼Œåˆ™å¾€å·¦å­æ ‘ç»§ç»­æŸ¥æ‰¾</span><br><span class="line">3. å¦‚æœ p å’Œ q çš„å€¼éƒ½å¤§äºå½“å‰èŠ‚ç‚¹å€¼ï¼Œåˆ™å¾€å³å­æ ‘ç»§ç»­æŸ¥æ‰¾</span><br><span class="line">4. å¦‚æœ p å’Œ q çš„å€¼åˆ†åˆ«ä½äºå½“å‰èŠ‚ç‚¹çš„ä¸¤ä¾§ï¼Œæˆ–è€…å½“å‰èŠ‚ç‚¹å€¼ç­‰äºå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼Œåˆ™å½“å‰èŠ‚ç‚¹ä¸ºæœ€è¿‘å…¬å…±ç¥–å…ˆ</span><br></pre></td></tr></table></figure><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Python</button></li><li class="tab"><button type="button" data-href="#test-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lowestCommonAncestor</span>(<span class="params">self, root: <span class="string">&#x27;TreeNode&#x27;</span>, p: <span class="string">&#x27;TreeNode&#x27;</span>, q: <span class="string">&#x27;TreeNode&#x27;</span></span>) -&gt; <span class="string">&#x27;TreeNode&#x27;</span>:</span><br><span class="line">        <span class="keyword">while</span> root:</span><br><span class="line">            <span class="keyword">if</span> root.val &gt; p.val <span class="keyword">and</span> root.val &gt; q.val:</span><br><span class="line">                root = root.left <span class="comment"># p å’Œ q éƒ½åœ¨å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">elif</span> root.val &lt; p.val <span class="keyword">and</span> root.val &lt; q.val:</span><br><span class="line">                root = root.right <span class="comment"># p å’Œ q éƒ½åœ¨å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> root <span class="comment"># å½“å‰èŠ‚ç‚¹æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">lowestCommonAncestor</span>(<span class="params">root, p, q</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (root) &#123;</span><br><span class="line">            <span class="keyword">if</span> (root.<span class="property">val</span> &gt; p.<span class="property">val</span> &amp;&amp; root.<span class="property">val</span> &gt; q.<span class="property">val</span>)</span><br><span class="line">                root = root.<span class="property">left</span>; <span class="comment">// p å’Œ q éƒ½åœ¨å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (root.<span class="property">val</span> &lt; p.<span class="property">val</span> &amp;&amp; root.<span class="property">val</span> &lt; q.<span class="property">val</span>)</span><br><span class="line">                root = root.<span class="property">right</span>; <span class="comment">// p å’Œ q éƒ½åœ¨å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> root; <span class="comment">// å½“å‰èŠ‚ç‚¹æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å¯¹ç§°äºŒå‰æ ‘"><a href="#å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘"></a>å¯¹ç§°äºŒå‰æ ‘</h4><blockquote><p><a href="https://leetcode.com/problems/symmetric-tree/">Leetcode 101. Symmetric Tree</a></p></blockquote><ul><li>é¢˜ç›®: åˆ¤æ–­ç»™å®šçš„äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°çš„ã€‚å¦‚æœä¸€æ£µæ ‘çš„å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯é•œåƒå¯¹ç§°çš„ï¼Œåˆ™è¿™æ£µæ ‘æ˜¯å¯¹ç§°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [1,2,2,3,4,4,3]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€’å½’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å¦‚æœæ ‘ä¸ºç©ºï¼Œè¿”å› True</span><br><span class="line">2. å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° isMirrorï¼Œåˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å¯¹ç§°</span><br><span class="line">   - å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œè¿”å› True</span><br><span class="line">   - å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å› False</span><br><span class="line">   - åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶é€’å½’åˆ¤æ–­å®ƒä»¬çš„å·¦å³å­èŠ‚ç‚¹æ˜¯å¦å¯¹ç§°</span><br><span class="line">3. è°ƒç”¨ isMirror(root.left, root.right)</span><br></pre></td></tr></table></figure><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Python</button></li><li class="tab"><button type="button" data-href="#test-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isSymmetric</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">isMirror</span>(<span class="params">t1, t2</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> t1 <span class="keyword">and</span> <span class="keyword">not</span> t2:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> t1 <span class="keyword">or</span> <span class="keyword">not</span> t2:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> t1.val == t2.val <span class="keyword">and</span> isMirror(t1.right, t2.left) <span class="keyword">and</span> isMirror(t1.left, t2.right)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isMirror(root, root)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">isSymmetric</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">isMirror</span>(<span class="params">t1, t2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!t1 &amp;&amp; !t2) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (!t1 || !t2) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> t1.<span class="property">val</span> === t2.<span class="property">val</span> &amp;&amp; <span class="title function_">isMirror</span>(t1.<span class="property">right</span>, t2.<span class="property">left</span>) &amp;&amp; <span class="title function_">isMirror</span>(t1.<span class="property">left</span>, t2.<span class="property">right</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">isMirror</span>(root, root);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å­˜åœ¨è·¯å¾„æ€»å’Œ"><a href="#å­˜åœ¨è·¯å¾„æ€»å’Œ" class="headerlink" title="å­˜åœ¨è·¯å¾„æ€»å’Œ"></a>å­˜åœ¨è·¯å¾„æ€»å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/path-sum/">Leetcode 112. Path Sum</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œä¸€ä¸ªç›®æ ‡å’Œï¼Œåˆ¤æ–­æ ‘ä¸­æ˜¯å¦å­˜åœ¨ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22</span><br><span class="line">Output: true</span><br><span class="line">Explanation: The path 5 â†’ 4 â†’ 11 â†’ 2 has a sum of 22</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ·±åº¦ä¼˜å…ˆæœç´¢</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œé€’å½’åœ°æ£€æŸ¥å·¦å³å­æ ‘</span><br><span class="line">2. åœ¨æ¯æ¬¡é€’å½’ä¸­ï¼Œå°†ç›®æ ‡å€¼å‡å»å½“å‰èŠ‚ç‚¹çš„å€¼</span><br><span class="line">3. å½“åˆ°è¾¾å¶å­èŠ‚ç‚¹æ—¶ï¼Œæ£€æŸ¥å‰©ä½™ç›®æ ‡å€¼æ˜¯å¦ä¸º 0</span><br><span class="line">4. å¦‚æœæ‰¾åˆ°ä¸€æ¡è·¯å¾„ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å› Trueï¼›å¦åˆ™ç»§ç»­æœç´¢</span><br></pre></td></tr></table></figure><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Python</button></li><li class="tab"><button type="button" data-href="#test-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hasPathSum</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode], targetSum: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å‡å»å½“å‰èŠ‚ç‚¹å€¼</span></span><br><span class="line">        targetSum -= root.val</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ£€æŸ¥æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”ç›®æ ‡å€¼ä¸º</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root.left <span class="keyword">and</span> <span class="keyword">not</span> root.right:</span><br><span class="line">            <span class="keyword">return</span> targetSum == <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é€’å½’æ£€æŸ¥å·¦å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> self.hasPathSum(root.left, targetSum) <span class="keyword">or</span> self.hasPathSum(root.right, targetSum)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">hasPathSum</span>(<span class="params">root, targetSum</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‡å»å½“å‰èŠ‚ç‚¹å€¼</span></span><br><span class="line">        targetSum -= root.<span class="property">val</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”ç›®æ ‡å€¼ä¸º0</span></span><br><span class="line">        <span class="keyword">if</span> (!root.<span class="property">left</span> &amp;&amp; !root.<span class="property">right</span>)</span><br><span class="line">            <span class="keyword">return</span> targetSum === <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’æ£€æŸ¥å·¦å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">hasPathSum</span>(root.<span class="property">left</span>, targetSum) || <span class="variable language_">this</span>.<span class="title function_">hasPathSum</span>(root.<span class="property">right</span>, targetSum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ‰€æœ‰è·¯å¾„æ€»å’Œ"><a href="#æ‰€æœ‰è·¯å¾„æ€»å’Œ" class="headerlink" title="æ‰€æœ‰è·¯å¾„æ€»å’Œ"></a>æ‰€æœ‰è·¯å¾„æ€»å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/path-sum-ii/">Leetcode 113. Path Sum II</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œä¸€ä¸ªç›®æ ‡å’Œï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äºç›®æ ‡å’Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: root = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22</span><br><span class="line">Output: [[5,4,11,2],[5,8,4,5]]</span><br><span class="line">Explanation: The paths are:</span><br><span class="line">5 â†’ 4 â†’ 11 â†’ 2</span><br><span class="line">5 â†’ 8 â†’ 4 â†’ 5</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ·±åº¦ä¼˜å…ˆæœç´¢ + å›æº¯</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰éå†äºŒå‰æ ‘</span><br><span class="line">2. åœ¨è·¯å¾„ä¸Šè®°å½•å½“å‰èŠ‚ç‚¹å€¼ï¼Œå‡å»å½“å‰èŠ‚ç‚¹å€¼æ›´æ–°ç›®æ ‡å’Œ</span><br><span class="line">3. å½“åˆ°è¾¾å¶å­èŠ‚ç‚¹ä¸”ç›®æ ‡å’Œä¸º 0 æ—¶ï¼Œå°†å½“å‰è·¯å¾„åŠ å…¥ç»“æœ</span><br><span class="line">4. å›æº¯æ—¶ç§»é™¤å½“å‰èŠ‚ç‚¹å€¼ï¼Œè¿”å›ä¸Šä¸€å±‚é€’å½’ç»§ç»­æœç´¢</span><br></pre></td></tr></table></figure><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Python</button></li><li class="tab"><button type="button" data-href="#test-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pathSum</span>(<span class="params">self, root: <span class="type">Optional</span>[TreeNode], targetSum: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node, current_path, remaining_sum</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ å½“å‰èŠ‚ç‚¹å€¼åˆ°è·¯å¾„</span></span><br><span class="line">            current_path.append(node.val)</span><br><span class="line">            remaining_sum -= node.val</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ä¸”ç›®æ ‡å’Œä¸º0ï¼Œä¿å­˜è·¯å¾„</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node.left <span class="keyword">and</span> <span class="keyword">not</span> node.right <span class="keyword">and</span> remaining_sum == <span class="number">0</span>:</span><br><span class="line">                result.append(<span class="built_in">list</span>(current_path))</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># é€’å½’éå†å·¦å³å­æ ‘</span></span><br><span class="line">            dfs(node.left, current_path, remaining_sum)</span><br><span class="line">            dfs(node.right, current_path, remaining_sum)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å›æº¯</span></span><br><span class="line">            current_path.pop()</span><br><span class="line">        </span><br><span class="line">        dfs(root, [], targetSum)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">pathSum</span>(<span class="params">root, targetSum</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">node, currentPath, remainingSum</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ·»åŠ å½“å‰èŠ‚ç‚¹å€¼åˆ°è·¯å¾„</span></span><br><span class="line">            currentPath.<span class="title function_">push</span>(node.<span class="property">val</span>);</span><br><span class="line">            remainingSum -= node.<span class="property">val</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ä¸”ç›®æ ‡å’Œä¸º0ï¼Œä¿å­˜è·¯å¾„</span></span><br><span class="line">            <span class="keyword">if</span> (!node.<span class="property">left</span> &amp;&amp; !node.<span class="property">right</span> &amp;&amp; remainingSum === <span class="number">0</span>)</span><br><span class="line">                result.<span class="title function_">push</span>([...currentPath]);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// é€’å½’éå†å·¦å³å­æ ‘</span></span><br><span class="line">            <span class="title function_">dfs</span>(node.<span class="property">left</span>, currentPath, remainingSum);</span><br><span class="line">            <span class="title function_">dfs</span>(node.<span class="property">right</span>, currentPath, remainingSum);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å›æº¯</span></span><br><span class="line">            currentPath.<span class="title function_">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">dfs</span>(root, [], targetSum);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Matrix-çŸ©é˜µ"><a href="#Matrix-çŸ©é˜µ" class="headerlink" title="Matrix çŸ©é˜µ"></a><code>Matrix</code> çŸ©é˜µ</h3><h4 id="èºæ—‹çŸ©é˜µ"><a href="#èºæ—‹çŸ©é˜µ" class="headerlink" title="èºæ—‹çŸ©é˜µ"></a>èºæ—‹çŸ©é˜µ</h4><blockquote><p><a href="https://leetcode.com/problems/spiral-matrix/">Leetcode 54. Spiral Matrix</a></p></blockquote><ul><li>é¢˜ç›®: æŒ‰ç…§èºæ—‹é¡ºåºè¾“å‡ºçŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ </li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: matrix = [[1,2,3],[4,5,6],[7,8,9]]</span><br><span class="line">Output: [1,2,3,6,9,8,7,4,5]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€å±‚éå†</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–çŸ©é˜µçš„è¾¹ç•Œ</span><br><span class="line">    - ä¸Šè¾¹ç•Œ topï¼Œåˆå§‹ä¸º 0</span><br><span class="line">    - ä¸‹è¾¹ç•Œ bottomï¼Œåˆå§‹ä¸ºçŸ©é˜µçš„è¡Œæ•° - 1</span><br><span class="line">    - å·¦è¾¹ç•Œ leftï¼Œåˆå§‹ä¸º 0</span><br><span class="line">    - å³è¾¹ç•Œ rightï¼Œåˆå§‹ä¸ºçŸ©é˜µçš„åˆ—æ•° - 1</span><br><span class="line">2. æŒ‰ç…§èºæ—‹é¡ºåº</span><br><span class="line">    - ä»å·¦åˆ°å³éå†æœ€ä¸Šé¢ä¸€è¡Œ</span><br><span class="line">    - ä»ä¸Šåˆ°ä¸‹éå†æœ€å³è¾¹ä¸€åˆ—</span><br><span class="line">    - ä»å³åˆ°å·¦éå†æœ€ä¸‹é¢ä¸€è¡Œï¼ˆå¦‚æœè¿˜æœ‰å‰©ä½™è¡Œï¼‰</span><br><span class="line">    - ä»ä¸‹åˆ°ä¸Šéå†æœ€å·¦è¾¹ä¸€åˆ—ï¼ˆå¦‚æœè¿˜æœ‰å‰©ä½™åˆ—ï¼‰</span><br><span class="line">3. æ¯éå†ä¸€å±‚åç¼©å°è¾¹ç•Œï¼Œç›´åˆ°éå†å®Œæ•´ä¸ªçŸ©é˜µ</span><br></pre></td></tr></table></figure><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">Python</button></li><li class="tab"><button type="button" data-href="#test-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">spiralOrder</span>(<span class="params">self, matrix: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        top, bottom = <span class="number">0</span>, <span class="built_in">len</span>(matrix) - <span class="number">1</span></span><br><span class="line">        left, right = <span class="number">0</span>, <span class="built_in">len</span>(matrix[<span class="number">0</span>]) - <span class="number">1</span></span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> top &lt;= bottom <span class="keyword">and</span> left &lt;= right:</span><br><span class="line">            <span class="comment"># ä»å·¦åˆ°å³éå†æœ€ä¸Šé¢ä¸€è¡Œ</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(left, right + <span class="number">1</span>):</span><br><span class="line">                result.append(matrix[top][i])</span><br><span class="line">            top += <span class="number">1</span>  <span class="comment"># ä¸Šè¾¹ç•Œå‘ä¸‹ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># ä»ä¸Šåˆ°ä¸‹éå†æœ€å³è¾¹ä¸€åˆ—</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(top, bottom + <span class="number">1</span>):</span><br><span class="line">                result.append(matrix[i][right])</span><br><span class="line">            right -= <span class="number">1</span>  <span class="comment"># å³è¾¹ç•Œå‘å·¦ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> top &lt;= bottom:</span><br><span class="line">                <span class="comment"># ä»å³åˆ°å·¦éå†æœ€ä¸‹é¢ä¸€è¡Œ</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(right, left - <span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                    result.append(matrix[bottom][i])</span><br><span class="line">                bottom -= <span class="number">1</span>  <span class="comment"># ä¸‹è¾¹ç•Œå‘ä¸Šç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> left &lt;= right:</span><br><span class="line">                <span class="comment"># ä»ä¸‹åˆ°ä¸Šéå†æœ€å·¦è¾¹ä¸€åˆ—</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(bottom, top - <span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                    result.append(matrix[i][left])</span><br><span class="line">                left += <span class="number">1</span>  <span class="comment"># å·¦è¾¹ç•Œå‘å³ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">spiralOrder</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> top = <span class="number">0</span>, bottom = matrix.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> left = <span class="number">0</span>, right = matrix[<span class="number">0</span>].<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ((top &lt;= bottom) &amp;&amp; (left &lt;= right)) &#123;</span><br><span class="line">            <span class="comment">// ä»å·¦åˆ°å³éå†æœ€ä¸Šé¢ä¸€è¡Œ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = left; i &lt; right + <span class="number">1</span>; i++)</span><br><span class="line">                result.<span class="title function_">push</span>(matrix[top][i]);</span><br><span class="line">            top += <span class="number">1</span>; <span class="comment">// ä¸Šè¾¹ç•Œå‘ä¸‹ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä»ä¸Šåˆ°ä¸‹éå†æœ€å³è¾¹ä¸€åˆ—</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = top; j &lt; bottom + <span class="number">1</span>; j++)</span><br><span class="line">                result.<span class="title function_">push</span>(matrix[j][right]);</span><br><span class="line">            right -= <span class="number">1</span>; <span class="comment">// å³è¾¹ç•Œå‘å·¦ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (top &lt;= bottom) &#123;</span><br><span class="line">                <span class="comment">// ä»å³åˆ°å·¦éå†æœ€ä¸‹é¢ä¸€è¡Œ</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = right; i &gt; left - <span class="number">1</span>; i--)</span><br><span class="line">                    result.<span class="title function_">push</span>(matrix[bottom][i]);</span><br><span class="line">                bottom -= <span class="number">1</span>; <span class="comment">// ä¸‹è¾¹ç•Œå‘ä¸Šç§»åŠ¨</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (left &lt;= right) &#123;</span><br><span class="line">                <span class="comment">// ä»ä¸‹åˆ°ä¸Šéå†æœ€å·¦è¾¹ä¸€åˆ—</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> j = bottom; j &gt; top - <span class="number">1</span>; j--)</span><br><span class="line">                    result.<span class="title function_">push</span>(matrix[j][left]);</span><br><span class="line">                left += <span class="number">1</span>; <span class="comment">// å·¦è¾¹ç•Œå‘å³ç§»åŠ¨</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ‰æ•ˆæ•°ç‹¬"><a href="#æœ‰æ•ˆæ•°ç‹¬" class="headerlink" title="æœ‰æ•ˆæ•°ç‹¬"></a>æœ‰æ•ˆæ•°ç‹¬</h4><blockquote><p><a href="https://leetcode.com/problems/valid-sudoku/">Leetcode 36. Valid Sudoku</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ª<code>9x9</code>çš„æ•°ç‹¬æ£‹ç›˜ï¼ŒéªŒè¯è¯¥æ£‹ç›˜æ˜¯å¦æœ‰æ•ˆ<ul><li>æ¯è¡Œæ•°å­—ä¸èƒ½é‡å¤</li><li>æ¯åˆ—æ•°å­—ä¸èƒ½é‡å¤</li><li>æ¯ä¸ª<code>3x3</code>æ–¹å—ä¸­çš„æ•°å­—ä¸èƒ½é‡å¤</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: board = </span><br><span class="line">[[&quot;5&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;,&quot;9&quot;,&quot;5&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;9&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;3&quot;]</span><br><span class="line">,[&quot;4&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;3&quot;,&quot;.&quot;,&quot;.&quot;,&quot;1&quot;]</span><br><span class="line">,[&quot;7&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;6&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;6&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;2&quot;,&quot;8&quot;,&quot;.&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;4&quot;,&quot;1&quot;,&quot;9&quot;,&quot;.&quot;,&quot;.&quot;,&quot;5&quot;]</span><br><span class="line">,[&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;.&quot;,&quot;8&quot;,&quot;.&quot;,&quot;.&quot;,&quot;7&quot;,&quot;9&quot;]]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å“ˆå¸Œè¡¨</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ä¸‰ä¸ªå“ˆå¸Œè¡¨åˆ†åˆ«è®°å½•</span><br><span class="line">    - æ¯è¡Œä¸­å·²å‡ºç°çš„æ•°å­—</span><br><span class="line">    - æ¯åˆ—ä¸­å·²å‡ºç°çš„æ•°å­—</span><br><span class="line">    - æ¯ä¸ª 3x3 æ–¹å—ä¸­å·²å‡ºç°çš„æ•°å­—</span><br><span class="line">2. éå†æ•´ä¸ªæ£‹ç›˜</span><br><span class="line">    - å¦‚æœé‡åˆ° .ï¼Œè·³è¿‡</span><br><span class="line">    - æ£€æŸ¥æ•°å­—æ˜¯å¦å·²å­˜åœ¨äºå½“å‰è¡Œã€åˆ—æˆ–å¯¹åº”çš„ 3x3 æ–¹å—ä¸­</span><br><span class="line">    - å¦‚æœå­˜åœ¨ï¼Œè¿”å› False</span><br><span class="line">    - å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ åˆ°ç›¸åº”çš„å“ˆå¸Œè¡¨ä¸­</span><br><span class="line">3. éå†ç»“æŸåï¼Œè‹¥æœªå‘ç°å†²çªï¼Œè¿”å› True</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValidSudoku</span>(<span class="params">board: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="comment"># å“ˆå¸Œè¡¨è®°å½•æ¯è¡Œã€æ¯åˆ—å’Œæ¯ä¸ª 3x3 æ–¹å—çš„æ•°å­—</span></span><br><span class="line">        rows = collections.defaultdict(<span class="built_in">set</span>)</span><br><span class="line">        cols = collections.defaultdict(<span class="built_in">set</span>)</span><br><span class="line">        squares = collections.defaultdict(<span class="built_in">set</span>) <span class="comment"># é”®ä¸º (r//3, c//3)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">                num = board[r][c]</span><br><span class="line">                <span class="keyword">if</span> num == <span class="string">&quot;.&quot;</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ£€æŸ¥å½“å‰æ•°å­—æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">                <span class="keyword">if</span> num <span class="keyword">in</span> rows[r] <span class="keyword">or</span> num <span class="keyword">in</span> cols[c] <span class="keyword">or</span> num <span class="keyword">in</span> squares[(r // <span class="number">3</span>, c // <span class="number">3</span>)]:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ·»åŠ æ•°å­—åˆ°å¯¹åº”å“ˆå¸Œè¡¨</span></span><br><span class="line">                rows[r].add(num)</span><br><span class="line">                cols[c].add(num)</span><br><span class="line">                squares[((r // <span class="number">3</span>, c // <span class="number">3</span>))].add(num)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">isValidSudoku</span>(<span class="params">board</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> rows = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">9</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Set</span>());</span><br><span class="line">        <span class="keyword">const</span> cols = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">9</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Set</span>());</span><br><span class="line">        <span class="keyword">const</span> squares = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">9</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Set</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="number">9</span>; r++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="number">9</span>; c++) &#123;</span><br><span class="line">                <span class="keyword">const</span> num = board[r][c];</span><br><span class="line">                <span class="keyword">if</span> (num === <span class="string">&quot;.&quot;</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">const</span> squareIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(r / <span class="number">3</span>) * <span class="number">3</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(c / <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (rows[r].<span class="title function_">has</span>(num) || cols[c].<span class="title function_">has</span>(num) || squares[squareIndex].<span class="title function_">has</span>(num))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">                rows[r].<span class="title function_">add</span>(num);</span><br><span class="line">                cols[c].<span class="title function_">add</span>(num);</span><br><span class="line">                squares[squareIndex].<span class="title function_">add</span>(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€å¤§å²›å±¿é¢ç§¯"><a href="#æœ€å¤§å²›å±¿é¢ç§¯" class="headerlink" title="æœ€å¤§å²›å±¿é¢ç§¯"></a>æœ€å¤§å²›å±¿é¢ç§¯</h4><blockquote><p><a href="https://leetcode.com/problems/max-area-of-island/">Leetcode 695. Max Area of Island</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒç»´ç½‘æ ¼<code>grid</code>ï¼Œå…¶ä¸­<code>0</code>è¡¨ç¤ºæ°´åŸŸï¼Œ<code>1</code>è¡¨ç¤ºé™†åœ°ï¼Œè®¡ç®—ç½‘æ ¼ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯ã€‚å²›å±¿ç”±ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç›¸è¿çš„é™†åœ°ç»„æˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: grid = [[0,0,1,0,0,0,0,1,0,0,0,0,0],</span><br><span class="line">               [0,0,0,0,0,0,0,1,1,1,0,0,0],</span><br><span class="line">               [0,1,1,0,1,0,0,0,0,0,0,0,0],</span><br><span class="line">               [0,1,0,0,1,1,0,0,1,0,1,0,0],</span><br><span class="line">               [0,1,0,0,1,1,0,0,1,1,1,0,0],</span><br><span class="line">               [0,0,0,0,0,0,0,0,0,0,1,0,0],</span><br><span class="line">               [0,0,0,0,0,0,0,1,1,1,0,0,0],</span><br><span class="line">               [0,0,0,0,0,0,0,1,1,0,0,0,0]]</span><br><span class="line">Output: 6</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆ<code>DFS</code>ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. éå†æ•´ä¸ªç½‘æ ¼</span><br><span class="line">2. é‡åˆ° 1 æ—¶ï¼Œå¯åŠ¨ DFS è®¡ç®—è¿é€šå²›å±¿çš„é¢ç§¯</span><br><span class="line">3. å°†è®¿é—®è¿‡çš„æ ¼å­æ ‡è®°ä¸º 0ï¼Œé˜²æ­¢é‡å¤è®¿é—®</span><br><span class="line">4. æ›´æ–°æœ€å¤§å²›å±¿é¢ç§¯</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxAreaOfIsland</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># å®šä¹‰ DFS å‡½æ•°ï¼Œéå†å²›å±¿</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i, j</span>):</span><br><span class="line">            <span class="comment"># å¦‚æœè¶…å‡ºè¾¹ç•Œæˆ–å½“å‰ä½ç½®ä¸æ˜¯å²›å±¿ï¼Œè¿”å› 0</span></span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">0</span> <span class="keyword">or</span> i &gt;= <span class="built_in">len</span>(grid) <span class="keyword">or</span> j &lt; <span class="number">0</span> <span class="keyword">or</span> j &gt;= <span class="built_in">len</span>(grid[<span class="number">0</span>]) <span class="keyword">or</span> grid[i][j] == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            grid[i][j] = <span class="number">0</span> <span class="comment"># æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">            <span class="comment"># é€’å½’åœ°è®¿é—®ä¸Šä¸‹å·¦å³</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> + dfs(i + <span class="number">1</span>, j) + dfs(i - <span class="number">1</span>, j) + dfs(i, j + <span class="number">1</span>) + dfs(i, j - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        max_area = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(grid)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(grid[<span class="number">0</span>])):</span><br><span class="line">                <span class="keyword">if</span> grid[i][j] == <span class="number">1</span>:</span><br><span class="line">                    max_area = <span class="built_in">max</span>(max_area, dfs(i, j)) <span class="comment"># å¦‚æœæ‰¾åˆ°å²›å±¿ï¼Œå¯åŠ¨ DFS</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max_area</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxAreaOfIsland</span>(<span class="params">grid</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">i, j</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè¶…å‡ºè¾¹ç•Œæˆ–å½“å‰ä½ç½®ä¸æ˜¯å²›å±¿ï¼Œè¿”å› 0</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= grid.<span class="property">lenght</span> || j &lt; <span class="number">0</span> || j &gt;= grid[<span class="number">0</span>].<span class="property">length</span> || grid[i][j] === <span class="number">0</span>) </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            grid[i][j] = <span class="number">0</span>; <span class="comment">// æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">            <span class="comment">// é€’å½’åœ°è®¿é—®ä¸Šä¸‹å·¦å³</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> + <span class="title function_">dfs</span>(i + <span class="number">1</span>, j) + <span class="title function_">dfs</span>(i - <span class="number">1</span>, j) + <span class="title function_">dfs</span>(i, j + <span class="number">1</span>) + <span class="title function_">dfs</span>(i, j - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> maxArea = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; grid.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].<span class="property">length</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] === <span class="number">1</span>)</span><br><span class="line">                    maxArea = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxArea, <span class="title function_">dfs</span>(i, j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxArea;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Array-æ•°ç»„"><a href="#Array-æ•°ç»„" class="headerlink" title="Array æ•°ç»„"></a><code>Array</code> æ•°ç»„</h3><h4 id="è½®è½¬æ•°ç»„"><a href="#è½®è½¬æ•°ç»„" class="headerlink" title="è½®è½¬æ•°ç»„"></a>è½®è½¬æ•°ç»„</h4><blockquote><p><a href="https://leetcode.com/problems/rotate-array/">Leetcode 189. Rotate Array</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†å…¶å…ƒç´ å‘å³è½®è½¬<code>k</code>ä½ï¼Œå…¶ä¸­<code>k</code>æ˜¯éè´Ÿæ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,2,3,4,5,6,7], k = 3</span><br><span class="line">Output: [5,6,7,1,2,3,4]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: ç¿»è½¬æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç¿»è½¬æ•´ä¸ªæ•°ç»„</span><br><span class="line">2. ç¿»è½¬å‰ k ä¸ªå…ƒç´ </span><br><span class="line">3. ç¿»è½¬å‰©ä½™çš„å…ƒç´ </span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        k %= n <span class="comment"># å¤„ç† k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¿»è½¬æ•°ç»„çš„è¾…åŠ©å‡½æ•°</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">start, end</span>):</span><br><span class="line">            <span class="keyword">while</span> start &lt; end:</span><br><span class="line">                nums[start], nums[end] = nums[end], nums[start]</span><br><span class="line">                start += <span class="number">1</span></span><br><span class="line">                end -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. ç¿»è½¬æ•´ä¸ªæ•°ç»„</span></span><br><span class="line">        reverse(<span class="number">0</span>, n - <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 2. ç¿»è½¬å‰ k ä¸ªå…ƒç´ </span></span><br><span class="line">        reverse(<span class="number">0</span>, k - <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 3. ç¿»è½¬å‰©ä¸‹çš„å…ƒç´ </span></span><br><span class="line">        reverse(k, n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">rotate</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> n = nums.<span class="property">length</span>;</span><br><span class="line">        k %= n; <span class="comment">// å¤„ç† k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">reverse</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">                [nums[start], nums[end]] = [nums[end], nums[start]];</span><br><span class="line">                start++;</span><br><span class="line">                end--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. ç¿»è½¬æ•´ä¸ªæ•°ç»„</span></span><br><span class="line">        <span class="title function_">reverse</span>(<span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 2. ç¿»è½¬å‰ k ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="title function_">reverse</span>(<span class="number">0</span>, k - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 3. ç¿»è½¬å‰©ä¸‹çš„å…ƒç´ </span></span><br><span class="line">        <span class="title function_">reverse</span>(k, n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ•°ç»„è½¬æ ‘"><a href="#æ•°ç»„è½¬æ ‘" class="headerlink" title="æ•°ç»„è½¬æ ‘"></a>æ•°ç»„è½¬æ ‘</h4><blockquote><p><a href="https://leetcode.com/problems/convert-sorted-array-to-binary-search-tree/">Leetcode 108. Convert Sorted Array to Binary Search Tree</a></p></blockquote><ul><li>é¢˜ç›®: å°†ä¸€ä¸ªæœ‰åºæ•°ç»„è½¬æ¢ä¸ºä¸€æ£µé«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼ˆ<code>BST</code>ï¼‰ã€‚é«˜åº¦å¹³è¡¡æŒ‡çš„æ˜¯æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡<code>1</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [-10,-3,0,5,9]</span><br><span class="line">Output: [0,-3,9,-10,null,5]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€’å½’æ„å»º</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. é€‰æ‹©æ•°ç»„çš„ä¸­é—´å…ƒç´ ä½œä¸ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</span><br><span class="line">2. å·¦ä¾§å­æ•°ç»„é€’å½’æ„å»ºå·¦å­æ ‘ã€‚</span><br><span class="line">3. å³ä¾§å­æ•°ç»„é€’å½’æ„å»ºå³å­æ ‘ã€‚</span><br><span class="line">4. å½“æ•°ç»„ä¸ºç©ºæ—¶ï¼Œè¿”å› Noneã€‚</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sortedArrayToBST</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">Optional</span>[TreeNode]:</span><br><span class="line">        <span class="comment"># å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œè¿”å› None</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‰¾åˆ°ä¸­é—´å…ƒç´ å¹¶åˆ›å»ºå½“å‰æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        mid = <span class="built_in">len</span>(nums) // <span class="number">2</span></span><br><span class="line">        root = TreeNode(nums[mid])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºå·¦å­æ ‘å’Œå³å­æ ‘</span></span><br><span class="line">        root.left = self.sortedArrayToBST(nums[:mid])</span><br><span class="line">        root.right = self.sortedArrayToBST(nums[mid + <span class="number">1</span>:])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">sortedArrayToBST</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œè¿”å› null</span></span><br><span class="line">        <span class="keyword">if</span> (nums.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰¾åˆ°ä¸­é—´å…ƒç´ å¹¶åˆ›å»ºå½“å‰æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">const</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>(nums.<span class="property">length</span> / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">const</span> root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(nums[mid]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„å»ºå·¦å­æ ‘å’Œå³å­æ ‘</span></span><br><span class="line">        root.<span class="property">left</span> = <span class="variable language_">this</span>.<span class="title function_">sortedArrayToBST</span>(nums.<span class="title function_">slice</span>(<span class="number">0</span>, mid));</span><br><span class="line">        root.<span class="property">right</span> = <span class="variable language_">this</span>.<span class="title function_">sortedArrayToBST</span>(nums.<span class="title function_">slice</span>(mid + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"></a>åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h4><blockquote><p><a href="https://leetcode.com/problems/merge-sorted-array/">Leetcode 88. Merge Sorted Array</a></p></blockquote><ul><li>é¢˜ç›®: å°†ä¸¤ä¸ªæœ‰åºæ•°ç»„<code>nums1</code>å’Œ<code>nums2</code>åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œå…¶ä¸­<code>nums1</code>æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾<code>nums2</code>çš„å…ƒç´ </li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums1 = [1,2,3,0,0,0], m = 3, nums2 = [2,5,6], n = 3</span><br><span class="line">Output: [1,2,2,3,5,6]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŒæŒ‡é’ˆä»åå¾€å‰åˆå¹¶</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. è®¾ç½®ä¸‰ä¸ªæŒ‡é’ˆ</span><br><span class="line">   - i æŒ‡å‘ nums1 çš„æœ‰æ•ˆå…ƒç´ éƒ¨åˆ†çš„æœ«å°¾</span><br><span class="line">   - j æŒ‡å‘ nums2 çš„æœ«å°¾</span><br><span class="line">   - k æŒ‡å‘ nums1 çš„æœ«å°¾</span><br><span class="line">2. æ¯”è¾ƒ nums1 å’Œ nums2 ä¸­çš„å…ƒç´ ï¼Œå°†è¾ƒå¤§çš„å…ƒç´ å¡«å…¥ nums1 çš„æœ«å°¾ï¼ŒæŒ‡é’ˆå‘å‰ç§»åŠ¨</span><br><span class="line">3. å¦‚æœ nums2 è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œç›´æ¥å¡«å…¥ nums1</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">self, nums1: <span class="type">List</span>[<span class="built_in">int</span>], m: <span class="built_in">int</span>, nums2: <span class="type">List</span>[<span class="built_in">int</span>], n: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># æŒ‡é’ˆ i æŒ‡å‘ nums1 çš„æœ‰æ•ˆéƒ¨åˆ†æœ«å°¾ï¼Œj æŒ‡å‘ nums2 æœ«å°¾ï¼Œk æŒ‡å‘ nums1 çš„æ€»æœ«å°¾</span></span><br><span class="line">        i, j, k = m - <span class="number">1</span>, n - <span class="number">1</span>, m + n - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä»åå¾€å‰åˆå¹¶</span></span><br><span class="line">        <span class="keyword">while</span> i &gt;= <span class="number">0</span> <span class="keyword">and</span> j &gt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> nums1[i] &gt; nums2[j]:</span><br><span class="line">                nums1[k] = nums1[i]</span><br><span class="line">                i -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                nums1[k] = nums2[j]</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœ nums2 è¿˜æœ‰å‰©ä½™å…ƒç´ ï¼Œå¡«å…¥ nums1</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span>:</span><br><span class="line">            nums1[k] = nums2[j]</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">            k -= <span class="number">1</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">merge</span>(<span class="params">nums1, m, nums2, n</span>) &#123;</span><br><span class="line">        <span class="comment">// æŒ‡é’ˆ i æŒ‡å‘ nums1 çš„æœ‰æ•ˆéƒ¨åˆ†æœ«å°¾ï¼Œj æŒ‡å‘ nums2 æœ«å°¾ï¼Œk æŒ‡å‘ nums1 çš„æ€»æœ«å°¾</span></span><br><span class="line">        <span class="keyword">let</span> i = m - <span class="number">1</span>, j = n - <span class="number">1</span>, k = m + n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»åå¾€å‰åˆå¹¶</span></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums1[i] &gt; nums2[j]) &#123;</span><br><span class="line">                nums1[k] = nums1[i];</span><br><span class="line">                i--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                nums1[k] = nums2[j];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœ nums2 è¿˜æœ‰å‰©ä½™å…ƒç´ ï¼Œå¡«å…¥ nums1</span></span><br><span class="line">        <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            nums1[k] = nums2[j];</span><br><span class="line">            j--;</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ¯æ—¥æ¸©åº¦"><a href="#æ¯æ—¥æ¸©åº¦" class="headerlink" title="æ¯æ—¥æ¸©åº¦"></a>æ¯æ—¥æ¸©åº¦</h4><blockquote><p><a href="https://leetcode.com/problems/daily-temperatures/">Leetcode 739. Daily Temperatures</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„<code>temperatures</code>ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„<code>answer</code>ï¼Œå…¶ä¸­<code>answer[i]</code>æ˜¯éœ€è¦ç­‰å¾…çš„å¤©æ•°ï¼Œç›´åˆ°<code>temperatures[i]</code>ä¹‹åå‡ºç°æ›´é«˜çš„æ¸©åº¦ã€‚å¦‚æœæ²¡æœ‰æ›´é«˜çš„æ¸©åº¦ï¼Œ<code>answer[i] = 0</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: temperatures = [73,74,75,71,69,72,76,73]</span><br><span class="line">Output: [1,1,4,2,1,1,0,0]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å•è°ƒæ ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨æ ˆå­˜å‚¨æ¸©åº¦çš„ç´¢å¼•</span><br><span class="line">2. éå† temperaturesï¼š</span><br><span class="line">   - å¦‚æœå½“å‰æ¸©åº¦é«˜äºæ ˆé¡¶ç´¢å¼•å¯¹åº”çš„æ¸©åº¦ï¼Œå¼¹å‡ºæ ˆé¡¶ç´¢å¼•å¹¶è®¡ç®—ç­‰å¾…å¤©æ•°</span><br><span class="line">   - å¦åˆ™ï¼Œå°†å½“å‰ç´¢å¼•å‹å…¥æ ˆ</span><br><span class="line">3. æœ€åæ ˆä¸­æœªå¤„ç†çš„ç´¢å¼•å¯¹åº”çš„ç­‰å¾…å¤©æ•°ä¸º 0</span><br><span class="line">4. æ—¶é—´å¤æ‚åº¦ O(n)</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dailyTemperatures</span>(<span class="params">self, temperatures: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–ç»“æœæ•°ç»„å’Œæ ˆ</span></span><br><span class="line">        result = [<span class="number">0</span>] * <span class="built_in">len</span>(temperatures)</span><br><span class="line">        stack = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†æ¸©åº¦æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> i, temp <span class="keyword">in</span> <span class="built_in">enumerate</span>(temperatures):</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰æ¸©åº¦æ¯”æ ˆé¡¶çš„æ¸©åº¦é«˜</span></span><br><span class="line">            <span class="keyword">while</span> stack <span class="keyword">and</span> temp &gt; temperatures[stack[-<span class="number">1</span>]]:</span><br><span class="line">                prev_index = stack.pop()</span><br><span class="line">                result[prev_index] = i - prev_index</span><br><span class="line">            <span class="comment"># å°†å½“å‰ç´¢å¼•å‹å…¥æ ˆ</span></span><br><span class="line">            stack.append(i)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">dailyTemperatures</span>(<span class="params">temperatures</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="title class_">Array</span>(temperatures.<span class="property">length</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">const</span> stack = [];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†æ¸©åº¦æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; temperatures.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰æ¸©åº¦æ¯”æ ˆé¡¶çš„æ¸©åº¦é«˜</span></span><br><span class="line">            <span class="keyword">while</span> (stack.<span class="property">length</span> &amp;&amp; temperatures[i] &gt; temperatures[stack[stack.<span class="property">length</span> - <span class="number">1</span>]]) &#123;</span><br><span class="line">                <span class="keyword">const</span> prevIndex = stack.<span class="title function_">pop</span>();</span><br><span class="line">                result[prevIndex] = i - prevIndex;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°†å½“å‰ç´¢å¼•å‹å…¥æ ˆ</span></span><br><span class="line">            stack.<span class="title function_">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="String-å­—ç¬¦ä¸²"><a href="#String-å­—ç¬¦ä¸²" class="headerlink" title="String å­—ç¬¦ä¸²"></a><code>String</code> å­—ç¬¦ä¸²</h3><h4 id="å­—ç¬¦ä¸²è§£ç "><a href="#å­—ç¬¦ä¸²è§£ç " class="headerlink" title="å­—ç¬¦ä¸²è§£ç "></a>å­—ç¬¦ä¸²è§£ç </h4><blockquote><p><a href="https://leetcode.com/problems/decode-string/">Leetcode 394. Decode String</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªç¼–ç è¿‡çš„å­—ç¬¦ä¸²<code>s</code>ï¼Œå…¶ä¸­åŒ…å«åµŒå¥—çš„æ•°å­—å’Œæ‹¬å·ç»“æ„ï¼Œä¾‹å¦‚<code>3[a2[c]]</code>ï¼Œå…¶è§£ç è§„åˆ™ä¸º<ul><li>æ•°å­—è¡¨ç¤ºæ‹¬å·å†…å­—ç¬¦ä¸²çš„é‡å¤æ¬¡æ•°</li><li>è§£ç åè¾“å‡ºå®Œæ•´çš„å­—ç¬¦ä¸²</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;3[a]2[bc]&quot;</span><br><span class="line">Output: &quot;aaabcbc&quot;</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨æ ˆä¿å­˜å½“å‰çš„å­—ç¬¦ä¸²å’Œé‡å¤æ¬¡æ•°</span><br><span class="line">2. é‡åˆ° [ å°†å½“å‰å­—ç¬¦ä¸²å’Œæ¬¡æ•°å…¥æ ˆï¼Œæ¸…ç©ºå½“å‰çš„æ•°å­—å’Œå­—ç¬¦ä¸²</span><br><span class="line">3. é‡åˆ° ] å°†æ ˆä¸­çš„å­—ç¬¦ä¸²ä¸å½“å‰å­—ç¬¦ä¸²ç»„åˆï¼Œå¹¶é‡å¤æŒ‡å®šæ¬¡æ•°</span><br><span class="line">4. é‡åˆ°æ•°å­—æ—¶ï¼Œç´¯ç§¯æ•°å­—å€¼</span><br><span class="line">5. é‡åˆ°æ™®é€šå­—ç¬¦æ—¶ï¼Œå°†å…¶è¿½åŠ åˆ°å½“å‰å­—ç¬¦ä¸²</span><br><span class="line">6. æœ€åï¼Œæ ˆä¸­ä¿å­˜çš„å³ä¸ºè§£ç åçš„ç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decodeString</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        stack = [] <span class="comment"># æ ˆï¼Œç”¨äºä¿å­˜ (å½“å‰å­—ç¬¦ä¸², å½“å‰æ•°å­—)</span></span><br><span class="line">        curr_num = <span class="number">0</span> <span class="comment"># å½“å‰çš„é‡å¤æ¬¡æ•°</span></span><br><span class="line">        curr_str = <span class="string">&quot;&quot;</span> <span class="comment"># å½“å‰æ­£åœ¨æ„å»ºçš„å­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> c.isdigit():</span><br><span class="line">                <span class="comment"># æ„å»ºæ•°å­—</span></span><br><span class="line">                curr_num = curr_num * <span class="number">10</span> + <span class="built_in">int</span>(c)</span><br><span class="line">            <span class="keyword">elif</span> c == <span class="string">&quot;[&quot;</span>:</span><br><span class="line">                <span class="comment"># é‡åˆ°å·¦æ‹¬å·ï¼Œå°†å½“å‰å­—ç¬¦ä¸²å’Œæ•°å­—å…¥æ ˆ</span></span><br><span class="line">                stack.append((curr_str, curr_num))</span><br><span class="line">                curr_str = <span class="string">&quot;&quot;</span></span><br><span class="line">                curr_num = <span class="number">0</span></span><br><span class="line">            <span class="keyword">elif</span> c == <span class="string">&quot;]&quot;</span>:</span><br><span class="line">                <span class="comment"># é‡åˆ°å³æ‹¬å·ï¼Œå‡ºæ ˆå¹¶æ„é€ æ–°å­—ç¬¦ä¸²</span></span><br><span class="line">                prev_str, num = stack.pop()</span><br><span class="line">                curr_str = prev_str + num * curr_str</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># å­—æ¯è¿½åŠ åˆ°å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line">                curr_str += c</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> curr_str</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">decodeString</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> stack = [];</span><br><span class="line">        <span class="keyword">let</span> currNum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> currStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> c <span class="keyword">of</span> s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(c)) &#123;</span><br><span class="line">                <span class="comment">// æ„å»ºæ•°å­—</span></span><br><span class="line">                currNum = currNum * <span class="number">10</span> + <span class="built_in">parseInt</span>(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c === <span class="string">&quot;[&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// é‡åˆ°å·¦æ‹¬å·ï¼Œå°†å½“å‰å­—ç¬¦ä¸²å’Œæ•°å­—å…¥æ ˆ</span></span><br><span class="line">                stack.<span class="title function_">push</span>([currStr, currNum]);</span><br><span class="line">                currStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                currNum = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c === <span class="string">&quot;]&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// é‡åˆ°å³æ‹¬å·ï¼Œå‡ºæ ˆå¹¶æ„é€ æ–°å­—ç¬¦ä¸²</span></span><br><span class="line">                <span class="keyword">const</span> [prevStr, num] = stack.<span class="title function_">pop</span>();</span><br><span class="line">                currStr = prevStr + currStr.<span class="title function_">repeat</span>(num);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å­—æ¯è¿½åŠ åˆ°å½“å‰å­—ç¬¦ä¸²</span></span><br><span class="line">                currStr += c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> currStr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€é•¿æ— é‡å¤å­ä¸²"><a href="#æœ€é•¿æ— é‡å¤å­ä¸²" class="headerlink" title="æœ€é•¿æ— é‡å¤å­ä¸²"></a>æœ€é•¿æ— é‡å¤å­ä¸²</h4><blockquote><p><a href="https://leetcode.com/problems/longest-substring-without-repeating-characters/">Leetcode 3. Longest Substring Without Repeating Characters</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>ï¼Œæ‰¾å‡ºå…¶ä¸­ä¸å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;abcabcbb&quot;</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ»‘åŠ¨çª—å£</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ `left` å’Œ `right` ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œçª—å£å†…çš„å­—ç¬¦ä¸é‡å¤</span><br><span class="line">2. ç”¨ä¸€ä¸ª `set` å­˜å‚¨å½“å‰çª—å£å†…çš„å­—ç¬¦</span><br><span class="line">3. æ¯æ¬¡ç§»åŠ¨å³æŒ‡é’ˆï¼Œå°†å­—ç¬¦å°è¯•åŠ å…¥çª—å£ï¼š</span><br><span class="line">   - å¦‚æœå­—ç¬¦å·²å­˜åœ¨ï¼Œç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç›´åˆ°çª—å£ä¸­æ— é‡å¤å­—ç¬¦</span><br><span class="line">4. æ›´æ–°å½“å‰çª—å£çš„æœ€å¤§é•¿åº¦</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lengthOfLongestSubstring</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        char_set = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> right <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">            <span class="comment"># å¦‚æœå­—ç¬¦é‡å¤ï¼Œç§»åŠ¨å·¦æŒ‡é’ˆç›´åˆ°çª—å£æ— é‡å¤å­—ç¬¦</span></span><br><span class="line">            <span class="keyword">while</span> s[right] <span class="keyword">in</span> char_set:</span><br><span class="line">                char_set.remove(s[left])</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># å°†å½“å‰å­—ç¬¦åŠ å…¥çª—å£</span></span><br><span class="line">            char_set.add(s[right])</span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€å¤§é•¿åº¦</span></span><br><span class="line">            result = <span class="built_in">max</span>(result, right - left + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">lengthOfLongestSubstring</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> charSet = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> right = <span class="number">0</span>; right &lt; s.<span class="property">length</span>; right++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå­—ç¬¦é‡å¤ï¼Œç§»åŠ¨å·¦æŒ‡é’ˆç›´åˆ°çª—å£æ— é‡å¤å­—ç¬¦</span></span><br><span class="line">            <span class="keyword">while</span> (charSet.<span class="title function_">has</span>(s[right])) &#123;</span><br><span class="line">                charSet.<span class="title function_">delete</span>(s[left]);</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å°†å½“å‰å­—ç¬¦åŠ å…¥çª—å£</span></span><br><span class="line">            charSet.<span class="title function_">add</span>(s[right]);</span><br><span class="line">            <span class="comment">// æ›´æ–°æœ€å¤§é•¿åº¦</span></span><br><span class="line">            result = <span class="title class_">Math</span>.<span class="title function_">max</span>(result, right - left + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ‹¬å·åŒ¹é…"><a href="#æ‹¬å·åŒ¹é…" class="headerlink" title="æ‹¬å·åŒ¹é…"></a>æ‹¬å·åŒ¹é…</h4><blockquote><p><a href="https://leetcode.com/problems/valid-parentheses/">Leetcode 20. Valid Parentheses</a></p></blockquote><ul><li>é¢˜ç›®: éªŒè¯ä¸€ä¸ªåªåŒ…å«æ‹¬å·çš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ<ul><li>æ‰€æœ‰çš„å·¦æ‹¬å·å¿…é¡»æœ‰å¯¹åº”çš„å³æ‹¬å·</li><li>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆ</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;()[]&#123;&#125;&quot;</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ ˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç”¨ä¸€ä¸ªæ ˆæ¥ä¿å­˜å·¦æ‹¬å·</span><br><span class="line">2. éå†å­—ç¬¦ä¸²</span><br><span class="line">    - é‡åˆ°å·¦æ‹¬å·ï¼Œå°±å‹å…¥æ ˆ</span><br><span class="line">    - é‡åˆ°å³æ‹¬å·ï¼Œæ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯å¯¹åº”çš„å·¦æ‹¬å·</span><br><span class="line">        - å¦‚æœåŒ¹é…ï¼Œå¼¹å‡ºæ ˆé¡¶</span><br><span class="line">        - å¦‚æœä¸åŒ¹é…æˆ–æ ˆä¸ºç©ºï¼Œè¿”å› False</span><br><span class="line">3. éå†ç»“æŸåï¼Œå¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ‹¬å·æœ‰æ•ˆ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isValid</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="comment"># å®šä¹‰å³æ‹¬å·åˆ°å·¦æ‹¬å·çš„æ˜ å°„</span></span><br><span class="line">        char_map = &#123;<span class="string">&quot;)&quot;</span>: <span class="string">&quot;(&quot;</span>, <span class="string">&quot;]&quot;</span>: <span class="string">&quot;[&quot;</span>, <span class="string">&quot;&#125;&quot;</span>: <span class="string">&quot;&#123;&quot;</span>&#125;</span><br><span class="line">        stack = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">            <span class="comment"># å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œå‹å…¥æ ˆä¸­</span></span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> char_map:</span><br><span class="line">                stack.append(c)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¦‚æœæ ˆä¸ºç©ºæˆ–è€…æ ˆé¡¶å…ƒç´ ä¸åŒ¹é…ï¼Œè¿”å› False</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> stack <span class="keyword">or</span> stack[-<span class="number">1</span>] != char_map[c]:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åŒ¹é…æˆåŠŸï¼Œå¼¹å‡ºæ ˆé¡¶</span></span><br><span class="line">            stack.pop()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> stack</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">isValid</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> charMap = &#123; <span class="string">&quot;)&quot;</span>: <span class="string">&quot;(&quot;</span>, <span class="string">&quot;]&quot;</span>: <span class="string">&quot;[&quot;</span>, <span class="string">&quot;&#125;&quot;</span>: <span class="string">&quot;&#123;&quot;</span> &#125;;</span><br><span class="line">        <span class="keyword">const</span> stack = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> c <span class="keyword">of</span> s) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œå‹å…¥æ ˆä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (!(c <span class="keyword">in</span> charMap)) &#123;</span><br><span class="line">                stack.<span class="title function_">push</span>(c);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆä¸ºç©ºæˆ–è€…æ ˆé¡¶å…ƒç´ ä¸åŒ¹é…ï¼Œè¿”å› false</span></span><br><span class="line">            <span class="keyword">if</span> (!stack.<span class="property">length</span> || stack[stack.<span class="property">length</span> - <span class="number">1</span>] !== charMap[c])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åŒ¹é…æˆåŠŸï¼Œå¼¹å‡ºæ ˆé¡¶</span></span><br><span class="line">            stack.<span class="title function_">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stack.<span class="property">length</span> === <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ç”Ÿæˆæ‹¬å·"><a href="#ç”Ÿæˆæ‹¬å·" class="headerlink" title="ç”Ÿæˆæ‹¬å·"></a>ç”Ÿæˆæ‹¬å·</h4><blockquote><p><a href="https://leetcode.com/problems/generate-parentheses/">Leetcode 22. Generate Parentheses</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•°å­—<code>n</code>ï¼Œç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆæ‹¬å·ç»„åˆ<ul><li>å·¦æ‹¬å·æ•°é‡ç­‰äºå³æ‹¬å·æ•°é‡ï¼Œå¹¶ä¸”ä»»æ„ä½ç½®å³æ‹¬å·çš„æ•°é‡ä¸è¶…è¿‡å·¦æ‹¬å·</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: n = 3</span><br><span class="line">Output: [&quot;((()))&quot;,&quot;(()())&quot;,&quot;(())()&quot;,&quot;()(())&quot;,&quot;()()()&quot;]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å›æº¯æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨é€’å½’æ¥ç”Ÿæˆæ‹¬å·ç»„åˆ</span><br><span class="line">2. æ¯æ¬¡é€’å½’æ—¶ï¼Œç»´æŠ¤å½“å‰æ‹¬å·å­—ç¬¦ä¸² s å’Œå·¦å³æ‹¬å·çš„æ•°é‡</span><br><span class="line">    - å¦‚æœå·¦æ‹¬å·çš„æ•°é‡å°äº nï¼Œå¯ä»¥æ·»åŠ å·¦æ‹¬å·</span><br><span class="line">    - å¦‚æœå³æ‹¬å·çš„æ•°é‡å°äºå·¦æ‹¬å·ï¼Œæ·»åŠ å³æ‹¬å·</span><br><span class="line">3. å½“å­—ç¬¦ä¸²é•¿åº¦ç­‰äº 2 * n æ—¶ï¼Œæ·»åŠ åˆ°ç»“æœä¸­</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generateParenthesis</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">s, left, right</span>):</span><br><span class="line">            <span class="comment"># å¦‚æœé•¿åº¦è¾¾åˆ° 2 * nï¼Œè®°å½•ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">2</span> * n:</span><br><span class="line">                result.append(s)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ·»åŠ å·¦æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span> left &lt; n:</span><br><span class="line">                backtrack(s + <span class="string">&quot;(&quot;</span>, left + <span class="number">1</span>, right)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ å³æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span> right &lt; left:</span><br><span class="line">                backtrack(s + <span class="string">&quot;)&quot;</span>, left, right + <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        backtrack(<span class="string">&quot;&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">generateParenthesis</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">backtrack</span>(<span class="params">s, left, right</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœé•¿åº¦è¾¾åˆ° 2 * nï¼Œè®°å½•ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> (s.<span class="property">length</span> === <span class="number">2</span> * n) &#123;</span><br><span class="line">                result.<span class="title function_">push</span>(s);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ·»åŠ å·¦æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span> (left &lt; n) <span class="title function_">backtrack</span>(s + <span class="string">&quot;(&quot;</span>, left + <span class="number">1</span>, right);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ·»åŠ å³æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span> (right &lt; left) <span class="title function_">backtrack</span>(s + <span class="string">&quot;)&quot;</span>, left, right + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">backtrack</span>(<span class="string">&quot;&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ¯”è¾ƒç‰ˆæœ¬å·"><a href="#æ¯”è¾ƒç‰ˆæœ¬å·" class="headerlink" title="æ¯”è¾ƒç‰ˆæœ¬å·"></a>æ¯”è¾ƒç‰ˆæœ¬å·</h4><blockquote><p><a href="https://leetcode.com/problems/compare-version-numbers/">Leetcode 165. Compare Version Numbers</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸¤ä¸ªç‰ˆæœ¬å·<code>version1</code>å’Œ<code>version2</code>ï¼Œæ¯”è¾ƒå®ƒä»¬çš„å¤§å°<ul><li>å¦‚æœ<code>version1 &gt; version2</code>è¿”å›<code>1</code></li><li>å¦‚æœ<code>version1 &lt; version2</code>è¿”å›<code>-1</code></li><li>å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œè¿”å›<code>0</code></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: version1 = &quot;1.2&quot;, version2 = &quot;1.10&quot;</span><br><span class="line">Output: -1</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åˆ†å‰²å’Œè¡¥é½</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨ç‚¹å·åˆ†å‰²ç‰ˆæœ¬å·ï¼Œå°†å…¶è½¬æ¢ä¸ºæ•´æ•°åˆ—è¡¨</span><br><span class="line">2. æ‰¾åˆ°ä¸¤ä¸ªç‰ˆæœ¬å·çš„æœ€å¤§é•¿åº¦ï¼Œå°†è¾ƒçŸ­çš„ç‰ˆæœ¬å·ç”¨ 0 è¡¥é½</span><br><span class="line">3. ä»å·¦åˆ°å³é€ä¸ªæ¯”è¾ƒå¯¹åº”çš„ç‰ˆæœ¬å·éƒ¨åˆ†ï¼Œè¿”å›ç»“æœ</span><br><span class="line">4. å¦‚æœéå†ç»“æŸåä»ç„¶æ²¡æœ‰ç»“æœï¼Œåˆ™ä¸¤ä¸ªç‰ˆæœ¬å·ç›¸ç­‰</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compareVersion</span>(<span class="params">self, version1: <span class="built_in">str</span>, version2: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># å°†ç‰ˆæœ¬å·åˆ†å‰²ä¸ºæ•´æ•°åˆ—è¡¨</span></span><br><span class="line">        v1_parts = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, version1.split(<span class="string">&quot;.&quot;</span>)))</span><br><span class="line">        v2_parts = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, version2.split(<span class="string">&quot;.&quot;</span>)))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”¨ 0 è¡¥é½è¾ƒçŸ­çš„ç‰ˆæœ¬å·éƒ¨åˆ†</span></span><br><span class="line">        max_len = <span class="built_in">max</span>(<span class="built_in">len</span>(v1_parts), <span class="built_in">len</span>(v2_parts))</span><br><span class="line">        v1_parts += [<span class="number">0</span>] * (max_len - <span class="built_in">len</span>(v1_parts))</span><br><span class="line">        v2_parts += [<span class="number">0</span>] * (max_len - <span class="built_in">len</span>(v2_parts))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¯”è¾ƒæ¯ä¸€éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(max_len):</span><br><span class="line">            <span class="keyword">if</span> v1_parts[i] &gt; v2_parts[i]:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> v1_parts[i] &lt; v2_parts[<span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœéå†ç»“æŸä»æœªåˆ†å‡ºå¤§å°ï¼Œåˆ™ç‰ˆæœ¬å·ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">compareVersion</span>(<span class="params">version1, version2</span>) &#123;</span><br><span class="line">        <span class="comment">// å°†ç‰ˆæœ¬å·åˆ†å‰²ä¸ºæ•´æ•°æ•°ç»„</span></span><br><span class="line">        <span class="keyword">const</span> v1Parts = version1.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">        <span class="keyword">const</span> v2Parts = version2.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨ 0 è¡¥é½è¾ƒçŸ­çš„ç‰ˆæœ¬å·éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">const</span> maxLen = <span class="title class_">Math</span>.<span class="title function_">max</span>(v1Parts.<span class="property">length</span>, v2Parts.<span class="property">length</span>);</span><br><span class="line">        <span class="keyword">while</span> (v1Parts.<span class="property">length</span> &lt; maxLen) v1Parts.<span class="title function_">push</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (v2Parts.<span class="property">length</span> &lt; maxLen) v2Parts.<span class="title function_">push</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¯”è¾ƒæ¯ä¸€éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxLen; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v1Parts[i] &gt; v2Parts[i]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (v1Parts[i] &lt; v2Parts[i]) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœéå†ç»“æŸä»æœªåˆ†å‡ºå¤§å°ï¼Œåˆ™ç‰ˆæœ¬å·ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ç»å…¸è®¡ç®—å™¨-æ— ä¹˜é™¤"><a href="#ç»å…¸è®¡ç®—å™¨-æ— ä¹˜é™¤" class="headerlink" title="ç»å…¸è®¡ç®—å™¨ (æ— ä¹˜é™¤)"></a>ç»å…¸è®¡ç®—å™¨ (æ— ä¹˜é™¤)</h4><blockquote><p><a href="https://leetcode.com/problems/basic-calculator/">Leetcode 224. Basic Calculator</a></p></blockquote><ul><li>é¢˜ç›®: å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ç”±æ­£æ•´æ•°ã€<code>+</code>ã€<code>-</code>å’Œæ‹¬å·ç»„æˆçš„æ•°å­¦è¡¨è¾¾å¼çš„å€¼ã€‚è¡¨è¾¾å¼ä¸­å¯èƒ½åŒ…å«ç©ºæ ¼ï¼Œç¡®ä¿è¾“å…¥åˆæ³•ä¸”ç»“æœä¸ä¼šæº¢å‡º</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;(1+(4+5+2)-3)+(6+8)&quot;</span><br><span class="line">Output: 23</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ ˆ + æ¨¡æ‹Ÿ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ä¸€ä¸ªæ ˆï¼Œç”¨äºå­˜å‚¨è¿ç®—ç»“æœå’Œç¬¦å·</span><br><span class="line">2. éå†å­—ç¬¦ä¸²:</span><br><span class="line">   - å¦‚æœæ˜¯æ•°å­—ï¼Œç´¯åŠ å½“å‰æ•°å­—</span><br><span class="line">   - å¦‚æœæ˜¯ `+` æˆ– `-`ï¼Œæ›´æ–°å½“å‰çš„ç¬¦å·ï¼Œå¹¶å°†ç´¯åŠ çš„æ•°å­—åŠ åˆ°ç»“æœä¸­</span><br><span class="line">   - å¦‚æœæ˜¯ `(`ï¼Œå°†å½“å‰ç»“æœå’Œç¬¦å·å‹æ ˆï¼Œå¹¶é‡ç½®ç»“æœå’Œç¬¦å·</span><br><span class="line">   - å¦‚æœæ˜¯ `)`ï¼Œå°†æ ˆé¡¶çš„ç»“æœå’Œç¬¦å·å¼¹å‡ºï¼Œå¹¶ä¸å½“å‰ç»“æœç›¸åŠ </span><br><span class="line">3. è¿”å›æœ€ç»ˆè®¡ç®—ç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">calculate</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        stack = []</span><br><span class="line">        num = <span class="number">0</span></span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        sign = <span class="number">1</span> <span class="comment"># åˆå§‹ç¬¦å·ä¸ºæ­£å·</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> char <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> char.isdigit():</span><br><span class="line">                <span class="comment"># å¦‚æœæ˜¯æ•°å­—ï¼Œæ›´æ–°å½“å‰æ•°å­—</span></span><br><span class="line">                num = num * <span class="number">10</span> + <span class="built_in">int</span>(char)</span><br><span class="line">            <span class="keyword">elif</span> char <span class="keyword">in</span> <span class="string">&quot;+-&quot;</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœæ˜¯åŠ å·æˆ–å‡å·ï¼Œå…ˆæ›´æ–°å½“å‰ç»“æœ</span></span><br><span class="line">                result += sign * num</span><br><span class="line">                num = <span class="number">0</span></span><br><span class="line">                sign = <span class="number">1</span> <span class="keyword">if</span> char == <span class="string">&quot;+&quot;</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> char == <span class="string">&quot;(&quot;</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œä¿å­˜å½“å‰ç»“æœå’Œç¬¦å·åˆ°æ ˆä¸­</span></span><br><span class="line">                stack.append(result)</span><br><span class="line">                stack.append(sign)</span><br><span class="line">                result = <span class="number">0</span></span><br><span class="line">                sign = <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> char == <span class="string">&quot;)&quot;</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœæ˜¯å³æ‹¬å·ï¼Œè®¡ç®—æ‹¬å·å†…çš„ç»“æœ</span></span><br><span class="line">                result += sign * num</span><br><span class="line">                num = <span class="number">0</span></span><br><span class="line">                result *= stack.pop() <span class="comment"># å¼¹å‡ºç¬¦å·å¹¶åº”ç”¨</span></span><br><span class="line">                result += stack.pop() <span class="comment"># åŠ ä¸Šä¹‹å‰çš„ç»“æœ</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> result + sign * num</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">calculate</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> stack = [];</span><br><span class="line">        <span class="keyword">let</span> num = <span class="number">0</span>, result = <span class="number">0</span>, sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> char <span class="keyword">of</span> s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(char) &amp;&amp; char !== <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯æ•°å­—ï¼Œæ›´æ–°å½“å‰æ•°å­—</span></span><br><span class="line">                num = num * <span class="number">10</span> + <span class="built_in">parseInt</span>(char);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (char === <span class="string">&quot;+&quot;</span> || char === <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯åŠ å·æˆ–å‡å·ï¼Œå…ˆæ›´æ–°å½“å‰ç»“æœ</span></span><br><span class="line">                result += sign * num;</span><br><span class="line">                num = <span class="number">0</span>;</span><br><span class="line">                sign = char === <span class="string">&quot;+&quot;</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (char === <span class="string">&quot;(&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œä¿å­˜å½“å‰ç»“æœå’Œç¬¦å·åˆ°æ ˆä¸­</span></span><br><span class="line">                stack.<span class="title function_">push</span>(result);</span><br><span class="line">                stack.<span class="title function_">push</span>(sign);</span><br><span class="line">                result = <span class="number">0</span>;</span><br><span class="line">                sign = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (char === <span class="string">&quot;)&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å³æ‹¬å·ï¼Œè®¡ç®—æ‹¬å·å†…çš„ç»“æœ</span></span><br><span class="line">                result += sign * num;</span><br><span class="line">                num = <span class="number">0</span>;</span><br><span class="line">                result *= stack.<span class="title function_">pop</span>(); <span class="comment">// å¼¹å‡ºç¬¦å·å¹¶åº”ç”¨</span></span><br><span class="line">                result += stack.<span class="title function_">pop</span>(); <span class="comment">// åŠ ä¸Šä¹‹å‰çš„ç»“æœ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result + sign * num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ç»å…¸è®¡ç®—å™¨-æœ‰ä¹˜é™¤"><a href="#ç»å…¸è®¡ç®—å™¨-æœ‰ä¹˜é™¤" class="headerlink" title="ç»å…¸è®¡ç®—å™¨ (æœ‰ä¹˜é™¤)"></a>ç»å…¸è®¡ç®—å™¨ (æœ‰ä¹˜é™¤)</h4><blockquote><p><a href="https://leetcode.com/problems/basic-calculator-ii/">Leetcode 227. Basic Calculator II</a></p></blockquote><ul><li>é¢˜ç›®: å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ã€‚è¡¨è¾¾å¼ä»…åŒ…å«éè´Ÿæ•´æ•°ã€<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>è¿ç®—ç¬¦ä»¥åŠç©ºæ ¼</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;3+2*2&quot;</span><br><span class="line">Output: 7</span><br><span class="line">Explanation: 3 + (2 * 2) = 7</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ ˆ + æ¨¡æ‹Ÿ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨æ ˆæ¥ä¿å­˜å½“å‰çš„è®¡ç®—ç»“æœ</span><br><span class="line">2. éå†å­—ç¬¦ä¸²ï¼Œå¤„ç†æ•°å­—ã€æ“ä½œç¬¦å’Œç©ºæ ¼</span><br><span class="line">   - å¦‚æœæ˜¯æ•°å­—ï¼Œç´¯åŠ æ„æˆå®Œæ•´æ•°å­—</span><br><span class="line">   - å¦‚æœæ˜¯æ“ä½œç¬¦æˆ–åˆ°è¾¾å­—ç¬¦ä¸²æœ«å°¾ï¼Œæ ¹æ®å‰ä¸€ä¸ªæ“ä½œç¬¦æ‰§è¡Œè®¡ç®—</span><br><span class="line">     - `+`ï¼šå°†å½“å‰æ•°å­—å‹å…¥æ ˆ</span><br><span class="line">     - `-`ï¼šå°†å½“å‰æ•°å­—å–ååå‹å…¥æ ˆ</span><br><span class="line">     - `*`ï¼šå¼¹å‡ºæ ˆé¡¶æ•°å­—ï¼Œä¸å½“å‰æ•°å­—ç›¸ä¹˜åå‹å…¥æ ˆ</span><br><span class="line">     - `/`ï¼šå¼¹å‡ºæ ˆé¡¶æ•°å­—ï¼Œæ‰§è¡Œæ•´æ•°é™¤æ³•åå‹å…¥æ ˆ</span><br><span class="line">3. éå†ç»“æŸåï¼Œæ ˆä¸­çš„æ‰€æœ‰å…ƒç´ æ±‚å’Œå³ä¸ºæœ€ç»ˆç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">calculate</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        stack = []</span><br><span class="line">        num = <span class="number">0</span></span><br><span class="line">        op = <span class="string">&#x27;+&#x27;</span> <span class="comment"># åˆå§‹æ“ä½œç¬¦ä¸º &#x27;+&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="built_in">enumerate</span>(s):</span><br><span class="line">            <span class="keyword">if</span> c.isdigit():</span><br><span class="line">                num = num * <span class="number">10</span> + <span class="built_in">int</span>(c) <span class="comment"># ç´¯åŠ æ•°å­—</span></span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> <span class="string">&quot;+-*/&quot;</span> <span class="keyword">or</span> i == <span class="built_in">len</span>(s) - <span class="number">1</span>: <span class="comment"># é‡åˆ°æ“ä½œç¬¦æˆ–å­—ç¬¦ä¸²æœ«å°¾</span></span><br><span class="line">                <span class="keyword">if</span> op == <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">                    stack.append(num)</span><br><span class="line">                <span class="keyword">elif</span> op == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                    stack.append(-num)</span><br><span class="line">                <span class="keyword">elif</span> op == <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">                    stack.append(stack.pop() * num)</span><br><span class="line">                <span class="keyword">elif</span> op == <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">                    stack.append(<span class="built_in">int</span>(stack.pop() / num))</span><br><span class="line">                op = c <span class="comment"># æ›´æ–°æ“ä½œç¬¦</span></span><br><span class="line">                num = <span class="number">0</span> <span class="comment"># é‡ç½®å½“å‰æ•°å­—</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(stack)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">calculate</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> stack = [];</span><br><span class="line">        <span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> op = <span class="string">&#x27;+&#x27;</span>; <span class="comment">// åˆå§‹æ“ä½œç¬¦ä¸º &#x27;+&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> c = s[i];</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(c) &amp;&amp; c !== <span class="string">&#x27; &#x27;</span>) num = num * <span class="number">10</span> + <span class="built_in">parseInt</span>(c); <span class="comment">// ç´¯åŠ æ•°å­—</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;+-*/&quot;</span>.<span class="title function_">includes</span>(c) || i === s.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (op === <span class="string">&#x27;+&#x27;</span>) stack.<span class="title function_">push</span>(num);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (op === <span class="string">&#x27;-&#x27;</span>) stack.<span class="title function_">push</span>(-num);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (op === <span class="string">&#x27;*&#x27;</span>) stack.<span class="title function_">push</span>(stack.<span class="title function_">pop</span>() * num);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (op === <span class="string">&#x27;/&#x27;</span>) stack.<span class="title function_">push</span>(<span class="title class_">Math</span>.<span class="title function_">trunc</span>(stack.<span class="title function_">pop</span>() / num));</span><br><span class="line"></span><br><span class="line">                op = c; <span class="comment">// æ›´æ–°æ“ä½œç¬¦</span></span><br><span class="line">                num = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stack.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å›æ–‡å­ä¸²ä¸ªæ•°"><a href="#å›æ–‡å­ä¸²ä¸ªæ•°" class="headerlink" title="å›æ–‡å­ä¸²ä¸ªæ•°"></a>å›æ–‡å­ä¸²ä¸ªæ•°</h4><blockquote><p><a href="https://leetcode.com/problems/palindromic-substrings/">Leetcode 647. Palindromic Substrings</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>ï¼Œè®¡ç®—å…¶ä¸­åŒ…å«å¤šå°‘ä¸ªå›æ–‡å­ä¸²</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;abc&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: Three palindromic substrings are &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;</span><br><span class="line"></span><br><span class="line">Input: s = &quot;aaa&quot;</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: Six palindromic substrings are &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;aa&quot;, &quot;aa&quot;, and &quot;aaa&quot;</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: ä¸­å¿ƒæ‰©å±•æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä¸­å¿ƒæ‰©å±•æ³•</span><br><span class="line">   - æ¯ä¸ªå­—ç¬¦å¯ä»¥ä½œä¸ºå¥‡æ•°é•¿åº¦å›æ–‡çš„ä¸­å¿ƒ</span><br><span class="line">   - æ¯å¯¹ç›¸é‚»å­—ç¬¦å¯ä»¥ä½œä¸ºå¶æ•°é•¿åº¦å›æ–‡çš„ä¸­å¿ƒ</span><br><span class="line">   - ä»ä¸­å¿ƒå‘ä¸¤è¾¹æ‰©å±•ï¼Œåˆ¤æ–­ä¸¤è¾¹å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼ŒåŒæ—¶ç»Ÿè®¡å›æ–‡å­ä¸²çš„æ•°é‡</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countSubstrings</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">expand_around_center</span>(<span class="params">left, right</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> count</span><br><span class="line">            <span class="keyword">while</span> left &gt;= <span class="number">0</span> <span class="keyword">and</span> right &lt; n <span class="keyword">and</span> s[left] == s[right]:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                left -= <span class="number">1</span></span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="comment"># å¥‡æ•°é•¿åº¦çš„å›æ–‡</span></span><br><span class="line">            expand_around_center(i, i)</span><br><span class="line">            <span class="comment"># å¶æ•°é•¿åº¦çš„å›æ–‡</span></span><br><span class="line">            expand_around_center(i, i + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">countSubstrings</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> n = s.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">expandAroundCenter</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; right &lt; n &amp;&amp; s[left] === s[right]) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                left--;</span><br><span class="line">                right++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// å¥‡æ•°é•¿åº¦çš„å›æ–‡</span></span><br><span class="line">            <span class="title function_">expandAroundCenter</span>(i, i);</span><br><span class="line">            <span class="comment">// å¶æ•°é•¿åº¦çš„å›æ–‡</span></span><br><span class="line">            <span class="title function_">expandAroundCenter</span>(i, i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€é•¿å›æ–‡å­ä¸²"><a href="#æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="æœ€é•¿å›æ–‡å­ä¸²"></a>æœ€é•¿å›æ–‡å­ä¸²</h4><blockquote><p><a href="https://leetcode.com/problems/longest-palindromic-substring/">Leetcode 5. Longest Palindromic Substring</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: s = &quot;babad&quot;</span><br><span class="line">Output: &quot;bab&quot;</span><br><span class="line">Explanation: &quot;aba&quot; is also a valid answer</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: ä¸­å¿ƒæ‰©å±•æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å›æ–‡çš„ä¸­å¿ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´çš„é—´éš”</span><br><span class="line">2. éå†å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦å’Œæ¯ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´éƒ½ä½œä¸ºå›æ–‡ä¸­å¿ƒè¿›è¡Œæ‰©å±•</span><br><span class="line">3. åœ¨æ‰©å±•è¿‡ç¨‹ä¸­ï¼Œæ›´æ–°æœ€é•¿çš„å›æ–‡å­ä¸²çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦</span><br><span class="line">4. æ—¶é—´å¤æ‚åº¦ O(n^2)</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestPalindrome</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">expand_around_center</span>(<span class="params">left, right</span>):</span><br><span class="line">            <span class="comment"># ä»ä¸­å¿ƒæ‰©å±•ï¼Œå¯»æ‰¾æœ€é•¿å›æ–‡</span></span><br><span class="line">            <span class="keyword">while</span> left &gt;= <span class="number">0</span> <span class="keyword">and</span> right &lt; <span class="built_in">len</span>(s) <span class="keyword">and</span> s[left] == s[right]:</span><br><span class="line">                left -= <span class="number">1</span></span><br><span class="line">                right += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> s[left + <span class="number">1</span>:right]</span><br><span class="line"></span><br><span class="line">        longest = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">            <span class="comment"># å¥‡æ•°é•¿åº¦å›æ–‡</span></span><br><span class="line">            odd_palindrome = expand_around_center(i, i)</span><br><span class="line">            <span class="comment"># å¶æ•°é•¿åº¦å›æ–‡</span></span><br><span class="line">            even_palindrome = expand_around_center(i, i + <span class="number">1</span>)</span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€é•¿å›æ–‡å­ä¸²</span></span><br><span class="line">            longest = <span class="built_in">max</span>(longest, odd_palindrome, even_palindrome, key=<span class="built_in">len</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> longest</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">longestPalindrome</span>(<span class="params">s</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">expandAroundCenter</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">            <span class="comment">// ä»ä¸­å¿ƒæ‰©å±•ï¼Œå¯»æ‰¾æœ€é•¿å›æ–‡</span></span><br><span class="line">            <span class="keyword">while</span> (left &gt;= <span class="number">0</span> &amp;&amp; right &lt; s.<span class="property">length</span> &amp;&amp; s[left] === s[right]) &#123;</span><br><span class="line">                left--;</span><br><span class="line">                right++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> s.<span class="title function_">substring</span>(left + <span class="number">1</span>, right);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> longest = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å¥‡æ•°é•¿åº¦å›æ–‡</span></span><br><span class="line">            <span class="keyword">const</span> oddPalindrome = <span class="title function_">expandAroundCenter</span>(i, i);</span><br><span class="line">            <span class="comment">// å¶æ•°é•¿åº¦å›æ–‡</span></span><br><span class="line">            <span class="keyword">const</span> evenPalindrome = <span class="title function_">expandAroundCenter</span>(i, i + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// æ›´æ–°æœ€é•¿å›æ–‡å­ä¸²</span></span><br><span class="line">            <span class="keyword">if</span> (oddPalindrome.<span class="property">length</span> &gt; longest.<span class="property">length</span>) longest = oddPalindrome;</span><br><span class="line">            <span class="keyword">if</span> (evenPalindrome.<span class="property">length</span> &gt; longest.<span class="property">length</span>) longest = evenPalindrome;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> longest;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å¤§æ•°ç›¸åŠ "><a href="#å¤§æ•°ç›¸åŠ " class="headerlink" title="å¤§æ•°ç›¸åŠ "></a>å¤§æ•°ç›¸åŠ </h4><blockquote><p><a href="https://leetcode.com/problems/add-strings/">Leetcode 415. Add Strings</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸¤ä¸ªéè´Ÿæ•´æ•°<code>num1</code>å’Œ<code>num2</code>ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¡¨ç¤ºï¼Œè¿”å›å®ƒä»¬çš„å’Œï¼Œç»“æœä¹Ÿç”¨å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä¸èƒ½ç›´æ¥ä½¿ç”¨å¤§æ•´æ•°åº“æˆ–å°†è¾“å…¥ç›´æ¥è½¬æ¢ä¸ºæ•´æ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: num1 = &quot;11&quot;, num2 = &quot;123&quot;</span><br><span class="line">Output: &quot;134&quot;</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: æ¨¡æ‹Ÿé€ä½ç›¸åŠ </li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹ï¼Œé€ä½ç›¸åŠ ï¼Œè®°å½•è¿›ä½</span><br><span class="line">2. å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²è¾ƒçŸ­ï¼Œç”¨é›¶è¡¥é½</span><br><span class="line">3. å°†æ¯ä½çš„è®¡ç®—ç»“æœæ’å…¥åˆ°æœ€ç»ˆç»“æœçš„å‰é¢</span><br><span class="line">4. å¦‚æœæœ€ç»ˆè¿˜æœ‰è¿›ä½ï¼Œè¿½åŠ åˆ°ç»“æœ</span><br><span class="line">5. è¿”å›æ‹¼æ¥çš„ç»“æœå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addStrings</span>(<span class="params">self, num1: <span class="built_in">str</span>, num2: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–æŒ‡é’ˆå’Œå˜é‡</span></span><br><span class="line">        i, j = <span class="built_in">len</span>(num1) - <span class="number">1</span>, <span class="built_in">len</span>(num2) - <span class="number">1</span></span><br><span class="line">        carry = <span class="number">0</span></span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä»å³å‘å·¦é€ä½ç›¸åŠ </span></span><br><span class="line">        <span class="keyword">while</span> i &gt;= <span class="number">0</span> <span class="keyword">or</span> j &gt;= <span class="number">0</span> <span class="keyword">or</span> carry:</span><br><span class="line">            n1 = <span class="built_in">int</span>(num1[i]) <span class="keyword">if</span> i &gt;= <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">            n2 = <span class="built_in">int</span>(num2[j]) <span class="keyword">if</span> j &gt;= <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">            total = n1 + n2 + carry</span><br><span class="line"></span><br><span class="line">            carry  = total // <span class="number">10</span> <span class="comment"># è®¡ç®—è¿›ä½</span></span><br><span class="line">            result.append(<span class="built_in">str</span>(total % <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">            i -= <span class="number">1</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(result[::-<span class="number">1</span>]) <span class="comment"># ç¿»è½¬å¹¶æ‹¼æ¥ç»“æœ</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">addStrings</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> i = num1.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> j = num2.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">let</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»å³å‘å·¦é€ä½ç›¸åŠ </span></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span> || carry) &#123;</span><br><span class="line">            <span class="keyword">const</span> n1 = i &gt;= <span class="number">0</span> ? <span class="built_in">parseInt</span>(num1[i]) : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">const</span> n2 = j &gt;= <span class="number">0</span> ? <span class="built_in">parseInt</span>(num2[j]) : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">const</span> total = n1 + n2 + carry;</span><br><span class="line"></span><br><span class="line">            carry = <span class="title class_">Math</span>.<span class="title function_">floor</span>(total / <span class="number">10</span>); <span class="comment">// è®¡ç®—è¿›ä½</span></span><br><span class="line">            result.<span class="title function_">push</span>(total % <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">            i--;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result.<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>); <span class="comment">// ç¿»è½¬å¹¶æ‹¼æ¥ç»“æœ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Backtrack-å›æº¯"><a href="#Backtrack-å›æº¯" class="headerlink" title="Backtrack å›æº¯"></a><code>Backtrack</code> å›æº¯</h3><h4 id="å…¨æ’åˆ—ï¼ˆæ— é‡å¤å…ƒç´ ï¼‰"><a href="#å…¨æ’åˆ—ï¼ˆæ— é‡å¤å…ƒç´ ï¼‰" class="headerlink" title="å…¨æ’åˆ—ï¼ˆæ— é‡å¤å…ƒç´ ï¼‰"></a>å…¨æ’åˆ—ï¼ˆæ— é‡å¤å…ƒç´ ï¼‰</h4><blockquote><p><a href="https://leetcode.com/problems/permutations/">Leetcode 46. Permutations</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªä¸åŒ…å«é‡å¤çš„æ•°ç»„<code>nums</code>ï¼Œè¿”å›æ•°ç»„çš„æ‰€æœ‰å¯èƒ½çš„æ’åˆ—ï¼Œä¸åŒ…å«é‡å¤</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,2,3]</span><br><span class="line">Output: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å›æº¯ç®—æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–ä¸€ä¸ªç©ºè·¯å¾„ path å’Œä¸€ä¸ª used æ•°ç»„ç”¨äºæ ‡è®°æ˜¯å¦ä½¿ç”¨è¿‡æŸå…ƒç´ </span><br><span class="line">2. éå†æ•°ç»„ï¼Œå¯¹æœªä½¿ç”¨çš„å…ƒç´ è¿›è¡Œé€‰æ‹©ï¼ŒåŠ å…¥è·¯å¾„</span><br><span class="line">3. å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼Œå°†å½“å‰è·¯å¾„åŠ å…¥ç»“æœ</span><br><span class="line">4. æ’¤é”€é€‰æ‹©ï¼Œå°è¯•å…¶ä»–æœªä½¿ç”¨çš„å…ƒç´ </span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">permute</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        result = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">path, used</span>):</span><br><span class="line">            <span class="comment"># å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒåŠ å…¥ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(path) == <span class="built_in">len</span>(nums):</span><br><span class="line">                result.append(path[:]) <span class="comment"># æ·±æ‹·è´å½“å‰è·¯å¾„</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">                <span class="keyword">if</span> used[i]:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># åšé€‰æ‹©</span></span><br><span class="line">                path.append(nums[i])</span><br><span class="line">                used[i] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># é€’å½’</span></span><br><span class="line">                backtrack(path, used)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ’¤é”€é€‰æ‹©</span></span><br><span class="line">                path.pop()</span><br><span class="line">                used[i] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        backtrack([], [<span class="literal">False</span>] * <span class="built_in">len</span>(nums))</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">permute</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">backtrack</span>(<span class="params">path, used</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒåŠ å…¥ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> (path.<span class="property">length</span> === nums.<span class="property">length</span>) &#123;</span><br><span class="line">                result.<span class="title function_">push</span>([...path]); <span class="comment">// æ·±æ‹·è´å½“å‰è·¯å¾„</span></span><br><span class="line">                <span class="keyword">return</span>; </span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (used[i]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// åšé€‰æ‹©</span></span><br><span class="line">                path.<span class="title function_">push</span>(nums[i]);</span><br><span class="line">                used[i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// é€’å½’</span></span><br><span class="line">                <span class="title function_">backtrack</span>(path, used);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ’¤é”€é€‰æ‹©</span></span><br><span class="line">                path.<span class="title function_">pop</span>();</span><br><span class="line">                used[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">backtrack</span>([], <span class="title class_">Array</span>(nums.<span class="property">length</span>).<span class="title function_">fill</span>(<span class="literal">false</span>));</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="å…¨æ’åˆ—ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼‰"><a href="#å…¨æ’åˆ—ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼‰" class="headerlink" title="å…¨æ’åˆ—ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼‰"></a>å…¨æ’åˆ—ï¼ˆæœ‰é‡å¤å…ƒç´ ï¼‰</h4><blockquote><p><a href="https://leetcode.com/problems/permutations-ii/">Leetcode 47. Permutations II</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤æ•°å­—çš„æ•°ç»„<code>nums</code>ï¼Œè¿”å›æ•°ç»„çš„æ‰€æœ‰ä¸é‡å¤çš„æ’åˆ—</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,1,2]</span><br><span class="line">Output:</span><br><span class="line">[[1,1,2],</span><br><span class="line"> [1,2,1],</span><br><span class="line"> [2,1,1]]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: å›æº¯ç®—æ³• + å»é‡</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å¯¹ nums æ’åºï¼Œä½¿å¾—ç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼Œæ–¹ä¾¿å»é‡</span><br><span class="line">2. åœ¨å›æº¯è¿‡ç¨‹ä¸­ï¼Œè·³è¿‡å½“å‰æ•°å­—ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒä¸”å‰ä¸€ä¸ªæ•°å­—æœªè¢«ä½¿ç”¨çš„æƒ…å†µ</span><br><span class="line">3. æ„å»ºæ’åˆ—è·¯å¾„ï¼Œè®°å½•å·²ä½¿ç”¨æ•°å­—</span><br><span class="line">4. æ’¤é”€é€‰æ‹©ï¼Œå°è¯•å…¶ä»–æœªä½¿ç”¨çš„æ•°å­—</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">permuteUnique</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        result = []</span><br><span class="line">        nums.sort() <span class="comment"># æ’åºä»¥ä¾¿å»é‡</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">backtrack</span>(<span class="params">path, used</span>):</span><br><span class="line">            <span class="comment"># å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒåŠ å…¥ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(path) == <span class="built_in">len</span>(nums):</span><br><span class="line">                result.append(path[:])</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">                <span class="comment"># å¦‚æœæ•°å­—å·²ä½¿ç”¨ï¼Œè·³è¿‡</span></span><br><span class="line">                <span class="keyword">if</span> used[i]:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># å»é‡ï¼šå½“å‰æ•°å­—ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæ•°å­—æœªè¢«ä½¿ç”¨</span></span><br><span class="line">                <span class="keyword">if</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>] <span class="keyword">and</span> <span class="keyword">not</span> used[i - <span class="number">1</span>]:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># åšé€‰æ‹©</span></span><br><span class="line">                path.append(nums[i])</span><br><span class="line">                used[i] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># é€’å½’</span></span><br><span class="line">                backtrack(path, used)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ’¤é”€é€‰æ‹©</span></span><br><span class="line">                path.pop()</span><br><span class="line">                used[i] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        backtrack([], [<span class="literal">False</span>] * <span class="built_in">len</span>(nums))</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">permuteUnique</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = [];</span><br><span class="line">        nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// æ’åºä»¥ä¾¿å»é‡</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">backtrack</span>(<span class="params">path, used</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒåŠ å…¥ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span> (path.<span class="property">length</span> === nums.<span class="property">length</span>) &#123;</span><br><span class="line">                result.<span class="title function_">push</span>([...path]); <span class="comment">// æ·±æ‹·è´è·¯å¾„</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ•°å­—å·²ä½¿ç”¨ï¼Œè·³è¿‡</span></span><br><span class="line">                <span class="keyword">if</span> (used[i]) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å»é‡ï¼šå½“å‰æ•°å­—ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæ•°å­—æœªè¢«ä½¿ç”¨</span></span><br><span class="line">                <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] === nums[i - <span class="number">1</span>] &amp;&amp; !used[i - <span class="number">1</span>])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// åšé€‰æ‹©</span></span><br><span class="line">                path.<span class="title function_">push</span>(nums[i]);</span><br><span class="line">                used[i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// é€’å½’</span></span><br><span class="line">                <span class="title function_">backtrack</span>(path, used);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ’¤é”€é€‰æ‹©</span></span><br><span class="line">                path.<span class="title function_">pop</span>();</span><br><span class="line">                used[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">backtrack</span>([], <span class="title class_">Array</span>(nums.<span class="property">length</span>).<span class="title function_">fill</span>(<span class="literal">false</span>));</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a><code>Dynamic Programming</code></h3><h4 id="åˆ†å‰²ç­‰å’Œå­é›†"><a href="#åˆ†å‰²ç­‰å’Œå­é›†" class="headerlink" title="åˆ†å‰²ç­‰å’Œå­é›†"></a>åˆ†å‰²ç­‰å’Œå­é›†</h4><blockquote><p><a href="https://leetcode.com/problems/partition-equal-subset-sum/">Leetcode 416. Partition Equal Subset Sum</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªéç©ºæ­£æ•´æ•°æ•°ç»„<code>nums</code>ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²ä¸ºä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,5,11,5]</span><br><span class="line">Output: true</span><br><span class="line">Explanation: The array can be partitioned as [1, 5, 5] and [11]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’ï¼ˆèƒŒåŒ…é—®é¢˜ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªå­é›†ï¼Œä½¿å…¶å’Œç­‰äºæ€»å’Œçš„ä¸€åŠ</span><br><span class="line">2. å¦‚æœæ•°ç»„æ€»å’Œä¸ºå¥‡æ•°ï¼Œç›´æ¥è¿”å› False</span><br><span class="line">3. å®šä¹‰ dp[i] è¡¨ç¤ºæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­é›†ï¼Œä½¿å¾—è¿™ä¸ªå­é›†çš„å’Œä¸º i</span><br><span class="line">4. åˆå§‹åŒ– dp[0] = Trueï¼ˆç©ºé›†çš„å’Œä¸º 0 æ€»æ˜¯æˆç«‹ï¼‰</span><br><span class="line">5. éå†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°ï¼Œä» targetï¼ˆæ€»å’Œçš„ä¸€åŠï¼‰å¼€å§‹å‘ä¸‹æ›´æ–° dp æ•°ç»„</span><br><span class="line">6. å¯¹äºæ¯ä¸ªæ•° num å’Œå½“å‰çš„å’Œ iï¼Œå¦‚æœ dp[i - num] ä¸º Trueï¼Œåˆ™ dp[i] ä¹Ÿä¸º True</span><br><span class="line">7. æœ€ç»ˆæ£€æŸ¥ dp[target] æ˜¯å¦ä¸º True</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">canPartition</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        total_sum = <span class="built_in">sum</span>(nums)</span><br><span class="line">        <span class="keyword">if</span> total_sum % <span class="number">2</span> != <span class="number">0</span>: <span class="comment"># å¦‚æœæ€»å’Œæ˜¯å¥‡æ•°ï¼Œæ— æ³•å¹³åˆ†</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        target = total_sum // <span class="number">2</span></span><br><span class="line">        dp = [<span class="literal">False</span>] * (target + <span class="number">1</span>)</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="literal">True</span> <span class="comment"># å’Œä¸º 0 çš„å­é›†æ€»æ˜¯å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(target, num - <span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                dp[i] = dp[i] <span class="keyword">or</span> dp[i - num]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[target]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">canPartition</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> totalSum = nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (totalSum % <span class="number">2</span> !== <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// å¦‚æœæ€»å’Œæ˜¯å¥‡æ•°ï¼Œæ— æ³•å¹³åˆ†</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> target = totalSum / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">const</span> dp = <span class="title class_">Array</span>(target + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="literal">false</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="literal">true</span>; <span class="comment">// å’Œä¸º 0 çš„å­é›†æ€»æ˜¯å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = target; i &gt;= num; i--) &#123;</span><br><span class="line">                dp[i] = dp[i] || dp[i - num];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ç»„æˆç›®æ ‡å’Œ"><a href="#ç»„æˆç›®æ ‡å’Œ" class="headerlink" title="ç»„æˆç›®æ ‡å’Œ"></a>ç»„æˆç›®æ ‡å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/target-sum/">Leetcode 494. Target Sum</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•°ç»„<code>nums</code>ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå…ƒç´ åŠ ä¸Š<code>+</code>æˆ–<code>-</code>ç¬¦å·ï¼Œé—®æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹å¼ä½¿å¾—æ€»å’Œç­‰äºç›®æ ‡å€¼<code>target</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [1,1,1,1,1], target = 3</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: There are 5 ways to assign symbols to make the sum of nums be target 3</span><br><span class="line">-1 + 1 + 1 + 1 + 1 = 3</span><br><span class="line">+1 - 1 + 1 + 1 + 1 = 3</span><br><span class="line">+1 + 1 - 1 + 1 + 1 = 3</span><br><span class="line">+1 + 1 + 1 - 1 + 1 = 3</span><br><span class="line">+1 + 1 + 1 + 1 - 1 = 3</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å°†é—®é¢˜è½¬æ¢ä¸ºå­é›†é—®é¢˜ï¼Œè®¾ P æ˜¯æ­£å·éƒ¨åˆ†ï¼ŒN æ˜¯è´Ÿå·éƒ¨åˆ†</span><br><span class="line">2. æ–¹ç¨‹è”ç«‹ï¼šP - N = target å’Œ P + N = sum(nums) å¾—åˆ° P = (target + sum(nums)) / 2</span><br><span class="line">3. å¦‚æœ (target + sum(nums)) ä¸æ˜¯å¶æ•°æˆ– target è¶…è¿‡ sum(nums)ï¼Œè¿”å› 0</span><br><span class="line">4. å®šä¹‰ dp[i] è¡¨ç¤ºå’Œä¸º i çš„å­é›†æ•°ï¼Œåˆå§‹åŒ– dp[0] = 1</span><br><span class="line">5. éå†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°ï¼Œå€’åºæ›´æ–° dp æ•°ç»„</span><br><span class="line">6. dp[subset_sum] å³ä¸ºç»“æœ</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findTargetSumWays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        total_sum = <span class="built_in">sum</span>(nums)</span><br><span class="line">        <span class="comment"># å¦‚æœç›®æ ‡å€¼æ— æ³•åˆ†å‰²ä¸ºä¸¤éƒ¨åˆ†ï¼Œè¿”å› </span></span><br><span class="line">        <span class="keyword">if</span> (target + total_sum) % <span class="number">2</span> != <span class="number">0</span> <span class="keyword">or</span> total_sum &lt; <span class="built_in">abs</span>(target):</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è½¬æ¢ä¸ºå­é›†å’Œé—®é¢˜</span></span><br><span class="line">        subset_sum = (target + total_sum) // <span class="number">2</span></span><br><span class="line">        <span class="comment"># dp[i] è¡¨ç¤ºå’Œä¸º i çš„å­é›†æ•°</span></span><br><span class="line">        dp = [<span class="number">0</span>] * (subset_sum + <span class="number">1</span>)</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span> <span class="comment"># å’Œä¸º 0 çš„å­é›†æ•°ä¸º 1ï¼ˆç©ºé›†ï¼‰</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="comment"># ä»åå‘å‰æ›´æ–° dp æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(subset_sum, num - <span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                dp[i] += dp[i - num]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[subset_sum]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">findTargetSumWays</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> totalSum = nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// å¦‚æœç›®æ ‡å€¼æ— æ³•åˆ†å‰²ä¸ºä¸¤éƒ¨åˆ†ï¼Œè¿”å› 0</span></span><br><span class="line">        <span class="keyword">if</span> ((target + totalSum) % <span class="number">2</span> !== <span class="number">0</span> || totalSum &lt; <span class="title class_">Math</span>.<span class="title function_">abs</span>(target))</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è½¬æ¢ä¸ºå­é›†å’Œé—®é¢˜</span></span><br><span class="line">        <span class="keyword">const</span> subsetSum = (target + totalSum) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(subsetSum + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">// å’Œä¸º 0 çš„å­é›†æ•°ä¸º 1ï¼ˆç©ºé›†ï¼‰</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> nums) &#123;</span><br><span class="line">            <span class="comment">// ä»åå‘å‰æ›´æ–° dp æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = subsetSum; i &gt;= num; i--) &#123;</span><br><span class="line">                dp[i] += dp[i - num];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp[subsetSum];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="è·³è·ƒæ¸¸æˆ"><a href="#è·³è·ƒæ¸¸æˆ" class="headerlink" title="è·³è·ƒæ¸¸æˆ"></a>è·³è·ƒæ¸¸æˆ</h4><blockquote><p><a href="https://leetcode.com/problems/jump-game/">Leetcode 55. Jump Game</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„<code>nums</code>ï¼Œæ¯ä¸ªå…ƒç´ è¡¨ç¤ºåœ¨è¯¥ä½ç½®ä¸Šæœ€å¤šå¯ä»¥è·³è·ƒçš„æ­¥æ•°ã€‚åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿä»æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®è·³åˆ°æœ€åä¸€ä¸ªä½ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [2,3,1,1,4]</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: è´ªå¿ƒç®—æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–å˜é‡ maxReach è®°å½•å½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®</span><br><span class="line">2. éå†æ•°ç»„</span><br><span class="line">    - å¦‚æœå½“å‰ä½ç½® i è¶…è¿‡ maxReachï¼Œè¿”å› Falseï¼Œè¡¨ç¤ºæ— æ³•è·³åˆ°è¯¥ä½ç½®</span><br><span class="line">    - æ›´æ–° maxReach ä¸º max(maxReach, i + nums[i])</span><br><span class="line">3. éå†ç»“æŸåï¼Œå¦‚æœæœªè¿”å› Falseï¼Œè¯´æ˜å¯ä»¥åˆ°è¾¾ç»ˆç‚¹</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">canJump</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        max_reach = <span class="number">0</span> <span class="comment"># åˆå§‹åŒ–èƒ½å¤Ÿåˆ°è¾¾çš„æœ€è¿œä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="comment"># å¦‚æœå½“å‰ä½ç½®è¶…è¿‡äº†æœ€è¿œå¯è¾¾ä½ç½®ï¼Œè¿”å› False</span></span><br><span class="line">            <span class="keyword">if</span> i &gt; max_reach:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€è¿œå¯è¾¾ä½ç½®</span></span><br><span class="line">            max_reach = <span class="built_in">max</span>(max_reach, i + nums[i])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">canJump</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> maxReach = <span class="number">0</span>; <span class="comment">// åˆå§‹åŒ–èƒ½å¤Ÿåˆ°è¾¾çš„æœ€è¿œä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰ä½ç½®è¶…è¿‡äº†æœ€è¿œå¯è¾¾ä½ç½®ï¼Œè¿”å› false</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; maxReach) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°æœ€è¿œå¯è¾¾ä½ç½®</span></span><br><span class="line">            maxReach = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxReach, i + nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€å°è·³è·ƒæ¬¡æ•°"><a href="#æœ€å°è·³è·ƒæ¬¡æ•°" class="headerlink" title="æœ€å°è·³è·ƒæ¬¡æ•°"></a>æœ€å°è·³è·ƒæ¬¡æ•°</h4><blockquote><p><a href="https://leetcode.com/problems/jump-game-ii/">Leetcode 45. Jump Game II</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„<code>nums</code>ï¼Œæ¯ä¸ªå…ƒç´ è¡¨ç¤ºåœ¨è¯¥ä½ç½®ä¸Šæœ€å¤šå¯ä»¥è·³è·ƒçš„æ­¥æ•°ã€‚æ±‚ä»æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®è·³åˆ°æœ€åä¸€ä¸ªä½ç½®æ‰€éœ€çš„æœ€å°è·³è·ƒæ¬¡æ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [2,3,1,1,4]</span><br><span class="line">Output: 2</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: è´ªå¿ƒç®—æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ– jumpsï¼ˆè·³è·ƒæ¬¡æ•°ï¼‰ï¼Œcurrent_endï¼ˆå½“å‰è·³è·ƒçš„è¾¹ç•Œï¼‰ï¼Œfarthestï¼ˆèƒ½è·³åˆ°çš„æœ€è¿œä½ç½®ï¼‰</span><br><span class="line">2. éå†æ•°ç»„ï¼Œæ›´æ–° farthest ä¸º max(farthest, i + nums[i])</span><br><span class="line">3. å½“åˆ°è¾¾ current_end æ—¶ï¼Œå¢åŠ è·³è·ƒæ¬¡æ•°ï¼Œå¹¶æ›´æ–° current_end ä¸º farthest</span><br><span class="line">4. éå†ç»“æŸè¿”å› jumps</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">jump</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        jumps = <span class="number">0</span> <span class="comment"># è·³è·ƒæ¬¡æ•°</span></span><br><span class="line">        current_end = <span class="number">0</span> <span class="comment"># å½“å‰è·³è·ƒçš„è¾¹ç•Œ</span></span><br><span class="line">        farthest = <span class="number">0</span> <span class="comment"># å½“å‰èƒ½è·³åˆ°çš„æœ€è¿œä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">1</span>): <span class="comment"># æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦éå†</span></span><br><span class="line">            farthest = <span class="built_in">max</span>(farthest, i + nums[i])</span><br><span class="line">            <span class="keyword">if</span> i == current_end: <span class="comment"># åˆ°è¾¾å½“å‰è·³è·ƒçš„è¾¹ç•Œ</span></span><br><span class="line">                jumps += <span class="number">1</span></span><br><span class="line">                current_end = farthest</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> jumps</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">jump</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> jumps = <span class="number">0</span>; <span class="comment">// è·³è·ƒæ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">let</span> currentEnd = <span class="number">0</span>; <span class="comment">// å½“å‰è·³è·ƒçš„è¾¹ç•Œ</span></span><br><span class="line">        <span class="keyword">let</span> farthest = <span class="number">0</span>; <span class="comment">// å½“å‰èƒ½è·³åˆ°çš„æœ€è¿œä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span> - <span class="number">1</span>; i++) &#123; <span class="comment">// æœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦éå†</span></span><br><span class="line">            farthest = <span class="title class_">Math</span>.<span class="title function_">max</span>(farthest, i + nums[i]);</span><br><span class="line">            <span class="keyword">if</span> (i === currentEnd) &#123;</span><br><span class="line">                jumps++;</span><br><span class="line">                currentEnd = farthest;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> jumps;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h4><blockquote><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/">Leetcode 121. Best Time to Buy and Sell Stock</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„<code>prices</code>ï¼Œå…¶ä¸­<code>prices[i]</code>è¡¨ç¤ºæŸå¤©çš„è‚¡ç¥¨ä»·æ ¼ã€‚åªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆä¹°å…¥å’Œå–å‡ºï¼‰ï¼Œæ±‚æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœæ— æ³•è·å¾—åˆ©æ¶¦ï¼Œè¿”å›<code>0</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: prices = [7,1,5,3,6,4]</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: åœ¨ä»·æ ¼ä¸º1æ—¶ä¹°å…¥ï¼Œä»·æ ¼ä¸º6æ—¶å–å‡ºï¼Œåˆ©æ¶¦ä¸º6-1=5</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: è´ªå¿ƒç®—æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. åˆå§‹åŒ–æœ€å°ä¹°å…¥ä»·æ ¼ä¸ºæ— ç©·å¤§ï¼Œæœ€å¤§åˆ©æ¶¦ä¸º 0</span><br><span class="line">2. éå†ä»·æ ¼æ•°ç»„</span><br><span class="line">    - å¦‚æœå½“å‰ä»·æ ¼å°äºæœ€å°ä¹°å…¥ä»·æ ¼ï¼Œæ›´æ–°æœ€å°ä¹°å…¥ä»·æ ¼</span><br><span class="line">    - å¦‚æœå½“å‰ä»·æ ¼å‡å»æœ€å°ä¹°å…¥ä»·æ ¼çš„åˆ©æ¶¦å¤§äºæœ€å¤§åˆ©æ¶¦ï¼Œæ›´æ–°æœ€å¤§åˆ©æ¶¦</span><br><span class="line">3. è¿”å›æœ€å¤§åˆ©æ¶¦</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        min_price = <span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>) <span class="comment"># æœ€å°ä¹°å…¥ä»·æ ¼</span></span><br><span class="line">        max_profit = <span class="number">0</span> <span class="comment"># æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices:</span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€å°ä¹°å…¥ä»·æ ¼</span></span><br><span class="line">            <span class="keyword">if</span> price &lt; min_price:</span><br><span class="line">                min_price = price</span><br><span class="line">            <span class="comment"># è®¡ç®—å½“å‰åˆ©æ¶¦ï¼Œå¹¶æ›´æ–°æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line">            <span class="keyword">elif</span> price - min_price &gt; max_profit:</span><br><span class="line">                max_profit = price - min_price</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max_profit</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxProfit</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> minPrice = <span class="title class_">Infinity</span>; <span class="comment">// æœ€å°ä¹°å…¥ä»·æ ¼</span></span><br><span class="line">        <span class="keyword">let</span> maxProfit = <span class="number">0</span>; <span class="comment">// æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> price <span class="keyword">of</span> prices) &#123;</span><br><span class="line">            <span class="comment">// æ›´æ–°æœ€å°ä¹°å…¥ä»·æ ¼</span></span><br><span class="line">            <span class="keyword">if</span> (price &lt; minPrice) </span><br><span class="line">                minPrice = price;</span><br><span class="line">            <span class="comment">// è®¡ç®—å½“å‰åˆ©æ¶¦ï¼Œå¹¶æ›´æ–°æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (price - minPrice &gt; maxProfit)</span><br><span class="line">                maxProfit = price - minPrice;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxProfit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="è‚¡ç¥¨ä¹°å–çš„æœ€å¤§æ”¶ç›Š"><a href="#è‚¡ç¥¨ä¹°å–çš„æœ€å¤§æ”¶ç›Š" class="headerlink" title="è‚¡ç¥¨ä¹°å–çš„æœ€å¤§æ”¶ç›Š"></a>è‚¡ç¥¨ä¹°å–çš„æœ€å¤§æ”¶ç›Š</h4><blockquote><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/">Leetcode 122. Best Time to Buy and Sell Stock II</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œ<code>prices[i]</code>è¡¨ç¤ºç¬¬<code>i</code>å¤©çš„è‚¡ç¥¨ä»·æ ¼ã€‚å¯ä»¥è¿›è¡Œå¤šæ¬¡ä¹°å–æ“ä½œï¼ˆä½†å¿…é¡»å…ˆå–æ‰ä¹‹å‰çš„è‚¡ç¥¨åæ‰èƒ½å†æ¬¡è´­ä¹°ï¼‰ï¼Œæ±‚èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: prices = [7,1,5,3,6,4]</span><br><span class="line">Output: 7</span><br><span class="line">Explanation: åœ¨ç¬¬2å¤©ä¹°å…¥ï¼ˆä»·æ ¼=1ï¼‰ï¼Œç¬¬3å¤©å–å‡ºï¼ˆä»·æ ¼=5ï¼‰ï¼Œæ”¶ç›Š=5-1=4ï¼›ç„¶ååœ¨ç¬¬4å¤©ä¹°å…¥ï¼ˆä»·æ ¼=3ï¼‰ï¼Œç¬¬5å¤©å–å‡ºï¼ˆä»·æ ¼=6ï¼‰ï¼Œæ”¶ç›Š=6-3=3ï¼Œæ€»æ”¶ç›Šä¸º7</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: è´ªå¿ƒç®—æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. éå†ä»·æ ¼æ•°ç»„ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¿ç»­ä¸Šæ¶¨çš„ä»·æ ¼å·®</span><br><span class="line">2. å¦‚æœä»Šå¤©çš„ä»·æ ¼é«˜äºæ˜¨å¤©çš„ä»·æ ¼ï¼Œå°†å·®å€¼ç´¯åŠ åˆ°æœ€å¤§åˆ©æ¶¦ä¸­</span><br><span class="line">3. éå†å®Œæˆåï¼Œè¿”å›æœ€å¤§åˆ©æ¶¦</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        max_profit = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(prices)):</span><br><span class="line">            <span class="comment"># å¦‚æœä»Šå¤©çš„ä»·æ ¼æ¯”æ˜¨å¤©é«˜ï¼Œç´¯åŠ å·®å€¼åˆ°åˆ©æ¶¦ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> prices[i] &gt; prices[i - <span class="number">1</span>]:</span><br><span class="line">                max_profit += prices[i] - prices[i - <span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> max_profit</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxProfit</span>(<span class="params">prices</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> maxProfit = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; prices.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä»Šå¤©çš„ä»·æ ¼æ¯”æ˜¨å¤©é«˜ï¼Œç´¯åŠ å·®å€¼åˆ°åˆ©æ¶¦ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (prices[i] &gt; prices[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                maxProfit += prices[i] - prices[i - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> maxProfit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä¸åŒè·¯å¾„çš„æ•°ç›®"><a href="#ä¸åŒè·¯å¾„çš„æ•°ç›®" class="headerlink" title="ä¸åŒè·¯å¾„çš„æ•°ç›®"></a>ä¸åŒè·¯å¾„çš„æ•°ç›®</h4><blockquote><p><a href="https://leetcode.com/problems/unique-paths/">Leetcode 62. Unique Paths</a></p></blockquote><ul><li>é¢˜ç›®: ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª<code>m x n</code>ç½‘æ ¼çš„å·¦ä¸Šè§’ (èµ·ç‚¹åœ¨<code>(0, 0)</code>)ã€‚æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚ç½‘æ ¼çš„å³ä¸‹è§’åœ¨<code>(m-1, n-1)</code>ã€‚é—®æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„å¯ä»¥åˆ°è¾¾ç»ˆç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: m = 3, n = 7</span><br><span class="line">Output: 28</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ dp æ•°ç»„ï¼Œdp[i][j] è¡¨ç¤ºåˆ°è¾¾ç½‘æ ¼ (i, j) çš„è·¯å¾„æ•°é‡</span><br><span class="line">2. åˆå§‹çŠ¶æ€: dp[0][j] å’Œ dp[i][0] éƒ½ä¸º 1ï¼ˆç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„è·¯å¾„æ•°é‡éƒ½ä¸º 1ï¼‰</span><br><span class="line">3. çŠ¶æ€è½¬ç§»æ–¹ç¨‹: dp[i][j] = dp[i-1][j] + dp[i][j-1]</span><br><span class="line">4. è¿”å› dp[m-1][n-1]</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">uniquePaths</span>(<span class="params">self, m: <span class="built_in">int</span>, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ– dp æ•°ç»„ï¼Œæ‰€æœ‰å€¼ä¸º 1</span></span><br><span class="line">        dp = [[<span class="number">1</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¡«å…… dp è¡¨æ ¼</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">uniquePaths</span>(<span class="params">m, n</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ– dp æ•°ç»„ï¼Œæ‰€æœ‰å€¼ä¸º 1</span></span><br><span class="line">        <span class="keyword">const</span> dp = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: m&#125;, <span class="function">() =&gt;</span> <span class="title class_">Array</span>(n).<span class="title function_">fill</span>(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¡«å…… dp è¡¨æ ¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€å¤§è¿ç»­å’Œ"><a href="#æœ€å¤§è¿ç»­å’Œ" class="headerlink" title="æœ€å¤§è¿ç»­å’Œ"></a>æœ€å¤§è¿ç»­å’Œ</h4><blockquote><p><a href="https://leetcode.com/problems/maximum-subarray/">Leetcode 53. Maximum Subarray</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„<code>nums</code>ï¼Œæ‰¾åˆ°å…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆè‡³å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: nums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: [4,-1,2,1] has the largest sum = 6</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ dp[i] è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œ</span><br><span class="line">2. çŠ¶æ€è½¬ç§»æ–¹ç¨‹:</span><br><span class="line">   dp[i] = max(nums[i], dp[i-1] + nums[i])</span><br><span class="line">   å³å½“å‰ä½ç½®çš„æœ€å¤§å’Œï¼Œè¦ä¹ˆæ˜¯å½“å‰æ•°å­—æœ¬èº«ï¼Œè¦ä¹ˆæ˜¯å½“å‰æ•°å­—åŠ ä¸Šå‰é¢çš„æœ€å¤§å’Œ</span><br><span class="line">3. åˆå§‹åŒ–: dp[0] = nums[0]</span><br><span class="line">4. éå†æ•°ç»„ï¼Œè®¡ç®—æ¯ä¸ªä½ç½®çš„ dp å€¼ï¼Œå¹¶è®°å½•æœ€å¤§å€¼</span><br><span class="line">5. æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ï¼ˆé€šè¿‡ä¼˜åŒ–åªä¿ç•™å½“å‰å€¼ï¼‰</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxSubArray</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å½“å‰æœ€å¤§å’Œå’Œå…¨å±€æœ€å¤§å’Œ</span></span><br><span class="line">        current_sum = max_sum = nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums[<span class="number">1</span>:]:</span><br><span class="line">            <span class="comment"># å½“å‰å’Œä¸ºå½“å‰æ•°å­—æˆ–å½“å‰æ•°å­—åŠ ä¹‹å‰çš„å’Œ</span></span><br><span class="line">            current_sum = <span class="built_in">max</span>(num, current_sum + num)</span><br><span class="line">            <span class="comment"># æ›´æ–°å…¨å±€æœ€å¤§å’Œ</span></span><br><span class="line">            max_sum = <span class="built_in">max</span>(max_sum, current_sum)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max_sum</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">maxSubArray</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å½“å‰æœ€å¤§å’Œå’Œå…¨å±€æœ€å¤§å’Œ</span></span><br><span class="line">        <span class="keyword">let</span> currentSum = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">let</span> maxSum = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// å½“å‰å’Œä¸ºå½“å‰æ•°å­—æˆ–å½“å‰æ•°å­—åŠ ä¹‹å‰çš„å’Œ</span></span><br><span class="line">            currentSum = <span class="title class_">Math</span>.<span class="title function_">max</span>(nums[i], currentSum + nums[i]);</span><br><span class="line">            <span class="comment">// æ›´æ–°å…¨å±€æœ€å¤§å’Œ</span></span><br><span class="line">            maxSum = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxSum, currentSum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxSum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æœ€é•¿å…¬å…±å­ä¸²"><a href="#æœ€é•¿å…¬å…±å­ä¸²" class="headerlink" title="æœ€é•¿å…¬å…±å­ä¸²"></a>æœ€é•¿å…¬å…±å­ä¸²</h4><blockquote><p><a href="https://leetcode.com/problems/longest-common-subsequence/">Leetcode 1143. Longest Common Subsequence</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²<code>text1</code>å’Œ<code>text2</code>ï¼Œè¿”å›å®ƒä»¬æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨å…¬å…±å­åºåˆ—ï¼Œåˆ™è¿”å›<code>0</code></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: text1 = &quot;abcde&quot;, text2 = &quot;ace&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The longest common subsequence is &quot;ace&quot; and its length is 3</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: åŠ¨æ€è§„åˆ’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. å®šä¹‰ dp[i][j]:</span><br><span class="line">   - dp[i][j] è¡¨ç¤º text1 å‰ i ä¸ªå­—ç¬¦å’Œ text2 å‰ j ä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦</span><br><span class="line">2. è½¬ç§»æ–¹ç¨‹:</span><br><span class="line">   - å¦‚æœ text1[i-1] == text2[j-1]ï¼Œåˆ™ dp[i][j] = dp[i-1][j-1] + 1</span><br><span class="line">   - å¦åˆ™ï¼Œdp[i][j] = max(dp[i-1][j], dp[i][j-1])</span><br><span class="line">3. åˆå§‹åŒ–:</span><br><span class="line">   - dp[0][j] = 0 å’Œ dp[i][0] = 0ï¼Œå› ä¸ºç©ºå­—ç¬¦ä¸²ä¸ä»»ä½•å­—ç¬¦ä¸²çš„å…¬å…±å­åºåˆ—é•¿åº¦ä¸º 0</span><br><span class="line">4. éå†:</span><br><span class="line">   - å¡«å……æ•´ä¸ª dp è¡¨ï¼Œå¹¶è¿”å› dp[m][n]ï¼Œå…¶ä¸­ m å’Œ n æ˜¯ text1 å’Œ text2 çš„é•¿åº¦</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestCommonSubsequence</span>(<span class="params">self, text1: <span class="built_in">str</span>, text2: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        m, n = <span class="built_in">len</span>(text1), <span class="built_in">len</span>(text2)</span><br><span class="line">        <span class="comment"># åˆ›å»º dp æ•°ç»„å¹¶åˆå§‹åŒ–</span></span><br><span class="line">        dp = [[<span class="number">0</span>] * (n + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å‰ç¼€ç»„åˆ</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> text1[i - <span class="number">1</span>] == text2[j - <span class="number">1</span>]:</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m][n]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">longestCommonSubsequence</span>(<span class="params">text1, text2</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> m = text1.<span class="property">length</span>, n = text2.<span class="property">length</span>;</span><br><span class="line">        <span class="comment">// åˆ›å»º dp æ•°ç»„å¹¶åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">const</span> dp = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123;<span class="attr">length</span>: m + <span class="number">1</span>&#125;, <span class="function">() =&gt;</span> <span class="title class_">Array</span>(n + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å‰ç¼€ç»„åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (text1[i - <span class="number">1</span>] === text2[j - <span class="number">1</span>])</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i][j] = <span class="title class_">Math</span>.<span class="title function_">max</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="Other-å…¶ä»–"><a href="#Other-å…¶ä»–" class="headerlink" title="Other å…¶ä»–"></a><code>Other</code> å…¶ä»–</h3><h4 id="äºŒç»´æ•°ç»„å»é‡"><a href="#äºŒç»´æ•°ç»„å»é‡" class="headerlink" title="äºŒç»´æ•°ç»„å»é‡"></a>äºŒç»´æ•°ç»„å»é‡</h4><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå¯èƒ½åŒ…å«é‡å¤çš„è¡Œï¼Œå®ç°ä¸€ä¸ªæ–¹æ³•å»é‡ï¼Œè¿”å›å»é‡åçš„äºŒç»´æ•°ç»„</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">matrix = [</span><br><span class="line">    [1, 2, 3],</span><br><span class="line">    [1, 2, 3],</span><br><span class="line">    [4, 5, 6]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># è¾“å‡º: [(1, 2, 3), (4, 5, 6)]</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•<code>1</code>: ä¸ä¿ç•™é¡ºåº</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°†æ¯ä¸€è¡Œè½¬åŒ–ä¸ºä¸å¯å˜ç±»å‹</span><br><span class="line">    åœ¨ Python ä¸­ä½¿ç”¨ tuple</span><br><span class="line">    åœ¨ JavaScript ä¸­ä½¿ç”¨ JSON.stringify</span><br><span class="line">åˆ©ç”¨ Set çš„ç‰¹æ€§å»é‡</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove_duplicates</span>(<span class="params">matrix</span>):</span><br><span class="line">        <span class="comment"># å°†æ¯ä¸€è¡Œè½¬åŒ–ä¸ºå…ƒç»„å¹¶ç”¨ set å»é‡</span></span><br><span class="line">        unique_rows = <span class="built_in">set</span>(<span class="built_in">tuple</span>(row) <span class="keyword">for</span> row <span class="keyword">in</span> matrix)</span><br><span class="line">        <span class="comment"># å°†å»é‡åçš„ç»“æœè½¬å›åˆ—è¡¨å½¢å¼</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="built_in">list</span>(row) <span class="keyword">for</span> row <span class="keyword">in</span> unique_rows]</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">removeDuplicates</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Set å»é‡ï¼Œå°†æ¯ä¸€è¡Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">const</span> uniqueRows = <span class="keyword">new</span> <span class="title class_">Set</span>(matrix.<span class="title function_">map</span>(<span class="function"><span class="params">row</span> =&gt;</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(rows)));</span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²è¿˜åŸä¸ºæ•°ç»„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(uniqueRows, <span class="function"><span class="params">row</span> =&gt;</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(row));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>è§£æ³•<code>2</code>: ä¿ç•™é¡ºåº</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨ Set è·Ÿè¸ªå·²ç»å¤„ç†çš„è¡Œ</span><br><span class="line">éå†äºŒç»´æ•°ç»„ï¼Œæ£€æŸ¥æ¯ä¸€è¡Œæ˜¯å¦å·²åœ¨ Set ä¸­</span><br><span class="line">    å¦‚æœæœªå‡ºç°è¿‡ï¼Œåˆ™æ·»åŠ åˆ°ç»“æœæ•°ç»„ä¸­ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºå·²å¤„ç†</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove_duplicates_with_order</span>(<span class="params">matrix</span>):</span><br><span class="line">        seen = <span class="built_in">set</span>()</span><br><span class="line">        unique_rows = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> matrix:</span><br><span class="line">            row_tuple = <span class="built_in">tuple</span>(row)</span><br><span class="line">            <span class="keyword">if</span> row_tuple <span class="keyword">not</span> <span class="keyword">in</span> seen: <span class="comment"># å¦‚æœè¯¥è¡Œå°šæœªå¤„ç†</span></span><br><span class="line">                seen.add(row_tuple) <span class="comment"># æ ‡è®°ä¸ºå·²å¤„ç†</span></span><br><span class="line">                unique_rows.append(row) <span class="comment"># æ·»åŠ åˆ°ç»“æœä¸­</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> unique_rows</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">removeDuplicatesWithOrder</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> seen = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">        <span class="keyword">const</span> uniqueRows = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> row <span class="keyword">of</span> matrix) &#123;</span><br><span class="line">            <span class="keyword">const</span> rowString = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row); <span class="comment">// å°†è¡Œè½¬åŒ–ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">if</span> (!seen.<span class="title function_">has</span>(rowString)) &#123;</span><br><span class="line">                seen.<span class="title function_">add</span>(rowString);</span><br><span class="line">                uniqueRows.<span class="title function_">push</span>(row);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uniqueRows;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰æ˜¯</span><br><span class="line">    F(0) = 0</span><br><span class="line">    F(1) = 1</span><br><span class="line">    å¯¹äº n &gt;= 2ï¼ŒF(n) = F(n-1) + F(n-2)</span><br><span class="line"></span><br><span class="line">æ•°åˆ—å‰å‡ é¡¹ä¸º</span><br><span class="line">    0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•<code>1</code>: é€’å½’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æŒ‰ç…§å®šä¹‰ï¼Œé€’å½’è®¡ç®—æ¯ä¸ªæ–æ³¢é‚£å¥‘æ•°</span><br><span class="line">ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œä»£ç æ¸…æ™°</span><br><span class="line">ç¼ºç‚¹ï¼šå­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œæ•ˆç‡è¾ƒä½</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fibonacci</span>(<span class="params">n</span>):</span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">fibonacci</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fibonacci</span>(n - <span class="number">1</span>) + <span class="title function_">fibonacci</span>(n - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>è§£æ³•<code>2</code>: åŠ¨æ€è§„åˆ’</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨ä¸¤ä¸ªå˜é‡å­˜å‚¨å‰ä¸¤ä¸ªæ•°å€¼ï¼Œé¿å…é‡å¤è®¡ç®—</span><br><span class="line">ä» F(2) å¼€å§‹å¾ªç¯è®¡ç®—ï¼Œæœ€ç»ˆè¿”å› F(n)</span><br><span class="line">ä¼˜ç‚¹ï¼šæ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fibonacci</span>(<span class="params">n</span>):</span><br><span class="line">        <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        prev2, prev1 = <span class="number">0</span>, <span class="number">1</span> <span class="comment"># åˆå§‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">            curr = prev1 + prev2 </span><br><span class="line">            prev2 = prev1  <span class="comment"># æ›´æ–°å‰ä¸¤ä¸ªæ•°</span></span><br><span class="line">            prev1 = curr</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prev1</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">fibonacci</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> prev2 = <span class="number">0</span>, prev1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> curr = prev1 + prev2;</span><br><span class="line">            prev2 = prev1;</span><br><span class="line">            prev1 = curr;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prev1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><table><thead><tr><th>æ–¹æ³•</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>é€’å½’</td><td><code>O(2^n)</code></td><td><code>O(n)</code></td><td>ç®€å•æ˜“ç†è§£ï¼Œé€‚åˆå°é—®é¢˜</td><td>æ€§èƒ½å·®ï¼Œå¤§é‡é‡å¤è®¡ç®—</td></tr><tr><td>åŠ¨æ€è§„åˆ’ä¼˜åŒ–ç©ºé—´</td><td><code>O(n)</code></td><td><code>O(1)</code></td><td>é«˜æ•ˆï¼Œå ç”¨ç©ºé—´å°‘</td><td>ä¸ä¿å­˜æ‰€æœ‰ä¸­é—´ç»“æœ</td></tr><tr><td>é€šç”¨è¿­ä»£</td><td><code>O(n)</code></td><td><code>O(n)</code></td><td>æ¸…æ™°ç›´è§‚ï¼Œé€‚åˆæ‰©å±•</td><td>å ç”¨æ›´å¤šç©ºé—´</td></tr></tbody></table><hr><h4 id="æ•´æ•°åè½¬"><a href="#æ•´æ•°åè½¬" class="headerlink" title="æ•´æ•°åè½¬"></a>æ•´æ•°åè½¬</h4><blockquote><p><a href="https://leetcode.com/problems/reverse-integer/">Leetcode 7. Reverse Integer</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ª<code>32</code>ä½æœ‰ç¬¦å·æ•´æ•°<code>x</code>ï¼Œå°†å…¶æ•°å­—éƒ¨åˆ†åè½¬<ul><li>å¦‚æœåè½¬åæ•´æ•°æº¢å‡ºï¼ˆä¸åœ¨<code>[-2^31, 2^31 - 1]</code>èŒƒå›´å†…ï¼‰ï¼Œè¿”å›<code>0</code></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: x = 123</span><br><span class="line">Output: 321</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: é€ä½åè½¬</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. è®°å½•æ•´æ•°çš„ç¬¦å·ï¼ˆæ­£æˆ–è´Ÿï¼‰ï¼Œç„¶åå°†æ•´æ•°å–ç»å¯¹å€¼ï¼Œæ–¹ä¾¿å¤„ç†</span><br><span class="line">2. é€šè¿‡ å–ä½™æ“ä½œ è·å–æœ€åä¸€ä½æ•°å­—ï¼Œå°†å…¶æ·»åŠ åˆ°ç»“æœä¸­</span><br><span class="line">    - æ¯æ¬¡æ›´æ–°ç»“æœä¸º res = res * 10 + digit</span><br><span class="line">    - å†é€šè¿‡æ•´é™¤å»æ‰æœ€åä¸€ä½æ•°å­—</span><br><span class="line">3. åè½¬åä¹˜ä»¥åŸå§‹ç¬¦å·æ¢å¤ç¬¦å·</span><br><span class="line">4. æ£€æŸ¥æ˜¯å¦è¶…å‡º 32 ä½æ•´æ•°èŒƒå›´ï¼Œå¦‚æœè¶…å‡ºè¿”å› 0</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reverse</span>(<span class="params">self, x: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># å®šä¹‰ 32 ä½æ•´æ•°èŒƒå›´</span></span><br><span class="line">        INT_MIN, INT_MAX = -(<span class="number">2</span>**<span class="number">31</span>), <span class="number">2</span>**<span class="number">31</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        sign = -<span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span> <span class="comment"># è®°å½•ç¬¦å·</span></span><br><span class="line">        x = <span class="built_in">abs</span>(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> x != <span class="number">0</span>:</span><br><span class="line">            digit = x % <span class="number">10</span> <span class="comment"># å–å‡ºæœ€åä¸€ä½æ•°å­—</span></span><br><span class="line">            result = result * <span class="number">10</span> + digit <span class="comment"># æ›´æ–°ç»“æœ</span></span><br><span class="line">            x //= <span class="number">10</span> <span class="comment"># å»æ‰æœ€åä¸€ä½</span></span><br><span class="line"></span><br><span class="line">        result *= sign <span class="comment"># æ¢å¤ç¬¦å·</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> result &lt; INT_MIN <span class="keyword">or</span> result &gt; INT_MAX:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">reverse</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="variable constant_">INT_MIN</span> = -(<span class="number">2</span> ** <span class="number">31</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="variable constant_">INT_MAX</span> = <span class="number">2</span> ** <span class="number">31</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">const</span> sign = x &lt; <span class="number">0</span> ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">        x = <span class="title class_">Math</span>.<span class="title function_">abs</span>(x);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (x !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> digit = x % <span class="number">10</span>; <span class="comment">// å–å‡ºæœ€åä¸€ä½æ•°å­—</span></span><br><span class="line">            result = result * <span class="number">10</span> + digit; <span class="comment">// æ›´æ–°ç»“æœ</span></span><br><span class="line">            x = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">10</span>); <span class="comment">// å»æ‰æœ€åä¸€ä½</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result *= sign;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (result &lt; <span class="variable constant_">INT_MIN</span> || result &gt; <span class="variable constant_">INT_MAX</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h4 id="ä½1çš„ä¸ªæ•°"><a href="#ä½1çš„ä¸ªæ•°" class="headerlink" title="ä½1çš„ä¸ªæ•°"></a>ä½<code>1</code>çš„ä¸ªæ•°</h4><blockquote><p><a href="https://leetcode.com/problems/number-of-1-bits/">Leetcode 191. Number of 1 Bits</a></p></blockquote><ul><li>é¢˜ç›®: ç»™å®šä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­<code>1</code>çš„ä¸ªæ•°ï¼ˆä¹Ÿç§°ä¸ºæ±‰æ˜æƒé‡ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Input: n = 11 (äºŒè¿›åˆ¶è¡¨ç¤ºä¸º 00000000000000000000000000001011)</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: 11 çš„äºŒè¿›åˆ¶è¡¨ç¤ºæœ‰ä¸‰ä¸ª 1</span><br></pre></td></tr></table></figure><ul><li>è§£æ³•: ä½æ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ä½¿ç”¨æŒ‰ä½ä¸ (n &amp; (n - 1)) æ¶ˆé™¤æœ€ä½ä½çš„ 1ï¼Œç›´åˆ° n ä¸º 0ï¼Œç»Ÿè®¡æ¬¡æ•°</span><br></pre></td></tr></table></figure><div class="tabs" id="mytabs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mytabs-1">Python</button></li><li class="tab"><button type="button" data-href="#mytabs-2">Javascript</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mytabs-1"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hammingWeight</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> n:</span><br><span class="line">            n &amp;= n - <span class="number">1</span> <span class="comment"># æ¯æ¬¡æ¶ˆé™¤æœ€ä½ä½çš„ 1</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mytabs-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="title function_">hammingWeight</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n !== <span class="number">0</span>) &#123;</span><br><span class="line">            n &amp;= n - <span class="number">1</span>; <span class="comment">// æ¯æ¬¡æ¶ˆé™¤æœ€ä½ä½çš„ 1</span></span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><ul><li>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§åŸºäºåˆ†æ²»æ€æƒ³çš„é«˜æ•ˆæ’åºç®—æ³•ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n log n)</code>ï¼Œæœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n^2)</code>ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸€æ¬¡æ’åºå°†å¾…æ’åºæ•°ç»„åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰å…ƒç´ éƒ½æ¯”å¦ä¸€éƒ¨åˆ†çš„æ‰€æœ‰å…ƒç´ å°ï¼Œç„¶åå¯¹è¿™ä¸¤éƒ¨åˆ†åˆ†åˆ«è¿›è¡Œé€’å½’æ’åºã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quicksort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># åŸºæœ¬æ¡ä»¶ï¼šå¦‚æœæ•°ç»„ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€‰æ‹©åŸºå‡†å…ƒç´ </span></span><br><span class="line">    pivot = arr[<span class="built_in">len</span>(arr) // <span class="number">2</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†æ•°ç»„åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼šå°äºåŸºå‡†çš„éƒ¨åˆ†ã€ç­‰äºåŸºå‡†çš„éƒ¨åˆ†ã€å¤§äºåŸºå‡†çš„éƒ¨åˆ†</span></span><br><span class="line">    left = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &lt; pivot]</span><br><span class="line">    middle = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x == pivot]</span><br><span class="line">    right = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &gt; pivot]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€’å½’æ’åºå·¦å³ä¸¤éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">return</span> quicksort(left) + middle + quicksort(right)</span><br></pre></td></tr></table></figure><hr><h3 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h3><ul><li>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ï¼Œå®ƒé€šè¿‡é‡å¤éå†åˆ—è¡¨ï¼Œå°†ç›¸é‚»çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œä½¿å¾—æ¯æ¬¡éå†åæœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰çš„å…ƒç´ é€æ­¥â€œå†’æ³¡â€åˆ°åˆ—è¡¨çš„æœ«å°¾ã€‚å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(nÂ²)</code>ï¼Œé€‚ç”¨äºå°è§„æ¨¡æ•°æ®çš„æ’åºã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bubble_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤–å±‚å¾ªç¯æ§åˆ¶éå†æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        swapped = <span class="literal">False</span>  <span class="comment"># ç”¨æ¥æ ‡è®°æ˜¯å¦å‘ç”Ÿäº¤æ¢</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å†…å±‚å¾ªç¯è¿›è¡Œç›¸é‚»å…ƒç´ çš„æ¯”è¾ƒå’Œäº¤æ¢</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, n - i - <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> arr[j] &gt; arr[j + <span class="number">1</span>]:</span><br><span class="line">                <span class="comment"># äº¤æ¢ç›¸é‚»å…ƒç´ </span></span><br><span class="line">                arr[j], arr[j + <span class="number">1</span>] = arr[j + <span class="number">1</span>], arr[j]</span><br><span class="line">                swapped = <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ•°ç»„å·²ç»æ’åºå®Œæ¯•</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> swapped:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><hr><h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h3><ul><li>æ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œé€‚åˆå¤„ç†å°è§„æ¨¡æ•°æ®ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æ„å»ºä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºçš„æ•°æ®ï¼Œåœ¨å·²æ’åºçš„åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(nÂ²)</code>ï¼Œåœ¨æ•°ç»„å‡ ä¹æœ‰åºçš„æƒ…å†µä¸‹è¡¨ç°å¾ˆå¥½ï¼Œæ¥è¿‘<code>O(n)</code>ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">insertion_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹éå†</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(arr)):</span><br><span class="line">        key = arr[i]  <span class="comment"># å½“å‰å¾…æ’å…¥çš„å…ƒç´ </span></span><br><span class="line">        j = i - <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å‘å‰éå†å·²æ’åºçš„åºåˆ—ï¼Œæ‰¾åˆ°é€‚åˆçš„ä½ç½®æ’å…¥å½“å‰å…ƒç´ </span></span><br><span class="line">        <span class="keyword">while</span> j &gt;= <span class="number">0</span> <span class="keyword">and</span> arr[j] &gt; key:</span><br><span class="line">            arr[j + <span class="number">1</span>] = arr[j]  <span class="comment"># å°†å¤§äº key çš„å…ƒç´ å‘åç§»åŠ¨</span></span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        arr[j + <span class="number">1</span>] = key  <span class="comment"># å°†å½“å‰å…ƒç´ æ’å…¥åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><hr><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><ul><li>å½’å¹¶æ’åºæ˜¯ä¸€ç§ç»å…¸çš„åˆ†æ²»ç®—æ³•ï¼Œé€šè¿‡å°†æ•°ç»„é€’å½’åœ°åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œåˆ†åˆ«è¿›è¡Œæ’åºï¼Œç„¶ååˆå¹¶è¿™ä¸¤ä¸ªæœ‰åºå­æ•°ç»„æ¥å®ç°æ’åºã€‚å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n log n)</code>ï¼Œå®ƒå…·æœ‰ç¨³å®šæ€§ä¸”é€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®çš„æ’åºã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># å¦‚æœæ•°ç»„é•¿åº¦å°äºç­‰äº1ï¼Œåˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ†å‰²æ•°ç»„</span></span><br><span class="line">    mid = <span class="built_in">len</span>(arr) // <span class="number">2</span></span><br><span class="line">    left_half = merge_sort(arr[:mid])</span><br><span class="line">    right_half = merge_sort(arr[mid:])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­æ•°ç»„</span></span><br><span class="line">    <span class="keyword">return</span> merge(left_half, right_half)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">left, right</span>):</span><br><span class="line">    sorted_array = []</span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€æ­¥æ¯”è¾ƒä¸¤ä¸ªå­æ•°ç»„ä¸­çš„å…ƒç´ ï¼ŒæŒ‰é¡ºåºåˆå¹¶</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(left) <span class="keyword">and</span> j &lt; <span class="built_in">len</span>(right):</span><br><span class="line">        <span class="keyword">if</span> left[i] &lt; right[j]:</span><br><span class="line">            sorted_array.append(left[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            sorted_array.append(right[j])</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†å‰©ä½™çš„å…ƒç´ åŠ å…¥åˆå¹¶ç»“æœ</span></span><br><span class="line">    sorted_array.extend(left[i:])</span><br><span class="line">    sorted_array.extend(right[j:])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> sorted_array</span><br></pre></td></tr></table></figure><hr><h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><ul><li>å †æ’åºæ˜¯ä¸€ç§åŸºäºäºŒå‰å †çš„æ•°æ®ç»“æ„çš„æ¯”è¾ƒæ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º<code>O(n log n)</code>ã€‚å †æ’åºåˆ†ä¸ºæœ€å¤§å †å’Œæœ€å°å †ï¼Œé€šå¸¸ä½¿ç”¨æœ€å¤§å †æ¥è¿›è¡Œå‡åºæ’åºã€‚å †æ’åºå…·æœ‰åŸåœ°æ’åºçš„ç‰¹ç‚¹ï¼Œä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">heapify</span>(<span class="params">arr, n, i</span>):</span><br><span class="line">    largest = i  <span class="comment"># è®¾å½“å‰èŠ‚ç‚¹ i ä¸ºæœ€å¤§</span></span><br><span class="line">    left = <span class="number">2</span> * i + <span class="number">1</span>  <span class="comment"># å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">    right = <span class="number">2</span> * i + <span class="number">2</span>  <span class="comment"># å³å­èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœå·¦å­èŠ‚ç‚¹å­˜åœ¨ï¼Œä¸”å¤§äºå½“å‰æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">if</span> left &lt; n <span class="keyword">and</span> arr[left] &gt; arr[largest]:</span><br><span class="line">        largest = left</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœå³å­èŠ‚ç‚¹å­˜åœ¨ï¼Œä¸”å¤§äºå½“å‰æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">if</span> right &lt; n <span class="keyword">and</span> arr[right] &gt; arr[largest]:</span><br><span class="line">        largest = right</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœæœ€å¤§å€¼ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œè¿›è¡Œäº¤æ¢å¹¶ç»§ç»­è°ƒæ•´å †</span></span><br><span class="line">    <span class="keyword">if</span> largest != i:</span><br><span class="line">        arr[i], arr[largest] = arr[largest], arr[i]</span><br><span class="line">        heapify(arr, n, largest)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heap_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæœ€å¤§å †</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n // <span class="number">2</span> - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        heapify(arr, n, i)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># äº¤æ¢å…ƒç´ ï¼Œå¹¶é‡æ–°è°ƒæ•´å †ç»“æ„</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        arr[i], arr[<span class="number">0</span>] = arr[<span class="number">0</span>], arr[i]  <span class="comment"># å°†å †é¡¶å…ƒç´ ç§»åˆ°æ•°ç»„æœ«å°¾</span></span><br><span class="line">        heapify(arr, i, <span class="number">0</span>)  <span class="comment"># è°ƒæ•´å‰©ä¸‹çš„éƒ¨åˆ†ä¸ºæœ€å¤§å †</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><hr><h3 id="æ·±åº¦ä¼˜å…ˆæœç´¢-DFS-amp-å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢-DFS-amp-å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS) &amp; å¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS)"></a>æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS) &amp; å¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS)</h3><ul><li>æ·±åº¦ä¼˜å…ˆæœç´¢: <code>DFS</code>æ˜¯ä¸€ç§é€šè¿‡æ·±å…¥æ¯ä¸€ä¸ªèŠ‚ç‚¹å¹¶å°½å¯èƒ½æ·±åœ°æœç´¢å…¶å­èŠ‚ç‚¹çš„éå†ç®—æ³•ã€‚å¯ä»¥ä½¿ç”¨é€’å½’æˆ–æ˜¾å¼æ ˆæ¥å®ç°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dfs_recursive</span>(<span class="params">graph, node, visited=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> visited <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        visited = <span class="built_in">set</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¿é—®å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">print</span>(node)</span><br><span class="line">    visited.add(node)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é€’å½’è®¿é—®ç›¸é‚»èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> neighbor <span class="keyword">in</span> graph[node]:</span><br><span class="line">        <span class="keyword">if</span> neighbor <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">            dfs_recursive(graph, neighbor, visited)</span><br></pre></td></tr></table></figure><ul><li>å¹¿åº¦ä¼˜å…ˆæœç´¢: <code>BFS</code>æ˜¯ä¸€ç§é€å±‚éå†ç®—æ³•ï¼Œå…ˆè®¿é—®å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œå†ç»§ç»­è®¿é—®è¿™äº›ç›¸é‚»èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹ã€‚<code>BFS</code>é€šå¸¸ç”¨é˜Ÿåˆ—æ¥å®ç°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bfs</span>(<span class="params">graph, start</span>):</span><br><span class="line">    visited = <span class="built_in">set</span>()</span><br><span class="line">    queue = deque([start])  <span class="comment"># ä½¿ç”¨åŒç«¯é˜Ÿåˆ—ä½œä¸ºé˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> queue:</span><br><span class="line">        node = queue.popleft()  <span class="comment"># ä»é˜Ÿåˆ—ä¸­å–å‡ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">            <span class="built_in">print</span>(node)</span><br><span class="line">            visited.add(node)</span><br><span class="line">            <span class="comment"># å°†ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">            queue.extend(graph[node])</span><br></pre></td></tr></table></figure><hr><h3 id="å‰åºï¼Œä¸­åºï¼Œååº"><a href="#å‰åºï¼Œä¸­åºï¼Œååº" class="headerlink" title="å‰åºï¼Œä¸­åºï¼Œååº"></a>å‰åºï¼Œä¸­åºï¼Œååº</h3><ul><li>å‰åºéå†é¡ºåºä¸ºï¼šæ ¹èŠ‚ç‚¹ -&gt; å·¦å­æ ‘ -&gt; å³å­æ ‘</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">preorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        <span class="built_in">print</span>(root.val)  <span class="comment"># å…ˆè®¿é—®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        preorder(root.left)  <span class="comment"># é€’å½’è®¿é—®å·¦å­æ ‘</span></span><br><span class="line">        preorder(root.right)  <span class="comment"># é€’å½’è®¿é—®å³å­æ ‘</span></span><br></pre></td></tr></table></figure><ul><li>ä¸­åºéå†é¡ºåºä¸ºï¼šå·¦å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹ -&gt; å³å­æ ‘</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        inorder(root.left)  <span class="comment"># é€’å½’è®¿é—®å·¦å­æ ‘</span></span><br><span class="line">        <span class="built_in">print</span>(root.val)  <span class="comment"># è®¿é—®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        inorder(root.right)  <span class="comment"># é€’å½’è®¿é—®å³å­æ ‘</span></span><br></pre></td></tr></table></figure><ul><li>ååºéå†é¡ºåºä¸ºï¼šå·¦å­æ ‘ -&gt; å³å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">postorder</span>(<span class="params">root</span>):</span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        postorder(root.left)  <span class="comment"># é€’å½’è®¿é—®å·¦å­æ ‘</span></span><br><span class="line">        postorder(root.right)  <span class="comment"># é€’å½’è®¿é—®å³å­æ ‘</span></span><br><span class="line">        <span class="built_in">print</span>(root.val)  <span class="comment"># æœ€åè®¿é—®æ ¹èŠ‚ç‚¹</span></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯é¢è¯•ç¬”è®°</title>
      <link href="/posts/c7d67744.html"/>
      <url>/posts/c7d67744.html</url>
      
        <content type="html"><![CDATA[<h3 id="1-CSS-é¢˜ç›®"><a href="#1-CSS-é¢˜ç›®" class="headerlink" title="1. CSS é¢˜ç›®"></a>1. CSS é¢˜ç›®</h3><h4 id="1-1-ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢"><a href="#1-1-ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢" class="headerlink" title="1.1 ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢"></a>1.1 ç”»ç­‰è…°ç›´è§’ä¸‰è§’å½¢</h4><ul><li><p>è¿™é¢˜æ˜¯ç¾å›¢å‰ç«¯é¢è¯•ä¸€é¢é¢˜: <a href="https://juejin.cn/post/6950081305560219679?searchId=202410130111434E030964573D8F88A42E">å‚è€ƒé“¾æ¥</a></p></li><li><p>ç¬¬ä¸€ç§æ–¹æ³•: ä½¿ç”¨<code>boarder</code></p></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/mojg3tqL/13/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç¬¬äºŒç§æ–¹æ³•: ä½¿ç”¨<code>linear-gradient</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/uwykmf1a/4/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç¬¬ä¸‰ç§æ–¹æ³•: ä½¿ç”¨<code>clip-path</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/7eowjy52/15/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h4 id="1-2-ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­"><a href="#1-2-ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="1.2 ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­"></a>1.2 ä¸å®šå®½é«˜æ°´å¹³å‚ç›´å±…ä¸­</h4><ul><li>ç¬¬ä¸€ç§æ–¹æ³•: ä½¿ç”¨<code>Flexbox</code> (ä¹Ÿå¯ä»¥çˆ¶å…ƒç´ æ˜¯<code>flex</code>ç„¶åå­å…ƒç´ <code>margin:auto</code>)</li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/9fa0m5rg/14/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç¬¬äºŒç§æ–¹æ³•: ä½¿ç”¨<code>Grid</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/0b2oduje/4/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li>ç¬¬ä¸‰ç§æ–¹æ³•: ç»å¯¹å®šä½ + <code>transform</code></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/u1e7a2mv/5/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h4 id="1-3-æ­£æ–¹å½¢å­å…ƒç´ "><a href="#1-3-æ­£æ–¹å½¢å­å…ƒç´ " class="headerlink" title="1.3 æ­£æ–¹å½¢å­å…ƒç´ "></a>1.3 æ­£æ–¹å½¢å­å…ƒç´ </h4><ul><li>è¿™é¢˜æ˜¯å­—èŠ‚è·³åŠ¨ä¸€é¢é¢˜: çˆ¶å…ƒç´ çš„å®½é«˜ä¸å›ºå®šï¼Œå¹¶ä¸”å¯ä»¥éšçª—å£å˜å½¢ï¼Œè€Œå­å…ƒç´ å¿…é¡»ä¿æŒæ­£æ–¹å½¢ (åªèƒ½ä½¿ç”¨<code>CSS</code>)<ul><li>è§£å†³æ–¹æ¡ˆ: å­å…ƒç´ ä½¿ç”¨ç™¾åˆ†æ¯”å®½åº¦å¹¶ä½¿ç”¨<code>aspect-ratio</code>å±æ€§æ¥ä¿æŒå­å…ƒç´ çš„æ­£æ–¹å½¢æ¯”ä¾‹</li></ul></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/qy79su82/27/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h4 id="1-4-position-å®šä½"><a href="#1-4-position-å®šä½" class="headerlink" title="1.4 position å®šä½"></a>1.4 position å®šä½</h4><ul><li><p><code>position: static</code>ï¼ˆé»˜è®¤å®šä½ï¼‰: æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å®šä½æ–¹å¼ã€‚å…ƒç´ æŒ‰ç…§æ­£å¸¸çš„æ–‡æ¡£æµæ’åˆ—ï¼Œä¸ä¼šå—<code>top</code>ã€<code>right</code>ã€<code>bottom</code>æˆ–<code>left</code>ç­‰å±æ€§çš„å½±å“</p></li><li><p><code>position: relative</code>ï¼ˆç›¸å¯¹å®šä½ï¼‰: ç›¸å¯¹äºå…ƒç´ è‡ªèº«çš„åŸå§‹ä½ç½®è¿›è¡Œå®šä½ï¼Œä½†å¯ä»¥é€šè¿‡<code>top</code>ã€<code>right</code>ã€<code>bottom</code>ã€<code>left</code>ç­‰å±æ€§è°ƒæ•´å…ƒç´ çš„ç›¸å¯¹ä½ç½®</p></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/5qb29Lzg/2/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li><code>position: absolute</code>ï¼ˆç»å¯¹å®šä½ï¼‰: ç›¸å¯¹äºæœ€è¿‘çš„é<code>static</code>å®šä½çš„çˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚å¦‚æœæ²¡æœ‰é<code>static</code>çš„çˆ¶å…ƒç´ ï¼Œåˆ™ç›¸å¯¹äºæ–‡æ¡£çš„æ ¹å…ƒç´ ï¼ˆé€šå¸¸æ˜¯<code>&lt;html&gt;</code>æˆ–<code>&lt;body&gt;</code>ï¼‰è¿›è¡Œå®šä½</li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/3jmu7q8a/7/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><ul><li><p><code>position: fixed</code>ï¼ˆå›ºå®šå®šä½ï¼‰: ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ï¼Œæ— è®ºé¡µé¢å¦‚ä½•æ»šåŠ¨ï¼Œå…ƒç´ å§‹ç»ˆä¿æŒåœ¨æµè§ˆå™¨çª—å£ä¸­çš„å›ºå®šä½ç½®</p></li><li><p><code>position: sticky</code>ï¼ˆç²˜æ€§å®šä½ï¼‰: ç»“åˆäº†<code>relative</code>å’Œ<code>fixed</code>çš„ç‰¹æ€§ã€‚å…ƒç´ ä¸€å¼€å§‹æ˜¯ç›¸å¯¹äºæ–‡æ¡£æµå®šä½çš„ï¼ˆ<code>relative</code>ï¼‰ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œå…ƒç´ ä¼šå˜ä¸ºå›ºå®šå®šä½ï¼ˆ<code>fixed</code>ï¼‰</p><ul><li>çˆ¶å…ƒç´ ä¸èƒ½<code>overflow:hidden</code>æˆ–è€…<code>overflow:auto</code>å±æ€§</li><li>å¿…é¡»æŒ‡å®š<code>top</code>ã€<code>bottom</code>ã€<code>left</code>ã€<code>right</code>å››ä¸ªå€¼ä¹‹ä¸€ï¼Œå¦åˆ™åªä¼šå¤„äºç›¸å¯¹å®šä½</li></ul></li></ul><iframe width="100%" height="300" src="//jsfiddle.net/HDL52/ybk3o9Lu/23/embedded/html,css,result/dark/" frameborder="0" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe><hr><h4 id="1-5-ç›’æ¨¡å‹"><a href="#1-5-ç›’æ¨¡å‹" class="headerlink" title="1.5 ç›’æ¨¡å‹"></a>1.5 ç›’æ¨¡å‹</h4><p>ç›’æ¨¡å‹åˆ†ä¸º<code>IE</code>ç›’æ¨¡å‹å’Œ<code>W3C</code>æ ‡å‡†ç›’æ¨¡å‹</p><ul><li>åœ¨æ ‡å‡†ç›’æ¨¡å‹ä¸‹ï¼Œä¸€ä¸ªå—çš„æ€»å®½åº¦ &#x3D; <code>width + margin(å·¦å³) + padding(å·¦å³) + border(å·¦å³)</code></li><li>åœ¨<code>IE</code>ç›’æ¨¡å‹ä¸‹ï¼Œä¸€ä¸ªå—çš„æ€»å®½åº¦ &#x3D; <code>width + margin(å·¦å³)</code>ï¼ˆå³<code>width</code>å·²ç»åŒ…å«äº†<code>padding</code>å’Œ<code>border</code>å€¼ï¼‰</li></ul><blockquote><p>å½“è®¾ç½®<code>box-sizing:content-box</code>æ—¶ï¼Œé‡‡ç”¨æ ‡å‡†ç›’æ¨¡å‹è®¡ç®—ï¼Œä¹Ÿæ˜¯é»˜è®¤æ¨¡å¼<br>å½“è®¾ç½®<code>box-sizing:border-box</code>æ—¶ï¼Œé‡‡ç”¨<code>IE</code>ç›’æ¨¡å‹è®¡ç®—</p></blockquote><ul><li><code>JS</code>å¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜<ul><li><code>window.getComputedStyle(dom).width/height</code>: å–åˆ°çš„æ˜¯æœ€ç»ˆæ¸²æŸ“åçš„å®½å’Œé«˜</li><li><code>dom.getBoundingClientRect().width/height</code>: å¾—åˆ°æ¸²æŸ“åçš„å®½å’Œé«˜ï¼Œè¿˜å¯ä»¥å–åˆ°ç›¸å¯¹äºè§†çª—çš„ä¸Šä¸‹å·¦å³çš„è·ç¦»</li><li><code>dom.offsetWidth/offsetHeight</code>: åŒ…æ‹¬é«˜åº¦ï¼ˆå®½åº¦ï¼‰ã€å†…è¾¹è·å’Œè¾¹æ¡†ï¼Œä¸åŒ…æ‹¬å¤–è¾¹è· (å…¼å®¹æ€§æœ€å¥½)</li></ul></li></ul><hr><h4 id="1-6-CSS-å®ç°æ‰‡å½¢"><a href="#1-6-CSS-å®ç°æ‰‡å½¢" class="headerlink" title="1.6 CSS å®ç°æ‰‡å½¢"></a>1.6 CSS å®ç°æ‰‡å½¢</h4><hr><h4 id="1-7-BFC"><a href="#1-7-BFC" class="headerlink" title="1.7 BFC"></a>1.7 BFC</h4><ul><li><code>BFC</code>æ˜¯<code>CSS</code>å¸ƒå±€çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ˜¯ä¸€å—ç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œæ˜¯ä¸€ä¸ªç¯å¢ƒï¼Œé‡Œé¢çš„å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å…ƒç´ </li></ul><hr><h3 id="2-JS-é¢˜ç›®"><a href="#2-JS-é¢˜ç›®" class="headerlink" title="2. JS é¢˜ç›®"></a>2. JS é¢˜ç›®</h3><h4 id="2-1-var-ä¸å¾ªç¯"><a href="#2-1-var-ä¸å¾ªç¯" class="headerlink" title="2.1 var ä¸å¾ªç¯"></a>2.1 var ä¸å¾ªç¯</h4><ul><li>å­—èŠ‚è·³åŠ¨ä¸€é¢çš„é¢˜ç›®</li><li>ä¸‹é¢å¾ªç¯çš„æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼æ˜¯ä»€ä¹ˆï¼Œ<code>i</code>åœ¨å¾ªç¯ç»“æŸåçš„å€¼æ˜¯ä»€ä¹ˆ</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è¿™ä¸ªå¾ªç¯å°†ä¼šè¾“å‡º<code>0 1 2 3 4</code>ï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼ä¸º<code>5</code></p></li><li><p>ç”±äº<code>var</code>å£°æ˜çš„å˜é‡åœ¨æ•´ä¸ªå‡½æ•°ï¼ˆæˆ–å…¨å±€èŒƒå›´å†…ï¼‰éƒ½æ˜¯å…±äº«çš„ï¼Œå®ƒä¸å—å—ä½œç”¨åŸŸçš„é™åˆ¶ã€‚å› æ­¤ï¼Œ<code>i</code>åœ¨æ•´ä¸ªå‡½æ•°æˆ–è„šæœ¬èŒƒå›´å†…æ˜¯å¯è§çš„ã€‚æ¢å¥è¯è¯´ï¼Œ<code>i</code>ä»ç„¶åœ¨å¾ªç¯ç»“æŸåå­˜åœ¨å¹¶ä¸”å¯ä»¥è®¿é—®</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™ä¸ªå¾ªç¯å°†ä¼šè¾“å‡º<code>5 5 5 5 5</code>ï¼Œ<code>i</code>çš„æœ€ç»ˆå€¼ä¸º<code>5</code></li><li>ç”±äº<code>var</code>æ˜¯å‡½æ•°çº§ä½œç”¨åŸŸï¼Œæ‰€æœ‰çš„<code>setTimeout</code>å›è°ƒå‡½æ•°åœ¨æ‰§è¡Œæ—¶è®¿é—®çš„éƒ½æ˜¯åŒä¸€ä¸ª<code>i</code>ï¼Œå³å¾ªç¯ç»“æŸæ—¶çš„<code>i</code>å€¼<code>5</code>ã€‚å› ä¸º<code>setTimeout</code>æ˜¯å¼‚æ­¥çš„ï¼Œå®ƒä¼šåœ¨<code>1</code>ç§’åæ‰§è¡Œï¼Œæ­¤æ—¶å¾ªç¯æ—©å·²ç»“æŸï¼Œ<code>i</code>å·²ç»è¢«æ›´æ–°ä¸º<code>5</code></li><li>è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨<code>let</code>æˆ–é—­åŒ…å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿æ¯æ¬¡è¿­ä»£æ—¶<code>i</code>çš„å€¼æ˜¯ç‹¬ç«‹çš„</li></ul><hr><h4 id="2-2-æ‰‹å†™å€’è®¡æ—¶"><a href="#2-2-æ‰‹å†™å€’è®¡æ—¶" class="headerlink" title="2.2 æ‰‹å†™å€’è®¡æ—¶"></a>2.2 æ‰‹å†™å€’è®¡æ—¶</h4><ul><li><p>ç¾å›¢ä¸€é¢çš„é¢˜ç›®</p></li><li><p>æ‰‹å†™ä¸€ä¸ªå€’è®¡æ—¶å‡½æ•°ï¼Œè¦æ±‚è¾“å‡º<code>5 4 3 2 1</code>ï¼Œæ¯éš”ä¸€åˆ†é’Ÿè¾“å‡ºä¸€ä¸ªå€¼</p></li><li><p>æ–¹æ³•ä¸€: ä½¿ç”¨<code>setInterval</code></p><ul><li><code>setInterval</code>ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…åå¤æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œç›´åˆ°æ‰‹åŠ¨æ¸…é™¤è¿™ä¸ªå®šæ—¶å™¨</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">if</span> (count === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(intervalId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">60000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">countdown</span>();</span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•äºŒ: ä½¿ç”¨<code>Generator</code>å‡½æ•°<ul><li>ä½¿ç”¨<code>Generator</code>å‡½æ•°å¯ä»¥é€šè¿‡<code>yield</code>æš‚åœå’Œæ¢å¤å‡½æ•°çš„æ‰§è¡Œï¼Œç»“åˆ<code>setTimeout</code>æ¥å®ç°å€’è®¡æ—¶</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">countdownGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">while</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> count;</span><br><span class="line">        count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> generator = <span class="title function_">countdownGenerator</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">nextCountdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; value, done &#125; = generator.<span class="title function_">next</span>();</span><br><span class="line">        <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">            <span class="built_in">setTimeout</span>(nextCountdown, <span class="number">60000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">nextCountdown</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">countdown</span>();</span><br></pre></td></tr></table></figure><hr><h4 id="2-3-é˜²æŠ–å’ŒèŠ‚æµ"><a href="#2-3-é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="2.3 é˜²æŠ–å’ŒèŠ‚æµ"></a>2.3 é˜²æŠ–å’ŒèŠ‚æµ</h4><ul><li><p>å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>loadash</code>è¿™ç§åº“æ¥å®ç°</p></li><li><p>é˜²æŠ– <code>Debounce</code></p><ul><li>é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘<code>n</code>ç§’ååœ¨æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™<code>n</code>ç§’å†…æ—¶é—´åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶</li><li>å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay = <span class="number">500</span></span>) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡é—­åŒ…ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨ id</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span></span><br><span class="line">        <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// å¼€å§‹è®¾å®šä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨ç»“æŸåæ‰§è¡Œä¼ å…¥çš„å‡½æ•° fn</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œå¿…é¡»æ˜¯ç®­å¤´å‡½æ•°ï¼Œä¸ç„¶ this æŒ‡å‘ windowï¼Œè¦è®© this å°±æŒ‡å‘ fn çš„è°ƒç”¨è€…</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; </span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ debounce å‡½æ•°è¿”å›æ–°å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> betterFn = <span class="title function_">debounce</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn é˜²æŠ–æ‰§è¡Œäº†&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// åœæ­¢æ»‘åŠ¨ 1 ç§’åæ‰§è¡Œå‡½æ•° () =&gt; console.log(&#x27;fn é˜²æŠ–æ‰§è¡Œäº†&#x27;)</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, betterFn)</span><br></pre></td></tr></table></figure><blockquote><p>é˜²æŠ–å‡½æ•°åˆ†ä¸ºéç«‹å³æ‰§è¡Œç‰ˆå’Œç«‹å³æ‰§è¡Œç‰ˆï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥å†³å®šéœ€è¦ä½¿ç”¨å“ªä¸€ä¸ªç‰ˆæœ¬çš„é˜²æŠ–å‡½æ•°</p></blockquote><ul><li>èŠ‚æµ <code>Throttle</code><ul><li>èŠ‚æµå°±æ˜¯ä¸€å®šæ—¶é—´å†…æ‰§è¡Œä¸€æ¬¡äº‹ä»¶ï¼Œå³ä½¿é‡å¤è§¦å‘ï¼Œä¹Ÿåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ</li><li>å¯ä»¥ä½¿ç”¨åœ¨ç›‘å¬æ»šåŠ¨<code>scroll</code>äº‹ä»¶ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡</li></ul></li></ul><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">æ—¶é—´æˆ³ç‰ˆæœ¬</button></li><li class="tab"><button type="button" data-href="#test-2">å®šæ—¶å™¨ç‰ˆæœ¬</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">throttle</span> = (<span class="params">fn, delay = <span class="number">500</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ä¸Šä¸€æ¬¡æ‰§è¡Œ fn çš„æ—¶é—´</span></span><br><span class="line">  <span class="keyword">let</span> prev = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ—¶é—´ï¼Œè½¬æ¢æˆæ—¶é—´æˆ³ï¼Œå•ä½æ¯«ç§’</span></span><br><span class="line">    <span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="comment">// å¦‚æœå·®å€¼å¤§äºç­‰äºè®¾ç½®çš„ç­‰å¾…æ—¶é—´å°±æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt;= delay) &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      prev = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ throttle å‡½æ•°è¿”å›æ–°å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> betterFn = <span class="title function_">throttle</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn å‡½æ•°æ‰§è¡Œäº†&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// æ¯ 10 æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ betterFn å‡½æ•°ï¼Œä½†æ˜¯åªæœ‰æ—¶é—´å·®å¤§äº 1s æ—¶æ‰ä¼šæ‰§è¡Œ fn</span></span><br><span class="line"><span class="built_in">setInterval</span>(betterFn, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">throttle</span> = (<span class="params">fn, delay = <span class="number">500</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      <span class="comment">// æ‰§è¡Œå®Œåï¼Œéœ€é‡ç½®å®šæ—¶å™¨ï¼Œä¸ç„¶ timer ä¸€ç›´æœ‰å€¼ï¼Œæ— æ³•å¼€å¯ä¸‹ä¸€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>å¯¹äºèŠ‚æµï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ï¼Œåˆ†åˆ«æ˜¯æ—¶é—´æˆ³ç‰ˆå’Œå®šæ—¶å™¨ç‰ˆã€‚æ—¶é—´æˆ³ç‰ˆçš„å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…å¼€å§‹çš„æ—¶å€™ï¼Œè€Œå®šæ—¶å™¨ç‰ˆçš„å‡½æ•°è§¦å‘æ˜¯åœ¨æ—¶é—´æ®µå†…ç»“æŸçš„æ—¶å€™</p></blockquote><hr><h4 id="2-4-undefined-ä¸-null-çš„åŒºåˆ«"><a href="#2-4-undefined-ä¸-null-çš„åŒºåˆ«" class="headerlink" title="2.4 undefined ä¸ null çš„åŒºåˆ«"></a>2.4 undefined ä¸ null çš„åŒºåˆ«</h4><ul><li><code>undefined</code>è¡¨ç¤ºâ€ç¼ºå°‘å€¼â€ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰</li><li><code>null</code>è¡¨ç¤ºâ€æ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼</li></ul><hr><h4 id="2-5-æµ…æ‹·è´å’Œæ·±æ‹·è´"><a href="#2-5-æµ…æ‹·è´å’Œæ·±æ‹·è´" class="headerlink" title="2.5 æµ…æ‹·è´å’Œæ·±æ‹·è´"></a>2.5 æµ…æ‹·è´å’Œæ·±æ‹·è´</h4><ul><li>æµ…æ‹·è´<ul><li>æµ…æ‹·è´æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´</li><li>å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">shallowCopy</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// åªæ‹·è´å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹æˆ– null ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || object === <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// hasOwnProperty åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡è‡ªèº«å±æ€§ï¼Œä¼šå¿½ç•¥ä»åŸå‹é“¾ä¸Šç»§æ‰¿çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key))</span><br><span class="line">      newObj[key] = obj[key]; <span class="comment">// åªæ‹·è´å¯¹è±¡æœ¬èº«çš„å±æ€§</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="keyword">var</span> obj =&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">8</span>,</span><br><span class="line">    <span class="attr">pal</span>:[<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;ç‹å…­&#x27;</span>,<span class="string">&#x27;ç‹ä¸ƒ&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="title function_">shallowCopy</span>(obj);</span><br><span class="line">obj2.<span class="property">name</span> = <span class="string">&#x27;æå››&#x27;</span></span><br><span class="line">obj2.<span class="property">pal</span>[<span class="number">0</span>] = <span class="string">&#x27;ç‹éº»å­&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">//&#123;age: 8, name: &quot;å¼ ä¸‰&quot;, pal: [&#x27;ç‹éº»å­&#x27;, &#x27;ç‹å…­&#x27;, &#x27;ç‹ä¸ƒ&#x27;]&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2); <span class="comment">//&#123;age: 8, name: &quot;æå››&quot;, pal: [&#x27;ç‹éº»å­&#x27;, &#x27;ç‹å…­&#x27;, &#x27;ç‹ä¸ƒ&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><ul><li>æ·±æ‹·è´<ul><li>æ·±æ‹·è´æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥ï¼Œä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡ï¼Œä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">obj, map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) &#123;</span><br><span class="line">  <span class="comment">// åŸºæœ¬ç±»å‹æˆ– null ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj === <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ©ç”¨ map è§£å†³å¾ªç¯å¼•ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">has</span>(obj))</span><br><span class="line">    <span class="keyword">return</span> map.<span class="title function_">get</span>(obj);</span><br><span class="line"></span><br><span class="line">  map.<span class="title function_">set</span>(obj, newObj); <span class="comment">// å°†å½“å‰å¯¹è±¡ä½œä¸º keyï¼Œå…‹éš†å¯¹è±¡ä½œä¸º value</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key))</span><br><span class="line">      newObj[key] = <span class="title function_">deepCopy</span>(object[key], map); <span class="comment">// é€’å½’</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">    name : <span class="string">&#x27;AKã€å“’å“’å“’&#x27;</span>,</span><br><span class="line">    arr : [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>],<span class="number">4</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> obj2=<span class="title function_">deepCopy</span>(obj1)</span><br><span class="line">obj2.<span class="property">name</span> = <span class="string">&quot;å“’å“’å“’&quot;</span>;</span><br><span class="line">obj2.<span class="property">arr</span>[<span class="number">1</span>] = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>] ; <span class="comment">// æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜</span></span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj1&#x27;</span>,obj1) <span class="comment">// obj1 &#123; name: &#x27;AKã€å“’å“’å“’&#x27;, arr: [ 1, [ 2, 3 ], 4 ] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;obj2&#x27;</span>,obj2) <span class="comment">// obj2 &#123; name: &#x27;å“’å“’å“’&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span></span><br></pre></td></tr></table></figure><hr><h4 id="2-6-å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#2-6-å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="2.6 å‡½æ•°æŸ¯é‡ŒåŒ–"></a>2.6 å‡½æ•°æŸ¯é‡ŒåŒ–</h4><ul><li>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯</li></ul><blockquote><p>æŸ¯é‡ŒåŒ–å®é™…æ˜¯æŠŠç®€å•çš„é—®é¢˜å¤æ‚åŒ–ï¼Œä½†æ˜¯å¤æ‚åŒ–çš„åŒæ—¶ï¼Œåœ¨ä½¿ç”¨å‡½æ•°æ—¶æ‹¥æœ‰äº†æ›´åŠ å¤šçš„è‡ªç”±åº¦ã€‚è€Œå¯¹äºå‡½æ•°å‚æ•°çš„è‡ªç”±å¤„ç†ï¼Œæ­£æ˜¯æŸ¯é‡ŒåŒ–çš„æ ¸å¿ƒæ‰€åœ¨ã€‚æŸ¯é‡ŒåŒ–æœ¬è´¨ä¸Šæ˜¯é™ä½é€šç”¨æ€§ï¼Œæé«˜é€‚ç”¨æ€§</p></blockquote><ul><li>å‚æ•°å®šé•¿çš„æŸ¯é‡ŒåŒ–<ul><li>å‡è®¾å­˜åœ¨ä¸€ä¸ªåŸå‡½æ•°<code>fn</code>ï¼Œ<code>fn</code>æ¥å—ä¸‰ä¸ªå‚æ•°<code>a, b, c</code>ï¼Œé‚£ä¹ˆå‡½æ•°<code>fn</code>æœ€å¤šè¢«æŸ¯é‡ŒåŒ–ä¸‰æ¬¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="comment">// è·å–åŸå‡½æ•°çš„å‚æ•°é•¿åº¦</span></span><br><span class="line">  <span class="keyword">const</span> argLen = fn.<span class="property">length</span>;</span><br><span class="line">  <span class="comment">// ä¿å­˜é¢„ç½®å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> presetArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼šç»§ç»­ä¼ å‚</span></span><br><span class="line">    <span class="keyword">const</span> restArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">const</span> allArgs = [...presetArgs, ...restArgs]</span><br><span class="line">    <span class="keyword">if</span> (allArgs.<span class="property">length</span> &gt;= argLen) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå‚æ•°å¤Ÿäº†ï¼Œå°±æ‰§è¡ŒåŸå‡½æ•°</span></span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, allArgs)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦åˆ™ç»§ç»­æŸ¯é‡ŒåŒ–</span></span><br><span class="line">      <span class="keyword">return</span> curry.<span class="title function_">call</span>(<span class="literal">null</span>, fn, ...allArgs)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> curried = <span class="title function_">curry</span>(sum);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">//6</span></span><br></pre></td></tr></table></figure><ul><li>å‚æ•°ä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–<ul><li>å¦‚æœè¦æ”¯æŒå‚æ•°ä¸å®šé•¿çš„åœºæ™¯ï¼Œå·²ç»æŸ¯é‡ŒåŒ–çš„å‡½æ•°åœ¨æ‰§è¡Œå®Œæ¯•æ—¶ä¸èƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œåªèƒ½è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚åŒæ—¶è¦è®©<code>JS</code>å¼•æ“åœ¨è§£æå¾—åˆ°çš„è¿™ä¸ªç»“æœæ—¶ï¼Œèƒ½æ±‚å‡ºé¢„æœŸçš„å€¼</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¿å­˜é¢„ç½®å‚æ•°</span></span><br><span class="line">  <span class="keyword">const</span> presetArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">curried</span> () &#123;</span><br><span class="line">    <span class="comment">// æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼šç»§ç»­ä¼ å‚</span></span><br><span class="line">    <span class="keyword">const</span> restArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">const</span> allArgs = [...presetArgs, ...restArgs]</span><br><span class="line">    <span class="keyword">return</span> curry.<span class="title function_">call</span>(<span class="literal">null</span>, fn, ...allArgs)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é‡å†™toString</span></span><br><span class="line">  curried.<span class="property">toString</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="literal">null</span>, presetArgs)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> curried;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dynamicAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [...<span class="variable language_">arguments</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> prev + curr</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> add = <span class="title function_">curry</span>(dynamicAdd);</span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>, <span class="number">4</span>)(<span class="number">5</span>, <span class="number">6</span>) <span class="comment">// 21</span></span><br></pre></td></tr></table></figure><hr><h4 id="2-7-æ•°ç»„æ‰å¹³åŒ–"><a href="#2-7-æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="2.7 æ•°ç»„æ‰å¹³åŒ–"></a>2.7 æ•°ç»„æ‰å¹³åŒ–</h4><blockquote><p>å®ç°æ‰å¹³åŒ–çš„æ–¹æ³•ï¼Œå°è£…<code>flatten</code><br>å·²æœ‰å¤šçº§åµŒå¥—æ•°ç»„<code>[1, [2, [3, [4, 5]]], 6]</code> å°†å…¶æ‰å¹³åŒ–å¤„ç†ï¼Œè¾“å‡º<code>[1,2,3,4,5,6]</code></p></blockquote><ul><li><code>ES6 flat</code><ul><li><code>flat(depth)</code>æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ä½¿ç”¨<code>Infinity</code>ï¼Œå¯å±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]], <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> params.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: [1,2,3,4,5,6]</span></span><br></pre></td></tr></table></figure><blockquote><p>â­ ç›´æ¥ä½¿ç”¨è‡ªå¸¦çš„æ–¹æ³•å¯ä»¥å¾ˆå¿«çš„å®ç°, ä½†æ˜¯é¢è¯•å®˜å½“ç„¶ä¸å¸Œæœ›å°±çœ‹åˆ°è¿™äº›å‘€</p></blockquote><ul><li>å¾ªç¯é€’å½’<ul><li>å¾ªç¯åˆ¤æ–­æ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯å¦æ˜¯æ•°ç»„<code>Array.isArray(arr[i])</code></li><li>æ˜¯æ•°ç»„å°±é€’å½’è°ƒç”¨æ‰å¹³åŒ–ä»£ç <code>result = result.concat(flatten(arr[i]));</code></li><li>ä¸æ˜¯æ•°ç»„,ç›´æ¥é€šè¿‡<code>push</code>æ·»åŠ åˆ°è¿”å›å€¼æ•°ç»„</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr[i])) &#123;</span><br><span class="line">      result = result.<span class="title function_">concat</span>(<span class="title function_">flatten</span>(arr[i]));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result.<span class="title function_">push</span>(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­ ä½¿ç”¨é€’å½’å†™å‡ºæ•°ç»„æ‰å¹³åŒ–, ä½†æ˜¯ç¼ºå°‘æ§åˆ¶å±‚çº§å…³ç³»</p></blockquote><ul><li>å¢åŠ å‚æ•°æ§åˆ¶æ‰å¹³åŒ–æ·±åº¦<ul><li>å¯ä»¥ç†è§£ä¸ºæ‰‹å†™<code>flat()</code>æ–¹æ³•</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// forEach éå†æ•°ç»„ä¼šè‡ªåŠ¨è·³è¿‡ç©ºå…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">eachFlat</span> = (<span class="params">arr = [], depth = <span class="number">1</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> result = []; <span class="comment">// ç¼“å­˜é€’å½’ç»“æœ</span></span><br><span class="line">  <span class="comment">// å¼€å§‹é€’å½’</span></span><br><span class="line">  (<span class="keyword">function</span> <span class="title function_">flat</span>(<span class="params">arr, depth</span>) &#123;</span><br><span class="line">    <span class="comment">// forEach ä¼šè‡ªåŠ¨å»é™¤æ•°ç»„ç©ºä½</span></span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ§åˆ¶é€’å½’æ·±åº¦</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(item) &amp;&amp; depth &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// é€’å½’æ•°ç»„</span></span><br><span class="line">        <span class="title function_">flat</span>(item, depth - <span class="number">1</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ç¼“å­˜å…ƒç´ </span></span><br><span class="line">        result.<span class="title function_">push</span>(item)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)(arr, depth)</span><br><span class="line">  <span class="comment">// è¿”å›é€’å½’ç»“æœ</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­â­ ä½¿ç”¨é€’å½’å†™å‡ºæ•°ç»„æ‰å¹³åŒ–, å¯ä»¥é€šè¿‡å‚æ•°æ§åˆ¶å±‚çº§å…³ç³»</p></blockquote><ul><li><code>while</code>å¾ªç¯+<code>some</code>æ–¹æ³•<ul><li>é€šè¿‡<code>some</code>æ¥åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦ç”¨æ•°ç»„, é€šè¿‡<code>while</code>ä¸æ–­å¾ªç¯æ‰§è¡Œåˆ¤æ–­, å¦‚æœæ˜¯æ•°ç»„çš„è¯å¯ä»¥ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦<code>...</code>, <code>...</code>æ¯æ¬¡åªèƒ½å±•å¼€æœ€å¤–å±‚çš„æ•°ç»„, åŠ ä¸Š<code>contact</code>æ¥å‡å°‘åµŒå¥—å±‚æ•°</li></ul></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flatten</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.<span class="title function_">some</span>(<span class="function"><span class="params">item</span>=&gt;</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(item))) &#123;</span><br><span class="line">    arr = [].<span class="title function_">concat</span>(...arr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">flatten</span>(arr));</span><br></pre></td></tr></table></figure><blockquote><p>â­â­â­â­ ä½¿ç”¨<code>while</code>å¾ªç¯å–æ¶ˆé€’å½’æ“ä½œ, å·§ç”¨<code>some</code>æ“ä½œè¿›è¡Œåˆ¤æ–­</p></blockquote><hr><h4 id="2-8-typeof-åˆ¤æ–­"><a href="#2-8-typeof-åˆ¤æ–­" class="headerlink" title="2.8 typeof åˆ¤æ–­"></a>2.8 typeof åˆ¤æ–­</h4><ul><li><code>typeof null</code> æ˜¯ <code>â€œobjectâ€</code>: å†å²é—ç•™é—®é¢˜</li><li><code>typeof NaN</code> æ˜¯ <code>â€œnumberâ€</code>: <code>NaN</code> å®é™…å­˜å‚¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°å€¼ç±»å‹</li><li><code>typeof Function.prototype</code> æ˜¯ <code>function</code></li></ul><table><thead><tr><th align="center">ç±»å‹</th><th align="center">ç»“æœ</th></tr></thead><tbody><tr><td align="center">Undefined</td><td align="center"><code>&quot;undefined&quot;</code></td></tr><tr><td align="center">Null</td><td align="center"><code>&quot;object&quot;</code></td></tr><tr><td align="center">Boolean</td><td align="center"><code>&quot;boolean&quot;</code></td></tr><tr><td align="center">Number</td><td align="center"><code>&quot;number&quot;</code></td></tr><tr><td align="center">BigInt</td><td align="center"><code>&quot;bigint&quot;</code></td></tr><tr><td align="center">String</td><td align="center"><code>&quot;string&quot;</code></td></tr><tr><td align="center">Symbol</td><td align="center"><code>&quot;symbol&quot;</code></td></tr><tr><td align="center">Function (class)</td><td align="center"><code>&quot;function&quot;</code></td></tr><tr><td align="center">å…¶ä»–ä»»ä½•å¯¹è±¡</td><td align="center"><code>&quot;object&quot;</code></td></tr></tbody></table><hr><h4 id="2-9-äº‹ä»¶å§”æ‰˜ä¼˜åŒ–"><a href="#2-9-äº‹ä»¶å§”æ‰˜ä¼˜åŒ–" class="headerlink" title="2.9 äº‹ä»¶å§”æ‰˜ä¼˜åŒ–"></a>2.9 äº‹ä»¶å§”æ‰˜ä¼˜åŒ–</h4><ul><li>å­—èŠ‚ä¸€é¢é¢˜</li></ul><blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦å»åš<code>Event Tracking System</code>ï¼Œéœ€è¦å»è®°å½•ç”¨æˆ·åœ¨ç½‘ç«™å†…åšäº†ä»€ä¹ˆï¼Œç‚¹å‡»äº†ä»€ä¹ˆæŒ‰é’®ã€‚å¦‚æœæœ‰å¾ˆå¤šä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªéƒ½ç»‘ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ€§èƒ½å¾ˆå·®ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</p></blockquote><ul><li>ç»‘å®šäº‹ä»¶åˆ°çˆ¶å…ƒç´ <ul><li>è€Œä¸æ˜¯ä¸ºæ¯ä¸ªå­èŠ‚ç‚¹å•ç‹¬ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œäº‹ä»¶å§”æ‰˜å¯ä»¥å°†äº‹ä»¶å¤„ç†ç¨‹åºç»‘å®šåˆ°å…¬å…±çš„çˆ¶å…ƒç´ ä¸Šï¼Œç„¶åé€šè¿‡äº‹ä»¶çš„<code>target</code>æ¥ç¡®å®šå®é™…è§¦å‘äº‹ä»¶çš„å­èŠ‚ç‚¹ã€‚</li></ul></li><li>æ£€æŸ¥ç›®æ ‡å…ƒç´ <ul><li>ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„<code>event.target</code>å±æ€§æ¥åˆ¤æ–­å“ªä¸ªå­èŠ‚ç‚¹è§¦å‘äº†äº‹ä»¶ï¼Œå¹¶æ ¹æ®éœ€è¦å¤„ç†ç›¸åº”çš„é€»è¾‘</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;ul id=&quot;parent&quot;&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 1&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 2&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 3&lt;/li&gt;</span><br><span class="line">  &lt;li class=&quot;child&quot;&gt;å­èŠ‚ç‚¹ 4&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå°†ç‚¹å‡»äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ </span><br><span class="line">const parent = document.getElementById(&#x27;parent&#x27;);</span><br><span class="line"></span><br><span class="line">// äº‹ä»¶å¤„ç†å™¨ç»‘å®šåœ¨çˆ¶å…ƒç´ ä¸Š</span><br><span class="line">parent.addEventListener(&#x27;click&#x27;, function (event) &#123;</span><br><span class="line">  // é€šè¿‡ event.target æ¥åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å¦æ˜¯ç›®æ ‡å­èŠ‚ç‚¹</span><br><span class="line">  if (event.target &amp;&amp; event.target.classList.contains(&#x27;child&#x27;)) &#123;</span><br><span class="line">    console.log(&#x27;ç‚¹å‡»äº†å­èŠ‚ç‚¹ï¼š&#x27;, event.target.innerText);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>äº‹ä»¶å§”æ‰˜ç‰¹åˆ«é€‚ç”¨äºå­˜åœ¨å¤§é‡ç±»ä¼¼å…ƒç´ çš„åœºæ™¯ï¼Œå¦‚åˆ—è¡¨ã€è¡¨æ ¼ä¸­çš„è¡Œã€åŠ¨æ€ç”Ÿæˆçš„å…ƒç´ ç­‰</p></blockquote><hr><h3 id="3-ç½‘ç»œå®‰å…¨"><a href="#3-ç½‘ç»œå®‰å…¨" class="headerlink" title="3. ç½‘ç»œå®‰å…¨"></a>3. ç½‘ç»œå®‰å…¨</h3><h4 id="3-1-è·¨ç«™è„šæœ¬æ”»å‡»-XSS"><a href="#3-1-è·¨ç«™è„šæœ¬æ”»å‡»-XSS" class="headerlink" title="3.1 è·¨ç«™è„šæœ¬æ”»å‡» XSS"></a>3.1 è·¨ç«™è„šæœ¬æ”»å‡» XSS</h4><ul><li><code>XSS</code>ï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œ<code>Cross-Site Scripting</code>ï¼‰æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…é€šè¿‡å‘ç½‘é¡µæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä½¿å¾—å½“ç”¨æˆ·è®¿é—®å—æ„ŸæŸ“çš„é¡µé¢æ—¶ï¼Œæ¶æ„è„šæœ¬ä¼šåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œ<ul><li>é˜²æ­¢ <code>XSS</code>æ”»å‡»çš„å…³é”®æ˜¯ä¸¥æ ¼å¤„ç†ç”¨æˆ·è¾“å…¥å’Œè¾“å‡º</li><li>å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼éªŒè¯å’Œè¿‡æ»¤<strong>ï¼Œ</strong>ä½¿ç”¨å®‰å…¨çš„æ¡†æ¶å’Œåº“</li></ul></li></ul><hr><h4 id="3-2-è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF"><a href="#3-2-è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF" class="headerlink" title="3.2 è·¨ç«™è¯·æ±‚ä¼ªé€  CSRF"></a>3.2 è·¨ç«™è¯·æ±‚ä¼ªé€  CSRF</h4><ul><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  (<code>CSRF</code>) æ˜¯ä¸€ç§å‰ç«¯å®‰å…¨æ”»å‡»ï¼Œé€šè¿‡ä¼ªé€ çš„å½¢å¼æ¥æ‰§è¡Œä½ åŸæœ¬ä¸å¸Œæœ›æ‰§è¡Œçš„æ“ä½œ<ul><li>é˜²æ­¢<code>CSRF</code>æ”»å‡»éœ€è¦ç¡®ä¿è¯·æ±‚æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸”æ˜¯ç”¨æˆ·æœ‰æ„å‘èµ·çš„</li><li>é˜²æ­¢<code>CSRF</code>æ”»å‡»çš„æœ€ç®€å•æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨ä»æœåŠ¡å™¨ç”Ÿæˆçš„<code>CSRF</code>ä»¤ç‰Œã€‚å¦‚æœå®¢æˆ·ç«¯æ— æ³•æä¾›å‡†ç¡®çš„ä»¤ç‰Œï¼ŒæœåŠ¡å™¨å¯ä»¥æ‹’ç»è¯·æ±‚çš„æ“ä½œ</li></ul></li></ul><hr><h3 id="4-ç½‘ç»œåè®®"><a href="#4-ç½‘ç»œåè®®" class="headerlink" title="4. ç½‘ç»œåè®®"></a>4. ç½‘ç»œåè®®</h3><h4 id="4-1-ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«"><a href="#4-1-ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«" class="headerlink" title="4.1 ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«"></a>4.1 ç½‘ç»œä¸ƒå±‚æ¨¡å‹ä¸å››å±‚æ¨¡å‹åŒºåˆ«</h4><ul><li>å‚è€ƒ: <a href="https://juejin.cn/post/6844903492763533319?searchId=20241013095821BCBAFA2F17F7FC9E99C5">é“¾æ¥</a></li><li>ç½‘ç»œä¸ƒå±‚æ¨¡å‹ <code>OSI</code>ï¼ˆ<code>Open Systems Interconnection Model</code>ï¼‰æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œè€Œéå®ç°</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture1234.PNG"></p><ul><li><code>OSI</code>æ¨¡å‹æ˜¯ä»ä¸Šå¾€ä¸‹çš„ï¼Œè¶Šåº•å±‚è¶Šæ¥è¿‘ç¡¬ä»¶ï¼Œè¶Šå¾€ä¸Šè¶Šæ¥è¿‘è½¯ä»¶ï¼Œè¿™ä¸ƒå±‚æ¨¡å‹åˆ†åˆ«æ˜¯<strong>ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚</strong>ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt; ç‰©ç†å±‚ï¼šåº•å±‚æ•°æ®ä¼ è¾“ï¼Œå¦‚ç½‘çº¿ï¼›ç½‘å¡æ ‡å‡†ã€‚</span><br><span class="line">&gt; æ•°æ®é“¾è·¯å±‚ï¼šå®šä¹‰æ•°æ®çš„åŸºæœ¬æ ¼å¼ï¼Œå¦‚ä½•ä¼ è¾“ï¼Œå¦‚ä½•æ ‡è¯†ï¼›å¦‚ç½‘å¡MACåœ°å€ã€‚</span><br><span class="line">&gt; ç½‘ç»œå±‚ï¼šå®šä¹‰IPç¼–å€ï¼Œå®šä¹‰è·¯ç”±åŠŸèƒ½ï¼›å¦‚ä¸åŒè®¾å¤‡çš„æ•°æ®è½¬å‘ã€‚</span><br><span class="line">&gt; ä¼ è¾“å±‚ï¼šç«¯åˆ°ç«¯ä¼ è¾“æ•°æ®çš„åŸºæœ¬åŠŸèƒ½ï¼›å¦‚ TCPã€UDPã€‚</span><br><span class="line">&gt; ä¼šè¯å±‚ï¼šæ§åˆ¶åº”ç”¨ç¨‹åºä¹‹é—´ä¼šè¯èƒ½åŠ›ï¼›å¦‚ä¸åŒè½¯ä»¶æ•°æ®åˆ†å‘ç»™ä¸åŒè½¯ä»¶ã€‚</span><br><span class="line">&gt; æ ‡è¯†å±‚ï¼šæ•°æ®æ ¼å¼æ ‡è¯†ï¼ŒåŸºæœ¬å‹ç¼©åŠ å¯†åŠŸèƒ½ã€‚</span><br><span class="line">&gt; åº”ç”¨å±‚ï¼šå„ç§åº”ç”¨è½¯ä»¶ï¼ŒåŒ…æ‹¬ Web åº”ç”¨ã€‚</span><br></pre></td></tr></table></figure><ul><li>ç½‘ç»œå››å±‚æ¨¡å‹æ˜¯ä¸€ä¸ªå®ç°çš„åº”ç”¨æ¨¡å‹ï¼Œç”±ä¸ƒå±‚æ¨¡å‹ç®€åŒ–åˆå¹¶è€Œæ¥</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture4321.PNG"></p><ul><li><code>TCP/IP</code>æ¨¡å‹å°†<code>OSI</code>æ¨¡å‹ç”±ä¸ƒå±‚ç®€åŒ–ä¸ºå››å±‚ï¼Œä¼ è¾“å±‚å’Œç½‘ç»œå±‚è¢«å®Œæ•´ä¿ç•™ï¼Œå› æ­¤ç½‘ç»œä¸­æœ€æ ¸å¿ƒçš„æŠ€æœ¯å°±æ˜¯ä¼ è¾“å±‚å’Œç½‘ç»œå±‚æŠ€æœ¯</li></ul><hr><h4 id="4-2-http-å’Œ-https-åŸºæœ¬æ¦‚å¿µ"><a href="#4-2-http-å’Œ-https-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4.2 http å’Œ https åŸºæœ¬æ¦‚å¿µ"></a>4.2 http å’Œ https åŸºæœ¬æ¦‚å¿µ</h4><ul><li><code>HTTP</code>: æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†<code>TCP</code>ï¼Œç”¨äºä»<code>WWW</code>æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘</li><li><code>HTTPS</code>: æ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„<code>HTTP</code>é€šé“ï¼Œç®€å•è®²æ˜¯<code>HTTP</code>çš„å®‰å…¨ç‰ˆï¼Œå³<code>HTTP</code>ä¸‹åŠ å…¥<code>SSL</code>å±‚ï¼Œ<code>HTTPS</code>çš„å®‰å…¨åŸºç¡€æ˜¯<code>SSL</code>ï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦<code>SSL</code></li><li><code>HTTPS</code>åè®®çš„ä¸»è¦ä½œç”¨å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ã€‚å¦ä¸€ç§å°±æ˜¯ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§</li></ul><hr><h4 id="4-3-http-å’Œ-https-åŒºåˆ«"><a href="#4-3-http-å’Œ-https-åŒºåˆ«" class="headerlink" title="4.3 http å’Œ https åŒºåˆ«"></a>4.3 http å’Œ https åŒºåˆ«</h4><p><code>HTTP</code>åè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œå› æ­¤ä½¿ç”¨<code>HTTP</code>åè®®ä¼ è¾“éšç§ä¿¡æ¯éå¸¸ä¸å®‰å…¨ï¼Œä¸ºäº†ä¿è¯ è¿™äº›éšç§æ•°æ®èƒ½åŠ å¯†ä¼ è¾“ï¼Œäºæ˜¯ç½‘æ™¯å…¬å¸è®¾è®¡äº†<code>SSL</code>(<code>Secure Sockets Layer</code>)åè®®ç”¨äºå¯¹<code>HTTP</code>åè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œå°±è¯ç”Ÿäº†<code>HTTPS</code>ã€‚ç®€å•æ¥è¯´ï¼Œ<code>HTTPS</code>åè®®æ˜¯ç”±<code>SSL+HTTP</code>åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”<code>HTTP</code>åè®®å®‰å…¨</p><ul><li><code>https</code>åè®®éœ€è¦åˆ°<code>ca</code>ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨</li><li><code>http</code>æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œ<code>https</code>åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„<code>ssl</code>åŠ å¯†ä¼ è¾“åè®®</li><li><code>http</code>å’Œ<code>https</code>ä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯<code>80</code>ï¼Œåè€…æ˜¯<code>443</code></li><li><code>http</code>çš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚<code>https</code>åè®®æ˜¯ç”±<code>SSL+HTTP</code>åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”<code>http</code>åè®®å®‰å…¨</li></ul><blockquote><p>æ³¨æ„: <code>HTTPS = HTTP + SSL/TLS</code>ï¼Œå¦‚ä»Š<code>SSL</code>å·²åºŸå¼ƒï¼Œæ‰€ä»¥ç°åœ¨åªå…³æ³¨<code>HTTP + TLS</code></p></blockquote><hr><h4 id="4-4-http1-x-å’Œ-http2-x-åŒºåˆ«"><a href="#4-4-http1-x-å’Œ-http2-x-åŒºåˆ«" class="headerlink" title="4.4 http1.x å’Œ http2.x åŒºåˆ«"></a>4.4 http1.x å’Œ http2.x åŒºåˆ«</h4><p><code>http1.x</code>å’Œ<code>http2.x</code>ä¸»è¦æœ‰ä»¥ä¸‹<code>4</code>ä¸ªåŒºåˆ«</p><ul><li><p><code>HTTP2</code>ä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶ä¼ é€ï¼Œ<code>HTTP1.X</code>æ˜¯æ–‡æœ¬(å­—ç¬¦ä¸²)ä¼ é€</p><ul><li>äºŒè¿›åˆ¶ä¼ é€çš„å•ä½æ˜¯å¸§å’Œæµã€‚å¸§ç»„æˆäº†æµï¼ŒåŒæ—¶æµè¿˜æœ‰æµ<code>ID</code>æ ‡ç¤º</li><li>ä¼˜åŠ¿: ä¼ è¾“é€Ÿåº¦æ›´å¿« (äºŒè¿›åˆ¶æ•°æ®ä½“ç§¯è¾ƒå°), å¤„ç†æ›´é«˜æ•ˆ (ä¸éœ€è¦è¿›è¡Œæ–‡æœ¬è§£æ), é€‚ç”¨äºå¤æ‚æ•°æ®ç±»å‹ (å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘), å®‰å…¨æ€§æ›´é«˜ (äºŒè¿›åˆ¶æ•°æ®ä¸æ˜“è¢«ç›´æ¥é˜…è¯»)</li></ul></li><li><p><code>HTTP2</code>æ”¯æŒå¤šè·¯å¤ç”¨</p><ul><li>å› ä¸ºæœ‰æµ<code>ID</code>ï¼Œæ‰€ä»¥é€šè¿‡åŒä¸€ä¸ª<code>http</code>è¯·æ±‚å®ç°å¤šä¸ª<code>http</code>è¯·æ±‚ä¼ è¾“å˜æˆäº†å¯èƒ½ï¼Œå¯ä»¥é€šè¿‡æµ<code>ID</code>æ¥æ ‡ç¤ºç©¶ç«Ÿæ˜¯å“ªä¸ªæµä»è€Œå®šä½åˆ°æ˜¯å“ªä¸ª<code>http</code>è¯·æ±‚</li></ul></li><li><p><code>HTTP2</code>å¤´éƒ¨å‹ç¼©</p><ul><li><code>HTTP2</code>é€šè¿‡<code>gzip</code>å’Œ<code>compress</code>å‹ç¼©å¤´éƒ¨ç„¶åå†å‘é€ï¼ŒåŒæ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŒæ—¶ç»´æŠ¤ä¸€å¼ å¤´ä¿¡æ¯è¡¨ï¼Œæ‰€æœ‰å­—æ®µéƒ½è®°å½•åœ¨è¿™å¼ è¡¨ä¸­ï¼Œè¿™æ ·åé¢æ¯æ¬¡ä¼ è¾“åªéœ€è¦ä¼ è¾“è¡¨é‡Œé¢çš„ç´¢å¼•<code>ID</code>å°±è¡Œï¼Œé€šè¿‡ç´¢å¼•<code>ID</code>æŸ¥è¯¢è¡¨å¤´çš„å€¼</li></ul></li><li><p><code>HTTP2</code>æ”¯æŒæœåŠ¡å™¨æ¨é€</p><ul><li><code>HTTP2</code>æ”¯æŒåœ¨æœªç»å®¢æˆ·ç«¯è®¸å¯çš„æƒ…å†µä¸‹ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€å†…å®¹</li></ul></li></ul><hr><h4 id="4-5-http-è¯·æ±‚æ–¹å¼"><a href="#4-5-http-è¯·æ±‚æ–¹å¼" class="headerlink" title="4.5 http è¯·æ±‚æ–¹å¼"></a>4.5 http è¯·æ±‚æ–¹å¼</h4><p><code>http</code>è¯·æ±‚æ–¹å¼æœ‰ä»¥ä¸‹<code>8</code>ç§ï¼Œå…¶ä¸­<code>GET</code>å’Œ<code>POST</code>æ˜¯æœ€å¸¸ç”¨çš„</p><ul><li><code>GET</code>: å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚<code>GET</code>æ–¹æ³•ä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­</li><li><code>POST</code>: å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚, ä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚<code>POST</code>è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ&#x2F;æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹</li><li><code>PUT</code>: å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹</li><li><code>DELETE</code>: è¯·æ±‚æœåŠ¡å™¨åˆ é™¤<code>Request-URL</code>æ‰€æ ‡è¯†çš„èµ„æº</li><li><code>HEAD</code>: å‘æœåŠ¡å™¨ç´¢ä¸<code>GET</code>è¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥å†ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”å°æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯</li><li><code>OPTIONS</code>: è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„<code>HTTP</code>è¯·æ±‚æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å‘<code>web</code>æœåŠ¡å™¨å‘é€<code>â€˜*â€™</code>çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§</li><li><code>TRACE</code>: å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</li><li><code>CONNECT</code>: <code>HTTP/1.1</code>åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</li></ul><hr><h4 id="4-6-TCP-ä¸‰æ¬¡æ¡æ‰‹"><a href="#4-6-TCP-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="4.6 TCP ä¸‰æ¬¡æ¡æ‰‹"></a>4.6 TCP ä¸‰æ¬¡æ¡æ‰‹</h4><hr><h3 id="5-React-é¢˜ç›®"><a href="#5-React-é¢˜ç›®" class="headerlink" title="5. React é¢˜ç›®"></a>5. React é¢˜ç›®</h3><hr><h3 id="6-ç¼“å­˜"><a href="#6-ç¼“å­˜" class="headerlink" title="6. ç¼“å­˜"></a>6. ç¼“å­˜</h3><h4 id="6-1-å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜"><a href="#6-1-å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜" class="headerlink" title="6.1 å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜"></a>6.1 å¼ºç¼“å­˜ä¸åå•†ç¼“å­˜</h4><ul><li><p>å‚è€ƒ: <a href="https://juejin.cn/post/7259298281578889273?searchId=20241013235036EC2DA00FC6CFFB00CC87">é“¾æ¥</a></p></li><li><p>ä¸ºäº†å‡å°‘èµ„æºè¯·æ±‚æ¬¡æ•°ï¼ŒåŠ å¿«èµ„æºè®¿é—®é€Ÿåº¦ï¼Œæµè§ˆå™¨ä¼šå¯¹èµ„æºæ–‡ä»¶å¦‚å›¾ç‰‡ã€<code>css</code>æ–‡ä»¶ã€<code>js</code>æ–‡ä»¶ç­‰è¿›è¡Œç¼“å­˜ï¼Œè€Œæµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆåˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜</p></li><li><p>å¼ºç¼“å­˜ <code>Strong Cache</code></p><ul><li>æ‰€è°“å¼ºç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸ºå¼ºåˆ¶ç¼“å­˜çš„æ„æ€ï¼Œå³æµè§ˆå™¨åœ¨è®¿é—®æŸä¸ªèµ„æºæ—¶ä¼šåˆ¤æ–­æ˜¯å¦ä½¿ç”¨æœ¬åœ°ç¼“å­˜é‡Œå·²ç»å­˜åœ¨çš„èµ„æºæ–‡ä»¶ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„è¯åˆ™ä¸ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ°å‡è½»æœåŠ¡å™¨è®¿é—®å‹åŠ›çš„ä½œç”¨ï¼Œä¸”ç”±äºç›´æ¥ä»æœ¬åœ°ç¼“å­˜è¯»å–èµ„æºæ–‡ä»¶ï¼Œå¤§å¤§æé«˜äº†åŠ è½½é€Ÿåº¦</li><li>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„æŸä¸ªèµ„æºæ—¶ï¼Œå¦‚æœæœåŠ¡å™¨å¸Œæœ›æµè§ˆå™¨å¾—åˆ°è¯¥èµ„æºåä¸€æ®µæ—¶é—´å†…ä¸è¦å†å‘é€è¯·æ±‚è¿‡æ¥ï¼Œç›´æ¥ä»æµè§ˆå™¨é‡Œçš„ç¼“å­˜é‡Œå–ï¼Œåˆ™æœåŠ¡å™¨å¯ä»¥é€šè¿‡åœ¨å“åº”å¤´é‡Œè®¾ç½®<code>Cache-Control: max-age=31536000</code>ï¼Œ<code>max-age</code>ä»£è¡¨ç¼“å­˜æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œè¿™é‡Œçš„æ•°æ®æ¢ç®—è¿‡æ¥å°±æ˜¯ä¸€å¹´ï¼Œæ„å‘³ç€åœ¨ä¸€å¹´å†…æµè§ˆå™¨ä¸ä¼šå†å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture4567.PNG"></p><ul><li>ä½¿ç”¨ç¼“å­˜çš„è¯ï¼ŒçŠ¶æ€ç <code>200</code>åé¢ä¼šæ ‡æ˜æƒ…å†µã€‚æµè§ˆå™¨ç¼“å­˜èµ„æºçš„åœ°æ–¹æœ‰ä¸¤ä¸ª: ç£ç›˜ç¼“å­˜ï¼ˆ<code>disk cache</code>ï¼‰å’Œå†…å­˜ç¼“å­˜ï¼ˆ<code>memory cache</code>ï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture7654.PNG"></p><ul><li>å½“ç¼“å­˜æ—¶é—´åˆ°æœŸåå†æ¬¡è®¿é—®æ—¶ï¼ŒçŠ¶æ€ç <code>200</code>åé¢ä¾¿æ²¡æœ‰æ‹¬å·å†…çš„å†…å®¹äº†</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture12345.PNG"></p><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šå°†è¾ƒå¤§çš„èµ„æºç¼“å­˜åˆ°<code>disk cache</code>ï¼Œè€Œè¾ƒå°çš„èµ„æºåˆ™è¢«ç¼“å­˜åˆ°<code>memory cache</code>é‡Œã€‚å†…å­˜ç¼“å­˜ä¸ç£ç›˜ç¼“å­˜ç›¸æ¯”ï¼Œè®¿é—®é€Ÿåº¦è¦æ›´å¿«ä¸€äº›</p></blockquote><ul><li>å¼ºç¼“å­˜é™¤äº†ä½¿ç”¨<code>Cache-Control</code>å®ç°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>Expires</code>å­—æ®µï¼Œ<code>Expires</code>æ˜¯<code>Http1.0</code>è§„èŒƒï¼Œ<code>Cache-Control</code>æ˜¯<code>Http1.1</code>è§„èŒƒï¼Œ<code>Expires</code>è¿”å›ä¸€ä¸ªå…·ä½“çš„æ—¶é—´å€¼ï¼Œä»£è¡¨ç¼“å­˜çš„æœ‰æ•ˆæœŸï¼Œåœ¨è¯¥æ—¥æœŸå†…æµè§ˆå™¨ä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜é‡Œè·å–èµ„æº</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture5431.PNG"></p><ul><li>å› ä¸º<code>Expires</code>å‚ç…§çš„æ˜¯æœ¬åœ°å®¢æˆ·ç«¯çš„æ—¶é—´ï¼Œè€Œå®¢æˆ·ç«¯çš„æ—¶é—´æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¼šæœ‰è¯¯å·®äº§ç”Ÿçš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯<code>Expires</code>çš„ä¸€ä¸ªç¼ºç‚¹ï¼Œæ‰€ä»¥æœ‰äº†åæ¥<code>Http1.1</code>è§„èŒƒçš„<code>Cache-control</code></li></ul><blockquote><p><code>Cache-control</code>çš„ä¼˜å…ˆçº§è¦é«˜äº<code>Expires</code>ï¼Œå¦‚æœä¸¤è€…åŒæ—¶è®¾ç½®ï¼Œä¼šä¼˜å…ˆä½¿ç”¨<code>Cache-control</code>è€Œå¿½ç•¥æ‰<code>Expires</code></p></blockquote><ul><li>åå•†ç¼“å­˜ <code>Negotiation Cache</code><ul><li>åœ¨å¼ºç¼“å­˜é‡Œï¼Œæ˜¯å¦ä½¿ç”¨ç¼“å­˜æ˜¯ç”±æµè§ˆå™¨æ¥ç¡®å®šçš„ï¼Œè€Œåå•†ç¼“å­˜åˆ™æ˜¯ç”±æœåŠ¡å™¨æ¥å‘Šè¯‰æµè§ˆå™¨æ˜¯å¦ä½¿ç”¨ç¼“å­˜èµ„æºï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨æ¯ä¸€æ¬¡éƒ½è¦å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨è¯¢é—®æ˜¯å¦ä½¿ç”¨ç¼“å­˜</li><li>æµè§ˆå™¨åˆæ¬¡è¯·æ±‚èµ„æºï¼ŒæœåŠ¡å™¨è¿”å›èµ„æºï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ª<code>Etag</code>å€¼æºå¸¦åœ¨å“åº”å¤´é‡Œè¿”å›ç»™æµè§ˆå™¨ï¼Œå½“æµè§ˆå™¨å†æ¬¡è¯·æ±‚èµ„æºæ—¶ä¼šåœ¨è¯·æ±‚å¤´é‡Œæºå¸¦<code>If-None-Match</code>ï¼Œå€¼æ˜¯ä¹‹å‰æœåŠ¡å™¨è¿”å›çš„<code>Etag</code>çš„å€¼ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¹‹åæ‹¿è¯¥å€¼ä¸èµ„æºæ–‡ä»¶æœ€æ–°çš„<code>Etag</code>å€¼åšå¯¹æ¯”</li></ul></li></ul><blockquote><p>å¦‚æœæ²¡æœ‰å˜åŒ–åˆ™è¿”å›<code>304</code>ï¼Œå‘Šè¯‰æµè§ˆå™¨ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼ˆä¸è¿”å›èµ„æºæ–‡ä»¶ï¼‰<br>å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œåˆ™è¿”å›<code>200</code>å’Œæœ€æ–°çš„èµ„æºæ–‡ä»¶ç»™æµè§ˆå™¨ä½¿ç”¨</p></blockquote><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture2567.PNG"></p><ul><li>é™¤äº†<code>Etag</code>å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>Last-Modified</code>çš„å±æ€§ï¼Œå®ƒæ˜¯<code>Http1.0</code>è§„èŒƒçš„ï¼ŒæœåŠ¡å™¨è¿”å›<code>Last-Modified</code>ï¼Œæµè§ˆå™¨è¯·æ±‚å¤´å¯¹åº”æºå¸¦çš„æ˜¯<code>If-Modified-since</code>ï¼Œä¸<code>Etag</code>ä¸åŒçš„æ˜¯ï¼Œ<code>Last-Modified</code>çš„å€¼æ˜¯ä¸€ä¸ªæ—¶é—´å€¼ï¼Œä»£è¡¨æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼ŒæœåŠ¡å™¨é€šè¿‡å¯¹æ¯”æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦å‘ç”Ÿæ”¹å˜æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜</li></ul><p><img src="https://raw.githubusercontent.com/Hongda-OSU/PicGo-2.3.1/master/imgCapture7890.PNG"></p><ul><li>ç›¸æ¯”<code>Last-Modified</code>ï¼Œ<code>Etag</code>ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨ä¸Šä¹Ÿæ›´ç²¾ç¡®ä¸€äº›ï¼Œå› ä¸ºæœ‰æ—¶å€™ä¼šå­˜åœ¨æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å˜æ›´äº†ï¼Œ<code>Last-Modified</code>ä¸ä¸€è‡´æ‰€ä»¥æœåŠ¡å™¨ä¼šé‡æ–°è¿”å›èµ„æºæ–‡ä»¶ï¼Œå®é™…ä¸Šè¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜çš„</li></ul><blockquote><p>å¼ºç¼“å­˜ä¼˜å…ˆçº§å¤§äºåå•†ç¼“å­˜ï¼Œå³ä¸¤è€…åŒæ—¶å­˜åœ¨æ—¶ï¼Œå¦‚æœå¼ºç¼“å­˜å¼€å¯ä¸”åœ¨æœ‰æ•ˆæœŸå†…ï¼Œåˆ™ä¸ä¼šèµ°åå•†ç¼“å­˜</p></blockquote><hr><h3 id="7-ç®—æ³•"><a href="#7-ç®—æ³•" class="headerlink" title="7. ç®—æ³•"></a>7. ç®—æ³•</h3><h4 id="7-1-LRU-Cache"><a href="#7-1-LRU-Cache" class="headerlink" title="7.1 LRU Cache"></a>7.1 LRU Cache</h4><ul><li>å­—èŠ‚ä¸€é¢ç®—æ³•é¢˜</li><li>ä½¿ç”¨<code>JS</code>å®ç°ä¸€ä¸ªé­”æ”¹ç‰ˆçš„<code>LRU Cache</code>ï¼Œå¹¶ä¸”æ»¡è¶³ä»¥ä¸‹è¦æ±‚</li></ul><blockquote><p>ç»´æŠ¤ä¸€ä¸ªå®¹é‡ä¸º<code>n</code>çš„ç¼“å­˜<br>æ¯ä¸ªç¼“å­˜é¡¹å¦‚æœåœ¨<code>X</code>ç§’åæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™è‡ªåŠ¨åˆ é™¤</p></blockquote><ul><li>å¯ä»¥ä½¿ç”¨<code>Map</code>æ¥ç»´æŠ¤ç¼“å­˜çš„é¡ºåºå’Œå®¹é‡ï¼Œåˆ©ç”¨<code>setTimeout</code>æ¥å®ç°è‡ªåŠ¨åˆ é™¤çš„åŠŸèƒ½</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">capacity, expireTime</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">capacity</span> = capacity; <span class="comment">// ç¼“å­˜å®¹é‡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">expireTime</span> = expireTime; <span class="comment">// ç¼“å­˜é¡¹çš„æœ‰æ•ˆæ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// ç”¨ Map æ¥å­˜å‚¨ç¼“å­˜æ•°æ®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span> = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// ç”¨æ¥å­˜å‚¨æ¯ä¸ªç¼“å­˜é¡¹çš„å®šæ—¶å™¨</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–ç¼“å­˜</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰è¿™ä¸ªkeyï¼Œè¿”å›-1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œéœ€è¦åˆ·æ–°ç¼“å­˜çš„é¡ºåºï¼ˆå°†è¿™ä¸ªkeyç§»åˆ°æœ€æ–°çš„ä½ç½®ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(key);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// å…ˆåˆ é™¤è€çš„ä½ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value); <span class="comment">// é‡æ–°æ’å…¥ï¼Œä¿è¯æœ€æ–°è®¿é—®çš„åœ¨æœ«å°¾</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡ç½®å®šæ—¶å™¨ï¼Œå»¶é•¿è¿‡æœŸæ—¶é—´</span></span><br><span class="line">    <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(key)); <span class="comment">// æ¸…é™¤è€çš„å®šæ—¶å™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">setExpiration</span>(key)); <span class="comment">// é‡æ–°è®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ ç¼“å­˜</span></span><br><span class="line">  <span class="title function_">put</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ é™¤æ—§çš„ç¼“å­˜</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key);</span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(key));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ é™¤æœ€è€çš„ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="property">size</span> &gt;= <span class="variable language_">this</span>.<span class="property">capacity</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> oldestKey = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">keys</span>().<span class="title function_">next</span>().<span class="property">value</span>; <span class="comment">// è·å– Map ä¸­ç¬¬ä¸€ä¸ªï¼ˆæœ€æ—§ï¼‰çš„key</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(oldestKey); <span class="comment">// åˆ é™¤æœ€æ—§çš„ç¼“å­˜é¡¹</span></span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">get</span>(oldestKey)); <span class="comment">// æ¸…é™¤ç›¸åº”çš„å®šæ—¶å™¨</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">delete</span>(oldestKey); <span class="comment">// åˆ é™¤å®šæ—¶å™¨è®°å½•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥æ–°çš„ç¼“å­˜é¡¹</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, value);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">set</span>(key, <span class="variable language_">this</span>.<span class="title function_">setExpiration</span>(key)); <span class="comment">// è®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®ç¼“å­˜é¡¹çš„è‡ªåŠ¨åˆ é™¤å®šæ—¶å™¨</span></span><br><span class="line">  <span class="title function_">setExpiration</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(key); <span class="comment">// åˆ é™¤ç¼“å­˜é¡¹</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timers</span>.<span class="title function_">delete</span>(key); <span class="comment">// åˆ é™¤å®šæ—¶å™¨è®°å½•</span></span><br><span class="line">    &#125;, <span class="variable language_">this</span>.<span class="property">expireTime</span> * <span class="number">1000</span>); <span class="comment">// è½¬æ¢ä¸ºæ¯«ç§’</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lru = <span class="keyword">new</span> <span class="title class_">LRUCache</span>(<span class="number">3</span>, <span class="number">5</span>); <span class="comment">// åˆ›å»ºå®¹é‡ä¸º3ï¼Œç¼“å­˜é¡¹5ç§’åå¤±æ•ˆçš„LRU Cache</span></span><br><span class="line">lru.<span class="title function_">put</span>(<span class="number">1</span>, <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">lru.<span class="title function_">put</span>(<span class="number">2</span>, <span class="string">&#x27;B&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">1</span>)); <span class="comment">// è¾“å‡º &#x27;A&#x27;</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">2</span>)); <span class="comment">// åœ¨5ç§’å†…è®¿é—®ï¼Œè¾“å‡º &#x27;B&#x27;</span></span><br><span class="line">&#125;, <span class="number">4000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(lru.<span class="title function_">get</span>(<span class="number">1</span>)); <span class="comment">// è¶…è¿‡5ç§’æœªè®¿é—®ï¼Œè¾“å‡º -1ï¼ˆå·²è¿‡æœŸï¼‰</span></span><br><span class="line">&#125;, <span class="number">6000</span>);</span><br></pre></td></tr></table></figure><hr><h4 id="7-2-æ ¼å¼åŒ–æ•°å­—"><a href="#7-2-æ ¼å¼åŒ–æ•°å­—" class="headerlink" title="7.2 æ ¼å¼åŒ–æ•°å­—"></a>7.2 æ ¼å¼åŒ–æ•°å­—</h4><ul><li><p>å­—èŠ‚ä¸€é¢ç®—æ³•é¢˜</p></li><li><p>ç»™ä¸€ä¸ªæ•°å­—æ¯”å¦‚<code>1000000</code>ï¼ŒæŠŠå®ƒè½¬åŒ–æˆ<code>1,000,000</code>ã€‚æˆ–è€…æ˜¯<code>1000000.12</code>ï¼ŒæŠŠå®ƒè½¬åŒ–æˆ<code>1,000,000.12</code>ã€‚åªèƒ½ä½¿ç”¨<code>JS</code>å®ç°</p></li><li><p>è§£å†³æ–¹æ¡ˆä¸€: ä½¿ç”¨<code>toLocaleString()</code></p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ†ç¦»æ•´æ•°å’Œå°æ•°éƒ¨åˆ†ï¼Œé»˜è®¤å°æ•°éƒ¨åˆ†ä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">let</span> [integer, decimal = <span class="string">&#x27;&#x27;</span>] = (number + <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é€šè¿‡ toLocaleString æ ¼å¼åŒ–æ•´æ•°éƒ¨åˆ†ï¼Œè‡ªåŠ¨åŠ ä¸Šåƒåˆ†ä½é€—å·</span></span><br><span class="line">  integer = (+integer).<span class="title function_">toLocaleString</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰å°æ•°éƒ¨åˆ†ï¼Œç›´æ¥è¿”å›æ ¼å¼åŒ–åçš„æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">if</span> (decimal === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> integer;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°æ•°éƒ¨åˆ†æ— éœ€åè½¬æˆ–ä½¿ç”¨ toLocaleStringï¼Œç›´æ¥è¿”å›åŸæ¥çš„å°æ•°éƒ¨åˆ†å³å¯</span></span><br><span class="line">  <span class="keyword">return</span> integer + <span class="string">&#x27;.&#x27;</span> + decimal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³æ–¹æ¡ˆäºŒ: æ­£åˆ™è¡¨è¾¾å¼</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formateNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> number.<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formateNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formateNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³æ–¹æ¡ˆä¸‰: æ‰‹åŠ¨å®ç°æ ¼å¼åŒ–</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatNumberWithCommas</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="comment">// ç±»å‹æ£€æµ‹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> number !== <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å…ˆè½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">  number = number.<span class="title function_">toString</span>();</span><br><span class="line">  <span class="comment">// æ”¯æŒå°æ•°,æŒ‰å°æ•°ç‚¹åˆ†æˆä¸¤éƒ¨åˆ† ä½¿ç”¨äº†es6è§£æ„</span></span><br><span class="line">  <span class="keyword">let</span> [integer, decimal] = number.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°è£…äº† doSplit æ–¹æ³• ç¬¬äºŒä¸ªå‚æ•° isInteger æ¥è¡¨ç¤ºæ˜¯æ•´æ•°éƒ¨åˆ†è¿˜æ˜¯å°æ•°éƒ¨åˆ†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">doSplit</span> = (<span class="params">num, isInteger = <span class="literal">true</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸ºç©ºï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (!num) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æ•´æ•°éƒ¨åˆ† å…ˆæŒ‰ä½åˆ‡å‰²å†åè½¬</span></span><br><span class="line">    <span class="comment">// æ•´æ•°éƒ¨åˆ†æ•°å­—ä»å³å¾€å·¦æ•°ï¼Œæ¯3ä½æ’å…¥ä¸€ä¸ªé€—å·</span></span><br><span class="line">    <span class="comment">// å°æ•°éƒ¨åˆ†ä»å·¦å¾€å³æ•°</span></span><br><span class="line">    <span class="comment">// ä¸¤æ¬¡åè½¬ï¼Œå®ƒçš„é€—å·é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isInteger) num = num.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>();</span><br><span class="line">    <span class="keyword">let</span> str = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i !== <span class="number">0</span> &amp;&amp; i % <span class="number">3</span> === <span class="number">0</span>) str.<span class="title function_">push</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">      str.<span class="title function_">push</span>(num[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isInteger) <span class="keyword">return</span> str.<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¤„ç†æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">  integer = <span class="title function_">doSplit</span>(integer);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¤„ç†å°æ•°éƒ¨åˆ†ï¼Œç¡®ä¿ undefined å°æ•°ä¸ä¼šå¯¼è‡´é—®é¢˜</span></span><br><span class="line">  decimal = decimal ? <span class="title function_">doSplit</span>(decimal, <span class="literal">false</span>) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> integer + (decimal === <span class="string">&#x27;&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;.&#x27;</span> + decimal);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatNumberWithCommas</span>(<span class="number">1000000.12</span>)); <span class="comment">// è¾“å‡º &quot;1,000,000.12&quot;</span></span><br></pre></td></tr></table></figure><hr><h4 id="7-3-æ‰‹å†™æ•°ç»„è½¬æ ‘"><a href="#7-3-æ‰‹å†™æ•°ç»„è½¬æ ‘" class="headerlink" title="7.3 æ‰‹å†™æ•°ç»„è½¬æ ‘"></a>7.3 æ‰‹å†™æ•°ç»„è½¬æ ‘</h4><ul><li>åšåˆ°ç±»ä¼¼ä¸‹é¢çš„è½¬æ¢</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> input = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>, <span class="attr">parentId</span>: <span class="literal">null</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">1</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>, <span class="attr">parentId</span>: <span class="number">2</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>, <span class="attr">parentId</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> output = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">val</span>: <span class="string">&#x27;å­¦æ ¡&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§1&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ1&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">                <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ2&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: []</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">val</span>: <span class="string">&#x27;ç­çº§2&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="attr">val</span>: <span class="string">&#x27;å­¦ç”Ÿ3&#x27;</span>,</span><br><span class="line">            <span class="attr">children</span>: []</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrayToTree</span>(<span class="params">array</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> root = array[<span class="number">0</span>];</span><br><span class="line">  array.<span class="title function_">shift</span>();</span><br><span class="line">  <span class="keyword">let</span> tree = &#123;</span><br><span class="line">    <span class="attr">id</span>: root.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">val</span>: root.<span class="property">val</span>,</span><br><span class="line">    <span class="attr">children</span>: array.<span class="property">length</span> &gt; <span class="number">0</span> ? <span class="title function_">toTree</span>(root.<span class="property">id</span>, array) : []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tree;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toTree</span>(<span class="params">parentId, array</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> children = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = array[i];</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">parentId</span> === parentId) &#123;</span><br><span class="line">      children.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: node.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">val</span>: node.<span class="property">val</span>,</span><br><span class="line">        <span class="attr">children</span>: <span class="title function_">toTree</span>(node.<span class="property">id</span>, array)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> children;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">arrayToTree</span>(input));</span><br></pre></td></tr></table></figure><hr><h4 id="7-4-æ•°ç»„å»é‡"><a href="#7-4-æ•°ç»„å»é‡" class="headerlink" title="7.4 æ•°ç»„å»é‡"></a>7.4 æ•°ç»„å»é‡</h4><ul><li><p>å°†<code>[1,1,2,2,3,3,4,4,5,5]</code>å»é‡, ç»“æœåº”è¯¥æ˜¯<code>[1,2,3,4,5]</code></p></li><li><p>æ–¹æ³•ä¸€: <code>ES6</code>çš„<code>Set</code>å»é‡</p></li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> setData = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(arr));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(setData);</span><br></pre></td></tr></table></figure><blockquote><p><code>Set</code>å»é‡æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œæ— æ³•å»é‡å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚æ¯”å¦‚å¯¹è±¡æ•°ç»„<code>[&#123;a:1&#125;, &#123;a:1&#125;]</code></p></blockquote><ul><li>æ–¹æ³•äºŒ: åŒé‡<code>for</code>å¾ªç¯å»é‡</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleRemoveRepeat</span> = (<span class="params">arr</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] === arr[j]) &#123;</span><br><span class="line">        arr.<span class="title function_">splice</span>(j, <span class="number">1</span>);</span><br><span class="line">        j--;</span><br><span class="line">        len--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨<code>len = arr.length</code>çš„åŸå› : å‡è®¾è¿™ä¸ªå¾ªç¯éœ€è¦å¾ªç¯<code>10000</code>æ¬¡ï¼Œ<code>length</code>å°±ä¼šè¢«æ‰§è¡Œ<code>10000</code>æ¬¡</p></blockquote><hr><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><blockquote><p>æ–‡ä»¶è¿˜æœªä¸Šä¼  Github</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
